<!DOCTYPE html><html lang="ja"><meta charset="utf-8"><title>6 ウェブアプリケーションAPI — HTML5 日本語訳</title><script src="link-fixup.js"></script>
<style type="text/css">

     .applies thead th > * { display: block; }
     .applies thead code { display: block; }
     .applies tbody th { white-space: nowrap; }
     .applies td { text-align: center; }
     .applies .yes { background: yellow; }

     .matrix, .matrix td { border: hidden; text-align: right; }
     .matrix { margin-left: 2em; }

     .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
     .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
     .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

     td.eg { border-width: thin; text-align: center; }

     #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
     #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
     #table-example-1 caption { padding-bottom: 0.5em; }
     #table-example-1 thead, #table-example-1 tbody { border: none; }
     #table-example-1 th, #table-example-1 td { border: solid thin; }
     #table-example-1 th { font-weight: normal; }
     #table-example-1 td { border-style: none solid; vertical-align: top; }
     #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
     #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
     #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
     #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
     #table-example-1 tbody td:first-child::after { content: leader(". "); }
     #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
     #table-example-1 tbody td:first-child + td { width: 10em; }
     #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
     #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

     .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
     .apple-table-examples * { font-family: "Times", serif; }
     .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
     .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
     .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
     .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
     .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
     .apple-table-examples td { text-align: right; vertical-align: top; }
     .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
     .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
     .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
     .apple-table-examples sup { line-height: 0; }

     .details-example img { vertical-align: top; }

     #base64-table {
       white-space: nowrap;
       font-size: 0.6em;
       column-width: 6em;
       column-count: 5;
       column-gap: 1em;
       -moz-column-width: 6em;
       -moz-column-count: 5;
       -moz-column-gap: 1em;
       -webkit-column-width: 6em;
       -webkit-column-count: 5;
       -webkit-column-gap: 1em;
     }
     #base64-table thead { display: none; }
     #base64-table * { border: none; }
     #base64-table tbody td:first-child:after { content: ':'; }
     #base64-table tbody td:last-child { text-align: right; }

     #named-character-references-table {
       white-space: nowrap;
       font-size: 0.6em;
       column-width: 30em;
       column-gap: 1em;
       -moz-column-width: 30em;
       -moz-column-gap: 1em;
       -webkit-column-width: 30em;
       -webkit-column-gap: 1em;
     }
     #named-character-references-table > table > tbody > tr > td:first-child + td,
     #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
     #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
     #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

     .glyph.control { color: red; }

     @font-face {
       font-family: 'Essays1743';
       src: url('fonts/Essays1743.ttf');
     }
     @font-face {
       font-family: 'Essays1743';
       font-weight: bold;
       src: url('fonts/Essays1743-Bold.ttf');
     }
     @font-face {
       font-family: 'Essays1743';
       font-style: italic;
       src: url('fonts/Essays1743-Italic.ttf');
     }
     @font-face {
       font-family: 'Essays1743';
       font-style: italic;
       font-weight: bold;
       src: url('fonts/Essays1743-BoldItalic.ttf');
     }

    </style>
<style type="text/css">
       pre { margin-left: 2em; white-space: pre-wrap; }
       h2 { margin: 3em 0 1em 0; }
       h3 { margin: 2.5em 0 1em 0; }
       h4 { margin: 2.5em 0 0.75em 0; }
       h5, h6 { margin: 2.5em 0 1em; }
       h1 + h2, h1 + h2 + h2, h1 + p, h1 + p + h2 { margin: 0.75em 0 0.75em; }
       h2 + h3, h3 + h4, h4 + h5, h5 + h6 { margin-top: 0.5em; }
       p { margin: 1em 0; }
       hr:not(.top) { display: block; background: none; border: none; padding: 0; margin: 2em 0; height: auto; }
       .element dd,  .element dl { margin-top: 0em; margin-bottom: 0.25em;}
       dt { margin-top: 0.75em; margin-bottom: 0.5em; clear: left; }
        .element dt { margin-top: 0.5em; margin-bottom: 0.5em;  }
       dt + dt { margin-top: 0; }
       dd dt { margin-top: 0.25em; margin-bottom: 0; }
       dd p { margin-top: 0; }
       dd dl + p { margin-top: 1em; }
       dd table + p { margin-top: 1em; }
       p + * > li, dd li { margin: 1em 0; }
       dt, dfn { font-weight: bold; font-style: normal; }
       i, em { font-style: italic; }
       dt dfn { font-style: italic; }
       pre, code { font-size: inherit; font-family: monospace; font-variant: normal; }
       pre strong { color: black; font: inherit; font-weight: bold; background: yellow; }
       pre em { font-weight: bolder; font-style: normal; }
       @media screen { code { color: #D93B00; } code :link, code :visited { color: inherit; } }
       var { background-color: #f9f9f9; border: 1px solid #eee; padding: 0 2px; }
       var sub { vertical-align: bottom; font-size: smaller; position: relative; top: 0.1em; }
       table { border-collapse: collapse; border-style: hidden hidden none hidden; }
       table thead, table tbody { border-bottom: solid; }
       table tbody th:first-child { border-left: solid; }
       table tbody th { text-align: left; }
       table td, table th { border-left: solid; border-right: solid; border-bottom: solid thin; vertical-align: top; padding: 0.2em; }
       blockquote { margin: 0 0 0 2em; border: 0; padding: 0; font-style: italic; }

       .bad, .bad *:not(.XXX) { color: #5F6D7A; border-color: gray; background: transparent; }
       .matrix, .matrix td { border: none; text-align: right; }
       .matrix { margin-left: 2em; }
       .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
       .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
       .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

       .toc dfn, h1 dfn, h2 dfn, h3 dfn, h4 dfn, h5 dfn, h6 dfn { font: inherit; }
       img.extra, p.overview { float: right; }
       pre.idl { border: solid thin #d3d3d3; background: #FCFCFC; color: black; padding: 0.5em 1em; position: relative; }
       pre.idl :link, pre.idl :visited { color: inherit; background: transparent; }
       pre.idl::before { content: "IDL"; font: bold small sans-serif; padding: 0.5em; background: white; position: absolute; top: 0; margin: -1px 0 0 -4em; width: 1.5em; border: thin solid; border-radius: 0 0 0 0.5em }
       pre.css { border: solid thin; background: #FFFFEE; color: black; padding: 0.5em 1em; }
       pre.css:first-line { color: #AAAA50; }
       dl.domintro {padding: 0.5em 1em; border: none; background:#E9FBE9; border: 1px solid lightgray; }
       hr + dl.domintro, div.impl + dl.domintro { margin-top: 2.5em; margin-bottom: 1.5em; }
       dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
       dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
       dl.domintro dd p { margin: 0.5em 0; }
       dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This definition is non-normative. Implementation requirements are given below this definition.'; color: #606060; border:1px solid lightgray; background: white; padding: 0 0.25em;font-size:.9em;}
       dl.switch { padding-left: 2em; }
       dl.switch > dt { text-indent: -1.5em; }
       dl.switch > dt:before { content: '\21AA'; padding: 0 0.5em 0 0; display: inline-block; width: 1em; text-align: right; line-height: 0.5em; }
       dl.triple { padding: 0 0 0 1em; }
       dl.triple dt, dl.triple dd { margin: 0; display: inline }
       dl.triple dt:after { content: ':'; }
       dl.triple dd:after { content: '\A'; white-space: pre; }
       .diff-old { text-decoration: line-through; color: silver; background: transparent; }
       .diff-chg, .diff-new { text-decoration: underline; color: green; background: transparent; }
       a .diff-new { border-bottom: 1px blue solid; }

       figure.diagrams { border: double black; background: white; padding: 1em; }
       figure.diagrams img { display: block; margin: 1em auto; } 

       h2 { page-break-before: always; }
       h1, h2, h3, h4, h5, h6 { page-break-after: avoid; }
       h1 + h2, hr + h2.no-toc { page-break-before: auto; }

       p  > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]):not([class="t2"]):not([id]):not([lang]),
       li > span:not([title=""]):not([class="XXX"]):not([class="impl"]):not([class="note"]):not([class="t2"]):not([id]):not([lang])
       { border-bottom: solid #9999CC; }

       div.head { margin: 0 0 1em; padding: 1em 0 0 0; }
       div.head p { margin: 0; }
       div.head h1 { margin: 0; }
       div.head .logo { float: right; margin: 0 1em; }
       div.head .logo img { border: none } /* remove border from top image */
       div.head dl { margin: 1em 0; }
       div.head p.copyright, div.head p.alt { font-size: x-small; font-style: oblique; margin: 0; }

       body > .toc > li { margin-top: 1em; margin-bottom: 1em; }
       body > .toc.brief > li { margin-top: 0.35em; margin-bottom: 0.35em; }
       body > .toc > li > * { margin-bottom: 0.5em; }
       body > .toc > li > * > li > * { margin-bottom: 0.25em; }
       .toc, .toc li { list-style: none; }

       .brief { margin-top: 1em; margin-bottom: 1em; line-height: 1.1; }
       .brief li { margin: 0; padding: 0; }
       .brief li p { margin: 0; padding: 0; }

       .category-list { margin-top: -0.75em; margin-bottom: 1em; line-height: 1.5; }
       .category-list::before { content: '\21D2\A0'; font-size: 1.2em; font-weight: 900; }
       .category-list li { display: inline; }
       .category-list li:not(:last-child)::after { content: ', '; }
       .category-list li > span, .category-list li > a { text-transform: lowercase; }
       .category-list li * { text-transform: none; } /* don't affect <code> nested in <a> */

       .XXX { color: #E50000; background: white; border: solid red; padding: 0.5em; margin: 1em 0; }
       .XXX > :first-child { margin-top: 0; }
       p .XXX { line-height: 3em; }
       .annotation { border: solid thin black; background: #0C479D; color: white; position: relative; margin: 8px 0 20px 0; }
       .annotation:before { position: absolute; left: 0; top: 0; width: 100%; height: 100%; margin: 6px -6px -6px 6px; background: #333333; z-index: -1; content: ''; }
       .annotation :link, .annotation :visited { color: inherit; }
       .annotation :link:hover, .annotation :visited:hover { background: transparent; }
       .annotation span { border: none ! important; }
       .note { border-left-style: solid; border-left-width: 0.25em; background: none repeat scroll 0 0 #E9FBE9; border-color: #52E052; }
       .warning { background-color: #F9F0D4; border: medium double #FF0000; margin: 1em; padding: 1em; }
       .note em, .warning em, .note i, .warning i { font-style: normal; }
       p.note, div.note { padding: 0.5em 2em; }
       span.note { padding: 0 2em; }
       .note p:first-child, .warning p:first-child { margin-top: 0; }
       .note p:last-child, .warning p:last-child { margin-bottom: 0; }
       .warning:before { font-style: normal; }
       p.note:before { content: 'Note: '; font-weight: bolder;}
       p.warning:before { content: '\26A0 Warning! '; font-weight:bolder;}
       .critical {margin:1em; border:double red; padding:1em; background-color:#F9F0D4;}

       .bookkeeping:before { display: block; content: 'Bookkeeping details'; font-weight: bolder; font-style: italic; }
       .bookkeeping { font-size: 0.8em; margin: 2em 0; }
       .bookkeeping p { margin: 0.5em 2em; display: list-item; list-style: square; }
       .bookkeeping dt { margin: 0.5em 2em 0; }
       .bookkeeping dd { margin: 0 3em 0.5em; }

       h4 { position: relative; z-index: 3; }
       h4 + .element, h4 + div + .element { margin-top: -2.5em; padding-top: 2em; }
       .element {
         background: #F4F4FA;
         color: black;
         margin: 0 0 1em 0.15em;
         padding: 0 1em 0.25em 0.75em;
         border-left: solid #9999FF 0.25em;
         position: relative;
         z-index: 1;
       }
       .element:before {
         position: absolute;
         z-index: 2;
         top: 0;
         left: -1.15em;
         height: 2em;
         width: 0.9em;
         background: #F4F4FA;
         content: ' ';
         border-style: none none solid solid;
         border-color: #9999FF;
         border-width: 0.25em;
       }

       .example { display: block; color: #222222; background: #FCFCFC; border-left-style: solid;border-color:#c0c0c0; border-left-width: 0.25em; margin-left: 1em; padding-left: 1em;padding-bottom: 0.5em;}
       div.example:before { content: 'Code Example: '; font-weight: bolder;}
       td > .example:only-child { margin: 0 0 0 0.1em; }

       ul.domTree, ul.domTree ul { padding: 0 0 0 1em; margin: 0; }
       ul.domTree li { padding: 0; margin: 0; list-style: none; position: relative; }
       ul.domTree li li { list-style: none; }
       ul.domTree li:first-child::before { position: absolute; top: 0; height: 0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
       ul.domTree li:not(:last-child)::after { position: absolute; top: 0; bottom: -0.6em; left: -0.75em; width: 0.5em; border-style: none none solid solid; content: ''; border-width: 0.1em; }
       ul.domTree span { font-style: italic; font-family: serif; }
       ul.domTree .t1 code { color: purple; font-weight: bold; }
       ul.domTree .t2 { font-style: normal; font-family: monospace; }
       ul.domTree .t2 .name { color: black; font-weight: bold; }
       ul.domTree .t2 .value { color: blue; font-weight: normal; }
       ul.domTree .t3 code, .domTree .t4 code, .domTree .t5 code { color: gray; }
       ul.domTree .t7 code, .domTree .t8 code { color: green; }
       ul.domTree .t10 code { color: teal; }

       body.dfnEnabled dfn { cursor: pointer; }
       .dfnPanel {
         display: inline;
         position: absolute;
         z-index: 10;
         height: auto;
         width: auto;
         padding: 0.5em 0.75em;
         font: small sans-serif, Droid Sans Fallback;
         background: #DDDDDD;
         color: black;
         border: outset 0.2em;
       }
       .dfnPanel * { margin: 0; padding: 0; font: inherit; text-indent: 0; }
       .dfnPanel :link, .dfnPanel :visited { color: black; }
       .dfnPanel p { font-weight: bolder; }
       .dfnPanel * + p { margin-top: 0.25em; }
       .dfnPanel li { list-style-position: inside; }

       #configUI { position: absolute; z-index: 20; top: 10em; right: 1em; width: 11em; font-size: small; }
       #configUI p { margin: 0.5em 0; padding: 0.3em; background: #EEEEEE; color: black; border: inset thin; }
       #configUI p label { display: block; }
       #configUI #updateUI, #configUI .loginUI { text-align: center; }
       #configUI input[type=button] { display: block; margin: auto; }

       fieldset { margin: 1em; padding: 0.5em 1em; }
       fieldset > legend + * { margin-top: 0; }
       fieldset > :last-child { margin-bottom: 0; }
       fieldset p { margin: 0.5em 0; }
       header p.subline {color:#005A9C; font: 140% sans-serif;margin: 0.75em 0;}
       #authorButton {overflow: visible; padding: 0.1em 0.3em; position: fixed; right: 2em; top: 6em; width: auto;}

       @media print {#authorButton { display:none;}}

   .stability {
     position: fixed;
     bottom: 0;
     left: 0; right: 0;
     margin: 0 auto 0 auto;
     width: 50%;
     background: maroon; color: yellow;
     -webkit-border-radius: 1em 1em 0 0;
     -moz-border-radius: 1em 1em 0 0;
     border-radius: 1em 1em 0 0;
     -moz-box-shadow: 0 0 1em #500;
     -webkit-box-shadow: 0 0 1em #500;
     box-shadow: 0 0 1em red;
     padding: 0.5em 1em;
     text-align: center;
   }
   .stability strong {
     display: block;
   }
   .stability input {
     -moz-appearance: none; -webkit-appearance: none; margin: 0; 
     border: 0; padding: 0.25em 0.5em; background: transparent; color: black;
     position: absolute; top: -0.5em; right: 0; font: 1.25em sans-serif; text-align: center;
   }
   .stability input:hover {
     color: white;
     text-shadow: 0 0 2px black;
   }
   .stability input:active {
     padding: 0.3em 0.45em 0.2em 0.55em;
   }
   .stability :link, .stability :visited,
   .stability :link:hover, .stability :visited:hover {
     background: transparent;
     color: white;
   }

  </style><!-- style switcher script by Stommepoes  --><link href="http://www.w3.org/StyleSheets/TR/W3C-PR" rel="stylesheet" type="text/css"><link href="switcher/author-view.css" id="author-view" rel="alternate stylesheet" title="Author documentation only"><script src="switcher/authorstylesheet.js"></script><link href="browsers.html" rel="prev" title="5 Loading Web pages">
  <link href="Overview.html#contents" rel="contents" title="目次">
  <link href="editing.html" rel="next" title="7 User interaction">
  <body class="split chapter" onload="fixBrokenLink();"><div class="head" id="head">
<header><span id="styleSwitch"></span>
   <p><a href="http://www.w3.org/"><img alt="W3C" height="48" src="http://www.w3.org/Icons/w3c_home" width="72"></a></p>

    <h1 id="big-title">HTML5日本語訳</h1>
    <p class="no-num no-toc subline">HTMLとXHTMLのための語彙と関連API</p>
   <h2 class="no-num no-toc" id="w3c-proposed-recommendation-16-september-2014">W3C Proposed Recommendation 16 September 2014</h2>
   </header></div>
  

  <nav class="prev_next">
   <a href="browsers.html">← 5 ウェブページの読み込み</a> – <a href="Overview.html#contents">目次</a> – <a href="editing.html">7 ユーザーとの対話処理 →</a>
  <ol class="toc"><li><a href="webappapis.html#webappapis"><span class="secno">6</span> ウェブアプリケーションAPI</a>
  <ol><li><a href="webappapis.html#scripting"><span class="secno">6.1</span> スクリプティング</a>
    <ol><li><a href="webappapis.html#introduction-4"><span class="secno">6.1.1</span> 導入</a></li><li><a href="webappapis.html#enabling-and-disabling-scripting"><span class="secno">6.1.2 </span>Enabling and disabling scripting</a></li><li><a href="webappapis.html#processing-model-2"><span class="secno">6.1.3 </span>Processing model</a>
      <ol><li><a href="webappapis.html#definitions-0"><span class="secno">6.1.3.1 </span>Definitions</a></li><li><a href="webappapis.html#script-settings-for-browsing-contexts"><span class="secno">6.1.3.2 </span>Script settings for browsing contexts</a></li><li><a href="webappapis.html#calling-scripts"><span class="secno">6.1.3.3 </span>Calling scripts</a></li><li><a href="webappapis.html#creating-scripts"><span class="secno">6.1.3.4 </span>Creating scripts</a></li><li><a href="webappapis.html#killing-scripts"><span class="secno">6.1.3.5 </span>Killing scripts</a></li><li><a href="webappapis.html#runtime-script-errors"><span class="secno">6.1.3.6 </span>Runtime script errors</a>
        <ol><li><a href="webappapis.html#runtime-script-errors-in-documents"><span class="secno">6.1.3.6.1 </span>Runtime script errors in documents</a></li><li><a href="webappapis.html#the-errorevent-interface"><span class="secno">6.1.3.6.2</span> <code>ErrorEvent</code>インターフェース</a></li></ol></li></ol></li><li><a href="webappapis.html#event-loops"><span class="secno">6.1.4 </span>Event loops</a>
      <ol><li><a href="webappapis.html#definitions-1"><span class="secno">6.1.4.1 </span>Definitions</a></li><li><a href="webappapis.html#processing-model-3"><span class="secno">6.1.4.2 </span>Processing model</a></li><li><a href="webappapis.html#generic-task-sources"><span class="secno">6.1.4.3 </span>Generic task sources</a></li></ol></li><li><a href="webappapis.html#events"><span class="secno">6.1.5</span> イベント</a>
      <ol><li><a href="webappapis.html#event-handler-attributes"><span class="secno">6.1.5.1</span> イベントハンドラ</a></li><li><a href="webappapis.html#event-handlers-on-elements,-document-objects,-and-window-objects"><span class="secno">6.1.6.2</span> 要素のイベントハンドラ、<code>Document</code>オブジェクト、および<code>Window</code>オブジェクト</a>
        <ol><li><a href="webappapis.html#idl-definitions"><span class="secno">6.1.5.2.1</span> IDL定義</a></li></ol></li><li><a href="webappapis.html#event-firing"><span class="secno">6.1.5.3 </span>Event firing</a></li><li><a href="webappapis.html#events-and-the-window-object"><span class="secno">6.1.5.4 </span>Events and the <code>Window</code> object</a></li></ol></li></ol></li><li><a href="webappapis.html#atob"><span class="secno">6.2</span> Base64のユーティリティメソッド</a></li><li><a href="webappapis.html#dynamic-markup-insertion"><span class="secno">6.3</span> 動的マークアップの挿入</a>
    <ol><li><a href="webappapis.html#opening-the-input-stream"><span class="secno">6.3.1</span> 入力ストリームを開く</a></li><li><a href="webappapis.html#closing-the-input-stream"><span class="secno">6.3.2</span> 入力ストリームを閉じる</a></li><li><a href="webappapis.html#document.write()"><span class="secno">6.3.3</span> <code data-anolis-xref="dom-document-write">document.write()</code></a></li><li><a href="webappapis.html#document.writeln()"><span class="secno">6.3.4</span> <code data-anolis-xref="dom-document-writeln">document.writeln()</code></a></li></ol></li><li><a href="webappapis.html#timers"><span class="secno">6.4</span> タイマー</a></li><li><a href="webappapis.html#user-prompts"><span class="secno">6.5</span> ユーザープロンプト</a>
    <ol><li><a href="webappapis.html#simple-dialogs"><span class="secno">6.5.1</span> 単純ダイアログ</a></li><li><a href="webappapis.html#printing"><span class="secno">6.5.2</span> 表示</a></li></ol></li><li><a href="webappapis.html#system-state-and-capabilities"><span class="secno">6.6</span> システム状態および性能</a>
    <ol><li><a href="webappapis.html#the-navigator-object"><span class="secno">6.6.1</span> <code>Navigator</code>オブジェクト</a>
      <ol><li><a href="webappapis.html#client-identification"><span class="secno">6.6.1.1</span> クライアントの識別</a></li><li><a href="webappapis.html#language-preferences"><span class="secno">6.6.1.2</span> 言語の好み</a></li><li><a href="webappapis.html#custom-handlers"><span class="secno">6.6.1.3</span> カスタムスキームおよびコンテンツハンドラ</a>
        <ol><li><a href="webappapis.html#security-and-privacy"><span class="secno">6.6.1.3.1 </span>Security and privacy</a></li><li><a href="webappapis.html#sample-handler-impl"><span class="secno">6.6.1.3.2 </span>Sample user interface</a></li></ol></li><li><a href="webappapis.html#manually-releasing-the-storage-mutex"><span class="secno">6.6.1.4</span> ストレージミューテックスを手動解放する</a></li><li><a href="webappapis.html#plugins-0"><span class="secno">6.6.1.5</span> プラグイン</a></li></ol></li><li><a href="webappapis.html#the-external-interface"><span class="secno">6.6.2</span> <code>History</code>インターフェース</a></li></ol></li></ol></li></ol></nav>

  <h2 id="webappapis"><span class="secno">6</span> ウェブアプリケーションAPI</h2>

  <h3 id="scripting"><span class="secno">6.1</span> スクリプティング</h3>

  <h4 id="introduction-4"><span class="secno">6.1.1</span> 導入</h4>

  <p>様々なメカニズムが文書のコンテキストで実行するよう著者が提供する実行可能コードを引き起こすかもしれない。これらのメカニズムは以下を含むが、おそらく以下に限定されない：</p>

  <ul><li><code><a href="scripting-1.html#the-script-element">script</a></code>要素の処理。</li>

   <li><a data-anolis-xref="javascript protocol" href="browsers.html#javascript-protocol"><code>javascript:</code> URL</a>をナビゲートする。</li>

   <li><code data-anolis-xref="">addEventListener()</code>を使用するDOMを介して、明示的な<a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>によって、<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>によって、またはそれ以外で、登録されるかどうかのイベントハンドラ。</li>

   <li>独自のスクリプト機能を持つXBLやSVGのような技術の処理。</li>

  </ul><div class="impl">

  <h4 id="enabling-and-disabling-scripting"><span class="secno">6.1.2 </span>Enabling and disabling scripting</h4>

  <p><dfn data-anolis-xref="concept-bc-script" id="concept-bc-script">Scripting is enabled</dfn> in a <em><a href="browsers.html#browsing-context"><span>browsing
  context</span></a></em> when all of the following conditions are true:</p>

  <ul><li>The user agent supports scripting.</li>

   <li>The user has not disabled scripting for this <a href="browsers.html#browsing-context">browsing context</a> at this time.
   (User agents may provide users with the option to disable scripting globally, or in a
   finer-grained manner, e.g. on a per-origin basis.)
   <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
   </li>

   <li id="sandboxScriptBlocked">The <a href="browsers.html#browsing-context">browsing context</a>'s <a href="browsers.html#active-document">active document</a>'s
   <a href="browsers.html#active-sandboxing-flag-set">active sandboxing flag set</a> does not have its <a href="browsers.html#sandboxed-scripts-browsing-context-flag">sandboxed scripts browsing
   context flag</a> set.</li>

  </ul><p><dfn data-anolis-xref="concept-bc-noscript" id="concept-bc-noscript">Scripting is disabled</dfn> in a <a href="browsers.html#browsing-context">browsing context</a>
  when any of the above conditions are false (i.e. when scripting is not <a data-anolis-xref="concept-bc-script" href="#concept-bc-script">enabled</a>).</p>

  <hr><p><dfn data-anolis-xref="concept-n-script" id="concept-n-script">Scripting is enabled</dfn> for a <em><a href="infrastructure.html#node">node</a></em> if the
  <code><a href="dom.html#document">Document</a></code> object of the node (the node itself, if it is itself a <code><a href="dom.html#document">Document</a></code>
  object) has an associated <a href="browsers.html#browsing-context">browsing context</a>, and <a data-anolis-xref="concept-bc-script" href="#concept-bc-script">scripting is enabled</a> in that <a href="browsers.html#browsing-context">browsing context</a>.</p>

  <p><dfn data-anolis-xref="concept-n-noscript" id="concept-n-noscript">Scripting is disabled</dfn> for a node if there is no such
  <a href="browsers.html#browsing-context">browsing context</a>, or if <a data-anolis-xref="concept-bc-noscript" href="#concept-bc-noscript">scripting is
  disabled</a> in that <a href="browsers.html#browsing-context">browsing context</a>.</p>

  </div>


  <div class="impl">

  <!-- SCRIPT EXEC (marks areas related to creation of scripts) -->
  <h4 id="processing-model-2"><span class="secno">6.1.3 </span>Processing model</h4>

  <h5 id="definitions-0"><span class="secno">6.1.3.1 </span>Definitions</h5>

  <p>This specification describes three kinds of <a data-anolis-xref="JavaScript global
  environment" href="infrastructure.html#javascript-global-environment">JavaScript global environments</a>: the <dfn id="document-environment">document environment</dfn>, the
  <dfn id="dedicated-worker-environment">dedicated worker environment</dfn>, and the <dfn id="shared-worker-environment">shared worker environment</dfn>. The
  <a href="#dedicated-worker-environment">dedicated worker environment</a> and the <a href="#shared-worker-environment">shared worker environment</a> are both
  types of <dfn data-anolis-xref="worker environment" id="worker-environment">worker environments</dfn>.</p>

  <p>Except where otherwise specified, a <a href="infrastructure.html#javascript-global-environment">JavaScript global environment</a> is a
  <a href="#document-environment">document environment</a>.</p> <!-- note that we never actually say where one of these is
  created... -->

  <hr><p>A <dfn data-anolis-xref="concept-script" id="concept-script">script</dfn> has:</p>

  <dl><dt>A <dfn id="code-entry-point">code entry-point</dfn></dt>

   <dd>

    <p>A code entry-point represents a block of executable code that the script exposes to other
    scripts and to the user agent. Typically, the code corresponding to the code entry-point is
    executed immediately after the script is parsed, but for event handlers, it is called each time
    the handler is invoked.</p>

    <p class="example">In JavaScript <code><a href="scripting-1.html#the-script-element">script</a></code> blocks, this corresponds to the execution
    context of the global code.</p>

   </dd>

   <dt>Optionally, a <dfn id="muted-errors">muted errors</dfn> flag</dt>

   <dd>

    <p>A flag which, if set, means that error information will not be provided for errors in this
    script (used to mute errors for cross-origin scripts, since that can leak private
    information).</p>

   </dd>

   <dt>A <dfn id="settings-object">settings object</dfn></dt>

   <dd>

    <p>A <a href="#script-settings-object">script settings object</a>, various settings that are shared with other scripts in
    the same context.</p>

   </dd>

  </dl><hr><p>A <dfn id="script-settings-object">script settings object</dfn> specifies algorithms for obtaining the following:</p>

  <dl><dt>A <dfn id="script-execution-environment">script execution environment</dfn> for each language supported by the user agent</dt>

   <dd>

    <p>The characteristics of the script execution environment depend on the language, and are not
    defined by this specification.</p>

    <p class="example">In JavaScript, the script execution environment consists of the interpreter,
    the stack of <i>execution contexts</i>, the <i>global code</i> and <i>function code</i> and the
    <code>Function</code> objects resulting, and so forth.</p>

   </dd>

   <dt>A <dfn id="global-object">global object</dfn></dt>
   <dd>

    <p>An object that provides the APIs that can be called by the code in scripts that use this
    <a data-anolis-xref="script settings object" href="#script-settings-object">settings object</a>.</p>

    <p class="note">This is typically a <code><a href="browsers.html#window">Window</a></code> object or a
    <code>WorkerGlobalScope</code> object. When a <a href="#global-object">global object</a> is an empty object, it
    can't do anything that interacts with the environment.</p>

<!--CLEANUP-->
    <p>If the <a href="#global-object">global object</a> is a <code><a href="browsers.html#window">Window</a></code> object, then, in
    JavaScript, the ThisBinding of the global execution context for this script must be the
    <code><a href="browsers.html#window">Window</a></code> object's <code><a href="browsers.html#windowproxy">WindowProxy</a></code> object, rather than the global object. <a href="references.html#refsECMA262">[ECMA262]</a></p>

    <p class="note">This is a <a href="introduction.html#willful-violation">willful violation</a> of the JavaScript specification current
    at the time of writing (ECMAScript edition 5, as defined in section 10.4.1.1 Initial Global
    Execution Context, step 3). The JavaScript specification requires that the <code data-anolis-xref="">this</code> keyword in the global scope return the global object, but this is not
    compatible with the security design prevalent in implementations as specified herein. <a href="references.html#refsECMA262">[ECMA262]</a></p>

   </dd>

   <dt>A <dfn id="responsible-browsing-context">responsible browsing context</dfn></dt>

   <dd>

    <p>A <a href="browsers.html#browsing-context">browsing context</a> that is assigned responsibility for actions taken by the
    scripts that use this <a href="#script-settings-object">script settings object</a>.</p>

    <p class="example">When a script creates and <a data-anolis-xref="navigate" href="browsers.html#navigate">navigates</a> a new
    <a href="browsers.html#top-level-browsing-context">top-level browsing context</a>, the <code data-anolis-xref="dom-opener"><a href="browsers.html#dom-opener">opener</a></code> attribute
    of the new <a href="browsers.html#browsing-context">browsing context</a>'s <code><a href="browsers.html#window">Window</a></code> object will be set to the
    <a href="#responsible-browsing-context">responsible browsing context</a>'s <code><a href="browsers.html#windowproxy">WindowProxy</a></code> object.</p>

   </dd>

   <dt>A <dfn id="responsible-document">responsible document</dfn></dt>

   <dd>

    <p>A <code><a href="dom.html#document">Document</a></code> that is assigned responsibility for actions taken by the scripts that
    use this <a href="#script-settings-object">script settings object</a>.</p>

<!--CLEANUP-->
    <p class="example">For example, the <a data-anolis-xref="the document's address" href="dom.html#the-document's-address">address</a> of the
    <a href="#responsible-document">responsible document</a> is used to set the <a data-anolis-xref="the document's
    address" href="dom.html#the-document's-address">address</a> of any <code><a href="dom.html#document">Document</a></code>s created using <code data-anolis-xref="dom-DOMImplementation-createDocument"><a href="infrastructure.html#dom-domimplementation-createdocument">createDocument()</a></code>.</p>

   </dd>

   <dt>A <dfn id="responsible-event-loop">responsible event loop</dfn></dt>

   <dd>

    <p>An <a href="#event-loop">event loop</a> that is used when it would not be immediately clear what event
    loop to use.</p>

   </dd>

   <dt>An <dfn id="api-referrer-source">API referrer source</dfn></dt>

   <dd>

    <p>Either a <code><a href="dom.html#document">Document</a></code> (specifically, the <a href="#responsible-document">responsible document</a>), or a
    <span>URL</span>, which is used by some APIs to determine what value to use for the <code data-anolis-xref="http-referer">Referer</code> (sic) header in calls to the <a data-anolis-xref="fetch" href="infrastructure.html#fetch">fetching</a> algorithm.</p>

   </dd>

   <dt>An <dfn id="api-url-character-encoding">API URL character encoding</dfn></dt>

   <dd>

<!--CLEANUP-->
    <p>A character encoding used to encode URLs by APIs called by scripts that use
    this <a href="#script-settings-object">script settings object</a>.</p>

   </dd>

   <dt>An <dfn id="api-base-url">API base URL</dfn></dt>

   <dd>

<!--CLEANUP-->
    <p>An <a href="infrastructure.html#absolute-url">absolute URL</a> used by APIs called by scripts that use
    this <a href="#script-settings-object">script settings object</a> to resolve <a data-anolis-xref="relative
    URL" href="infrastructure.html#relative-url">relative URLs</a>.</p>

   </dd>

   <dt>An <a href="browsers.html#origin-0">origin</a> and an <a href="browsers.html#effective-script-origin">effective script origin</a></dt>

   <dd>

    <p>An instrument used in security checks.</p>

   </dd>

  </dl><p>The <dfn id="relevant-settings-object-for-a-global-object">relevant settings object for a global object</dfn> <var data-anolis-xref="">o</var> is the
  <a href="#script-settings-object">script settings object</a> whose <a href="#global-object">global object</a> is <var data-anolis-xref="">o</var>.
  (There is always a 1:1 mapping of global objects to script settings objects.)</p>

  <p>The <dfn id="relevant-settings-object-for-a-script">relevant settings object for a script</dfn> <var data-anolis-xref="">s</var> is the
  <a href="#settings-object">settings object</a> of <var data-anolis-xref="">s</var>.</p>



  <h5 id="script-settings-for-browsing-contexts"><span class="secno">6.1.3.2 </span>Script settings for browsing contexts</h5>

  <p>Whenever a new <code><a href="browsers.html#window">Window</a></code> object is created, it must also create a <a href="#script-settings-object">script
  settings object</a> whose algorithms are defined as follows:</p>

  <dl><dt>The <a data-anolis-xref="script execution environment" href="#script-execution-environment">script execution environments</a></dt>
   <dd>

    <p>When the <a href="#script-settings-object">script settings object</a> is created, for each language supported by the
    user agent, create an appropriate execution environment as defined by the relevant
    specification.</p>

    <p>When a <a href="#script-execution-environment">script execution environment</a> is needed, return the appropriate one from
    those created when the <a href="#script-settings-object">script settings object</a> was created.</p>

   </dd>

   <dt>The <a href="#global-object">global object</a></dt>
   <dd>

    <p>Return the <code><a href="browsers.html#window">Window</a></code> object itself.</p>

   </dd>

   <dt>The <a href="#responsible-browsing-context">responsible browsing context</a></dt>
   <dd>

    <p>Return the <a href="browsers.html#browsing-context">browsing context</a> with which the <code><a href="browsers.html#window">Window</a></code> object is
    associated.</p>

   </dd>

   <dt>The <a href="#responsible-document">responsible document</a></dt>
   <dd>

    <p>Return the <code><a href="dom.html#document">Document</a></code> with which the <code><a href="browsers.html#window">Window</a></code> is currently
    associated.</p>

   </dd>

   <dt>The <a href="#responsible-event-loop">responsible event loop</a></dt>
   <dd>

    <p>Return the <a href="#event-loop">event loop</a> that is associated with the <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related
    similar-origin browsing contexts</a> to which the <code><a href="browsers.html#window">Window</a></code> object's <a href="browsers.html#browsing-context">browsing
    context</a> belongs.</p>

   </dd>

   <dt>The <a href="#api-referrer-source">API referrer source</a></dt>
   <dd>

    <p>Return the <code><a href="dom.html#document">Document</a></code> with which the <code><a href="browsers.html#window">Window</a></code> is currently
    associated.</p>

   </dd>

   <dt>The <a href="#api-url-character-encoding">API URL character encoding</a></dt>
   <dd>

    <p>Return the current <a data-anolis-xref="document's character encoding" href="infrastructure.html#document's-character-encoding">character encoding</a> of
    the <code><a href="dom.html#document">Document</a></code> with which the <code><a href="browsers.html#window">Window</a></code> is currently associated.</p>

   </dd>

   <dt>The <a href="#api-base-url">API base URL</a></dt>
   <dd>

    <p>Return the current <a data-anolis-xref="document base URL" href="infrastructure.html#document-base-url">base URL</a> of the
    <code><a href="dom.html#document">Document</a></code> with which the <code><a href="browsers.html#window">Window</a></code> is currently associated.</p>

   </dd>

   <dt>The <a href="browsers.html#origin-0">origin</a></dt>
   <dd>

    <p>Return the <a href="browsers.html#origin-0">origin</a> of the <code><a href="dom.html#document">Document</a></code> with which the
    <code><a href="browsers.html#window">Window</a></code> is currently associated.</p>

   </dd>

   <dt>The <a href="browsers.html#effective-script-origin">effective script origin</a></dt>
   <dd>

    <p>Return the <a href="browsers.html#effective-script-origin">effective script origin</a> of the <code><a href="dom.html#document">Document</a></code> with which the
    <code><a href="browsers.html#window">Window</a></code> is currently associated.</p>

   </dd>

  </dl><h5 id="calling-scripts"><span class="secno">6.1.3.3 </span>Calling scripts</h5>

<!--CLEANUP-->
  <p>Each <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> has a <dfn id="stack-of-script-settings-objects">stack of
  script settings objects</dfn>, which must be initially empty. When a new <a href="#script-settings-object">script settings object</a> is <i>pushed</i> onto
  this stack, the specified <a href="#script-settings-object">script settings object</a> is to be added to the stack; when the <a href="#script-settings-object">script settings object</a> on this stack that
  was most recently pushed onto it is to be <i>popped</i> from the stack, it must be removed.
  Entries on this stack can be labeled as <dfn data-anolis-xref="candidate entry settings object" id="candidate-entry-settings-object">candidate entry settings objects</dfn>.</p>

<!--CLEANUP-->
  <p>When a user agent is to <dfn id="jump-to-a-code-entry-point">jump to a code entry-point</dfn> for a <a data-anolis-xref="concept-script" href="#concept-script">script</a> <var data-anolis-xref="">s</var>, the user agent must run the
  following steps:</p>

  <ol><li><p>Let <var data-anolis-xref="">context</var> be the
   <a href="#settings-object">settings object</a> of <var data-anolis-xref="">s</var>.</li>

<!--CLEANUP-->
   <li><p><a href="#prepare-to-run-a-callback">Prepare to run a callback</a> with <var data-anolis-xref="">context</var> as
   the <a href="#script-settings-object">script settings object</a>. If this returns "do not run" then abort these
   steps.</li>

<!--CLEANUP-->
   <li><p>Make the appropriate <a href="#script-execution-environment">script execution environment</a>
   specified by <var data-anolis-xref="">context</var> execute the <var data-anolis-xref="">s</var>'s <a href="#code-entry-point">code
   entry-point</a>.</li>

   <li><p><a href="#clean-up-after-running-a-callback">Clean up after running a callback</a>.</li>

  </ol><!--CLEANUP--><p>The steps to <dfn id="prepare-to-run-a-callback">prepare to run a callback</dfn> with
  a <a href="#script-settings-object">script settings object</a> <var data-anolis-xref="">o</var> are as follows. They
  return either "run" or "do
  not run".</p>

  <ol><!--CLEANUP--><li><p>If the <a href="#global-object">global object</a> specified by <var data-anolis-xref="">o</var>
   is a <code><a href="browsers.html#window">Window</a></code> object whose <code><a href="dom.html#document">Document</a></code> object is not <a href="browsers.html#fully-active">fully
   active</a>, then return "do not run" and abort these steps.</p>

<!--CLEANUP-->
   </li><li><p>If <a data-anolis-xref="concept-bc-noscript" href="#concept-bc-noscript">scripting is disabled</a> for the <a href="#responsible-browsing-context">responsible browsing context</a> specified by <var data-anolis-xref="">o</var>, then return
   "do not run" and abort these steps.</p>

<!--CLEANUP-->
   </li><li><p>Push <var data-anolis-xref="">o</var> onto the <a href="#stack-of-script-settings-objects">stack of script settings objects</a>, and label it
   as a <a href="#candidate-entry-settings-object">candidate entry settings object</a>.</li>

   <li><p>Return "run".</li>

  </ol><p>The steps to <dfn id="clean-up-after-running-a-callback">clean up after running a callback</dfn> are as follows:</p>

  <ol><!--CLEANUP--><li><p>Pop the current <a href="#incumbent-settings-object">incumbent settings object</a> from the <a href="#stack-of-script-settings-objects">stack of script settings
   objects</a>.</li>

<!--CLEANUP-->
   <li><p>If the <a href="#stack-of-script-settings-objects">stack of script settings objects</a> is now empty, <a href="#run-the-global-script-clean-up-jobs">run the global script
   clean-up jobs</a>. (These cannot run scripts.)</li>

<!--CLEANUP-->
   <li><p>If the <a href="#stack-of-script-settings-objects">stack of script settings objects</a> is now empty, <a href="#perform-a-microtask-checkpoint">perform a microtask
   checkpoint</a>. (If this runs scripts, these algorithms will be invoked reentrantly.)</li>

  </ol><p class="note">These algorithms are not invoked by one script directly calling another, but they
  can be invoked reentrantly in an indirect manner, e.g. if a script dispatches an event which has
  event listeners registered.</p>

<!--CLEANUP-->
  <p>When a JavaScript <i>SourceElements</i> production is to be evaluated, the <a href="#settings-object">settings object</a> of the <a data-anolis-xref="concept-script" href="#concept-script">script</a> corresponding to that <i>SourceElements</i> must be pushed
  onto the <a href="#stack-of-script-settings-objects">stack of script settings objects</a> before the evaluation begins, and popped when the
  evaluation ends (regardless of whether it's an abrupt completion or not).</p>

<!--CLEANUP-->
  <p>The <dfn id="entry-settings-object">entry settings object</dfn> is the most-recently added <a href="#script-settings-object">script settings object</a>
  in the <a href="#stack-of-script-settings-objects">stack of script settings objects</a> that is
  labeled as a <a href="#candidate-entry-settings-object">candidate entry settings object</a>. If the stack is
  empty, or has no entries labeled as such, then there is no <a href="#entry-settings-object">entry settings object</a>. It is used
  to obtain, amongst other things, the <a href="#api-base-url">API base URL</a> to <a data-anolis-xref="resolve a
  url" href="infrastructure.html#resolve-a-url">resolve</a> relative <span data-anolis-xref="URL">URLs</span> used in scripts running in that
  <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a>.</p>

<!--CLEANUP-->
  <p>The <dfn id="incumbent-settings-object">incumbent settings object</dfn> is the <a href="#script-settings-object">script settings object</a> in the
  <a href="#stack-of-script-settings-objects">stack of script settings objects</a> that was most-recently added (i.e. the last one on the
  stack). If the stack is empty, then there is no <a href="#incumbent-settings-object">incumbent settings object</a>. It is used in some
  security checks.</p>

  <p class="note">The WebIDL specification also uses these algorithms. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

  <hr><!--CLEANUP--><p>Each <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> has a <dfn id="performing-a-microtask-checkpoint">performing
  a microtask checkpoint</dfn> flag, which must initially be false. It is used to prevent reentrant invocation of
  the algorithm to <a data-anolis-xref="concept-mo-invoke" href="infrastructure.html#concept-mo-invoke">invoke <code>MutationObserver</code>
  objects</a>. For the purposes of <code><a href="infrastructure.html#mutationobserver">MutationObserver</a></code> objects, each <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of
  related similar-origin browsing contexts</a> is a distinct <var data-anolis-xref="MutationObserver
  scripting environment"><a href="infrastructure.html#mutationobserver-scripting-environment">scripting environment</a></var>.</p>

  <p>Each <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> has a <dfn id="global-script-clean-up-jobs-list">global script
  clean-up jobs list</dfn>, which must initially be empty. A global script clean-up job cannot run
  scripts, and cannot be sensitive to the order in which other clean-up jobs are executed. The File
  API uses this to release <code data-anolis-xref="">blob:</code> URLs. <a href="references.html#refsFILEAPI">[FILEAPI]</a></p>

  <p>When the user agent is to <dfn id="run-the-global-script-clean-up-jobs">run the global script clean-up jobs</dfn>, the user agent must
  perform each of the jobs in the <a href="#global-script-clean-up-jobs-list">global script clean-up jobs list</a> and then empty the
  list.</p>

  </div>


  <div class="impl">

  <h5 id="creating-scripts"><span class="secno">6.1.3.4 </span>Creating scripts</h5>

  <p>When the specification says that a <a data-anolis-xref="concept-script" href="#concept-script">script</a> is to be <dfn data-anolis-xref="create a script" id="create-a-script">created</dfn>, given some script source, a script source URL, its
  scripting language, a <a href="#script-settings-object">script settings object</a>, and optionally a <var data-anolis-xref="">muted
  errors</var> flag, the user agent must run the following steps:</p>

  <ol><li><p>Let <var data-anolis-xref="">script</var> be a new <a data-anolis-xref="concept-script" href="#concept-script">script</a> that
   this algorithm will subsequently initialize.</li>

   <li><p>If <a data-anolis-xref="concept-bc-noscript" href="#concept-bc-noscript">scripting is disabled</a> for <a href="browsers.html#browsing-context">browsing
   context</a> passed to this algorithm, then abort these steps, as if the script source
   described a program that did nothing but return void.</p>

   </li><li><p>Obtain the appropriate <a href="#script-execution-environment">script execution environment</a> for the given scripting
   language from the <a href="#script-settings-object">script settings object</a> provided.</li>

   <li><p>Parse/compile/initialize the source of the script using the <a href="#script-execution-environment">script execution
   environment</a>, as appropriate for the scripting language, and thus obtain <var data-anolis-xref="">script</var>'s <a href="#code-entry-point">code entry-point</a>.</li>

   <li><p>Let <var data-anolis-xref="">script</var>'s <a href="#settings-object">settings object</a> be the <a href="#script-settings-object">script
   settings object</a> provided.</li>

   <li><p>If the <var data-anolis-xref="">muted errors</var> flag was set, then set <var data-anolis-xref="">script</var>'s <a href="#muted-errors">muted errors</a> flag.</li>

   <li>
 
    <p>If all the steps above succeeded (in particular, if the script was compiled successfully),
    <a data-anolis-xref="jump to a code entry-point" href="#jump-to-a-code-entry-point">Jump</a> to <var data-anolis-xref="">script</var>'s <a href="#code-entry-point">code
    entry-point</a>.</p>

<!--CLEANUP-->
    <p>Otherwise, <a href="#report-the-error">report the error</a> for <var data-anolis-xref="">script</var>, with the problematic
    position (line number and column number), using the <a href="#global-object">global object</a> specified by the <a href="#script-settings-object">script settings object</a> as the
    target. If the error is still <i data-anolis-xref="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i> after this,
    then the error may be reported to the user.</p>

   </li>

  </ol></div>


  <div class="impl">

  <h5 id="killing-scripts"><span class="secno">6.1.3.5 </span>Killing scripts</h5>

  <p>User agents may impose resource limitations on scripts, for example CPU quotas, memory limits,
  total execution time limits, or bandwidth limitations. When a script exceeds a limit, the user
  agent may either throw a <code><a href="infrastructure.html#quotaexceedederror">QuotaExceededError</a></code> exception, abort the script without an
  exception, prompt the user, or throttle script execution.</p>

  <div class="example">

   <p>For example, the following script never terminates. A user agent could, after waiting for a
   few seconds, prompt the user to either terminate the script or let it continue.</p>

   <pre>&lt;script&gt;
 while (true) { /* loop */ }
&lt;/script&gt;</pre>

  </div>

  <p>User agents are encouraged to allow users to disable scripting whenever the user is prompted
  either by a script (e.g. using the <code data-anolis-xref="dom-alert"><a href="#dom-alert">window.alert()</a></code> API) or because
  of a script's actions (e.g. because it has exceeded a time limit).</p>

  <p>If scripting is disabled while a script is executing, the script should be terminated
  immediately.</p>

  <p>User agents may allow users to specifically disable scripts just for the purposes of closing a
  <a href="browsers.html#browsing-context">browsing context</a>.</p>

  <p class="example">For example, the prompt mentioned in the example above could also offer the
  user with a mechanism to just close the page entirely, without running any <code data-anolis-xref="event-unload">unload</code> event handlers.</p>

  </div>


  <div class="impl">

  <h5 id="runtime-script-errors"><span class="secno">6.1.3.6 </span>Runtime script errors</h5>

  <p>When the user agent is required to <dfn data-anolis-xref="report the error" id="report-the-error">report an error</dfn> for a
  particular <a data-anolis-xref="concept-script" href="#concept-script">script</a> <var data-anolis-xref="">script</var> with a particular
  position <var data-anolis-xref="">line</var>:<var data-anolis-xref="">col</var>, using a particular target <var data-anolis-xref="">target</var>, it must run these steps, after which the error is either <dfn data-anolis-xref="concept-error-handled" id="concept-error-handled"><i>handled</i></dfn> or <dfn data-anolis-xref="concept-error-nothandled" id="concept-error-nothandled"><i>not
  handled</i></dfn>:</p>

  <ol><li><p>If <var data-anolis-xref="">target</var> is <a href="#in-error-reporting-mode">in error reporting mode</a>, then abort these
   steps; the error is <i data-anolis-xref="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i>.</li>

   <li><p>Let <var data-anolis-xref="">target</var> be <dfn id="in-error-reporting-mode">in error reporting mode</dfn>.</li>

   <li><p>Let <var data-anolis-xref="">message</var> be a user-agent-defined string describing the error in a
   helpful manner.
   <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
   </li>

   <li><p>Let <var data-anolis-xref="">error object</var> be the object that represents the error: in the case
   of an uncaught exception, that would be the object that was thrown; in the case of a JavaScript
   error that would be an <code>Error</code> object. If there is no corresponding object, then the
   null value must be used instead.</li>

   <li>

    <p>Let <var data-anolis-xref="">location</var> be an <a href="infrastructure.html#absolute-url">absolute URL</a> that corresponds to the
    resource from which <var data-anolis-xref="">script</var> was obtained.</p>

    <p class="note">The resource containing the script will typically be the file from which the
    <code><a href="dom.html#document">Document</a></code> was parsed, e.g. for inline <code><a href="scripting-1.html#the-script-element">script</a></code> elements or <a href="#event-handler-content-attributes">event
    handler content attributes</a>; or the JavaScript file that the script was in, for external
    scripts. Even for dynamically-generated scripts, user agents are strongly encouraged to attempt
    to keep track of the original source of a script. For example, if an external script uses the
    <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> API to insert an inline
    <code><a href="scripting-1.html#the-script-element">script</a></code> element during parsing, the URL of the resource containing the script would
    ideally be reported as being the external script, and the line number might ideally be reported
    as the line with the <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> call or where the
    string passed to that call was first constructed. Naturally, implementing this can be somewhat
    non-trivial.</p>

    <p class="note">User agents are similarly encouraged to keep careful track of the original line
    numbers, even in the face of <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> calls
    mutating the document as it is parsed, or <a href="#event-handler-content-attributes">event handler content attributes</a> spanning
    multiple lines.</p>

   </li>

   <li><p>If <var data-anolis-xref="">script</var> has <a href="#muted-errors">muted errors</a>, then set <var data-anolis-xref="">message</var> to "<code data-anolis-xref="">Script error.</code>", set <var data-anolis-xref="">location</var>
   to the empty string, set <var data-anolis-xref="">line</var> and <var data-anolis-xref="">col</var> to 0, and set <var data-anolis-xref="">error object</var> to null.</li>

   <li><p>Let <var data-anolis-xref="">event</var> be a new <a data-anolis-xref="concept-events-trusted" href="infrastructure.html#concept-events-trusted">trusted</a>
   <code><a href="#errorevent">ErrorEvent</a></code> object that does not bubble but is cancelable, and which has the event
   name <code data-anolis-xref="event-error">error</code>.</li>

   <li><p>Initialize <var data-anolis-xref="">event</var>'s <code data-anolis-xref="dom-ErrorEvent-message"><a href="#dom-errorevent-message">message</a></code>
   attribute to <var data-anolis-xref="">message</var>.</li>

   <li><p>Initialize <var data-anolis-xref="">event</var>'s <code data-anolis-xref="dom-ErrorEvent-filename"><a href="#dom-errorevent-filename">filename</a></code> attribute to <var data-anolis-xref="">location</var>.</li>

   <li><p>Initialize <var data-anolis-xref="">event</var>'s <code data-anolis-xref="dom-ErrorEvent-lineno"><a href="#dom-errorevent-lineno">lineno</a></code>
   attribute to <var data-anolis-xref="">line</var>.</li>

   <li><p>Initialize <var data-anolis-xref="">event</var>'s <code data-anolis-xref="dom-ErrorEvent-colno"><a href="#dom-errorevent-colno">colno</a></code>
   attribute to <var data-anolis-xref="">col</var>.</li>

   <li><p>Initialize <var data-anolis-xref="">event</var>'s <code data-anolis-xref="dom-ErrorEvent-error"><a href="#dom-errorevent-error">error</a></code>
   attribute to <var data-anolis-xref="">error object</var>.</li>

   <li><p><a data-anolis-xref="concept-event-dispatch" href="infrastructure.html#concept-event-dispatch">Dispatch</a> <var data-anolis-xref="">event</var> at <var data-anolis-xref="">target</var>.</li>

   <li><p>Let <var data-anolis-xref="">target</var> no longer be <a href="#in-error-reporting-mode">in error reporting mode</a>.</li>

   <li><p>If <var data-anolis-xref="">event</var> was canceled, then the error is <i data-anolis-xref="concept-error-handled"><a href="#concept-error-handled">handled</a></i>. Otherwise, the error is <i data-anolis-xref="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i>.</p>

  </li></ol><h6 id="runtime-script-errors-in-documents"><span class="secno">6.1.3.6.1 </span>Runtime script errors in documents</h6>

<!--CLEANUP-->
  <p>Whenever an uncaught runtime script error occurs in one of the scripts associated with a
  <code><a href="dom.html#document">Document</a></code>, the user agent must <a href="#report-the-error">report the error</a> for the relevant <a data-anolis-xref="concept-script" href="#concept-script">script</a>, with the problematic position (line number and column
  number) in the resource containing the script, using the <a href="#global-object">global object</a> specified by the script's <a href="#settings-object">settings object</a> as
  the target. If the error is still <i data-anolis-xref="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i> after this,
  then the error may be reported to the user.</p>

  </div>



  <h6 id="the-errorevent-interface"><span class="secno">6.1.3.6.2</span> <code><a href="#errorevent">ErrorEvent</a></code>インターフェース</h6>

  <pre class="idl">[Constructor(DOMString type, optional <a href="#erroreventinit">ErrorEventInit</a> eventInitDict)]
interface <dfn id="errorevent">ErrorEvent</dfn> : <a href="infrastructure.html#event">Event</a> {
  readonly attribute DOMString <a data-anolis-xref="dom-ErrorEvent-message" href="#dom-errorevent-message">message</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-ErrorEvent-filename" href="#dom-errorevent-filename">filename</a>;
  readonly attribute unsigned long <a data-anolis-xref="dom-ErrorEvent-lineno" href="#dom-errorevent-lineno">lineno</a>;
  readonly attribute unsigned long <a data-anolis-xref="dom-ErrorEvent-colno" href="#dom-errorevent-colno">colno</a>;
  readonly attribute any <a data-anolis-xref="dom-ErrorEvent-error" href="#dom-errorevent-error">error</a>;
};

dictionary <dfn id="erroreventinit">ErrorEventInit</dfn> : <a href="infrastructure.html#eventinit">EventInit</a> {
  DOMString message;
  DOMString filename;
  unsigned long lineno;
  unsigned long colno;
  any error;
};</pre>

  <p><dfn data-anolis-xref="dom-ErrorEvent-message" id="dom-errorevent-message"><code>message</code></dfn>属性は、属性が初期化された値を返さなければならない。オブジェクトが作成される際、この属性は空文字列に初期化しなければならない。これはエラーメッセージを表す。</p>

  <p><dfn data-anolis-xref="dom-ErrorEvent-filename" id="dom-errorevent-filename"><code>filename</code></dfn>属性は、属性が初期化された値を返さなければならない。オブジェクトが作成される際、この属性は空文字列に初期化しなければならない。これは、エラーがもともと発生したスクリプトの<a href="infrastructure.html#absolute-url">絶対URL</a>を表す。</p>

  <p><dfn data-anolis-xref="dom-ErrorEvent-lineno" id="dom-errorevent-lineno"><code>lineno</code></dfn>属性は、属性が初期化された値を返さなければならない。オブジェクトが作成される際、この属性はゼロに初期化しなければならない。これは、スクリプトでエラーが発生した行番号を表す。</p>

  <p><dfn data-anolis-xref="dom-ErrorEvent-colno" id="dom-errorevent-colno"><code>colno</code></dfn>属性は、属性が初期化された値を返さなければならない。オブジェクトが作成される際、この属性はゼロに初期化しなければならない。これは、スクリプトでエラーが発生した列番号を表す。</p>

  <p><dfn data-anolis-xref="dom-ErrorEvent-error" id="dom-errorevent-error"><code>error</code></dfn>属性は、属性が初期化された値を返さなければならない。オブジェクトが作成される際、この属性はnullに初期化しなければならない。適切な場合、属性はエラー（キャッチされていないDOM例外の場合には例外オブジェクトなど）を表すオブジェクトに設定される。</p>



  <div class="impl">

  <h4 id="event-loops"><span class="secno">6.1.4 </span>Event loops</h4>

  <h5 id="definitions-1"><span class="secno">6.1.4.1 </span>Definitions</h5>

  <p>To coordinate events, user interaction, scripts, rendering, networking, and so forth, user
  agents must use <dfn data-anolis-xref="event loop" id="event-loop">event loops</dfn> as described in this section.</p>

  <p>There must be at least one <a href="#event-loop">event loop</a> per user agent, and at most one <a href="#event-loop">event
  loop</a> per <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a>.</p>

  <p class="note">When there is more than one <a href="#event-loop">event loop</a> for a <a href="browsers.html#unit-of-related-browsing-contexts">unit of related
  browsing contexts</a>, complications arise when a <a href="browsers.html#browsing-context">browsing context</a> in that group
  is <a data-anolis-xref="navigate" href="browsers.html#navigate">navigated</a> such that it switches from one <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related
  similar-origin browsing contexts</a> to another. This specification does not currently describe
  how to handle these complications.</p>

  <p>An <a href="#event-loop">event loop</a> always has at least one <a href="browsers.html#browsing-context">browsing context</a>. If an
  <a href="#event-loop">event loop</a>'s <a data-anolis-xref="browsing context" href="browsers.html#browsing-context">browsing contexts</a> all go away,
  then the <a href="#event-loop">event loop</a> goes away as well. A <a href="browsers.html#browsing-context">browsing context</a> always has an
  <a href="#event-loop">event loop</a> coordinating its activities.</p>

  <p>An <a href="#event-loop">event loop</a> has one or more <dfn data-anolis-xref="task queue" id="task-queue">task queues</dfn>. A
  <a href="#task-queue">task queue</a> is an ordered list of <dfn data-anolis-xref="concept-task" id="concept-task">tasks</dfn>, which are
  algorithms that are responsible for such work as:</p>

  <dl><dt>Events</dt>

   <dd>

    <p>Asynchronously dispatching an <code><a href="infrastructure.html#event">Event</a></code> object at a particular
    <code><a href="infrastructure.html#eventtarget">EventTarget</a></code> object is often done by a dedicated task.</p>

    <p class="note">Not all events are dispatched using the <a href="#task-queue">task queue</a>, many are
    dispatched synchronously during other tasks.</p>

   </dd>


   <dt>Parsing</dt>

   <dd><p>The <a href="syntax.html#html-parser">HTML parser</a> tokenizing one or more bytes, and then processing any
   resulting tokens, is typically a task.</dd>


   <dt>Callbacks</dt>

   <dd><p>Calling a callback asynchronously is often done by a dedicated task.</dd>


   <dt>Using a resource</dt>

   <dd><p>When an algorithm <a data-anolis-xref="fetch" href="infrastructure.html#fetch">fetches</a> a resource, if the fetching occurs
   asynchronously then the processing of the resource once some or all of the resource is available
   is performed by a task.</dd>


   <dt>Reacting to DOM manipulation</dt>

   <dd><p>Some elements have tasks that trigger in response to DOM manipulation, e.g. when that
   element is <a data-anolis-xref="insert an element into a document" href="infrastructure.html#insert-an-element-into-a-document">inserted into the document</a>.</p>

  </dl><p>Each <a data-anolis-xref="concept-task" href="#concept-task">task</a> is associated with a <code><a href="dom.html#document">Document</a></code>; if the
  task was queued in the context of an element, then it is the element's <code><a href="dom.html#document">Document</a></code>; if
  the task was queued in the context of a <a href="browsers.html#browsing-context">browsing context</a>, then it is the
  <a href="browsers.html#browsing-context">browsing context</a>'s <a href="browsers.html#active-document">active document</a> at the time the task was queued; if
  the task was queued by or for a <a data-anolis-xref="concept-script" href="#concept-script">script</a> then the document is
  the <a href="#responsible-document">responsible document</a> specified by the script's <a href="#settings-object">settings object</a>.</p>

  <p>A <a data-anolis-xref="concept-task" href="#concept-task">task</a> is intended for a specific <a href="#event-loop">event loop</a>:
  the <a href="#event-loop">event loop</a> that is handling <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> for the <a data-anolis-xref="concept-task" href="#concept-task">task</a>'s associated <code><a href="dom.html#document">Document</a></code>.</p>

  <p>When a user agent is to <dfn id="queue-a-task">queue a task</dfn>, it must add the given task to one of the <a data-anolis-xref="task queue" href="#task-queue">task queues</a> of the relevant <a href="#event-loop">event loop</a>.</p>

  <p>Each <a data-anolis-xref="concept-task" href="#concept-task">task</a> is defined as coming from a specific <dfn id="task-source">task
  source</dfn>. All the tasks from one particular <a href="#task-source">task source</a> and destined to a
  particular <a href="#event-loop">event loop</a> (e.g. the callbacks generated by timers of a
  <code><a href="dom.html#document">Document</a></code>, the events fired for mouse movements over that <code><a href="dom.html#document">Document</a></code>, the
  tasks queued for the parser of that <code><a href="dom.html#document">Document</a></code>) must always be added to the same
  <a href="#task-queue">task queue</a>, but <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> from different <a data-anolis-xref="task source" href="#task-source">task sources</a> may be placed in different <a data-anolis-xref="task queue" href="#task-queue">task
  queues</a>.</p>

  <p class="example">For example, a user agent could have one <a href="#task-queue">task queue</a> for mouse and
  key events (the <a href="#user-interaction-task-source">user interaction task source</a>), and another for everything else. The
  user agent could then give keyboard and mouse events preference over other tasks three quarters of
  the time, keeping the interface responsive but not starving other task queues, and never
  processing events from any one <a href="#task-source">task source</a> out of order.</p>

  <hr><p>A user agent may have one <dfn id="storage-mutex">storage mutex</dfn>. This mutex is used to control access to
  shared state like cookies. At any one point, the <a href="#storage-mutex">storage mutex</a> is either free, or
  owned by a particular <a href="#event-loop">event loop</a> or instance of the <a data-anolis-xref="fetch" href="infrastructure.html#fetch">fetching</a> algorithm.</p>

  <p>If a user agent does not implement a <a href="#storage-mutex">storage mutex</a>, it is exempt from implementing
  the requirements that require it to acquire or release it.</p>

  <p class="note">User agent implementors have to make a choice between two evils. On the one hand,
  not implementing the storage mutex means that there is a risk of data corruption: a site could,
  for instance, try to read a cookie, increment its value, then write it back out, using the new
  value of the cookie as a unique identifier for the session; if the site does this twice in two
  different browser windows at the same time, it might end up using the same "unique" identifier for
  both sessions, with potentially disastrous effects. On the other hand, implementing the storage
  mutex has potentially serious performance implications: whenever a site uses Web Storage or
  cookies, all other sites that try to use Web Storage or cookies are blocked until the first site
  finishes.</p>

  <p>Whenever a <a data-anolis-xref="concept-script" href="#concept-script">script</a> calls into a <a href="infrastructure.html#plugin">plugin</a>, and
  whenever a <a href="infrastructure.html#plugin">plugin</a> calls into a <a data-anolis-xref="concept-script" href="#concept-script">script</a>, the user
  agent must release the <a href="#storage-mutex">storage mutex</a>.</p>


  <h5 id="processing-model-3"><span class="secno">6.1.4.2 </span>Processing model</h5>

  <p>An <a href="#event-loop">event loop</a> must continually run through the following steps for as long as it
  exists:</p>

  <ol><!-- if you add a step here, make sure to go through the spec updating references to the "first
   step" or "step 1" of the event loop --><li><p>Run the oldest <a data-anolis-xref="concept-task" href="#concept-task">task</a> on one of the <a href="#event-loop">event
   loop</a>'s <a data-anolis-xref="task queue" href="#task-queue">task queues</a>, if any, ignoring tasks whose
   associated <code><a href="dom.html#document">Document</a></code>s are not <a href="browsers.html#fully-active">fully active</a>. The user agent may pick any
   <a href="#task-queue">task queue</a>.</li>

   <!-- warning! if you renumber these steps, make sure to update the "spin the event loop"
   algorithm below! -->

   <li><p>If the <a href="#storage-mutex">storage mutex</a> is now owned by the <a href="#event-loop">event loop</a>, release it
   so that it is once again free.</li>

   <li><p>If a task was run in the first step above, remove that task from its <a href="#task-queue">task
   queue</a>.</li>

   <li>

    <p>If this <a href="#event-loop">event loop</a> is not a worker's <a href="#event-loop">event loop</a>, run these
    substeps:</p>

    <ol><li><p><a href="#perform-a-microtask-checkpoint">Perform a microtask checkpoint</a>.</li>

     <li><p><a href="#provide-a-stable-state">Provide a stable state</a>.</li>

     <li><p>If necessary, update the rendering or user interface of any <code><a href="dom.html#document">Document</a></code> or
     <a href="browsers.html#browsing-context">browsing context</a> to reflect the current state.</li>

    </ol></li>

   <li><p>Otherwise, if this <a href="#event-loop">event loop</a> is running for a
   <code>WorkerGlobalScope</code>, but there are no events in the <a href="#event-loop">event loop</a>'s <a data-anolis-xref="task queue" href="#task-queue">task queues</a> and the <code>WorkerGlobalScope</code> object's <a data-anolis-xref="dom-WorkerGlobalScope-closing" href="infrastructure.html#dom-workerglobalscope-closing">closing</a> flag is true, then destroy the <a href="#event-loop">event
   loop</a>, aborting these steps.</li>

   <li><p>Return to the first step of the <a href="#event-loop">event loop</a>.</li>

  </ol><hr><!--CLEANUP--><p>When a user agent is to <dfn id="perform-a-microtask-checkpoint">perform a microtask checkpoint</dfn>, if the <a href="#performing-a-microtask-checkpoint">performing a microtask checkpoint</a> flag is false, then the user agent must run the following steps:</p>

  <ol><!--CLEANUP--><li><p>Let the <a href="#performing-a-microtask-checkpoint">performing a microtask checkpoint</a> flag be true.</li>

   <li><p><dfn id="perform-a-custom-elements-checkpoint">Perform a custom elements checkpoint</dfn>. <a href="references.html#refsCUSTOM">[CUSTOM]</a></li>

   <li><p><span>Sort the tables with pending sorts</span>.</li>

   <li>

<!--CLEANUP-->
    <p><a data-anolis-xref="concept-mo-invoke" href="infrastructure.html#concept-mo-invoke">Invoke <code>MutationObserver</code> objects</a> for the
    <a href="browsers.html#unit-of-related-similar-origin-browsing-contexts">unit of related similar-origin browsing contexts</a> to which the <a href="#responsible-browsing-context">responsible
    browsing context</a> specified by the script's <a href="#settings-object">settings object</a> belongs, using the <a href="#task-wrapper-algorithm">task wrapper algorithm</a> as the steps to
    invoke each callback.</p>

<!--CLEANUP-->
    <p class="note">This will typically invoke scripted callbacks, 
    which eventually calls the <a href="#clean-up-after-running-a-callback">clean up after running a callback</a> steps,
    which call this <a href="#perform-a-microtask-checkpoint">perform a microtask checkpoint</a>
    algorithm again, which is why we use the <a href="#performing-a-microtask-checkpoint">performing a microtask checkpoint</a> flag to avoid
    reentrancy.</p>

   </li>

<!--CLEANUP-->
   <li><p>Let the <a href="#performing-a-microtask-checkpoint">performing a microtask checkpoint</a> flag be false.</li>

  </ol><hr><p>When the user agent is to <dfn id="provide-a-stable-state">provide a stable state</dfn>, if any asynchronously-running
  algorithms are <dfn data-anolis-xref="await a stable state" id="await-a-stable-state">awaiting a stable state</dfn>, then the user
  agent must run their <dfn id="synchronous-section">synchronous section</dfn> and then resume running their asynchronous
  algorithm (if appropriate).</p>

  <p class="note">A <a href="#synchronous-section">synchronous section</a> never mutates the DOM, runs any script, or has
  any side-effects detectable from another <a href="#synchronous-section">synchronous section</a>, and thus <a data-anolis-xref="synchronous section" href="#synchronous-section">synchronous sections</a> can be run in any order, and cannot
  <a href="#spin-the-event-loop">spin the event loop</a>.</p>

  <p class="note">Steps in <a data-anolis-xref="synchronous section" href="#synchronous-section">synchronous sections</a> are marked
  with ⌛.</p>

  <hr><p>The <dfn id="task-wrapper-algorithm">task wrapper algorithm</dfn>, which is implicitly invoked in the context of an
  <a href="#event-loop">event loop</a> and is used to invoke a given <var data-anolis-xref="">callback</var> in a specific
  way, is as follows:</p>

  <ol><li><p>Invoke <var data-anolis-xref="">callback</var> as specified.</li>

  </ol><p class="critical">The above will change in due course; see <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=20821">bug 20821</a>.</p>

  <hr><p>When an algorithm says to <dfn id="spin-the-event-loop">spin the event loop</dfn> until a condition <var data-anolis-xref="">goal</var> is met, the user agent must run the following steps:</p>

  <ol><li><p>Let <var data-anolis-xref="">task source</var> be the <a href="#task-source">task source</a> of the currently
   running <a data-anolis-xref="concept-task" href="#concept-task">task</a>.</li>

<!--CLEANUP-->
   <li><p>Let <var data-anolis-xref="">old stack of script settings objects</var> be a copy of the <a href="#stack-of-script-settings-objects">stack of
   script settings objects</a>.</li>

   <li><p>Empty the <a href="#stack-of-script-settings-objects">stack of script settings objects</a>.</li>

   <li><p><a href="#run-the-global-script-clean-up-jobs">Run the global script clean-up jobs</a>.</li>

   <li><p><a href="#perform-a-microtask-checkpoint">Perform a microtask checkpoint</a>.</li>

   <li>

    <p>Stop the currently running <a data-anolis-xref="concept-task" href="#concept-task">task</a>, allowing the <a href="#event-loop">event
    loop</a> to resume, but continue these steps asynchronously.</p>

    <p class="note">This causes the <a href="#event-loop">event loop</a> to move on to the second step of its
    processing model (defined above).</p>

   </li>

   <li><p>Wait until the condition <var data-anolis-xref="">goal</var> is met.</li>

   <li><p><a href="#queue-a-task">Queue a task</a> to continue running these steps, using the <a href="#task-source">task
   source</a> <var data-anolis-xref="">task source</var>. Wait until this task runs before continuing these
   steps.</li>

<!--CLEANUP-->
   <li><p>Replace the <a href="#stack-of-script-settings-objects">stack of script settings objects</a> with the <var data-anolis-xref="">old stack of
   script settings objects</var>.</li>

   <li><p>Return to the caller.</li>

  </ol><hr><p>Some of the algorithms in this specification, for historical reasons, require the user agent to
  <dfn id="pause">pause</dfn> while running a <a data-anolis-xref="concept-task" href="#concept-task">task</a> until a condition <var data-anolis-xref="">goal</var> is met. This means running the following steps:</p>

  <ol><li><p>If any asynchronously-running algorithms are <a data-anolis-xref="await a stable state" href="#await-a-stable-state">awaiting a
   stable state</a>, then run their <a href="#synchronous-section">synchronous section</a> and then resume running
   their asynchronous algorithm. (See the <a href="#event-loop">event loop</a> processing model definition above
   for details.)</p>

   </li><li><p>If necessary, update the rendering or user interface of any <code><a href="dom.html#document">Document</a></code> or
   <a href="browsers.html#browsing-context">browsing context</a> to reflect the current state.</li>

   <li><p>Wait until the condition <var data-anolis-xref="">goal</var> is met. While a user agent has a paused
   <a data-anolis-xref="concept-task" href="#concept-task">task</a>, the corresponding <a href="#event-loop">event loop</a> must not run
   further <a data-anolis-xref="concept-task" href="#concept-task">tasks</a>, and any script in the currently running <a data-anolis-xref="concept-task" href="#concept-task">task</a> must block. User agents should remain responsive to user input
   while paused, however, albeit in a reduced capacity since the <a href="#event-loop">event loop</a> will not be
   doing anything.</li>

  </ol><hr><p>When a user agent is to <dfn id="obtain-the-storage-mutex">obtain the storage mutex</dfn> as part of running a <a data-anolis-xref="concept-task" href="#concept-task">task</a>, it must run through the following steps:</p>

  <ol><li><p>If the <a href="#storage-mutex">storage mutex</a> is already owned by this <a data-anolis-xref="concept-task" href="#concept-task">task</a>'s <a href="#event-loop">event loop</a>, then abort these steps.</li>

   <li><p>Otherwise, <a href="#pause">pause</a> until the <a href="#storage-mutex">storage mutex</a> can be taken by the
   <a href="#event-loop">event loop</a>.</li>

   <li><p>Take ownership of the <a href="#storage-mutex">storage mutex</a>.</li>

  </ol></div>


  <div class="impl">

  <h5 id="generic-task-sources"><span class="secno">6.1.4.3 </span>Generic task sources</h5>

  <p>The following <a data-anolis-xref="task source" href="#task-source">task sources</a> are used by a number of mostly
  unrelated features in this and other specifications.</p>

  <dl><dt>The <dfn id="dom-manipulation-task-source">DOM manipulation task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that react to DOM manipulations, such as
    things that happen asynchronously when an element is <a data-anolis-xref="insert an element into a
    document" href="infrastructure.html#insert-an-element-into-a-document">inserted into the document</a>.</p>

   </dd>

   <dt>The <dfn id="user-interaction-task-source">user interaction task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that react to user interaction, for
    example keyboard or mouse input.</p>

    <p>Asynchronous events sent in response to user input (e.g. <code data-anolis-xref="event-click"><a href="infrastructure.html#event-click">click</a></code> events) must be fired using <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> <a data-anolis-xref="queue a task" href="#queue-a-task">queued</a> with the <a href="#user-interaction-task-source">user
    interaction task source</a>. <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p> <!-- user
    interaction events integration point -->

   </dd>

   <dt>The <dfn id="networking-task-source">networking task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used for features that trigger in response to network
    activity.</p>

   </dd>

   <dt>The <dfn id="history-traversal-task-source">history traversal task source</dfn></dt>

   <dd>

    <p>This <a href="#task-source">task source</a> is used to queue calls to <code data-anolis-xref="dom-history-back"><a href="browsers.html#dom-history-back">history.back()</a></code> and similar APIs.</p>

   </dd>

  </dl></div>




  <h4 id="events"><span class="secno">6.1.5</span> イベント</h4>

  <h5 id="event-handler-attributes"><span class="secno">6.1.5.1</span> イベントハンドラ</h5><!--test: <a href="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E">test</a>-->

  

  <p>多くのオブジェクトは、指定した<dfn id="event-handlers">イベントハンドラ</dfn>を持つことができる。これらは、それらが指定されるオブジェクトに対する非キャプチャイベントリスナーとして作動する。<a href="references.html#refsDOM">[DOM]</a></p>

  <p><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a>は、常に"<code data-anolis-xref="">on</code>"で始まり、意図されるイベントの名前が後に続く名前を持つ。</p>

  <p><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a>は、値nullを持つか、コールバックオブジェクトに設定できるかのいずれかである。<span class="impl">, or be set to an <a href="#internal-raw-uncompiled-handler">internal raw uncompiled
  handler</a></span> <code><a href="#eventhandler">EventHandler</a></code>コールバック関数型は、これがスクリプトに公開される方法を説明する。 <span class="impl">Initially, event handlers must be set to null.</span></p>

  <p>イベントハンドラは、2つの方法のいずれかで公開される。</p>

  <p>1つ目の方法は、すべてのイベントハンドラに共通する、<a data-anolis-xref="event handler IDL
  attributes" href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>としてである。</p>

  <p>2つ目の方法は、<a data-anolis-xref="event handler content attributes" href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>としてである。<a href="infrastructure.html#html-elements">HTML要素</a>のイベントハンドラおよび<code><a href="browsers.html#window">Window</a></code>オブジェクトのイベントハンドラの一部は、この方法で公開される。</p>

  <div class="impl">

  <hr><p>An <dfn data-anolis-xref="event handler IDL attributes" id="event-handler-idl-attributes">event handler IDL attribute</dfn> is an IDL
  attribute for a specific <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a>. The name of the IDL
  attribute is the same as the name of the <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a>.</p>

  <p><a href="#event-handler-idl-attributes">Event handler IDL attributes</a>, on setting, must set the corresponding <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> to their new value, and on getting, must return the
  result of <a href="#getting-the-current-value-of-the-event-handler">getting the current value of the event handler</a> in question (this can throw
  an exception, in which case the getting propagates it to the caller, it does not catch it).</p>

  <p>If an <a data-anolis-xref="event handler IDL attributes" href="#event-handler-idl-attributes">event handler IDL attribute</a> exposes an
  <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> of an object that doesn't exist, it must always
  return null on getting and must do nothing on setting.</p>

  <p class="note">This can happen in particular for <a data-anolis-xref="event handler IDL attributes" href="#event-handler-idl-attributes">event
  handler IDL attribute</a> on <code><a href="sections.html#the-body-element">body</a></code> elements that do not have corresponding
  <code><a href="browsers.html#window">Window</a></code> objects.</p>

  <p class="note">Certain event handler IDL attributes have additional requirements, in particular
  the <code data-anolis-xref="handler-MessagePort-onmessage">onmessage</code> attribute of
  <code><a href="infrastructure.html#messageport">MessagePort</a></code> objects.</p>

  <hr></div>

  <p><dfn data-anolis-xref="event handler content attributes" id="event-handler-content-attributes">イベントハンドラコンテンツ属性</dfn>は、特定の<a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a>に対するコンテンツ属性である。コンテンツ属性の名前は、<a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a>の名前と同じである。 </p>

  <p><a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>が指定される場合、解析される際に、自動セミコロン挿入後の<code data-anolis-xref="">FunctionBody</code>生成物と一致するだろう、妥当なJavaScriptコードを含まなければならない。<a href="references.html#refsECMA262">[ECMA262]</a></p>

  <div class="impl">

<!--CLEANUP-->
  <p>When an <a data-anolis-xref="event handler content attributes" href="#event-handler-content-attributes">event handler content attribute</a>
  is set, the user agent must set the corresponding <a data-anolis-xref="event
  handlers" href="#event-handlers">event handler</a> to an <a href="#internal-raw-uncompiled-handler">internal raw uncompiled handler</a> consisting of
  the attribute's new value and the script location where the attribute was set to this value</p>

  <p>When an event handler content attribute is removed, the user agent must set the corresponding
  <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> to null.</p>
  <!--
  http://software.hixie.ch/utilities/js/live-dom-viewer/saved/245 onload
  http://software.hixie.ch/utilities/js/live-dom-viewer/saved/247 onclick
  see http://www.w3.org/Bugs/Public/show_bug.cgi?id=7626#c5 for reasoning
  -->

  <hr><p>When an <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> <var data-anolis-xref="">H</var> of an element
  or object <var data-anolis-xref="">T</var> implementing the <code><a href="infrastructure.html#eventtarget">EventTarget</a></code> interface is first set
  to a non-null value, the user agent must append an <a data-anolis-xref="concept-event-listener" href="infrastructure.html#concept-event-listener">event
  listener</a> to the list of <a data-anolis-xref="concept-event-listener" href="infrastructure.html#concept-event-listener">event listeners</a>
  associated with <var data-anolis-xref="">T</var> with <i>type</i> set to the <dfn id="event-handler-event-type">event handler event
  type</dfn> corresponding to <var data-anolis-xref="">H</var>, <i>capture</i> set to false, and
  <i>listener</i> set to <a href="#the-event-handler-processing-algorithm">the event handler processing algorithm</a> defined below. <a href="references.html#refsDOM">[DOM]</a></p>

  <p class="note">The <i>listener</i> is emphatically <em>not</em> the <a data-anolis-xref="event
  handlers" href="#event-handlers">event handler</a> itself. Every event handler ends up registering the same
  <i>listener</i>, the algorithm defined below, which takes care of invoking the right callback, and
  processing the callback's return value.</p>

  <p class="note">This only happens the first time the <a data-anolis-xref="event handlers" href="#event-handlers">event
  handler</a>'s value is set. Since listeners are called in the order they were registered, the
  order of event listeners for a particular event type will always be first the event listeners
  registered with <code data-anolis-xref="dom-EventTarget-addEventListener">addEventListener()</code> before
  the first time the <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> was set to a non-null value,
  then the callback to which it is currently set, if any, and finally the event listeners registered
  with <code data-anolis-xref="dom-EventTarget-addEventListener">addEventListener()</code> <em>after</em> the
  first time the <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> was set to a non-null value.</p>

  </div>

  <div class="example">

   <p>この例は、イベントリスナーが呼び出される順序を示す。この例でボタンがユーザーによってクリックされる場合、ページはそれぞれテキスト"ONE"、"TWO"、"THREE"、"FOUR"をもつ4つの警告を表示する。</p>

   <pre>&lt;button id="test"&gt;Start Demo&lt;/button&gt;
&lt;script&gt;
 var button = document.getElementById('test');
 button.addEventListener('click', function () { alert('ONE') }, false);
 button.setAttribute('onclick', "alert('NOT CALLED')"); // event handler listener is registered here
 button.addEventListener('click', function () { alert('THREE') }, false);
 button.onclick = function () { alert('TWO'); };
 button.addEventListener('click', function () { alert('FOUR') }, false);
&lt;/script&gt;</pre>

  </div>

  <div class="impl">

  <p class="note">The interfaces implemented by the event object do not influence whether an <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> is triggered or not.</p>

  <p><dfn id="the-event-handler-processing-algorithm">The event handler processing algorithm</dfn> for an <a data-anolis-xref="event handlers" href="#event-handlers">event
  handler</a> <var data-anolis-xref="">H</var> and an <code><a href="infrastructure.html#event">Event</a></code> object <var data-anolis-xref="">E</var> is as
  follows:</p>

  <ol><li>

    <p>Let <var data-anolis-xref="">callback</var> be the result of <a href="#getting-the-current-value-of-the-event-handler">getting the current value of the
    event handler</a> <var data-anolis-xref="">H</var>.</p>

   </li>

   <li><p>If <var data-anolis-xref="">callback</var> is null, then abort these steps.</li>

   <li>

    <p>Process the <code><a href="infrastructure.html#event">Event</a></code> object <var data-anolis-xref="">E</var> as follows:</p>

    <dl class="switch"><dt>If <var data-anolis-xref="">E</var> is an <code><a href="#errorevent">ErrorEvent</a></code> object and the <a data-anolis-xref="event
     handler IDL attributes" href="#event-handler-idl-attributes">event handler IDL attribute</a>'s type is
     <code><a href="#onerroreventhandler">OnErrorEventHandler</a></code></dt>

     <dd>

      <p><a data-anolis-xref="concept-invoke-event-handler" href="#concept-invoke-event-handler">Invoke</a> <var data-anolis-xref="">callback</var> with five arguments,
      the first one having the value of <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-ErrorEvent-message"><a href="#dom-errorevent-message">message</a></code> attribute,
      the second having the value of <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-ErrorEvent-filename"><a href="#dom-errorevent-filename">filename</a></code> attribute,
      the third having the value of <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-ErrorEvent-lineno"><a href="#dom-errorevent-lineno">lineno</a></code> attribute,
      the fourth having the value of <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-ErrorEvent-colno"><a href="#dom-errorevent-colno">colno</a></code> attribute,
      the fifth having the value of <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-ErrorEvent-error"><a href="#dom-errorevent-error">error</a></code> attribute, and
      with the <i data-anolis-xref="dfn-callback-this-value">callback this value</i> set to <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-Event-currentTarget">currentTarget</code>. Let 
      <var data-anolis-xref="">return value</var> be the callback's return value. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

     </dd>

     <dt>Otherwise</dt>

     <dd>

<!--CLEANUP-->
      <p><a data-anolis-xref="concept-invoke-event-handler" href="#concept-invoke-event-handler">Invoke</a> <var data-anolis-xref="">callback</var> with one argument, the value of which is the
      <code><a href="infrastructure.html#event">Event</a></code> object <var data-anolis-xref="">E</var>, with the <i data-anolis-xref="dfn-callback-this-value">callback this value</i> set to <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-Event-currentTarget">currentTarget</code>. Let <var data-anolis-xref="">return value</var> be the callback's return value. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

     </dd>

    </dl><p class="XXX">In this step, <dfn data-anolis-xref="concept-invoke-event-handler" id="concept-invoke-event-handler">invoke</dfn> means to run the
    <a href="#jump-to-a-code-entry-point">jump to a code entry-point</a> algorithm.</p> <!-- bug 19211 / bug 23744 -->

   </li>

   <li>

    <p>Process <var data-anolis-xref="">return value</var> as follows:</p>

    <dl class="switch"><dt>If the event type is <code class="event-mouseover">mouseover</code></dt>
     <dt>If the event type is <code class="event-error">error</code> and <var data-anolis-xref="">E</var> is an <code><a href="#errorevent">ErrorEvent</a></code> object</dt>

     <dd><p>If <var data-anolis-xref="">return value</var> is a WebIDL boolean true value, then cancel the event.</dd>


     <dt>If the event type is <code class="event-beforeunload">beforeunload</code></dt>

     <dd>

      <p class="note">The <a data-anolis-xref="event handler IDL attributes" href="#event-handler-idl-attributes">event handler IDL
      attribute</a>'s type is <code><a href="#onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</a></code>, and the <var data-anolis-xref="">return value</var> will therefore have been coerced into either the value null or a
      DOMString.</p>

      <p>If the <var data-anolis-xref="">return value</var> is null, then cancel the event.</p>

      <p>Otherwise, If the <code><a href="infrastructure.html#event">Event</a></code> object <var data-anolis-xref="">E</var> is a
      <code><a href="browsers.html#beforeunloadevent">BeforeUnloadEvent</a></code> object, and the <code><a href="infrastructure.html#event">Event</a></code> object <var data-anolis-xref="">E</var>'s <code data-anolis-xref="dom-BeforeUnloadEvent-returnValue"><a href="browsers.html#dom-beforeunloadevent-returnvalue">returnValue</a></code>
      attribute's value is the empty string, then set the <code data-anolis-xref="dom-BeforeUnloadEvent-returnValue"><a href="browsers.html#dom-beforeunloadevent-returnvalue">returnValue</a></code> attribute's value to <var data-anolis-xref="">return value</var>.</p>

     </dd>

     <dt>Otherwise</dt>

     <dd><p>If <var data-anolis-xref="">return value</var> is a WebIDL boolean false value, then cancel the
     event.</dd>

     <!-- IE actually uncancels the event if the function returns true -->

    </dl></li>

  </ol></div>

  <hr><p><code><a href="#eventhandler">EventHandler</a></code>コールバック関数型は、イベントハンドラに対して使用されるコールバックを表す。これは以下のようにWeb IDLで表される：</p>

  <pre class="idl">[TreatNonCallableAsNull]
callback <dfn id="eventhandlernonnull">EventHandlerNonNull</dfn> = any (<a href="infrastructure.html#event">Event</a> event);
typedef <a href="#eventhandlernonnull">EventHandlerNonNull</a>? <dfn id="eventhandler">EventHandler</dfn>;</pre>

  <p class="note">JavaScriptにおいて、任意の<code>関数</code>オブジェクトはこのインターフェースを実装する。</p>

  <div class="example">

   <p>たとえば、次の文書断片で：</p>

   <pre>&lt;body onload="alert(this)" onclick="alert(this)"&gt;</pre>

   <p>文書がロードされるときに"<code data-anolis-xref="">[object&nbsp;Window]</code>"という警告を、ページでユーザーが何かをクリックするときはいつでも"<code data-anolis-xref="">[object&nbsp;HTMLBodyElement]</code>"という警告を流す。</p>

  </div>

  <p class="note">関数の戻り値は、イベントがキャンセルされているかどうかに影響する：
  <span class="impl">as described above,</span> 戻り値がfalseの場合、イベントは中止される。（<code class="event-mouseover">mouseover</code>イベントを除いて、イベントをキャンセルするには、戻り値はtrueである必要がある）。<code data-anolis-xref="event-beforeunload">beforeunload</code>イベントとともに、値はユーザーに表示するメッセージを決定するために代わりに使用される。</p>

  <p>歴史的な理由により、<code data-anolis-xref="handler-onerror"><a href="#handler-onerror">onerror</a></code>ハンドラは、異なる引数を持つ。</p>

  <pre class="idl">[TreatNonCallableAsNull]
callback <dfn id="onerroreventhandlernonnull">OnErrorEventHandlerNonNull</dfn> = any ((<a href="infrastructure.html#event">Event</a> or DOMString) event, optional DOMString source, optional unsigned long lineno, optional unsigned long column, optional any error);
typedef <a href="#onerroreventhandlernonnull">OnErrorEventHandlerNonNull</a>? <dfn id="onerroreventhandler">OnErrorEventHandler</dfn>;</pre>

  <p>同様に、<code data-anolis-xref="handler-window-onbeforeunload"><a href="#handler-window-onbeforeunload">onbeforeunload</a></code>ハンドラは異なる戻り値を持つ：</p>

  <pre class="idl">[TreatNonCallableAsNull]
callback <dfn id="onbeforeunloadeventhandlernonnull">OnBeforeUnloadEventHandlerNonNull</dfn> = DOMString? (<a href="infrastructure.html#event">Event</a> event);
typedef <a href="#onbeforeunloadeventhandlernonnull">OnBeforeUnloadEventHandlerNonNull</a>? <dfn id="onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</dfn>;</pre><!-- onreadystatechange is also defined specially, using [LenientThis]; see IDL -->

  

  <div class="impl">

  <hr><p>An <dfn id="internal-raw-uncompiled-handler">internal raw uncompiled handler</dfn> is a tuple with the following information:</p>

  <ul class="brief"><li>An uncompiled script body

   </li><li>A location where the script body originated, in case an error needs to be reported

  </li></ul><p>When the user agent is to <dfn data-anolis-xref="getting the current value of the event handler" id="getting-the-current-value-of-the-event-handler">get the
  current value of the event handler</dfn> <var data-anolis-xref="">H</var>, it must run these steps:</p>

  <ol><li>

    <p>If <var data-anolis-xref="">H</var>'s value is an <a href="#internal-raw-uncompiled-handler">internal raw uncompiled handler</a>, run these
    substeps:</p>

    <ol><li>

      <p>If <var data-anolis-xref="">H</var> is an element's <a data-anolis-xref="event handlers" href="#event-handlers">event
      handler</a>, then let <var data-anolis-xref="">element</var> be the element, and <var data-anolis-xref="">document</var> be the element's <code><a href="dom.html#document">Document</a></code>.</p>

      <p>Otherwise, <var data-anolis-xref="">H</var> is a <code><a href="browsers.html#window">Window</a></code> object's <a data-anolis-xref="event
      handlers" href="#event-handlers">event handler</a>: let <var data-anolis-xref="">element</var> be null, and let <var data-anolis-xref="">document</var> be the <code><a href="dom.html#document">Document</a></code> most recently associated with that
      <code><a href="browsers.html#window">Window</a></code> object.</p>

     </li>

     <li><p>If <!--<var data-x="">element</var> is not null and--> <var data-anolis-xref="">document</var> is
     not in a <a href="browsers.html#browsing-context">browsing context</a>, or if <a data-anolis-xref="concept-bc-script" href="#concept-bc-script">scripting is
     enabled</a> for <var data-anolis-xref="">document</var>'s <a href="browsers.html#browsing-context">browsing context</a>, then return
     null and abort the algorithm for <a href="#getting-the-current-value-of-the-event-handler">getting the current value of the event
     handler</a>.</li>

     <li><p>Let <var data-anolis-xref="">body</var> be the uncompiled script body in the <a href="#internal-raw-uncompiled-handler">internal raw
     uncompiled handler</a>.</li>

     <li><p>Let <var data-anolis-xref="">location</var> be the location where the script body originated, as
     given by the <a href="#internal-raw-uncompiled-handler">internal raw uncompiled handler</a>.</li>

     <li><p>If <var data-anolis-xref="">element</var> is not null and <var data-anolis-xref="">element</var> has a
     <a href="forms.html#form-owner">form owner</a>, let <var data-anolis-xref="">form owner</var> be that <a href="forms.html#form-owner">form owner</a>.
     Otherwise, let <var data-anolis-xref="">form owner</var> be null.</li>

     <li><p>Let <var data-anolis-xref="">script settings</var> be the <a href="#script-settings-object">script settings object</a>
     created for the <code><a href="browsers.html#window">Window</a></code> object with which <var data-anolis-xref="">document</var> is
     currently associated.</li>

     <li><p>Obtain the <a href="#script-execution-environment">script execution environment</a> for JavaScript from <var data-anolis-xref="">script settings</var>.</li>
     <!-- v2: we could support HTML4's Content-Script-Type header here -->

     <li>

      <p>If <var data-anolis-xref="">body</var> is not parsable as <i>FunctionBody</i> or if parsing detects
      an <i>early error</i>, then follow these substeps:</p>

      <ol><li><p>Set <var data-anolis-xref="">H</var>'s value to null.</li>

       <li><p><a href="#report-the-error">Report the error</a> for the appropriate <a data-anolis-xref="concept-script" href="#concept-script">script</a> and with the appropriate position (line number and
       column number) given by <var data-anolis-xref="">location</var>, using the <a href="#global-object">global object</a>
       specified by <var data-anolis-xref="">script settings</var> as the target. If the error is still <i data-anolis-xref="concept-error-nothandled"><a href="#concept-error-nothandled">not handled</a></i> after this, then the error may be reported
       to the user.</li>

       <li><p>Jump to the step labeled <i>end</i> below.</li>

      </ol><p class="note"><i>FunctionBody</i> is defined in ECMAScript edition 5 section 13 Function
      Definition. <i>Early error</i> is defined in ECMAScript edition 5 section 16 Errors. <a href="references.html#refsECMA262">[ECMA262]</a></p>

     </li>

     <li>

      <p>If <var data-anolis-xref="">body</var> begins with a Directive Prologue that contains a Use Strict
      Directive then let <var data-anolis-xref="">strict</var> be true, otherwise let <var data-anolis-xref="">strict</var> be false.</p> <!-- we can't defer to 10.1.1 since we're not using a
      Function constructor but doing it ourselves. -->

      <p class="note">The terms "Directive Prologue" and "Use Strict Directive" are defined in
      ECMAScript edition 5 section 14.1 Directive Prologues and the Use Strict Directive. <a href="references.html#refsECMA262">[ECMA262]</a></p>

     </li>

  <!-- currently this is unnecessary: http://www.w3.org/Bugs/Public/show_bug.cgi?id=11977#c4
     <li>

      <p>If <var data-x="">strict</var> is true, and anything in <var data-x="">body</var> is a
      <code>SyntaxError</code> according to the Strict Mode Restrictions, then [...handle the error
      as described above...].</p>

      <p class="note">The Strict Mode Restrictions are those listed in ECMAScript edition 5 section
      13.1 Strict Mode Restrictions. <a href="#refsECMA262">[ECMA262]</a></p>

     </li>
  -->

     <li>

      <p>Using the <a href="#script-execution-environment">script execution environment</a> obtained above, create a function
      object (as defined in ECMAScript edition 5 section 13.2 Creating Function Objects), with:</p>

      <dl><dt>Parameter list <var data-anolis-xref="">FormalParameterList</var></dt>

       <dd>

        <dl class="switch"><dt>If <var data-anolis-xref="">H</var> is an <code data-anolis-xref="handler-onerror"><a href="#handler-onerror">onerror</a></code> <a data-anolis-xref="event handlers" href="#event-handlers">event handler</a> of a <code><a href="browsers.html#window">Window</a></code> object</dt>

         <dd>Let the function have five arguments, named <code data-anolis-xref="">event</code>, <code data-anolis-xref="">source</code>, <code data-anolis-xref="">lineno</code>, <code data-anolis-xref="">colno</code>, and
         <code data-anolis-xref="">error</code>.</dd>

         <!-- /colno/ is new as of 2012; see https://www.w3.org/Bugs/Public/show_bug.cgi?id=13319 and 22800 -->
         <!-- /error/ is new as of 2013; see http://lists.w3.org/Archives/Public/public-whatwg-archive/2013Jul/0313.html -->

         <dt>Otherwise</dt>

         <dd>Let the function have a single argument called <code data-anolis-xref="">event</code>.</dd>

        </dl></dd>

       <dt>Function body <var data-anolis-xref="">FunctionBody</var></dt>

       <dd>The result of parsing <var data-anolis-xref="">body</var> above.</dd>

       <dt>Lexical Environment <var data-anolis-xref="">Scope</var></dt>

       <dd>

        <ol><li>Let <var data-anolis-xref="">Scope</var> be the result of NewObjectEnvironment(<var data-anolis-xref="">document</var>, the <var data-anolis-xref="">global environment</var>).</li>

         <li>If <var data-anolis-xref="">form owner</var> is not null, let <var data-anolis-xref="">Scope</var> be the
         result of NewObjectEnvironment(<var data-anolis-xref="">&gt;form owner</var>, <var data-anolis-xref="">Scope</var>).</li>

         <li>If <var data-anolis-xref="">element</var> is not null, let <var data-anolis-xref="">Scope</var> be the
         result of NewObjectEnvironment(<var data-anolis-xref="">element</var>, <var data-anolis-xref="">Scope</var>).</li>

        </ol><p class="note">NewObjectEnvironment() is defined in ECMAScript edition 5 section 10.2.2.3
        NewObjectEnvironment (O, E). <a href="references.html#refsECMA262">[ECMA262]</a></p>

       </dd>

       <dt>Boolean flag <var data-anolis-xref="">Strict</var></dt>

       <dd>The value of <var data-anolis-xref="">strict</var>.</dd>

      </dl><p>Let <var data-anolis-xref="">function</var> be this new function.</p>

     </li>

     <li><p>Let <var data-anolis-xref="">script</var> be a new <a data-anolis-xref="concept-script" href="#concept-script">script</a>.</li>

     <!-- SCRIPT EXEC -->
     <li><p>Let <var data-anolis-xref="">script</var>'s <a href="#code-entry-point">code entry-point</a> be <var data-anolis-xref="">function</var>.</li>

<!--CLEANUP-->
     <li><p>Let <var data-anolis-xref="">script</var>'s <a href="#settings-object">settings object</a> be
     <var data-anolis-xref="">script settings</var>.</li>

     <li><p>Set <var data-anolis-xref="">H</var> to <var data-anolis-xref="">function</var>.</li>

    </ol></li>

   <li><p><i>End</i>: Return <var data-anolis-xref="">H</var>'s value.</li>

  </ol></div>



  <h5 id="event-handlers-on-elements,-document-objects,-and-window-objects"><span class="secno">6.1.5.2</span> 要素のイベントハンドラ、<code><a href="dom.html#document">Document</a></code>オブジェクト、および<code><a href="browsers.html#window">Window</a></code>オブジェクト</h5>

  <p>以下は、<a href="#event-handlers">イベントハンドラ</a>（およびそれに対応する<a data-anolis-xref="event
  handler event type" href="#event-handler-event-type">イベントハンドライベント型</a>）であり、 <span class="impl">that must be</span>
  <a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>と<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>の両方として、すべての<a href="infrastructure.html#html-elements">HTML要素</a>によってサポートされ、 <span class="impl">that must be</span>
  <a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>として、すべての<code><a href="dom.html#document">Document</a></code>および<code><a href="browsers.html#window">Window</a></code>オブジェクトでサポートされる：</p>

  <table><thead><tr><th><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a> </th><th><a href="#event-handler-event-type">イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn data-anolis-xref="handler-onabort" id="handler-onabort"><code>onabort</code></dfn> </td><td> <code data-anolis-xref="event-abort">abort</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-oncancel" id="handler-oncancel"><code>oncancel</code></dfn> </td><td> <code data-anolis-xref="event-cancel">cancel</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-oncanplay" id="handler-oncanplay"><code>oncanplay</code></dfn> </td><td> <code data-anolis-xref="event-media-canplay"><a href="embedded-content-0.html#event-media-canplay">canplay</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-oncanplaythrough" id="handler-oncanplaythrough"><code>oncanplaythrough</code></dfn> </td><td> <code data-anolis-xref="event-media-canplaythrough"><a href="embedded-content-0.html#event-media-canplaythrough">canplaythrough</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onchange" id="handler-onchange"><code>onchange</code></dfn> </td><td> <code data-anolis-xref="event-change">change</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onclick" id="handler-onclick"><code>onclick</code></dfn> </td><td> <code data-anolis-xref="event-click"><a href="infrastructure.html#event-click">click</a></code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-oncuechange" id="handler-oncuechange"><code>oncuechange</code></dfn> </td><td> <code data-anolis-xref="event-cuechange">cuechange</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-ondblclick" id="handler-ondblclick"><code>ondblclick</code></dfn> </td><td> <code data-anolis-xref="event-dblclick">dblclick</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-ondurationchange" id="handler-ondurationchange"><code>ondurationchange</code></dfn> </td><td> <code data-anolis-xref="event-media-durationchange"><a href="embedded-content-0.html#event-media-durationchange">durationchange</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onemptied" id="handler-onemptied"><code>onemptied</code></dfn> </td><td> <code data-anolis-xref="event-media-emptied"><a href="embedded-content-0.html#event-media-emptied">emptied</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onended" id="handler-onended"><code>onended</code></dfn> </td><td> <code data-anolis-xref="event-media-ended"><a href="embedded-content-0.html#event-media-ended">ended</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-oninput" id="handler-oninput"><code>oninput</code></dfn> </td><td> <code data-anolis-xref="event-input">input</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-oninvalid" id="handler-oninvalid"><code>oninvalid</code></dfn> </td><td> <code data-anolis-xref="event-invalid">invalid</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onkeydown" id="handler-onkeydown"><code>onkeydown</code></dfn> </td><td> <code data-anolis-xref="event-keydown">keydown</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onkeypress" id="handler-onkeypress"><code>onkeypress</code></dfn> </td><td> <code data-anolis-xref="event-keypress">keypress</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onkeyup" id="handler-onkeyup"><code>onkeyup</code></dfn> </td><td> <code data-anolis-xref="event-keyup">keyup</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onloadeddata" id="handler-onloadeddata"><code>onloadeddata</code></dfn> </td><td> <code data-anolis-xref="event-media-loadeddata"><a href="embedded-content-0.html#event-media-loadeddata">loadeddata</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onloadedmetadata" id="handler-onloadedmetadata"><code>onloadedmetadata</code></dfn> </td><td> <code data-anolis-xref="event-media-loadedmetadata"><a href="embedded-content-0.html#event-media-loadedmetadata">loadedmetadata</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onloadstart" id="handler-onloadstart"><code>onloadstart</code></dfn> </td><td> <code data-anolis-xref="event-media-loadstart"><a href="embedded-content-0.html#event-media-loadstart">loadstart</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmousedown" id="handler-onmousedown"><code>onmousedown</code></dfn> </td><td> <code data-anolis-xref="event-mousedown">mousedown</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmouseenter" id="handler-onmouseenter"><code>onmouseenter</code></dfn> </td><td> <code data-anolis-xref="event-mouseenter">mouseenter</code> <!-- compat -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmouseleave" id="handler-onmouseleave"><code>onmouseleave</code></dfn> </td><td> <code data-anolis-xref="event-mouseleave">mouseleave</code> <!-- compat -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmousemove" id="handler-onmousemove"><code>onmousemove</code></dfn> </td><td> <code data-anolis-xref="event-mousemove">mousemove</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmouseout" id="handler-onmouseout"><code>onmouseout</code></dfn> </td><td> <code data-anolis-xref="event-mouseout">mouseout</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmouseover" id="handler-onmouseover"><code>onmouseover</code></dfn> </td><td> <code data-anolis-xref="event-mouseover">mouseover</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmouseup" id="handler-onmouseup"><code>onmouseup</code></dfn> </td><td> <code data-anolis-xref="event-mouseup">mouseup</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onmousewheel" id="handler-onmousewheel"><code>onmousewheel</code></dfn> </td><td> <code data-anolis-xref="event-mousewheel">mousewheel</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onpause" id="handler-onpause"><code>onpause</code></dfn> </td><td> <code data-anolis-xref="event-media-pause"><a href="embedded-content-0.html#event-media-pause">pause</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onplay" id="handler-onplay"><code>onplay</code></dfn> </td><td> <code data-anolis-xref="event-media-play"><a href="embedded-content-0.html#event-media-play">play</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onplaying" id="handler-onplaying"><code>onplaying</code></dfn> </td><td> <code data-anolis-xref="event-media-playing"><a href="embedded-content-0.html#event-media-playing">playing</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onprogress" id="handler-onprogress"><code>onprogress</code></dfn> </td><td> <code data-anolis-xref="event-media-progress"><a href="embedded-content-0.html#event-media-progress">progress</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onratechange" id="handler-onratechange"><code>onratechange</code></dfn> </td><td> <code data-anolis-xref="event-media-ratechange"><a href="embedded-content-0.html#event-media-ratechange">ratechange</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onreset" id="handler-onreset"><code>onreset</code></dfn> </td><td> <code data-anolis-xref="event-reset">reset</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onseeked" id="handler-onseeked"><code>onseeked</code></dfn> </td><td> <code data-anolis-xref="event-media-seeked"><a href="embedded-content-0.html#event-media-seeked">seeked</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onseeking" id="handler-onseeking"><code>onseeking</code></dfn> </td><td> <code data-anolis-xref="event-media-seeking"><a href="embedded-content-0.html#event-media-seeking">seeking</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onselect" id="handler-onselect"><code>onselect</code></dfn> </td><td> <code data-anolis-xref="event-select">select</code> <!-- widely used --><!-- [CSSOM] --> 
    </td></tr><tr><td><dfn data-anolis-xref="handler-onshow" id="handler-onshow"><code>onshow</code></dfn> </td><td> <code data-anolis-xref="event-show">show</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onstalled" id="handler-onstalled"><code>onstalled</code></dfn> </td><td> <code data-anolis-xref="event-media-stalled"><a href="embedded-content-0.html#event-media-stalled">stalled</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onsubmit" id="handler-onsubmit"><code>onsubmit</code></dfn> </td><td> <code data-anolis-xref="event-submit">submit</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onsuspend" id="handler-onsuspend"><code>onsuspend</code></dfn> </td><td> <code data-anolis-xref="event-media-suspend"><a href="embedded-content-0.html#event-media-suspend">suspend</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-ontimeupdate" id="handler-ontimeupdate"><code>ontimeupdate</code></dfn> </td><td> <code data-anolis-xref="event-media-timeupdate"><a href="embedded-content-0.html#event-media-timeupdate">timeupdate</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-ontoggle" id="handler-ontoggle"><code>ontoggle</code></dfn> </td><td> <code data-anolis-xref="event-toggle">toggle</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onvolumechange" id="handler-onvolumechange"><code>onvolumechange</code></dfn> </td><td> <code data-anolis-xref="event-media-volumechange"><a href="embedded-content-0.html#event-media-volumechange">volumechange</a></code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onwaiting" id="handler-onwaiting"><code>onwaiting</code></dfn> </td><td> <code data-anolis-xref="event-media-waiting"><a href="embedded-content-0.html#event-media-waiting">waiting</a></code>

<!-- not supported, use dnd: --><!--<tr><td><dfn data-x="handler-onbeforecopy"><code>onbeforecopy</code></dfn> <td> <code data-x="event-beforecopy">beforecopy</code>--><!-- widely used --><!--<tr><td><dfn data-x="handler-oncopy"><code>oncopy</code></dfn> <td> <code data-x="event-copy">copy</code>--><!-- widely used --><!--<tr><td><dfn data-x="handler-onpaste"><code>onpaste</code></dfn> <td> <code data-x="event-paste">paste</code>--><!-- widely used --><!-- not supported yet (v2?): --><!--<tr><td><dfn data-x="handler-onselectstart"><code>onselectstart</code></dfn> <td> <code data-x="event-selectstart">selectstart</code>--><!-- widely used -->
 
 
 

 
  </td></tr></table><hr><p>以下は、<a href="#event-handlers">イベントハンドラ</a>（およびそれに対応する<a data-anolis-xref="event
  handler event type" href="#event-handler-event-type">イベントハンドライベント型</a>）であり、 <span class="impl">that must be</span>
  <a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>と<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>の両方として、<code><a href="sections.html#the-body-element">body</a></code>および<code><a href="obsolete.html#frameset">frameset</a></code>要素以外のすべての<a href="infrastructure.html#html-elements">HTML要素</a>によってサポートされ、 <span class="impl">that must be</span> <a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>として、すべての<code><a href="dom.html#document">Document</a></code>オブジェクトでサポートされ、 <span class="impl">that must be</span>
  <code><a href="browsers.html#window">Window</a></code>オブジェクトの自身で<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>として<code><a href="browsers.html#window">Window</a></code>オブジェクトでサポートされ、かつており、<a data-anolis-xref="concept-document-window" href="browsers.html#concept-document-window">その<code>Window</code>オブジェクトの<code>Document</code></a>によって所有される<code><a href="sections.html#the-body-element">body</a></code>および<code><a href="obsolete.html#frameset">frameset</a></code>要素で対応する<a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>と<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>をもつ：</p>

  <table><thead><tr><th><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a> </th><th><a href="#event-handler-event-type">イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn data-anolis-xref="handler-onblur" id="handler-onblur"><code>onblur</code></dfn> </td><td> <code data-anolis-xref="event-blur">blur</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onerror" id="handler-onerror"><code>onerror</code></dfn> </td><td> <code data-anolis-xref="event-error">error</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onfocus" id="handler-onfocus"><code>onfocus</code></dfn> </td><td> <code data-anolis-xref="event-focus">focus</code> <!-- widely used -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-onload" id="handler-onload"><code>onload</code></dfn> </td><td> <code data-anolis-xref="event-load">load</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onresize" id="handler-onresize"><code>onresize</code></dfn> </td><td> <code data-anolis-xref="event-resize">resize</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-onscroll" id="handler-onscroll"><code>onscroll</code></dfn> </td><td> <code data-anolis-xref="event-scroll">scroll</code>
  </td></tr></table><hr><p>以下は、<a href="#event-handlers">イベントハンドラ</a>（およびそれに対応する<a data-anolis-xref="event
  handler event type" href="#event-handler-event-type">イベントハンドライベント型</a>）であり、 <span class="impl">that must be</span>
  <code><a href="browsers.html#window">Window</a></code>オブジェクトの自身で<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>として<code><a href="browsers.html#window">Window</a></code>オブジェクトでサポートされ、かつており、<a data-anolis-xref="concept-document-window" href="browsers.html#concept-document-window">その<code>Window</code>オブジェクトの<code>Document</code></a>によって所有される<code><a href="sections.html#the-body-element">body</a></code>および<code><a href="obsolete.html#frameset">frameset</a></code>要素で対応する<a href="#event-handler-content-attributes">イベントハンドラコンテンツ属性</a>と<a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>をもつ：</p>

  <table><thead><tr><th><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a> </th><th><a href="#event-handler-event-type">イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn data-anolis-xref="handler-window-onafterprint" id="handler-window-onafterprint"><code>onafterprint</code></dfn> </td><td> <code data-anolis-xref="event-afterprint">afterprint</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onbeforeprint" id="handler-window-onbeforeprint"><code>onbeforeprint</code></dfn> </td><td> <code data-anolis-xref="event-beforeprint">beforeprint</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onbeforeunload" id="handler-window-onbeforeunload"><code>onbeforeunload</code></dfn> </td><td> <code data-anolis-xref="event-beforeunload">beforeunload</code>
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onhashchange" id="handler-window-onhashchange"><code>onhashchange</code></dfn> </td><td> <code data-anolis-xref="event-hashchange"><a href="browsers.html#event-hashchange">hashchange</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onmessage" id="handler-window-onmessage"><code>onmessage</code></dfn> </td><td> <code data-anolis-xref="event-message">message</code> <!-- new for postMessage -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onoffline" id="handler-window-onoffline"><code>onoffline</code></dfn> </td><td> <code data-anolis-xref="event-offline"><a href="browsers.html#event-offline">offline</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-ononline" id="handler-window-ononline"><code>ononline</code></dfn> </td><td> <code data-anolis-xref="event-online"><a href="browsers.html#event-online">online</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onpagehide" id="handler-window-onpagehide"><code>onpagehide</code></dfn> </td><td> <code data-anolis-xref="event-pagehide"><a href="browsers.html#event-pagehide">pagehide</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onpageshow" id="handler-window-onpageshow"><code>onpageshow</code></dfn> </td><td> <code data-anolis-xref="event-pageshow"><a href="browsers.html#event-pageshow">pageshow</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onpopstate" id="handler-window-onpopstate"><code>onpopstate</code></dfn> </td><td> <code data-anolis-xref="event-popstate"><a href="browsers.html#event-popstate">popstate</a></code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onstorage" id="handler-window-onstorage"><code>onstorage</code></dfn> </td><td> <code data-anolis-xref="event-storage">storage</code> <!-- new -->
    </td></tr><tr><td><dfn data-anolis-xref="handler-window-onunload" id="handler-window-onunload"><code>onunload</code></dfn> </td><td> <code data-anolis-xref="event-unload">unload</code> <!-- widely used -->
  </td></tr></table><hr><!-- this guy is only on Document and not on HTMLElement because otherwise HTMLScriptElement would
  have it and that causes compatibility issues since IE fires readystatechange events on <script>,
  not load events, and we can't fire both, and some sites try to decide which to look for based on
  the presence of script.onreadystatechange on HTMLScriptElement.
     http://www.w3.org/Bugs/Public/show_bug.cgi?id=13965
     http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2011-September/033136.html
  --><p>以下は、<a href="#event-handlers">イベントハンドラ</a>（およびそれに対応する<a data-anolis-xref="event
  handler event type" href="#event-handler-event-type">イベントハンドライベント型</a>）であり、 <span class="impl">that must be</span>
  <a href="#event-handler-idl-attributes">イベントハンドラIDL属性</a>としてすべての<code><a href="dom.html#document">Document</a></code>オブジェクトでサポートされる：</p>

  <table><thead><tr><th><a data-anolis-xref="event handlers" href="#event-handlers">イベントハンドラ</a> </th><th><a href="#event-handler-event-type">イベントハンドライベント型</a>
   <tbody></th></tr><tr><td><dfn data-anolis-xref="handler-onreadystatechange" id="handler-onreadystatechange"><code>onreadystatechange</code></dfn> </td><td> <code data-anolis-xref="event-readystatechange"><a href="dom.html#event-readystatechange">readystatechange</a></code>
  </td></tr></table><h6 id="idl-definitions"><span class="secno">6.1.5.2.1</span> IDL定義</h6>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="globaleventhandlers">GlobalEventHandlers</dfn> {
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onabort" href="#handler-onabort">onabort</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onblur" href="#handler-onblur">onblur</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oncancel" href="#handler-oncancel">oncancel</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oncanplay" href="#handler-oncanplay">oncanplay</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oncanplaythrough" href="#handler-oncanplaythrough">oncanplaythrough</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onchange" href="#handler-onchange">onchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onclick" href="#handler-onclick">onclick</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oncuechange" href="#handler-oncuechange">oncuechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-ondblclick" href="#handler-ondblclick">ondblclick</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-ondurationchange" href="#handler-ondurationchange">ondurationchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onemptied" href="#handler-onemptied">onemptied</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onended" href="#handler-onended">onended</a>;
           attribute <a href="#onerroreventhandler">OnErrorEventHandler</a> <a data-anolis-xref="handler-onerror" href="#handler-onerror">onerror</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onfocus" href="#handler-onfocus">onfocus</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oninput" href="#handler-oninput">oninput</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-oninvalid" href="#handler-oninvalid">oninvalid</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onkeydown" href="#handler-onkeydown">onkeydown</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onkeypress" href="#handler-onkeypress">onkeypress</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onkeyup" href="#handler-onkeyup">onkeyup</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onload" href="#handler-onload">onload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onloadeddata" href="#handler-onloadeddata">onloadeddata</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onloadedmetadata" href="#handler-onloadedmetadata">onloadedmetadata</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onloadstart" href="#handler-onloadstart">onloadstart</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmousedown" href="#handler-onmousedown">onmousedown</a>;
  [LenientThis] attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmouseenter" href="#handler-onmouseenter">onmouseenter</a>;
  [LenientThis] attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmouseleave" href="#handler-onmouseleave">onmouseleave</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmousemove" href="#handler-onmousemove">onmousemove</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmouseout" href="#handler-onmouseout">onmouseout</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmouseover" href="#handler-onmouseover">onmouseover</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmouseup" href="#handler-onmouseup">onmouseup</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onmousewheel" href="#handler-onmousewheel">onmousewheel</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onpause" href="#handler-onpause">onpause</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onplay" href="#handler-onplay">onplay</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onplaying" href="#handler-onplaying">onplaying</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onprogress" href="#handler-onprogress">onprogress</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onratechange" href="#handler-onratechange">onratechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onreset" href="#handler-onreset">onreset</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onresize" href="#handler-onresize">onresize</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onscroll" href="#handler-onscroll">onscroll</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onseeked" href="#handler-onseeked">onseeked</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onseeking" href="#handler-onseeking">onseeking</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onselect" href="#handler-onselect">onselect</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onshow" href="#handler-onshow">onshow</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onstalled" href="#handler-onstalled">onstalled</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onsubmit" href="#handler-onsubmit">onsubmit</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onsuspend" href="#handler-onsuspend">onsuspend</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-ontimeupdate" href="#handler-ontimeupdate">ontimeupdate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-ontoggle" href="#handler-ontoggle">ontoggle</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onvolumechange" href="#handler-onvolumechange">onvolumechange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-onwaiting" href="#handler-onwaiting">onwaiting</a>;
};

[NoInterfaceObject]
interface <dfn id="windoweventhandlers">WindowEventHandlers</dfn> {
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onafterprint" href="#handler-window-onafterprint">onafterprint</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onbeforeprint" href="#handler-window-onbeforeprint">onbeforeprint</a>;
           attribute <a href="#onbeforeunloadeventhandler">OnBeforeUnloadEventHandler</a> <a data-anolis-xref="handler-window-onbeforeunload" href="#handler-window-onbeforeunload">onbeforeunload</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onhashchange" href="#handler-window-onhashchange">onhashchange</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onmessage" href="#handler-window-onmessage">onmessage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onoffline" href="#handler-window-onoffline">onoffline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-ononline" href="#handler-window-ononline">ononline</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onpagehide" href="#handler-window-onpagehide">onpagehide</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onpageshow" href="#handler-window-onpageshow">onpageshow</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onpopstate" href="#handler-window-onpopstate">onpopstate</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onstorage" href="#handler-window-onstorage">onstorage</a>;
           attribute <a href="#eventhandler">EventHandler</a> <a data-anolis-xref="handler-window-onunload" href="#handler-window-onunload">onunload</a>;
};</pre>



  <div class="impl">

  <h5 id="event-firing"><span class="secno">6.1.5.3 </span>Event firing</h5>

  <p>Certain operations and methods are defined as firing events on elements. For example, the <code data-anolis-xref="dom-click"><a href="editing.html#dom-click">click()</a></code> method on the <code><a href="dom.html#htmlelement">HTMLElement</a></code> interface is defined as
  firing a <code data-anolis-xref="event-click"><a href="infrastructure.html#event-click">click</a></code> event on the element. <a href="references.html#refsDOMEVENTS">[DOMEVENTS]</a></p>

  <p><dfn data-anolis-xref="fire a simple event" id="fire-a-simple-event">Firing a simple event named <var data-anolis-xref="">e</var></dfn> means
  that a <a data-anolis-xref="concept-events-trusted" href="infrastructure.html#concept-events-trusted">trusted</a> event with the name <var data-anolis-xref="">e</var>, which does not bubble (except where otherwise stated) and is not cancelable
  (except where otherwise stated), and which uses the <code><a href="infrastructure.html#event">Event</a></code> interface, must be created
  and <a data-anolis-xref="concept-event-dispatch" href="infrastructure.html#concept-event-dispatch">dispatched</a> at the given target.</p>

  <p><dfn data-anolis-xref="fire a synthetic mouse event" id="fire-a-synthetic-mouse-event">Firing a synthetic mouse event named <var data-anolis-xref="">e</var></dfn> means that an event with the name <var data-anolis-xref="">e</var>, which is <a data-anolis-xref="concept-events-trusted" href="infrastructure.html#concept-events-trusted">trusted</a> (except where otherwise stated), does not bubble
  (except where otherwise stated), is not cancelable (except where otherwise stated), and which uses
  the <code><a href="infrastructure.html#mouseevent">MouseEvent</a></code> interface, must be created and dispatched at the given target. The
  event object must have its <code data-anolis-xref="">screenX</code>, <code data-anolis-xref="">screenY</code>, <code data-anolis-xref="">clientX</code>, <code data-anolis-xref="">clientY</code>, and <code data-anolis-xref="">button</code>
  attributes initialized to 0, its <code data-anolis-xref="">ctrlKey</code>, <code data-anolis-xref="">shiftKey</code>,
  <code data-anolis-xref="">altKey</code>, and <code data-anolis-xref="">metaKey</code> attributes initialized according
  to the current state of the key input device, if any (false for any keys that are not available),
  its <code data-anolis-xref="">detail</code> attribute initialized to 1, and its <code data-anolis-xref="">relatedTarget</code> attribute initialized to null (except where otherwise stated). The
  <code data-anolis-xref="">getModifierState()</code> method on the object must return values appropriately
  describing the state of the key input device at the time the event is created.</p>

  <p><dfn data-anolis-xref="fire a click event" id="fire-a-click-event">Firing a <code data-anolis-xref="event-click">click</code> event</dfn>
  means <a data-anolis-xref="fire a synthetic mouse event" href="#fire-a-synthetic-mouse-event">firing a synthetic mouse event named <code data-anolis-xref="event-click">click</code></a>, which bubbles and is cancelable.</p>

  <p>The default action of these events is to do nothing except where otherwise stated.</p>

  </div>


  <div class="impl">

  <h5 id="events-and-the-window-object"><span class="secno">6.1.5.4 </span>Events and the <code><a href="browsers.html#window">Window</a></code> object</h5>

  <p>When an event is dispatched at a DOM node in a <code><a href="dom.html#document">Document</a></code> in a <a href="browsers.html#browsing-context">browsing
  context</a>, if the event is not a <code data-anolis-xref="event-load">load</code> event, the user agent
  must act as if, for the purposes of <a data-anolis-xref="concept-event-dispatch" href="infrastructure.html#concept-event-dispatch">event dispatching</a>,
  the <code><a href="browsers.html#window">Window</a></code> object is the parent of the <code><a href="dom.html#document">Document</a></code> object. <a href="references.html#refsDOM">[DOM]</a></p>

  <!-- If Anne does this: http://krijnhoetmer.nl/irc-logs/whatwg/20121205#l-4 (see bug 18780)
  <p>If a <code>Document</code> object is associated with a <code>Window</code> object, its
  <span>event parent</span> is that <code>Window</code> object.</p>
  -->

  </div>


  <h3 id="atob"><span class="secno">6.2</span> Base64のユーティリティメソッド</h3>

  <p><code data-anolis-xref="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob()</a></code>および<code data-anolis-xref="dom-windowbase64-btoa"><a href="#dom-windowbase64-btoa">btoa()</a></code>メソッドは、著者がbase64エンコーディング間でコンテンツを変換できる：</p><!-- v2: actual binary support -->

  

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="windowbase64">WindowBase64</dfn> {
  DOMString <a data-anolis-xref="dom-windowbase64-btoa" href="#dom-windowbase64-btoa">btoa</a>(DOMString btoa);
  DOMString <a data-anolis-xref="dom-windowbase64-atob" href="#dom-windowbase64-atob">atob</a>(DOMString atob);
};
<a href="browsers.html#window">Window</a> implements <a href="#windowbase64">WindowBase64</a>;</pre>

  <p class="note">これらAPIにおいて、簡略のために、"b"は"binary"、"a"は"ASCII"を表すと考えることができる。ただし実際には、主に歴史的な理由で、これらの関数の入力と出力の両方にはUnicode文字列である。</p>

  <dl class="domintro"><dt><var data-anolis-xref="">result</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowbase64-btoa"><a href="#dom-windowbase64-btoa">btoa</a></code>( <var data-anolis-xref="">data</var> )</dt>

   <dd>

    <p>入力データを取得し、U+0000からU+00FFまでの範囲で文字のみを含むUnicode文字列の形式で、それぞれ値0x00から0xFFまでを持つバイナリバイトを表し、そのbase64表現に変換したものを返す。</p>

    <p>入力文字列が任意の範囲外の文字を含む場合、<code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code>例外を投げる。</p>

   </dd>

   <dt><var data-anolis-xref="">result</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowbase64-atob"><a href="#dom-windowbase64-atob">atob</a></code>( <var data-anolis-xref="">data</var> )</dt>

   <dd>

    <p>入力データを取得し、base64でエンコードされたバイナリデータを含むUnicode文字列の形式で、これをデコードし、それぞれ0x00から0xFFまでの値を持つバイナリバイトを表す、そのバイナリデータに対応した、範囲U+0000からU+00FFまでの文字から成る文字列を返す。</p>

    <p>入力文字列が妥当なbase64データでない場合、<code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code>例外を投げる。</p>

   </dd>

  </dl><div class="impl">

  <p class="note">The <code><a href="#windowbase64">WindowBase64</a></code> interface adds to the <code><a href="browsers.html#window">Window</a></code> interface
  and the <code>WorkerGlobalScope</code> interface (part of Web workers).</p>

  <p>The <dfn data-anolis-xref="dom-windowbase64-btoa" id="dom-windowbase64-btoa"><code>btoa()</code></dfn> method must throw an
  <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception if the method's first argument contains any character
  whose code point is greater than U+00FF. Otherwise, the user agent must convert that argument to a
  sequence of octets whose <var data-anolis-xref="">n</var>th octet is the eight-bit representation of the code
  point of the <var data-anolis-xref="">n</var>th character of the argument, and then must apply the base64
  algorithm to that sequence of octets, and return the result. <a href="references.html#refsRFC4648">[RFC4648]</a><!--base64--></p> <!-- Aryeh says: This seems to be what all
  browsers do as of January 2011 (except IE, which doesn't support these functions at all). -->


  <p>The <dfn data-anolis-xref="dom-windowbase64-atob" id="dom-windowbase64-atob"><code>atob()</code></dfn> method must run the following
  steps to parse the string passed in the method's first argument:</p>

  <ol><!-- Aryeh says: Copies Firefox behavior as of January 2011 (4.0b8). WebKit is somewhat laxer,
   and Opera throws no exceptions at all. gsnedders reports Opera's behavior causes site-compat
   problems, and I figure most sites depend on Firefox if on anything, so go with that. --><!-- Since updated to drop whitespace, based on the arguments here:
      http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-May/031613.html
   --><li><p>Let <var data-anolis-xref="">input</var> be the string being parsed.</li>

   <li><p>Let <var data-anolis-xref="">position</var> be a pointer into <var data-anolis-xref="">input</var>, initially
   pointing at the start of the string.</li>

   <li><p>Remove all <a data-anolis-xref="space character" href="infrastructure.html#space-character">space characters</a> from <var data-anolis-xref="">input</var>.</li>

   <li><p>If the length of <var data-anolis-xref="">input</var> divides by 4 leaving no remainder, then: if
   <var data-anolis-xref="">input</var> ends with one or two "=" (U+003D) characters, remove them
   from <var data-anolis-xref="">input</var>.</li>

   <li><p>If the length of <var data-anolis-xref="">input</var> divides by 4 leaving a remainder of 1, throw an
   <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception and abort these steps.</p>

   </li><li>

    <p>If <var data-anolis-xref="">input</var> contains a character that is not in the following list of
    characters and character ranges, throw an <code><a href="infrastructure.html#invalidcharactererror">InvalidCharacterError</a></code> exception and abort
    these steps:</p>

    <ul class="brief"><li>"+" (U+002B)
     </li><li>"/" (U+002F)
     </li><li><a href="infrastructure.html#alphanumeric-ascii-characters">Alphanumeric ASCII characters</a>
    </li></ul></li>

   <li><p>Let <var data-anolis-xref="">output</var> be a string, initially empty.</li>

   <li><p>Let <var data-anolis-xref="">buffer</var> be a buffer that can have bits appended to it, initially
   empty.</li>

   <li>

    <p>While <var data-anolis-xref="">position</var> does not point past the end of <var data-anolis-xref="">input</var>,
    run these substeps:</p>

    <ol><li>

      <p>Find the character pointed to by <var data-anolis-xref="">position</var> in the first column of the
      following table. Let <var data-anolis-xref="">n</var> be the number given in the second cell of the same
      row.</p>

      <div id="base64-table">
       <table><thead><tr><th>Character
          </th><th>Number
        <tbody></th></tr><tr><td>A</td><td>0
         </td></tr><tr><td>B</td><td>1
         </td></tr><tr><td>C</td><td>2
         </td></tr><tr><td>D</td><td>3
         </td></tr><tr><td>E</td><td>4
         </td></tr><tr><td>F</td><td>5
         </td></tr><tr><td>G</td><td>6
         </td></tr><tr><td>H</td><td>7
         </td></tr><tr><td>I</td><td>8
         </td></tr><tr><td>J</td><td>9
         </td></tr><tr><td>K</td><td>10
         </td></tr><tr><td>L</td><td>11
         </td></tr><tr><td>M</td><td>12
         </td></tr><tr><td>N</td><td>13
         </td></tr><tr><td>O</td><td>14
         </td></tr><tr><td>P</td><td>15
         </td></tr><tr><td>Q</td><td>16
         </td></tr><tr><td>R</td><td>17
         </td></tr><tr><td>S</td><td>18
         </td></tr><tr><td>T</td><td>19
         </td></tr><tr><td>U</td><td>20
         </td></tr><tr><td>V</td><td>21
         </td></tr><tr><td>W</td><td>22
         </td></tr><tr><td>X</td><td>23
         </td></tr><tr><td>Y</td><td>24
         </td></tr><tr><td>Z</td><td>25
         </td></tr><tr><td>a</td><td>26
         </td></tr><tr><td>b</td><td>27
         </td></tr><tr><td>c</td><td>28
         </td></tr><tr><td>d</td><td>29
         </td></tr><tr><td>e</td><td>30
         </td></tr><tr><td>f</td><td>31
         </td></tr><tr><td>g</td><td>32
         </td></tr><tr><td>h</td><td>33
         </td></tr><tr><td>i</td><td>34
         </td></tr><tr><td>j</td><td>35
         </td></tr><tr><td>k</td><td>36
         </td></tr><tr><td>l</td><td>37
         </td></tr><tr><td>m</td><td>38
         </td></tr><tr><td>n</td><td>39
         </td></tr><tr><td>o</td><td>40
         </td></tr><tr><td>p</td><td>41
         </td></tr><tr><td>q</td><td>42
         </td></tr><tr><td>r</td><td>43
         </td></tr><tr><td>s</td><td>44
         </td></tr><tr><td>t</td><td>45
         </td></tr><tr><td>u</td><td>46
         </td></tr><tr><td>v</td><td>47
         </td></tr><tr><td>w</td><td>48
         </td></tr><tr><td>x</td><td>49
         </td></tr><tr><td>y</td><td>50
         </td></tr><tr><td>z</td><td>51
         </td></tr><tr><td>0</td><td>52
         </td></tr><tr><td>1</td><td>53
         </td></tr><tr><td>2</td><td>54
         </td></tr><tr><td>3</td><td>55
         </td></tr><tr><td>4</td><td>56
         </td></tr><tr><td>5</td><td>57
         </td></tr><tr><td>6</td><td>58
         </td></tr><tr><td>7</td><td>59
         </td></tr><tr><td>8</td><td>60
         </td></tr><tr><td>9</td><td>61
         </td></tr><tr><td>+</td><td>62
         </td></tr><tr><td>/</td><td>63
       </td></tr></table></div>

     </li>

     <li><p>Append to <var data-anolis-xref="">buffer</var> the six bits corresponding to <var data-anolis-xref="">number</var>, most significant bit first.</li>

     <li><p>If <var data-anolis-xref="">buffer</var> has accumulated 24 bits, interpret them as three 8-bit
     big-endian numbers. Append the three characters with code points equal to those numbers to <var data-anolis-xref="">output</var>, in the same order, and then empty <var data-anolis-xref="">buffer</var>.</li>

     <li><p>Advance <var data-anolis-xref="">position</var> by one character.</li>

    </ol></li>

   <li>

    <p>If <var data-anolis-xref="">buffer</var> is not empty, it contains either 12 or 18 bits. If it contains
    12 bits, discard the last four and interpret the remaining eight as an 8-bit big-endian number.
    If it contains 18 bits, discard the last two and interpret the remaining 16 as two 8-bit
    big-endian numbers. Append the one or two characters with code points equal to those one or two
    numbers to <var data-anolis-xref="">output</var>, in the same order.</p>

    <p class="note">The discarded bits mean that, for instance, <code data-anolis-xref="">atob("YQ")</code> and
    <code data-anolis-xref="">atob("YR")</code> both return "<code data-anolis-xref="">a</code>".</p>

   </li>

   <li><p>Return <var data-anolis-xref="">output</var>.</li>

  </ol><!-- Note: this function is defined explicitly here because RFC4648 does not specify how to handle
  erroneous input, and no preexisting browser implementation simply throws an exception on all
  erroneous input. --></div><!--TOPIC:HTML Syntax and Parsing-->



  <h3 id="dynamic-markup-insertion"><span class="secno">6.3</span> <dfn>動的マークアップの挿入</dfn></h3>

  <p class="note">動的にマークアップを文書に挿入するためのAPIはパーサと互いに影響し合う。したがって、APTの振る舞いは、<a href="infrastructure.html#html-documents">HTML文書</a>（および<a href="syntax.html#html-parser">HTMLパーサ</a>）または<a href="infrastructure.html#xml-documents">XML文書</a>（および<a href="the-xhtml-syntax.html#xml-parser">XMLパーサ</a>）におけるXHTMLとともに使用されるかどうかによって異なる。</p>



  <h4 id="opening-the-input-stream"><span class="secno">6.3.1</span> 入力ストリームを開く</h4>

  <p><dfn data-anolis-xref="dom-document-open" id="dom-document-open"><code>open()</code></dfn>メソッドは、異なる引数の数をもつ異形を提供する。</p>

  <dl class="domintro"><dt><var data-anolis-xref="">document</var> = <var data-anolis-xref="">document</var> . <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open</a></code>( [ <var data-anolis-xref="">type</var> [, <var data-anolis-xref="">replace</var> ] ] )</dt>

   <dd>

    <p>前のオブジェクトを再利用する場合を除き、あたかもそれが新しい<code><a href="dom.html#document">Document</a></code>オブジェクトであるかのように、<code><a href="dom.html#document">Document</a></code>に正しい場所で置換され、その後返される。</p>

    <p><var data-anolis-xref="">type</var>引数が省略されるかは、"<code><a href="iana.html#text/html">text/html</a></code>"を持つ場合、結果として生じる<code><a href="dom.html#document">Document</a></code>は、<code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code>を使って解析するデータを指定されうる、関連付けられたHTMLパーサを持つ。そうでなければ、<code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code>に渡ったすべてのコンテンツは、プレーンテキストとして解析されるだろう。</p>

    <p><var data-anolis-xref="">replace</var>引数が存在し、値"<code data-anolis-xref="">replace</code>"を持つ場合、<code><a href="dom.html#document">Document</a></code>オブジェクトのセッション履歴内の既存エントリは削除される。</p>

    <p><code><a href="dom.html#document">Document</a></code>がまだ解析されている場合、メソッドは効果がない。</p>

    <p><code><a href="dom.html#document">Document</a></code>が<a data-anolis-xref="XML documents" href="infrastructure.html#xml-documents">XML文書</a>の場合、<code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code>例外を投げる。</p>

   </dd>

   <dt><var data-anolis-xref="">window</var> = <var data-anolis-xref="">document</var> . <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open</a></code>( <var data-anolis-xref="">url</var>, <var data-anolis-xref="">name</var>, <var data-anolis-xref="">features</var> [, <var data-anolis-xref="">replace</var> ] )</dt>

   <dd>

    <p><code data-anolis-xref="dom-open"><a href="browsers.html#dom-open">window.open()</a></code>メソッドのように動作する。</p>

   </dd>

  </dl><div class="impl">

  <p><code><a href="dom.html#document">Document</a></code> objects have an <dfn id="ignore-opens-during-unload-counter">ignore-opens-during-unload counter</dfn>, which is
  used to prevent scripts from invoking the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>
  method (directly or indirectly) while the document is <a data-anolis-xref="unload a document" href="browsers.html#unload-a-document">being
  unloaded</a>. Initially, the counter must be set to zero.</p> <!--
  http://www.hixie.ch/tests/adhoc/dom/level0/document/open/unload/ -->

  <p>When called with two arguments, the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>
  method must act as follows:</p>

  <ol><li><p>If the <code><a href="dom.html#document">Document</a></code> object is not flagged as an <a data-anolis-xref="HTML documents" href="infrastructure.html#html-documents">HTML
   document</a>, throw an <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these steps.</li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> object is not an <a href="browsers.html#active-document">active document</a>, then abort
   these steps.</li>

   <li><p>Let <var data-anolis-xref="">type</var> be the value of the first argument.</li>

   <li>

    <p>If the second argument is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the value
    "replace", then let <var data-anolis-xref="">replace</var> be true.</p>

    <p>Otherwise, if the <a href="browsers.html#browsing-context">browsing context</a>'s <a href="browsers.html#session-history">session history</a> contains only
    one <code><a href="dom.html#document">Document</a></code>, and that was the <code><a href="infrastructure.html#about:blank">about:blank</a></code> <code><a href="dom.html#document">Document</a></code>
    created when the <a href="browsers.html#browsing-context">browsing context</a> was created, and that <code><a href="dom.html#document">Document</a></code> has
    never had the <a href="browsers.html#unload-a-document">unload a document</a> algorithm invoked on it (e.g. by a previous call to
    <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>), then let <var data-anolis-xref="">replace</var> be
    true.</p>

    <p>Otherwise, let <var data-anolis-xref="">replace</var> be false.</p>

   </li>

   <li>

    <p>If the <code><a href="dom.html#document">Document</a></code> has an <a href="dom.html#active-parser">active parser</a> whose <a href="syntax.html#script-nesting-level">script nesting
    level</a> is greater than zero, then the method does nothing. Abort these steps and return
    the <code><a href="dom.html#document">Document</a></code> object on which the method was invoked.</p>

    <p class="note">This basically causes <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code> to
    be ignored when it's called in an inline script found during parsing, while still letting it
    have an effect when called asynchronously.</p>

   </li>

   <li>

    <p>Similarly, if the <code><a href="dom.html#document">Document</a></code>'s <a href="#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> is
    greater than zero, then the method does nothing. Abort these steps and return the
    <code><a href="dom.html#document">Document</a></code> object on which the method was invoked.</p>

    <p class="note">This basically causes <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code> to
    be ignored when it's called from a <code data-anolis-xref="event-beforeunload">beforeunload</code> <code data-anolis-xref="event-pagehide"><a href="browsers.html#event-pagehide">pagehide</a></code>, or <code data-anolis-xref="event-unload">unload</code> event
    handler while the <code><a href="dom.html#document">Document</a></code> is being unloaded.</p>

   </li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</li>

   <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <i data-anolis-xref="concept-document-salvageable"><a href="browsers.html#concept-document-salvageable">salvageable</a></i> state to false.</li>

   <li><p><a data-anolis-xref="prompt to unload a document" href="browsers.html#prompt-to-unload-a-document">Prompt to unload</a> the
   <code><a href="dom.html#document">Document</a></code> object. If the user <a href="browsers.html#refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be
   unloaded</a>, then abort these steps and return the <code><a href="dom.html#document">Document</a></code> object on which the
   method was invoked.</li>

   <li><p><a data-anolis-xref="unload a document" href="browsers.html#unload-a-document">Unload</a> the <code><a href="dom.html#document">Document</a></code> object, with the
   <var data-anolis-xref="">recycle</var> parameter set to true.</li>

   <li><p><a data-anolis-xref="abort a document" href="browsers.html#abort-a-document">Abort</a> the <code><a href="dom.html#document">Document</a></code>.</li>

   <li><p>Unregister all event listeners registered on the <code><a href="dom.html#document">Document</a></code> node and its
   descendants.</p>

   </li><li><p>Remove any <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> associated with the
   <code><a href="dom.html#document">Document</a></code> in any <a href="#task-source">task source</a>.</li> <!-- removes callbacks that fired
   between this algorithm starting and the times and databases being aborted in the "unload" step
   above -->

   <li><p>Remove all child nodes of the document, without firing any mutation events.</li> <!--
   as of 2009-03-30, only WebKit fired mutation events here. -->

   <li>

    <p>Replace the <code><a href="dom.html#document">Document</a></code>'s singleton objects with new instances of those objects.
    (This includes in particular the <code><a href="browsers.html#window">Window</a></code>, <code><a href="browsers.html#location">Location</a></code>,
    <code><a href="browsers.html#history-1">History</a></code>, <code><a href="browsers.html#applicationcache">ApplicationCache</a></code>, and <code><a href="#navigator">Navigator</a></code>, objects, the
    various <code><a href="browsers.html#barprop">BarProp</a></code> objects, the two <code>Storage</code> objects, the various
    <code><a href="infrastructure.html#htmlcollection">HTMLCollection</a></code> objects, and objects defined by other specifications, like
    <code>Selection</code> and the document's <code>UndoManager</code>. It also includes all the Web
    IDL prototypes in the JavaScript binding, including the <code><a href="dom.html#document">Document</a></code> object's
    prototype.)</p>

    <p class="note">The new <code><a href="browsers.html#window">Window</a></code> object has a new <a href="#script-settings-object">script settings
    object</a>.</p>

   </li>

   <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20()%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E -->
   <!-- http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20()%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E -->

   <li><p>Change the <a href="infrastructure.html#document's-character-encoding">document's character encoding</a> to UTF-8.</li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> is <a href="syntax.html#ready-for-post-load-tasks">ready for post-load tasks</a>, then set the
   <code><a href="dom.html#document">Document</a></code> object's <a href="dom.html#reload-override-flag">reload override flag</a> and set the
   <code><a href="dom.html#document">Document</a></code>'s <a href="dom.html#reload-override-buffer">reload override buffer</a> to the empty string.</li>

   <li><p>Set the <code><a href="dom.html#document">Document</a></code>'s <i data-anolis-xref="concept-document-salvageable"><a href="browsers.html#concept-document-salvageable">salvageable</a></i> state back to true.</li>

<!--CLEANUP-->
   <li><p>Change <a href="dom.html#the-document's-address">the document's address</a> to the <a data-anolis-xref="the document's
   address" href="dom.html#the-document's-address">address</a> of the <a href="#responsible-document">responsible document</a> specified by
   the <a href="#entry-settings-object">entry settings object</a>.</li>

   <!-- <span>the document's referrer</span> stays the same -->

   <li><p>If the <code><a href="dom.html#document">Document</a></code>'s <a href="embedded-content-0.html#iframe-load-in-progress">iframe load in progress</a> flag is set, set the
   <code><a href="dom.html#document">Document</a></code>'s <a href="embedded-content-0.html#mute-iframe-load">mute iframe load</a> flag.</li>

   <li><p>Create a new <a href="syntax.html#html-parser">HTML parser</a> and associate it with the document. This is a
   <dfn id="script-created-parser">script-created parser</dfn> (meaning that it can be closed by the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code> and <code data-anolis-xref="dom-document-close"><a href="#dom-document-close">document.close()</a></code> methods, and that the tokenizer will wait for
   an explicit call to <code data-anolis-xref="dom-document-close"><a href="#dom-document-close">document.close()</a></code> before emitting an
   end-of-file token). The encoding <a data-anolis-xref="concept-encoding-confidence" href="syntax.html#concept-encoding-confidence">confidence</a> is
   <i>irrelevant</i>.</li>

   <li><p>Set the <a href="dom.html#current-document-readiness">current document readiness</a> of the document to "<code data-anolis-xref="">loading</code>".</li>

   <li>

    <!-- text/plain handling -->

    <p>If <var data-anolis-xref="">type</var> is an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for the string
    "<code>replace</code>", then, for historical reasons, set it to the string "<code data-anolis-xref="">text/html</code>".</p>

    <p>Otherwise:</p>

    <p>If the <var data-anolis-xref="">type</var> string contains a ";" (U+003B) character, remove the
    first such character and all characters from it up to the end of the string.</p>

    <p><a href="infrastructure.html#strip-leading-and-trailing-whitespace">Strip leading and trailing whitespace</a> from <var data-anolis-xref="">type</var>.</p>

   </li>

   <li>

    <p>If <var data-anolis-xref="">type</var> is <em>not</em> now an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match
    for the string "<code><a href="iana.html#text/html">text/html</a></code>", then act as if the tokenizer had emitted a start tag
    token with the tag name "pre" followed by a single "LF" (U+000A) character<!-- to get
    eaten, so that a leading LF in the written text doesn't get eaten itself-->, then switch the
    <a href="syntax.html#html-parser">HTML parser</a>'s tokenizer to the <a href="syntax.html#plaintext-state">PLAINTEXT state</a>.</p>

    <!--
 http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%3E%3C%2Fiframe%3E%3Cscript%3Eonload%20%3D%20function%20()%20%7B%20%0D%0A%20%20var%20d%20%3D%20document.getElementsByTagName('iframe')%5B0%5D.contentDocument%3B%0D%0A%20%20d.open('image%2Fsvg%2Bxml')%3B%0D%0A%20%20d.write(%22%3Cinput%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%20value%3D'(x)html'%2F%3E%22)%3B%0D%0A%20%20d.close()%3B%0D%0A%7D%3B%3C%2Fscript%3E
 http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%3E%3C%2Fiframe%3E%3Cscript%3Eonload%20%3D%20function%20()%20%7B%20%0D%0A%20%20var%20d%20%3D%20document.getElementsByTagName('iframe')%5B0%5D.contentDocument%3B%0D%0A%20%20d.open('image%2Fgif')%3B%0D%0A%20%20var%20a%20%3D%20%5B%200x47%2C%200x49%2C%200x46%2C%200x38%2C%200x39%2C%200x61%2C%200x01%2C%200x00%2C%200x01%2C%200x00%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%200x80%2C%200xff%2C%200x00%2C%200xc0%2C%200xc0%2C%200xc0%2C%200x00%2C%200x00%2C%200x00%2C%200x21%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%200xf9%2C%200x04%2C%200x01%2C%200x00%2C%200x00%2C%200x00%2C%200x00%2C%200x2c%2C%200x00%2C%200x00%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%200x00%2C%200x00%2C%200x01%2C%200x00%2C%200x01%2C%200x00%2C%200x00%2C%200x02%2C%200x02%2C%200x44%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%200x01%2C%200x00%2C%200x3b%20%5D%3B%0D%0A%20%20var%20s%20%3D%20%22%22%3B%0D%0A%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20a.length%3B%20i%20%2B%3D%201)%0D%0A%20%20%20%20s%20%2B%3D%20String.fromCharCode(a%5Bi%5D)%3B%0D%0A%20%20d.write(s)%3B%0D%0A%20%20d.close()%3B%0D%0A%7D%3B%3C%2Fscript%3E
 http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%3E%3C%2Fiframe%3E%3Cscript%3Eonload%20%3D%20function%20()%20{%20%0A%20%20var%20d%20%3D%20document.getElementsByTagName(%27iframe%27)[0].contentDocument%3B%0A%20%20d.open(%27Text%2Fplain%27)%3B%0A%20%20d.write(%27%3Cb%3Etest%27)%3B%0A%20%20d.close()%3B%0A}%3B%3C%2Fscript%3E
 http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%3E%3C%2Fiframe%3E%3Cscript%3Eonload%20%3D%20function%20()%20{%20%0A%20%20var%20d%20%3D%20document.getElementsByTagName(%27iframe%27)[0].contentDocument%3B%0A%20%20d.open(%27%20text%2Fplain%27)%3B%0A%20%20d.write(%27%3Cb%3Etest%27)%3B%0A%20%20d.close()%3B%0A}%3B%3C%2Fscript%3E
 http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%3E%3C%2Fiframe%3E%3Cscript%3Eonload%20%3D%20function%20()%20{%20%0A%20%20var%20d%20%3D%20document.getElementsByTagName(%27iframe%27)[0].contentDocument%3B%0A%20%20d.open(%27text%2Fplain%3B%27)%3B%0A%20%20d.write(%27%3Cb%3Etest%27)%3B%0A%20%20d.close()%3B%0A}%3B%3C%2Fscript%3E
    -->

   </li>

   <li>

    <p>Remove all the entries in the <a href="browsers.html#browsing-context">browsing context</a>'s <a href="browsers.html#session-history">session history</a>
    after the <a href="browsers.html#current-entry">current entry</a>. If the <a href="browsers.html#current-entry">current entry</a> is the last entry in the
    session history, then no entries are removed.</p>

    <p class="note">This <a href="browsers.html#history-notes">doesn't necessarily have to affect</a> the user
    agent's user interface.</p>

   </li>

   <li><p>Remove any <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> queued by the <a href="#history-traversal-task-source">history traversal
   task source</a> that are associated with any <code><a href="dom.html#document">Document</a></code> objects in the
   <a href="browsers.html#top-level-browsing-context">top-level browsing context</a>'s <a href="browsers.html#document-family">document family</a>.</li>

   <li>Remove any earlier entries that share the same <code><a href="dom.html#document">Document</a></code>.</li>

   <li><p>If <var data-anolis-xref="">replace</var> is false, then add a new entry, just before the last entry,
   and associate with the new entry the text that was parsed by the previous parser associated with
   the <code><a href="dom.html#document">Document</a></code> object, as well as the state of the document at the start of these
   steps. This allows the user to step backwards in the session history to see the page before it
   was blown away by the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code> call. This new entry
   does not have a <code><a href="dom.html#document">Document</a></code> object, so a new one will be created if the session history
   is traversed to that entry.</li>

   <li><p>Finally, set the <a href="syntax.html#insertion-point">insertion point</a> to point at just before the end of the
   <a href="syntax.html#input-stream">input stream</a> (which at this point will be empty).</li>

   <li><p>Return the <code><a href="dom.html#document">Document</a></code> on which the method was invoked.</li>

  </ol><p class="note">The <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code> method does not affect
  whether a <code><a href="dom.html#document">Document</a></code> is <a href="syntax.html#ready-for-post-load-tasks">ready for post-load tasks</a> or <a href="syntax.html#completely-loaded">completely
  loaded</a>.</p>

  <p>When called with four arguments, the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open()</a></code> method on
  the <code><a href="dom.html#document">Document</a></code> object must call the <code data-anolis-xref="dom-open"><a href="browsers.html#dom-open">open()</a></code> method on the
  <code><a href="browsers.html#window">Window</a></code> object of the <code><a href="dom.html#document">Document</a></code> object, with the same arguments as the
  original call to the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open()</a></code> method, and return whatever
  that method returned. If the <code><a href="dom.html#document">Document</a></code> object has no <code><a href="browsers.html#window">Window</a></code> object, then
  the method must throw an <code><a href="infrastructure.html#invalidaccesserror">InvalidAccessError</a></code> exception.</p>

  </div>



  <h4 id="closing-the-input-stream"><span class="secno">6.3.2</span> 入力ストリームを閉じる</h4>

  <dl class="domintro"><dt><var data-anolis-xref="">document</var> . <code data-anolis-xref="dom-document-close"><a href="#dom-document-close">close</a></code>()</dt>

   <dd>

    <p><code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>メソッドによって開かれた入力ストリームを閉じる。</p>

    <p><code><a href="dom.html#document">Document</a></code>が<a data-anolis-xref="XML documents" href="infrastructure.html#xml-documents">XML文書</a>の場合、<code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code>例外を投げる。</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn data-anolis-xref="dom-document-close" id="dom-document-close"><code>close()</code></dfn> method must run the following
  steps:</p>

  <ol><li><p>If the <code><a href="dom.html#document">Document</a></code> object is not flagged as an <a data-anolis-xref="HTML documents" href="infrastructure.html#html-documents">HTML
   document</a>, throw an <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these
   steps.</li>

   <li><p>If there is no <a href="#script-created-parser">script-created parser</a> associated with the document, then abort
   these steps.</li>

   <li><p>Insert an <a href="syntax.html#explicit-eof-character">explicit "EOF" character</a> at the end of the parser's <a href="syntax.html#input-stream">input
   stream</a>.</li>

   <li><p>If there is a <a href="scripting-1.html#pending-parsing-blocking-script">pending parsing-blocking script</a>, then abort these
   steps.</li>

   <li><p>Run the tokenizer, processing resulting tokens as they are emitted, and stopping when the
   tokenizer reaches the <a href="syntax.html#explicit-eof-character">explicit "EOF" character</a> or <a data-anolis-xref="spin the event
   loop" href="#spin-the-event-loop">spins the event loop</a>.</li>

  </ol></div>



  <h4 id="document.write()"><span class="secno">6.3.3</span> <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code></h4>

  <dl class="domintro"><dt><var data-anolis-xref="">document</var> . <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">write</a></code>(<var data-anolis-xref="">text</var>...)</dt>

   <dd>

    <p>一般に、与えられた文字列を<code><a href="dom.html#document">Document</a></code>の入力ストリームに加える。</p>

    <p class="warning">このメソッドは非常に特異な振る舞いを持つ。一部の場合において、このメソッドは、パーサが実行されている間、<a href="syntax.html#html-parser">HTMLパーサ</a>の状態に影響を与えることができる。その結果、文書のソースに対応しないDOMをもたらす（たとえば、記述された文字列が、文字列"<code data-anolis-xref="">&lt;plaintext&gt;</code>"または"<code data-anolis-xref="">&lt;!--</code>"である場合）。他の例では、あたかも<code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>が呼び出されていたかのように、呼び出しが最初に現在のページをクリアできる。さらに多くの例では、メソッドは単に無視されるか、または例外を投げる。さらに悪いことに、このメソッドの正確な動作は、いくつかのケースにおいて、デバッグに非常に困難な障害を招く可能性がある、ネットワークレイテンシに依存するかもしれない。<strong>これらすべての理由から、このメソッドの使用を強く推奨しない。</strong></p>

    <p>このメソッドは、<a href="infrastructure.html#xml-documents">XML文書</a>で呼び出さた場合、<code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code>例外を投げる。</p>

   </dd>

  </dl><div class="impl">

  <p><code><a href="dom.html#document">Document</a></code> objects have an <dfn id="ignore-destructive-writes-counter">ignore-destructive-writes counter</dfn>, which is
  used in conjunction with the processing of <code><a href="scripting-1.html#the-script-element">script</a></code> elements to prevent external
  scripts from being able to use <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> to blow
  away the document by implicitly calling <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">document.open()</a></code>.
  Initially, the counter must be set to zero.</p>

  <p>The <dfn data-anolis-xref="dom-document-write" id="dom-document-write"><code>document.write(...)</code></dfn> method must act as
  follows:</p>

  <ol><li>

    <p>If the method was invoked on an <a data-anolis-xref="XML documents" href="infrastructure.html#xml-documents">XML document</a>, throw an
    <code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code> exception and abort these steps.</p>

    <!--
    Where would document.write() insert?
    Consider: data:text/xml,<script xmlns="http://www.w3.org/1999/xhtml"><![CDATA[ document.write('<foo>Test</foo>'); ]]></script>
    -->

   </li>

   <li><p>If the <code><a href="dom.html#document">Document</a></code> object is not an <a href="browsers.html#active-document">active document</a>, then abort
   these steps.</li>

   <li>

    <p>If the <a href="syntax.html#insertion-point">insertion point</a> is undefined and either the <code><a href="dom.html#document">Document</a></code>'s
    <a href="#ignore-opens-during-unload-counter">ignore-opens-during-unload counter</a> is greater than zero or the
    <code><a href="dom.html#document">Document</a></code>'s <a href="#ignore-destructive-writes-counter">ignore-destructive-writes counter</a> is greater than zero,
    abort these steps.</p>

   </li>

   <li>

    <p>If the <a href="syntax.html#insertion-point">insertion point</a> is undefined, call the <code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open()</a></code> method on the <code data-anolis-xref="Document"><a href="dom.html#document">document</a></code>
    object (with no arguments). If the user <a href="browsers.html#refused-to-allow-the-document-to-be-unloaded">refused to allow the document to be
    unloaded</a>, then abort these steps. Otherwise, the <a href="syntax.html#insertion-point">insertion point</a> will point
    at just before the end of the (empty) <a href="syntax.html#input-stream">input stream</a>.</p>

   </li>

   <li>

    <p>Insert the string consisting of the concatenation of all the arguments to the method into the
    <a href="syntax.html#input-stream">input stream</a> just before the <a href="syntax.html#insertion-point">insertion point</a>.</p>

   </li>

   <li>

    <p>If the <code><a href="dom.html#document">Document</a></code> object's <a href="dom.html#reload-override-flag">reload override flag</a> is set, then append
    the string consisting of the concatenation of all the arguments to the method to the
    <code><a href="dom.html#document">Document</a></code>'s <a href="dom.html#reload-override-buffer">reload override buffer</a>.</p>

   </li>

   <li>

    <p>If there is no <a href="scripting-1.html#pending-parsing-blocking-script">pending parsing-blocking script</a>, have the <a href="syntax.html#html-parser">HTML
    parser</a> process the characters that were inserted, one at a time, processing resulting
    tokens as they are emitted, and stopping when the tokenizer reaches the insertion point or when
    the processing of the tokenizer is aborted by the tree construction stage (this can happen if a
    <code><a href="scripting-1.html#the-script-element">script</a></code> end tag token is emitted by the tokenizer).

    <p class="note">If the <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> method was
    called from script executing inline (i.e. executing because the parser parsed a set of
    <code><a href="scripting-1.html#the-script-element">script</a></code> tags), then this is a <a href="syntax.html#nestedParsing">reentrant invocation of the
    parser</a>.</p>

   </li>

   <li>

    <p>Finally, return from the method.</p>

   </li>

  </ol></div>


  <h4 id="document.writeln()"><span class="secno">6.3.4</span> <code data-anolis-xref="dom-document-writeln"><a href="#dom-document-writeln">document.writeln()</a></code></h4>

  <dl class="domintro"><dt><var data-anolis-xref="">document</var> . <code data-anolis-xref="dom-document-writeln"><a href="#dom-document-writeln">writeln</a></code>(<var data-anolis-xref="">text</var>...)</dt>

   <dd>

    <p>改行文字の後に、与えられた文字列を<code><a href="dom.html#document">Document</a></code>の入力ストリームに加える。必要ならば、<code data-anolis-xref="dom-document-open"><a href="#dom-document-open">open()</a></code>メソッドを暗黙のうちに最初に呼び出す。</p>

    <p>このメソッドは、<a href="infrastructure.html#xml-documents">XML文書</a>で呼び出さた場合、<code><a href="infrastructure.html#invalidstateerror">InvalidStateError</a></code>例外を投げる。</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn data-anolis-xref="dom-document-writeln" id="dom-document-writeln"><code>document.writeln(...)</code></dfn> method, when
  invoked, must act as if the <code data-anolis-xref="dom-document-write"><a href="#dom-document-write">document.write()</a></code> method had
  been invoked with the same argument(s), plus an extra argument consisting of a string containing a
  single line feed character (U+000A).</p>

  </div>



  <h3 id="timers"><span class="secno">6.4</span> タイマー</h3>

  <p><code data-anolis-xref="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout()</a></code>と<code data-anolis-xref="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval()</a></code>メソッドは、著者がタイマーベースのコールバックをスケジュールできるようにする。</p>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="windowtimers">WindowTimers</dfn> {
  long <a data-anolis-xref="dom-windowtimers-setTimeout" href="#dom-windowtimers-settimeout">setTimeout</a>(<span>Function</span> handler, optional long timeout, any... arguments);
  long <a data-anolis-xref="dom-windowtimers-setTimeout" href="#dom-windowtimers-settimeout">setTimeout</a>(DOMString handler, optional long timeout, any... arguments);
  void <a data-anolis-xref="dom-windowtimers-clearTimeout" href="#dom-windowtimers-cleartimeout">clearTimeout</a>(long handle);
  long <a data-anolis-xref="dom-windowtimers-setInterval" href="#dom-windowtimers-setinterval">setInterval</a>(<span>Function</span> handler, optional long timeout, any... arguments);
  long <a data-anolis-xref="dom-windowtimers-setInterval" href="#dom-windowtimers-setinterval">setInterval</a>(DOMString handler, optional long timeout, any... arguments);
  void <a data-anolis-xref="dom-windowtimers-clearInterval" href="#dom-windowtimers-clearinterval">clearInterval</a>(long handle);
};
<a href="browsers.html#window">Window</a> implements <a href="#windowtimers">WindowTimers</a>;</pre><!-- Demonstrating the need for wrapping of the timeout argument value treated as long rather than clamping or treating as double:
          http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1228
       Demonstrating the need for the timeout argument to be signed rather than unsigned:
          http://software.hixie.ch/utilities/js/live-dom-viewer/saved/1229
  -->

  

  <dl class="domintro"><dt><var data-anolis-xref="">handle</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout</a></code>( <var data-anolis-xref="">handler</var> [, <var data-anolis-xref="">timeout</var> [, <var data-anolis-xref="">arguments</var>... ] ] )</dt>

   <dd>

    <p><var data-anolis-xref="">timeout</var>ミリ秒後に<var data-anolis-xref="">handler</var>を実行するためにタイムアウトをスケジュールする。すべての<var data-anolis-xref="">arguments</var>は直接<var data-anolis-xref="">handler</var>に渡される。</p>

   </dd>

   <dt><var data-anolis-xref="">handle</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout</a></code>( <var data-anolis-xref="">code</var> [, <var data-anolis-xref="">timeout</var> ] )</dt>

   <dd>

    <p><var data-anolis-xref="">timeout</var>ミリ秒後に<var data-anolis-xref="">code</var>を実行するためにタイムアウトをスケジュールする。</p>

   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-clearTimeout"><a href="#dom-windowtimers-cleartimeout">clearTimeout</a></code>( <var data-anolis-xref="">handle</var> )</dt>

   <dd>

    <p><var data-anolis-xref="">handle</var>で識別される<code data-anolis-xref="dom-windowtimers-setTimeout"><a href="#dom-windowtimers-settimeout">setTimeout()</a></code>で設定されるタイムアウトを取り消す。</p>

   </dd>

   <dt><var data-anolis-xref="">handle</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval</a></code>( <var data-anolis-xref="">handler</var> [, <var data-anolis-xref="">timeout</var> [, <var data-anolis-xref="">arguments</var>... ] ] )</dt>

   <dd>

    <p><var data-anolis-xref="">timeout</var>ミリ秒ごとに<var data-anolis-xref="">handler</var>を実行するためにタイムアウトをスケジュールする。すべての<var data-anolis-xref="">arguments</var>は直接<var data-anolis-xref="">handler</var>に渡される。</p>

   </dd>

   <dt><var data-anolis-xref="">handle</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval</a></code>( <var data-anolis-xref="">code</var> [, <var data-anolis-xref="">timeout</var> ] )</dt>

   <dd>

    <p><var data-anolis-xref="">timeout</var>ミリ秒ごとに<var data-anolis-xref="">code</var>を実行するためにタイムアウトをスケジュールする。</p>

   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-windowtimers-clearInterval"><a href="#dom-windowtimers-clearinterval">clearInterval</a></code>( <var data-anolis-xref="">handle</var> )</dt>

   <dd>

    <p><var data-anolis-xref="">handle</var>で識別される<code data-anolis-xref="dom-windowtimers-setInterval"><a href="#dom-windowtimers-setinterval">setInterval()</a></code>で設定されるタイムアウトを取り消す。</p>

   </dd>

  </dl><p class="note">タイマーは入れ子にすることができる。しかし、5つのそのようなネストされたタイマー後に、間隔は少なくとも4ミリ秒であることが強制される。</p>

  <p class="note">このAPIは、タイマーがスケジュールどおり正確に動作することを保証しない。CPU負荷やその他のタスクなどによる遅延が予想される。</p>

  <div class="impl">

  <p class="note">The <code><a href="#windowtimers">WindowTimers</a></code> interface adds to the <code><a href="browsers.html#window">Window</a></code> interface
  and the <code>WorkerGlobalScope</code> interface (part of Web workers).</p>

  <p>Each object that implements the <code><a href="#windowtimers">WindowTimers</a></code> interface has a <dfn id="list-of-active-timers">list of active
  timers</dfn>. Each entry in this lists is identified by a number, which must be unique within the
  list for the lifetime of the object that implements the <code><a href="#windowtimers">WindowTimers</a></code> interface.</p>

  <hr><p>The <dfn data-anolis-xref="dom-windowtimers-setTimeout" id="dom-windowtimers-settimeout"><code>setTimeout()</code></dfn> method must return
  the value returned by the <a href="#timer-initialization-steps">timer initialization steps</a>, passing them the method's
  arguments, the object on which the method for which the algorithm is running is implemented (a
  <code><a href="browsers.html#window">Window</a></code> or <code>WorkerGlobalScope</code> object) as the <var data-anolis-xref="">method
  context</var>, and the <var data-anolis-xref="">repeat</var> flag set to false.</p>

  <p>The <dfn data-anolis-xref="dom-windowtimers-setInterval" id="dom-windowtimers-setinterval"><code>setInterval()</code></dfn> method must
  return the value returned by the <a href="#timer-initialization-steps">timer initialization steps</a>, passing them the
  method's arguments, the object on which the method for which the algorithm is running is
  implemented (a <code><a href="browsers.html#window">Window</a></code> or <code>WorkerGlobalScope</code> object) as the <var data-anolis-xref="">method context</var>, and the <var data-anolis-xref="">repeat</var> flag set to true.</p>

  <p>The <dfn data-anolis-xref="dom-windowtimers-clearTimeout" id="dom-windowtimers-cleartimeout"><code>clearTimeout()</code></dfn> and <dfn data-anolis-xref="dom-windowtimers-clearInterval" id="dom-windowtimers-clearinterval"><code>clearInterval()</code></dfn> methods must clear the
  entry identified as <var data-anolis-xref="">handle</var> from the <a href="#list-of-active-timers">list of active timers</a> of the
  <code><a href="#windowtimers">WindowTimers</a></code> object on which the method was invoked, where <var data-anolis-xref="">handle</var>
  is the argument passed to the method, if any. (If <var data-anolis-xref="">handle</var> does not identify an
  entry in the <a href="#list-of-active-timers">list of active timers</a> of the <code><a href="#windowtimers">WindowTimers</a></code> object on which
  the method was invoked, the method does nothing.)</p>

  <hr><p>The <dfn id="timer-initialization-steps">timer initialization steps</dfn>, which are invoked with some method arguments, a <var data-anolis-xref="">method context</var>, a <var data-anolis-xref="">repeat</var> flag which can be true or false, and
  optionally (and only if the <var data-anolis-xref="">repeat</var> flag is true) a <var data-anolis-xref="">previous
  handle</var>, are as follows:</p>

  <ol><li><p>Let <var data-anolis-xref="">method context proxy</var> be <var data-anolis-xref="">method context</var> if that
   is a <code>WorkerGlobalScope</code> object, or else the <code><a href="browsers.html#windowproxy">WindowProxy</a></code> that corresponds
   to <var data-anolis-xref="">method context</var>.</li>

   <li><p>If <var data-anolis-xref="">previous handle</var> was provided, let <var data-anolis-xref="">handle</var> be
   <var data-anolis-xref="">previous handle</var>; otherwise, let <var data-anolis-xref="">handle</var> be a
   user-agent-defined integer that is greater than zero that will identify the timeout to be set by
   this call in the <a href="#list-of-active-timers">list of active timers</a>.</li>

   <li><p>If <var data-anolis-xref="">previous handle</var> was not provided, add an entry to the <a href="#list-of-active-timers">list of
   active timers</a> for <var data-anolis-xref="">handle</var>.</li>

   <li>

    <p>Let <var data-anolis-xref="">task</var> be a <a data-anolis-xref="concept-task" href="#concept-task">task</a> that runs the
    following substeps:</p>

    <ol><li>

      <p>If the entry for <var data-anolis-xref="">handle</var> in the <a href="#list-of-active-timers">list of active timers</a> has
      been cleared, then abort this <a data-anolis-xref="concept-task" href="#concept-task">task</a>'s substeps.</p>

     </li>

     <li>

      <p>Run the appropriate set of steps from the following list:</p>

      <dl class="switch"><dt>If the first method argument is a <code>Function</code></dt>

       <dd>

        <p>Call the <code>Function</code>. Use the third and subsequent method arguments (if any) as
        the arguments for invoking the <code>Function</code>. Use <var data-anolis-xref="">method context
        proxy</var> as the <var data-anolis-xref="">thisArg</var> for invoking the <code>Function</code>. <a href="references.html#refsECMA262">[ECMA262]</a></p>

       </dd>

       <dt>Otherwise</dt>

       <dd>

        <ol><li><p>Let <var data-anolis-xref="">script source</var> be the first method argument.</li>

         <li><p>Let <var data-anolis-xref="">script language</var> be JavaScript.</li>

         <li><p>Let <var data-anolis-xref="">settings object</var> be <var data-anolis-xref="">method context</var>'s
         <a href="#script-settings-object">script settings object</a>.</li>

         <li><!--CLEANUP--><!--no need for all this whitespace-->

          <p><a href="#create-a-script">Create a script</a> using <var data-anolis-xref="">script source</var> as the script
          source, the <span>URL</span> where <var data-anolis-xref="">script source</var> can be found, <var data-anolis-xref="">scripting language</var> as the scripting language, and <var data-anolis-xref="">settings
          object</var> as the <a href="#script-settings-object">script settings object</a>.</p>

         </li>

        </ol></dd>

      </dl></li>

     <li><!--CLEANUP--><!--no need for all this whitespace-->

      <p>If the <var data-anolis-xref="">repeat</var> flag is true, then call <a href="#timer-initialization-steps">timer initialization
      steps</a> again, passing them the same method arguments, the same <var data-anolis-xref="">method
      context</var>, with the <var data-anolis-xref="">repeat</var> flag still set to true, and with the <var data-anolis-xref="">previous handle</var> set to <var data-anolis-xref="">handler</var>.</p>

     </li>

    </ol></li>

   <li><p>Let <var data-anolis-xref="">timeout</var> be the second method argument, or zero if the argument was
   omitted.</li>

   <li><p>If the currently running <a data-anolis-xref="concept-task" href="#concept-task">task</a> is a task that was created
   by this algorithm, then let <var data-anolis-xref="">nesting level</var> be the <a data-anolis-xref="concept-task" href="#concept-task">task</a>'s <a href="#timer-nesting-level">timer nesting level</a>. Otherwise, let <var data-anolis-xref="">nesting level</var> be zero.</li>

   <li><p>If <var data-anolis-xref="">nesting level</var> is greater than 5, and <var data-anolis-xref="">timeout</var> is
   less than 4, then increase <var data-anolis-xref="">timeout</var> to 4.</li>

   <li><p>Increment <var data-anolis-xref="">nesting level</var> by one.</li>

   <li><p>Let <var data-anolis-xref="">task</var>'s <dfn id="timer-nesting-level">timer nesting level</dfn> be <var data-anolis-xref="">nesting
   level</var>.</li>

   <li><p>Return <var data-anolis-xref="">handle</var>, and then continue running this algorithm
   asynchronously.</li>

   <li>

    <p>If <var data-anolis-xref="">method context</var> is a <code><a href="browsers.html#window">Window</a></code> object, wait until the
    <code><a href="dom.html#document">Document</a></code> associated with <var data-anolis-xref="">method context</var> has been <a href="browsers.html#fully-active">fully
    active</a> for a further <var data-anolis-xref="">timeout</var> milliseconds (not necessarily
    consecutively).</p>

    <p>Otherwise, <var data-anolis-xref="">method context</var> is a <code>WorkerGlobalScope</code> object;
    wait until <var data-anolis-xref="">timeout</var> milliseconds have passed with the worker not suspended
    (not necessarily consecutively).</p>

   </li>

   <li>

    <p>Wait until any invocations of this algorithm that had the same <var data-anolis-xref="">method
    context</var>, that started before this one, and whose <var data-anolis-xref="">timeout</var> is equal to
    or less than this one's, have completed.</p>

    <p class="note">Argument conversion as defined by Web IDL (for example, invoking <code data-anolis-xref="">toString()</code> methods on objects passed as the first argument) happens in the
    algorithms defined in Web IDL, before this algorithm is invoked.</p>

    <div class="example">

     <p>So for example, the following rather silly code will result in the log containing "<code data-anolis-xref="">ONE TWO </code>":</p>

     <pre>var log = '';
function logger(s) { log += s + ' '; }

setTimeout({ toString: function () {
  setTimeout("logger('ONE')", 100);
  return "logger('TWO')";
} }, 100);</pre>

    </div>

   </li>

   <li>

    <p>Optionally, wait a further user-agent defined length of time.</p>

    <p class="note">This is intended to allow user agents to pad timeouts as needed to optimise the
    power usage of the device. For example, some processors have a low-power mode where the
    granularity of timers is reduced; on such platforms, user agents can slow timers down to fit
    this schedule instead of requiring the processor to use the more accurate mode with its
    associated higher power usage.</p>

   </li>

   <li>

    <p><a data-anolis-xref="queue a task" href="#queue-a-task">Queue</a> the <a data-anolis-xref="concept-task" href="#concept-task">task</a> <var data-anolis-xref="">task</var>.</p>

    <p class="note">Once the task has been processed, if the <var data-anolis-xref="">repeat</var> flag is
    false, it is safe to remove the entry for <var data-anolis-xref="">handle</var> from the <a href="#list-of-active-timers">list of
    active timers</a> (there is no way for the entry's existence to be detected past this point,
    so it does not technically matter one way or the other).</p>

   </li>

  </ol><p>The <a href="#task-source">task source</a> for these <a data-anolis-xref="concept-task" href="#concept-task">tasks</a> is the
  <dfn id="timer-task-source">timer task source</dfn>.</p>

  </div>

  <div class="example">

   <p>遅延なく背中合わせに数ミリ秒のタスクを実行するために、飢えたユーザーインターフェースを避けるために（およびCPUを占有するためのスクリプトを殺すブラウザを避けるために）ブラウザに戻って従いつつ、作業を実行する前の簡単なキューの次のタイマ：</p>

   <pre>function doExpensiveWork() {
  var done = false;
  // ...
  // this part of the function takes up to five milliseconds
  // set done to true if we're done
  // ...
  return done;
}

function rescheduleWork() {
  var handle = setTimeout(rescheduleWork, 0); // preschedule next iteration
  if (doExpensiveWork())
    clearTimeout(handle); // clear the timeout if we don't need it
}

function scheduleWork() {
  setTimeout(rescheduleWork, 0);
}

scheduleWork(); // queues a task to do lots of work</pre>

  </div>


  <h3 id="user-prompts"><span class="secno">6.5</span> ユーザープロンプト</h3><!--
   v2 ideas:
    * in-window modal dialogs
       - escape/enter handling
       - dragging the window out of the tab
    * in-window non-modal palettes
       - with a solution for the mobile space
  -->

  

  <h4 id="simple-dialogs"><span class="secno">6.5.1</span> 単純ダイアログ</h4>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-alert"><a href="#dom-alert">alert</a></code>(<var data-anolis-xref="">message</var>)</dt>
   <dd>

    <p>指定されたメッセージを持つモーダルアラートを表示し、それを命令するユーザーに対して待機する。</p>

    <p>このメソッドが呼び出された際に<code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>メソッドの呼び出しを暗示する。</p>

   </dd>

   <dt><var data-anolis-xref="">result</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-confirm"><a href="#dom-confirm">confirm</a></code>(<var data-anolis-xref="">message</var>)</dt>
   <dd>

    <p>与えられたメッセージとともにモーダルOK/Cancelプロンプトを表示し、それを命令するユーザーに対して待機し、ユーザーがOKをクリックした場合はtrueを返し、ユーザーがCancelをクリックする場合はfalseを返す。</p>

    <p>このメソッドが呼び出された際に<code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>メソッドの呼び出しを暗示する。</p>

   </dd>

   <dt><var data-anolis-xref="">result</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-prompt"><a href="#dom-prompt">prompt</a></code>(<var data-anolis-xref="">message</var> [, <var data-anolis-xref="">default</var>] )</dt>
   <dd>

    <p>指定されたメッセージをもつモーダルテキストフィールドプロンプトを表示し、それを命令するユーザーに対して待機し、ユーザーが入力した値を返す。ユーザーがプロンプトをキャンセルした場合、代わりにnullを返す。2番目の引数が存在する場合、指定された値がデフォルトとして使用される。</p>

    <p>このメソッドが呼び出された際に<code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>メソッドの呼び出しを暗示する。</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn data-anolis-xref="dom-alert" id="dom-alert"><code>alert(<var data-anolis-xref="">message</var>)</code></dfn> method, when
  invoked, must run the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="browsers.html#termination-nesting-level">termination nesting level</a> is non-zero,
   optionally abort these steps.</li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</li>

   <li><p>Optionally, abort these steps. (For example, the user agent might give the user the option
   to ignore all alerts, and would thus abort at this step whenever the method was
   invoked.)</li>

   <li><p>Show the given <var data-anolis-xref="">message</var> to the user.</li>

   <li><p>Optionally, <a href="#pause">pause</a> while waiting for the user to acknowledge the
   message.</li>

  </ol><p>The <dfn data-anolis-xref="dom-confirm" id="dom-confirm"><code>confirm(<var data-anolis-xref="">message</var>)</code></dfn> method,
  when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="browsers.html#termination-nesting-level">termination nesting level</a> is non-zero,
   optionally abort these steps, returning false.</li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</li>

   <li><p>Optionally, return false and abort these steps. (For example, the user agent might give
   the user the option to ignore all prompts, and would thus abort at this step whenever the method
   was invoked.)</li>

   <li><p>Show the given <var data-anolis-xref="">message</var> to the user, and ask the user to respond with a
   positive or negative response.</li>

   <li><p><a href="#pause">Pause</a> until the user responds either positively or negatively.</li>

   <li><p>If the user responded positively, return true; otherwise, the user responded negatively:
   return false.</li>

  </ol><p>The <dfn data-anolis-xref="dom-prompt" id="dom-prompt"><code>prompt(<var data-anolis-xref="">message</var>, <var data-anolis-xref="">default</var>)</code></dfn> method, when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href="#event-loop">event loop</a>'s <a href="browsers.html#termination-nesting-level">termination nesting level</a> is non-zero,
   optionally abort these steps, returning null.</li>

   <li><p>Release the <a href="#storage-mutex">storage mutex</a>.</li>

   <li><p>Optionally, return null and abort these steps. (For example, the user agent might give the
   user the option to ignore all prompts, and would thus abort at this step whenever the method was
   invoked.)</li>

   <li><p>Show the given <var data-anolis-xref="">message</var> to the user, and ask the user to either respond
   with a string value or abort. The response must be defaulted to the value given by
   <var data-anolis-xref="">default</var>.</li>

   <li><p><a href="#pause">Pause</a> while waiting for the user's response.</li>

   <li><p>If the user aborts, then return null; otherwise, return the string that the user responded
   with.</li>

  </ol></div>


  <h4 id="printing"><span class="secno">6.5.2</span> 表示</h4>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-print"><a href="#dom-print">print</a></code>()</dt>

   <dd>

    <p>ページを表示するようユーザーに指示する。</p>

    <p>このメソッドが呼び出された際に<code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>メソッドの呼び出しを暗示する。</p>

   </dd>

  </dl><div class="impl">

  <p>When the <dfn data-anolis-xref="dom-print" id="dom-print"><code>print()</code></dfn> method is invoked, if the
  <code><a href="dom.html#document">Document</a></code> is <a href="syntax.html#ready-for-post-load-tasks">ready for post-load tasks</a>, then the user agent must
  synchronously run the <a href="#printing-steps">printing steps</a>. Otherwise, the user agent must only set the
  <dfn id="print-when-loaded">print when loaded</dfn> flag on the <code><a href="dom.html#document">Document</a></code>.</p>

<!--TOPIC:HTML-->

  <p>User agents should also run the <a href="#printing-steps">printing steps</a> whenever the user asks for the
  opportunity to <a href="rendering.html#obtain-a-physical-form">obtain a physical form</a> (e.g. printed copy), or the representation of a
  physical form (e.g. PDF copy), of a document.</p>

  <p>The <dfn id="printing-steps">printing steps</dfn> are as follows:</p>

  <ol><li>

    <p>The user agent may display a message to the user or abort these steps (or both).</p>

    <p class="example">For instance, a kiosk browser could silently ignore any invocations of the
    <code data-anolis-xref="dom-print"><a href="#dom-print">print()</a></code> method.</p>

    <p class="example">For instance, a browser on a mobile device could detect that there are no
    printers in the vicinity and display a message saying so before continuing to offer a "save to
    PDF" option.</p>

   </li>

   <li>

    <p>The user agent must <a href="#fire-a-simple-event">fire a simple event</a> named <code data-anolis-xref="event-beforeprint">beforeprint</code> at the <code><a href="browsers.html#window">Window</a></code> object of the
    <code><a href="dom.html#document">Document</a></code> that is being printed, as well as any <a data-anolis-xref="nested browsing
    context" href="browsers.html#nested-browsing-context">nested browsing contexts</a> in it.</p>

    <p class="example">The <code data-anolis-xref="event-beforeprint">beforeprint</code> event can be used to
    annotate the printed copy, for instance adding the time at which the document was printed.</p>

   </li>

   <li>

    <p>The user agent must release the <a href="#storage-mutex">storage mutex</a>.</p>

   </li>

   <li>

    <p>The user agent should offer the user the opportunity to <a href="rendering.html#obtain-a-physical-form">obtain a physical form</a>
    (or the representation of a physical form) of the document. The user agent may wait for the user
    to either accept or decline before returning; if so, the user agent must <a href="#pause">pause</a>
    while the method is waiting. Even if the user agent doesn't wait at this point, the user agent
    must use the state of the relevant documents as they are at this point in the algorithm if and
    when it eventually creates the alternate form.</p>

   </li>

   <li>

    <p>The user agent must <a href="#fire-a-simple-event">fire a simple event</a> named <code data-anolis-xref="event-afterprint">afterprint</code> at the <code><a href="browsers.html#window">Window</a></code> object of the
    <code><a href="dom.html#document">Document</a></code> that is being printed, as well as any <a data-anolis-xref="nested browsing
    context" href="browsers.html#nested-browsing-context">nested browsing contexts</a> in it.</p>

    <p class="example">The <code data-anolis-xref="event-afterprint">afterprint</code> event can be used to
    revert annotations added in the earlier event, as well as showing post-printing UI. For
    instance, if a page is walking the user through the steps of applying for a home loan, the
    script could automatically advance to the next step after having printed a form or other.</p>

   </li>

  </ol></div>

  <h3 id="system-state-and-capabilities"><span class="secno">6.6</span> システム状態および性能</h3>

  <h4 id="the-navigator-object"><span class="secno">6.6.1</span> <code><a href="#navigator">Navigator</a></code>オブジェクト</h4>

  <div class="impl">

  <p>The <dfn data-anolis-xref="dom-navigator" id="dom-navigator"><code>navigator</code></dfn> attribute of the
  <code><a href="browsers.html#window">Window</a></code> interface must return an instance of the <code><a href="#navigator">Navigator</a></code> interface,
  which represents the identity and state of the user agent (the client), and allows Web pages to
  register themselves as potential protocol and content handlers:</p>

  </div>

  <pre class="idl">interface <dfn id="navigator">Navigator</dfn> {
  // objects implementing this interface also implement the interfaces given below
};
<a href="#navigator">Navigator</a> implements <a href="#navigatorid">NavigatorID</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorlanguage">NavigatorLanguage</a>;
<a href="#navigator">Navigator</a> implements <a href="browsers.html#navigatoronline">NavigatorOnLine</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorcontentutils">NavigatorContentUtils</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorstorageutils">NavigatorStorageUtils</a>;
<a href="#navigator">Navigator</a> implements <a href="#navigatorplugins">NavigatorPlugins</a>;</pre><!-- v2:
  geolocator mozIsLocallyAvailable preference
-->



  <div class="impl">

  <p>These interfaces are defined separately so that other specifications can re-use parts of the
  <code><a href="#navigator">Navigator</a></code> interface.</p>

  </div>


  <h5 id="client-identification"><span class="secno">6.6.1.1</span> クライアントの識別</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorid">NavigatorID</dfn> {
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-appCodeName" href="#dom-navigator-appcodename">appCodeName</a>; // constant "Mozilla"
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-appName" href="#dom-navigator-appname">appName</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-appVersion" href="#dom-navigator-appversion">appVersion</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-platform" href="#dom-navigator-platform">platform</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-product" href="#dom-navigator-product">product</a>; // constant "Gecko"
  boolean <a data-anolis-xref="dom-navigator-taintEnabled" href="#dom-navigator-taintenabled">taintEnabled</a>(); // constant false
  readonly attribute DOMString <a data-anolis-xref="dom-navigator-userAgent" href="#dom-navigator-useragent">userAgent</a>;
};</pre>

  <p>特定の場合において、業界全体の最善の努力にもかかわらず、ウェブブラウザは、ウェブ著者が回避することを余儀なくされるバグや限界がある。</p>

  <p>このセクションは、スクリプトから使用中のユーザーエージェントの種類を判断するために使用できる属性の集合を定義し、順番にこれらの問題を回避する。</p>

  <p>クライアント検出は常に既知の現行バージョンの検出に限定されるべきである。将来のバージョンおよび未知のバージョンは、常に完全に準拠するよう仮定されるべきである。</p>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-appCodeName"><a href="#dom-navigator-appcodename">appCodeName</a></code></dt>
   <dd>
    <p>文字列"<code data-anolis-xref="">Mozilla</code>"を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-appName"><a href="#dom-navigator-appname">appName</a></code></dt>
   <dd>
    <p>ブラウザの名前を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-appVersion"><a href="#dom-navigator-appversion">appVersion</a></code></dt>
   <dd>
    <p>ブラウザのバージョンを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-platform"><a href="#dom-navigator-platform">platform</a></code></dt>
   <dd>
    <p>プラットフォームの名前を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-product"><a href="#dom-navigator-product">product</a></code></dt>
   <dd>
    <p>文字列"<code data-anolis-xref="">Gecko</code>"を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-taintEnabled"><a href="#dom-navigator-taintenabled">taintEnabled</a></code>()</dt>
   <dd>
    <p>falseを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-userAgent"><a href="#dom-navigator-useragent">userAgent</a></code></dt>
   <dd>
    <p>完全なUser-Agentヘッダを返す。</p>
   </dd>

  </dl><div class="impl">

  <dl><dt><dfn data-anolis-xref="dom-navigator-appCodeName" id="dom-navigator-appcodename"><code>appCodeName</code></dfn></dt>
   <dd><p>Must return the string "<code data-anolis-xref="">Mozilla</code>".</dd>

   <!-- appMinorVersion: IE only. In IE8b1, returns " Beta" (with the space) -->

   <dt><dfn data-anolis-xref="dom-navigator-appName" id="dom-navigator-appname"><code>appName</code></dfn></dt>
   <dd><p>Must return either the string "<code data-anolis-xref="">Netscape</code>" or the full name of the
   browser, e.g. "<code data-anolis-xref="">Mellblom Browsernator</code>".</dd>

   <dt><dfn data-anolis-xref="dom-navigator-appVersion" id="dom-navigator-appversion"><code>appVersion</code></dfn></dt>
   <dd><p>Must return either the string "<code data-anolis-xref="">4.0</code>" or a string representing the
   version of the browser in detail, e.g. "<code data-anolis-xref="">1.0 (VMS; en-US)
   Mellblomenator/9000</code>".</dd>

   <!-- buildID: Mozilla only -->

   <!-- oscpu: Mozilla only -->

   <dt><dfn data-anolis-xref="dom-navigator-platform" id="dom-navigator-platform"><code>platform</code></dfn></dt>
   <dd><p>Must return either the empty string or a string representing the platform on which the
   browser is executing, e.g. "<code data-anolis-xref="">MacIntel</code>", "<code data-anolis-xref="">Win32</code>",
   "<code data-anolis-xref="">FreeBSD i386</code>", "<code data-anolis-xref="">WebTV OS</code>".</dd>

   <dt><dfn data-anolis-xref="dom-navigator-product" id="dom-navigator-product"><code>product</code></dfn></dt>
   <dd><p>Must return the string "<code data-anolis-xref="">Gecko</code>".</dd>

   <!-- productSub: Mozilla and Safari only; returns same as buildID in Mozilla, and returns the fixed string "20030107" in Safari -->

   <!-- securityPolicy: Mozilla only; always returns "" -->

   <dt><dfn data-anolis-xref="dom-navigator-taintEnabled" id="dom-navigator-taintenabled"><code>taintEnabled()</code></dfn></dt>
   <dd><p>Must return false.</dd>

   <dt><dfn data-anolis-xref="dom-navigator-userAgent" id="dom-navigator-useragent"><code>userAgent</code></dfn></dt>
   <dd><p>Must return the string used for the value of the "<code data-anolis-xref="">User-Agent</code>" header
   in HTTP requests, or the empty string if no such header is ever sent.</dd>

   <!-- vendor: Mozilla and Safari only; always returns "" in Mozilla, and returns the fixed string "Apple Computer, Inc." in Safari -->

   <!-- vendorSub: Mozilla and Safari only; always returns "" -->

  </dl><!-- similar paragraph in next section --><p class="warning">Any information in this API that varies from user to user can be used to
  profile the user. In fact, if enough such information is available, a user can actually be
  uniquely identified. For this reason, user agent implementors are strongly urged to include as
  little information in this API as possible.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  </div><!-- next section refers to previous section as "previous section" -->

  

  <h5 id="language-preferences"><span class="secno">6.6.1.2</span> 言語の好み</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorlanguage">NavigatorLanguage</dfn> {
  readonly attribute DOMString? <a data-anolis-xref="dom-navigator-language" href="#dom-navigator-language">language</a>;
};</pre>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-language"><a href="#dom-navigator-language">language</a></code></dt>
   <dd>
    <p>ユーザーの優先言語を表す言語タグを返す。</p>
   </dd>

  </dl><div class="impl">

  <dl><!--
   <dt><dfn data-x="dom-navigator-browserLanguage"><code>browserLanguage</code></dfn></dt> <!- - Opera and IE only - ->
   <dd><p>Must return a language tag representing either <span>a plausible language</span> or the
   language the browser uses in its interface.</p></dd>


   <dt><dfn data-x="dom-navigator-userLanguage"><code>userLanguage</code></dfn></dt> <!- - Opera and IE only - ->
   --><!-- at time of testing, this was supported by Opera, Safari, and Mozilla only --><dt><dfn data-anolis-xref="dom-navigator-language" id="dom-navigator-language"><code>language</code></dfn></dt>
   <dd><p>Must return a valid BCP 47 language tag representing either <a href="#a-plausible-language">a plausible
   language</a> or the user's preferred language. <a href="references.html#refsBCP47">[BCP47]</a></dd>

  </dl><p>To determine <dfn id="a-plausible-language">a plausible language</dfn>, the user agent should bear in mind the following:</p>

  <ul><li>Any information in this API that varies from user to user can be used to profile or identify
   the user.
   <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
   </li>

   <li>If the user is not using a service that obfuscates the user's point of origin (e.g. the Tor
   anonymity network), then the value that is least likely to distinguish the user from other users
   with similar origins (e.g. from the same IP address block) is the language used by the majority
   of such users. <a href="references.html#refsTOR">[TOR]</a></li>

   <li>If the user is using an anonymizing service, then the value "<code data-anolis-xref="">en-US</code>" is
   suggested; if all users of the service use that same value, that reduces the possibility of
   distinguishing the users from each other.</li>

  </ul></div>



  <h5 id="custom-handlers"><span class="secno">6.6.1.3</span> カスタムスキームおよびコンテンツハンドラ</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorcontentutils">NavigatorContentUtils</dfn> {
  // content handler registration
  void <a data-anolis-xref="dom-navigator-registerProtocolHandler" href="#dom-navigator-registerprotocolhandler">registerProtocolHandler</a>(DOMString scheme, DOMString url, DOMString title);
  void <a data-anolis-xref="dom-navigator-registerContentHandler" href="#dom-navigator-registercontenthandler">registerContentHandler</a>(DOMString mimeType, DOMString url, DOMString title);
  void <a data-anolis-xref="dom-navigator-unregisterProtocolHandler" href="#dom-navigator-unregisterprotocolhandler">unregisterProtocolHandler</a>(DOMString scheme, DOMString url);
  void <a data-anolis-xref="dom-navigator-unregisterContentHandler" href="#dom-navigator-unregistercontenthandler">unregisterContentHandler</a>(DOMString mimeType, DOMString url);
};</pre>

  <p><dfn data-anolis-xref="dom-navigator-registerProtocolHandler" id="dom-navigator-registerprotocolhandler"><code>registerProtocolHandler()</code></dfn>メソッドは、ウェブサイトが特定のスキームに対する可能なハンドラとして自身を登録できる。たとえば、オンライン電話メッセージングサービスは、そのようなリンクをユーザーがクリックした場合、サービスはそのウェブサイトを使用する機会が与えられるように、<code>sms:</code>スキームのハンドラとして自身を登録できる。同様に、<dfn data-anolis-xref="dom-navigator-registerContentHandler" id="dom-navigator-registercontenthandler"><code>registerContentHandler()</code></dfn>メソッドは、ウェブサイトが特定の<a href="infrastructure.html#mime-type">MIMEタイプ</a>でコンテンツに対して可能なハンドラとして自身を登録できる。たとえば、同じオンライン電話メッセージングサービスは、ユーザーがvCardを扱うことができるネイティブアプリケーションを持たない場合、ユーザーのウェブブラウザの代わりに、ユーザーが開くvCard上に格納される連絡先情報を表示するためにそのサイトの使用を提案できるように、<code>text/vcard</code>のファイルのハンドラとして自身を登録できる。<a href="references.html#refsRFC5724">[RFC5724]</a> <a href="references.html#refsRFC6350">[RFC6350]</a></p>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler</a></code>(<var data-anolis-xref="">scheme</var>, <var data-anolis-xref="">url</var>, <var data-anolis-xref="">title</var>)</dt>
   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler</a></code>(<var data-anolis-xref="">mimeType</var>, <var data-anolis-xref="">url</var>, <var data-anolis-xref="">title</var>)</dt>

   <dd>

    <p>指定されたタイトルとともに、指定されたURLで、指定されたスキームまたはコンテンツタイプのハンドラを登録する。</p>

    <p>URL内文字列"<code data-anolis-xref="">%s</code>"は、扱うにあたりコンテンツのURLをどこに置くかのプレースホルダーとして使用される。</p>

    <p>ユーザーエージェントが登録をブロックした場合（たとえば、"http"に対するハンドラとして登録しようとする場合、これは起こるかもしれない）<code><a href="infrastructure.html#securityerror">SecurityError</a></code>例外を投げる。</p>

    <p>"<code data-anolis-xref="">%s</code>"文字列がURLに欠落している場合は<code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code>を投げる。</p>

   </dd>

  </dl><div class="impl">

  <p>User agents may, within the constraints described in this section, do whatever they like when
  the methods are called. A UA could, for instance, prompt the user and offer the user the
  opportunity to add the site to a shortlist of handlers, or make the handlers his default, or
  cancel the request. UAs could provide such a UI through modal UI or through a non-modal transient
  notification interface. UAs could also simply silently collect the information, providing it only
  when relevant to the user.</p>

  <p>User agents should keep track of which sites have registered handlers (even if the user has
  declined such registrations) so that the user is not repeatedly prompted with the same
  request.</p>

  <p>The arguments to the methods have the following meanings and corresponding implementation
  requirements. The requirements that involve throwing exceptions must be processed in the order
  given below, stopping at the first exception thrown. (So the exceptions for the first argument
  take precedence over the exceptions for the second argument.)</p>

  <dl><dt><var data-anolis-xref="">scheme</var> (<code data-anolis-xref="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code> only)</dt>

   <dd>

    <p>A scheme, such as <code>mailto</code> or <code>web+auth</code>. The scheme must be compared
    in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner by user agents for the purposes of comparing
    with the scheme part of URLs that they consider against the list of registered handlers.</p>

    <p>The <var data-anolis-xref="">scheme</var> value, if it contains a colon (as in "<code>mailto:</code>"),
    will never match anything, since schemes don't contain colons.</p>

    <p>If the <code data-anolis-xref="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code>
    method is invoked with a scheme that is neither a <a href="#whitelisted-scheme">whitelisted scheme</a> nor a scheme
    whose value starts with the substring "<code data-anolis-xref="">web+</code>" and otherwise contains only
    <a href="infrastructure.html#lowercase-ascii-letters">lowercase ASCII letters</a>, and whose length is at least five characters (including
    the "<code data-anolis-xref="">web+</code>" prefix), the user agent must throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code>
    exception.</p>

    <p>The following schemes are the <dfn data-anolis-xref="whitelisted scheme" id="whitelisted-scheme">whitelisted schemes</dfn>:</p>

    <ul class="brief"><li><code data-anolis-xref="">bitcoin</code></li> <!-- https://en.bitcoin.it/wiki/BIP_0021 -->
     <li><code data-anolis-xref="">geo</code></li>
     <li><code data-anolis-xref="">im</code></li>
     <li><code data-anolis-xref="">irc</code></li>
     <li><code data-anolis-xref="">ircs</code></li>
     <li><code data-anolis-xref="">magnet</code></li>
     <li><code data-anolis-xref="">mailto</code></li>
     <li><code data-anolis-xref="">mms</code></li>
     <li><code data-anolis-xref="">news</code></li>
     <li><code data-anolis-xref="">nntp</code></li>
     <li><code data-anolis-xref="">sip</code></li>
     <li><code data-anolis-xref="">sms</code></li>
     <li><code data-anolis-xref="">smsto</code></li>
     <li><code data-anolis-xref="">ssh</code></li>
     <li><code data-anolis-xref="">tel</code></li>
     <li><code data-anolis-xref="">urn</code></li>
     <li><code data-anolis-xref="">webcal</code></li>
     <li><code data-anolis-xref="">wtai</code></li>
     <li><code data-anolis-xref="">xmpp</code></li>
    </ul><p class="note">This list can be changed. If there are schemes that should be added, please send
    feedback.</p>

    <p class="note">This list excludes any schemes that could reasonably be expected to be supported
    inline, e.g. in an <code><a href="embedded-content-0.html#the-iframe-element">iframe</a></code>, such as <code data-anolis-xref="">http</code> or (more
    theoretically) <code data-anolis-xref="">gopher</code>. If those were supported, they could potentially be
    used in man-in-the-middle attacks, by replacing pages that have frames with such content with
    content under the control of the protocol handler. If the user agent has native support for the
    schemes, this could further be used for cookie-theft attacks.</p>

   </dd>

   <dt><var data-anolis-xref="">mimeType</var> (<code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code> only)</dt>

   <dd>

    <p>A <a href="infrastructure.html#mime-type">MIME type</a>, such as <code>model/vnd.flatland.3dml</code> or
    <code>application/vnd.google-earth.kml+xml</code>. The <a href="infrastructure.html#mime-type">MIME type</a> must be compared
    in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner by user agents for the purposes of comparing
    with MIME types of documents that they consider against the list of registered handlers.</p>

    <p>User agents must compare the given values only to the MIME type/subtype parts of content
    types, not to the complete type including parameters. Thus, if <var data-anolis-xref="">mimeType</var>
    values passed to this method include characters such as commas or whitespace, or include MIME
    parameters, then the handler being registered will never be used.</p>

    <p class="note">The type is compared to the <a href="infrastructure.html#mime-type">MIME type</a> used by the user agent
    <em>after</em> the sniffing algorithms have been applied.</p>

    <p>If the <code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code>
    method is invoked with a <a href="infrastructure.html#mime-type">MIME type</a> that is in the <a href="#type-blacklist">type blacklist</a> or
    that the user agent has deemed a privileged type, the user agent must throw a
    <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception.</p>

    <p>The following <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> are in the <dfn id="type-blacklist">type
    blacklist</dfn>:</p>

    <ul class="brief"><li><code><a href="iana.html#application/x-www-form-urlencoded">application/x-www-form-urlencoded</a></code></li>
     <li><code><a href="iana.html#application/xhtml+xml">application/xhtml+xml</a></code></li>
     <li><code>application/xml</code></li>
     <li><code>image/gif</code></li>
     <li><code>image/jpeg</code></li>
     <li><code>image/png</code></li>
     <li><code>image/svg+xml</code></li>
     <li><code><a href="iana.html#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code></li>
     <li><code><a href="iana.html#text/cache-manifest">text/cache-manifest</a></code></li>
     <li><code>text/css</code></li>
     <li><code><a href="iana.html#text/html">text/html</a></code></li>
     <li><code>text/ping</code></li>
     <li><code>text/plain</code></li>
     <li><code>text/xml</code></li>
     <li>All types that the user agent supports displaying natively in a <a href="browsers.html#browsing-context">browsing context</a> during <a data-anolis-xref="navigate" href="browsers.html#navigate">navigation</a>, except for <code>application/rss+xml</code> and <code>application/atom+xml</code></li>

    </ul><p class="note">This list can be changed. If there are MIME types that should be added, please
    send feedback.</p>

   </dd>


   <dt><var data-anolis-xref="">url</var></dt>

   <dd>

    <p>A string used to build the <span>URL</span> of the page that will handle the requests.</p>

    <p>User agents must throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception if the <var data-anolis-xref="">url</var>
    argument passed to one of these methods does not contain the exact literal string
    "<code><a href="text-level-semantics.html#the-s-element">%s</a></code>".</p>

<!--CLEANUP-->
    <p>User agents must throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception if <a data-anolis-xref="resolve a
    url" href="infrastructure.html#resolve-a-url">resolving</a> the <var data-anolis-xref="">url</var> argument relative to the
    <a href="#api-base-url">API base URL</a> specified by the <a href="#entry-settings-object">entry settings object</a> is not successful.</p>

    <p class="note">The resulting <a href="infrastructure.html#absolute-url">absolute URL</a> would by definition not be a <a href="infrastructure.html#valid-url">valid
    URL</a> as it would include the string "<code data-anolis-xref="">%s</code>" which is not a valid
    component in a URL.</p>

<!--CLEANUP-->
    <p>User agents must throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code> exception if the resulting <a href="infrastructure.html#absolute-url">absolute
    URL</a> has an <a href="browsers.html#origin-0">origin</a> that differs from the <a href="browsers.html#origin-0">origin</a> specified by the
    <a href="#entry-settings-object">entry settings object</a>.</p>

    <p class="note">This is forcibly the case if the <code data-anolis-xref="">%s</code> placeholder is in the
    scheme, host, or port parts of the URL.</p>

    <p>The resulting <a href="infrastructure.html#absolute-url">absolute URL</a> is the <dfn id="proto-url">proto-URL</dfn>. It identifies the
    handler for the purposes of the methods described below.</p>

<!--CLEANUP-->
    <p>When the user agent uses this handler, it must replace the first occurrence of the exact
    literal string "<code data-anolis-xref="">%s</code>" in the <var data-anolis-xref="">url</var> argument with an
    escaped version of the <a href="infrastructure.html#absolute-url">absolute URL</a> of the content in question (as defined below),
    then <a data-anolis-xref="resolve a url" href="infrastructure.html#resolve-a-url">resolve</a> the resulting URL, relative to the <a href="#api-base-url">API
    base URL</a> specified by the <a href="#entry-settings-object">entry settings object</a> at the time the <code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code> or <code data-anolis-xref="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code> methods were
    invoked, and then <a href="browsers.html#navigate">navigate</a><!--DONAV user--> an appropriate <a href="browsers.html#browsing-context">browsing
    context</a> to the resulting URL using the GET method (<a data-anolis-xref="concept-http-equivalent-get" href="infrastructure.html#concept-http-equivalent-get">or equivalent</a> for non-HTTP URLs).</p>

    <p>To get the escaped version of the <a href="infrastructure.html#absolute-url">absolute URL</a> of the content in question, the
    user agent must replace every character in that <a href="infrastructure.html#absolute-url">absolute URL</a> that is not a
    character in the URL <a href="infrastructure.html#default-encode-set">default encode set</a> with the result of <a data-anolis-xref="UTF-8
    percent encode" href="infrastructure.html#utf-8-percent-encode">UTF-8 percent encoding</a> that character.</p>

    <div class="example">

     <p>If the user had visited a site at <code data-anolis-xref="">http://example.com/</code> that made the
     following call:</p>

     <pre>navigator.registerContentHandler('application/x-soup', 'soup?url=%s', 'SoupWeb™')</pre>

     <p>...and then, much later, while visiting <code data-anolis-xref="">http://www.example.net/</code>,
     clicked on a link such as:</p>

     <pre>&lt;a href="chickenkïwi.soup"&gt;Download our Chicken Kïwi soup!&lt;/a&gt;</pre>

     <p>...then, assuming this <code>chickenkïwi.soup</code> file was served with the
     <a href="infrastructure.html#mime-type">MIME type</a> <code>application/x-soup</code>, the UA might navigate to the following
     URL:</p>

     <pre>http://example.com/soup?url=http://www.example.net/chickenk%C3%AFwi.soup</pre>

     <p>This site could then fetch the <code>chickenkïwi.soup</code> file and do whatever it is
     that it does with soup (synthesize it and ship it to the user, or whatever).</p>

    </div>

   </dd>

   <dt><var data-anolis-xref="">title</var></dt>

   <dd>

    <p>A descriptive title of the handler, which the UA might use to remind the user what the site
    in question is.</p>

   </dd>

  </dl><p>This section does not define how the pages registered by these methods are used, beyond the
  requirements on how to process the <var data-anolis-xref="">url</var> value (see above). To some extent, the
  <a data-anolis-xref="navigate" href="browsers.html#navigate">processing model for navigating across documents</a> defines some cases
  where these methods are relevant, but in general UAs may use this information wherever they would
  otherwise consider handing content to native plugins or helper applications.</p>

  <p>UAs must not use registered content handlers to handle content that was returned as part of a
  non-GET transaction (or rather, as part of any non-idempotent transaction), as the remote site
  would not be able to fetch the same data.</p>

  <hr></div>

  <p>登録メソッドに加えて、特定のハンドラが登録されているかどうかを判断するため、およびハンドラの登録を解除するためのメソッドもある。</p>

  <dl class="domintro"><dt><var data-anolis-xref="">state</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-unregisterProtocolHandler"><a href="#dom-navigator-unregisterprotocolhandler">unregisterProtocolHandler</a></code>(<var data-anolis-xref="">scheme</var>, <var data-anolis-xref="">url</var>)</dt>
   <dt><var data-anolis-xref="">state</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-unregisterContentHandler"><a href="#dom-navigator-unregistercontenthandler">unregisterContentHandler</a></code>(<var data-anolis-xref="">mimeType</var>, <var data-anolis-xref="">url</var>)</dt>

   <dd>

    <p>引数で指定されたハンドラの登録を解除する。</p>

   </dd>

  </dl><div class="impl">

  <p>The <dfn data-anolis-xref="handler state string" id="handler-state-string">handler state strings</dfn> are the following strings.
  Each string describes several situations, as given by the following list.</p>

  <dl><dt><code data-anolis-xref="">new</code>

   <dd>The described handler has never been registered for the given scheme or type.

   <dd>The described handler was once registered for the given scheme or type, but the site has
   since unregistered it. If the handler were to be reregistered, the user would be notified
   accordingly.

   <dd>The described handler was once registered for the given scheme or type, but the site has
   since unregistered it, but the user has indicated that the site is to be blocked from registering
   the type again, so the user agent would ignore further registration attempts.


   <dt><code data-anolis-xref="">registered</code>

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet been notified, and the user agent would ignore further registration attempts.
   (Maybe the user agent batches registration requests to display them when the user requests to be
   notified about them, and the user has not yet requested that the user agent notify it of the
   previous registration attempt.)

   <dd>The described handler is registered for the given scheme or type (maybe, or maybe not, as the
   default handler).

   <dd>The described handler is permanently blocked from being (re)registered. (Maybe the user
   marked the registration attempt as spam, or blocked the site for other reasons.)


   <dt><code data-anolis-xref="">declined</code>

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet been notified; however, the user might be notified if another registration
   attempt were to be made. (Maybe the last registration attempt was made while the page was in the
   background and the user closed the page without looking at it, and the user agent requires
   confirmation for this registration attempt.)

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet responded.

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user declined the offer. The user has not indicated that the handler is to be permanently
   blocked, however, so another attempt to register the described handler might result in the user
   being prompted again.

   <dd>The described handler was once registered for the given scheme or type, but the user has
   since removed it. The user has not indicated that the handler is to be permanently blocked,
   however, so another attempt to register the described handler might result in the user being
   prompted again.

  </dl><hr><p>The <dfn data-anolis-xref="dom-navigator-unregisterProtocolHandler" id="dom-navigator-unregisterprotocolhandler"><code>unregisterProtocolHandler()</code></dfn>
  method must unregister the handler described by the two arguments to the method, where the first
  argument gives the scheme and the second gives the string used to build the <span>URL</span> of
  the page that will handle the requests.</p>

  <p>The first argument must be compared to the schemes for which custom protocol handlers are
  registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner to find the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a data-anolis-xref="proto-URL" href="#proto-url">proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr><p>The <dfn data-anolis-xref="dom-navigator-unregisterContentHandler" id="dom-navigator-unregistercontenthandler"><code>unregisterContentHandler()</code></dfn>
  method must unregister the handler described by the two arguments to the method, where the first
  argument gives the <a href="infrastructure.html#mime-type">MIME type</a> and the second gives the string used to build the
  <span>URL</span> of the page that will handle the requests.</p>

  <p>The first argument must be compared to the <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> for which
  custom content handlers are registered in an <a href="infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> manner to find
  the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a data-anolis-xref="proto-URL" href="#proto-url">proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr><p>The second argument of the four methods described above must be preprocessed as follows:</p>

  <ol><li><p>If the string does not contain the substring "<code data-anolis-xref="">%s</code>", abort these
   steps. There's no matching handler.</li>

<!--CLEANUP-->
   <li><p><a data-anolis-xref="resolve a URL" href="infrastructure.html#resolve-a-url">Resolve</a> the string relative to the <a href="#api-base-url">API base URL</a>
   specified by the <a href="#entry-settings-object">entry settings object</a>.</li>

   <li><p>If this fails, then throw a <code><a href="infrastructure.html#syntaxerror">SyntaxError</a></code> exception, aborting the
   method.</li>

<!--CLEANUP-->
   <li><p>If the resulting <a href="infrastructure.html#absolute-url">absolute URL</a>'s <a href="browsers.html#origin-0">origin</a> is not the <a href="browsers.html#same-origin">same
   origin</a> as the <a href="browsers.html#origin-0">origin</a> specified by the <a href="#entry-settings-object">entry settings object</a>, throw a <code><a href="infrastructure.html#securityerror">SecurityError</a></code>
   exception, aborting the method.</li>

   <li><p>Return the resulting <a href="infrastructure.html#absolute-url">absolute URL</a> as the result of preprocessing the
   argument.</li>

  </ol></div><!--ADD-TOPIC:Security-->




  <div class="impl">

  <h6 id="security-and-privacy"><span class="secno">6.6.1.3.1 </span>Security and privacy</h6>

  <p>These mechanisms can introduce a number of concerns, in particular privacy concerns.</p>

  <p><strong>Hijacking all Web usage.</strong> User agents should not allow schemes that are key to
  its normal operation, such as <code>http</code> or <code>https</code>, to be rerouted through
  third-party sites. This would allow a user's activities to be trivially tracked, and would allow
  user information, even in secure connections, to be collected.</p>

  <p><strong>Hijacking defaults.</strong> User agents are strongly urged to not automatically change
  any defaults, as this could lead the user to send data to remote hosts that the user is not
  expecting. New handlers registering themselves should never automatically cause those sites to be
  used.</p>

  <p><strong>Registration spamming.</strong> User agents should consider the possibility that a site
  will attempt to register a large number of handlers, possibly from multiple domains (e.g. by
  redirecting through a series of pages each on a different domain, and each registering a handler
  for <code>video/mpeg</code> — analogous practices abusing other Web browser features have
  been used by pornography Web sites for many years). User agents should gracefully handle such
  hostile attempts, protecting the user.</p>

  <p><strong>Misleading titles.</strong> User agents should not rely wholly on the <var data-anolis-xref="">title</var> argument to the methods when presenting the registered handlers to the user,
  since sites could easily lie. For example, a site <code>hostile.example.net</code> could claim
  that it was registering the "Cuddly Bear Happy Content Handler". User agents should therefore use
  the handler's domain in any UI along with any title.</p>

  <p><strong>Hostile handler metadata.</strong> User agents should protect against typical attacks
  against strings embedded in their interface, for example ensuring that markup or escape characters
  in such strings are not executed, that null bytes are properly handled, that over-long strings do
  not cause crashes or buffer overruns, and so forth.</p>

  <p><strong>Leaking Intranet URLs.</strong> The mechanism described in this section can result in
  secret Intranet URLs being leaked, in the following manner:</p>

  <ol><li>The user registers a third-party content handler as the default handler for a content
   type.</li>

   <li>The user then browses his corporate Intranet site and accesses a document that uses that
   content type.</li>

   <li>The user agent contacts the third party and hands the third party the URL to the Intranet
   content.</li>

  </ol><p>No actual confidential file data is leaked in this manner, but the URLs themselves could
  contain confidential information. For example, the URL could be
  <code>http://www.corp.example.com/upcoming-aquisitions/the-sample-company.egf</code>, which might
  tell the third party that Example Corporation is intending to merge with The Sample Company.
  Implementors might wish to consider allowing administrators to disable this feature for certain
  subdomains, content types, or schemes.</p>

  <p><strong>Leaking secure URLs.</strong> User agents should not send HTTPS URLs to third-party
  sites registered as content handlers without the user's informed consent, for the same reason that
  user agents sometimes avoid sending <code data-anolis-xref="http-referer">Referer</code> (sic) HTTP headers
  from secure sites to third-party sites.</p>

  <p><strong>Leaking credentials.</strong> User agents must never send username or password
  information in the URLs that are escaped and included sent to the handler sites. User agents may
  even avoid attempting to pass to Web-based handlers the URLs of resources that are known to
  require authentication to access, as such sites would be unable to access the resources in
  question without prompting the user for credentials themselves (a practice that would require the
  user to know whether to trust the third-party handler, a decision many users are unable to make or
  even understand).</p>

  <p><strong>Interface interference.</strong> User agents should be prepared to handle intentionally
  long arguments to the methods. For example, if the user interface exposed consists of an "accept"
  button and a "deny" button, with the "accept" binding containing the name of the handler, it's
  important that a long name not cause the "deny" button to be pushed off the screen.</p>

  <p><strong>Fingerprinting users.</strong> Since a site can detect if it has attempted to register
  a particular handler or not, whether or not the user responds, the mechanism can be used to store
  data. User agents are therefore strongly urged to treat registrations in the same manner as
  cookies: clearing cookies for a site should also clear all registrations for that site, and
  disabling cookies for a site should also disable registrations.</p>

  </div><!--REMOVE-TOPIC:Security-->



  <div class="impl">

  <h6 id="sample-handler-impl"><span class="secno">6.6.1.3.2 </span>Sample user interface</h6>

  <p><i>This section is non-normative.</i></p>
  <p>A simple implementation of this feature for a desktop Web browser might work as follows.</p>

  <p>The <code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code> method
  could display a modal dialog box:</p>

  <p><img alt="The modal dialog box could have the title 'Content Handler Registration', and could say 'This Web page: Kittens at work http://kittens.example.org/ ...would like permission to handle files of type: application/x-meowmeow using the following Web-based application: Kittens-at-work displayer http://kittens.example.org/?show=%s Do you trust the administrators of the &quot;kittens.example.org&quot; domain?' with two buttons, 'Trust kittens.example.org' and 'Cancel'." height="374" src="images/sample-content-handler-registration.png" width="534"></p>

  <p>In this dialog box, "Kittens at work" is the title of the page that invoked the method,
  "http://kittens.example.org/" is the URL of that page, "application/x-meowmeow" is the string that
  was passed to the <code data-anolis-xref="dom-navigator-registerContentHandler"><a href="#dom-navigator-registercontenthandler">registerContentHandler()</a></code> method as its first
  argument (<var data-anolis-xref="">mimeType</var>), "http://kittens.example.org/?show=%s" was the second
  argument (<var data-anolis-xref="">url</var>), and "Kittens-at-work displayer" was the third argument (<var data-anolis-xref="">title</var>).</p>

  <p>If the user clicks the Cancel button, then nothing further happens. If the user clicks the
  "Trust" button, then the handler is remembered.</p>

  <p>When the user then attempts to fetch a URL that uses the "application/x-meowmeow" <a href="infrastructure.html#mime-type">MIME
  type</a>, then it might display a dialog as follows:</p>

  <p><img alt="The dialog box could have the title 'Unknown File Type' and could say 'You have attempted to access:' followed by a URL, followed by a prompt such as 'How would you like FerretBrowser to handle this resource?' with three radio buttons, one saying 'Contact the FerretBrowser plugin registry to see if there is an official way to handle this resource.', one saying 'Pass this URL to a local application' with an application selector, and one saying 'Pass this URL to the &quot;Kittens-at-work displayer&quot; application at &quot;kittens.example.org&quot;', with a checkbox labeled 'Always do this for resources using the &quot;application/x-meowmeow&quot; type in future.', and with two buttons, 'Ok' and 'Cancel'." height="428" src="images/sample-content-handler.png" width="577"></p>

  <p>In this dialog, the third option is the one that was primed by the site registering itself
  earlier.</p>

  <p>If the user does select that option, then the browser, in accordance with the requirements
  described in the previous two sections, will redirect the user to
  "http://kittens.example.org/?show=data%3Aapplication/x-meowmeow;base64,S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D".</p>

  <p>The <code data-anolis-xref="dom-navigator-registerProtocolHandler"><a href="#dom-navigator-registerprotocolhandler">registerProtocolHandler()</a></code> method
  would work equivalently, but for schemes instead of unknown content types.</p>

  </div>



  <h5 id="manually-releasing-the-storage-mutex"><span class="secno">6.6.1.4</span> ストレージミューテックスを手動解放する</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorstorageutils">NavigatorStorageUtils</dfn> {
  readonly attribute boolean <a data-anolis-xref="dom-navigator-cookieEnabled" href="#dom-navigator-cookieenabled">cookieEnabled</a>;
  void <a data-anolis-xref="dom-navigator-yieldForStorageUpdates" href="#dom-navigator-yieldforstorageupdates">yieldForStorageUpdates</a>();
};</pre>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-cookieEnabled"><a href="#dom-navigator-cookieenabled">cookieEnabled</a></code></dt>

   <dd>

    <p>クッキーの設定が拒否される場合falseを返し、そうでなければtrueを返す。</p>

   </dd>


   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">yieldForStorageUpdates</a></code>()</dt>

   <dd>

    <p>スクリプトが<code data-anolis-xref="dom-document-cookie"><a href="dom.html#dom-document-cookie"> document.cookie</a></code>API、または<code data-anolis-xref="dom-localStorage">localStorage</code>APIを使用する場合、ブラウザは最初のスクリプトが終了するまで、クッキーやストレージへのアクセスから他のスクリプトをブロックする。<a href="references.html#refsWEBSTORAGE">[WEBSTORAGE]</a>
        </p>

    <p><code data-anolis-xref="dom-navigator-yieldForStorageUpdates"><a href="#dom-navigator-yieldforstorageupdates">navigator.yieldForStorageUpdates()</a></code>メソッドの呼び出しは、スクリプトが返されていなくても、ブロックされてもよい他のスクリプトブロックの解除をユーザーエージェントに指示する。</p>

    <p>クッキーおよび<code data-anolis-xref="dom-localStorage">localStorage</code>属性の<code>Storage</code>オブジェクト内の項目値は、このメソッドで呼び出す後に、そこからその名前を変更できる。<a href="references.html#refsWEBSTORAGE">[WEBSTORAGE]</a>
        </p>

   </dd>

  </dl><div class="impl">

   <p>The <dfn data-anolis-xref="dom-navigator-cookieEnabled" id="dom-navigator-cookieenabled"><code>cookieEnabled</code></dfn> attribute must
   return true if the user agent attempts to handle cookies according to the cookie specification,
   and false if it ignores cookie change requests. <a href="references.html#refsCOOKIES">[COOKIES]</a></p>

   <p>The <dfn data-anolis-xref="dom-navigator-yieldForStorageUpdates" id="dom-navigator-yieldforstorageupdates"><code>yieldForStorageUpdates()</code></dfn> method,
   when invoked, must, if the <a href="#storage-mutex">storage mutex</a> is owned by the <a href="#event-loop">event loop</a> of
   the <a data-anolis-xref="concept-task" href="#concept-task">task</a> that resulted in the method being called, release the
   <a href="#storage-mutex">storage mutex</a> so that it is once again free. Otherwise, it must do nothing.</p>

  </div>



  <h5 id="plugins-0"><span class="secno">6.6.1.5</span> プラグイン</h5>

  <pre class="idl">[NoInterfaceObject]
interface <dfn id="navigatorplugins">NavigatorPlugins</dfn> {
  readonly attribute <a href="#pluginarray">PluginArray</a> <a data-anolis-xref="dom-navigator-plugins" href="#dom-navigator-plugins">plugins</a>;
  readonly attribute <a href="#mimetypearray">MimeTypeArray</a> <a data-anolis-xref="dom-navigator-mimeTypes" href="#dom-navigator-mimetypes">mimeTypes</a>;
  readonly attribute boolean <a data-anolis-xref="dom-navigator-javaEnabled" href="#dom-navigator-javaenabled">javaEnabled</a>;
};

interface <dfn id="pluginarray">PluginArray</dfn> {
  void <a data-anolis-xref="dom-PluginArray-refresh" href="#dom-pluginarray-refresh">refresh</a>(optional boolean reload = false);
  readonly attribute unsigned long <a data-anolis-xref="dom-PluginArray-length" href="#dom-pluginarray-length">length</a>;
  getter <a data-anolis-xref="dom-Plugin" href="#dom-plugin">Plugin</a>? <a data-anolis-xref="dom-PluginArray-item" href="#dom-pluginarray-item">item</a>(unsigned long index);
  getter <a data-anolis-xref="dom-Plugin" href="#dom-plugin">Plugin</a>? <a data-anolis-xref="dom-PluginArray-namedItem" href="#dom-pluginarray-nameditem">namedItem</a>(DOMString name);
};

interface <dfn id="mimetypearray">MimeTypeArray</dfn> {
  readonly attribute unsigned long <a data-anolis-xref="dom-MimeTypeArray-length" href="#dom-mimetypearray-length">length</a>;
  getter <a href="#mimetype">MimeType</a>? <a data-anolis-xref="dom-MimeTypeArray-item" href="#dom-mimetypearray-item">item</a>(unsigned long index);
  getter <a href="#mimetype">MimeType</a>? <a data-anolis-xref="dom-MimeTypeArray-namedItem" href="#dom-mimetypearray-nameditem">namedItem</a>(DOMString name);
};

interface <dfn data-anolis-xref="dom-Plugin" id="dom-plugin">Plugin</dfn> {
  readonly attribute DOMString <a data-anolis-xref="dom-Plugin-name" href="#dom-plugin-name">name</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-Plugin-description" href="#dom-plugin-description">description</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-Plugin-filename" href="#dom-plugin-filename">filename</a>;
  readonly attribute unsigned long <a data-anolis-xref="dom-Plugin-length" href="#dom-plugin-length">length</a>;
  getter <a href="#mimetype">MimeType</a>? <a data-anolis-xref="dom-Plugin-item" href="#dom-plugin-item">item</a>(unsigned long index);
  getter <a href="#mimetype">MimeType</a>? <a data-anolis-xref="dom-Plugin-namedItem" href="#dom-plugin-nameditem">namedItem</a>(DOMString name);
};

interface <dfn id="mimetype">MimeType</dfn> {
  readonly attribute DOMString <a data-anolis-xref="dom-MimeType-type" href="#dom-mimetype-type">type</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-MimeType-description" href="#dom-mimetype-description">description</a>;
  readonly attribute DOMString <a data-anolis-xref="dom-MimeType-suffixes" href="#dom-mimetype-suffixes">suffixes</a>; // comma-separated
  readonly attribute <a data-anolis-xref="dom-Plugin" href="#dom-plugin">Plugin</a> <a data-anolis-xref="dom-MimeType-enabledPlugin" href="#dom-mimetype-enabledplugin">enabledPlugin</a>;
};</pre>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code> . <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh</a></code>( [ <var data-anolis-xref="">refresh</var> ] )</dt>
   <dd>
    <p>サポートされたプラグインのリストおよびこのページへのMIMEタイプを更新し、そのリストが変更された場合にページを再読み込みする。</p><!-- that's not quite what all browsers have always done -->
    
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code> . <code data-anolis-xref="dom-PluginArray-length"><a href="#dom-pluginarray-length">length</a></code></dt>
   <dd>
    <p>ユーザーエージェントが報告する<code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>オブジェクトで表されたプラグインの数を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code> . <code data-anolis-xref="dom-PluginArray-item"><a href="#dom-pluginarray-item">item</a></code>(<var data-anolis-xref="">index</var>)</dt>
   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code>[<var data-anolis-xref="">index</var>]</dt>
   <dd>
    <p>指定された<code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code> . <code data-anolis-xref="dom-PluginArray-item"><a href="#dom-pluginarray-item">item</a></code>(<var data-anolis-xref="">name</var>)</dt>
   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-plugins"><a href="#dom-navigator-plugins">plugins</a></code>[<var data-anolis-xref="">name</var>]</dt>
   <dd>
    <p>指定した名前をもつプラグインに対する<code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-mimeTypes">mimeTypes</code> . <code data-anolis-xref="dom-MimeTypeArray-length"><a href="#dom-mimetypearray-length">length</a></code></dt>
   <dd>
    <p>ユーザーエージェントが報告するプラグインでサポートされている<code><a href="#mimetype">MimeType</a></code>オブジェクトによって表されるMIMEタイプの数を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-mimeTypes">mimeTypes</code> . <code data-anolis-xref="dom-MimeTypeArray-item"><a href="#dom-mimetypearray-item">item</a></code>(<var data-anolis-xref="">index</var>)</dt>
   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-mimeTypes">mimeTypes</code>[<var data-anolis-xref="">index</var>]</dt>
   <dd>
    <p>指定された<code><a href="#mimetype">MimeType</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-mimeTypes">mimeTypes</code> . <code data-anolis-xref="dom-MimeTypeArray-item"><a href="#dom-mimetypearray-item">item</a></code>(<var data-anolis-xref="">name</var>)</dt>
   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-mimeTypes">mimeTypes</code>[<var data-anolis-xref="">name</var>]</dt>
   <dd>
    <p>指定されたMIMEタイプに対する<code><a href="#mimetype">MimeType</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code>
   <dd>
    <p>プラグインの名前を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-description"><a href="#dom-plugin-description">description</a></code>
   <dd>
    <p>プラグインの説明を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-filename"><a href="#dom-plugin-filename">filename</a></code>
   <dd>
    <p>現在のプラットフォームに該当する場合、プラグインライブラリのファイル名を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-length"><a href="#dom-plugin-length">length</a></code></dt>
   <dd>
    <p>プラグインでサポートされている<code><a href="#mimetype">MimeType</a></code>オブジェクトによって表されるMIMEタイプの数を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> = <var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-item"><a href="#dom-plugin-item">item</a></code>(<var data-anolis-xref="">index</var>)</dt>
   <dt><var data-anolis-xref="">plugin</var>[<var data-anolis-xref="">index</var>]</dt>
   <dd>
    <p>指定された<code><a href="#mimetype">MimeType</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> = <var data-anolis-xref="">plugin</var> . <code data-anolis-xref="dom-Plugin-item"><a href="#dom-plugin-item">item</a></code>(<var data-anolis-xref="">name</var>)</dt>
   <dt><var data-anolis-xref="">plugin</var>[<var data-anolis-xref="">name</var>]</dt>
   <dd>
    <p>指定されたMIMEタイプに対する<code><a href="#mimetype">MimeType</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> . <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code>
   <dd>
    <p>MIMEタイプを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> . <code data-anolis-xref="dom-MimeType-description"><a href="#dom-mimetype-description">description</a></code>
   <dd>
    <p>MIMEタイプの説明を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> . <code data-anolis-xref="dom-MimeType-suffixes"><a href="#dom-mimetype-suffixes">suffixes</a></code>
   <dd>
    <p>コンマ区切りリストで、MIMEタイプの典型的なファイル拡張子を返す。</p>
   </dd>

   <dt><var data-anolis-xref="">mimeType</var> . <code data-anolis-xref="dom-MimeType-enabledPlugin"><a href="#dom-mimetype-enabledplugin">enabledPlugin</a></code>
   <dd>
    <p>このMIMEタイプを実装する<code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>オブジェクトを返す。</p>
   </dd>

   <dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-navigator"><a href="#dom-navigator">navigator</a></code> . <code data-anolis-xref="dom-navigator-javaEnabled"><a href="#dom-navigator-javaenabled">javaEnabled</a></code></dt>
   <dd>
    <p>MIMEタイプ"<code data-anolis-xref="">application/x-java-vm</code>"をサポートするプラグインがある場合にtrueを返す。</p>
   </dd>

  </dl><div class="impl">

  <p>The <dfn data-anolis-xref="dom-navigator-plugins" id="dom-navigator-plugins"><code>navigator.plugins</code></dfn> attribute must
  return a <code><a href="#pluginarray">PluginArray</a></code> object. The same object must be returned each time.</p>

  <p>The <dfn data-anolis-xref="dom-navigator-mimeTypes" id="dom-navigator-mimetypes"><code>navigator.mimeTypes</code></dfn> attribute must
  return a <code><a href="#mimetypearray">MimeTypeArray</a></code> object. The same object must be returned each time.</p>

  <hr><p>A <code><a href="#pluginarray">PluginArray</a></code> object represents none, some, or all of the <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> supported by the user agent, each of which is represented by a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object. Each of these <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>
  objects may be <dfn data-anolis-xref="hidden plugin" id="hidden-plugin">hidden plugins</dfn>. A <a href="#hidden-plugin">hidden plugin</a> can't
  be enumerated, but can still be inspected by using its name.</p>

  <p class="note">The fewer <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> are represented by the
  <code><a href="#pluginarray">PluginArray</a></code> object, and of those, the more that are <a data-anolis-xref="hidden
  plugin" href="#hidden-plugin">hidden</a>, the more the user's privacy will be protected. Each exposed plugin
  increases the number of bits that can be derived for fingerprinting. Hiding a plugin helps, but
  unless it is an extremely rare plugin, it is likely that a site attempting to derive the list of
  plugins can still determine whether the plugin is supported or not by probing for it by name (the
  names of popular plugins are widely known). Therefore not exposing a plugin at all is preferred.
  Unfortunately, many legacy sites use this feature to determine, for example, which plugin to use
  to play video. Not exposing any plugins at all might therefore not be entirely plausible.</p>

  <p>The <code><a href="#pluginarray">PluginArray</a></code> objects created by a user agent must not be <a href="infrastructure.html#live">live</a>. The
  set of plugins represented by the objects must not change once an object is created, except when
  it is updated by the <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh()</a></code> method.</p>

  <p>Each <a href="infrastructure.html#plugin">plugin</a> represented by a <code><a href="#pluginarray">PluginArray</a></code> can support a number of
  <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a>. For each such <a href="infrastructure.html#plugin">plugin</a>, the user agent must
  pick one or more of these <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> to be those that are
  <dfn id="explicitly-supported">explicitly supported</dfn>.</p>

  <p class="note">The <a href="#explicitly-supported">explicitly supported</a> <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> of
  a <a href="infrastructure.html#plugin">plugin</a> are those that are exposed through the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> and <code><a href="#mimetypearray">MimeTypeArray</a></code> interfaces. As with <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> themselves, any variation between users regarding what is exposed
  allows sites to fingerprint users. User agents are therefore encouraged to expose the same <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> for all users of a <a href="infrastructure.html#plugin">plugin</a>, regardless of the
  actual types supported... at least, within the constraints imposed by compatibility with legacy
  content.</p>

  <p>The <a href="infrastructure.html#supported-property-indices">supported property indices</a> of a <code><a href="#pluginarray">PluginArray</a></code> object are the
  numbers from zero to the number of non-<a data-anolis-xref="hidden plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> represented by the object, if any.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-PluginArray-length" id="dom-pluginarray-length"><code>length</code></dfn> attribute must return the
  number of non-<a data-anolis-xref="hidden plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a>
  represented by the object.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-PluginArray-item" id="dom-pluginarray-item"><code>item()</code></dfn> method of a
  <code><a href="#pluginarray">PluginArray</a></code> object must return null if the argument is not one of the object's
  <a href="infrastructure.html#supported-property-indices">supported property indices</a>, and otherwise must return the result of running the
  following steps, using the method's argument as <var data-anolis-xref="">index</var>:</p>

  <ol><li><p>Let <var data-anolis-xref="">list</var> be the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> objects
   representing the non-<a data-anolis-xref="hidden plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> represented by the <code><a href="#pluginarray">PluginArray</a></code> object.</li>

   <li><p>Sort <var data-anolis-xref="">list</var> alphabetically by the <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code> of each <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>.</li>

   <li><p>Return the <var data-anolis-xref="">index</var>th entry in <var data-anolis-xref="">list</var>.</li>

  </ol><p class="note">It is important <a class="no-backref" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector">for
  privacy</a> that the order of plugins not leak additional information, e.g. the order in which
  plugins were installed.</p>

  <p>The <a href="infrastructure.html#supported-property-names">supported property names</a> of a <code><a href="#pluginarray">PluginArray</a></code> object are the values
  of the <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code> attributes of all the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> objects represented by the <code><a href="#pluginarray">PluginArray</a></code> object. The
  properties exposed in this way must not be enumerable.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-PluginArray-namedItem" id="dom-pluginarray-nameditem"><code>namedItem()</code></dfn> method of a
  <code><a href="#pluginarray">PluginArray</a></code> object must return null if the argument is not one of the object's
  <a href="infrastructure.html#supported-property-names">supported property names</a>, and otherwise must return the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object, of those represented by the <code><a href="#pluginarray">PluginArray</a></code>
  object, that has a <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code> equal to the method's argument.</p>

  <p>The <dfn data-anolis-xref="dom-PluginArray-refresh" id="dom-pluginarray-refresh"><code>refresh()</code></dfn> method of the
  <code><a href="#pluginarray">PluginArray</a></code> object of a <code><a href="#navigator">Navigator</a></code> object, when invoked, must check to
  see if any <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> have been installed or reconfigured since the user
  agent created the <code><a href="#pluginarray">PluginArray</a></code> object. If so, and the method's argument is true, then
  the user agent must act as if the <code data-anolis-xref="dom-location-reload"><a href="browsers.html#dom-location-reload">location.reload()</a></code>
  method was called instead. Otherwise, the user agent must update the <code><a href="#pluginarray">PluginArray</a></code>
  object and <code><a href="#mimetypearray">MimeTypeArray</a></code> object created for attributes of that <code><a href="#navigator">Navigator</a></code>
  object, and the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> and <code><a href="#mimetype">MimeType</a></code> objects created
  for those <code><a href="#pluginarray">PluginArray</a></code> and <code><a href="#mimetypearray">MimeTypeArray</a></code> objects, using the same <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> objects for cases where the <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code> is the same, and the same <code><a href="#mimetype">MimeType</a></code> objects for
  cases where the <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> is the same, and creating new objects
  for cases where there were no matching objects immediately prior to the <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh()</a></code> call. Old <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>
  and <code><a href="#mimetype">MimeType</a></code> objects must continue to return the same values that they had prior to
  the update, though naturally now the data is stale and may appear inconsistent (for example, an
  old <code><a href="#mimetype">MimeType</a></code> entry might list as its <code data-anolis-xref="dom-MimeType-enabledPlugin"><a href="#dom-mimetype-enabledplugin">enabledPlugin</a></code> a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code>
  object that no longer lists that <code><a href="#mimetype">MimeType</a></code> as a supported <code><a href="#mimetype">MimeType</a></code>).</p>

  <hr><p>A <code><a href="#mimetypearray">MimeTypeArray</a></code> object represents the <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a>
  <a href="#explicitly-supported">explicitly supported</a> by <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> supported by the user
  agent, each of which is represented by a <code><a href="#mimetype">MimeType</a></code> object.</p>

  <p>The <code><a href="#mimetypearray">MimeTypeArray</a></code> objects created by a user agent must not be <a href="infrastructure.html#live">live</a>.
  The set of MIME types represented by the objects must not change once an object is created, except
  when it is updated by the <code><a href="#pluginarray">PluginArray</a></code> object's <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh()</a></code> method.</p>

  <p>The <a href="infrastructure.html#supported-property-indices">supported property indices</a> of a <code><a href="#mimetypearray">MimeTypeArray</a></code> object are the
  numbers from zero to the number of <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> <a href="#explicitly-supported">explicitly
  supported</a> by non-<a data-anolis-xref="hidden plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> represented by the corresponding <code><a href="#pluginarray">PluginArray</a></code> object, if
  any.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-MimeTypeArray-length" id="dom-mimetypearray-length"><code>length</code></dfn> attribute must return the
  number of <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> <a href="#explicitly-supported">explicitly supported</a> by non-<a data-anolis-xref="hidden plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> represented by the
  corresponding <code><a href="#pluginarray">PluginArray</a></code> object, if any.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-MimeTypeArray-item" id="dom-mimetypearray-item"><code>item()</code></dfn> method of a
  <code><a href="#mimetypearray">MimeTypeArray</a></code> object must return null if the argument is not one of the object's
  <a href="infrastructure.html#supported-property-indices">supported property indices</a>, and otherwise must return the result of running the
  following steps, using the method's argument as <var data-anolis-xref="">index</var>:</p>

  <ol><li><p>Let <var data-anolis-xref="">list</var> be the <code><a href="#mimetype">MimeType</a></code> objects representing the <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> <a href="#explicitly-supported">explicitly supported</a> by non-<a data-anolis-xref="hidden
   plugin" href="#hidden-plugin">hidden</a> <a data-anolis-xref="plugin" href="infrastructure.html#plugin">plugins</a> represented by the corresponding
   <code><a href="#pluginarray">PluginArray</a></code> object, if any.</li>

   <li><p>Sort <var data-anolis-xref="">list</var> alphabetically by the <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> of each <code><a href="#mimetype">MimeType</a></code>.</li>

   <li><p>Return the <var data-anolis-xref="">index</var>th entry in <var data-anolis-xref="">list</var>.</li>

  </ol><p class="note">It is important <a class="no-backref" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector">for
  privacy</a> that the order of MIME types not leak additional information, e.g. the order in
  which plugins were installed.</p>

  <p>The <a href="infrastructure.html#supported-property-names">supported property names</a> of a <code><a href="#mimetypearray">MimeTypeArray</a></code> object are the values
  of the <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> attributes of all the <code><a href="#mimetype">MimeType</a></code>
  objects represented by the <code><a href="#mimetypearray">MimeTypeArray</a></code> object. The properties exposed in this way
  must not be enumerable.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-MimeTypeArray-namedItem" id="dom-mimetypearray-nameditem"><code>namedItem()</code></dfn> method of a
  <code><a href="#mimetypearray">MimeTypeArray</a></code> object must return null if the argument is not one of the object's
  <a href="infrastructure.html#supported-property-names">supported property names</a>, and otherwise must return the <code><a href="#mimetype">MimeType</a></code> object
  that has a <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> equal to the method's argument.</p>

  <hr><p>A <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object represents a <a href="infrastructure.html#plugin">plugin</a>. It has
  several attributes to provide details about the plugin, and can be enumerated to obtain the list
  of <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> that it <a data-anolis-xref="explicitly supported" href="#explicitly-supported">explicitly
  supports</a>.</p>

  <p>The <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> objects created by a user agent must not be
  <a href="infrastructure.html#live">live</a>. The set of MIME types represented by the objects, and the values of the
  objects' attributes, must not change once an object is created, except when updated by the
  <code><a href="#pluginarray">PluginArray</a></code> object's <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh()</a></code>
  method.</p>

  <p>The <dfn id="reported-mime-types">reported MIME types</dfn> for a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object are the
  <a data-anolis-xref="MIME type" href="infrastructure.html#mime-type">MIME types</a> <a href="#explicitly-supported">explicitly supported</a> by the corresponding
  <a href="infrastructure.html#plugin">plugin</a> when this object was last created or updated by <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">PluginArray.refresh()</a></code>, whichever happened most
  recently.</p>

  <p>The <a href="infrastructure.html#supported-property-indices">supported property indices</a> of a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object
  are the numbers from zero to the number of <a href="#reported-mime-types">reported MIME types</a>.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-Plugin-length" id="dom-plugin-length"><code>length</code></dfn> attribute must return the number
  of <a href="#reported-mime-types">reported MIME types</a>.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-Plugin-item" id="dom-plugin-item"><code>item()</code></dfn> method of a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object must return null if the argument is not one of the
  object's <a href="infrastructure.html#supported-property-indices">supported property indices</a>, and otherwise must return the result of running
  the following steps, using the method's argument as <var data-anolis-xref="">index</var>:</p>

  <ol><li><p>Let <var data-anolis-xref="">list</var> be the <code><a href="#mimetype">MimeType</a></code> objects representing the
   <a href="#reported-mime-types">reported MIME types</a>.</li>

   <li><p>Sort <var data-anolis-xref="">list</var> alphabetically by the <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> of each <code><a href="#mimetype">MimeType</a></code>.</li>

   <li><p>Return the <var data-anolis-xref="">index</var>th entry in <var data-anolis-xref="">list</var>.</li>

  </ol><p class="note">It is important <a class="no-backref" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector">for
  privacy</a> that the order of MIME types not leak additional information, e.g. the order in
  which plugins were installed.</p>

  <p>The <a href="infrastructure.html#supported-property-names">supported property names</a> of a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object
  are the values of the <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> attributes of the
  <code><a href="#mimetype">MimeType</a></code> objects representing the <a href="#reported-mime-types">reported MIME types</a>. The properties
  exposed in this way must not be enumerable.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p>The <dfn data-anolis-xref="dom-Plugin-namedItem" id="dom-plugin-nameditem"><code>namedItem()</code></dfn> method of a <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object must return null if the argument is not one of the
  object's <a href="infrastructure.html#supported-property-names">supported property names</a>, and otherwise must return the
  <code><a href="#mimetype">MimeType</a></code> object that has a <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> equal to the
  method's argument.</p>

  <p>The <dfn data-anolis-xref="dom-Plugin-name" id="dom-plugin-name"><code>name</code></dfn> attribute must return the
  <a href="infrastructure.html#plugin">plugin</a>'s name.</p>

  <p>The <dfn data-anolis-xref="dom-Plugin-description" id="dom-plugin-description"><code>description</code></dfn> and <dfn data-anolis-xref="dom-Plugin-filename" id="dom-plugin-filename"><code>filename</code></dfn> attributes must return user-agent-defined
  (or, in all likelihood, <a href="infrastructure.html#plugin">plugin</a>-defined) strings. In each case, the same string must
  be returned each time, except that the strings returned may change when the <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">PluginArray.refresh()</a></code> method updates the object.</p>

  <p class="warning">If the values returned by the <code data-anolis-xref="dom-Plugin-description"><a href="#dom-plugin-description">description</a></code> or <code data-anolis-xref="dom-Plugin-filename"><a href="#dom-plugin-filename">filename</a></code> attributes vary between versions of a
  <a href="infrastructure.html#plugin">plugin</a>, they can be used both as a fingerprinting vector and, even more importantly,
  as a trivial way to determine what security vulnerabilities a <a href="infrastructure.html#plugin">plugin</a> (and thus a
  browser) may have. It is thus highly recommended that the <code data-anolis-xref="dom-Plugin-description"><a href="#dom-plugin-description">description</a></code> attribute just return the same value as the
  <code data-anolis-xref="dom-Plugin-name"><a href="#dom-plugin-name">name</a></code> attribute, and that the <code data-anolis-xref="dom-Plugin-filename"><a href="#dom-plugin-filename">filename</a></code> attribute return the empty string.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <hr><p>A <code><a href="#mimetype">MimeType</a></code> object represents a <a href="infrastructure.html#mime-type">MIME type</a> that is, or was,
  <a href="#explicitly-supported">explicitly supported</a> by a <a href="infrastructure.html#plugin">plugin</a>.</p>

  <p>The <code><a href="#mimetype">MimeType</a></code> objects created by a user agent must not be <a href="infrastructure.html#live">live</a>. The
  values of the objects' attributes must not change once an object is created, except when updated
  by the <code><a href="#pluginarray">PluginArray</a></code> object's <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">refresh()</a></code>
  method.</p>

  <p>The <dfn data-anolis-xref="dom-MimeType-type" id="dom-mimetype-type"><code>type</code></dfn> attribute must return the
  <a href="infrastructure.html#valid-mime-type-with-no-parameters">valid MIME type with no parameters</a> describing the <a href="infrastructure.html#mime-type">MIME type</a>.</p>

  <p>The <dfn data-anolis-xref="dom-MimeType-description" id="dom-mimetype-description"><code>description</code></dfn> and <dfn data-anolis-xref="dom-MimeType-suffixes" id="dom-mimetype-suffixes"><code>suffixes</code></dfn> attributes must return
  user-agent-defined (or, in all likelihood, <a href="infrastructure.html#plugin">plugin</a>-defined) strings. In each case, the
  same string must be returned each time, except that the strings returned may change when the <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">PluginArray.refresh()</a></code> method updates the object.</p>

  <p class="warning">If the values returned by the <code data-anolis-xref="dom-MimeType-description"><a href="#dom-mimetype-description">description</a></code> or <code data-anolis-xref="dom-MimeType-suffixes"><a href="#dom-mimetype-suffixes">suffxies</a></code> attributes vary between versions of a
  <a href="infrastructure.html#plugin">plugin</a>, they can be used both as a fingerprinting vector and, even more importantly,
  as a trivial way to determine what security vulnerabilities a <a href="infrastructure.html#plugin">plugin</a> (and thus a
  browser) may have. It is thus highly recommended that the <code data-anolis-xref="dom-MimeType-description"><a href="#dom-mimetype-description">description</a></code> attribute just return the same value as the
  <code data-anolis-xref="dom-MimeType-type"><a href="#dom-mimetype-type">type</a></code> attribute, and that the <code data-anolis-xref="dom-MimeType-suffixes"><a href="#dom-mimetype-suffixes">suffixes</a></code> attribute return the empty string.
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  <p class="note">Commas in the <code data-anolis-xref="dom-MimeType-suffixes"><a href="#dom-mimetype-suffixes">suffixes</a></code> attribute are
  interpreted as separating subsequent filename extensions, as in "<code data-anolis-xref="">htm,html</code>".</p>

  <p>The <dfn data-anolis-xref="dom-MimeType-enabledPlugin" id="dom-mimetype-enabledplugin"><code>enabledPlugin</code></dfn> attribute must
  return the <code data-anolis-xref="dom-Plugin"><a href="#dom-plugin">Plugin</a></code> object that represents the <a href="infrastructure.html#plugin">plugin</a>
  that <a href="#explicitly-supported">explicitly supported</a> the <a href="infrastructure.html#mime-type">MIME type</a> that this <code><a href="#mimetype">MimeType</a></code>
  object represents when this object was last created or updated by <code data-anolis-xref="dom-PluginArray-refresh"><a href="#dom-pluginarray-refresh">PluginArray.refresh()</a></code>, whichever happened most
  recently.</p>

  <hr><p>The <dfn data-anolis-xref="dom-navigator-javaEnabled" id="dom-navigator-javaenabled"><code>navigator.javaEnabled</code></dfn> attribute
  must return true if the user agent supports a <a href="infrastructure.html#plugin">plugin</a> that supports the <a href="infrastructure.html#mime-type">MIME
  type</a> "<code data-anolis-xref="">application/x-java-vm</code>".
  <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
  </p>

  </div>



  <h4 id="the-external-interface"><span class="secno">6.6.2</span> <code><a href="#external">History</a></code>インターフェース</h4>

  <div class="impl">

  <p>The <dfn data-anolis-xref="dom-external" id="dom-external"><code>external</code></dfn> attribute of the <code><a href="browsers.html#window">Window</a></code>
  interface must return an instance of the <code><a href="#external">External</a></code> interface. The same object must be
  returned each time.</p>

  </div>

  <pre class="idl">interface <dfn id="external">External</dfn> {
  void <a data-anolis-xref="dom-external-AddSearchProvider" href="#dom-external-addsearchprovider">AddSearchProvider</a>(DOMString engineURL);
  unsigned long <a data-anolis-xref="dom-external-IsSearchProviderInstalled" href="#dom-external-issearchproviderinstalled">IsSearchProviderInstalled</a>(DOMString engineURL);
};</pre>

  <dl class="domintro"><dt><var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-external"><a href="#dom-external">external</a></code> . <code data-anolis-xref="dom-external-AddSearchProvider"><a href="#dom-external-addsearchprovider">AddSearchProvider</a></code>( <var data-anolis-xref="">url</var> )</dt>
   <dd>

    <p><var data-anolis-xref="">url</var>でOpenSearch記述文書によって記述される検索エンジンを追加する。<a href="references.html#refsOPENSEARCH">[OPENSEARCH]</a></p>

    <p>OpenSearch記述文書は、このメソッドを呼び出すスクリプトと同じサーバー上に存在する必要がある。</p>

   </dd>

   <dt><var data-anolis-xref="">installed</var> = <var data-anolis-xref="">window</var> . <code data-anolis-xref="dom-external"><a href="#dom-external">external</a></code> . <code data-anolis-xref="dom-external-IsSearchProviderInstalled"><a href="#dom-external-issearchproviderinstalled">IsSearchProviderInstalled</a></code>( <var data-anolis-xref="">url</var> )</dt>
   <dd>

    <p>インストールされている検索エンジンの結果ページのURLと<var data-anolis-xref="">url</var>との比較に基づく値を返す。</p>

    <dl><dt>0 <dd>インストールされている検索エンジンのいずれも<var data-anolis-xref="">url</var>と一致しない。
     <dt>1 <dd>1つ以上のインストールされている検索エンジンが<var data-anolis-xref="">url</var>と一致するが、いずれもユーザーのデフォルト検索エンジンでない。
     <dt>2 <dd>ユーザーのデフォルトの検索エンジンは<var data-anolis-xref="">url</var>にマッチする。
    </dl><p><var data-anolis-xref="">url</var>は接頭語一致を使用してインストールされている検索エンジンの結果ページのURLと比較される。このメソッドがチェックされて呼び出すスクリプトと同じドメイン上のページのみをもたらす。</p>

   </dd>

  </dl><p class="note">OpenSearch記述文書を使用する検索エンジンを公開するための別の方法は、<code data-anolis-xref="rel-search"><a href="links.html#link-type-search">search</a></code>リンクタイプをもつ<code><a href="document-metadata.html#the-link-element">link</a></code>要素を使用することである。</p>

  <div class="impl">

   <p>The <dfn data-anolis-xref="dom-external-AddSearchProvider" id="dom-external-addsearchprovider"><code>AddSearchProvider()</code></dfn> method,
   when invoked, must run the following steps:</p>

   <ol><li><p>Optionally, abort these steps. User agents may implement the method as a stub method that
    never does anything, or may arbitrarily ignore invocations with particular arguments for
    security, privacy, or usability reasons.</li>

<!--CLEANUP-->
    <li><p><a data-anolis-xref="resolve a url" href="infrastructure.html#resolve-a-url">Resolve</a> the value of the method's first argument
    relative to the <a href="#api-base-url">API base URL</a> specified by the <a href="#entry-settings-object">entry settings object</a>.</li>

    <li><p>If this fails, abort these steps.</li>

    <li><p>Process the resulting <a href="infrastructure.html#absolute-url">absolute URL</a> as the <span>URL</span> to an OpenSearch
    description document. <a href="references.html#refsOPENSEARCH">[OPENSEARCH]</a></li>

   </ol><p>The <dfn data-anolis-xref="dom-external-IsSearchProviderInstalled" id="dom-external-issearchproviderinstalled"><code>IsSearchProviderInstalled()</code></dfn>
   method, when invoked, must run the following steps:
   <a class="fingerprint" data-anolis-xref="fingerprinting vector" href="introduction.html#fingerprinting-vector"><img alt="(This is a fingerprinting vector.)" height="21" src="images/fingerprint.png" width="15"></a>
   </p>

   <ol><li><p>Optionally, return 0 and abort these steps. User agents may implement the method as a
    stub method that never returns a non-zero value, or may arbitrarily ignore invocations with
    particular arguments for security, privacy, or usability reasons.</li>

<!--CLEANUP-->
    <li><p>If the <a href="browsers.html#origin-0">origin</a> specified by the <a href="#entry-settings-object">entry settings object</a> is an opaque identifier (i.e.
    it has no host component), then return 0 and abort these steps.</li>

<!--CLEANUP-->
    <li><p>Let <var data-anolis-xref="">host1</var> be the host component of the <a href="browsers.html#origin-0">origin</a> specified by the
    <a href="#entry-settings-object">entry settings object</a>.</li>

<!--CLEANUP-->
    <li><p><a data-anolis-xref="resolve a url" href="infrastructure.html#resolve-a-url">Resolve</a> the <var data-anolis-xref="">scriptURL</var> argument
    relative to the <a href="#api-base-url">API base URL</a> specified by the <a href="#entry-settings-object">entry settings
    object</a>.</li>

    <li><p>If this fails, return 0 and abort these steps.</li>

    <li><p>Let <var data-anolis-xref="">host2</var> be the <a data-anolis-xref="concept-url-host" href="infrastructure.html#concept-url-host">host</a> component
    of the resulting <a href="infrastructure.html#parsed-url">parsed URL</a>.</li>

    <li>

     <p>If the longest suffix in the Public Suffix List that matches the end of <var data-anolis-xref="">host1</var> is different than the longest suffix in the Public Suffix List that
     matches the end of <var data-anolis-xref="">host2</var>, then return 0 and abort these steps. <a href="references.html#refsPSL">[PSL]</a></p>

     <p>If the next domain component of <var data-anolis-xref="">host1</var> and <var data-anolis-xref="">host2</var>
     after their common suffix are not the same, then return 0 and abort these steps.</p>

     <!-- host1 is ascii here because origins are ascii. host2 is ascii because resolve urls
     punycodes idna. -->

    </li>

    <li><p>Let <var data-anolis-xref="">search engines</var> be the list of search engines known by the user
    agent and made available to the user by the user agent for which the resulting <a href="infrastructure.html#absolute-url">absolute
    URL</a> is a <a href="infrastructure.html#prefix-match">prefix match</a> of the search engine's <span>URL</span>, if any. For
    search engines registered using OpenSearch description documents, the <span>URL</span> of the
    search engine corresponds to the URL given in a <code data-anolis-xref="">Url</code> element whose <code data-anolis-xref="">rel</code> attribute is "<code data-anolis-xref="">results</code>" (the default). <a href="references.html#refsOPENSEARCH">[OPENSEARCH]</a></li>

    <li><p>If <var data-anolis-xref="">search engines</var> is empty, return 0 and abort these steps.</li>

    <li><p>If the user's default search engine (as determined by the user agent) is one of the
    search engines in <var data-anolis-xref="">search engines</var>, then return 2 and abort these
    steps.</li>

    <li><p>Return 1.</li>

   </ol></div><!--TOPIC:HTML-->




  </body></html>