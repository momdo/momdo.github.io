<!DOCTYPE html><html class=split lang=ja>
<script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport>
<title>HTML Standard 日本語訳</title><meta content=#3c790a name=theme-color><link rel=stylesheet href=https://resources.whatwg.org/standard.css><link rel=icon href=https://resources.whatwg.org/logo.svg>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script>
<style>
   .status { min-height: 0.6em; font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status:hover { z-index: 9; }
   .status:focus-within { z-index: 9; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; left: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > p > strong { margin-left: 1.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span.no::before { opacity: 0.5; }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mini.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .support > .samsung::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.png); }
   .status > .caniuse { text-align: right; font-style: italic; width: 100%; }
   .status > .caniuse + p { margin-top: 0.5em; border-top: 1px solid silver; }

   @media (max-width: 767px) {
     .status { right: -9em; }
   }
  </style>
<style>
   [hidden] { display: none; }

   .bad, .bad *:not(.X\58X) { color: gray; border-color: gray; background: transparent; }

   .fingerprint { position: absolute; right: 0; z-index: 5; }
   @media (max-width: 767px) {
     .fingerprint { max-width: 35px; }
   }

   .applies .yes, .yesno .yes { background: yellow; }
   .yesno .yes, .yesno .no { text-align: center; }

   .applies thead th > * { display: block; }
   .applies thead code { display: block; }
   .applies td { text-align: center; }

   .matrix, .matrix td { border: hidden; text-align: right; }
   .matrix { margin-left: 2em; }

   .vertical-summary-table tr > th[rowspan="2"]:first-child + th,
   .vertical-summary-table tr > td[rowspan="2"]:first-child + td { border-bottom: hidden; }

   .dice-example { border-collapse: collapse; border-style: hidden solid solid hidden; border-width: thin; margin-left: 3em; }
   .dice-example caption { width: 30em; font-size: smaller; font-style: italic; padding: 0.75em 0; text-align: left; }
   .dice-example td, .dice-example th { border: solid thin; width: 1.35em; height: 1.05em; text-align: center; padding: 0; }

   td.eg { border-width: thin; text-align: center; }

   #table-example-1 { border: solid thin; border-collapse: collapse; margin-left: 3em; }
   #table-example-1 caption { padding-bottom: 0.5em; }
   #table-example-1 thead, #table-example-1 tbody { border: none; }
   #table-example-1 th, #table-example-1 td { border: solid thin; }
   #table-example-1 th { font-weight: normal; }
   #table-example-1 td { border-style: none solid; vertical-align: top; }
   #table-example-1 th { padding: 0.5em; vertical-align: middle; text-align: center; }
   #table-example-1 tbody tr:first-child td { padding-top: 0.5em; }
   #table-example-1 tbody tr:last-child td { padding-bottom: 1.5em; }
   #table-example-1 tbody td:first-child { padding-left: 2.5em; padding-right: 0; width: 9em; }
   #table-example-1 tbody td:first-child::after { content: leader(". "); }
   #table-example-1 tbody td { padding-left: 2em; padding-right: 2em; }
   #table-example-1 tbody td:first-child + td { width: 10em; }
   #table-example-1 tbody td:first-child + td ~ td { width: 2.5em; }
   #table-example-1 tbody td:first-child + td + td + td ~ td { width: 1.25em; }

   .apple-table-examples { border: none; border-collapse: separate; border-spacing: 1.5em 0em; width: 40em; margin-left: 3em; }
   .apple-table-examples * { font-family: "Times", serif; }
   .apple-table-examples td, .apple-table-examples th { border: none; white-space: nowrap; padding-top: 0; padding-bottom: 0; }
   .apple-table-examples tbody th:first-child { border-left: none; width: 100%; }
   .apple-table-examples thead th:first-child ~ th { font-size: smaller; font-weight: bolder; border-bottom: solid 2px; text-align: center; }
   .apple-table-examples tbody th::after, .apple-table-examples tfoot th::after { content: leader(". ") }
   .apple-table-examples tbody th, .apple-table-examples tfoot th { font: inherit; text-align: left; }
   .apple-table-examples td { text-align: right; vertical-align: top; }
   .apple-table-examples.e1 tbody tr:last-child td { border-bottom: solid 1px; }
   .apple-table-examples.e1 tbody + tbody tr:last-child td { border-bottom: double 3px; }
   .apple-table-examples.e2 th[scope=row] { padding-left: 1em; }
   .apple-table-examples sup { line-height: 0; }

   .three-column-nowrap tr > td:first-child,
   .three-column-nowrap tr > td:first-child + td,
   .three-column-nowrap tr > td:first-child + td + td { white-space: nowrap; }

   .details-example img { vertical-align: top; }

   .parse-error-table td > p:first-child { margin-top: 0; }

   #named-character-references-table {
     white-space: nowrap;
     font-size: 0.6em;
     column-width: 30em;
     column-gap: 1em;
     -moz-column-width: 30em;
     -moz-column-gap: 1em;
     -webkit-column-width: 30em;
     -webkit-column-gap: 1em;
   }
   #named-character-references-table > table > tbody > tr > td:first-child + td,
   #named-character-references-table > table > tbody > tr > td:last-child { text-align: center; }
   #named-character-references-table > table > tbody > tr > td:last-child:hover > span { position: absolute; top: auto; left: auto; margin-left: 0.5em; line-height: 1.2; font-size: 5em; border: outset; padding: 0.25em 0.5em; background: white; width: 1.25em; height: auto; text-align: center; }
   #named-character-references-table > table > tbody > tr#entity-CounterClockwiseContourIntegral > td:first-child { font-size: 0.5em; }

   .glyph.control { color: red; }

   #table-example-1 * { font-family: "Essays1743", serif; line-height: 1.01em; }
   @font-face {
     font-family: 'Essays1743';
     src: url('/fonts/Essays1743.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-weight: bold;
     src: url('/fonts/Essays1743-Bold.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     src: url('/fonts/Essays1743-Italic.ttf');
   }
   @font-face {
     font-family: 'Essays1743';
     font-style: italic;
     font-weight: bold;
     src: url('/fonts/Essays1743-BoldItalic.ttf');
   }

   @media (max-width: 767px) {
     #abstractimg { width: 100%; }
   }
   #abstractimg, #abstractimg text { font: inherit; }
   #abstractimg rect { fill: #424242; }
   #abstractimg text { fill: #ffffff; font-size: 18px }
   #abstractimg .top { word-spacing: 50px; text-anchor: middle; }
   #abstractimg .left, #abstractimg .bottom { word-spacing: 12px; }
   #abstractimg .right { font-size: 25px; }
  </style>
<body>
  
  <script async="" src=/html-dfn.js></script>
  <script data-file-issue-url=https://github.com/whatwg/html/issues/new src=https://resources.whatwg.org/file-issue.js async=""></script>
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   <hgroup><h1 class=allcaps>HTML</h1><h2 id=living-standard class="no-num no-toc">Living Standard — Last Updated <span class=pubdate>16 April 2018</span></h2></hgroup>
   
   

   
  </header>

  

  
  

  
  

  

  <nav><a href=iframe-embed-object.html>← 4.8.5 iframe要素</a> — <a href=./>目次</a> — <a href=image-maps.html>4.8.13 map要素 →</a></nav><ol class=toc><li id=toc-semantics><ol><li><ol><li><a href=media.html#the-video-element><span class=secno>4.8.9</span> <code>video</code>要素</a></li><li><a href=media.html#the-audio-element><span class=secno>4.8.10</span> <code>audio</code>要素</a></li><li><a href=media.html#the-track-element><span class=secno>4.8.11</span> <code>track</code>要素</a></li><li><a href=media.html#media-elements><span class=secno>4.8.12</span> メディア要素</a><ol><li><a href=media.html#error-codes><span class=secno>4.8.12.1</span> エラーコード</a></li><li><a href=media.html#location-of-the-media-resource><span class=secno>4.8.10.2</span> メディアリソースの場所</a></li><li><a href=media.html#mime-types><span class=secno>4.8.12.3</span> MIMEタイプ</a></li><li><a href=media.html#network-states><span class=secno>4.8.12.4</span> ネットワーク状態</a></li><li><a href=media.html#loading-the-media-resource><span class=secno>4.8.12.5</span> メディアリソースの読み込み</a></li><li><a href=media.html#offsets-into-the-media-resource><span class=secno>4.8.12.6</span> メディアリソースからのオフセット</a></li><li><a href=media.html#ready-states><span class=secno>4.8.12.7</span> 準備状態</a></li><li><a href=media.html#playing-the-media-resource><span class=secno>4.8.12.8</span> メディアリソースの再生</a></li><li><a href=media.html#seeking><span class=secno>4.8.12.9</span> シーク</a></li><li><a href=media.html#media-resources-with-multiple-media-tracks><span class=secno>4.8.12.10</span> 複数のメディアトラックを伴うメディアリソース</a><ol><li><a href=media.html#audiotracklist-and-videotracklist-objects><span class=secno>4.8.12.10.1</span> <code>AudioTrackList</code>および<code>VideoTrackList</code>オブジェクト</a></li><li><a href=media.html#selecting-specific-audio-and-video-tracks-declaratively><span class=secno>4.8.12.10.2</span> 宣言的に特定のオーディオとビデオトラックを選択する</a></li></ol></li><li><a href=media.html#timed-text-tracks><span class=secno>4.8.12.11</span> 時限テキストトラック</a><ol><li><a href=media.html#text-track-model><span class=secno>4.8.12.11.1</span> テキストトラックモデル</a></li><li><a href=media.html#sourcing-in-band-text-tracks><span class=secno>4.8.12.11.2</span> 帯域内テキストトラックの情報源</a></li><li><a href=media.html#sourcing-out-of-band-text-tracks><span class=secno>4.8.12.11.3</span> Sourcing out-of-band text tracks</a></li><li><a href=media.html#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues><span class=secno>4.8.12.11.4</span> Guidelines for exposing cues in various formats as text track cues</a></li><li><a href=media.html#text-track-api><span class=secno>4.8.12.11.5</span> テキストトラックAPI</a></li><li><a href=media.html#cue-events><span class=secno>4.8.12.11.6</span> Event handlers for objects of the text track APIs</a></li><li><a href=media.html#best-practices-for-metadata-text-tracks><span class=secno>4.8.12.11.7</span> Best practices for metadata text tracks</a></li></ol></li><li><a href=media.html#identifying-a-track-kind-through-a-url><span class=secno>4.8.12.12</span> URLを通してトラックの種類を識別する</a></li><li><a href=media.html#user-interface><span class=secno>4.8.12.13</span> ユーザーインターフェイス</a></li><li><a href=media.html#time-ranges><span class=secno>4.8.12.14</span> 時間範囲</a></li><li><a href=media.html#the-trackevent-interface><span class=secno>4.8.12.15</span> <code>TrackEvent</code>インターフェイス</a></li><li><a href=media.html#mediaevents><span class=secno>4.8.12.16</span> Events summary</a></li><li><a href=media.html#security-and-privacy-considerations><span class=secno>4.8.12.17</span> Security and privacy considerations</a></li><li><a href=media.html#best-practices-for-authors-using-media-elements><span class=secno>4.8.12.18</span> メディア要素を使用する著者に対するベストプラクティス</a></li><li><a href=media.html#best-practices-for-implementers-of-media-elements><span class=secno>4.8.12.19</span> Best practices for implementers of media elements</a></li></ol></li></ol></li></ol></li></ol><h4 id=the-video-element><span class=secno>4.8.9</span> <dfn id=video><code>video</code></dfn>要素<a href=#the-video-element class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> video<span class="and_chr yes"><span>Chrome for Android</span> <span>64+</span></span><span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>3.2+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.8+</span></span><span class="firefox yes"><span>Firefox</span> <span>20+</span></span><span class="ie yes"><span>IE</span> <span>9+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="safari yes"><span>Safari</span> <span>4+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>2.3+</span></span><span class="opera yes"><span>Opera</span> <span>10.5+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=video">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-video-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-video-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-video-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-video-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd>要素が<code id=the-video-element:attr-media-controls><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-video-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd><a id=the-video-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-video-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-video-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-video-element:concept-element-content-model>コンテンツモデル</a>：<dd>要素が<code id=the-video-element:attr-media-src><a href=#attr-media-src>src</a></code>属性を持つ場合：0個以上の<code id=the-video-element:the-track-element><a href=#the-track-element>track</a></code>要素で、次に<a id=the-video-element:transparent href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-video-element:media-element>media要素</a>子孫をもたない。<dd>要素が<code id=the-video-element:attr-media-src-2><a href=#attr-media-src>src</a></code>属性を持たない場合：0個以上の<code id=the-video-element:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>要素で、次に0個以上の<code id=the-video-element:the-track-element-2><a href=#the-track-element>track</a></code>で、次に<a id=the-video-element:transparent-2 href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-video-element:media-element-2>media要素</a>子孫をもたない。<dt><a href=dom.html#concept-element-tag-omission id=the-video-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-video-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-video-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-video-element:attr-media-src-3><a href=#attr-media-src>src</a></code> — リソースのアドレス<dd><code id=the-video-element:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-video-element:attr-video-poster><a href=#attr-video-poster>poster</a></code> — 先にビデオプレイバックを見せるポスターフレーム<dd><code id=the-video-element:attr-media-preload><a href=#attr-media-preload>preload</a></code> — <a href=#media-resource id=the-video-element:media-resource>メディアリソース</a>がどの程度バッファリングに必要になるかのヒント<dd><code id=the-video-element:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> — ページが読み込まれる際に<a href=#media-resource id=the-video-element:media-resource-2>メディアリソース</a>が自動的に開始可能というヒント<dd><code id=the-video-element:attr-video-playsinline><a href=#attr-video-playsinline>playsinline</a></code> — 要素の再生領域内のビデオコンテンツを表示することをユーザーエージェントに勧める<dd><code id=the-video-element:attr-media-loop><a href=#attr-media-loop>loop</a></code> — <a href=#media-resource id=the-video-element:media-resource-3>メディアリソース</a>をループするかどうか<dd><code id=the-video-element:attr-media-muted><a href=#attr-media-muted>muted</a></code> — デフォルトで<a href=#media-resource id=the-video-element:media-resource-4>メディアリソース</a>をミュートするかどうか<dd><code id=the-video-element:attr-media-controls-2><a href=#attr-media-controls>controls</a></code> — ユーザーエージェントのコントロールを表示する<dd><code id=the-video-element:attr-dim-width><a href=embedded-content-other.html#attr-dim-width>width</a></code> — 横の次元<dd><code id=the-video-element:attr-dim-height><a href=embedded-content-other.html#attr-dim-height>height</a></code> — 縦の次元<dt><a href=dom.html#concept-element-dom id=the-video-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-video-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmlvideoelement>HTMLVideoElement</dfn> : <a href=#htmlmediaelement id=the-video-element:htmlmediaelement>HTMLMediaElement</a> {
  [<a id=the-video-element:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute unsigned long <a href=embedded-content-other.html#dom-dim-width id=the-video-element:dom-dim-width>width</a>;
  [<a id=the-video-element:cereactions-2 href=custom-elements.html#cereactions>CEReactions</a>] attribute unsigned long <a href=embedded-content-other.html#dom-dim-height id=the-video-element:dom-dim-height>height</a>;
  readonly attribute unsigned long <a href=#dom-video-videowidth id=the-video-element:dom-video-videowidth>videoWidth</a>;
  readonly attribute unsigned long <a href=#dom-video-videoheight id=the-video-element:dom-video-videoheight>videoHeight</a>;
  [<a id=the-video-element:cereactions-3 href=custom-elements.html#cereactions>CEReactions</a>] attribute USVString <a href=#dom-video-poster id=the-video-element:dom-video-poster>poster</a>;
  [<a id=the-video-element:cereactions-4 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-video-playsinline id=the-video-element:dom-video-playsinline>playsInline</a>;
};</pre>
   </dl>

  <p><code id=the-video-element:the-video-element><a href=#the-video-element>video</a></code>要素は字幕付きのビデオやムービー、オーディオファイルを再生するために使用される。</p>

  <p>コンテンツは、<code id=the-video-element:the-video-element-2><a href=#the-video-element>video</a></code>要素の内部に提供されてもよい。ユーザーエージェントはユーザーにこのコンテンツを表示すべきでない。レガシービデオプラグインが試す、またはビデオコンテンツにアクセスする方法について、これらのより古いブラウザーのユーザーにテキストを表示できるよう、<code id=the-video-element:the-video-element-3><a href=#the-video-element>video</a></code>をサポートしない、より古いウェブブラウザーを対象とする。</p>

  <p class=note>特に、このコンテンツはアクセシビリティーの懸念に対処するためのものではない。弱視、目の見えない、難聴、耳が聞こえない、および他の身体または認知障害を持つ人々へのビデオコンテンツにアクセシブルにするための、さまざまな機能が利用可能である。字幕は、ビデオストリームの埋め込みまたは<code id=the-video-element:the-track-element-3><a href=#the-track-element>track</a></code>要素を使用する外部ファイルとしてのいずれかを提供できる。手話トラックは、ビデオストリームに埋め込むことができる。オーディオ説明は、<code id=the-video-element:the-track-element-4><a href=#the-track-element>track</a></code>要素を使用して参照され、ユーザーエージェントによって音声に合成される<a id=the-video-element:webvtt-file href=https://w3c.github.io/webvtt/#webvtt-file data-x-internal=webvtt-file>WebVTTファイル</a>を使用してビデオストリームにまたはテキスト形式で埋め込むことができる。WebVTTはまた、章のタイトルを提供するために使用することができる。むしろ一切メディア要素を使用しないだろうユーザーの場合、複写物またはその他のテキストの選択肢は単に<code id=the-video-element:the-video-element-4><a href=#the-video-element>video</a></code>要素の近くに文でそれらにリンクすることによって提供されうる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><code id=the-video-element:the-video-element-5><a href=#the-video-element>video</a></code>要素は<a href=#media-element id=the-video-element:media-element-3>media要素</a>であり、その<a href=#media-data id=the-video-element:media-data>メディアデータ</a>がおそらく関連する音声データをもつ、表面上は映像データである。</p>

  <p><code id=the-video-element:attr-media-src-4><a href=#attr-media-src>src</a></code>、<code id=the-video-element:attr-media-preload-2><a href=#attr-media-preload>preload</a></code>、<code id=the-video-element:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>、<code id=the-video-element:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>、<code id=the-video-element:attr-media-muted-2><a href=#attr-media-muted>muted</a></code>、および<code id=the-video-element:attr-media-controls-3><a href=#attr-media-controls>controls</a></code>属性は、<a href=#media-element-attributes id=the-video-element:media-element-attributes>すべてのメディア要素に共通の属性</a>である。</p>

  <p><dfn id=attr-video-poster><code>poster</code></dfn>属性はビデオデータが利用可能でない間に、ユーザーエージェントが表示できる画像ファイルの<a id=the-video-element:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を与える。属性が存在する場合、<a id=the-video-element:valid-non-empty-url-potentially-surrounded-by-spaces href=urls-and-fetching.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含まなければならない。</p>

  

  <p>If the specified resource is to be used, then, when the element is created or when the <code id=the-video-element:attr-video-poster-2><a href=#attr-video-poster>poster</a></code> attribute is set, changed, or removed, the user agent must
  run the following steps to determine the element's <dfn id=poster-frame>poster frame</dfn> (regardless of the
  value of the element's <a href=#show-poster-flag id=the-video-element:show-poster-flag>show poster flag</a>):</p> 

  <ol><li><p>If there is an existing instance of this algorithm running for this <code id=the-video-element:the-video-element-6><a href=#the-video-element>video</a></code>
   element, abort that instance of this algorithm without changing the <a href=#poster-frame id=the-video-element:poster-frame>poster
   frame</a>.</li><li><p>If the <code id=the-video-element:attr-video-poster-3><a href=#attr-video-poster>poster</a></code> attribute's value is the empty string
   or if the attribute is absent, then there is no <a href=#poster-frame id=the-video-element:poster-frame-2>poster frame</a>; return.</li><li><p><a href=urls-and-fetching.html#parse-a-url id=the-video-element:parse-a-url>Parse</a> the <code id=the-video-element:attr-video-poster-4><a href=#attr-video-poster>poster</a></code> attribute's value relative to the element's <a id=the-video-element:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node
   document</a>. If this fails, then there is no <a href=#poster-frame id=the-video-element:poster-frame-3>poster frame</a>; return.</li><li><p>Let <var>request</var> be a new <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request id=the-video-element:concept-request data-x-internal=concept-request>request</a> whose
   <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-url id=the-video-element:concept-request-url data-x-internal=concept-request-url>url</a> is the <a id=the-video-element:resulting-url-record href=urls-and-fetching.html#resulting-url-record>resulting URL record</a>,
   <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-client id=the-video-element:concept-request-client data-x-internal=concept-request-client>client</a> is the element's <a id=the-video-element:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s
   <code id=the-video-element:window><a href=window-object.html#window>Window</a></code> object's <a id=the-video-element:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>, <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-destination id=the-video-element:concept-request-destination data-x-internal=concept-request-destination>destination</a> is "<code>image</code>",
   <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode id=the-video-element:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> is "<code>include</code>", and whose <a id=the-video-element:use-url-credentials-flag href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials flag</a> is set.

   

   </li><li><p><a href=https://triple-underscore.github.io/Fetch-ja.html#concept-fetch id=the-video-element:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>. This must
   <a id=the-video-element:delay-the-load-event href=parsing.html#delay-the-load-event>delay the load event</a> of the element's <a id=the-video-element:node-document-3 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>.</li><li><p>If an image is thus obtained, the <a href=#poster-frame id=the-video-element:poster-frame-4>poster frame</a> is that image. Otherwise,
   there is no <a href=#poster-frame id=the-video-element:poster-frame-5>poster frame</a>.</li></ol>

  

  <p class=note><code id=the-video-element:attr-video-poster-5><a href=#attr-video-poster>poster</a></code>属性によって与えられた画像、<i id=the-video-element:poster-frame-6><a href=#poster-frame>poster frame</a></i>は、ユーザーに映像がどのようなものであるかのテーマを与える映像の代表フレーム（通常は最初の空白でないフレームの1つ）であることを意図する。</p>


  <p><dfn id=attr-video-playsinline><code>playsinline</code></dfn>属性は、<a id=the-video-element:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>である。存在する場合、この属性は、代わりにフルスクリーン表示されているまたは独立したサイズ変更可能なウィンドウで、要素の再生領域が制限される、映像がデフォルトで文書で"インライン"に表示されるべきユーザーエージェントへのヒントとして提供する。</p>

  <p class=note><code id=the-video-element:attr-video-playsinline-2><a href=#attr-video-playsinline>playsinline</a></code>属性の不在は、映像がデフォルトでフルスクリーンに表示されることを意味するものではない。実際、ほとんどのユーザエージェントは、デフォルトですべてのビデオインラインを再生することを選択し、そのようなユーザーエージェントで<code id=the-video-element:attr-video-playsinline-3><a href=#attr-video-playsinline>playsinline</a></code>属性は効果がない。</p>

  

  <hr>

  <p>A <code id=the-video-element:the-video-element-7><a href=#the-video-element>video</a></code> element represents what is given for the first matching condition in the
  list below:</p>

  <dl class=switch><dt>When no video data is available (the element's <code id=the-video-element:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=the-video-element:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, or <code id=the-video-element:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> but no video data has yet been obtained at
   all, or the element's <code id=the-video-element:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute is any
   subsequent value but the <a href=#media-resource id=the-video-element:media-resource-5>media resource</a> does not have a video channel)<dd>The <code id=the-video-element:the-video-element-8><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents href=dom.html#represents>represents</a> its <a href=#poster-frame id=the-video-element:poster-frame-7>poster frame</a>, if any,
   or else <a id=the-video-element:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a> with no <a id=the-video-element:intrinsic-dimensions href=https://momdo.github.io/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a>.<dt>When the <code id=the-video-element:the-video-element-9><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused>paused</a>, the <a href=#current-playback-position id=the-video-element:current-playback-position>current playback position</a> is the first frame of video,
   and the element's <a href=#show-poster-flag id=the-video-element:show-poster-flag-2>show poster flag</a> is set<dd>The <code id=the-video-element:the-video-element-10><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-2 href=dom.html#represents>represents</a> its <a href=#poster-frame id=the-video-element:poster-frame-8>poster frame</a>, if any,
   or else the first frame of the video.<dt>When the <code id=the-video-element:the-video-element-11><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused-2>paused</a>, and the
   frame of video corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-2>current playback
   position</a> is not available (e.g. because the video is seeking or buffering)<dt>When the <code id=the-video-element:the-video-element-12><a href=#the-video-element>video</a></code> element is neither <a href=#potentially-playing id=the-video-element:potentially-playing>potentially playing</a> nor <a href=#dom-media-paused id=the-video-element:dom-media-paused-3>paused</a> (e.g. when seeking or stalled)<dd>The <code id=the-video-element:the-video-element-13><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-3 href=dom.html#represents>represents</a> the last frame of the video to have
   been rendered.<dt>When the <code id=the-video-element:the-video-element-14><a href=#the-video-element>video</a></code> element is <a href=#dom-media-paused id=the-video-element:dom-media-paused-4>paused</a><dd>The <code id=the-video-element:the-video-element-15><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-4 href=dom.html#represents>represents</a> the frame of video corresponding to
   the <a href=#current-playback-position id=the-video-element:current-playback-position-3>current playback position</a>.<dt>Otherwise (the <code id=the-video-element:the-video-element-16><a href=#the-video-element>video</a></code> element has a video channel and is <a href=#potentially-playing id=the-video-element:potentially-playing-2>potentially
   playing</a>)<dd>The <code id=the-video-element:the-video-element-17><a href=#the-video-element>video</a></code> element <a id=the-video-element:represents-5 href=dom.html#represents>represents</a> the frame of video at the continuously
   increasing <a href=#current-playback-position id=the-video-element:current-playback-position-4>"current" position</a>. When the
   <a href=#current-playback-position id=the-video-element:current-playback-position-5>current playback position</a> changes such that the last frame rendered is no longer the
   frame corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-6>current playback position</a> in the video, the new frame
   must be rendered.</dl>

  <p>Frames of video must be obtained from the video track that was <a href=#dom-videotrack-selected id=the-video-element:dom-videotrack-selected>selected</a> when the <a id=the-video-element:event-loop href=webappapis.html#event-loop>event loop</a> last reached
  <a href=webappapis.html#step1>step 1</a>.</p>

  <p class=note>Which frame in a video stream corresponds to a particular playback position is
  defined by the video stream's format.</p>

  <p>The <code id=the-video-element:the-video-element-18><a href=#the-video-element>video</a></code> element also <a id=the-video-element:represents-6 href=dom.html#represents>represents</a> any <a href=#text-track-cue id=the-video-element:text-track-cue>text track cues</a> whose <a href=#text-track-cue-active-flag id=the-video-element:text-track-cue-active-flag>text track cue active flag</a> is set and whose
  <a href=#text-track id=the-video-element:text-track>text track</a> is in the <a href=#text-track-showing id=the-video-element:text-track-showing>showing</a> mode, and any
  audio from the <a href=#media-resource id=the-video-element:media-resource-6>media resource</a>, at the <a href=#current-playback-position id=the-video-element:current-playback-position-7>current playback position</a>.</p>

  <p>Any audio associated with the <a href=#media-resource id=the-video-element:media-resource-7>media resource</a> must, if played, be played
  synchronized with the <a href=#current-playback-position id=the-video-element:current-playback-position-8>current playback position</a>, at the element's <a href=#effective-media-volume id=the-video-element:effective-media-volume>effective
  media volume</a>. The user agent must play the audio from audio tracks that were <a href=#dom-audiotrack-enabled id=the-video-element:dom-audiotrack-enabled>enabled</a> when the <a id=the-video-element:event-loop-2 href=webappapis.html#event-loop>event loop</a> last reached step
  1.</p>

  <p>In addition to the above, the user agent may provide messages to the user (such as "buffering",
  "no video loaded", "error", or more detailed information) by overlaying text or icons on the video
  or other areas of the element's playback area, or in another appropriate manner.</p>

  <p>User agents that cannot render the video may instead make the element <a href=dom.html#represents id=the-video-element:represents-7>represent</a> a link to an external video playback utility or to the video
  data itself.</p>

  <p>When a <code id=the-video-element:the-video-element-19><a href=#the-video-element>video</a></code> element's <a href=#media-resource id=the-video-element:media-resource-8>media resource</a> has a video channel, the
  element provides a <a id=the-video-element:paint-source href=https://drafts.csswg.org/css-images-4/#paint-source data-x-internal=paint-source>paint source</a> whose width is the <a href=#media-resource id=the-video-element:media-resource-9>media resource</a>'s
  <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width>intrinsic width</a>, whose height is the
  <a href=#media-resource id=the-video-element:media-resource-10>media resource</a>'s <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height>intrinsic
  height</a>, and whose appearance is the frame of video corresponding to the <a href=#current-playback-position id=the-video-element:current-playback-position-9>current playback position</a>, if that is available, or else
  (e.g. when the video is seeking or buffering) its previous appearance, if any, or else (e.g.
  because the video is still loading the first frame) blackness.</p>

  <hr>

  

  <dl class=domintro><dt><var>video</var> . <code id=dom-video-videowidth-dev><a href=#dom-video-videowidth>videoWidth</a></code><dt><var>video</var> . <code id=dom-video-videoheight-dev><a href=#dom-video-videoheight>videoHeight</a></code><dd>

    <p>これらの属性はビデオの内在次元を返し、次元が未知の場合に0を返す。</p>

   </dl>

  

  <p>The <dfn id=concept-video-intrinsic-width>intrinsic width</dfn> and <dfn id=concept-video-intrinsic-height>intrinsic height</dfn> of the <a href=#media-resource id=the-video-element:media-resource-11>media resource</a>
  are the dimensions of the resource in <a href=https://momdo.github.io/css3-values/#px id="the-video-element:'px'" data-x-internal="'px'">CSS pixels</a> after taking into
  account the resource's dimensions, aspect ratio, clean aperture, resolution, and so forth, as
  defined for the format used by the resource. If an anamorphic format does not define how to apply
  the aspect ratio to the video data's dimensions to obtain the "correct" dimensions, then the user
  agent must apply the ratio by increasing one dimension and leaving the other unchanged.</p>

  <p>The <dfn id=dom-video-videowidth><code>videoWidth</code></dfn> IDL attribute must return
  the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-2>intrinsic width</a> of the video in <a href=https://momdo.github.io/css3-values/#px id="the-video-element:'px'-2" data-x-internal="'px'">CSS pixels</a>. The <dfn id=dom-video-videoheight><code>videoHeight</code></dfn> IDL attribute must return the <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-2>intrinsic height</a> of the video in <a href=https://momdo.github.io/css3-values/#px id="the-video-element:'px'-3" data-x-internal="'px'">CSS pixels</a>. If the element's <code id=the-video-element:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=the-video-element:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then the attributes must return 0.</p>

  <p id=dimUpdate>Whenever the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-3>intrinsic width</a>
  or <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-3>intrinsic height</a> of the video changes
  (including, for example, because the <a href=#dom-videotrack-selected id=the-video-element:dom-videotrack-selected-2>selected video
  track</a> was changed), if the element's <code id=the-video-element:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code>
  attribute is not <code id=the-video-element:dom-media-have_nothing-3><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, the user agent must
  <a id=the-video-element:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=the-video-element:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=the-video-element:event-media-resize><a href=#event-media-resize>resize</a></code> at the <a href=#media-element id=the-video-element:media-element-4>media element</a>.</p>

  

  <p><code id=the-video-element:the-video-element-20><a href=#the-video-element>video</a></code>要素は、<a id=the-video-element:dimension-attributes href=embedded-content-other.html#dimension-attributes>次元属性</a>をサポートする。</p>

  

  <p>In the absence of style rules to the contrary, video content should be rendered inside the
  element's playback area such that the video content is shown centered in the playback area at the
  largest possible size that fits completely within it, with the video content's aspect ratio being
  preserved. Thus, if the aspect ratio of the playback area does not match the aspect ratio of the
  video, the video will be shown letterboxed or pillarboxed. Areas of the element's playback area
  that do not contain the video represent nothing.</p>

  <p class=note>In user agents that implement CSS, the above requirement can be implemented by
  using the <a href=rendering.html#video-object-fit>style rule suggested in the rendering section</a>.</p>

  <p>The <a id=the-video-element:intrinsic-width href=infrastructure.html#intrinsic-width>intrinsic width</a> of a <code id=the-video-element:the-video-element-21><a href=#the-video-element>video</a></code> element's playback area is the
  <a id=the-video-element:intrinsic-width-2 href=infrastructure.html#intrinsic-width>intrinsic width</a> of the <a href=#poster-frame id=the-video-element:poster-frame-9>poster frame</a>, if that is available and the
  element currently <a id=the-video-element:represents-8 href=dom.html#represents>represents</a> its poster frame; otherwise, it is the <a href=#concept-video-intrinsic-width id=the-video-element:concept-video-intrinsic-width-4>intrinsic width</a> of the video resource, if that is
  available; otherwise the <a id=the-video-element:intrinsic-width-3 href=infrastructure.html#intrinsic-width>intrinsic width</a> is missing.</p>

  <p>The <a id=the-video-element:intrinsic-height href=infrastructure.html#intrinsic-height>intrinsic height</a> of a <code id=the-video-element:the-video-element-22><a href=#the-video-element>video</a></code> element's playback area is the
  <a id=the-video-element:intrinsic-height-2 href=infrastructure.html#intrinsic-height>intrinsic height</a> of the <a href=#poster-frame id=the-video-element:poster-frame-10>poster frame</a>, if that is available and the
  element currently <a id=the-video-element:represents-9 href=dom.html#represents>represents</a> its poster frame; otherwise it is the <a href=#concept-video-intrinsic-height id=the-video-element:concept-video-intrinsic-height-4>intrinsic height</a> of the video resource, if that is
  available; otherwise the <a id=the-video-element:intrinsic-height-3 href=infrastructure.html#intrinsic-height>intrinsic height</a> is missing.</p>

  <p>The <a id=the-video-element:default-object-size href=https://triple-underscore.github.io/css-images-ja.html#default-object-size data-x-internal=default-object-size>default object size</a> is a width of 300 <a href=https://momdo.github.io/css3-values/#px id="the-video-element:'px'-4" data-x-internal="'px'">CSS pixels</a>
  and a height of 150 <a href=https://momdo.github.io/css3-values/#px id="the-video-element:'px'-5" data-x-internal="'px'">CSS pixels</a>. <a href=references.html#refsCSSIMAGES>[CSSIMAGES]</a></p>

  <p>A <code id=the-video-element:the-video-element-23><a href=#the-video-element>video</a></code> element is said to <dfn id=intersect-the-viewport>intersect the viewport</dfn> when it is
  <a id=the-video-element:being-rendered href=rendering.html#being-rendered>being rendered</a> and its associated CSS layout box intersects the
  <a id=the-video-element:viewport href=https://momdo.github.io/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>.</p>

  <hr>

  <p>User agents should provide controls to enable or disable the display of closed captions, audio
  description tracks, and other additional data associated with the video stream, though such
  features should, again, not interfere with the page's normal rendering.</p>

  <p>User agents may allow users to view the video content in manners more suitable to the user,
  such as fullscreen or in an independent resizable window. User agents may even trigger such a
  viewing mode by default upon playing a video, although they should not do so when the <code id=the-video-element:attr-video-playsinline-4><a href=#attr-video-playsinline>playsinline</a></code> attribute is specified. As with the other user
  interface features, controls to enable this should not interfere with the page's normal rendering
  unless the user agent is <a href=#expose-a-user-interface-to-the-user id=the-video-element:expose-a-user-interface-to-the-user>exposing a user
  interface</a>. In such an independent viewing mode, however, user agents may make full user
  interfaces visible, even if the <code id=the-video-element:attr-media-controls-4><a href=#attr-media-controls>controls</a></code> attribute is
  absent.</p>

  <p>User agents may allow video playback to affect system features that could interfere with the
  user's experience; for example, user agents could disable screensavers while video playback is in
  progress.</p>

  <hr>

  <p>The <dfn id=dom-video-poster><code>poster</code></dfn> IDL attribute must
  <a id=the-video-element:reflect href=common-dom-interfaces.html#reflect>reflect</a> the <code id=the-video-element:attr-video-poster-6><a href=#attr-video-poster>poster</a></code> content attribute.</p>

  <p>The <dfn id=dom-video-playsinline><code>playsInline</code></dfn> IDL attribute must
  <a id=the-video-element:reflect-2 href=common-dom-interfaces.html#reflect>reflect</a> the <code id=the-video-element:attr-video-playsinline-5><a href=#attr-video-playsinline>playsinline</a></code> content
  attribute.</p>

  

  <div class=example>

   <p>この例は、ビデオを正常に再生するために障害が発生したことを検出する様子を示す：</p>

   <pre>&lt;script&gt;
 function failed(e) {
   // video playback failed - show a message saying why
   switch (e.target.error.code) {
     case e.target.error.MEDIA_ERR_ABORTED:
       alert('You aborted the video playback.');
       break;
     case e.target.error.MEDIA_ERR_NETWORK:
       alert('A network error caused the video download to fail part-way.');
       break;
     case e.target.error.MEDIA_ERR_DECODE:
       alert('The video playback was aborted due to a corruption problem or because the video used features your browser did not support.');
       break;
     case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
       alert('The video could not be loaded, either because the server or network failed or because the format is not supported.');
       break;
     default:
       alert('An unknown error occurred.');
       break;
   }
 }
&lt;/script&gt;
&lt;p&gt;&lt;video src="tgif.vid" autoplay controls onerror="failed(event)"&gt;&lt;/video&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="tgif.vid"&gt;Download the video file&lt;/a&gt;.&lt;/p&gt;</pre>

  </div>




  





  <h4 id=the-audio-element><span class=secno>4.8.10</span> <dfn id=audio><code>audio</code></dfn>要素<a href=#the-audio-element class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> audio<span class="and_chr yes"><span>Chrome for Android</span> <span>64+</span></span><span class="chrome yes"><span>Chrome</span> <span>4+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>4.0+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.8+</span></span><span class="firefox yes"><span>Firefox</span> <span>20+</span></span><span class="ie yes"><span>IE</span> <span>9+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="safari yes"><span>Safari</span> <span>4+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android yes"><span>Android Browser</span> <span>2.3+</span></span><span class="opera yes"><span>Opera</span> <span>10.5+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=audio">caniuse.com</a></div>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-audio-element:concept-element-categories>カテゴリー</a>：<dd><a id=the-audio-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>。<dd><a id=the-audio-element:phrasing-content-2 href=dom.html#phrasing-content-2>フレージングコンテンツ</a>。<dd><a id=the-audio-element:embedded-content-category href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>。<dd>要素が<code id=the-audio-element:attr-media-controls><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-audio-element:interactive-content-2 href=dom.html#interactive-content-2>インタラクティブコンテンツ</a>。<dd>要素が<code id=the-audio-element:attr-media-controls-2><a href=#attr-media-controls>controls</a></code>属性を持つ場合：<a id=the-audio-element:palpable-content-2 href=dom.html#palpable-content-2>パルパブルコンテンツ</a>。<dt><a href=dom.html#concept-element-contexts id=the-audio-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd><a id=the-audio-element:embedded-content-category-2 href=dom.html#embedded-content-category>エンベディッドコンテンツ</a>が期待される場所。<dt><a href=dom.html#concept-element-content-model id=the-audio-element:concept-element-content-model>コンテンツモデル</a>：<dd>要素が<code id=the-audio-element:attr-media-src><a href=#attr-media-src>src</a></code>属性を持つ場合：0個以上の<code id=the-audio-element:the-track-element><a href=#the-track-element>track</a></code>要素で、次に<a id=the-audio-element:transparent href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-audio-element:media-element>media要素</a>子孫をもたない。<dd>要素が<code id=the-audio-element:attr-media-src-2><a href=#attr-media-src>src</a></code>属性を持たない場合：0個以上の<code id=the-audio-element:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>要素で、次に0個以上の<code id=the-audio-element:the-track-element-2><a href=#the-track-element>track</a></code>で、次に<a id=the-audio-element:transparent-2 href=dom.html#transparent>透過的</a>だが、<a href=#media-element id=the-audio-element:media-element-2>media要素</a>子孫をもたない。<dt><a href=dom.html#concept-element-tag-omission id=the-audio-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href=dom.html#concept-element-attributes id=the-audio-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-audio-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-audio-element:attr-media-src-3><a href=#attr-media-src>src</a></code> — リソースのアドレス<dd><code id=the-audio-element:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> — 要素がcrossorigin要求を処理する方法<dd><code id=the-audio-element:attr-media-preload><a href=#attr-media-preload>preload</a></code> — <a href=#media-resource id=the-audio-element:media-resource>メディアリソース</a>がどの程度バッファリングに必要になるかのヒント<dd><code id=the-audio-element:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> — ページが読み込まれる際に<a href=#media-resource id=the-audio-element:media-resource-2>メディアリソース</a>が自動的に開始可能というヒント<dd><code id=the-audio-element:attr-media-loop><a href=#attr-media-loop>loop</a></code> — <a href=#media-resource id=the-audio-element:media-resource-3>メディアリソース</a>をループするかどうか<dd><code id=the-audio-element:attr-media-muted><a href=#attr-media-muted>muted</a></code> — デフォルトで<a href=#media-resource id=the-audio-element:media-resource-4>メディアリソース</a>をミュートするかどうか<dd><code id=the-audio-element:attr-media-controls-3><a href=#attr-media-controls>controls</a></code> — ユーザーエージェントのコントロールを表示する<dt><a href=dom.html#concept-element-dom id=the-audio-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-audio-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>,
 NamedConstructor=<a href=#dom-audio id=the-audio-element:dom-audio>Audio</a>(optional DOMString src)]
interface <dfn id=htmlaudioelement>HTMLAudioElement</dfn> : <a href=#htmlmediaelement id=the-audio-element:htmlmediaelement>HTMLMediaElement</a> {};</pre>
   </dl>

  <p><code id=the-audio-element:the-audio-element><a href=#the-audio-element>audio</a></code>要素は、音やオーディオのストリームを<a id=the-audio-element:represents href=dom.html#represents>表す</a>。</p>

  

  <p>コンテンツは、<code id=the-audio-element:the-audio-element-2><a href=#the-audio-element>audio</a></code>要素の内部に提供されてもよい。ユーザーエージェントはユーザーにこのコンテンツを表示すべきでない。レガシー音声プラグインが試す、または音声コンテンツにアクセスする方法について、これらのより古いブラウザーのユーザーにテキストを表示できるよう、<code id=the-audio-element:the-audio-element-3><a href=#the-audio-element>audio</a></code>をサポートしない、より古いウェブブラウザーを対象とする。</p>

  <p class=note>特に、このコンテンツはアクセシビリティーの懸念に対処するためのものではない。聴覚障害、または他の身体または認知障害を持つ人々へのオーディオコンテンツにアクセシブルにするための、さまざまな機能が利用可能である。字幕や手話の映像が使用可能な場合、<code id=the-audio-element:the-video-element><a href=#the-video-element>video</a></code>要素は、ユーザーが視覚的な選択肢を有効にすることができ、オーディオを再生する<code id=the-audio-element:the-audio-element-4><a href=#the-audio-element>audio</a></code>要素の代わりに使用できる。章タイトルは、<code id=the-audio-element:the-track-element-3><a href=#the-track-element>track</a></code>要素と<a id=the-audio-element:webvtt-file href=https://w3c.github.io/webvtt/#webvtt-file data-x-internal=webvtt-file>WebVTTファイル</a>を使用して、ナビゲーションを補助するために提供できる。そして当然のことながら、複写物またはその他のテキストの選択肢は単に<code id=the-audio-element:the-audio-element-5><a href=#the-audio-element>audio</a></code>要素の近くに文でそれらにリンクすることによって提供されうる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><code id=the-audio-element:the-audio-element-6><a href=#the-audio-element>audio</a></code>要素は、<a href=#media-data id=the-audio-element:media-data>メディアデータ</a>が表面上は音声データである<a href=#media-element id=the-audio-element:media-element-3>media要素</a>である。</p>

  <p><code id=the-audio-element:attr-media-src-4><a href=#attr-media-src>src</a></code>、<code id=the-audio-element:attr-media-preload-2><a href=#attr-media-preload>preload</a></code>、<code id=the-audio-element:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>、<code id=the-audio-element:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>、<code id=the-audio-element:attr-media-muted-2><a href=#attr-media-muted>muted</a></code>、および<code id=the-audio-element:attr-media-controls-4><a href=#attr-media-controls>controls</a></code>属性は、<a href=#media-element-attributes id=the-audio-element:media-element-attributes>すべてのメディア要素に共通の属性</a>である。</p>

  <dl class=domintro><dt><var>audio</var> = new <code id=dom-audio-dev><a href=#dom-audio>Audio</a></code>( [ <var>url</var> ] )<dd>

    <p>該当する場合、引数で渡された値に設定する<code id=the-audio-element:attr-media-src-5><a href=#attr-media-src>src</a></code>属性とともに、新しい<code id=the-audio-element:the-audio-element-7><a href=#the-audio-element>audio</a></code>要素を返す。</p>

   </dl>

  

  <p>A constructor is provided for creating <code id=the-audio-element:htmlaudioelement><a href=#htmlaudioelement>HTMLAudioElement</a></code> objects (in addition to
  the factory methods from DOM such as <code id=the-audio-element:dom-document-createelement><a data-x-internal=dom-document-createelement href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelement>createElement()</a></code>):
  <dfn id=dom-audio><code>Audio(<var>src</var>)</code></dfn>. When invoked,
  the constructor must perform the following steps:</p>

  <ol><li><p>Let <var>document</var> be the <a id=the-audio-element:current-global-object href=webappapis.html#current-global-object>current global object</a>'s <a href=window-object.html#concept-document-window id=the-audio-element:concept-document-window>associated <code>Document</code></a>.</li><li><p>Let <var>audio</var> be the result of <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-create-element id=the-audio-element:create-an-element data-x-internal=create-an-element>creating an
   element</a> given <var>document</var>, <code id=the-audio-element:the-audio-element-8><a href=#the-audio-element>audio</a></code>, and the <a id=the-audio-element:html-namespace-2 href=https://triple-underscore.github.io/infra-ja.html#html-namespace data-x-internal=html-namespace-2>HTML
   namespace</a>.</li><li><p><a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-set-value id=the-audio-element:concept-element-attributes-set-value data-x-internal=concept-element-attributes-set-value>Set an attribute value</a> for
   <var>audio</var> using "<code id=the-audio-element:attr-media-preload-3><a href=#attr-media-preload>preload</a></code>" and "<code id=the-audio-element:attr-media-preload-auto><a href=#attr-media-preload-auto>auto</a></code>".</li><li><p>If <var>src</var> is given, then <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-set-value id=the-audio-element:concept-element-attributes-set-value-2 data-x-internal=concept-element-attributes-set-value>set
   an attribute value</a> for <var>audio</var> using "<code id=the-audio-element:attr-media-src-6><a href=#attr-media-src>src</a></code>"
   and <var>src</var>. (This will <a href=#concept-media-load-algorithm-at-creation>cause the user
   agent to invoke</a> the object's <a href=#concept-media-load-algorithm id=the-audio-element:concept-media-load-algorithm>resource selection
   algorithm</a> before returning.)</li><li><p>Return <var>audio</var>.</li></ol>

  



  



  <h4 id=the-track-element><span class=secno>4.8.11</span> <dfn><code>track</code></dfn>要素<a href=#the-track-element class=self-link></a></h4>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=the-track-element:concept-element-categories>カテゴリー</a>：<dd>なし。<dt><a href=dom.html#concept-element-contexts id=the-track-element:concept-element-contexts>この要素を使用できるコンテキスト</a>：<dd>任意の<a id=the-track-element:flow-content-2 href=dom.html#flow-content-2>フローコンテンツ</a>の前の、<a href=#media-element id=the-track-element:media-element>メディア要素</a>要素の子として。<dt><a href=dom.html#concept-element-content-model id=the-track-element:concept-element-content-model>コンテンツモデル</a>：<dd><a href=dom.html#concept-content-nothing id=the-track-element:concept-content-nothing>Nothing</a>。<dt><a href=dom.html#concept-element-tag-omission id=the-track-element:concept-element-tag-omission>text/htmlにおけるタグ省略</a>：<dd><a href=syntax.html#syntax-end-tag id=the-track-element:syntax-end-tag>終了タグ</a>なし。<dt><a href=dom.html#concept-element-attributes id=the-track-element:concept-element-attributes>コンテンツ属性</a>：<dd><a id=the-track-element:global-attributes href=dom.html#global-attributes>グローバル属性</a><dd><code id=the-track-element:attr-track-kind><a href=#attr-track-kind>kind</a></code> — テキストトラックの種類<dd><code id=the-track-element:attr-track-src><a href=#attr-track-src>src</a></code> — リソースのアドレス<dd><code id=the-track-element:attr-track-srclang><a href=#attr-track-srclang>srclang</a></code> — テキストトラックの言語<dd><code id=the-track-element:attr-track-label><a href=#attr-track-label>label</a></code> — ユーザー可視ラベル<dd><code id=the-track-element:attr-track-default><a href=#attr-track-default>default</a></code> — 他の<a href=#text-track id=the-track-element:text-track>テキストトラック</a>がより適切でない場合にトラックを作動させる<dt><a href=dom.html#concept-element-dom id=the-track-element:concept-element-dom>DOMインターフェイス</a>：<dd>
    <pre class=idl>[Exposed=Window,
 <a id=the-track-element:htmlconstructor href=dom.html#htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmltrackelement>HTMLTrackElement</dfn> : <a id=the-track-element:htmlelement href=dom.html#htmlelement>HTMLElement</a> {
  [<a id=the-track-element:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-track-kind id=the-track-element:dom-track-kind>kind</a>;
  [<a id=the-track-element:cereactions-2 href=custom-elements.html#cereactions>CEReactions</a>] attribute USVString <a href=#dom-track-src id=the-track-element:dom-track-src>src</a>;
  [<a id=the-track-element:cereactions-3 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-track-srclang id=the-track-element:dom-track-srclang>srclang</a>;
  [<a id=the-track-element:cereactions-4 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-track-label id=the-track-element:dom-track-label>label</a>;
  [<a id=the-track-element:cereactions-5 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-track-default id=the-track-element:dom-track-default>default</a>;

  const unsigned short <a href=#dom-track-none id=the-track-element:dom-track-none>NONE</a> = 0;
  const unsigned short <a href=#dom-track-loading id=the-track-element:dom-track-loading>LOADING</a> = 1;
  const unsigned short <a href=#dom-track-loaded id=the-track-element:dom-track-loaded>LOADED</a> = 2;
  const unsigned short <a href=#dom-track-error id=the-track-element:dom-track-error>ERROR</a> = 3;
  readonly attribute unsigned short <a href=#dom-track-readystate id=the-track-element:dom-track-readystate>readyState</a>;

  readonly attribute <a href=#texttrack id=the-track-element:texttrack>TextTrack</a> <a href=#dom-track-track id=the-track-element:dom-track-track>track</a>;
};</pre>
   </dl>

  <p><code id=the-track-element:the-track-element><a href=#the-track-element>track</a></code>要素は、著者が<a href=#media-element id=the-track-element:media-element-2>メディア要素</a>に対して明示的に外部調節された<a href=#text-track id=the-track-element:text-track-2>テキストトラック</a>を指定できる。この要素は、自分自身で何かを<a href=dom.html#represents id=the-track-element:represents>表す</a>ものではない。</p>

  <p><dfn id=attr-track-kind><code>kind</code></dfn>属性は、<a id=the-track-element:enumerated-attribute href=common-microsyntaxes.html#enumerated-attribute>列挙属性</a>である。以下の表は、この属性に対して定義されたキーワードを列挙する。各行の最初のセルに与えられるキーワードは、2番目のセルで与えられる状態に対応する。</p>

  <table><thead><tr><th>キーワード
     </th><th>状態
     </th><th>概要
   <tbody></th></tr><tr><td><dfn id=attr-track-kind-keyword-subtitles><code>subtitles</code></dfn>
     </td><td><dfn id=attr-track-kind-subtitles>Subtitles</dfn>
     </td><td>
      音声が利用可能な場合に適するが、理解できない（ユーザーが<a href=#media-resource id=the-track-element:media-resource>メディアリソース</a>のオーディオトラックの言語を理解していないためなど）対話の翻字または翻訳。ビデオにオーバーレイする。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-captions><code>captions</code></dfn>
     </td><td><dfn id=attr-track-kind-captions>Captions</dfn>
     </td><td>
      音声が利用できないか、はっきりと聞こえない場合適した（たとえば、無言である、周囲の騒音によってかき消される、またはユーザーが聴覚障害者であるので）、対話の翻字または翻訳、音響効果、関連する音楽の合図、およびその他の関連オーディオ情報。ビデオにオーバーレイし、難聴者に対して適切に表示される。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-descriptions><code>descriptions</code></dfn>
     </td><td><dfn id=attr-track-kind-descriptions>概要</dfn>
     </td><td>
      映像コンポーネントが不明瞭、利用できない、または使用可能でない（たとえばユーザーが運転中に画面なしでアプリケーションと情報をやりとりするため、またはユーザーが盲目であるため）際の音声合成に対して意図される、<a href=#media-resource id=the-track-element:media-resource-2>メディアリソース</a>のビデオコンポーネントのテキスト記述。オーディオとして合成される。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-chapters><code>chapters</code></dfn>
     </td><td><dfn id=attr-track-kind-chapters>Chapters metadata</dfn>
     </td><td rowspan=2>
      トラックは、スクリプトから使用するためのものである。ユーザーエージェントによって表示されない。
    </td></tr><tr><td><dfn id=attr-track-kind-keyword-metadata><code>metadata</code></dfn>
     </td><td><dfn id=attr-track-kind-metadata>Metadata</dfn>
  </td></tr></table>

  <p>属性は省略してもよい。<i id=the-track-element:missing-value-default><a href=common-microsyntaxes.html#missing-value-default>欠損値のデフォルト</a></i>は、<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles>subtitles</a>状態である。<i id=the-track-element:invalid-value-default><a href=common-microsyntaxes.html#invalid-value-default>無効値のデフォルト</a></i>は、<a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata>metadata</a>状態である。</p>

  <p><dfn id=attr-track-src><code>src</code></dfn>属性はテキストトラックデータの<a id=the-track-element:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を与える。値は、<a id=the-track-element:valid-non-empty-url-potentially-surrounded-by-spaces href=urls-and-fetching.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>でなければならない。この属性は存在しなければならない。</p>

  

  <p>If the element has a <code id=the-track-element:attr-track-src-2><a href=#attr-track-src>src</a></code> attribute whose value is not the
  empty string and whose value, when the attribute was set, could be successfully <a href=urls-and-fetching.html#parse-a-url id=the-track-element:parse-a-url>parsed</a> relative to the element's <a id=the-track-element:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>, then the
  element's <dfn id=track-url>track URL</dfn> is the <a id=the-track-element:resulting-url-string href=urls-and-fetching.html#resulting-url-string>resulting URL string</a>. Otherwise, the element's
  <a href=#track-url id=the-track-element:track-url>track URL</a> is the empty string.</p>

  

  <p>If the element's <a href=#track-url id=the-track-element:track-url-2>track URL</a> identifies a WebVTT resource, and the element's <code id=the-track-element:attr-track-kind-2><a href=#attr-track-kind>kind</a></code> attribute is not in the <a href=#attr-track-kind-chapters id=the-track-element:attr-track-kind-chapters>chapters metadata</a> or <a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata-2>metadata</a> state, then the WebVTT file must be a
  <a id=the-track-element:webvtt-file-using-cue-text href=https://w3c.github.io/webvtt/#webvtt-file-using-cue-text data-x-internal=webvtt-file-using-cue-text>WebVTT file using cue text</a>. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><dfn id=attr-track-srclang><code>srclang</code></dfn>属性は、テキストトラックデータの言語を提供する。値は、妥当なBCP 47言語タグでなければならない。要素の<code id=the-track-element:attr-track-kind-3><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-2>字幕</a>状態である場合、この属性は存在しなければならない。<a href=references.html#refsBCP47>[BCP47]</a></p>

  

  <p>If the element has a <code id=the-track-element:attr-track-srclang-2><a href=#attr-track-srclang>srclang</a></code> attribute whose value is
  not the empty string, then the element's <dfn id=track-language>track language</dfn> is the value of the attribute.
  Otherwise, the element has no <a href=#track-language id=the-track-element:track-language>track language</a>.</p>

  

  <p><dfn id=attr-track-label><code>label</code></dfn>属性は、トラックのユーザーが読めるタイトルを与える。それらのユーザーインターフェイスで<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-3>字幕</a>、<a href=#attr-track-kind-captions id=the-track-element:attr-track-kind-captions>キャプション</a>、および<a href=#attr-track-kind-descriptions id=the-track-element:attr-track-kind-descriptions>音声解説トラック</a>を一覧表示する際に、このタイトルはユーザーエージェントによって使用される。</p>

  <p><code id=the-track-element:attr-track-label-2><a href=#attr-track-label>label</a></code>属性の値は属性が存在する場合、空文字列であってはならない。また、同じ状態にある<code id=the-track-element:attr-track-kind-4><a href=#attr-track-kind>kind</a></code>属性の同じ<a href=#media-element id=the-track-element:media-element-3>メディア要素</a>に属する2つの<code id=the-track-element:the-track-element-2><a href=#the-track-element>track</a></code>要素の子があってはならず、その<code id=the-track-element:attr-track-srclang-3><a href=#attr-track-srclang>srclang</a></code>は属性が欠損しているか、同じ言語を表す値を持つ、およびその<code id=the-track-element:attr-track-label-3><a href=#attr-track-label>label</a></code>属性が再び両方欠損するか、または両方同じ値を持つかの両方である。</p>

  

  <p>If the element has a <code id=the-track-element:attr-track-label-4><a href=#attr-track-label>label</a></code> attribute whose value is not
  the empty string, then the element's <dfn id=track-label>track label</dfn> is the value of the attribute.
  Otherwise, the element's <a href=#track-label id=the-track-element:track-label>track label</a> is an empty string.</p>

  

  <p><dfn id=attr-track-default><code>default</code></dfn>属性は<a id=the-track-element:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>であり、指定された場合に、ユーザーの嗜好が別のトラックがより適切であることを示さない場合、トラックが有効にされることを示す。</p>

  <p>各<a href=#media-element id=the-track-element:media-element-4>メディア要素</a>は、<code id=the-track-element:attr-track-kind-5><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-subtitles id=the-track-element:attr-track-kind-subtitles-4>subtitles</a>または<a href=#attr-track-kind-captions id=the-track-element:attr-track-kind-captions-2>captions</a>状態かつ<code id=the-track-element:attr-track-default-2><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-3><a href=#the-track-element>track</a></code>要素の子を複数個持ってはならない。</p>

  <p>各<a href=#media-element id=the-track-element:media-element-5>メディア要素</a>は、<code id=the-track-element:attr-track-kind-6><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-descriptions id=the-track-element:attr-track-kind-descriptions-2>description</a>状態かつ<code id=the-track-element:attr-track-default-3><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-4><a href=#the-track-element>track</a></code>要素の子を複数個持ってはならない。</p>

  <p>Each <a href=#media-element id=the-track-element:media-element-6>media element</a> must have no more than one <code id=the-track-element:the-track-element-5><a href=#the-track-element>track</a></code> element child
  whose <code id=the-track-element:attr-track-kind-7><a href=#attr-track-kind>kind</a></code> attribute is in the <a href=#attr-track-kind-chapters id=the-track-element:attr-track-kind-chapters-2>chapters metadata</a> state and whose <code id=the-track-element:attr-track-default-4><a href=#attr-track-default>default</a></code> attribute is specified.</p>

  <p class=note><code id=the-track-element:attr-track-kind-8><a href=#attr-track-kind>kind</a></code>属性が<a href=#attr-track-kind-metadata id=the-track-element:attr-track-kind-metadata-3>metadata</a>状態かつ<code id=the-track-element:attr-track-default-5><a href=#attr-track-default>default</a></code>属性が指定される<code id=the-track-element:the-track-element-6><a href=#the-track-element>track</a></code>の数に制限は存在しない。</p>

  <dl class=domintro><dt><var>track</var> . <code id=dom-track-readystate-dev><a href=#dom-track-readystate>readyState</a></code><dd>
    <p>以下のリストから番号で表される<a href=#text-track-readiness-state id=the-track-element:text-track-readiness-state>テキストトラック準備状態</a>を返す：</p>
    <dl><dt><var>track</var> . <code id=dom-track-none-dev><a href=#dom-track-none>NONE</a></code> (0)<dd>
      <p><a href=#text-track-not-loaded id=the-track-element:text-track-not-loaded>テキストトラックがロードされない</a>状態。</p>
     <dt><var>track</var> . <code id=dom-track-loading-dev><a href=#dom-track-loading>LOADING</a></code> (1)<dd>
      <p><a href=#text-track-loading id=the-track-element:text-track-loading>テキストトラックがロードしている</a>状態。</p>
     <dt><var>track</var> . <code id=dom-track-loaded-dev><a href=#dom-track-loaded>LOADED</a></code> (2)<dd>
      <p><a href=#text-track-loaded id=the-track-element:text-track-loaded>テキストトラックがロードされた</a>状態。</p>
     <dt><var>track</var> . <code id=dom-track-error-dev><a href=#dom-track-error>ERROR</a></code> (3)<dd>
      <p><a href=#text-track-failed-to-load id=the-track-element:text-track-failed-to-load>テキストトラックがロードに失敗した</a>状態。</p>
     </dl>
   <dt><var>track</var> . <code id=dom-track-track-dev><a href=#dom-track-track>track</a></code><dd>

    <p><code id=the-track-element:the-track-element-7><a href=#the-track-element>track</a></code>要素の<a href=#text-track id=the-track-element:text-track-3>テキストトラック</a>に対応する<code id=the-track-element:texttrack-2><a href=#texttrack>TextTrack</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-track-readystate><code>readyState</code></dfn> attribute must return the
  numeric value corresponding to the <a href=#text-track-readiness-state id=the-track-element:text-track-readiness-state-2>text track readiness state</a> of the
  <code id=the-track-element:the-track-element-8><a href=#the-track-element>track</a></code> element's <a href=#text-track id=the-track-element:text-track-4>text track</a>, as defined by the following list:</p>

  <dl><dt><dfn id=dom-track-none><code>NONE</code></dfn> (numeric value 0)<dd><a href=#text-track-not-loaded id=the-track-element:text-track-not-loaded-2>テキストトラックがロードされない</a>状態。<dt><dfn id=dom-track-loading><code>LOADING</code></dfn> (numeric value 1)<dd><a href=#text-track-loading id=the-track-element:text-track-loading-2>テキストトラックがロードしている</a>状態。<dt><dfn id=dom-track-loaded><code>LOADED</code></dfn> (numeric value 2)<dd><a href=#text-track-loaded id=the-track-element:text-track-loaded-2>テキストトラックがロードされた</a>状態。<dt><dfn id=dom-track-error><code>ERROR</code></dfn> (numeric value 3)<dd><a href=#text-track-failed-to-load id=the-track-element:text-track-failed-to-load-2>テキストトラックがロードに失敗した</a>状態。</dl>

  <p>The <dfn id=dom-track-track><code>track</code></dfn> IDL attribute must, on getting,
  return the <code id=the-track-element:the-track-element-9><a href=#the-track-element>track</a></code> element's <a href=#text-track id=the-track-element:text-track-5>text track</a>'s corresponding
  <code id=the-track-element:texttrack-3><a href=#texttrack>TextTrack</a></code> object.</p>

  <p>The <dfn id=dom-track-src><code>src</code></dfn>, <dfn id=dom-track-srclang><code>srclang</code></dfn>, <dfn id=dom-track-label><code>label</code></dfn>, and <dfn id=dom-track-default><code>default</code></dfn> IDL attributes must <a id=the-track-element:reflect href=common-dom-interfaces.html#reflect>reflect</a> the
  respective content attributes of the same name. The <dfn id=dom-track-kind><code>kind</code></dfn> IDL attribute must <a id=the-track-element:reflect-2 href=common-dom-interfaces.html#reflect>reflect</a> the content
  attribute of the same name, <a id=the-track-element:limited-to-only-known-values href=common-dom-interfaces.html#limited-to-only-known-values>limited to only known values</a>.</p>

  

  <div class=example>

   <p>このビデオは、複数言語の字幕を持つ：</p>

   <pre>&lt;video src="brave.webm"&gt;
 &lt;track kind=subtitles src=brave.en.vtt srclang=en label="English"&gt;
 &lt;track kind=captions src=brave.en.hoh.vtt srclang=en label="English for the Hard of Hearing"&gt;
 &lt;track kind=subtitles src=brave.fr.vtt srclang=fr lang=fr label="Français"&gt;
 &lt;track kind=subtitles src=brave.de.vtt srclang=de lang=de label="Deutsch"&gt;
&lt;/video&gt;</pre>

   <p>（最後の2つの<code id=the-track-element:attr-lang><a href=dom.html#attr-lang>lang</a></code>属性は、字幕自体の言語ではなく、<code id=the-track-element:attr-track-label-5><a href=#attr-track-label>label</a></code>属性の言語を記述する。字幕の言語は<code id=the-track-element:attr-track-srclang-4><a href=#attr-track-srclang>srclang</a></code>属性によって与えられる。）</p>

  </div>

  <h4 id=media-elements><span class=secno>4.8.12</span> メディア要素<a href=#media-elements class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28625" title="Provide a hook for media session integration (blocking paused-&gt;playing transition)">28625</a></div>

  <p><a href=#htmlmediaelement id=media-elements:htmlmediaelement>HTMLMediaElement</a>オブジェクト（この仕様では<code id=media-elements:the-audio-element><a href=#the-audio-element>audio</a></code>および<code id=media-elements:the-video-element><a href=#the-video-element>video</a></code>）は、単に<dfn id=media-element>メディア要素</dfn>として知られている。</p>

  <pre class=idl>enum <dfn id=canplaytyperesult>CanPlayTypeResult</dfn> { "" /* <a href=#dom-canplaytyperesult-nil id=media-elements:dom-canplaytyperesult-nil>empty string</a> */, "<a href=#dom-canplaytyperesult-maybe id=media-elements:dom-canplaytyperesult-maybe>maybe</a>", "<a href=#dom-canplaytyperesult-probably id=media-elements:dom-canplaytyperesult-probably>probably</a>" };
typedef (<a id=media-elements:mediastream href=https://w3c.github.io/mediacapture-main/getusermedia.html#idl-def-mediastream data-x-internal=mediastream>MediaStream</a> or <a id=media-elements:mediasource href=https://w3c.github.io/media-source/#idl-def-mediasource data-x-internal=mediasource>MediaSource</a> or <a id=media-elements:blob href=https://w3c.github.io/FileAPI/#dfn-Blob data-x-internal=blob>Blob</a>) <dfn id=mediaprovider>MediaProvider</dfn>;

[Exposed=Window]
interface <dfn id=htmlmediaelement>HTMLMediaElement</dfn> : <a id=media-elements:htmlelement href=dom.html#htmlelement>HTMLElement</a> {

  // error state
  readonly attribute <a href=#mediaerror id=media-elements:mediaerror>MediaError</a>? <a href=#dom-media-error id=media-elements:dom-media-error>error</a>;

  // network state
  [<a id=media-elements:cereactions href=custom-elements.html#cereactions>CEReactions</a>] attribute USVString <a href=#dom-media-src id=media-elements:dom-media-src>src</a>;
  attribute <a href=#mediaprovider id=media-elements:mediaprovider>MediaProvider</a>? <a href=#dom-media-srcobject id=media-elements:dom-media-srcobject>srcObject</a>;
  readonly attribute USVString <a href=#dom-media-currentsrc id=media-elements:dom-media-currentsrc>currentSrc</a>;
  [<a id=media-elements:cereactions-2 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString? <a href=#dom-media-crossorigin id=media-elements:dom-media-crossorigin>crossOrigin</a>;
  const unsigned short <a href=#dom-media-network_empty id=media-elements:dom-media-network_empty>NETWORK_EMPTY</a> = 0;
  const unsigned short <a href=#dom-media-network_idle id=media-elements:dom-media-network_idle>NETWORK_IDLE</a> = 1;
  const unsigned short <a href=#dom-media-network_loading id=media-elements:dom-media-network_loading>NETWORK_LOADING</a> = 2;
  const unsigned short <a href=#dom-media-network_no_source id=media-elements:dom-media-network_no_source>NETWORK_NO_SOURCE</a> = 3;
  readonly attribute unsigned short <a href=#dom-media-networkstate id=media-elements:dom-media-networkstate>networkState</a>;
  [<a id=media-elements:cereactions-3 href=custom-elements.html#cereactions>CEReactions</a>] attribute DOMString <a href=#dom-media-preload id=media-elements:dom-media-preload>preload</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges>TimeRanges</a> <a href=#dom-media-buffered id=media-elements:dom-media-buffered>buffered</a>;
  void <a href=#dom-media-load id=media-elements:dom-media-load>load</a>();
  <a href=#canplaytyperesult id=media-elements:canplaytyperesult>CanPlayTypeResult</a> <a href=#dom-navigator-canplaytype id=media-elements:dom-navigator-canplaytype>canPlayType</a>(DOMString type);

  // ready state
  const unsigned short <a href=#dom-media-have_nothing id=media-elements:dom-media-have_nothing>HAVE_NOTHING</a> = 0;
  const unsigned short <a href=#dom-media-have_metadata id=media-elements:dom-media-have_metadata>HAVE_METADATA</a> = 1;
  const unsigned short <a href=#dom-media-have_current_data id=media-elements:dom-media-have_current_data>HAVE_CURRENT_DATA</a> = 2;
  const unsigned short <a href=#dom-media-have_future_data id=media-elements:dom-media-have_future_data>HAVE_FUTURE_DATA</a> = 3;
  const unsigned short <a href=#dom-media-have_enough_data id=media-elements:dom-media-have_enough_data>HAVE_ENOUGH_DATA</a> = 4;
  readonly attribute unsigned short <a href=#dom-media-readystate id=media-elements:dom-media-readystate>readyState</a>;
  readonly attribute boolean <a href=#dom-media-seeking id=media-elements:dom-media-seeking>seeking</a>;

  // playback state
  attribute double <a href=#dom-media-currenttime id=media-elements:dom-media-currenttime>currentTime</a>;
  void <a href=#dom-media-fastseek id=media-elements:dom-media-fastseek>fastSeek</a>(double time);
  readonly attribute unrestricted double <a href=#dom-media-duration id=media-elements:dom-media-duration>duration</a>;
  <a href=https://triple-underscore.github.io/WebIDL-ja.html#idl-object id=media-elements:idl-object data-x-internal=idl-object>object</a> <a href=#dom-media-getstartdate id=media-elements:dom-media-getstartdate>getStartDate</a>();
  readonly attribute boolean <a href=#dom-media-paused id=media-elements:dom-media-paused>paused</a>;
  attribute double <a href=#dom-media-defaultplaybackrate id=media-elements:dom-media-defaultplaybackrate>defaultPlaybackRate</a>;
  attribute double <a href=#dom-media-playbackrate id=media-elements:dom-media-playbackrate>playbackRate</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges-2>TimeRanges</a> <a href=#dom-media-played id=media-elements:dom-media-played>played</a>;
  readonly attribute <a href=#timeranges id=media-elements:timeranges-3>TimeRanges</a> <a href=#dom-media-seekable id=media-elements:dom-media-seekable>seekable</a>;
  readonly attribute boolean <a href=#dom-media-ended id=media-elements:dom-media-ended>ended</a>;
  [<a id=media-elements:cereactions-4 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-media-autoplay id=media-elements:dom-media-autoplay>autoplay</a>;
  [<a id=media-elements:cereactions-5 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-media-loop id=media-elements:dom-media-loop>loop</a>;
  Promise&lt;void&gt; <a href=#dom-media-play id=media-elements:dom-media-play>play</a>();
  void <a href=#dom-media-pause id=media-elements:dom-media-pause>pause</a>();

  // controls
  [<a id=media-elements:cereactions-6 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-media-controls id=media-elements:dom-media-controls>controls</a>;
  attribute double <a href=#dom-media-volume id=media-elements:dom-media-volume>volume</a>;
  attribute boolean <a href=#dom-media-muted id=media-elements:dom-media-muted>muted</a>;
  [<a id=media-elements:cereactions-7 href=custom-elements.html#cereactions>CEReactions</a>] attribute boolean <a href=#dom-media-defaultmuted id=media-elements:dom-media-defaultmuted>defaultMuted</a>;

  // tracks
  [SameObject] readonly attribute <a href=#audiotracklist id=media-elements:audiotracklist>AudioTrackList</a> <a href=#dom-media-audiotracks id=media-elements:dom-media-audiotracks>audioTracks</a>;
  [SameObject] readonly attribute <a href=#videotracklist id=media-elements:videotracklist>VideoTrackList</a> <a href=#dom-media-videotracks id=media-elements:dom-media-videotracks>videoTracks</a>;
  [SameObject] readonly attribute <a href=#texttracklist id=media-elements:texttracklist>TextTrackList</a> <a href=#dom-media-texttracks id=media-elements:dom-media-texttracks>textTracks</a>;
  <a href=#texttrack id=media-elements:texttrack>TextTrack</a> <a href=#dom-media-addtexttrack id=media-elements:dom-media-addtexttrack>addTextTrack</a>(<a href=#texttrackkind id=media-elements:texttrackkind>TextTrackKind</a> kind, optional DOMString label = "", optional DOMString language = "");
};</pre>

  <p><dfn id=media-element-attributes>メディア要素の属性</dfn>、<code id=media-elements:attr-media-src><a href=#attr-media-src>src</a></code>、<code id=media-elements:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code>、<code id=media-elements:attr-media-preload><a href=#attr-media-preload>preload</a></code>、<code id=media-elements:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code>、<code id=media-elements:attr-media-loop><a href=#attr-media-loop>mediagroup</a></code>、<code id=media-elements:attr-media-muted><a href=#attr-media-muted>muted</a></code>、<code id=media-elements:attr-media-controls><a href=#attr-media-controls>controls</a></code>は、すべての<a href=#media-element id=media-elements:media-element>メディア要素</a>に適用する。これらは、この節で定義される。</p>

  

  

  <p><a href=#media-element id=media-elements:media-element-2>メディア要素</a>は、音声データ、または映像と音声のデータをユーザーに示すために使用される。この節は音声や映像に対する<a href=#media-element id=media-elements:media-element-3>メディア要素</a>にも同様に適用されるので、これは、この節において<dfn id=media-data>メディアデータ</dfn>と見なされる。用語<dfn id=media-resource>メディアリソース</dfn>は、たとえば完全なビデオファイル、または完全なオーディオファイルなど、メディアデータの完全な集合を参照するために使用される。

  </p>

  <p><a href=#media-resource id=media-elements:media-resource>メディアリソース</a>は、複数のオーディオおよびビデオトラックを持つことができる。<a href=#media-element id=media-elements:media-element-4>メディア要素</a>の目的に対して、<a href=#media-resource id=media-elements:media-resource-2>メディアリソース</a>の映像データは、<a id=media-elements:event-loop href=webappapis.html#event-loop>イベントループ</a>が<a href=webappapis.html#step1>ステップ1</a>に到達する際に要素の<code id=media-elements:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>属性で（もしあれば）与えられるように現在選択されるトラックのみであり、かつ<a href=#media-resource id=media-elements:media-resource-3>メディアリソース</a>の音声データは、<a id=media-elements:event-loop-2 href=webappapis.html#event-loop>イベントループ</a>が<a href=webappapis.html#step1>ステップ1</a>に到達する際に（もしあれば）要素の<code id=media-elements:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code>属性によって与えられるすべての現在の有効なトラックは、混合の結果である。</p>

  <p class=note><code id=media-elements:the-audio-element-2><a href=#the-audio-element>audio</a></code>と<code id=media-elements:the-video-element-2><a href=#the-video-element>video</a></code>の両方の要素は、オーディオとビデオの両方に使用できる。2つの間の主な違いは、<code id=media-elements:the-video-element-3><a href=#the-video-element>video</a></code>要素が持つのに対して、<code id=media-elements:the-audio-element-3><a href=#the-audio-element>audio</a></code>要素は、視覚コンテンツ（ビデオやキャプションなど）に対する再生領域を持たないことだけである。</p>

  

  <p>Except where otherwise explicitly specified, the <a id=media-elements:task-source href=webappapis.html#task-source>task source</a> for all the tasks
  <a href=webappapis.html#queue-a-task id=media-elements:queue-a-task>queued</a> in this section and its subsections is the <dfn id=media-element-event-task-source>media
  element event task source</dfn> of the <a href=#media-element id=media-elements:media-element-5>media element</a> in question.</p>

  



  <h5 id=error-codes><span class=secno>4.8.12.1</span> エラーコード<a href=#error-codes class=self-link></a></h5>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-error-dev><a href=#dom-media-error>error</a></code><dd>

    <p>要素の現在のエラー状態を表す<code id=error-codes:mediaerror><a href=#mediaerror>MediaError</a></code>オブジェクトを返す。</p>

    <p>エラーが無い場合nullを返す。</p>

   </dl>

  

  <p>All <a href=#media-element id=error-codes:media-element>media elements</a> have an associated error status, which
  records the last error the element encountered since its <a href=#concept-media-load-algorithm id=error-codes:concept-media-load-algorithm>resource selection algorithm</a> was last invoked. The
  <dfn id=dom-media-error><code>error</code></dfn> attribute, on getting, must return the
  <code id=error-codes:mediaerror-2><a href=#mediaerror>MediaError</a></code> object created for this last error, or null if there has not been an
  error.</p>

  

  <pre class=idl>[Exposed=Window]
interface <dfn id=mediaerror>MediaError</dfn> {
  const unsigned short <a href=#dom-mediaerror-media_err_aborted id=error-codes:dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a> = 1;
  const unsigned short <a href=#dom-mediaerror-media_err_network id=error-codes:dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a> = 2;
  const unsigned short <a href=#dom-mediaerror-media_err_decode id=error-codes:dom-mediaerror-media_err_decode>MEDIA_ERR_DECODE</a> = 3;
  const unsigned short <a href=#dom-mediaerror-media_err_src_not_supported id=error-codes:dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a> = 4;

  readonly attribute unsigned short <a href=#dom-mediaerror-code id=error-codes:dom-mediaerror-code>code</a>;
  readonly attribute DOMString <a href=#dom-mediaerror-message id=error-codes:dom-mediaerror-message>message</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=error-codes:dom-media-error><a href=#dom-media-error>error</a></code> . <code id=dom-mediaerror-code-dev><a href=#dom-mediaerror-code>code</a></code><dd>

    <p>下記のリストから、現在のエラーのエラーコードを返す。</p>

   <dt><var>media</var> . <code id=error-codes:dom-media-error-2><a href=#dom-media-error>error</a></code> . <code id=dom-mediaerror-message-dev><a href=#dom-mediaerror-message>message</a></code><dd>

    <p>発生したエラー条件に関する有益な診断メッセージを返す。メッセージおよびメッセージの形式は、一般に異なるユーザーエージェント間で一様ではない。そのようなメッセージが利用可能でない場合、空の文字列が返される。</p>

   </dl>

  

  <p>Every <code id=error-codes:mediaerror-3><a href=#mediaerror>MediaError</a></code> object has a <dfn id=concept-mediaerror-message>message</dfn>, which is a string, and a <dfn id=concept-mediaerror-code>code</dfn>, which is one of the following:</p>

  

  <dl><dt><dfn id=dom-mediaerror-media_err_aborted><code>MEDIA_ERR_ABORTED</code></dfn>（数値1）<dd><a href=#media-resource id=error-codes:media-resource>メディアリソース</a>に対するフェッチプロセスが、ユーザーの要求でユーザーエージェントによって中止された。<dt><dfn id=dom-mediaerror-media_err_network><code>MEDIA_ERR_NETWORK</code></dfn>（数値2）<dd>リソースが使用可能であることが確立された後、一部の説明のネットワークエラーは、ユーザーエージェントに<a href=#media-resource id=error-codes:media-resource-2>メディアリソース</a>のフェッチを停止させた。<dt><dfn id=dom-mediaerror-media_err_decode><code>MEDIA_ERR_DECODE</code></dfn>（数値3）<dd>リソースが使用可能であることが確立された後に、<a href=#media-resource id=error-codes:media-resource-3>メディアリソース</a>をデコードする間に説明のエラーが発生した。<dt><dfn id=dom-mediaerror-media_err_src_not_supported><code>MEDIA_ERR_SRC_NOT_SUPPORTED</code></dfn>（数値4）<dd><code id=error-codes:attr-media-src><a href=#attr-media-src>src</a></code>属性または<a href=#assigned-media-provider-object id=error-codes:assigned-media-provider-object>assigned media provider object</a>で示される<a href=#media-resource id=error-codes:media-resource-4>メディアリソース</a>は適さなかった。</dl>

  

  <p>To <dfn id=creating-a-mediaerror data-export="">create a <code>MediaError</code></dfn>,
  given an error code which is one of the above values, return a new <code id=error-codes:mediaerror-4><a href=#mediaerror>MediaError</a></code> object
  whose <a href=#concept-mediaerror-code id=error-codes:concept-mediaerror-code>code</a> is the given error code and whose <a href=#concept-mediaerror-message id=error-codes:concept-mediaerror-message>message</a> is a string containing any details the user
  agent is able to supply about the cause of the error condition, or the empty string if the user
  agent is unable to supply such details. This message string must not contain only the information
  already available via the supplied error code; for example, it must not simply be a translation of
  the code into a string format. If no additional information is available beyond that provided by
  the error code, the <a href=#concept-mediaerror-message id=error-codes:concept-mediaerror-message-2>message</a> must be set to the
  empty string.</p>

  <p>The <dfn id=dom-mediaerror-code><code>code</code></dfn> attribute of a
  <code id=error-codes:mediaerror-5><a href=#mediaerror>MediaError</a></code> object must return this <code id=error-codes:mediaerror-6><a href=#mediaerror>MediaError</a></code> object's <a href=#concept-mediaerror-code id=error-codes:concept-mediaerror-code-2>code</a>.</p>

  <p>The <dfn id=dom-mediaerror-message><code>message</code></dfn> attribute of a
  <code id=error-codes:mediaerror-7><a href=#mediaerror>MediaError</a></code> object must return this <code id=error-codes:mediaerror-8><a href=#mediaerror>MediaError</a></code> object's <a href=#concept-mediaerror-message id=error-codes:concept-mediaerror-message-3>message</a>.</p>

  




  <h5 id=location-of-the-media-resource><span class=secno>4.8.10.2</span> メディアリソースの場所<a href=#location-of-the-media-resource class=self-link></a></h5>

  <p><a href=#media-element id=location-of-the-media-resource:media-element>メディア要素</a>の<dfn id=attr-media-src><code>src</code></dfn>コンテンツ属性は、表示するメディアリソース（ビデオ、オーディオ）の<a id=location-of-the-media-resource:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を与える。属性が存在する場合、<a id=location-of-the-media-resource:valid-non-empty-url-potentially-surrounded-by-spaces href=urls-and-fetching.html#valid-non-empty-url-potentially-surrounded-by-spaces>潜在的にスペースで囲まれた妥当な空でないURL</a>を含まなければならない。</p>

  <p><code id=location-of-the-media-resource:names:-the-itemprop-attribute><a href=microdata.html#names:-the-itemprop-attribute>itemprop</a></code>が<a href=#media-element id=location-of-the-media-resource:media-element-2>メディア要素</a>要素で指定される場合、<code id=location-of-the-media-resource:attr-media-src><a href=#attr-media-src>src</a></code>属性も指定されなければならない。</p>

  <p><a href=#media-element id=location-of-the-media-resource:media-element-3>メディア要素</a>上の<dfn id=attr-media-crossorigin><code>crossorigin</code></dfn>コンテンツ属性は、<a id=location-of-the-media-resource:cors-settings-attribute href=urls-and-fetching.html#cors-settings-attribute>CORS設定属性</a>である。</p>

  

  <p id=concept-media-load-algorithm-at-creation>If a <a href=#media-element id=location-of-the-media-resource:media-element-4>media element</a> is created with a
  <code id=location-of-the-media-resource:attr-media-src-2><a href=#attr-media-src>src</a></code> attribute, the user agent must <a id=location-of-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> invoke the
  <a href=#media-element id=location-of-the-media-resource:media-element-5>media element</a>'s <a href=#concept-media-load-algorithm id=location-of-the-media-resource:concept-media-load-algorithm>resource selection
  algorithm</a>.</p>

  <p>If a <code id=location-of-the-media-resource:attr-media-src-3><a href=#attr-media-src>src</a></code> attribute of a <a href=#media-element id=location-of-the-media-resource:media-element-6>media element</a> is set
  or changed, the user agent must invoke the <a href=#media-element id=location-of-the-media-resource:media-element-7>media element</a>'s <a href=#media-element-load-algorithm id=location-of-the-media-resource:media-element-load-algorithm>media element load
  algorithm</a>. (<em>Removing</em> the <code id=location-of-the-media-resource:attr-media-src-4><a href=#attr-media-src>src</a></code> attribute does
  not do this, even if there are <code id=location-of-the-media-resource:the-source-element><a href=embedded-content.html#the-source-element>source</a></code> elements present.)</p>

  <p><a href=#media-element id=location-of-the-media-resource:media-element-8>メディア要素</a>の<dfn id=dom-media-src><code>src</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id=location-of-the-media-resource:reflect href=common-dom-interfaces.html#reflect>反映</a>しなければならない。</p>

  <p>The <dfn id=dom-media-crossorigin><code>crossOrigin</code></dfn> IDL attribute must
  <a id=location-of-the-media-resource:reflect-2 href=common-dom-interfaces.html#reflect>reflect</a> the <code id=location-of-the-media-resource:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> content
  attribute, <a id=location-of-the-media-resource:limited-to-only-known-values href=common-dom-interfaces.html#limited-to-only-known-values>limited to only known values</a>.</p>

  

  <p><dfn id=media-provider-object>メディアプロバイダーオブジェクト</dfn>は、<a href=#media-resource id=location-of-the-media-resource:media-resource>メディアリソース</a>を表すことができるオブジェクトであり、<a id=location-of-the-media-resource:url-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>から分離する。<code id=location-of-the-media-resource:mediastream><a data-x-internal=mediastream href=https://w3c.github.io/mediacapture-main/getusermedia.html#idl-def-mediastream>MediaStream</a></code>オブジェクト、<code id=location-of-the-media-resource:mediasource><a data-x-internal=mediasource href=https://w3c.github.io/media-source/#idl-def-mediasource>MediaSource</a></code>オブジェクト、および<code id=location-of-the-media-resource:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#dfn-Blob>Blob</a></code>オブジェクトは、すべて<a href=#media-provider-object id=location-of-the-media-resource:media-provider-object>メディアプロバイダーオブジェクト</a>である。</p>

  

  <p>Each <a href=#media-element id=location-of-the-media-resource:media-element-9>media element</a> can have an <dfn id=assigned-media-provider-object>assigned media provider object</dfn>, which is a
  <a href=#media-provider-object id=location-of-the-media-resource:media-provider-object-2>media provider object</a>. When a <a href=#media-element id=location-of-the-media-resource:media-element-10>media element</a> is created, it has no
  <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object>assigned media provider object</a>.</p>

  

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-srcobject-dev><a href=#dom-media-srcobject>srcObject</a></code> [ = <var>source</var> ]<dd>

    <p><a href=#media-element id=location-of-the-media-resource:media-element-11>メディア要素</a>に<a href=#media-provider-object id=location-of-the-media-resource:media-provider-object-3>メディアプロバイダーオブジェクト</a>を割り当てさせる。</p>

   <dt><var>media</var> . <code id=dom-media-currentsrc-dev><a href=#dom-media-currentsrc>currentSrc</a></code><dd>

    <p>もしあれば、現在の<a href=#media-resource id=location-of-the-media-resource:media-resource-2>メディアリソース</a>の<a id=location-of-the-media-resource:url-3 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を返す。</p>

    <p><a href=#media-resource id=location-of-the-media-resource:media-resource-3>メディアリソース</a>が存在しない、または<a id=location-of-the-media-resource:url-4 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を持たない場合、空文字列を返す。</p>

   </dl>

  

  <p>The <dfn id=dom-media-currentsrc><code>currentSrc</code></dfn> IDL attribute must initially be set to
  the empty string. Its value is changed by the <a href=#concept-media-load-algorithm id=location-of-the-media-resource:concept-media-load-algorithm-2>resource
  selection algorithm</a> defined below.</p>

  <p>The <dfn id=dom-media-srcobject><code>srcObject</code></dfn> IDL attribute, on getting,
  must return the element's <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object-2>assigned media provider object</a>, if any, or null otherwise.
  On setting, it must set the element's <a href=#assigned-media-provider-object id=location-of-the-media-resource:assigned-media-provider-object-3>assigned media provider object</a> to the new
  value, and then invoke the element's <a href=#media-element-load-algorithm id=location-of-the-media-resource:media-element-load-algorithm-2>media element load algorithm</a>.</p>

  

  <p class=note><a href=#media-resource id=location-of-the-media-resource:media-resource-4>メディアリソース</a>を指定する3つの方法、<code id=location-of-the-media-resource:dom-media-srcobject><a href=#dom-media-srcobject>srcObject</a></code> IDL属性、<code id=location-of-the-media-resource:attr-media-src-5><a href=#attr-media-src>src</a></code>属性、および<code id=location-of-the-media-resource:the-source-element-2><a href=embedded-content.html#the-source-element>source</a></code>要素がある。IDL属性は、要素、コンテンツ属性に優先する。</p>



  <h5 id=mime-types><span class=secno>4.8.12.3</span> MIMEタイプ<a href=#mime-types class=self-link></a></h5>

  <p><a href=#media-resource id=mime-types:media-resource>メディアリソース</a>は、<code>codec</code>パラメーターをもつ一部の場合において、その<em>タイプ</em>、具体的には<a id=mime-types:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>の観点から説明できる。（<code>codec</code>パラメーターが許可されるまたはMIMEタイプに依存しないかどうかに関わらない）<a href=references.html#refsRFC6381>[RFC6381]</a></p>

  <p>タイプは、通常多少不完全な記述である。たとえば"<code>video/mpeg</code>"は、コンテナタイプが何であるかを除いて何でも言わず、"<code>video/mp4; codecs="avc1.42E01E, mp4a.40.2"</code>"のような型も実際のビットレート（最大ビットレートのみ）のような情報が含まれない。したがって、タイプを指定されるユーザーエージェントは、（信頼のレベルを変化させた）そのタイプのメディアを再生できる<em>かもしれない</em>かどうか、または間違いなくそのタイプのメディアを再生<em>できない</em>かどうかをたびたび知ることができる。</p>

  <p><dfn id=a-type-that-the-user-agent-knows-it-cannot-render>ユーザーエージェントがレンダリングできないことを認識するタイプ</dfn>は、たとえばコンテナの種類を認識しない、または列挙されたコーデックをサポートしないため、ユーザーエージェントは間違いなくサポートしないことにリソースを記述するものである。</p>

  <p>パラメーターのない""<code id=mime-types:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>" <a id=mime-types:mime-type-2 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>は、<a href=#a-type-that-the-user-agent-knows-it-cannot-render id=mime-types:a-type-that-the-user-agent-knows-it-cannot-render>ユーザーエージェントがレンダリングできないことを認識するタイプ</a>にならない。潜在的な<a href=#media-resource id=mime-types:media-resource-2>メディアリソース</a>にラベルを付けるために使用される際、ユーザーエージェントは、明示的な<a href=urls-and-fetching.html#content-type id=mime-types:content-type>Content-Typeメタデータ</a>の欠如と同等としてそのタイプを扱わなければならない。</p>

  <p class=note>ここでパラメーターなしの<a id=mime-types:mime-type-3 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a> "<code id=mime-types:application/octet-stream-2><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>"は特殊な場合である。任意のパラメーターが型に出現する場合、その型は他の<a id=mime-types:mime-type-4 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>と同じように扱われる。これは、未知の<a id=mime-types:mime-type-5 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>のパラメーターは無視されるべきであるという規則からの逸脱である。</p> 

  <dl class=domintro><dt><var>media</var> . <code id=dom-navigator-canplaytype-dev><a href=#dom-navigator-canplaytype>canPlayType</a></code>(<var>type</var>)<dd>

    <p>ユーザーエージェントはそれが与えられた型のメディアリソースを再生できる"maybe"、または"probably"方法に基づいて空の文字列（否定応答）を返す。</p>

   </dl>

  

  <p>The <dfn id=dom-navigator-canplaytype><code>canPlayType(<var>type</var>)</code></dfn> method must return <dfn id=dom-canplaytyperesult-nil>the
  empty string</dfn> if <var>type</var> is <a href=#a-type-that-the-user-agent-knows-it-cannot-render id=mime-types:a-type-that-the-user-agent-knows-it-cannot-render-2>a type that the user agent knows it cannot
  render</a> or is the type "<code id=mime-types:application/octet-stream-3><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code>"; it must return "<dfn id=dom-canplaytyperesult-probably><code>probably</code></dfn>" if the user agent is confident
  that the type represents a <a href=#media-resource id=mime-types:media-resource-3>media resource</a> that it can render if used in with this
  <code id=mime-types:the-audio-element><a href=#the-audio-element>audio</a></code> or <code id=mime-types:the-video-element><a href=#the-video-element>video</a></code> element; and it must return "<dfn id=dom-canplaytyperesult-maybe><code>maybe</code></dfn>" otherwise. Implementors are encouraged
  to return "<code id=mime-types:dom-canplaytyperesult-maybe><a href=#dom-canplaytyperesult-maybe>maybe</a></code>" unless the type can be
  confidently established as being supported or not. Generally, a user agent should never return
  "<code id=mime-types:dom-canplaytyperesult-probably><a href=#dom-canplaytyperesult-probably>probably</a></code>" for a type that allows the <code>codecs</code> parameter if that parameter is not present.</p>

  

  <div class=example>

   <p>このスクリプトは、ユーザーエージェントが動的に<code id=mime-types:the-video-element-2><a href=#the-video-element>video</a></code>要素またはプラグインを使用するかどうかを決定する（架空の）新たなフォーマットをサポートしているかどうかをテストする。</p>

   <pre>&lt;section id="video"&gt;
 &lt;p&gt;&lt;a href="playing-cats.nfv"&gt;Download video&lt;/a&gt;&lt;/p&gt;
&lt;/section&gt;
&lt;script&gt;
 var videoSection = document.getElementById('video');
 var videoElement = document.createElement('video');
 var support = videoElement.canPlayType('video/x-new-fictional-format;codecs="kittens,bunnies"');
 if (support != "probably" &amp;&amp; "New Fictional Video Plugin" in navigator.plugins) {
   // not confident of browser support
   // but we have a plugin
   // so use plugin instead
   videoElement = document.createElement("embed");
 } else if (support == "") {
   // no support from browser and no plugin
   // do nothing
   videoElement = null;
 }
 if (videoElement) {
   while (videoSection.hasChildNodes())
     videoSection.removeChild(videoSection.firstChild);
   videoElement.setAttribute("src", "playing-cats.nfv");
   videoSection.appendChild(videoElement);
 }
&lt;/script&gt;</pre>

  </div>

  <p class=note><code id=mime-types:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>要素の<code id=mime-types:attr-source-type><a href=embedded-content.html#attr-source-type>type</a></code>属性は、ユーザーエージェントがレンダリングできないフォーマットを使用するリソースのダウンロードを回避できる。</p>


  <h5 id=network-states><span class=secno>4.8.12.4</span> ネットワーク状態<a href=#network-states class=self-link></a></h5>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-networkstate-dev><a href=#dom-media-networkstate>networkState</a></code><dd>

    <p>下記のリストのコードから、要素に対するネットワーク活動の現在の状態を返す。</p>

   </dl>

  

  <p>As <a href=#media-element id=network-states:media-element>media elements</a> interact with the network, their current
  network activity is represented by the <dfn id=dom-media-networkstate><code>networkState</code></dfn> attribute. On getting, it must
  return the current network state of the element, which must be one of the following values:</p>

  

  <dl><dt><dfn id=dom-media-network_empty><code>NETWORK_EMPTY</code></dfn>（数値0）<dd>要素はまだ初期化されていない。すべての属性は、初期状態である。<dt><dfn id=dom-media-network_idle><code>NETWORK_IDLE</code></dfn>（数値1）<dd>要素の<a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm>リソース選択アルゴリズム</a>はアクティブであり、<a href=#media-resource id=network-states:media-resource>リソース</a>を選択しているが、この時点でネットワークを実際には使用していない。<dt><dfn id=dom-media-network_loading><code>NETWORK_LOADING</code></dfn>（数値2）<dd>ユーザーエージェントは、積極的にデータをダウンロードしようとしている。<dt><dfn id=dom-media-network_no_source><code>NETWORK_NO_SOURCE</code></dfn>（数値3）<dd>要素の<a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm-2>リソース選択アルゴリズム</a>はアクティブであるが、まだ使用する<a href=#media-resource id=network-states:media-resource-2>リソース</a>を見つけられていない。</dl>

  

  <p>The <a href=#concept-media-load-algorithm id=network-states:concept-media-load-algorithm-3>resource selection algorithm</a> defined
  below describes exactly when the <code id=network-states:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code>
  attribute changes value and what events fire to indicate changes in this state.</p>

  




  <h5 id=loading-the-media-resource><span class=secno>4.8.12.5</span> メディアリソースの読み込み<a href=#loading-the-media-resource class=self-link></a></h5><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27989" title="Should audio and video tracks be exposed cross-origin?">27989</a></div>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-load-dev><a href=#dom-media-load>load</a></code>()<dd>

    <p>要素をリセットさせ、最初から新しい<a href=#media-resource id=loading-the-media-resource:media-resource>メディアリソース</a>の選択と読み込みを開始させる。</p>

   </dl>

  

  <p>All <a href=#media-element id=loading-the-media-resource:media-element>media elements</a> have a <dfn id=can-autoplay-flag>can autoplay flag</dfn>,
  which must begin in the true state, and a <dfn id=delaying-the-load-event-flag>delaying-the-load-event flag</dfn>, which must
  begin in the false state. While the <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag>delaying-the-load-event flag</a> is true, the element
  must <a id=loading-the-media-resource:delay-the-load-event href=parsing.html#delay-the-load-event>delay the load event</a> of its document.</p>

  <p>When the <dfn id=dom-media-load><code>load()</code></dfn> method on a <a href=#media-element id=loading-the-media-resource:media-element-2>media
  element</a> is invoked, the user agent must run the <a href=#media-element-load-algorithm id=loading-the-media-resource:media-element-load-algorithm>media element load
  algorithm</a>.</p>

  <p>The <dfn id=media-element-load-algorithm>media element load algorithm</dfn> consists of the following steps.</p>

  <ol><li><p>Abort any already-running instance of the <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm>resource selection algorithm</a> for this
   element.</li><li><p>Let <var>pending tasks</var> be a list of all <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task>tasks</a>
   from the <a href=#media-element id=loading-the-media-resource:media-element-3>media element</a>'s <a href=#media-element-event-task-source id=loading-the-media-resource:media-element-event-task-source>media element event task source</a> in one of the
   <a href=webappapis.html#task-queue id=loading-the-media-resource:task-queue>task queues</a>.</li><li><p>For each task in <var>pending tasks</var> that would <a href=#resolve-pending-play-promises id=loading-the-media-resource:resolve-pending-play-promises>resolve pending play
   promises</a> or <a href=#reject-pending-play-promises id=loading-the-media-resource:reject-pending-play-promises>reject pending play promises</a>, immediately resolve or reject those
   promises in the order the corresponding tasks were queued.</li><li>

    <p>Remove each <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-2>task</a> in <var>pending tasks</var> from its
    <a id=loading-the-media-resource:task-queue-2 href=webappapis.html#task-queue>task queue</a></p>

    <p class=note>Basically, pending events and callbacks are discarded and promises in-flight to
    be resolved/rejected are resolved/rejected immediately when the media element starts loading a
    new resource.</p>

   </li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-4>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code> is set to <code id=loading-the-media-resource:dom-media-network_loading><a href=#dom-media-network_loading>NETWORK_LOADING</a></code> or <code id=loading-the-media-resource:dom-media-network_idle><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>, <a id=loading-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-abort><a href=#event-media-abort>abort</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-5>media element</a>.</li><li>

    <p>If the <a href=#media-element id=loading-the-media-resource:media-element-6>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code>
    is not set to <code id=loading-the-media-resource:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, then:</p>

    <ol><li><p><a id=loading-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a>
     named <code id=loading-the-media-resource:event-media-emptied><a href=#event-media-emptied>emptied</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-7>media
     element</a>.</li><li><p>If a fetching process is in progress for the <a href=#media-element id=loading-the-media-resource:media-element-8>media
     element</a>, the user agent should stop it.</li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-9>media element</a>'s <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object>assigned media provider object</a> is a
     <code id=loading-the-media-resource:mediasource><a data-x-internal=mediasource href=https://w3c.github.io/media-source/#idl-def-mediasource>MediaSource</a></code> object, then <a href=https://w3c.github.io/media-source/#mediasource-detach id=loading-the-media-resource:detaching-from-a-media-element data-x-internal=detaching-from-a-media-element>detach</a> it.</li><li><p><a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks">Forget the media element's media-resource-specific tracks</a>.</li><li><p>If <code id=loading-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> is not set to <code id=loading-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then set it to that state.</li><li>

     <p>If the <code id=loading-the-media-resource:dom-media-paused><a href=#dom-media-paused>paused</a></code> attribute is false, then:</p>

      <ol><li><p>Set the <code id=loading-the-media-resource:dom-media-paused-2><a href=#dom-media-paused>paused</a></code> attribute to true.</li><li><p><a href=#take-pending-play-promises id=loading-the-media-resource:take-pending-play-promises>Take pending play promises</a> and <a href=#reject-pending-play-promises id=loading-the-media-resource:reject-pending-play-promises-2>reject pending play promises</a>
       with the result and an <a id=loading-the-media-resource:aborterror href=https://triple-underscore.github.io/WebIDL-ja.html#aborterror data-x-internal=aborterror>"<code>AbortError</code>"</a>
       <code id=loading-the-media-resource:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>

     </li><li><p>If <code id=loading-the-media-resource:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code> is true, set it to false.</li><li>

      <p>Set the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position>current playback position</a> to 0.</p>

      <p>Set the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position>official playback position</a> to 0.</p>

      <p>If this changed the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position-2>official playback position</a>, then <a id=loading-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a>
      to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-3 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-10>media element</a>.</p>

     </li><li><p>Set the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset>timeline offset</a> to Not-a-Number (NaN).</li><li>

      <p>Update the <code id=loading-the-media-resource:dom-media-duration><a href=#dom-media-duration>duration</a></code> attribute to Not-a-Number
      (NaN).</p>

      <p class=note>The user agent <a href=#durationChange>will not</a> fire a <code id=loading-the-media-resource:event-media-durationchange><a href=#event-media-durationchange>durationchange</a></code> event for this particular change of
      the duration.</p>

     </li></ol>

   </li><li><p>Set the <code id=loading-the-media-resource:dom-media-playbackrate><a href=#dom-media-playbackrate>playbackRate</a></code> attribute to the value of
   the <code id=loading-the-media-resource:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> attribute.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error><a href=#dom-media-error>error</a></code> attribute to null and the
   <a href=#can-autoplay-flag id=loading-the-media-resource:can-autoplay-flag>can autoplay flag</a> to true.</li><li><p>Invoke the <a href=#media-element id=loading-the-media-resource:media-element-11>media element</a>'s <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-2>resource selection algorithm</a>.</li><li>

    <p class=note>Playback of any previously playing <a href=#media-resource id=loading-the-media-resource:media-resource-2>media resource</a> for this element
    stops.</p>

   </li></ol>

  <p>The <dfn id=concept-media-load-algorithm>resource selection algorithm</dfn> for a
  <a href=#media-element id=loading-the-media-resource:media-element-12>media element</a> is as follows. This algorithm is always invoked as part of a <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-3>task</a>, but one
  of the first steps in the algorithm is to return and continue running the remaining steps
  <a id=loading-the-media-resource:in-parallel href=infrastructure.html#in-parallel>in parallel</a>. In addition, this algorithm interacts
  closely with the <a id=loading-the-media-resource:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section>synchronous sections</a> (which are triggered as part of the <a id=loading-the-media-resource:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). Steps in such sections are marked with ⌛.</p>

  <ol><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-3><a href=#dom-media-networkstate>networkState</a></code> attribute to
   the <code id=loading-the-media-resource:dom-media-network_no_source><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag>show poster flag</a> to true.</li><li><p>Set the <a href=#media-element id=loading-the-media-resource:media-element-13>media element</a>'s <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-2>delaying-the-load-event flag</a> to true
   (this <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-2>delays the load event</a>).</li><li><p><a id=loading-the-media-resource:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>, allowing the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-4>task</a> that invoked this algorithm to continue. The <a id=loading-the-media-resource:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous
   section</a> consists of all the remaining steps of this algorithm until the algorithm says the
   <a id=loading-the-media-resource:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-4>synchronous sections</a> are marked with ⌛.)</li><li>

    <p>⌛ If the <a href=#media-element id=loading-the-media-resource:media-element-14>media element</a>'s <a href=#blocked-on-parser id=loading-the-media-resource:blocked-on-parser>blocked-on-parser</a> flag is false,
    then <a href=#populate-the-list-of-pending-text-tracks id=loading-the-media-resource:populate-the-list-of-pending-text-tracks>populate the list of pending text tracks</a>.</p>

   </li><li>

    <p>⌛ If the <a href=#media-element id=loading-the-media-resource:media-element-15>media element</a> has an <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-2>assigned media provider
    object</a>, then let <var>mode</var> be <i>object</i>.</p>

    <p>⌛ Otherwise, if the <a href=#media-element id=loading-the-media-resource:media-element-16>media element</a> has no <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-3>assigned media provider
    object</a> but has a <code id=loading-the-media-resource:attr-media-src><a href=#attr-media-src>src</a></code>
    attribute, then let <var>mode</var> be <i>attribute</i>.</p>

    <p>⌛ Otherwise, if the <a href=#media-element id=loading-the-media-resource:media-element-17>media element</a> does not have an <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-4>assigned media provider
    object</a> and does not have a <code id=loading-the-media-resource:attr-media-src-2><a href=#attr-media-src>src</a></code> attribute, but does have a <code id=loading-the-media-resource:the-source-element><a href=embedded-content.html#the-source-element>source</a></code> element child, then
    let <var>mode</var> be <i>children</i> and let <var>candidate</var>
    be the first such <code id=loading-the-media-resource:the-source-element-2><a href=embedded-content.html#the-source-element>source</a></code> element child in <a id=loading-the-media-resource:tree-order href=https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order data-x-internal=tree-order>tree order</a>.</p>

    <p>⌛ Otherwise the <a href=#media-element id=loading-the-media-resource:media-element-18>media element</a> has no <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-5>assigned media provider
    object</a> and has neither a <code id=loading-the-media-resource:attr-media-src-3><a href=#attr-media-src>src</a></code> attribute nor a <code id=loading-the-media-resource:the-source-element-3><a href=embedded-content.html#the-source-element>source</a></code> element child: set the
    <code id=loading-the-media-resource:dom-media-networkstate-4><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, and return; the
    <a id=loading-the-media-resource:synchronous-section-5 href=webappapis.html#synchronous-section>synchronous section</a> ends.</p>

   </li><li><p>⌛ Set the <a href=#media-element id=loading-the-media-resource:media-element-19>media element</a>'s <code id=loading-the-media-resource:dom-media-networkstate-5><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-2><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li><li><p>⌛ <a id=loading-the-media-resource:queue-a-task-4 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-4 data-x-internal=concept-event-fire>fire an
   event</a> named <code id=loading-the-media-resource:event-media-loadstart><a href=#event-media-loadstart>loadstart</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-20>media
   element</a>.</li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class=switch><dt>If <var>mode</var> is <i>object</i><dd>

      <ol><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-currentsrc><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to
       the empty string.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-6 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-2 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource>resource fetch algorithm</a>
       with the <a href=#assigned-media-provider-object id=loading-the-media-resource:assigned-media-provider-object-6>assigned media provider object</a>. If that algorithm returns without
       aborting <em>this</em> one, then the load failed.</li><li><p><i>Failed with media provider</i>: Reaching this step indicates that the media
       resource failed to load. <a href=#take-pending-play-promises id=loading-the-media-resource:take-pending-play-promises-2>Take pending play promises</a> and <a id=loading-the-media-resource:queue-a-task-5 href=webappapis.html#queue-a-task>queue a
       task</a> to run the <a href=#dedicated-media-source-failure-steps id=loading-the-media-resource:dedicated-media-source-failure-steps>dedicated media source failure steps</a> with the
       result.</li><li><p>Wait for the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-5>task</a> queued by the previous step to have
       executed.</li><li><p>Return. The element won't attempt to load another resource until this
       algorithm is triggered again.</li></ol>

     <dt>If <var>mode</var> is <i>attribute</i><dd>

      <ol><li><p>⌛ If the <code id=loading-the-media-resource:attr-media-src-4><a href=#attr-media-src>src</a></code>
       attribute's value is the empty string, then end the <a id=loading-the-media-resource:synchronous-section-7 href=webappapis.html#synchronous-section>synchronous section</a>, and jump
       down to the <i>failed with attribute</i> step below.</li><li><p>⌛ Let <var>urlString</var> and <var>urlRecord</var> be the <a id=loading-the-media-resource:resulting-url-string href=urls-and-fetching.html#resulting-url-string>resulting URL
       string</a> and the <a id=loading-the-media-resource:resulting-url-record href=urls-and-fetching.html#resulting-url-record>resulting URL record</a>, respectively, that would have
       resulted from <a href=urls-and-fetching.html#parse-a-url id=loading-the-media-resource:parse-a-url>parsing</a> the <a id=loading-the-media-resource:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> specified by the
       <code id=loading-the-media-resource:attr-media-src-5><a href=#attr-media-src>src</a></code> attribute's value relative to the <a href=#media-element id=loading-the-media-resource:media-element-21>media
       element</a>'s <a id=loading-the-media-resource:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> when the <code id=loading-the-media-resource:attr-media-src-6><a href=#attr-media-src>src</a></code>
       attribute was last changed.</p> 

       </li><li><p>⌛ If <var>urlString</var> was obtained successfully, set the <code id=loading-the-media-resource:dom-media-currentsrc-2><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to <var>urlString</var>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-8 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-3 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>If <var>urlRecord</var> was obtained successfully, run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource-2>resource fetch algorithm</a> with
       <var>urlRecord</var>. If that algorithm returns without aborting <em>this</em> one, then the
       load failed.</li><li><p><i>Failed with attribute</i>: Reaching this step indicates that the media resource
       failed to load or that the given <a id=loading-the-media-resource:url-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> could not be <a href=urls-and-fetching.html#parse-a-url id=loading-the-media-resource:parse-a-url-2>parsed</a>. <a href=#take-pending-play-promises id=loading-the-media-resource:take-pending-play-promises-3>Take pending play promises</a> and <a id=loading-the-media-resource:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to
       run the <a href=#dedicated-media-source-failure-steps id=loading-the-media-resource:dedicated-media-source-failure-steps-2>dedicated media source failure steps</a> with the result.</li><li><p>Wait for the <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-6>task</a> queued by the previous step to have
       executed.</li><li><p>Return. The element won't attempt to load another resource until this
       algorithm is triggered again.</li></ol>

     <dt>Otherwise (<var>mode</var> is <i>children</i>)<dd>

      <ol><li>

        <p>⌛ Let <var>pointer</var> be a position defined by two adjacent nodes in the
        <a href=#media-element id=loading-the-media-resource:media-element-22>media element</a>'s child list, treating the start of the list (before the first
        child in the list, if any) and end of the list (after the last child in the list, if any) as
        nodes in their own right. One node is the node before <var>pointer</var>, and the
        other node is the node after <var>pointer</var>. Initially, let <var>pointer</var> be the position between the <var>candidate</var> node and the
        next node, if there are any, or the end of the list, if it is the last node.</p>

        <p>As <a id=loading-the-media-resource:nodes-are-inserted href=infrastructure.html#nodes-are-inserted>nodes are inserted</a> and <a href=infrastructure.html#nodes-are-removed id=loading-the-media-resource:nodes-are-removed>removed</a> into the <a href=#media-element id=loading-the-media-resource:media-element-23>media element</a>, <var>pointer</var> must be updated as follows:</p>

        <dl><dt>If a new <a href=infrastructure.html#nodes-are-inserted id=loading-the-media-resource:nodes-are-inserted-2>node is inserted</a> between the two nodes that define <var>pointer</var><dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the new node. In other words, insertions at <var>pointer</var> go after <var>pointer</var>.<dt>If the node before <var>pointer</var> is removed<dd>Let <var>pointer</var> be the point between the node after <var>pointer</var> and the node before the node after <var>pointer</var>. In
         other words, <var>pointer</var> doesn't move relative to the remaining nodes.<dt>If the node after <var>pointer</var> is removed<dd>Let <var>pointer</var> be the point between the node before <var>pointer</var> and the node after the node before <var>pointer</var>. Just
         as with the previous case, <var>pointer</var> doesn't move relative to the remaining
         nodes.</dl>

        <p>Other changes don't affect <var>pointer</var>.</p>

       </li><li><p>⌛ <i>Process candidate</i>: If <var>candidate</var> does not have a
       <code id=loading-the-media-resource:attr-source-src><a href=embedded-content.html#attr-source-src>src</a></code> attribute, or if its <code id=loading-the-media-resource:attr-source-src-2><a href=embedded-content.html#attr-source-src>src</a></code> attribute's value is the empty string, then end the
       <a id=loading-the-media-resource:synchronous-section-9 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</li><li><p>⌛ Let <var>urlString</var> and <var>urlRecord</var> be the <a id=loading-the-media-resource:resulting-url-string-2 href=urls-and-fetching.html#resulting-url-string>resulting URL
       string</a> and the <a id=loading-the-media-resource:resulting-url-record-2 href=urls-and-fetching.html#resulting-url-record>resulting URL record</a>, respectively, that would have
       resulted from <a href=urls-and-fetching.html#parse-a-url id=loading-the-media-resource:parse-a-url-3>parsing</a> the <a id=loading-the-media-resource:url-3 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> specified by
       <var>candidate</var>'s <code id=loading-the-media-resource:attr-source-src-3><a href=embedded-content.html#attr-source-src>src</a></code> attribute's value relative
       to the <var>candidate</var>'s <a id=loading-the-media-resource:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> when the <code id=loading-the-media-resource:attr-source-src-4><a href=embedded-content.html#attr-source-src>src</a></code> attribute was last changed.</p> 

       </li><li><p>⌛ If <var>urlString</var> was not obtained successfully, then end the
       <a id=loading-the-media-resource:synchronous-section-10 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step
       below.</li><li><p>⌛ If <var>candidate</var> has a <code id=loading-the-media-resource:attr-source-type><a href=embedded-content.html#attr-source-type>type</a></code> attribute whose value, when parsed as a <a id=loading-the-media-resource:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME
       type</a> (including any codecs described by the <code>codecs</code> parameter, for
       types that define that parameter), represents <a href=#a-type-that-the-user-agent-knows-it-cannot-render id=loading-the-media-resource:a-type-that-the-user-agent-knows-it-cannot-render>a type that the user agent knows it cannot
       render</a>, then end the <a id=loading-the-media-resource:synchronous-section-11 href=webappapis.html#synchronous-section>synchronous section</a>, and jump down to the <i>failed with elements</i> step below.</li><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-currentsrc-3><a href=#dom-media-currentsrc>currentSrc</a></code> attribute to
       <var>urlString</var>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-12 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-4 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Run the <a href=#concept-media-load-resource id=loading-the-media-resource:concept-media-load-resource-3>resource fetch algorithm</a>
       with <var>urlRecord</var>. If that algorithm returns without aborting <em>this</em> one,
       then the load failed.</li><li><p><i>Failed with elements</i>: <a id=loading-the-media-resource:queue-a-task-7 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-5 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-source-error><a href=#event-source-error>error</a></code> at the <var>candidate</var> element.</li><li><p><a id=loading-the-media-resource:await-a-stable-state-2 href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=loading-the-media-resource:synchronous-section-13 href=webappapis.html#synchronous-section>synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a id=loading-the-media-resource:synchronous-section-14 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-15>synchronous sections</a> are marked with ⌛.)</li><li><p>⌛ <a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-2">Forget the media element's media-resource-specific
       tracks</a>.</li><li><p>⌛ <i>Find next candidate</i>: Let <var>candidate</var> be
       null.</li><li><p>⌛ <i>Search loop</i>: If the node after <var>pointer</var> is
       the end of the list, then jump to the <i>waiting</i> step below.</li><li><p>⌛ If the node after <var>pointer</var> is a <code id=loading-the-media-resource:the-source-element-4><a href=embedded-content.html#the-source-element>source</a></code> element,
       let <var>candidate</var> be that element.</li><li><p>⌛ Advance <var>pointer</var> so that the node before <var>pointer</var> is now the node that was after <var>pointer</var>, and the node
       after <var>pointer</var> is the node after the node that used to be after <var>pointer</var>, if any.</li><li><p>⌛ If <var>candidate</var> is null, jump back to the <i>search
       loop</i> step. Otherwise, jump back to the <i>process candidate</i> step.</li><li><p>⌛ <i>Waiting</i>: Set the element's <code id=loading-the-media-resource:dom-media-networkstate-6><a href=#dom-media-networkstate>networkState</a></code> attribute to the <code id=loading-the-media-resource:dom-media-network_no_source-2><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>⌛ Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-2>show poster flag</a> to true.</li><li><p>⌛ <a id=loading-the-media-resource:queue-a-task-8 href=webappapis.html#queue-a-task>Queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-3>delaying-the-load-event
       flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-3>delaying the load
       event</a>.</li><li><p>End the <a id=loading-the-media-resource:synchronous-section-16 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
       <a id=loading-the-media-resource:in-parallel-5 href=infrastructure.html#in-parallel>in parallel</a>.</li><li><p>Wait until the node after <var>pointer</var> is a node other than the end of
       the list. (This step might wait forever.)</li><li><p><a id=loading-the-media-resource:await-a-stable-state-3 href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=loading-the-media-resource:synchronous-section-17 href=webappapis.html#synchronous-section>synchronous section</a>
       consists of all the remaining steps of this algorithm until the algorithm says the
       <a id=loading-the-media-resource:synchronous-section-18 href=webappapis.html#synchronous-section>synchronous section</a> has ended. (Steps in <a href=webappapis.html#synchronous-section id=loading-the-media-resource:synchronous-section-19>synchronous sections</a> are marked with ⌛.)</li><li><p>⌛ Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-4>delaying-the-load-event flag</a> back to true (this
       <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-4>delays the load event</a> again, in case it hasn't been
       fired yet).</p>

       </li><li><p>⌛ Set the <code id=loading-the-media-resource:dom-media-networkstate-7><a href=#dom-media-networkstate>networkState</a></code> back to <code id=loading-the-media-resource:dom-media-network_loading-3><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li><li><p>⌛ Jump back to the <i>find next candidate</i> step above.</li></ol>

     </dl>

    <p>The <dfn id=dedicated-media-source-failure-steps>dedicated media source failure steps</dfn> with a list of promises
    <var>promises</var> are the following steps:</p>

    <ol><li><p>Set the <code id=loading-the-media-resource:dom-media-error-2><a href=#dom-media-error>error</a></code> attribute to the result of
     <a href=#creating-a-mediaerror id=loading-the-media-resource:creating-a-mediaerror>creating a <code>MediaError</code></a> with <code id=loading-the-media-resource:dom-mediaerror-media_err_src_not_supported><a href=#dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a></code>.</li><li><p><a href="#forget-the-media-element's-media-resource-specific-tracks" id="loading-the-media-resource:forget-the-media-element's-media-resource-specific-tracks-3">Forget the media element's media-resource-specific tracks</a>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-8><a href=#dom-media-networkstate>networkState</a></code> attribute to
     the <code id=loading-the-media-resource:dom-media-network_no_source-3><a href=#dom-media-network_no_source>NETWORK_NO_SOURCE</a></code> value.</li><li><p>Set the element's <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-3>show poster flag</a> to true.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-6 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-error><a href=#event-media-error>error</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-24>media element</a>.</li><li><p><a href=#reject-pending-play-promises id=loading-the-media-resource:reject-pending-play-promises-3>Reject pending play promises</a> with <var>promises</var> and a
     <a id=loading-the-media-resource:notsupportederror href=https://triple-underscore.github.io/WebIDL-ja.html#notsupportederror data-x-internal=notsupportederror>"<code>NotSupportedError</code>"</a> <code id=loading-the-media-resource:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-5>delaying-the-load-event flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-5>delaying the load event</a>.</li></ol>

   </li></ol>

  <p>The <dfn id=concept-media-load-resource>resource fetch algorithm</dfn> for a <a href=#media-element id=loading-the-media-resource:media-element-25>media
  element</a> and a given <a id=loading-the-media-resource:url-record href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url-record>URL record</a> or <a href=#media-provider-object id=loading-the-media-resource:media-provider-object>media provider object</a> is as
  follows:</p>

  <ol><li><p>If the algorithm was invoked with <a href=#media-provider-object id=loading-the-media-resource:media-provider-object-2>media provider object</a> or a <a id=loading-the-media-resource:url-record-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url-record>URL
   record</a> whose <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-object id=loading-the-media-resource:concept-url-object data-x-internal=concept-url-object>object</a> is a <a href=#media-provider-object id=loading-the-media-resource:media-provider-object-3>media provider
   object</a>, then let <var>mode</var> be <i>local</i>. Otherwise let <var>mode</var> be
   <i>remote</i>.</li><li><p>If <var>mode</var> is <i>remote</i>, then let the <var>current media resource</var> be the
   resource given by the <a id=loading-the-media-resource:url-record-3 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url-record>URL record</a> passed to this algorithm; otherwise, let the
   <var>current media resource</var> be the resource given by the <a href=#media-provider-object id=loading-the-media-resource:media-provider-object-4>media provider
   object</a>. Either way, the <var>current media resource</var> is now the element's <a href=#media-resource id=loading-the-media-resource:media-resource-3>media
   resource</a>.</li><li><p>Remove all <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track>media-resource-specific text
   tracks</a> from the <a href=#media-element id=loading-the-media-resource:media-element-26>media element</a>'s <a href=#list-of-pending-text-tracks id=loading-the-media-resource:list-of-pending-text-tracks>list of pending text tracks</a>, if
   any.</p>


   </li><li>

    <p>Run the appropriate steps from the following list:</p>

    <dl class=switch><dt>If <var>mode</var> is remote<dd>

      <ol><li>

        <p>Optionally, run the following substeps. This is the expected behavior if the user agent
        intends to not attempt to fetch the resource until the user requests it explicitly (e.g. as
        a way to implement the <code id=loading-the-media-resource:attr-media-preload><a href=#attr-media-preload>preload</a></code> attribute's <code id=loading-the-media-resource:attr-media-preload-none><a href=#attr-media-preload-none>none</a></code> keyword).</p>

        <ol><li><p>Set the <code id=loading-the-media-resource:dom-media-networkstate-9><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-2><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>.</li><li><p><a id=loading-the-media-resource:queue-a-task-9 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-7 data-x-internal=concept-event-fire>fire an event</a>
         named <code id=loading-the-media-resource:event-media-suspend><a href=#event-media-suspend>suspend</a></code> at the element.</li><li><p><a id=loading-the-media-resource:queue-a-task-10 href=webappapis.html#queue-a-task>Queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-6>delaying-the-load-event flag</a>
         to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-6>delaying the load
         event</a>.</li><li><p>Wait for the task to be run.</li><li><p>Wait for an implementation-defined event (e.g. the user requesting that the media
         element begin playback).</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-7>delaying-the-load-event flag</a> back to true (this <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-7>delays the load event</a> again, in case it hasn't been fired
         yet).</p>

         </li><li><p>Set the <code id=loading-the-media-resource:dom-media-networkstate-10><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-4><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</li></ol>

       </li><li>
        <p>Let <var>destination</var> be "<code>audio</code>" if the <a href=#media-element id=loading-the-media-resource:media-element-27>media
        element</a> is an <code id=loading-the-media-resource:the-audio-element><a href=#the-audio-element>audio</a></code> element and to "<code>video</code>"
        otherwise.</p>

        <p>Let <var>request</var> be the result of <a href=urls-and-fetching.html#create-a-potential-cors-request id=loading-the-media-resource:create-a-potential-cors-request>creating a potential-CORS request</a> given
        <var>current media resource</var>'s <a id=loading-the-media-resource:url-record-4 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url-record>URL record</a>, <var>destination</var>, and the
        <a href=#media-element id=loading-the-media-resource:media-element-28>media element</a>'s <code id=loading-the-media-resource:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code>
        content attribute value.

        

        <p>Set <var>request</var>'s <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-client id=loading-the-media-resource:concept-request-client data-x-internal=concept-request-client>client</a> to the
        <a href=#media-element id=loading-the-media-resource:media-element-29>media element</a>'s <a id=loading-the-media-resource:node-document-3 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=loading-the-media-resource:window><a href=window-object.html#window>Window</a></code> object's
        <a id=loading-the-media-resource:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>.</p>

        <p><a href=https://triple-underscore.github.io/Fetch-ja.html#concept-fetch id=loading-the-media-resource:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.

        

        <p>The <var>response</var>'s <a id=loading-the-media-resource:unsafe-response href=urls-and-fetching.html#unsafe-response>unsafe response</a> obtained in this fashion, if any,
        contains the <a href=#media-data id=loading-the-media-resource:media-data>media data</a>. It can be <a id=loading-the-media-resource:cors-same-origin href=urls-and-fetching.html#cors-same-origin>CORS-same-origin</a> or
        <a id=loading-the-media-resource:cors-cross-origin href=urls-and-fetching.html#cors-cross-origin>CORS-cross-origin</a>; this affects whether subtitles referenced in the <a href=#media-data id=loading-the-media-resource:media-data-2>media
        data</a> are exposed in the API and, for <code id=loading-the-media-resource:the-video-element><a href=#the-video-element>video</a></code> elements, whether a
        <code id=loading-the-media-resource:the-canvas-element><a href=canvas.html#the-canvas-element>canvas</a></code> gets tainted when the video is drawn on it.</p>

        <p>The <dfn id=stall-timeout>stall timeout</dfn> is a user-agent defined length of time, which should be
        about three seconds. When a <a href=#media-element id=loading-the-media-resource:media-element-30>media element</a> that is actively attempting to obtain
        <a href=#media-data id=loading-the-media-resource:media-data-3>media data</a> has failed to receive any data for a duration equal to the
        <a href=#stall-timeout id=loading-the-media-resource:stall-timeout>stall timeout</a>, the user agent must <a id=loading-the-media-resource:queue-a-task-11 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-8 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-stalled><a href=#event-media-stalled>stalled</a></code> at the element.</p>

        <p>User agents may allow users to selectively block or slow <a href=#media-data id=loading-the-media-resource:media-data-4>media data</a> downloads.
        When a <a href=#media-element id=loading-the-media-resource:media-element-31>media element</a>'s download has been blocked altogether, the user agent must
        act as if it was stalled (as opposed to acting as if the connection was closed). The rate of the
        download may also be throttled automatically by the user agent, e.g. to balance the download
        with other connections sharing the same bandwidth.</p>

        <p id=resourceSuspend>User agents may decide to not download more content at any time, e.g.
        after buffering five minutes of a one hour media resource, while waiting for the user to decide
        whether to play the resource or not, while waiting for user input in an interactive resource, or
        when the user navigates away from the page. When a <a href=#media-element id=loading-the-media-resource:media-element-32>media element</a>'s download has
        been suspended, the user agent must <a id=loading-the-media-resource:queue-a-task-12 href=webappapis.html#queue-a-task>queue a task</a>, to set the <code id=loading-the-media-resource:dom-media-networkstate-11><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-3><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-9 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-suspend-2><a href=#event-media-suspend>suspend</a></code> at the element. If and when downloading of the
        resource resumes, the user agent must <a id=loading-the-media-resource:queue-a-task-13 href=webappapis.html#queue-a-task>queue a task</a> to set the <code id=loading-the-media-resource:dom-media-networkstate-12><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-5><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>. Between the queuing of these
        tasks, the load is suspended (so <code id=loading-the-media-resource:event-media-progress><a href=#event-media-progress>progress</a></code> events
        don't fire, as described above).</p>

        <p class=note>The <code id=loading-the-media-resource:attr-media-preload-2><a href=#attr-media-preload>preload</a></code> attribute provides a hint
        regarding how much buffering the author thinks is advisable, even in the absence of the <code id=loading-the-media-resource:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> attribute.</p>

        <p>When a user agent decides to completely suspend a download, e.g., if it is waiting until
        the user starts playback before downloading any further content, the user agent must
        <a id=loading-the-media-resource:queue-a-task-14 href=webappapis.html#queue-a-task>queue a task</a> to set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-8>delaying-the-load-event flag</a> to
        false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-8>delaying the load event</a>.</p>

        <p>The user agent may use whatever means necessary to fetch the resource (within the constraints
        put forward by this and other specifications); for example, reconnecting to the server in the
        face of network errors, using HTTP range retrieval requests, or switching to a streaming
        protocol. The user agent must consider a resource erroneous only if it has given up trying to
        fetch it.</p>

        <p>To determine the format of the <a href=#media-resource id=loading-the-media-resource:media-resource-4>media resource</a>, the user agent must use the
        <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically id=loading-the-media-resource:content-type-sniffing:-video data-x-internal=content-type-sniffing:-video>rules for sniffing audio and video specifically</a>.</p>

        <p>While the load is not suspended (see below), every 350ms (±200ms) or for every byte
        received, whichever is <em>least</em> frequent, <a id=loading-the-media-resource:queue-a-task-15 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-10 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-progress-2><a href=#event-media-progress>progress</a></code> at the element.</p>

        <p>The <a id=loading-the-media-resource:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-7>tasks</a> to
        process the data as it is being fetched must each <a id=loading-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> <a id=loading-the-media-resource:queue-a-task-16 href=webappapis.html#queue-a-task>queue a task</a> to
        run the first appropriate steps from the <a href=#media-data-processing-steps-list id=loading-the-media-resource:media-data-processing-steps-list>media data processing steps list</a>
        below. (A new task is used for this so that the work described below occurs relative to the
        <a href=#media-element-event-task-source id=loading-the-media-resource:media-element-event-task-source-2>media element event task source</a> rather than the <a id=loading-the-media-resource:networking-task-source-2 href=webappapis.html#networking-task-source>networking task
        source</a>.)</p>

        <p>When the <a id=loading-the-media-resource:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> has <a href=webappapis.html#queue-a-task id=loading-the-media-resource:queue-a-task-17>queued</a> the last <a href=webappapis.html#concept-task id=loading-the-media-resource:concept-task-8>task</a> as part of fetching the
        <a href=#media-resource id=loading-the-media-resource:media-resource-5>media resource</a> (i.e. once the download has completed), if the fetching process
        completes without errors, including decoding the media data, and if all of the data is available
        to the user agent without network access, then, the user agent must move on to the <i>final step</i> below.
        This might never happen, e.g. when streaming an infinite resource such as Web radio, or if the
        resource is longer than the user agent's ability to cache data.</p>

        <p>While the user agent might still need network access to obtain parts of the <a href=#media-resource id=loading-the-media-resource:media-resource-6>media
        resource</a>, the user agent must remain on this step.</p>

        <p class=example>For example, if the user agent has discarded the first half of a video, the
        user agent will remain at this step even once the <a href=#ended-playback id=loading-the-media-resource:ended-playback>playback has
        ended</a>, because there is always the chance the user will seek back to the start. In fact,
        in this situation, once <a href=#ended-playback id=loading-the-media-resource:ended-playback-2>playback has ended</a>, the user agent
        will end up firing a <code id=loading-the-media-resource:event-media-suspend-3><a href=#event-media-suspend>suspend</a></code> event, as described
        earlier.</p>

       </li></ol>

     <dt>Otherwise (<var>mode</var> is <i>local</i>)<dd>

      <p>The resource described by the <var>current media resource</var>, if any, contains the
      <a href=#media-data id=loading-the-media-resource:media-data-5>media data</a>. It is <a id=loading-the-media-resource:cors-same-origin-2 href=urls-and-fetching.html#cors-same-origin>CORS-same-origin</a>.  </p>

      <p>If the <var>current media resource</var> is a raw data stream (e.g. from a
      <code id=loading-the-media-resource:file><a data-x-internal=file href=https://w3c.github.io/FileAPI/#dfn-file>File</a></code> object), then to determine the format of the <a href=#media-resource id=loading-the-media-resource:media-resource-7>media resource</a>,
      the user agent must use the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically id=loading-the-media-resource:content-type-sniffing:-video-2 data-x-internal=content-type-sniffing:-video>rules for sniffing audio and video specifically</a>.
      Otherwise, if the data stream is pre-decoded, then the format is the format given by the
      relevant specification.</p>

      <p>Whenever new data for the <var>current media resource</var> becomes available, <a id=loading-the-media-resource:queue-a-task-18 href=webappapis.html#queue-a-task>queue
      a task</a> to run the first appropriate steps from the <a href=#media-data-processing-steps-list id=loading-the-media-resource:media-data-processing-steps-list-2>media data processing steps
      list</a> below.</p>

      <p>When the <var>current media resource</var> is permanently exhausted (e.g. all the bytes of
      a <code id=loading-the-media-resource:blob><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#dfn-Blob>Blob</a></code> have been processed), if there were no decoding errors, then the user
      agent must move on to the <i>final step</i> below. This might never happen, e.g. if the
      <var>current media resource</var> is a <code id=loading-the-media-resource:mediastream><a data-x-internal=mediastream href=https://w3c.github.io/mediacapture-main/getusermedia.html#idl-def-mediastream>MediaStream</a></code>.</p>

     </dl>

    <p>The <dfn id=media-data-processing-steps-list>media data processing steps list</dfn> is as follows:</p>

    <dl class=switch><dt>If the <a href=#media-data id=loading-the-media-resource:media-data-6>media data</a> cannot be fetched at all, due to network errors, causing the
     user agent to give up trying to fetch the resource<dt>If the <a href=#media-data id=loading-the-media-resource:media-data-7>media data</a> can be fetched but is found by inspection to be in an
     unsupported format, or can otherwise not be rendered at all<dd>

      <p>DNS errors, HTTP 4xx and 5xx errors (and equivalents in other protocols), and other fatal
      network errors that occur before the user agent has established whether the <var>current media resource</var> is usable, as well as the file using an unsupported
      container format, or using unsupported codecs for all the data, must cause the user agent to
      execute the following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Abort this subalgorithm, returning to the <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-3>resource selection algorithm</a>.</p>

      </li></ol>

     <dt id=found-another-audio-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-8>media resource</a> is found to have an audio
     track<dd>

      <ol><li><p>Create an <code id=loading-the-media-resource:audiotrack><a href=#audiotrack>AudioTrack</a></code> object to represent the audio track.</li><li><p>Update the <a href=#media-element id=loading-the-media-resource:media-element-33>media element</a>'s <code id=loading-the-media-resource:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code> attribute's <code id=loading-the-media-resource:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>
       object with the new <code id=loading-the-media-resource:audiotrack-2><a href=#audiotrack>AudioTrack</a></code> object.</li><li><p>Let <var>enable</var> be <i>unknown</i>.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-9>media resource</a> or the <a id=loading-the-media-resource:url-4 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> of the <var>current
        media resource</var> indicate a particular set of audio tracks to enable, or if the user
        agent has information that would facilitate the selection of specific audio tracks to
        improve the user's experience, then: if this audio track is one of the ones to enable, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class=example>This could be triggered by <a id=loading-the-media-resource:media-fragment-syntax href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>media fragment syntax</a>, but it
        could also be triggered e.g. by the user agent selecting a 5.1 surround sound audio track
        over a stereo audio track.</p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href=#media-element id=loading-the-media-resource:media-element-34>media
       element</a> does not yet have an <a href=#dom-audiotrack-enabled id=loading-the-media-resource:dom-audiotrack-enabled>enabled</a>
       audio track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</li><li><p>If <var>enable</var> is <i>true</i>, then enable this audio track,
       otherwise, do not enable this audio track.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-11 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code> at this <code id=loading-the-media-resource:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> object,
       using <code id=loading-the-media-resource:trackevent><a href=#trackevent>TrackEvent</a></code>, with the <code id=loading-the-media-resource:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code>
       attribute initialized to the new <code id=loading-the-media-resource:audiotrack-3><a href=#audiotrack>AudioTrack</a></code> object.</li></ol>

     <dt id=found-another-video-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-10>media resource</a> is found to have a video
     track<dd>

      <ol><li><p>Create a <code id=loading-the-media-resource:videotrack><a href=#videotrack>VideoTrack</a></code> object to represent the video track.</li><li><p>Update the <a href=#media-element id=loading-the-media-resource:media-element-35>media element</a>'s <code id=loading-the-media-resource:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> attribute's <code id=loading-the-media-resource:videotracklist><a href=#videotracklist>VideoTrackList</a></code>
       object with the new <code id=loading-the-media-resource:videotrack-2><a href=#videotrack>VideoTrack</a></code> object.</li><li><p>Let <var>enable</var> be <i>unknown</i>.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-11>media resource</a> or the <a id=loading-the-media-resource:url-5 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> of the <var>current
        media resource</var> indicate a particular set of video tracks to enable, or if the user
        agent has information that would facilitate the selection of specific video tracks to
        improve the user's experience, then: if this video track is the first such video track, then
        set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var>
        to <i>false</i>.</p>

        <p class=example>This could again be triggered by <a id=loading-the-media-resource:media-fragment-syntax-2 href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>media fragment syntax</a>.</p>

       </li><li><p>If <var>enable</var> is still <i>unknown</i>, then, if the <a href=#media-element id=loading-the-media-resource:media-element-36>media
       element</a> does not yet have a <a href=#dom-videotrack-selected id=loading-the-media-resource:dom-videotrack-selected>selected</a>
       video track, then set <var>enable</var> to <i>true</i>, otherwise, set <var>enable</var> to <i>false</i>.</li><li><p>If <var>enable</var> is <i>true</i>, then select this track and unselect any
       previously selected video tracks, otherwise, do not select this video track. If other tracks
       are unselected, then <a href=#toggle-video-track>a <code>change</code> event will be fired.</a></li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-12 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-addtrack-2><a href=#event-media-addtrack>addtrack</a></code> at this <code id=loading-the-media-resource:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object,
       using <code id=loading-the-media-resource:trackevent-2><a href=#trackevent>TrackEvent</a></code>, with the <code id=loading-the-media-resource:dom-trackevent-track-2><a href=#dom-trackevent-track>track</a></code>
       attribute initialized to the new <code id=loading-the-media-resource:videotrack-3><a href=#videotrack>VideoTrack</a></code> object.</li></ol>

     <dt id=getting-media-metadata>Once enough of the <a href=#media-data id=loading-the-media-resource:media-data-8>media data</a> has been fetched to
     determine the duration of the <a href=#media-resource id=loading-the-media-resource:media-resource-12>media resource</a>, its dimensions, and other
     metadata<dd>

      <p>This indicates that the resource is usable. The user agent must follow these substeps:</p>

      <ol><li>

        <p><a href=#defineTimeline id=loading-the-media-resource:defineTimeline>Establish the media timeline</a> for the purposes of the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position-2>current playback
        position</a> and the <a href=#earliest-possible-position id=loading-the-media-resource:earliest-possible-position>earliest possible position</a>, based on the <a href=#media-data id=loading-the-media-resource:media-data-9>media data</a>.</p>

       </li><li>

        <p>Update the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset-2>timeline offset</a> to the date and time that corresponds to the zero
        time in the <a href=#media-timeline id=loading-the-media-resource:media-timeline>media timeline</a> established in the previous step, if any. If no
        explicit time and date is given by the <a href=#media-resource id=loading-the-media-resource:media-resource-13>media resource</a>, the <a href=#timeline-offset id=loading-the-media-resource:timeline-offset-3>timeline
        offset</a> must be set to Not-a-Number (NaN).</p>

       </li><li><p>Set the <a href=#current-playback-position id=loading-the-media-resource:current-playback-position-3>current playback position</a> and the <a href=#official-playback-position id=loading-the-media-resource:official-playback-position-3>official playback
       position</a> to the <a href=#earliest-possible-position id=loading-the-media-resource:earliest-possible-position-2>earliest possible position</a>.</li><li>

        <p>Update the <code id=loading-the-media-resource:dom-media-duration-2><a href=#dom-media-duration>duration</a></code> attribute with the time of
        the last frame of the resource, if known, on the <a href=#media-timeline id=loading-the-media-resource:media-timeline-2>media timeline</a> established
        above. If it is not known (e.g. a stream that is in principle infinite), update the <code id=loading-the-media-resource:dom-media-duration-3><a href=#dom-media-duration>duration</a></code> attribute to the value positive Infinity.</p>

        <p class=note>The user agent <a href=#durationChange>will</a> <a id=loading-the-media-resource:queue-a-task-19 href=webappapis.html#queue-a-task>queue a task</a>
        to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-13 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-durationchange-2><a href=#event-media-durationchange>durationchange</a></code> at the element at this point.</p>

       </li><li>

        <p>For <code id=loading-the-media-resource:the-video-element-2><a href=#the-video-element>video</a></code> elements, set the <code id=loading-the-media-resource:dom-video-videowidth><a href=#dom-video-videowidth>videoWidth</a></code> and <code id=loading-the-media-resource:dom-video-videoheight><a href=#dom-video-videoheight>videoHeight</a></code> attributes, and <a id=loading-the-media-resource:queue-a-task-20 href=webappapis.html#queue-a-task>queue a task</a>
        to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-14 data-x-internal=concept-event-fire>fire an event</a> named <code id=loading-the-media-resource:event-media-resize><a href=#event-media-resize>resize</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-37>media element</a>.</p>

        <p class=note>Further <code id=loading-the-media-resource:event-media-resize-2><a href=#event-media-resize>resize</a></code> events will be fired
        if the dimensions subsequently change.</p>

       </li><li>

        <p>Set the <code id=loading-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute to <code id=loading-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>.</p>

        <p class=note>A <code id=loading-the-media-resource:event-media-loadedmetadata><a href=#event-media-loadedmetadata>loadedmetadata</a></code> DOM event
        <a href=#fire-loadedmetadata>will be fired</a> as part of setting the <code id=loading-the-media-resource:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute to a new value.</p>

       </li><li><p>Let <var>jumped</var> be false.</li><li><p>If the <a href=#media-element id=loading-the-media-resource:media-element-38>media element</a>'s <a href=#default-playback-start-position id=loading-the-media-resource:default-playback-start-position>default playback start position</a> is
       greater than zero, then <a href=#dom-media-seek id=loading-the-media-resource:dom-media-seek>seek</a> to that time, and let <var>jumped</var> be true.</li><li><p>Let the <a href=#media-element id=loading-the-media-resource:media-element-39>media element</a>'s <a href=#default-playback-start-position id=loading-the-media-resource:default-playback-start-position-2>default playback
       start position</a> be zero.</li><li><p>Let the <var>initial playback position</var> be zero.</li><li>

        <p>If either the <a href=#media-resource id=loading-the-media-resource:media-resource-14>media resource</a> or the <a id=loading-the-media-resource:url-6 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a> of the <var>current
        media resource</var> indicate a particular start time, then set the <var>initial playback
        position</var> to that time and, if <var>jumped</var> is still false, <a href=#dom-media-seek id=loading-the-media-resource:dom-media-seek-2>seek</a> to that time.</p>

        <p class=example>For example, with media formats that support <a id=loading-the-media-resource:media-fragment-syntax-3 href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>media fragment
        syntax</a>, the <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=loading-the-media-resource:concept-url-fragment data-x-internal=concept-url-fragment>fragment</a> can be used to
        indicate a start position.</p>

       </li><li><p>If there is no <a href=#dom-audiotrack-enabled id=loading-the-media-resource:dom-audiotrack-enabled-2>enabled</a> audio track, then
       enable an audio track. This <a href=#toggle-audio-track>will cause a <code>change</code> event to be fired</a>.</li><li><p>If there is no <a href=#dom-videotrack-selected id=loading-the-media-resource:dom-videotrack-selected-2>selected</a> video track,
       then select a video track. This <a href=#toggle-video-track>will cause a <code>change</code> event to be fired</a>.</li></ol>

      <p>Once the <code id=loading-the-media-resource:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code> attribute reaches <code id=loading-the-media-resource:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>, <a href=#fire-loadeddata>after
      the <code>loadeddata</code> event has been fired</a>, set the
      element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-9>delaying-the-load-event flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-9>delaying the load event</a>.</p>

      <p class=note>A user agent that is attempting to reduce network usage while still fetching
      the metadata for each <a href=#media-resource id=loading-the-media-resource:media-resource-15>media resource</a> would also stop buffering at this point,
      following <a href=#resourceSuspend>the rules described previously</a>, which involve the
      <code id=loading-the-media-resource:dom-media-networkstate-13><a href=#dom-media-networkstate>networkState</a></code> attribute switching to the <code id=loading-the-media-resource:dom-media-network_idle-4><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value and a <code id=loading-the-media-resource:event-media-suspend-4><a href=#event-media-suspend>suspend</a></code> event firing.</p>

      <p class=note>The user agent is <em>required</em> to determine the duration of the
      <a href=#media-resource id=loading-the-media-resource:media-resource-16>media resource</a> and go through this step before playing.</p> 

     <dt>Once the entire <a href=#media-resource id=loading-the-media-resource:media-resource-17>media resource</a> has been fetched (but potentially before any of
     it has been decoded)<dd>

      <p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-15 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-progress-3><a href=#event-media-progress>progress</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-40>media element</a>.</p>

      <p>Set the <code id=loading-the-media-resource:dom-media-networkstate-14><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_idle-5><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-16 data-x-internal=concept-event-fire>fire an event</a> named
      <code id=loading-the-media-resource:event-media-suspend-5><a href=#event-media-suspend>suspend</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-41>media element</a>.</p>

      <p>If the user agent ever discards any <a href=#media-data id=loading-the-media-resource:media-data-10>media data</a> and then needs to resume the
      network activity to obtain it again, then it must <a id=loading-the-media-resource:queue-a-task-21 href=webappapis.html#queue-a-task>queue a task</a> to set the <code id=loading-the-media-resource:dom-media-networkstate-15><a href=#dom-media-networkstate>networkState</a></code> to <code id=loading-the-media-resource:dom-media-network_loading-6><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>.</p>

      <p class=note>If the user agent can keep the <a href=#media-resource id=loading-the-media-resource:media-resource-18>media resource</a> loaded, then the
      algorithm will continue to its <i>final step</i> below, which aborts the algorithm.</p>

     <dt>If the connection is interrupted after some <a href=#media-data id=loading-the-media-resource:media-data-11>media data</a> has been received,
     causing the user agent to give up trying to fetch the resource<dd>

      <p>Fatal network errors that occur after the user agent has established whether the <var>current media resource</var> is usable (i.e. once the <a href=#media-element id=loading-the-media-resource:media-element-42>media element</a>'s
      <code id=loading-the-media-resource:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code> attribute is no longer <code id=loading-the-media-resource:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>) must cause the user agent to execute the
      following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-3><a href=#dom-media-error>error</a></code> attribute to the result of
       <a href=#creating-a-mediaerror id=loading-the-media-resource:creating-a-mediaerror-2>creating a <code>MediaError</code></a> with <code id=loading-the-media-resource:dom-mediaerror-media_err_network><a href=#dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a></code>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-16><a href=#dom-media-networkstate>networkState</a></code> attribute
       to the <code id=loading-the-media-resource:dom-media-network_idle-6><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-10>delaying-the-load-event flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-10>delaying the load event</a>.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-17 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-error-2><a href=#event-media-error>error</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-43>media element</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-4>resource selection
       algorithm</a>.</li></ol>

     <dt id=fatal-decode-error>If the <a href=#media-data id=loading-the-media-resource:media-data-12>media data</a> is corrupted<dd>

      <p>Fatal errors in decoding the <a href=#media-data id=loading-the-media-resource:media-data-13>media data</a> that occur after the user agent has
      established whether the <var>current media resource</var> is usable (i.e. once the <a href=#media-element id=loading-the-media-resource:media-element-44>media element</a>'s
      <code id=loading-the-media-resource:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code> attribute is no longer <code id=loading-the-media-resource:dom-media-have_nothing-3><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>) must cause the
      user agent to execute the following steps:</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-4><a href=#dom-media-error>error</a></code> attribute to the result of
       <a href=#creating-a-mediaerror id=loading-the-media-resource:creating-a-mediaerror-3>creating a <code>MediaError</code></a> with <code id=loading-the-media-resource:dom-mediaerror-media_err_decode><a href=#dom-mediaerror-media_err_decode>MEDIA_ERR_DECODE</a></code>.</li><li><p>Set the element's <code id=loading-the-media-resource:dom-media-networkstate-17><a href=#dom-media-networkstate>networkState</a></code> attribute
       to the <code id=loading-the-media-resource:dom-media-network_idle-7><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-11>delaying-the-load-event flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-11>delaying the load event</a>.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-18 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-error-3><a href=#event-media-error>error</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-45>media element</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-5>resource selection
       algorithm</a>.</li></ol>

     <dt>If the <a href=#media-data id=loading-the-media-resource:media-data-14>media data</a> fetching process is aborted by the user<dd>

      <p>The fetching process is aborted by the user, e.g. because the user
      pressed a "stop" button, the user agent must execute the following steps. These steps are not
      followed if the <code id=loading-the-media-resource:dom-media-load><a href=#dom-media-load>load()</a></code> method itself is invoked while
      these steps are running, as the steps above handle that particular kind of abort.</p>

      <ol><li><p>The user agent should cancel the fetching process.</li><li><p>Set the <code id=loading-the-media-resource:dom-media-error-5><a href=#dom-media-error>error</a></code> attribute to the result of
       <a href=#creating-a-mediaerror id=loading-the-media-resource:creating-a-mediaerror-4>creating a <code>MediaError</code></a> with <code id=loading-the-media-resource:dom-mediaerror-media_err_aborted><a href=#dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a></code>.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-19 data-x-internal=concept-event-fire>Fire an event</a> named <code id=loading-the-media-resource:event-media-abort-2><a href=#event-media-abort>abort</a></code> at the <a href=#media-element id=loading-the-media-resource:media-element-46>media element</a>.</li><li>

        <p>If the <a href=#media-element id=loading-the-media-resource:media-element-47>media element</a>'s <code id=loading-the-media-resource:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>
        attribute has a value equal to <code id=loading-the-media-resource:dom-media-have_nothing-4><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, set
        the element's <code id=loading-the-media-resource:dom-media-networkstate-18><a href=#dom-media-networkstate>networkState</a></code> attribute to the
        <code id=loading-the-media-resource:dom-media-network_empty-3><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code> value, set the element's
        <a href=#show-poster-flag id=loading-the-media-resource:show-poster-flag-4>show poster flag</a> to true, and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=loading-the-media-resource:concept-event-fire-20 data-x-internal=concept-event-fire>fire an
        event</a> named <code id=loading-the-media-resource:event-media-emptied-2><a href=#event-media-emptied>emptied</a></code> at the element.</p>

        <p>Otherwise, set the element's <code id=loading-the-media-resource:dom-media-networkstate-19><a href=#dom-media-networkstate>networkState</a></code>
        attribute to the <code id=loading-the-media-resource:dom-media-network_idle-8><a href=#dom-media-network_idle>NETWORK_IDLE</a></code> value.</p>

       </li><li><p>Set the element's <a href=#delaying-the-load-event-flag id=loading-the-media-resource:delaying-the-load-event-flag-12>delaying-the-load-event flag</a> to false. This stops <a href=parsing.html#delay-the-load-event id=loading-the-media-resource:delay-the-load-event-12>delaying the load event</a>.</li><li><p>Abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-6>resource selection
       algorithm</a>.</li></ol>

     <dt id=non-fatal-media-error>If the <a href=#media-data id=loading-the-media-resource:media-data-15>media data</a> can be fetched but has non-fatal
     errors or uses, in part, codecs that are unsupported, preventing the user agent from rendering
     the content completely correctly but not preventing playback altogether<dd>

      <p>The server returning data that is partially usable but cannot be optimally rendered must
      cause the user agent to render just the bits it can handle, and ignore the rest.</p>

      

     <dt id=found-a-media-resource-specific-timed-track>If the <a href=#media-resource id=loading-the-media-resource:media-resource-19>media resource</a> is
     found to declare a <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track-2>media-resource-specific text track</a> that the user agent
     supports<dd>

      <p>If the <a href=#media-data id=loading-the-media-resource:media-data-16>media data</a> is <a id=loading-the-media-resource:cors-same-origin-3 href=urls-and-fetching.html#cors-same-origin>CORS-same-origin</a>, run the <a href=#steps-to-expose-a-media-resource-specific-text-track id=loading-the-media-resource:steps-to-expose-a-media-resource-specific-text-track>steps to
      expose a media-resource-specific text track</a> with the relevant data.</p>

      <p class=note>Cross-origin videos do not expose their subtitles, since that would allow
      attacks such as hostile sites reading subtitles from confidential videos on a user's
      intranet.</p>

     </dl>

   </li><li><p><i>Final step:</i> If the user agent ever reaches this step (which can only happen if the entire resource
   gets loaded and kept available): abort the overall <a href=#concept-media-load-algorithm id=loading-the-media-resource:concept-media-load-algorithm-7>resource selection algorithm</a>.</li></ol>

  <p>When a <a href=#media-element id=loading-the-media-resource:media-element-48>media element</a> is to <dfn id="forget-the-media-element's-media-resource-specific-tracks">forget the media element's media-resource-specific
  tracks</dfn>, the user agent must remove from the <a href=#media-element id=loading-the-media-resource:media-element-49>media element</a>'s <a href=#list-of-text-tracks id=loading-the-media-resource:list-of-text-tracks>list of text
  tracks</a> all the <a href=#media-resource-specific-text-track id=loading-the-media-resource:media-resource-specific-text-track-3>media-resource-specific
  text tracks</a>, then empty the <a href=#media-element id=loading-the-media-resource:media-element-50>media element</a>'s <code id=loading-the-media-resource:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code> attribute's <code id=loading-the-media-resource:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object,
  then empty the <a href=#media-element id=loading-the-media-resource:media-element-51>media element</a>'s <code id=loading-the-media-resource:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>
  attribute's <code id=loading-the-media-resource:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object. No events (in particular, no <code id=loading-the-media-resource:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code> events) are fired as part of this; the <code id=loading-the-media-resource:event-media-error-4><a href=#event-media-error>error</a></code> and <code id=loading-the-media-resource:event-media-emptied-3><a href=#event-media-emptied>emptied</a></code>
  events, fired by the algorithms that invoke this one, can be used instead.</p>

  

  <hr>

  <p><dfn id=attr-media-preload><code>preload</code></dfn>属性は<a id=loading-the-media-resource:enumerated-attribute href=common-microsyntaxes.html#enumerated-attribute>列挙属性</a>である。次の表は、キーワードと属性の状態を示す。1列目のキーワードは、キーワードと同じ行で2列目のセル内の状態に対応づける。<a href=#media-resource id=loading-the-media-resource:media-resource-20>メディアリソース</a>がバッファまたは再生されている場合でも属性を変更できる。下記の表の説明では、この点に留意して解釈されるべきである。</p>

  <table><thead><tr><th> キーワード
     </th><th> 状態
     </th><th> 概要
   <tbody></th></tr><tr><td><dfn id=attr-media-preload-none><code>none</code></dfn>
     </td><td><dfn id=attr-media-preload-none-state>なし</dfn>
     </td><td>著者がメディアリソースを必要とすることをユーザーに期待しない、またはサーバーが不要なトラフィックを最小限にしたいのいずれかのユーザーエージェントへのヒント。バッファリングはとにかく開始する（たとえばユーザーが"play"に当たる）場合、この状態は、メディアリソースを実際にダウンロードする方法に関して積極的にヒントを提供しない。
    </td></tr><tr><td><dfn id=attr-media-preload-metadata><code>metadata</code></dfn>
     </td><td><dfn id=attr-media-preload-metadata-state>Metadata</dfn>
     </td><td>著者がメディアリソースを必要とするとユーザーに期待しないが、リソースのメタデータ（寸法、トラックリスト、期間など）フェッチし、そしておそらく最初の数フレームが合理的であるユーザーエージェントへのヒント。ユーザーエージェントが正確にメタデータ以上のものをフェッチしない場合、典型的には、一部のフレームも同様に得られ、おそらく<code id=loading-the-media-resource:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>または<code id=loading-the-media-resource:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>になるにもかかわらず、<a href=#media-element id=loading-the-media-resource:media-element-52>メディア要素</a>は<code id=loading-the-media-resource:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>に設定される<code id=loading-the-media-resource:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code>属性に終わる。メディアリソースが再生する際、たとえばメディアデータが依然として一貫した再生を維持し最も遅い可能性のレートで得られるようにダウンロードを絞ることが示唆するような、帯域幅の不足を考慮すべきであるというユーザーエージェントへのヒント。
    </td></tr><tr><td><dfn id=attr-media-preload-auto><code>auto</code></dfn>
     </td><td><dfn id=attr-media-preload-auto-state>Automatic</dfn>
     </td><td>ユーザーエージェントが、楽観的に全体のリソースのダウンロードを含め、サーバーへのリスクなしに、最初のユーザーのニーズを置くことができるというユーザーエージェントへのヒント。
  </td></tr></table>

  <p>空文字列もまた妥当なキーワードであり、<a href=#attr-media-preload-auto-state id=loading-the-media-resource:attr-media-preload-auto-state>自動</a>状態に対応づける。The attribute's <i id=loading-the-media-resource:missing-value-default><a href=common-microsyntaxes.html#missing-value-default>missing value default</a></i> and <i id=loading-the-media-resource:invalid-value-default><a href=common-microsyntaxes.html#invalid-value-default>invalid value default</a></i> are user-agent defined, though the <a href=#attr-media-preload-metadata-state id=loading-the-media-resource:attr-media-preload-metadata-state>Metadata</a> state is suggested as a compromise between reducing server load and providing an optimal user experience.</p>

  <p class=note>一度ユーザーが再生を始めると、著者は、動的に"<code id=loading-the-media-resource:attr-media-preload-none-2><a href=#attr-media-preload-none>none</a></code>"または"<code id=loading-the-media-resource:attr-media-preload-metadata><a href=#attr-media-preload-metadata>metadata</a></code>"から"<code id=loading-the-media-resource:attr-media-preload-auto><a href=#attr-media-preload-auto>auto</a></code>"に属性を切り替えるかもしれない。たとえば、多くのビデオをもつページ上で、要求されないが一度に動画<em>が</em>積極的にダウンロードされる限り、これは多くの動画がダウンロードされるべきではないことを示すために使用されるかもしれない。</p>

  

  <p>The <code id=loading-the-media-resource:attr-media-preload-3><a href=#attr-media-preload>preload</a></code> attribute is intended to provide a hint to
  the user agent about what the author thinks will lead to the best user experience. The attribute
  may be ignored altogether, for example based on explicit user preferences or based on the
  available connectivity.</p>

  <p><dfn id=dom-media-preload><code>preload</code></dfn> IDL属性は、<a id=loading-the-media-resource:limited-to-only-known-values href=common-dom-interfaces.html#limited-to-only-known-values>既知の値に制限され</a>、同じ名前のコンテンツ属性を<a id=loading-the-media-resource:reflect href=common-dom-interfaces.html#reflect>反映し</a>なければならない。</p>

  

  <p class=note>（メディアを再生する場合、<code id=loading-the-media-resource:attr-media-preload-5><a href=#attr-media-preload>preload</a></code>属性によって与えられるヒントにかかわらず、自然に最初のバッファーを持つので）<code id=loading-the-media-resource:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code>属性は<code id=loading-the-media-resource:attr-media-preload-4><a href=#attr-media-preload>preload</a></code>属性を上書きできる。しかし、両方を含めることはエラーではない。</p>

  <hr>



  <dl class=domintro><dt><var>media</var> . <code id=dom-media-buffered-dev><a href=#dom-media-buffered>buffered</a></code><dd>

    <p>ユーザーエージェントがバッファリングした<a href=#media-resource id=loading-the-media-resource:media-resource-21>メディアリソース</a>の範囲を表す<code id=loading-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-media-buffered><code>buffered</code></dfn> attribute must return a new
  static <a href=#normalised-timeranges-object id=loading-the-media-resource:normalised-timeranges-object>normalized <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href=#media-resource id=loading-the-media-resource:media-resource-22>media resource</a>, if any, that the user agent has buffered, at the time the attribute
  is evaluated. Users agents must accurately determine the ranges available, even for media streams
  where this can only be determined by tedious inspection.</p>

  <p class=note>Typically this will be a single range anchored at the zero point, but if, e.g. the
  user agent uses HTTP range requests in response to seeking, then there could be multiple
  ranges.</p>

  <p>User agents may discard previously buffered data.</p>

  <p class=note>Thus, a time position included within a range of the objects return by the <code id=loading-the-media-resource:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code> attribute at one time can end up being not included in
  the range(s) of objects returned by the same attribute at later times.</p>

  <p class=warning>Returning a new object each time is a bad pattern for attribute getters and is
  only enshrined here as it would be costly to change it. It is not to be copied to new APIs.</p>

  



  <h5 id=offsets-into-the-media-resource><span class=secno>4.8.12.6</span> メディアリソースからのオフセット<a href=#offsets-into-the-media-resource class=self-link></a></h5>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-duration-dev><a href=#dom-media-duration>duration</a></code><dd>

    <p><a href=#media-resource id=offsets-into-the-media-resource:media-resource-2>メディアリソース</a>の始点が時間ゼロであると仮定して、秒単位で<a href=#media-resource id=offsets-into-the-media-resource:media-resource>メディアリソース</a>の長さを返す。</p>

    <p>期間が利用できない場合はNaNを返す。</p>

    <p>際限のないストリームに対してInfinityを返す。</p>

   <dt><var>media</var> . <code id=dom-media-currenttime-dev><a href=#dom-media-currenttime>currentTime</a></code> [ = <var>value</var> ]<dd>

    <p>秒単位で、<a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position>公式の再生位置</a>を返す。</p>

    <p>指定時間にシークするために、設定可能である。</p>

   </dl>

  

  <p>A <a href=#media-resource id=offsets-into-the-media-resource:media-resource-3>media resource</a> has a <dfn id=media-timeline>media timeline</dfn> that maps times (in seconds) to
  positions in the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-4>media resource</a>. The origin of a timeline is its earliest defined
  position. The duration of a timeline is its last defined position.</p>

  <p><dfn id=defineTimeline>Establishing the media
  timeline</dfn>: if the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-5>media resource</a> somehow specifies an explicit timeline whose
  origin is not negative (i.e. gives each frame a specific time offset and gives the first frame a
  zero or positive offset), then the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline>media timeline</a> should be that timeline. (Whether
  the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-6>media resource</a> can specify a timeline or not depends on the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-7>media resource's</a> format.) If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-8>media resource</a> specifies an
  explicit start time <em>and date</em>, then that time and date should be considered the zero point
  in the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-2>media timeline</a>; the <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset>timeline offset</a> will be the time and date,
  exposed using the <code id=offsets-into-the-media-resource:dom-media-getstartdate><a href=#dom-media-getstartdate>getStartDate()</a></code> method.</p>

  <p>If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-9>media resource</a> has a discontinuous timeline, the user agent must extend the
  timeline used at the start of the resource across the entire resource, so that the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-3>media
  timeline</a> of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-10>media resource</a> increases linearly starting from the
  <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position>earliest possible position</a> (as defined below), even if the underlying <a href=#media-data id=offsets-into-the-media-resource:media-data>media
  data</a> has out-of-order or even overlapping time codes.</p>

  <p class=example>For example, if two clips have been concatenated into one video file, but the
  video format exposes the original times for the two clips, the video data might expose a timeline
  that goes, say, 00:15..00:29 and then 00:05..00:38. However, the user agent would not expose those
  times; it would instead expose the times as 00:15..00:29 and 00:29..01:02, as a single video.</p>

  <p>In the rare case of a <a href=#media-resource id=offsets-into-the-media-resource:media-resource-11>media resource</a> that does not have an explicit timeline, the
  zero time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-4>media timeline</a> should correspond to the first frame of the
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-12>media resource</a>. In the even rarer case of a <a href=#media-resource id=offsets-into-the-media-resource:media-resource-13>media resource</a> with no
  explicit timings of any kind, not even frame durations, the user agent must itself determine the
  time for each frame in a user-agent-defined manner.
  
  <a id=offsets-into-the-media-resource:fingerprinting-vector title="There is a potential fingerprinting vector here." href=introduction.html#fingerprinting-vector class=fingerprint><img alt="(This is a fingerprinting vector.)" src=https://html.spec.whatwg.org/images/fingerprint.png width=46 height=64></a>
  </p>

  <p class=note>An example of a file format with no explicit timeline but with explicit frame
  durations is the Animated GIF format. An example of a file format with no explicit timings at all
  is the JPEG-push format (<code id=offsets-into-the-media-resource:multipart/x-mixed-replace><a href=iana.html#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code> with JPEG frames, often
  used as the format for MJPEG streams).</p>

  <p>If, in the case of a resource with no timing information, the user agent will nonetheless be
  able to seek to an earlier point than the first frame originally provided by the server, then the
  zero time should correspond to the earliest seekable time of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-14>media resource</a>;
  otherwise, it should correspond to the first frame received from the server (the point in the
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-15>media resource</a> at which the user agent began receiving the stream).</p>

  <p class=note>At the time of writing, there is no known format that lacks explicit frame time
  offsets yet still supports seeking to a frame before the first frame sent by the server.</p>

  <div class=example>

   <p>Consider a stream from a TV broadcaster, which begins streaming on a sunny Friday afternoon in
   October, and always sends connecting user agents the media data on the same media timeline, with
   its zero time set to the start of this stream. Months later, user agents connecting to this
   stream will find that the first frame they receive has a time with millions of seconds. The <code id=offsets-into-the-media-resource:dom-media-getstartdate-2><a href=#dom-media-getstartdate>getStartDate()</a></code> method would always return the date that the
   broadcast started; this would allow controllers to display real times in their scrubber (e.g.
   "2:30pm") rather than a time relative to when the broadcast began ("8 months, 4 hours, 12
   minutes, and 23 seconds").</p>

   <p>Consider a stream that carries a video with several concatenated fragments, broadcast by a
   server that does not allow user agents to request specific times but instead just streams the
   video data in a predetermined order, with the first frame delivered always being identified as
   the frame with time zero. If a user agent connects to this stream and receives fragments defined
   as covering timestamps 2010-03-20 23:15:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12 14:25:00
   UTC to 2010-02-12 14:35:00 UTC, it would expose this with a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-5>media timeline</a> starting
   at 0s and extending to 3,600s (one hour). Assuming the streaming server disconnected at the end
   of the second clip, the <code id=offsets-into-the-media-resource:dom-media-duration><a href=#dom-media-duration>duration</a></code> attribute would then
   return 3,600. The <code id=offsets-into-the-media-resource:dom-media-getstartdate-3><a href=#dom-media-getstartdate>getStartDate()</a></code> method would return a
   <code id=offsets-into-the-media-resource:date><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> object with a time corresponding to 2010-03-20 23:15:00 UTC. However, if a
   different user agent connected five minutes later, <em>it</em> would (presumably) receive
   fragments covering timestamps 2010-03-20 23:20:00 UTC to 2010-03-21 00:05:00 UTC and 2010-02-12
   14:25:00 UTC to 2010-02-12 14:35:00 UTC, and would expose this with a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-6>media timeline</a>
   starting at 0s and extending to 3,300s (fifty five minutes). In this case, the <code id=offsets-into-the-media-resource:dom-media-getstartdate-4><a href=#dom-media-getstartdate>getStartDate()</a></code> method would return a <code id=offsets-into-the-media-resource:date-2><a data-x-internal=date href=https://tc39.github.io/ecma262/#sec-date-objects>Date</a></code> object
   with a time corresponding to 2010-03-20 23:20:00 UTC.</p>

   <p>In both of these examples, the <code id=offsets-into-the-media-resource:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code> attribute
   would give the ranges that the controller would want to actually display in its UI; typically, if
   the servers don't support seeking to arbitrary times, this would be the range of time from the
   moment the user agent connected to the stream up to the latest frame that the user agent has
   obtained; however, if the user agent starts discarding earlier information, the actual range
   might be shorter.</p>

  </div>

  <p>In any case, the user agent must ensure that the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-2>earliest possible position</a> (as
  defined below) using the established <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-7>media timeline</a>, is greater than or equal to
  zero.</p>

  <p>The <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-8>media timeline</a> also has an associated clock. Which clock is used is user-agent
  defined, and may be <a href=#media-resource id=offsets-into-the-media-resource:media-resource-16>media resource</a>-dependent, but it should approximate the user's
  wall clock.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element>Media elements</a> have a <dfn id=current-playback-position>current playback position</dfn>,
  which must initially (i.e. in the absence of <a href=#media-data id=offsets-into-the-media-resource:media-data-2>media data</a>) be zero seconds. The
  <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position>current playback position</a> is a time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-9>media timeline</a>.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element-2>Media elements</a> also have an <dfn id=official-playback-position>official playback
  position</dfn>, which must initially be set to zero seconds. The <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-2>official playback
  position</a> is an approximation of the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-2>current playback position</a> that is kept
  stable while scripts are running.</p>

  <p><a href=#media-element id=offsets-into-the-media-resource:media-element-3>Media elements</a> also have a <dfn id=default-playback-start-position>default playback start
  position</dfn>, which must initially be set to zero seconds. This time is used to allow the
  element to be seeked even before the media is loaded.</p>

  <p>Each <a href=#media-element id=offsets-into-the-media-resource:media-element-4>media element</a> has a <dfn id=show-poster-flag>show poster flag</dfn>. When a <a href=#media-element id=offsets-into-the-media-resource:media-element-5>media
  element</a> is created, this flag must be set to true. This flag is used to control when the
  user agent is to show a poster frame for a <code id=offsets-into-the-media-resource:the-video-element><a href=#the-video-element>video</a></code> element instead of showing the video
  contents.</p>

  <p>The <dfn id=dom-media-currenttime><code>currentTime</code></dfn> attribute must, on
  getting, return the <a href=#media-element id=offsets-into-the-media-resource:media-element-6>media element</a>'s <a href=#default-playback-start-position id=offsets-into-the-media-resource:default-playback-start-position>default playback start position</a>,
  unless that is zero, in which case it must return the element's <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-3>official playback
  position</a>. The returned value must be expressed in seconds. On setting, if the <a href=#media-element id=offsets-into-the-media-resource:media-element-7>media
  element</a>'s <code id=offsets-into-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> is <code id=offsets-into-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, then it must set the <a href=#media-element id=offsets-into-the-media-resource:media-element-8>media
  element</a>'s <a href=#default-playback-start-position id=offsets-into-the-media-resource:default-playback-start-position-2>default playback start position</a> to the new value; otherwise, it must
  set the <a href=#official-playback-position id=offsets-into-the-media-resource:official-playback-position-4>official playback position</a> to the new value and then <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek>seek</a> to the new value. The new value must be interpreted as being in
  seconds.</p>

  <p>If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-17>media resource</a> is a streaming resource, then the user agent might be unable
  to obtain certain parts of the resource after it has expired from its buffer. Similarly, some
  <a href=#media-resource id=offsets-into-the-media-resource:media-resource-18>media resources</a> might have a <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-10>media timeline</a> that
  doesn't start at zero. The <dfn id=earliest-possible-position>earliest possible position</dfn> is the earliest position in the
  stream or resource that the user agent can ever obtain again. It is also a time on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-11>media
  timeline</a>.</p>

  <p class=note>The <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-3>earliest possible position</a> is not explicitly exposed in the API;
  it corresponds to the start time of the first range in the <code id=offsets-into-the-media-resource:dom-media-seekable-2><a href=#dom-media-seekable>seekable</a></code> attribute's <code id=offsets-into-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code> object, if any, or
  the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-3>current playback position</a> otherwise.</p>

  <p>When the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-4>earliest possible position</a> changes, then: if the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-4>current playback
  position</a> is before the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-5>earliest possible position</a>, the user agent must <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek-2>seek</a> to the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-6>earliest possible position</a>; otherwise, if
  the user agent has not fired a <code id=offsets-into-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> event at
  the element in the past 15 to 250ms and is not still running event handlers for such an event,
  then the user agent must <a id=offsets-into-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=offsets-into-the-media-resource:concept-event-fire data-x-internal=concept-event-fire>fire an
  event</a> named <code id=offsets-into-the-media-resource:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p class=note>Because of the above requirement and the requirement in the <a href=#concept-media-load-resource id=offsets-into-the-media-resource:concept-media-load-resource>resource fetch algorithm</a> that kicks in <a href=#getting-media-metadata>when the metadata of the clip becomes known</a>, the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-5>current
  playback position</a> can never be less than the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-7>earliest possible position</a>.</p>

  
  

  <p>If at any time the user agent learns that an audio or video track has ended and all <a href=#media-data id=offsets-into-the-media-resource:media-data-3>media
  data</a> relating to that track corresponds to parts of the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-12>media timeline</a> that
  are <em>before</em> the <a href=#earliest-possible-position id=offsets-into-the-media-resource:earliest-possible-position-8>earliest possible position</a>, the user agent may <a id=offsets-into-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>queue a
  task</a> to run these steps:</p>

  <ol><li><p>Remove the track from the <code id=offsets-into-the-media-resource:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code>
   attribute's <code id=offsets-into-the-media-resource:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code> object or the <code id=offsets-into-the-media-resource:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> attribute's <code id=offsets-into-the-media-resource:videotracklist><a href=#videotracklist>VideoTrackList</a></code> object
   as appropriate.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=offsets-into-the-media-resource:concept-event-fire-2 data-x-internal=concept-event-fire>Fire an event</a> named <code id=offsets-into-the-media-resource:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code> at the <a href=#media-element id=offsets-into-the-media-resource:media-element-9>media element</a>'s
   aforementioned <code id=offsets-into-the-media-resource:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> or <code id=offsets-into-the-media-resource:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object, using
   <code id=offsets-into-the-media-resource:trackevent><a href=#trackevent>TrackEvent</a></code>, with the <code id=offsets-into-the-media-resource:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code> attribute
   initialized to the <code id=offsets-into-the-media-resource:audiotrack><a href=#audiotrack>AudioTrack</a></code> or <code id=offsets-into-the-media-resource:videotrack><a href=#videotrack>VideoTrack</a></code> object representing the
   track.</li></ol>

  <p>The <dfn id=dom-media-duration><code>duration</code></dfn> attribute must return the time
  of the end of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-19>media resource</a>, in seconds, on the <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-13>media timeline</a>. If
  no <a href=#media-data id=offsets-into-the-media-resource:media-data-4>media data</a> is available, then the attributes must return the Not-a-Number (NaN)
  value. If the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-20>media resource</a> is not known to be bounded (e.g. streaming radio, or a
  live event with no announced end time), then the attribute must return the positive Infinity
  value.</p>

  <p>The user agent must determine the duration of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-21>media resource</a> before playing
  any part of the <a href=#media-data id=offsets-into-the-media-resource:media-data-5>media data</a> and before setting <code id=offsets-into-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> to a value equal to or greater than <code id=offsets-into-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>, even if doing so requires fetching multiple
  parts of the resource.</p>

  <p id=durationChange>When the length of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-22>media resource</a> changes to a known value
  (e.g. from being unknown to known, or from a previously established length to a new length) the
  user agent must <a id=offsets-into-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=offsets-into-the-media-resource:concept-event-fire-3 data-x-internal=concept-event-fire>fire an
  event</a> named <code id=offsets-into-the-media-resource:event-media-durationchange><a href=#event-media-durationchange>durationchange</a></code> at the
  <a href=#media-element id=offsets-into-the-media-resource:media-element-10>media element</a>. (The event is not fired when the duration is reset as part of loading
  a new media resource.) If the duration is changed such that the <a href=#current-playback-position id=offsets-into-the-media-resource:current-playback-position-6>current playback
  position</a> ends up being greater than the time of the end of the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-23>media resource</a>,
  then the user agent must also <a href=#dom-media-seek id=offsets-into-the-media-resource:dom-media-seek-3>seek</a> to the time of the end of
  the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-24>media resource</a>.</p>

  <p class=example>If an "infinite" stream ends for some reason, then the duration would change
  from positive Infinity to the time of the last frame or sample in the stream, and the <code id=offsets-into-the-media-resource:event-media-durationchange-2><a href=#event-media-durationchange>durationchange</a></code> event would be fired. Similarly, if the
  user agent initially estimated the <a href=#media-resource id=offsets-into-the-media-resource:media-resource-25>media resource</a>'s duration instead of determining
  it precisely, and later revises the estimate based on new information, then the duration would
  change and the <code id=offsets-into-the-media-resource:event-media-durationchange-3><a href=#event-media-durationchange>durationchange</a></code> event would be
  fired.</p>

  <p>Some video files also have an explicit date and time corresponding to the zero time in the
  <a href=#media-timeline id=offsets-into-the-media-resource:media-timeline-14>media timeline</a>, known as the <dfn id=timeline-offset>timeline offset</dfn>. Initially, the
  <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset-2>timeline offset</a> must be set to Not-a-Number (NaN).</p>

  <p>The <dfn id=dom-media-getstartdate><code>getStartDate()</code></dfn> method must return <a href=infrastructure.html#create-a-date-object id=offsets-into-the-media-resource:create-a-date-object>a new <code>Date</code> object</a> representing the current
  <a href=#timeline-offset id=offsets-into-the-media-resource:timeline-offset-3>timeline offset</a>.</p>

  

  <hr>

  <p><dfn id=attr-media-loop><code>loop</code></dfn>属性は<a id=offsets-into-the-media-resource:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>であり、指定される場合、終端に達すると<a href=#media-resource id=offsets-into-the-media-resource:media-resource-26>メディアリソース</a>の先頭に戻ってシークする<a href=#media-element id=offsets-into-the-media-resource:media-element-11>メディア要素</a>であることを示す。</p>

  

  <p><dfn id=dom-media-loop><code>loop</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id=offsets-into-the-media-resource:reflect href=common-dom-interfaces.html#reflect>反映</a>しなければならない。</p>

  



  <h5 id=ready-states><span class=secno>4.8.12.7</span> 準備状態<a href=#ready-states class=self-link></a></h5>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-readystate-dev><a href=#dom-media-readystate>readyState</a></code><dd>

    <p>以下のリストのコードから、<a href=#current-playback-position id=ready-states:current-playback-position>現在の再生位置</a>をレンダリングに対する要素の現在の状態を表す値を返す。</p>

   </dl>

  

  <p><a href=#media-element id=ready-states:media-element>Media elements</a> have a <i>ready state</i>, which describes to
  what degree they are ready to be rendered at the <a href=#current-playback-position id=ready-states:current-playback-position-2>current playback position</a>. The
  possible values are as follows; the ready state of a media element at any particular time is the
  greatest value describing the state of the element:</p>

  

  <dl><dt><dfn id=dom-media-have_nothing><code>HAVE_NOTHING</code></dfn>（数値0）<dd><p><a href=#media-resource id=ready-states:media-resource>メディアリソース</a>に関する情報が入手できない。<a href=#current-playback-position id=ready-states:current-playback-position-3>現在の再生位置</a>のデータが入手できない。<code id=ready-states:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code>属性が<code id=ready-states:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>に設定される<a href=#media-element id=ready-states:media-element-2>メディア要素</a>は常に<code id=ready-states:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>状態にある。<dt><dfn id=dom-media-have_metadata><code>HAVE_METADATA</code></dfn>（数値1）<dd><p>リソースの継続時間が使用可能であるような、十分なリソースが得られている。<code id=ready-states:the-video-element><a href=#the-video-element>video</a></code>要素の場合、ビデオの寸法もまた利用可能である。<a href=#media-data id=ready-states:media-data>メディアデータ</a>は、すぐに<a href=#current-playback-position id=ready-states:current-playback-position-4>現在の再生位置</a>に対して利用できない。<dt><dfn id=dom-media-have_current_data><code>HAVE_CURRENT_DATA</code></dfn>（数値2）<dd><p>直接の<a href=#current-playback-position id=ready-states:current-playback-position-5>現在の再生位置</a>に対するデータは使用可能であるが、直ちに<code id=ready-states:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>状態に戻ることなく、まったく<a href=#direction-of-playback id=ready-states:direction-of-playback>再生方向</a>にない<a href=#current-playback-position id=ready-states:current-playback-position-6>現在の再生位置</a>を正常に進めることができるユーザーエージェントを利用可能とするのに十分なデータがないか、<a href=#direction-of-playback id=ready-states:direction-of-playback-2>再生方向</a>で入手するためのこれ以上データが存在しないかのいずれかである。たとえば、ビデオにおいて<a href=#current-playback-position id=ready-states:current-playback-position-7>現在の再生位置</a>が現在のフレームの端にある、および<a href=#ended-playback id=ready-states:ended-playback>再生が終了した</a>場合、これは次のフレームではなく、現在のフレームからデータを持つユーザーエージェントに対応する。<dt><dfn id=dom-media-have_future_data><code>HAVE_FUTURE_DATA</code></dfn>（数値3）<dd><p>直接の<a href=#current-playback-position id=ready-states:current-playback-position-8>現在の再生位置</a>に対するデータが利用可能であり、直ちに<code id=ready-states:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>の状態に戻ることなく、少なくとも<a href=#direction-of-playback id=ready-states:direction-of-playback-3>再生方向</a>での<a href=#current-playback-position id=ready-states:current-playback-position-9>現在の再生位置</a>を進めるためのユーザーエージェントに対する十分なデータが同様にあり、<a href=#the-text-tracks-are-ready id=ready-states:the-text-tracks-are-ready>テキストトラックは準備が整う</a>。たとえば、ビデオにおいて、<a href=#current-playback-position id=ready-states:current-playback-position-10>現在の再生位置</a>が2つのフレーム間の瞬間である際に、少なくとも現在のフレームと次のフレームに対するデータを持つユーザーエージェントにこれは対応するか、<a href=#current-playback-position id=ready-states:current-playback-position-11>現在の再生位置</a>がフレームの途中にある際、少なくとも再生を維持するための現在のフレームと音声データに対するビデオデータを持つユーザーエージェントに対応する。この場合において、<a href=#current-playback-position id=ready-states:current-playback-position-12>現在の再生位置</a>は進めることはできないので、<a href=#ended-playback id=ready-states:ended-playback-2>再生が終了した</a>場合にユーザーエージェントはこの状態にはならない。<dt><dfn id=dom-media-have_enough_data><code>HAVE_ENOUGH_DATA</code></dfn>（数値4）<dd>

   <p><code id=ready-states:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>状態について説明されるすべての条件が満たされ、加えて、以下のいずれかの条件が真である：</p>

    <ul><li>ユーザーエージェントが<a href=#current-playback-position id=ready-states:current-playback-position-13>現在の再生位置</a>で速度を取得されているデータを推定し、仮に要素の<code id=ready-states:dom-media-playbackrate><a href=#dom-media-playbackrate>playbackRate</a></code>で前進するなら、<a href=#media-resource id=ready-states:media-resource-2>メディアリソース</a>の最後に到達する前に利用可能なデータに追いつかないだろう。</li><li>ここでより長く待つことは、さらなるデータが得られることにはならないので、ユーザーエージェントは状態を入力し、したがってそれ以上の再生を遅らせることによって、何も得られないであろう。（たとえば、バッファーがいっぱいになるかもしれない。）</li></ul>

   </dl>

  <p class=note>実際には、<code id=ready-states:dom-media-have_metadata-3><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>と<code id=ready-states:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>との違いはごくわずかである。<code id=ready-states:the-canvas-element><a href=canvas.html#the-canvas-element>canvas</a></code>に<code id=ready-states:the-video-element-2><a href=#the-video-element>video</a></code>要素を描画する際のみ、本当に違いが関連している。ここで、何かが描画される（<code id=ready-states:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>以上）場合と何も描画されない（<code id=ready-states:dom-media-have_metadata-4><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>以下）場合を区別する。同様に、<code id=ready-states:dom-media-have_current_data-3><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>（現在のフレームのみ）と<code id=ready-states:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>（少なくともこのフレームと次）の差は、無視できる（極端には、1フレームだけ）。ページが"フレームごとの"ナビゲーションにインターフェイスを提供する際に、方向が本当に重要な単なる時間である。</p>

  

  <p>When the ready state of a <a href=#media-element id=ready-states:media-element-3>media element</a> whose <code id=ready-states:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code> is not <code id=ready-states:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code> changes, the user agent must follow the steps
  given below:</p>

  <ol><li>

    <p>Apply the first applicable set of substeps from the following list:</p>


    <dl class=switch><dt>If the previous ready state was <code id=ready-states:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>,
     and the new ready state is <code id=ready-states:dom-media-have_metadata-5><a href=#dom-media-have_metadata>HAVE_METADATA</a></code><dd id=fire-loadedmetadata>

      <p><a id=ready-states:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named
      <code id=ready-states:event-media-loadedmetadata><a href=#event-media-loadedmetadata>loadedmetadata</a></code> at the element.</p>

      <p class=note>Before this task is run, as part of the <a id=ready-states:event-loop href=webappapis.html#event-loop>event loop</a> mechanism, the
      rendering will have been updated to resize the <code id=ready-states:the-video-element-3><a href=#the-video-element>video</a></code> element if appropriate.</p>

     <dt id=handling-first-frame-available>If the previous ready state was <code id=ready-states:dom-media-have_metadata-6><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> and the new ready state is <code id=ready-states:dom-media-have_current_data-4><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or greater<dd>

      <p id=fire-loadeddata>If this is the first time this occurs for this <a href=#media-element id=ready-states:media-element-4>media
      element</a> since the <code id=ready-states:dom-media-load><a href=#dom-media-load>load()</a></code> algorithm was last
      invoked, the user agent must <a id=ready-states:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named <code id=ready-states:event-media-loadeddata><a href=#event-media-loadeddata>loadeddata</a></code> at the element.</p>

      <p>If the new ready state is <code id=ready-states:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>
      or <code id=ready-states:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>, then the relevant steps
      below must then be run also.</p>

     <dt>If the previous ready state was <code id=ready-states:dom-media-have_future_data-4><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or more, and the new ready state is
     <code id=ready-states:dom-media-have_current_data-5><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less<dd>

      <p id=fire-waiting-when-waiting>If the <a href=#media-element id=ready-states:media-element-5>media element</a> was <a href=#potentially-playing id=ready-states:potentially-playing>potentially
      playing</a> before its <code id=ready-states:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> attribute
      changed to a value lower than <code id=ready-states:dom-media-have_future_data-5><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>, and the element has not
      <a href=#ended-playback id=ready-states:ended-playback-3>ended playback</a>, and playback has not <a href=#stopped-due-to-errors id=ready-states:stopped-due-to-errors>stopped due to errors</a>,
      <a href=#paused-for-user-interaction id=ready-states:paused-for-user-interaction>paused for user interaction</a>, or <a href=#paused-for-in-band-content id=ready-states:paused-for-in-band-content>paused for in-band content</a>, the user
      agent must <a id=ready-states:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-3 data-x-internal=concept-event-fire>fire an event</a>
      named <code id=ready-states:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element, and <a id=ready-states:queue-a-task-4 href=webappapis.html#queue-a-task>queue
      a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-4 data-x-internal=concept-event-fire>fire an event</a> named <code id=ready-states:event-media-waiting><a href=#event-media-waiting>waiting</a></code> at the element.</p>

     <dt>If the previous ready state was <code id=ready-states:dom-media-have_current_data-6><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less, and the new ready state
     is <code id=ready-states:dom-media-have_future_data-6><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code><dd>

      <p>The user agent must <a id=ready-states:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-5 data-x-internal=concept-event-fire>fire an
      event</a> named <code id=ready-states:event-media-canplay><a href=#event-media-canplay>canplay</a></code> at the element.</p>

      <p>If the element's <code id=ready-states:dom-media-paused><a href=#dom-media-paused>paused</a></code> attribute is false, the user
      agent must <a href=#notify-about-playing id=ready-states:notify-about-playing>notify about playing</a> for the element.</p>

     <dt>If the new ready state is <code id=ready-states:dom-media-have_enough_data-2><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code><dd>

      <p>If the previous ready state was <code id=ready-states:dom-media-have_current_data-7><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> or less, the user agent must
      <a id=ready-states:queue-a-task-6 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-6 data-x-internal=concept-event-fire>fire an event</a> named
      <code id=ready-states:event-media-canplay-2><a href=#event-media-canplay>canplay</a></code> at the element, and, if the element's <code id=ready-states:dom-media-paused-2><a href=#dom-media-paused>paused</a></code> attribute is false, <a href=#notify-about-playing id=ready-states:notify-about-playing-2>notify about playing</a>
      for the element.</p>

      <p>The user agent must <a id=ready-states:queue-a-task-7 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-7 data-x-internal=concept-event-fire>fire an
      event</a> named <code id=ready-states:event-media-canplaythrough><a href=#event-media-canplaythrough>canplaythrough</a></code> at the
      element.</p>

      <p>If the element is not <a href=#eligible-for-autoplay id=ready-states:eligible-for-autoplay>eligible for autoplay</a>, then the user agent must abort
      these substeps.</p>

      <p>The user agent may run the following substeps:</p>

      <p class=note>This specification doesn't define the precise timing for when the intersection
      is tested, but it is suggested that the timing match that of the Intersection Observer API.
      <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>

      <ol><li>Set the <code id=ready-states:dom-media-paused-3><a href=#dom-media-paused>paused</a></code> attribute to false.</li><li>If the element's <a href=#show-poster-flag id=ready-states:show-poster-flag>show poster flag</a> is true, set it to false and run the
       <i id=ready-states:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps.</li><li><a id=ready-states:queue-a-task-8 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-8 data-x-internal=concept-event-fire>fire an event</a> named
       <code id=ready-states:event-media-play><a href=#event-media-play>play</a></code> at the element.</li><li><a href=#notify-about-playing id=ready-states:notify-about-playing-3>Notify about playing</a> for the element.</li></ol>

      <p>Alternatively, if the element is a <code id=ready-states:the-video-element-4><a href=#the-video-element>video</a></code> element, the user agent may start
      observing whether the element <a href=#intersect-the-viewport id=ready-states:intersect-the-viewport>intersects the
      viewport</a>. When the element starts <a href=#intersect-the-viewport id=ready-states:intersect-the-viewport-2>intersecting
      the viewport</a>, if the element is still <a href=#eligible-for-autoplay id=ready-states:eligible-for-autoplay-2>eligible for autoplay</a>, run the
      substeps above. Optionally, when the element stops <a href=#intersect-the-viewport id=ready-states:intersect-the-viewport-3>intersecting the viewport</a>, if the <a href=#can-autoplay-flag id=ready-states:can-autoplay-flag>can autoplay flag</a> is still
      true and the <code id=ready-states:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> attribute is still specified,
      run the following substeps:</p>

      <p class=note>This specification doesn't define the precise timing for when the intersection
      is tested, but it is suggested that the timing match that of the Intersection Observer API.
      <a href=references.html#refsINTERSECTIONOBSERVER>[INTERSECTIONOBSERVER]</a></p>

      <ol><li>Run the <a href=#internal-pause-steps id=ready-states:internal-pause-steps>internal pause steps</a> and set the <a href=#can-autoplay-flag id=ready-states:can-autoplay-flag-2>can autoplay flag</a> to
       true.</li><li><a id=ready-states:queue-a-task-9 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=ready-states:concept-event-fire-9 data-x-internal=concept-event-fire>fire an event</a> named
        <code id=ready-states:event-media-pause><a href=#event-media-pause>pause</a></code> at the element.</li></ol>

      <p class=note>The substeps for playing and pausing can run multiple times as the element
      starts or stops <a href=#intersect-the-viewport id=ready-states:intersect-the-viewport-4>intersecting the viewport</a>, as
      long as the <a href=#can-autoplay-flag id=ready-states:can-autoplay-flag-3>can autoplay flag</a> is true.</p>

      <p class=note>User agents do not need to support autoplay, and it is suggested that user
      agents honor user preferences on the matter. Authors are urged to use the <code id=ready-states:attr-media-autoplay-2><a href=#attr-media-autoplay>autoplay</a></code> attribute rather than using script to force the
      video to play, so as to allow the user to override the behavior if so desired.</p>

     </dl>

   </li></ol>

  

  <p class=note>メディア要素の準備状態は、これらの状態間を不連続にジャンプすることが可能である。たとえば、メディア要素の状態は、<code id=ready-states:dom-media-have_current_data-8><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>と<code id=ready-states:dom-media-have_future_data-7><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>状態を経由せずに<code id=ready-states:dom-media-have_metadata-7><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>から<code id=ready-states:dom-media-have_enough_data-3><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>に直接ジャンプできる。</p>

  

  <p>The <dfn id=dom-media-readystate><code>readyState</code></dfn> IDL attribute must, on
  getting, return the value described above that describes the current ready state of the
  <a href=#media-element id=ready-states:media-element-6>media element</a>.</p>

  

  <p><dfn id=attr-media-autoplay><code>autoplay</code></dfn>属性は<a id=ready-states:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>である。存在する場合、停止せず再生できるようになるとすぐに、（ここで記述されるアルゴリズムで説明されるような）ユーザーエージェントは自動的に<a href=#media-resource id=ready-states:media-resource-3>メディアリソース</a>の再生を開始する。</p>

  <p class=note>著者は、望まれない場合、たとえばスクリーンリーダーを使用する場合、ユーザーが自動再生を上書きできるよう、自動再生を誘発するためのスクリプトを使用するよりも、<code id=ready-states:attr-media-autoplay-3><a href=#attr-media-autoplay>autoplay</a></code>属性を使用するように促される。著者はまた、一切自動再生の動作を使用することなく、代わりに明示的に再生を開始するためのユーザーに対してユーザーエージェントが待機しないよう考慮することが推奨される。</p>

  

  <p><dfn id=dom-media-autoplay><code>autoplay</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id=ready-states:reflect href=common-dom-interfaces.html#reflect>反映</a>しなければならない。</p>

  



  <h5 id=playing-the-media-resource><span class=secno>4.8.12.8</span> メディアリソースの再生<a href=#playing-the-media-resource class=self-link></a></h5><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28032" title='Definition of "ended playback" prevents looping when loop attribute is added after playback has ended'>28032</a></div>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-paused-dev><a href=#dom-media-paused>paused</a></code><dd>

    <p>再生が一時停止された場合はtrueを返し、そうでなければfalseを返す。</p>

   <dt><var>media</var> . <code id=dom-media-ended-dev><a href=#dom-media-ended>ended</a></code><dd>

    <p>再生が<a href=#media-resource id=playing-the-media-resource:media-resource>メディアリソース</a>の終わりに達した場合trueを返す。</p>

   <dt><var>media</var> . <code id=dom-media-defaultplaybackrate-dev><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> [ = <var>value</var> ]<dd>

    <p><a href=#media-resource id=playing-the-media-resource:media-resource-2>メディアリソース</a>を介してユーザーが早送りまたは巻き戻ししない場合に対し、再生のデフォルト率を返す。</p>

    <p>再生のデフォルト率を変更する設定が可能である。</p>

    <p>デフォルト率は再生に直接影響を与えないが、ユーザーが早送りモードに切り替えた場合、モードが通常の再生モードに戻った際に、再生速度が再生のデフォルト率に戻されることが期待される。</p>

   <dt><var>media</var> . <code id=dom-media-playbackrate-dev><a href=#dom-media-playbackrate>playbackRate</a></code> [ = <var>value</var> ]<dd>

    <p>現在の再生率を返す。ここで1.0が通常の速度である。</p>

    <p>再生速度を変更する設定が可能である。</p>

   <dt><var>media</var> . <code id=dom-media-played-dev><a href=#dom-media-played>played</a></code><dd>

    <p>ユーザーエージェントが再生した<a href=#media-resource id=playing-the-media-resource:media-resource-3>メディアリソース</a>の範囲を表す<code id=playing-the-media-resource:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=dom-media-play-dev><a href=#dom-media-play>play</a></code>()<dd>

    <p>必要に応じて<a href=#media-resource id=playing-the-media-resource:media-resource-4>メディアリソース</a>を読み込んで再生を開始し、<code id=playing-the-media-resource:dom-media-paused><a href=#dom-media-paused>paused</a></code>属性をfalseに設定する。再生が終了した場合、最初からリソースを再スタートする。</p>

   <dt><var>media</var> . <code id=dom-media-pause-dev><a href=#dom-media-pause>pause</a></code>()<dd>

    <p>必要に応じて、<a href=#media-resource id=playing-the-media-resource:media-resource-5>メディアリソース</a>を読み込み、<code id=playing-the-media-resource:dom-media-paused-2><a href=#dom-media-paused>paused</a></code>属性をtrueに設定する。</p>

   </dl>

  

  <p>The <dfn id=dom-media-paused><code>paused</code></dfn> attribute represents whether the
  <a href=#media-element id=playing-the-media-resource:media-element>media element</a> is paused or not. The attribute must initially be true.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-2>media element</a> is a <dfn id=blocked-media-element>blocked media element</dfn> if its <code id=playing-the-media-resource:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code> attribute is in the <code id=playing-the-media-resource:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code> state, the <code id=playing-the-media-resource:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> state, or the <code id=playing-the-media-resource:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code> state, or if the element has
  <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction>paused for user interaction</a> or <a href=#paused-for-in-band-content id=playing-the-media-resource:paused-for-in-band-content>paused for in-band content</a>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-3>media element</a> is said to be <dfn id=potentially-playing>potentially playing</dfn> when its <code id=playing-the-media-resource:dom-media-paused-3><a href=#dom-media-paused>paused</a></code> attribute is false, the element has not <a href=#ended-playback id=playing-the-media-resource:ended-playback>ended
  playback</a>, playback has not <a href=#stopped-due-to-errors id=playing-the-media-resource:stopped-due-to-errors>stopped due to errors</a>, and the element is not a
  <a href=#blocked-media-element id=playing-the-media-resource:blocked-media-element>blocked media element</a>.</p>

  <p class=note>A <code id=playing-the-media-resource:event-media-waiting><a href=#event-media-waiting>waiting</a></code> DOM event <a href=#fire-waiting-when-waiting>can be fired</a> as a result of an element that is
  <a href=#potentially-playing id=playing-the-media-resource:potentially-playing>potentially playing</a> stopping playback due to its <code id=playing-the-media-resource:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute changing to a value lower than <code id=playing-the-media-resource:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-4>media element</a> is said to be <dfn id=eligible-for-autoplay>eligible for autoplay</dfn> when its
  <a href=#can-autoplay-flag id=playing-the-media-resource:can-autoplay-flag>can autoplay flag</a> is true, its <code id=playing-the-media-resource:dom-media-paused-4><a href=#dom-media-paused>paused</a></code> attribute
  is true, the element has an <code id=playing-the-media-resource:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code> attribute
  specified, and the element's <a id=playing-the-media-resource:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <a id=playing-the-media-resource:active-sandboxing-flag-set href=origin.html#active-sandboxing-flag-set>active sandboxing flag set</a>
  does not have the <a id=playing-the-media-resource:sandboxed-automatic-features-browsing-context-flag href=origin.html#sandboxed-automatic-features-browsing-context-flag>sandboxed automatic features browsing context flag</a> set.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-5>media element</a> is said to be <dfn id=allowed-to-play>allowed to play</dfn> if the user agent and the
  system allow media playback in the current context.</p>

  <p class=note>For example, a user agent could require that playback is <a id=playing-the-media-resource:triggered-by-user-activation href=interaction.html#triggered-by-user-activation>triggered by user
  activation</a>, but an exception could be made to allow playback while <a href=#concept-media-muted id=playing-the-media-resource:concept-media-muted>muted</a>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-6>media element</a> is said to have <dfn id=ended-playback>ended playback</dfn> when:</p>

  <ul><li>The element's <code id=playing-the-media-resource:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=playing-the-media-resource:dom-media-have_metadata-2><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> or greater, and

   

   </li><li>

    <p>Either:

    

    <ul><li>The <a href=#current-playback-position id=playing-the-media-resource:current-playback-position>current playback position</a> is the end of the <a href=#media-resource id=playing-the-media-resource:media-resource-6>media resource</a>,
     and

     

     </li><li>The <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback>direction of playback</a> is forwards, and

     

     </li><li>The <a href=#media-element id=playing-the-media-resource:media-element-7>media element</a> does not have a <code id=playing-the-media-resource:attr-media-loop><a href=#attr-media-loop>loop</a></code>
     attribute specified.

    

    </li></ul>

    <p>または：

    <ul><li>The <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-2>current playback position</a> is the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position>earliest possible position</a>,
     and

     

     </li><li>The <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-2>direction of playback</a> is backwards.

    

    </li></ul>

   </li></ul>

  <p>The <dfn id=dom-media-ended><code>ended</code></dfn> attribute must return true if, the
  last time the <a id=playing-the-media-resource:event-loop href=webappapis.html#event-loop>event loop</a> reached <a href=webappapis.html#step1>step 1</a>, the <a href=#media-element id=playing-the-media-resource:media-element-8>media element</a> had
  <a href=#ended-playback id=playing-the-media-resource:ended-playback-2>ended playback</a> and the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-3>direction of playback</a> was forwards, and false
  otherwise.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-9>media element</a> is said to have <dfn id=stopped-due-to-errors>stopped due to errors</dfn> when the
  element's <code id=playing-the-media-resource:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code> attribute is <code id=playing-the-media-resource:dom-media-have_metadata-3><a href=#dom-media-have_metadata>HAVE_METADATA</a></code> or greater, and the user agent <a href=#non-fatal-media-error>encounters a non-fatal error</a> during the processing of the
  <a href=#media-data id=playing-the-media-resource:media-data>media data</a>, and due to that error, is not able to play the content at the
  <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-3>current playback position</a>.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-10>media element</a> is said to have <dfn id=paused-for-user-interaction>paused for user interaction</dfn> when its
  <code id=playing-the-media-resource:dom-media-paused-5><a href=#dom-media-paused>paused</a></code> attribute is false, the <code id=playing-the-media-resource:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=playing-the-media-resource:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code> and the user agent has reached a point
  in the <a href=#media-resource id=playing-the-media-resource:media-resource-7>media resource</a> where the user has to make a selection for the resource to
  continue.</p>

  <p>It is possible for a <a href=#media-element id=playing-the-media-resource:media-element-11>media element</a> to have both <a href=#ended-playback id=playing-the-media-resource:ended-playback-3>ended playback</a> and
  <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction-2>paused for user interaction</a> at the same time.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-12>media element</a> that is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-2>potentially playing</a> stops playing
  because it has <a href=#paused-for-user-interaction id=playing-the-media-resource:paused-for-user-interaction-3>paused for user interaction</a>, the user agent must <a id=playing-the-media-resource:queue-a-task href=webappapis.html#queue-a-task>queue a
  task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p>A <a href=#media-element id=playing-the-media-resource:media-element-13>media element</a> is said to have <dfn id=paused-for-in-band-content>paused for in-band content</dfn> when its
  <code id=playing-the-media-resource:dom-media-paused-6><a href=#dom-media-paused>paused</a></code> attribute is false, the <code id=playing-the-media-resource:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code> attribute is either <code id=playing-the-media-resource:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-2><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code> and the user agent has suspended
  playback of the <a href=#media-resource id=playing-the-media-resource:media-resource-8>media resource</a> in order to play content that is temporally anchored
  to the <a href=#media-resource id=playing-the-media-resource:media-resource-9>media resource</a> and has a nonzero length, or to play content that is
  temporally anchored to a segment of the <a href=#media-resource id=playing-the-media-resource:media-resource-10>media resource</a> but has a length longer than
  that segment.</p>

  <p class=example>One example of when a <a href=#media-element id=playing-the-media-resource:media-element-14>media element</a> would be <a href=#paused-for-in-band-content id=playing-the-media-resource:paused-for-in-band-content-2>paused for
  in-band content</a> is when the user agent is playing <a href=#attr-track-kind-descriptions id=playing-the-media-resource:attr-track-kind-descriptions>audio descriptions</a> from an external WebVTT file, and
  the synthesized speech generated for a cue is longer than the time between the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time>text track
  cue start time</a> and the <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time>text track cue end time</a>.</p>

  <hr>

  <p id=reaches-the-end>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-4>current playback position</a> reaches the end of the
  <a href=#media-resource id=playing-the-media-resource:media-resource-11>media resource</a> when the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-4>direction of playback</a> is forwards, then the user
  agent must follow these steps:</p>

  <ol><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-15>media element</a> has a <code id=playing-the-media-resource:attr-media-loop-2><a href=#attr-media-loop>loop</a></code>
   attribute specified, then <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek>seek</a> to the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-2>earliest
   possible position</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-12>media resource</a> and return.</li><li><p>As defined above, the <code id=playing-the-media-resource:dom-media-ended><a href=#dom-media-ended>ended</a></code> IDL attribute starts
   returning true once the <a id=playing-the-media-resource:event-loop-2 href=webappapis.html#event-loop>event loop</a> returns to <a href=webappapis.html#step1>step 1</a>.</li><li>

    <p><a id=playing-the-media-resource:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to run these steps:</p>

    <ol><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-2 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-16>media element</a>.</li><li>

      <p>If the <a href=#media-element id=playing-the-media-resource:media-element-17>media element</a> has <a href=#ended-playback id=playing-the-media-resource:ended-playback-4>ended playback</a>, the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-5>direction of
      playback</a> is forwards, and <a href=#dom-media-paused id=playing-the-media-resource:dom-media-paused-7>paused</a> is false,
      then:</p>

      <ol><li><p>Set the <code id=playing-the-media-resource:dom-media-paused-8><a href=#dom-media-paused>paused</a></code> attribute to true.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-3 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-pause><a href=#event-media-pause>pause</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-18>media element</a>.</li><li><p><a href=#take-pending-play-promises id=playing-the-media-resource:take-pending-play-promises>Take pending play promises</a> and <a href=#reject-pending-play-promises id=playing-the-media-resource:reject-pending-play-promises>reject pending play promises</a>
       with the result and an <a id=playing-the-media-resource:aborterror href=https://triple-underscore.github.io/WebIDL-ja.html#aborterror data-x-internal=aborterror>"<code>AbortError</code>"</a>
       <code id=playing-the-media-resource:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>

     </li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-4 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-ended><a href=#event-media-ended>ended</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-19>media element</a>.</li></ol>

   </li></ol>

  <p>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-5>current playback position</a> reaches the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-3>earliest possible
  position</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-13>media resource</a> when the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-6>direction of playback</a> is
  backwards, then the user agent must only <a id=playing-the-media-resource:queue-a-task-3 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-5 data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate-3><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</p>

  <p class=note>The word "reaches" here does not imply that the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-6>current playback
  position</a> needs to have changed during normal playback; it could be via <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek-2>seeking</a>, for instance.</p>

  <hr>

  <p>The <dfn id=dom-media-defaultplaybackrate><code>defaultPlaybackRate</code></dfn> attribute
  gives the desired speed at which the <a href=#media-resource id=playing-the-media-resource:media-resource-14>media resource</a> is to play, as a multiple of its
  intrinsic speed. The attribute is mutable: on getting it must return the last value it was set to,
  or 1.0 if it hasn't yet been set; on setting the attribute must be set to the new value.</p>

  <p class=note>The <code id=playing-the-media-resource:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code> is used
  by the user agent when it <a href=#expose-a-user-interface-to-the-user id=playing-the-media-resource:expose-a-user-interface-to-the-user>exposes a user
  interface to the user</a>.</p>

  <p>The <dfn id=dom-media-playbackrate><code>playbackRate</code></dfn> attribute gives the
  effective playback rate, which is the speed at which the <a href=#media-resource id=playing-the-media-resource:media-resource-15>media resource</a> plays, as a
  multiple of its intrinsic speed. If it is not equal to the <code id=playing-the-media-resource:dom-media-defaultplaybackrate-2><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code>, then the implication is that
  the user is using a feature such as fast forward or slow motion playback. The attribute is
  mutable: on getting it must return the last value it was set to, or 1.0 if it hasn't yet been set;
  on setting, the user agent must follow these steps:</p>

  <ol><li><p>If the given value is not supported by the user agent, then throw a
   <a id=playing-the-media-resource:notsupportederror href=https://triple-underscore.github.io/WebIDL-ja.html#notsupportederror data-x-internal=notsupportederror>"<code>NotSupportedError</code>"</a> <code id=playing-the-media-resource:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li><li><p>Set <code id=playing-the-media-resource:dom-media-playbackrate><a href=#dom-media-playbackrate>playbackRate</a></code> to the new value, and if the
   element is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-3>potentially playing</a>, change the playback speed.</li></ol>

  <p id=rateUpdate>When the <code id=playing-the-media-resource:dom-media-defaultplaybackrate-3><a href=#dom-media-defaultplaybackrate>defaultPlaybackRate</a></code>
  or <code id=playing-the-media-resource:dom-media-playbackrate-2><a href=#dom-media-playbackrate>playbackRate</a></code> attributes change value (either by
  being set by script or by being changed directly by the user agent, e.g. in response to user
  control) the user agent must <a id=playing-the-media-resource:queue-a-task-4 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-6 data-x-internal=concept-event-fire>fire
  an event</a> named <code id=playing-the-media-resource:event-media-ratechange><a href=#event-media-ratechange>ratechange</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-20>media
  element</a>.</p>

  <hr>

  <p>The <dfn id=dom-media-played><code>played</code></dfn> attribute must return a new static
  <a href=#normalised-timeranges-object id=playing-the-media-resource:normalised-timeranges-object>normalized <code>TimeRanges</code> object</a> that represents the ranges of points on the
  <a href=#media-timeline id=playing-the-media-resource:media-timeline>media timeline</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-16>media resource</a> reached through the usual monotonic
  increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-7>current playback position</a> during normal playback, if any, at the time
  the attribute is evaluated.</p>

  <p class=warning>Returning a new object each time is a bad pattern for attribute getters and is
  only enshrined here as it would be costly to change it. It is not to be copied to new APIs.</p>

  <hr>

  <p>Each <a href=#media-element id=playing-the-media-resource:media-element-21>media element</a> has a <dfn id=list-of-pending-play-promises>list of pending play promises</dfn>, which must
  initially be empty.</p>

  <p>To <dfn id=take-pending-play-promises>take pending play promises</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-22>media element</a>, the user agent must
  run the following steps:</p>

  <ol><li><p>Let <var>promises</var> be an empty list of promises.</li><li><p>Copy the <a href=#media-element id=playing-the-media-resource:media-element-23>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises>list of pending play promises</a> to
   <var>promises</var>.</li><li><p>Clear the <a href=#media-element id=playing-the-media-resource:media-element-24>media element</a>'s <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-2>list of pending play
   promises</a>.</li><li>Return <var>promises</var>.</li></ol>

  <p>To <dfn id=resolve-pending-play-promises>resolve pending play promises</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-25>media element</a> with a list of
  promises <var>promises</var>, the user agent must resolve each promise in <var>promises</var> with
  undefined.</p>

  <p>To <dfn id=reject-pending-play-promises>reject pending play promises</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-26>media element</a> with a list of
  promise <var>promises</var> and an exception name <var>error</var>, the user agent must reject
  each promise in <var>promises</var> with <var>error</var>.</p>

  <p>To <dfn id=notify-about-playing>notify about playing</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-27>media element</a>, the user agent must run
  the following steps:</p>

  <ol><li><p><a href=#take-pending-play-promises id=playing-the-media-resource:take-pending-play-promises-2>Take pending play promises</a> and let <var>promises</var> be the
   result.</li><li>

    <p><a id=playing-the-media-resource:queue-a-task-5 href=webappapis.html#queue-a-task>Queue a task</a> to run these steps:</p>

    <ol><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-7 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-playing><a href=#event-media-playing>playing</a></code> at the element.</li><li><p><a href=#resolve-pending-play-promises id=playing-the-media-resource:resolve-pending-play-promises>Resolve pending play promises</a> with <var>promises</var>.</li></ol>

   </li></ol>

  <p>When the <dfn id=dom-media-play><code>play()</code></dfn> method on a <a href=#media-element id=playing-the-media-resource:media-element-28>media
  element</a> is invoked, the user agent must run the following steps.</p>

  <ol><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-29>media element</a> is not <a href=#allowed-to-play id=playing-the-media-resource:allowed-to-play>allowed to play</a>, return a promise
   rejected with a <a id=playing-the-media-resource:notallowederror href=https://triple-underscore.github.io/WebIDL-ja.html#notallowederror data-x-internal=notallowederror>"<code>NotAllowedError</code>"</a> <code id=playing-the-media-resource:domexception-3><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li><li>

    <p>If the <a href=#media-element id=playing-the-media-resource:media-element-30>media element</a>'s <code id=playing-the-media-resource:dom-media-error><a href=#dom-media-error>error</a></code> attribute is
    not null and its <a href=#concept-mediaerror-code id=playing-the-media-resource:concept-mediaerror-code>code</a> is <code id=playing-the-media-resource:dom-mediaerror-media_err_src_not_supported><a href=#dom-mediaerror-media_err_src_not_supported>MEDIA_ERR_SRC_NOT_SUPPORTED</a></code>, return a
    promise rejected with a <a id=playing-the-media-resource:notsupportederror-2 href=https://triple-underscore.github.io/WebIDL-ja.html#notsupportederror data-x-internal=notsupportederror>"<code>NotSupportedError</code>"</a> <code id=playing-the-media-resource:domexception-4><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</p>

    <p class=note>This means that the <a href=#dedicated-media-source-failure-steps id=playing-the-media-resource:dedicated-media-source-failure-steps>dedicated media source failure steps</a> have run.
    Playback is not possible until the <a href=#media-element-load-algorithm id=playing-the-media-resource:media-element-load-algorithm>media element load algorithm</a> clears the <code id=playing-the-media-resource:dom-media-error-2><a href=#dom-media-error>error</a></code> attribute.</p>

   </li><li><p>Let <var>promise</var> be a new promise and append <var>promise</var> to the <a href=#list-of-pending-play-promises id=playing-the-media-resource:list-of-pending-play-promises-3>list of
   pending play promises</a>.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-31>media element</a>'s <code id=playing-the-media-resource:dom-media-networkstate><a href=#dom-media-networkstate>networkState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, invoke the <a href=#media-element id=playing-the-media-resource:media-element-32>media element</a>'s
   <a href=#concept-media-load-algorithm id=playing-the-media-resource:concept-media-load-algorithm>resource selection algorithm</a>.</li><li>

    <p>If the <a href=#ended-playback id=playing-the-media-resource:ended-playback-5>playback has ended</a> and the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-7>direction of
    playback</a> is forwards, <a href=#dom-media-seek id=playing-the-media-resource:dom-media-seek-3>seek</a> to the <a href=#earliest-possible-position id=playing-the-media-resource:earliest-possible-position-4>earliest
    possible position</a> of the <a href=#media-resource id=playing-the-media-resource:media-resource-17>media resource</a>.</p>

    <p class=note>This <a href=#seekUpdate>will cause</a> the user agent to <a id=playing-the-media-resource:queue-a-task-6 href=webappapis.html#queue-a-task>queue a
    task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-8 data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate-4><a href=#event-media-timeupdate>timeupdate</a></code> at the <a href=#media-element id=playing-the-media-resource:media-element-33>media element</a>.</p>
    

   </li><li>

    <p>If the <a href=#media-element id=playing-the-media-resource:media-element-34>media element</a>'s <code id=playing-the-media-resource:dom-media-paused-9><a href=#dom-media-paused>paused</a></code> attribute
    is true, then:</p>

    <ol><li><p>Change the value of <code id=playing-the-media-resource:dom-media-paused-10><a href=#dom-media-paused>paused</a></code> to false.</li><li><p>If the <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag>show poster flag</a> is true, set the element's <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-2>show poster
     flag</a> to false and run the <i id=playing-the-media-resource:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps.</li><li><p><a id=playing-the-media-resource:queue-a-task-7 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-9 data-x-internal=concept-event-fire>fire an event</a>
     named <code id=playing-the-media-resource:event-media-play><a href=#event-media-play>play</a></code> at the element.</li><li>

      <p>If the <a href=#media-element id=playing-the-media-resource:media-element-35>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>
      attribute has the value <code id=playing-the-media-resource:dom-media-have_nothing-2><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, <code id=playing-the-media-resource:dom-media-have_metadata-4><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>, or <code id=playing-the-media-resource:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>, <a id=playing-the-media-resource:queue-a-task-8 href=webappapis.html#queue-a-task>queue a task</a> to
      <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-10 data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-waiting-2><a href=#event-media-waiting>waiting</a></code> at the element.</p>

      <p>Otherwise, the <a href=#media-element id=playing-the-media-resource:media-element-36>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-have_future_data-4><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-3><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>: <a href=#notify-about-playing id=playing-the-media-resource:notify-about-playing>notify about playing</a>
      for the element.</p>

     </li></ol>

   </li><li>

    <p>Otherwise, if the <a href=#media-element id=playing-the-media-resource:media-element-37>media element</a>'s <code id=playing-the-media-resource:dom-media-readystate-9><a href=#dom-media-readystate>readyState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-have_future_data-5><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code> or <code id=playing-the-media-resource:dom-media-have_enough_data-4><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>, <a href=#take-pending-play-promises id=playing-the-media-resource:take-pending-play-promises-3>take pending play
    promises</a> and <a id=playing-the-media-resource:queue-a-task-9 href=webappapis.html#queue-a-task>queue a task</a> to <a href=#resolve-pending-play-promises id=playing-the-media-resource:resolve-pending-play-promises-2>resolve pending play promises</a> with
    the result.</p>

    <p class=note>The media element is already playing. However, it's possible that
    <var>promise</var> will be <a href=#reject-pending-play-promises id=playing-the-media-resource:reject-pending-play-promises-2>rejected</a> before
    the queued task is run.</p>

   </li><li><p>Set the <a href=#media-element id=playing-the-media-resource:media-element-38>media element</a>'s <a href=#can-autoplay-flag id=playing-the-media-resource:can-autoplay-flag-2>can autoplay flag</a> to false.</li><li><p>Return <var>promise</var>.</li></ol>

  <hr>

  <p>When the <dfn id=dom-media-pause><code>pause()</code></dfn> method is invoked, and when
  the user agent is required to pause the <a href=#media-element id=playing-the-media-resource:media-element-39>media element</a>, the user agent must run the
  following steps:</p>

  <ol><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-40>media element</a>'s <code id=playing-the-media-resource:dom-media-networkstate-2><a href=#dom-media-networkstate>networkState</a></code> attribute has the value <code id=playing-the-media-resource:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>, invoke the <a href=#media-element id=playing-the-media-resource:media-element-41>media element</a>'s
   <a href=#concept-media-load-algorithm id=playing-the-media-resource:concept-media-load-algorithm-2>resource selection algorithm</a>.</li><li><p>Run the <a href=#internal-pause-steps id=playing-the-media-resource:internal-pause-steps>internal pause steps</a> for the <a href=#media-element id=playing-the-media-resource:media-element-42>media element</a>.</li></ol>

  <p>The <dfn id=internal-pause-steps>internal pause steps</dfn> for a <a href=#media-element id=playing-the-media-resource:media-element-43>media element</a> are as follows:</p>

  <ol><li><p>Set the <a href=#media-element id=playing-the-media-resource:media-element-44>media element</a>'s <a href=#can-autoplay-flag id=playing-the-media-resource:can-autoplay-flag-3>can autoplay flag</a> to false.</li><li><p>If the <a href=#media-element id=playing-the-media-resource:media-element-45>media element</a>'s <code id=playing-the-media-resource:dom-media-paused-11><a href=#dom-media-paused>paused</a></code> attribute
   is false, run the following steps:</p>

    <ol><li><p>Change the value of <code id=playing-the-media-resource:dom-media-paused-12><a href=#dom-media-paused>paused</a></code> to true.</li><li><p><a href=#take-pending-play-promises id=playing-the-media-resource:take-pending-play-promises-4>Take pending play promises</a> and let <var>promises</var> be the
     result.</li><li>

      <p><a id=playing-the-media-resource:queue-a-task-10 href=webappapis.html#queue-a-task>Queue a task</a> to run these steps:</p>

      <ol><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-11 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate-5><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-12 data-x-internal=concept-event-fire>Fire an event</a> named <code id=playing-the-media-resource:event-media-pause-2><a href=#event-media-pause>pause</a></code> at the element.</li><li><p><a href=#reject-pending-play-promises id=playing-the-media-resource:reject-pending-play-promises-3>Reject pending play promises</a> with <var>promises</var> and an
       <a id=playing-the-media-resource:aborterror-2 href=https://triple-underscore.github.io/WebIDL-ja.html#aborterror data-x-internal=aborterror>"<code>AbortError</code>"</a> <code id=playing-the-media-resource:domexception-5><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li></ol>

     </li><li><p>Set the <a href=#official-playback-position id=playing-the-media-resource:official-playback-position>official playback position</a> to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-8>current playback
     position</a>.</li></ol>

   </li></ol>

  <hr>

  <p>If the element's <code id=playing-the-media-resource:dom-media-playbackrate-3><a href=#dom-media-playbackrate>playbackRate</a></code> is positive or zero,
  then the <dfn id=direction-of-playback>direction of playback</dfn> is forwards. Otherwise, it is backwards.</p>

  <p id=media-playback>When a <a href=#media-element id=playing-the-media-resource:media-element-46>media element</a> is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-4>potentially playing</a> and
  its <code id=playing-the-media-resource:document><a href=dom.html#document>Document</a></code> is a <a id=playing-the-media-resource:fully-active href=browsers.html#fully-active>fully active</a> <code id=playing-the-media-resource:document-2><a href=dom.html#document>Document</a></code>, its <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-9>current
  playback position</a> must increase monotonically at the element's <code id=playing-the-media-resource:dom-media-playbackrate-4><a href=#dom-media-playbackrate>playbackRate</a></code> units of media time per unit time of the
  <a href=#media-timeline id=playing-the-media-resource:media-timeline-2>media timeline</a>'s clock. (This specification always refers to this as an
  <i>increase</i>, but that increase could actually be a <em>de</em>crease if the element's <code id=playing-the-media-resource:dom-media-playbackrate-5><a href=#dom-media-playbackrate>playbackRate</a></code> is negative.)<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28236" title='The "rules for updating the text track rendering" are not run when mode changes from hidden to showing'>28236</a></div>

  <p class=note>The element's <code id=playing-the-media-resource:dom-media-playbackrate-6><a href=#dom-media-playbackrate>playbackRate</a></code> can be
  0.0, in which case the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-10>current playback position</a> doesn't move, despite playback not
  being paused (<code id=playing-the-media-resource:dom-media-paused-13><a href=#dom-media-paused>paused</a></code> doesn't become true, and the <code id=playing-the-media-resource:event-media-pause-3><a href=#event-media-pause>pause</a></code> event doesn't fire).</p>

  <p class=note>This specification doesn't define how the user agent achieves the appropriate
  playback rate — depending on the protocol and media available, it is plausible that the user
  agent could negotiate with the server to have the server provide the media data at the appropriate
  rate, so that (except for the period between when the rate is changed and when the server updates
  the stream's playback rate) the client doesn't actually have to drop or interpolate any
  frames.</p>

  <p>Any time the user agent <a href=webappapis.html#await-a-stable-state id=playing-the-media-resource:await-a-stable-state>provides a stable state</a>,
  the <a href=#official-playback-position id=playing-the-media-resource:official-playback-position-2>official playback position</a> must be set to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-11>current playback
  position</a>.</p> 

  <p>While the <a href=#direction-of-playback id=playing-the-media-resource:direction-of-playback-8>direction of playback</a> is backwards, any corresponding audio must be
  <a href=#concept-media-muted id=playing-the-media-resource:concept-media-muted-2>muted</a>. While the element's <code id=playing-the-media-resource:dom-media-playbackrate-7><a href=#dom-media-playbackrate>playbackRate</a></code> is so low or so high that the user agent
  cannot play audio usefully, the corresponding audio must also be <a href=#concept-media-muted id=playing-the-media-resource:concept-media-muted-3>muted</a>. If the element's <code id=playing-the-media-resource:dom-media-playbackrate-8><a href=#dom-media-playbackrate>playbackRate</a></code> is not 1.0, the user agent may apply pitch
  adjustments to the audio as necessary to render it faithfully.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-47>media element</a> is <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-5>potentially playing</a>, its audio data played
  must be synchronized with the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-12>current playback position</a>, at the element's
  <a href=#effective-media-volume id=playing-the-media-resource:effective-media-volume>effective media volume</a>. The user agent must play the audio from audio tracks that
  were enabled when the <a id=playing-the-media-resource:event-loop-3 href=webappapis.html#event-loop>event loop</a> last reached <a href=webappapis.html#step1>step 1</a>.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-48>media element</a> is not <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-6>potentially playing</a>, audio must not play
  for the element.</p>

  <p><a href=#media-element id=playing-the-media-resource:media-element-49>Media elements</a> that are <a href=#potentially-playing id=playing-the-media-resource:potentially-playing-7>potentially playing</a>
  while not <a id=playing-the-media-resource:in-a-document href=https://triple-underscore.github.io/DOM4-ja.html#in-a-document data-x-internal=in-a-document>in a document</a> must not play any video, but should play any audio component.
  Media elements must not stop playing just because all references to them have been removed; only
  once a media element is in a state where no further audio could ever be played by that element may
  the element be garbage collected.</p>

  <p class=note>It is possible for an element to which no explicit references exist to play audio,
  even if such an element is not still actively playing: for instance, it could be unpaused but
  stalled waiting for content to buffer, or it could be still buffering, but with a
  <code id=playing-the-media-resource:event-media-suspend><a href=#event-media-suspend>suspend</a></code> event listener that begins playback. Even a
  media element whose <a href=#media-resource id=playing-the-media-resource:media-resource-18>media resource</a> has no audio tracks could eventually play audio
  again if it had an event listener that changes the <a href=#media-resource id=playing-the-media-resource:media-resource-19>media resource</a>.</p>

  <hr>

  <p>Each <a href=#media-element id=playing-the-media-resource:media-element-50>media element</a> has a <dfn id=list-of-newly-introduced-cues>list of newly introduced cues</dfn>, which must be
  initially empty. Whenever a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue>text track cue</a> is added to the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues>list of cues</a> of a <a href=#text-track id=playing-the-media-resource:text-track>text track</a> that is in the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks>list of text
  tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-51>media element</a>, that <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-2>cue</a> must
  be added to the <a href=#media-element id=playing-the-media-resource:media-element-52>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues>list of newly introduced cues</a>. Whenever
  a <a href=#text-track id=playing-the-media-resource:text-track-2>text track</a> is added to the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-2>list of text tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-53>media
  element</a>, all of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-3>cues</a> in that <a href=#text-track id=playing-the-media-resource:text-track-3>text
  track</a>'s <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-2>list of cues</a> must be added to the
  <a href=#media-element id=playing-the-media-resource:media-element-54>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-2>list of newly introduced cues</a>. When a <a href=#media-element id=playing-the-media-resource:media-element-55>media
  element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-3>list of newly introduced cues</a> has new cues added while the
  <a href=#media-element id=playing-the-media-resource:media-element-56>media element</a>'s <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-3>show poster flag</a> is not set, then the user agent must
  run the <i id=playing-the-media-resource:time-marches-on-2><a href=#time-marches-on>time marches on</a></i> steps.</p>

  <p>When a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-4>text track cue</a> is removed from the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-3>list of cues</a> of a <a href=#text-track id=playing-the-media-resource:text-track-4>text track</a> that is in the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-3>list of text
  tracks</a> for a <a href=#media-element id=playing-the-media-resource:media-element-57>media element</a>, and whenever a <a href=#text-track id=playing-the-media-resource:text-track-5>text track</a> is removed
  from the <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-4>list of text tracks</a> of a <a href=#media-element id=playing-the-media-resource:media-element-58>media element</a>, if the <a href=#media-element id=playing-the-media-resource:media-element-59>media
  element</a>'s <a href=#show-poster-flag id=playing-the-media-resource:show-poster-flag-4>show poster flag</a> is not set, then the user agent must run the
  <i id=playing-the-media-resource:time-marches-on-3><a href=#time-marches-on>time marches on</a></i> steps.</p>

  <p>When the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-13>current playback position</a> of a <a href=#media-element id=playing-the-media-resource:media-element-60>media element</a> changes (e.g.
  due to playback or seeking), the user agent must run the <i id=playing-the-media-resource:time-marches-on-4><a href=#time-marches-on>time marches on</a></i> steps. If the
  <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-14>current playback position</a> changes while the steps are running, then the user agent
  must wait for the steps to complete, and then must immediately rerun the steps. (These steps are
  thus run as often as possible or needed — if one iteration takes a long time, this can cause
  certain <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-5>cues</a> to be skipped over as the user agent rushes ahead
  to "catch up".)</p>

  <p>The <dfn id=time-marches-on><i>time marches on</i></dfn> steps are as follows:</p>

  <ol><li><p>Let <var>current cues</var> be a list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-6>cues</a>, initialized to contain all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-7>cues</a> of all
   the <a href=#text-track-hidden id=playing-the-media-resource:text-track-hidden>hidden</a> or <a href=#text-track-showing id=playing-the-media-resource:text-track-showing>showing</a> <a href=#text-track id=playing-the-media-resource:text-track-6>text tracks</a> of the <a href=#media-element id=playing-the-media-resource:media-element-61>media
   element</a> (not the <a href=#text-track-disabled id=playing-the-media-resource:text-track-disabled>disabled</a> ones) whose <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-2>start times</a> are less than or equal to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-15>current
   playback position</a> and whose <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-2>end times</a> are
   greater than the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-16>current playback position</a>.</li><li><p>Let <var>other cues</var> be a list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-8>cues</a>,
   initialized to contain all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-9>cues</a> of <a href=#text-track-hidden id=playing-the-media-resource:text-track-hidden-2>hidden</a> and <a href=#text-track-showing id=playing-the-media-resource:text-track-showing-2>showing</a> <a href=#text-track id=playing-the-media-resource:text-track-7>text tracks</a> of the <a href=#media-element id=playing-the-media-resource:media-element-62>media element</a> that are not present in <var>current cues</var>.</li><li><p>Let <var>last time</var> be the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-17>current playback position</a> at the
   time this algorithm was last run for this <a href=#media-element id=playing-the-media-resource:media-element-63>media element</a>, if this is not the first
   time it has run.</li><li><p>If the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-18>current playback position</a> has, since the last time this algorithm was
   run, only changed through its usual monotonic increase during normal playback, then let <var>missed cues</var> be the list of <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-10>cues</a> in <var>other cues</var> whose <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-3>start times</a> are
   greater than or equal to <var>last time</var> and whose <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-3>end times</a> are less than or equal to the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-19>current playback position</a>.
   Otherwise, let <var>missed cues</var> be an empty list.</li><li><p>Remove all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-11>cues</a> in <var>missed cues</var>
   that are also in the <a href=#media-element id=playing-the-media-resource:media-element-64>media element</a>'s <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-4>list of newly introduced cues</a>, and
   then empty the element's <a href=#list-of-newly-introduced-cues id=playing-the-media-resource:list-of-newly-introduced-cues-5>list of newly introduced cues</a>.</li><li><p>If the time was reached through the usual monotonic increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-20>current playback
   position</a> during normal playback, and if the user agent has not fired a <code id=playing-the-media-resource:event-media-timeupdate-6><a href=#event-media-timeupdate>timeupdate</a></code> event at the element in the past 15 to 250ms and
   is not still running event handlers for such an event, then the user agent must <a id=playing-the-media-resource:queue-a-task-11 href=webappapis.html#queue-a-task>queue a
   task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-13 data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-timeupdate-7><a href=#event-media-timeupdate>timeupdate</a></code> at the element. (In the other cases, such as
   explicit seeks, relevant events get fired as part of the overall process of changing the
   <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-21>current playback position</a>.)</p>

   <p class=note>The event thus is not to be fired faster than about 66Hz or slower than 4Hz
   (assuming the event handlers don't take longer than 250ms to run). User agents are encouraged to
   vary the frequency of the event based on the system load and the average cost of processing the
   event each time, so that the UI updates are not any more frequent than the user agent can
   comfortably handle while decoding the video.</li><li><p>If all of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-12>cues</a> in <var>current cues</var>
   have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag>text track cue active flag</a> set, none of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-13>cues</a> in <var>other cues</var> have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-2>text track cue active
   flag</a> set, and <var>missed cues</var> is empty, then return.</li><li>

    <p>If the time was reached through the usual monotonic increase of the <a href=#current-playback-position id=playing-the-media-resource:current-playback-position-22>current playback
    position</a> during normal playback, and there are <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-14>cues</a>
    in <var>other cues</var> that have their <a href=#text-track-cue-pause-on-exit-flag id=playing-the-media-resource:text-track-cue-pause-on-exit-flag>text track cue pause-on-exit flag</a>
    set and that either have their <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-3>text track cue active flag</a> set or are also in <var>missed cues</var>, then <a id=playing-the-media-resource:immediately href=infrastructure.html#immediately>immediately</a> <a href=#dom-media-pause id=playing-the-media-resource:dom-media-pause>pause</a> the
    <a href=#media-element id=playing-the-media-resource:media-element-65>media element</a>.  </p>

    <p class=note>In the other cases, such as explicit seeks, playback is not paused by going past
    the end time of a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-15>cue</a>, even if that <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-16>cue</a> has its <a href=#text-track-cue-pause-on-exit-flag id=playing-the-media-resource:text-track-cue-pause-on-exit-flag-2>text track cue pause-on-exit flag</a> set.</p>

   </li><li>

    <p>Let <var>events</var> be a list of <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task>tasks</a>,
    initially empty. Each <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-2>task</a> in this list will be associated
    with a <a href=#text-track id=playing-the-media-resource:text-track-8>text track</a>, a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-17>text track cue</a>, and a time, which are used to
    sort the list before the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-3>tasks</a> are queued.</p>

    <p>Let <var>affected tracks</var> be a list of <a href=#text-track id=playing-the-media-resource:text-track-9>text
    tracks</a>, initially empty.</p>

    <p>When the steps below say to <dfn id=prepare-an-event>prepare an event</dfn> named <var>event</var> for a
    <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-18>text track cue</a> <var>target</var> with a time <var>time</var>, the
    user agent must run these steps:</p>

    <ol><li><p>Let <var>track</var> be the <a href=#text-track id=playing-the-media-resource:text-track-10>text track</a> with which the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-19>text
     track cue</a> <var>target</var> is associated.</li><li><p>Create a <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-4>task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-14 data-x-internal=concept-event-fire>fire an event</a> named <var>event</var> at
     <var>target</var>.</li><li><p>Add the newly created <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-5>task</a> to <var>events</var>, associated with the time <var>time</var>, the <a href=#text-track id=playing-the-media-resource:text-track-11>text
     track</a> <var>track</var>, and the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-20>text track cue</a> <var>target</var>.</li><li><p>Add <var>track</var> to <var>affected tracks</var>.</li></ol>

   </li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-21>text track cue</a> in <var>missed
   cues</var>, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event>prepare an event</a> named <code id=playing-the-media-resource:event-media-enter><a href=#event-media-enter>enter</a></code> for the
   <code id=playing-the-media-resource:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code> object with the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-4>text track cue start time</a>.</li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-22>text track cue</a> in <var>other
   cues</var> that either has its <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-4>text track cue active flag</a> set or is in <var>missed cues</var>, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event-2>prepare an event</a> named <code id=playing-the-media-resource:event-media-exit><a href=#event-media-exit>exit</a></code> for the <code id=playing-the-media-resource:texttrackcue-2><a href=#texttrackcue>TextTrackCue</a></code> object with the later of the
   <a href=#text-track-cue-end-time id=playing-the-media-resource:text-track-cue-end-time-4>text track cue end time</a> and the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-5>text track cue start time</a>.</li><li><p>For each <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-23>text track cue</a> in <var>current
   cues</var> that does not have its <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-5>text track cue active flag</a> set, <a href=#prepare-an-event id=playing-the-media-resource:prepare-an-event-3>prepare an
   event</a> named <code id=playing-the-media-resource:event-media-enter-2><a href=#event-media-enter>enter</a></code> for the <code id=playing-the-media-resource:texttrackcue-3><a href=#texttrackcue>TextTrackCue</a></code>
   object with the <a href=#text-track-cue-start-time id=playing-the-media-resource:text-track-cue-start-time-6>text track cue start time</a>.</li><li>

    <p>Sort the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-6>tasks</a> in <var>events</var> in ascending
    time order (<a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-7>tasks</a> with earlier times first).</p>

    <p>Further sort <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-8>tasks</a> in <var>events</var> that have
    the same time by the relative <a href=#text-track-cue-order id=playing-the-media-resource:text-track-cue-order>text track cue order</a> of the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-24>text track cues</a> associated with these <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-9>tasks</a>.</p>

    <p>Finally, sort <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-10>tasks</a> in <var>events</var> that have
    the same time and same <a href=#text-track-cue-order id=playing-the-media-resource:text-track-cue-order-2>text track cue order</a> by placing <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-11>tasks</a> that fire <code id=playing-the-media-resource:event-media-enter-3><a href=#event-media-enter>enter</a></code> events before
    those that fire <code id=playing-the-media-resource:event-media-exit-2><a href=#event-media-exit>exit</a></code> events.</p>

   </li><li><p><a href=webappapis.html#queue-a-task id=playing-the-media-resource:queue-a-task-12>Queue</a> each <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-12>task</a> in
   <var>events</var>, in list order.</li><li><p>Sort <var>affected tracks</var> in the same order as the <a href=#text-track id=playing-the-media-resource:text-track-12>text tracks</a> appear in the <a href=#media-element id=playing-the-media-resource:media-element-66>media element</a>'s <a href=#list-of-text-tracks id=playing-the-media-resource:list-of-text-tracks-5>list of text
   tracks</a>, and remove duplicates.</p>

   </li><li><p>For each <a href=#text-track id=playing-the-media-resource:text-track-13>text track</a> in <var>affected tracks</var>, in the list
   order, <a id=playing-the-media-resource:queue-a-task-13 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-15 data-x-internal=concept-event-fire>fire an event</a> named
   <code id=playing-the-media-resource:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code> at the <code id=playing-the-media-resource:texttrack><a href=#texttrack>TextTrack</a></code> object, and,
   if the <a href=#text-track id=playing-the-media-resource:text-track-14>text track</a> has a corresponding <code id=playing-the-media-resource:the-track-element><a href=#the-track-element>track</a></code> element, to then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=playing-the-media-resource:concept-event-fire-16 data-x-internal=concept-event-fire>fire an event</a> named <code id=playing-the-media-resource:event-media-cuechange-2><a href=#event-media-cuechange>cuechange</a></code> at the <code id=playing-the-media-resource:the-track-element-2><a href=#the-track-element>track</a></code> element as
   well.</li><li><p>Set the <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-6>text track cue active flag</a> of all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-25>cues</a> in the <var>current cues</var>, and unset the <a href=#text-track-cue-active-flag id=playing-the-media-resource:text-track-cue-active-flag-7>text track cue
   active flag</a> of all the <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-26>cues</a> in the <var>other
   cues</var>.</li><li><p>Run the <a href=#rules-for-updating-the-text-track-rendering id=playing-the-media-resource:rules-for-updating-the-text-track-rendering>rules for updating the text track rendering</a> of each of the <a href=#text-track id=playing-the-media-resource:text-track-15>text tracks</a> in <var>affected tracks</var> that are <a href=#text-track-showing id=playing-the-media-resource:text-track-showing-3>showing</a>, providing the <a href=#text-track id=playing-the-media-resource:text-track-16>text track</a>'s <a href=#text-track-language id=playing-the-media-resource:text-track-language>text track
   language</a> as the fallback language if it is not the empty string. For example, for <a href=#text-track id=playing-the-media-resource:text-track-17>text tracks</a> based on WebVTT, the <a id=playing-the-media-resource:rules-for-updating-the-display-of-webvtt-text-tracks href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks data-x-internal=rules-for-updating-the-display-of-webvtt-text-tracks>rules for updating the display
   of WebVTT text tracks</a>. <a href=references.html#refsWEBVTT>[WEBVTT]</a></li></ol>

  <p>For the purposes of the algorithm above, a <a href=#text-track-cue id=playing-the-media-resource:text-track-cue-27>text track cue</a> is considered to be part
  of a <a href=#text-track id=playing-the-media-resource:text-track-18>text track</a> only if it is listed in the <a href=#text-track-list-of-cues id=playing-the-media-resource:text-track-list-of-cues-4>text track list of cues</a>, not
  merely if it is associated with the <a href=#text-track id=playing-the-media-resource:text-track-19>text track</a>.</p>

  <p class=note>If the <a href=#media-element id=playing-the-media-resource:media-element-67>media element</a>'s <a id=playing-the-media-resource:node-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a> stops being a
  <a id=playing-the-media-resource:fully-active-2 href=browsers.html#fully-active>fully active</a> document, then the playback will <a href=#media-playback>stop</a>
  until the document is active again.</p>

  <p>When a <a href=#media-element id=playing-the-media-resource:media-element-68>media element</a> is <a href=infrastructure.html#remove-an-element-from-a-document id=playing-the-media-resource:remove-an-element-from-a-document>removed
  from a <code>Document</code></a>, the user agent must run the following steps:</p>

  <ol><li><p><a id=playing-the-media-resource:await-a-stable-state-2 href=webappapis.html#await-a-stable-state>Await a stable state</a>, allowing the <a href=webappapis.html#concept-task id=playing-the-media-resource:concept-task-13>task</a> that removed the <a href=#media-element id=playing-the-media-resource:media-element-69>media element</a> from the
   <code id=playing-the-media-resource:document-3><a href=dom.html#document>Document</a></code> to continue. The <a id=playing-the-media-resource:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> consists of all the
   remaining steps of this algorithm. (Steps in the <a id=playing-the-media-resource:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> are marked with
   ⌛.)</li><li><p>⌛ If the <a href=#media-element id=playing-the-media-resource:media-element-70>media element</a> is <a id=playing-the-media-resource:in-a-document-2 href=https://triple-underscore.github.io/DOM4-ja.html#in-a-document data-x-internal=in-a-document>in a document</a>, return.</li><li><p>⌛ Run the <a href=#internal-pause-steps id=playing-the-media-resource:internal-pause-steps-2>internal pause steps</a> for the <a href=#media-element id=playing-the-media-resource:media-element-71>media element</a>.</p>

  </li></ol>

  



  <h5 id=seeking><span class=secno>4.8.12.9</span> シーク<a href=#seeking class=self-link></a></h5>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-seeking-dev><a href=#dom-media-seeking>seeking</a></code><dd>

    <p>ユーザーエージェントが現在シークしている場合にtrueを返す。</p>

   <dt><var>media</var> . <code id=dom-media-seekable-dev><a href=#dom-media-seekable>seekable</a></code><dd>

    <p>ユーザーエージェントがシーク可能である<a href=#media-resource id=seeking:media-resource>メディアリソース</a>の範囲を表す<code id=seeking:timeranges><a href=#timeranges>TimeRanges</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=dom-media-fastseek-dev><a href=#dom-media-fastseek>fastSeek</a></code>( <var>time</var> )<dd>

    <p>高速化のため、できるだけ早く近くに与えられた<var>time</var>をシークする。（正確な時刻を求めるために、<code id=seeking:dom-media-currenttime><a href=#dom-media-currenttime>currentTime</a></code>属性を使用する。）</p>

    <p>メディアリソースがロードされない場合、これは何もしない。</p>

   </dl>

  

  <p>The <dfn id=dom-media-seeking><code>seeking</code></dfn> attribute must initially have the
  value false.</p>

  <p>The <dfn id=dom-media-fastseek><code>fastSeek()</code></dfn> method must <a href=#dom-media-seek id=seeking:dom-media-seek>seek</a> to the time given by the method's argument, with the
  <i>approximate-for-speed</i> flag set.</p>

  <p>When the user agent is required to <dfn id=dom-media-seek>seek</dfn> to a particular <var>new playback position</var> in the <a href=#media-resource id=seeking:media-resource-2>media resource</a>, optionally with the
  <i>approximate-for-speed</i> flag set, it means that the user agent must run the following steps.
  This algorithm interacts closely with the <a id=seeking:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has
  a <a id=seeking:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> (which is triggered as part of the <a id=seeking:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). Steps in that section are marked with ⌛.<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28929" title="Setting video.currentTime (seeking) should synchronously update the attribute's value">28929</a></div>

  <ol><li><p>Set the <a href=#media-element id=seeking:media-element>media element</a>'s <a href=#show-poster-flag id=seeking:show-poster-flag>show poster flag</a> to false.</li><li><p>If the <a href=#media-element id=seeking:media-element-2>media element</a>'s <code id=seeking:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>
   is <code id=seeking:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>, return.</li><li><p>If the element's <code id=seeking:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code> IDL attribute is true,
   then another instance of this algorithm is already running. Abort that other instance of the
   algorithm without waiting for the step that it is running to complete.</li><li><p>Set the <code id=seeking:dom-media-seeking-2><a href=#dom-media-seeking>seeking</a></code> IDL attribute to true.</li><li><p>If the seek was in response to a DOM method call or setting of an IDL attribute, then
   continue the script. The remainder of these steps must be run <a id=seeking:in-parallel href=infrastructure.html#in-parallel>in parallel</a>. With the exception
   of the steps marked with ⌛, they could be aborted at any time by another instance of this
   algorithm being invoked.</li><li><p>If the <var>new playback position</var> is later than the end of the <a href=#media-resource id=seeking:media-resource-3>media
   resource</a>, then let it be the end of the <a href=#media-resource id=seeking:media-resource-4>media resource</a> instead.</li><li><p>If the <var>new playback position</var> is less than the <a href=#earliest-possible-position id=seeking:earliest-possible-position>earliest possible
   position</a>, let it be that position instead.</li><li><p>If the (possibly now changed) <var>new playback position</var> is not in one of
   the ranges given in the <code id=seeking:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code> attribute, then let it
   be the position in one of the ranges given in the <code id=seeking:dom-media-seekable-2><a href=#dom-media-seekable>seekable</a></code> attribute that is the nearest to the <var>new
   playback position</var>. If two positions both satisfy that constraint (i.e. the <var>new playback position</var> is exactly in the middle between two ranges in the <code id=seeking:dom-media-seekable-3><a href=#dom-media-seekable>seekable</a></code> attribute) then use the position that is closest to
   the <a href=#current-playback-position id=seeking:current-playback-position>current playback position</a>. If there are no ranges given in the <code id=seeking:dom-media-seekable-4><a href=#dom-media-seekable>seekable</a></code> attribute then set the <code id=seeking:dom-media-seeking-3><a href=#dom-media-seeking>seeking</a></code> IDL attribute to false and return.</li><li>

    <p>If the <i>approximate-for-speed</i> flag is set, adjust the <var>new playback
    position</var> to a value that will allow for playback to resume promptly. If <var>new
    playback position</var> before this step is before <a href=#current-playback-position id=seeking:current-playback-position-2>current playback position</a>, then
    the adjusted <var>new playback position</var> must also be before the <a href=#current-playback-position id=seeking:current-playback-position-3>current
    playback position</a>. Similarly, if the <var>new playback position</var> before
    this step is after <a href=#current-playback-position id=seeking:current-playback-position-4>current playback position</a>, then the adjusted <var>new
    playback position</var> must also be after the <a href=#current-playback-position id=seeking:current-playback-position-5>current playback position</a>.</p>

    <p class=example>For example, the user agent could snap to a nearby key frame, so that it
    doesn't have to spend time decoding then discarding intermediate frames before resuming
    playback.</p>

    </li><li><p><a id=seeking:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=seeking:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named
   <code id=seeking:event-media-seeking><a href=#event-media-seeking>seeking</a></code> at the element.</li><li>

    <p>Set the <a href=#current-playback-position id=seeking:current-playback-position-6>current playback position</a> to the <var>new playback
    position</var>.</p>

    <p class=note>If the <a href=#media-element id=seeking:media-element-3>media element</a> was <a href=#potentially-playing id=seeking:potentially-playing>potentially playing</a>
    immediately before it started seeking, but seeking caused its <code id=seeking:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code> attribute to change to a value lower than <code id=seeking:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>, then a <code id=seeking:event-media-waiting><a href=#event-media-waiting>waiting</a></code> event <a href=#fire-waiting-when-waiting>will be
    fired</a> at the element.</p> 

    <p class=note>This step sets the <a href=#current-playback-position id=seeking:current-playback-position-7>current playback position</a>, and thus can
    immediately trigger other conditions, such as the rules regarding when playback "<a href=#reaches-the-end>reaches the end of the media resource</a>" (part of the logic that
    handles looping), even before the user agent is actually able to render the media data for that
    position (as determined in the next step).</p>

    <p class=note>The <code id=seeking:dom-media-currenttime-2><a href=#dom-media-currenttime>currentTime</a></code> attribute returns
    the <a href=#official-playback-position id=seeking:official-playback-position>official playback position</a>, not the <a href=#current-playback-position id=seeking:current-playback-position-8>current playback position</a>, and
    therefore gets updated before script execution, separate from this algorithm.</p>

   </li><li><p>Wait until the user agent has established whether or not the <a href=#media-data id=seeking:media-data>media data</a> for
   the <var>new playback position</var> is available, and, if it is, until it has decoded
   enough data to play back that position.</li><li><p><a id=seeking:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=seeking:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a> consists of all
   the remaining steps of this algorithm. (Steps in the <a id=seeking:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> are marked
   with ⌛.)</li><li><p>⌛ Set the <code id=seeking:dom-media-seeking-4><a href=#dom-media-seeking>seeking</a></code> IDL attribute to
   false.</li><li><p>⌛ Run the <a href=#time-marches-on id=seeking:time-marches-on>time marches on</a> steps.</li><li id=seekUpdate><p>⌛ <a id=seeking:queue-a-task-2 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=seeking:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named <code id=seeking:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code> at the element.</li><li><p>⌛ <a id=seeking:queue-a-task-3 href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=seeking:concept-event-fire-3 data-x-internal=concept-event-fire>fire an
   event</a> named <code id=seeking:event-media-seeked><a href=#event-media-seeked>seeked</a></code> at the element.</li></ol>

  <hr>

  <p>The <dfn id=dom-media-seekable><code>seekable</code></dfn> attribute must return a new
  static <a href=#normalised-timeranges-object id=seeking:normalised-timeranges-object>normalized <code>TimeRanges</code> object</a> that represents the ranges of the
  <a href=#media-resource id=seeking:media-resource-5>media resource</a>, if any, that the user agent is able to seek to, at the time the
  attribute is evaluated.</p>

  <p class=note>If the user agent can seek to anywhere in the <a href=#media-resource id=seeking:media-resource-6>media resource</a>, e.g.
  because it is a simple movie file and the user agent and the server support HTTP Range requests,
  then the attribute would return an object with one range, whose start is the time of the first
  frame (the <a href=#earliest-possible-position id=seeking:earliest-possible-position-2>earliest possible position</a>, typically zero), and whose end is the same as
  the time of the first frame plus the <code id=seeking:dom-media-duration><a href=#dom-media-duration>duration</a></code> attribute's
  value (which would equal the time of the last frame, and might be positive Infinity).</p>

  <p class=note>The range might be continuously changing, e.g. if the user agent is buffering a
  sliding window on an infinite stream. This is the behavior seen with DVRs viewing live TV, for
  instance.</p>

  <p class=warning>Returning a new object each time is a bad pattern for attribute getters and is
  only enshrined here as it would be costly to change it. It is not to be copied to new APIs.</p>

  <p>User agents should adopt a very liberal and optimistic view of what is seekable. User
  agents should also buffer recent content where possible to enable seeking to be fast.</p>

  <p class=example>For instance, consider a large video file served on an HTTP server without
  support for HTTP Range requests. A browser <em>could</em> implement this by only buffering the
  current frame and data obtained for subsequent frames, never allow seeking, except for seeking to
  the very start by restarting the playback. However, this would be a poor implementation. A high
  quality implementation would buffer the last few minutes of content (or more, if sufficient
  storage space is available), allowing the user to jump back and rewatch something surprising
  without any latency, and would in addition allow arbitrary seeking by reloading the file from the
  start if necessary, which would be slower but still more convenient than having to literally
  restart the video and watch it all the way through just to get to an earlier unbuffered spot.</p>

  <p><a href=#media-resource id=seeking:media-resource-7>Media resources</a> might be internally scripted or
  interactive. Thus, a <a href=#media-element id=seeking:media-element-4>media element</a> could play in a non-linear fashion. If this
  happens, the user agent must act as if the algorithm for <a href=#dom-media-seek id=seeking:dom-media-seek-2>seeking</a> was used whenever the <a href=#current-playback-position id=seeking:current-playback-position-9>current playback position</a>
  changes in a discontinuous fashion (so that the relevant events fire).</p>

  


  <h5 id=media-resources-with-multiple-media-tracks><span class=secno>4.8.12.10</span> 複数のメディアトラックを伴うメディアリソース<a href=#media-resources-with-multiple-media-tracks class=self-link></a></h5>

  <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource>メディアリソース</a> は、複数の埋め込みオーディオおよびビデオトラックを持つことができる。たとえば、主ビデオトラックとオーディオトラックに加えて、<a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-2>メディアリソース</a>は、外国語吹き替えのやりとり、監督の解説、音声による説明、代替アングル、または手話のオーバーレイを持つかもしれない。</p>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-audiotracks-dev><a href=#dom-media-audiotracks>audioTracks</a></code><dd>

    <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-3>メディアリソース</a>で使用可能なオーディオトラックを表す<code id=media-resources-with-multiple-media-tracks:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>オブジェクトを返す。</p>

   <dt><var>media</var> . <code id=dom-media-videotracks-dev><a href=#dom-media-videotracks>videoTracks</a></code><dd>

    <p><a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-4>メディアリソース</a>で使用可能なビデオトラックを表す<code id=media-resources-with-multiple-media-tracks:videotracklist><a href=#videotracklist>VideoTrackList</a></code>オブジェクトを返す。</p>

   </dl>

  

  <p>The <dfn id=dom-media-audiotracks><code>audioTracks</code></dfn> attribute of a
  <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element>media element</a> must return a <a id=media-resources-with-multiple-media-tracks:live href=infrastructure.html#live>live</a> <code id=media-resources-with-multiple-media-tracks:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code> object
  representing the audio tracks available in the <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-2>media element</a>'s <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-5>media
  resource</a>.</p>

  <p>The <dfn id=dom-media-videotracks><code>videoTracks</code></dfn> attribute of a
  <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-3>media element</a> must return a <a id=media-resources-with-multiple-media-tracks:live-2 href=infrastructure.html#live>live</a> <code id=media-resources-with-multiple-media-tracks:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code> object
  representing the video tracks available in the <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-4>media element</a>'s <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-6>media
  resource</a>.</p>

  <p class=note>There are only ever one <code id=media-resources-with-multiple-media-tracks:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object and one
  <code id=media-resources-with-multiple-media-tracks:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object per <a href=#media-element id=media-resources-with-multiple-media-tracks:media-element-5>media element</a>, even if another <a href=#media-resource id=media-resources-with-multiple-media-tracks:media-resource-7>media
  resource</a> is loaded into the element: the objects are reused. (The <code id=media-resources-with-multiple-media-tracks:audiotrack><a href=#audiotrack>AudioTrack</a></code>
  and <code id=media-resources-with-multiple-media-tracks:videotrack><a href=#videotrack>VideoTrack</a></code> objects are not, though.)</p>

  


  <h6 id=audiotracklist-and-videotracklist-objects><span class=secno>4.8.12.10.1</span> <code id=audiotracklist-and-videotracklist-objects:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotracklist><a href=#videotracklist>VideoTrackList</a></code> objects<a href=#audiotracklist-and-videotracklist-objects class=self-link></a></h6><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=support><strong>Support:</strong> audiotracks<span class="and_chr no"><span>Chrome for Android</span> <span>None</span></span><span class="chrome no"><span>Chrome</span> <span>None</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>7.0+</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="firefox no"><span>Firefox</span> <span>None</span></span><span class="ie yes"><span>IE</span> <span>10+</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="samsung no"><span>Samsung Internet</span> <span>None</span></span><span class="safari yes"><span>Safari</span> <span>6.1+</span></span><span class="edge yes"><span>Edge</span> <span>12+</span></span><span class="android no"><span>Android Browser</span> <span>None</span></span><span class="opera no"><span>Opera</span> <span>None</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=audiotracks">caniuse.com</a></div>

  <p><code id=audiotracklist-and-videotracklist-objects:audiotracklist-2><a href=#audiotracklist>AudioTrackList</a></code>および<code id=audiotracklist-and-videotracklist-objects:videotracklist-2><a href=#videotracklist>VideoTrackList</a></code>インターフェイスは、前節で定義された属性で使用される。</p>

  <pre class=idl>[Exposed=Window]
interface <dfn id=audiotracklist>AudioTrackList</dfn> : <a id=audiotracklist-and-videotracklist-objects:eventtarget href=https://triple-underscore.github.io/DOM4-ja.html#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-audiotracklist-length id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-length>length</a>;
  <a href=#dom-tracklist-item>getter</a> <a href=#audiotrack id=audiotracklist-and-videotracklist-objects:audiotrack>AudioTrack</a> (unsigned long index);
  <a href=#audiotrack id=audiotracklist-and-videotracklist-objects:audiotrack-2>AudioTrack</a>? <a href=#dom-audiotracklist-gettrackbyid id=audiotracklist-and-videotracklist-objects:dom-audiotracklist-gettrackbyid>getTrackById</a>(DOMString id);

  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onchange id=audiotracklist-and-videotracklist-objects:handler-tracklist-onchange>onchange</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-2 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onaddtrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack>onaddtrack</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-3 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onremovetrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack>onremovetrack</a>;
};

[Exposed=Window]
interface <dfn id=audiotrack>AudioTrack</dfn> {
  readonly attribute DOMString <a href=#dom-audiotrack-id id=audiotracklist-and-videotracklist-objects:dom-audiotrack-id>id</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-kind id=audiotracklist-and-videotracklist-objects:dom-audiotrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-label id=audiotracklist-and-videotracklist-objects:dom-audiotrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-audiotrack-language id=audiotracklist-and-videotracklist-objects:dom-audiotrack-language>language</a>;
  attribute boolean <a href=#dom-audiotrack-enabled id=audiotracklist-and-videotracklist-objects:dom-audiotrack-enabled>enabled</a>;
};

[Exposed=Window]
interface <dfn id=videotracklist>VideoTrackList</dfn> : <a id=audiotracklist-and-videotracklist-objects:eventtarget-2 href=https://triple-underscore.github.io/DOM4-ja.html#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-videotracklist-length id=audiotracklist-and-videotracklist-objects:dom-videotracklist-length>length</a>;
  <a href=#dom-tracklist-item>getter</a> <a href=#videotrack id=audiotracklist-and-videotracklist-objects:videotrack>VideoTrack</a> (unsigned long index);
  <a href=#videotrack id=audiotracklist-and-videotracklist-objects:videotrack-2>VideoTrack</a>? <a href=#dom-videotracklist-gettrackbyid id=audiotracklist-and-videotracklist-objects:dom-videotracklist-gettrackbyid>getTrackById</a>(DOMString id);
  readonly attribute long <a href=#dom-videotracklist-selectedindex id=audiotracklist-and-videotracklist-objects:dom-videotracklist-selectedindex>selectedIndex</a>;

  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-4 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onchange id=audiotracklist-and-videotracklist-objects:handler-tracklist-onchange-2>onchange</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-5 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onaddtrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onaddtrack-2>onaddtrack</a>;
  attribute <a id=audiotracklist-and-videotracklist-objects:eventhandler-6 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-tracklist-onremovetrack id=audiotracklist-and-videotracklist-objects:handler-tracklist-onremovetrack-2>onremovetrack</a>;
};

[Exposed=Window]
interface <dfn id=videotrack>VideoTrack</dfn> {
  readonly attribute DOMString <a href=#dom-videotrack-id id=audiotracklist-and-videotracklist-objects:dom-videotrack-id>id</a>;
  readonly attribute DOMString <a href=#dom-videotrack-kind id=audiotracklist-and-videotracklist-objects:dom-videotrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-videotrack-label id=audiotracklist-and-videotracklist-objects:dom-videotrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-videotrack-language id=audiotracklist-and-videotracklist-objects:dom-videotrack-language>language</a>;
  attribute boolean <a href=#dom-videotrack-selected id=audiotracklist-and-videotracklist-objects:dom-videotrack-selected>selected</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code> . <code id=dom-audiotracklist-length-dev><a href=#dom-audiotracklist-length>length</a></code><dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=dom-videotracklist-length-dev><a href=#dom-videotracklist-length>length</a></code><dd>

    <p>リスト内のトラックの数を返す。</p>

   <dt><var>audioTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks-2><a href=#dom-media-audiotracks>audioTracks</a></code>[<var>index</var>]<dt><var>videoTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-2><a href=#dom-media-videotracks>videoTracks</a></code>[<var>index</var>]<dd>

    <p>指定<code id=audiotracklist-and-videotracklist-objects:audiotrack-3><a href=#audiotrack>AudioTrack</a></code>または<code id=audiotracklist-and-videotracklist-objects:videotrack-3><a href=#videotrack>VideoTrack</a></code>オブジェクトを返す。</p>

   <dt><var>audioTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-audiotracks-3><a href=#dom-media-audiotracks>audioTracks</a></code> . <code id=dom-audiotracklist-gettrackbyid-dev><a href=#dom-audiotracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dt><var>videoTrack</var> = <var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-3><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=dom-videotracklist-gettrackbyid-dev><a href=#dom-videotracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dd>

    <p>与えられた識別子とともに<code id=audiotracklist-and-videotracklist-objects:audiotrack-4><a href=#audiotrack>AudioTrack</a></code>または<code id=audiotracklist-and-videotracklist-objects:videotrack-4><a href=#videotrack>VideoTrack</a></code>オブジェクトを返す、または一切トラックがその識別子を持たない場合nullを返す。</p>

   <dt><var>audioTrack</var> . <code id=dom-audiotrack-id-dev><a href=#dom-audiotrack-id>id</a></code><dt><var>videoTrack</var> . <code id=dom-videotrack-id-dev><a href=#dom-videotrack-id>id</a></code><dd>

    <p>指定されたトラックのIDを返す。フォーマットが<a id=audiotracklist-and-videotracklist-objects:media-fragment-syntax href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>メディアフラグメント構文</a>をサポートし、かつ<code>getTrackById()</code>メソッドとともに使用できる場合、これは、<a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=audiotracklist-and-videotracklist-objects:concept-url-fragment data-x-internal=concept-url-fragment>フラグメント</a>で使用できるIDである。</p>

   <dt><var>audioTrack</var> . <code id=dom-audiotrack-kind-dev><a href=#dom-audiotrack-kind>kind</a></code><dt><var>videoTrack</var> . <code id=dom-videotrack-kind-dev><a href=#dom-videotrack-kind>kind</a></code><dd>

    <p>与えられたトラックに該当するカテゴリーを返す。<a href=#dom-TrackList-getKind-categories>可能なトラックカテゴリー</a>は以下の通り。</p>

   <dt><var>audioTrack</var> . <code id=dom-audiotrack-label-dev><a href=#dom-audiotrack-label>label</a></code><dt><var>videoTrack</var> . <code id=dom-videotrack-label-dev><a href=#dom-videotrack-label>label</a></code><dd>

    <p>既知の場合、指定されたトラックのラベルを返し、そうでなければ空文字列を返す。</p>

   <dt><var>audioTrack</var> . <code id=dom-audiotrack-language-dev><a href=#dom-audiotrack-language>language</a></code><dt><var>videoTrack</var> . <code id=dom-videotrack-language-dev><a href=#dom-videotrack-language>language</a></code><dd>

    <p>既知の場合、指定されたトラックの言語を返し、そうでなければ空の文字列を返す。</p>

   <dt><var>audioTrack</var> . <code id=dom-audiotrack-enabled-dev><a href=#dom-audiotrack-enabled>enabled</a></code> [ = <var>value</var> ]<dd>

    <p>指定されたトラックがアクティブである場合、trueを返し、そうでなければfalseを返す。</p>

    <p>トラックが有効かどうかを変更する設定が可能である。複数のオーディオトラックが同時に有効である場合、それらが混在している。</p>

   <dt><var>media</var> . <code id=audiotracklist-and-videotracklist-objects:dom-media-videotracks-4><a href=#dom-media-videotracks>videoTracks</a></code> . <code id=dom-videotracklist-selectedindex-dev><a href=#dom-videotracklist-selectedindex>selectedIndex</a></code><dd>

    <p>もしあれば、現在選択されているトラックのインデックスを返し、そうでなければ-1を返す。</p>

   <dt><var>videoTrack</var> . <code id=dom-videotrack-selected-dev><a href=#dom-videotrack-selected>selected</a></code> [ = <var>value</var> ]<dd>

    <p>指定されたトラックがアクティブである場合、trueを返し、そうでなければfalseを返す。</p>

    <p>トラックが選択されるかどうかを変更する設定が可能である。0個または1つのいずれかのビデオトラックが選択される。前の1つが選択されている間に新しいトラックを選択すると、1つ前の選択を解除する。</p>

   </dl>

  

  <p>An <code id=audiotracklist-and-videotracklist-objects:audiotracklist-3><a href=#audiotracklist>AudioTrackList</a></code> object represents a dynamic list of zero or more audio tracks,
  of which zero or more can be enabled at a time. Each audio track is represented by an
  <code id=audiotracklist-and-videotracklist-objects:audiotrack-5><a href=#audiotrack>AudioTrack</a></code> object.</p>

  <p>A <code id=audiotracklist-and-videotracklist-objects:videotracklist-3><a href=#videotracklist>VideoTrackList</a></code> object represents a dynamic list of zero or more video tracks, of
  which zero or one can be selected at a time. Each video track is represented by a
  <code id=audiotracklist-and-videotracklist-objects:videotrack-5><a href=#videotrack>VideoTrack</a></code> object.</p>

  <p>Tracks in <code id=audiotracklist-and-videotracklist-objects:audiotracklist-4><a href=#audiotracklist>AudioTrackList</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotracklist-4><a href=#videotracklist>VideoTrackList</a></code> objects must be
  consistently ordered. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource>media resource</a> is in a format that defines an order,
  then that order must be used; otherwise, the order must be the relative order in which the tracks
  are declared in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-2>media resource</a>. The order used is called the <i>natural order</i>
  of the list.</p>

  <p class=note>Each track in one of these objects thus has an index; the first has the index
  0, and each subsequent track is numbered one higher than the previous one. If a <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-3>media
  resource</a> dynamically adds or removes audio or video tracks, then the indices of the tracks
  will change dynamically. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-4>media resource</a> changes entirely, then all the
  previous tracks will be removed and replaced with new tracks.</p>

  <p>The <dfn id=dom-audiotracklist-length><code>AudioTrackList.length</code></dfn> and <dfn id=dom-videotracklist-length><code>VideoTrackList.length</code></dfn> attributes must return
  the number of tracks represented by their objects at the time of getting.</p>

  <p>The <a id=audiotracklist-and-videotracklist-objects:supported-property-indices href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of <code id=audiotracklist-and-videotracklist-objects:audiotracklist-5><a href=#audiotracklist>AudioTrackList</a></code> and
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-5><a href=#videotracklist>VideoTrackList</a></code> objects at any instant are the numbers from zero to the number of
  tracks represented by the respective object minus one, if any tracks are represented. If an
  <code id=audiotracklist-and-videotracklist-objects:audiotracklist-6><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-6><a href=#videotracklist>VideoTrackList</a></code> object represents no tracks, it has no
  <a id=audiotracklist-and-videotracklist-objects:supported-property-indices-2 href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a>.</p>

  <p id=dom-tracklist-item>To <a id=audiotracklist-and-videotracklist-objects:determine-the-value-of-an-indexed-property href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-determine-the-value-of-an-indexed-property data-x-internal=determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> for a
  given index <var>index</var> in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-7><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-7><a href=#videotracklist>VideoTrackList</a></code>
  object <var>list</var>, the user agent must return the <code id=audiotracklist-and-videotracklist-objects:audiotrack-6><a href=#audiotrack>AudioTrack</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotrack-6><a href=#videotrack>VideoTrack</a></code> object that represents the <var>index</var>th track in <var>list</var>.</p>

  <p>The <dfn id=dom-audiotracklist-gettrackbyid><code>AudioTrackList.getTrackById(<var>id</var>)</code></dfn> and <dfn id=dom-videotracklist-gettrackbyid><code>VideoTrackList.getTrackById(<var>id</var>)</code></dfn> methods must return the first <code id=audiotracklist-and-videotracklist-objects:audiotrack-7><a href=#audiotrack>AudioTrack</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotrack-7><a href=#videotrack>VideoTrack</a></code> object (respectively) in the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-8><a href=#audiotracklist>AudioTrackList</a></code> or
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-8><a href=#videotracklist>VideoTrackList</a></code> object (respectively) whose identifier is equal to the value of the
  <var>id</var> argument (in the natural order of the list, as defined above). When no
  tracks match the given argument, the methods must return null.</p>

  <p>The <code id=audiotracklist-and-videotracklist-objects:audiotrack-8><a href=#audiotrack>AudioTrack</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotrack-8><a href=#videotrack>VideoTrack</a></code> objects represent specific tracks of a
  <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-5>media resource</a>. Each track can have an identifier, category, label, and language.
  These aspects of a track are permanent for the lifetime of the track; even if a track is removed
  from a <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-6>media resource</a>'s <code id=audiotracklist-and-videotracklist-objects:audiotracklist-9><a href=#audiotracklist>AudioTrackList</a></code> or <code id=audiotracklist-and-videotracklist-objects:videotracklist-9><a href=#videotracklist>VideoTrackList</a></code>
  objects, those aspects do not change.</p>

  <p>In addition, <code id=audiotracklist-and-videotracklist-objects:audiotrack-9><a href=#audiotrack>AudioTrack</a></code> objects can each be enabled or disabled; this is the audio
  track's <i>enabled state</i>. When an <code id=audiotracklist-and-videotracklist-objects:audiotrack-10><a href=#audiotrack>AudioTrack</a></code> is created, its <i>enabled state</i>
  must be set to false (disabled). The <a href=#concept-media-load-resource id=audiotracklist-and-videotracklist-objects:concept-media-load-resource>resource fetch
  algorithm</a> can override this.</p>

  <p>Similarly, a single <code id=audiotracklist-and-videotracklist-objects:videotrack-9><a href=#videotrack>VideoTrack</a></code> object per <code id=audiotracklist-and-videotracklist-objects:videotracklist-10><a href=#videotracklist>VideoTrackList</a></code> object can
  be selected, this is the video track's <i>selection state</i>. When a <code id=audiotracklist-and-videotracklist-objects:videotrack-10><a href=#videotrack>VideoTrack</a></code> is
  created, its <i>selection state</i> must be set to false (not selected). The <a href=#concept-media-load-resource id=audiotracklist-and-videotracklist-objects:concept-media-load-resource-2>resource fetch algorithm</a> can override this.</p>

  <p>The <dfn id=dom-audiotrack-id><code>AudioTrack.id</code></dfn> and <dfn id=dom-videotrack-id><code>VideoTrack.id</code></dfn> attributes must return the identifier
  of the track, if it has one, or the empty string otherwise. If the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-7>media resource</a> is
  in a format that supports <a id=audiotracklist-and-videotracklist-objects:media-fragment-syntax-2 href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>media fragment syntax</a>, the identifier returned for a particular
  track must be the same identifier that would enable the track if used as the name of a track in
  the track dimension of such a <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=audiotracklist-and-videotracklist-objects:concept-url-fragment-2 data-x-internal=concept-url-fragment>fragment</a>.
  <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p class=example>For example, in Ogg files, this would be the Name header field of the track. <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a></p>

  <p>The <dfn id=dom-audiotrack-kind><code>AudioTrack.kind</code></dfn> and <dfn id=dom-videotrack-kind><code>VideoTrack.kind</code></dfn> attributes must return the category
  of the track, if it has one, or the empty string otherwise.</p>

  <p>The category of a track is the string given in the first column of the table below that is the
  most appropriate for the track based on the definitions in the table's second and third columns,
  as determined by the metadata included in the track in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-8>media resource</a>. The cell
  in the third column of a row says what the category given in the cell in the first column of that
  row applies to; a category is only appropriate for an audio track if it applies to audio tracks,
  and a category is only appropriate for video tracks if it applies to video tracks. Categories must
  only be returned for <code id=audiotracklist-and-videotracklist-objects:audiotrack-11><a href=#audiotrack>AudioTrack</a></code> objects if they are appropriate for audio, and must
  only be returned for <code id=audiotracklist-and-videotracklist-objects:videotrack-11><a href=#videotrack>VideoTrack</a></code> objects if they are appropriate for video.</p>

  <p>For Ogg files, the Role header field of the track gives the relevant metadata. For DASH media
  resources, the <code>Role</code> element conveys the information. For WebM, only the
  <code>FlagDefault</code> element currently maps to a value. The <cite>Sourcing In-band
  Media Resource Tracks from Media Containers into HTML</cite> specification has further details.
  <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a> <a href=references.html#refsDASH>[DASH]</a> <a href=references.html#refsWEBMCG>[WEBMCG]</a> <a href=references.html#refsINBAND>[INBAND]</a></p>

  

  <table id=dom-TrackList-getKind-categories><caption><code id=audiotracklist-and-videotracklist-objects:dom-audiotrack-kind-2><a href=#dom-audiotrack-kind>AudioTrack.kind()</a></code>および<code id=audiotracklist-and-videotracklist-objects:dom-videotrack-kind-2><a href=#dom-videotrack-kind>VideoTrack.kind()</a></code>に値を返す</caption><thead><tr><th>カテゴリー
     </th><th>定義
     </th><th>適用対象</th><th> 例
   <tbody></th></tr><tr><td>"<dfn id=value-track-kind-alternate><code>alternative</code></dfn>"
     
     </td><td>メイントラックへの可能な代替、たとえば、曲の別テイク（オーディオ）、または別アングル（ビデオ）。
     </td><td>Audioとvideo。
     </td><td>Ogg："audio/alternate"または"video/alternate"、DASH："main"なしの"alternate"および"commentary"ロール、またaudioに対して"dub"ロールなし（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-caption><code>captions</code></dfn>"
     
     </td><td>焼き付き字幕をもつ主ビデオトラックのバージョン。（レガシーコンテンツ用。新しいコンテンツはテキストトラックを使用する。）
     </td><td>Videoのみ。
     </td><td>DASH："caption"および"main"ロールを同時に（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-descriptions><code>descriptions</code></dfn>"
     
     </td><td>ビデオトラックの音声解説。
     </td><td>Audioのみ。
     </td><td>Ogg："audio/audiodesc"。

    </td></tr><tr><td>"<dfn id=value-track-kind-main><code>main</code></dfn>"
     
     </td><td>主オーディオまたはビデオトラック。
     </td><td>Audioとvideo。
     </td><td>Ogg："audio/main"または"video/main"、WebM："FlagDefault"要素が設定される、DASH："caption"、"subtitle"、および"dub"なしの"main"ロール（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-main-desc><code>main-desc</code></dfn>"
     
     </td><td>音声解説と混合された、主オーディオトラック。
     </td><td>Audioのみ。
     </td><td>MPEG-2 TSでのAC3 audio：bsmod=2とfull_svc=1。 

    </td></tr><tr><td>"<dfn id=value-track-kind-sign><code>sign</code></dfn>"
     
     </td><td>オーディオトラックの手話通訳。
     </td><td>Videoのみ。
     </td><td>Ogg："video/sign"。

    </td></tr><tr><td>"<dfn id=value-track-kind-subtitle><code>subtitles</code></dfn>"
     
     </td><td>焼き付き字幕をもつ主ビデオトラックのバージョン。（レガシーコンテンツ用。新しいコンテンツはテキストトラックを使用する。）
     </td><td>Videoのみ。
     </td><td>DASH："subtitle"および"main"ロールを同時（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-translation><code>translation</code></dfn>"
     
     </td><td>主オーディオトラックの翻訳バージョン。
     </td><td>Audioのみ。
     </td><td>Ogg："audio/dub"。DASH："dub"および"main"ロールを同時（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-commentary><code>commentary</code></dfn>"
     
     </td><td>主オーディオまたはビデオトラックのコメンタリ。たとえばディレクターのコメント。
     </td><td>Audioとvideo。
     </td><td>DASH："main"ロールなしの"commentary"ロール（他のロールは無視）。

    </td></tr><tr><td>"<dfn id=value-track-kind-none><code></code></dfn>"（空文字列）
     </td><td>明示的な種類がないか、トラックのメタデータで指定された種類は、ユーザーエージェントによって認識されない。
     </td><td>Audioとvideo。
     </td><td>

  </td></tr></table>

  

  <p>The <dfn id=dom-audiotrack-label><code>AudioTrack.label</code></dfn> and <dfn id=dom-videotrack-label><code>VideoTrack.label</code></dfn> attributes must return the label
  of the track, if it has one, or the empty string otherwise. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>The <dfn id=dom-audiotrack-language><code>AudioTrack.language</code></dfn> and <dfn id=dom-videotrack-language><code>VideoTrack.language</code></dfn> attributes must return the
  BCP 47 language tag of the language of the track, if it has one, or the empty string otherwise. If
  the user agent is not able to express that language as a BCP 47 language tag (for example because
  the language information in the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-9>media resource</a>'s format is a free-form string without
  a defined interpretation), then the method must return the empty string, as if the track had no
  language. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>The <dfn id=dom-audiotrack-enabled><code>AudioTrack.enabled</code></dfn> attribute, on
  getting, must return true if the track is currently enabled, and false otherwise. On setting, it
  must enable the track if the new value is true, and disable it otherwise. (If the track is no
  longer in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-10><a href=#audiotracklist>AudioTrackList</a></code> object, then the track being enabled or disabled has no
  effect beyond changing the value of the attribute on the <code id=audiotracklist-and-videotracklist-objects:audiotrack-12><a href=#audiotrack>AudioTrack</a></code> object.)</p>

  <p id=toggle-audio-track>Whenever an audio track in an <code id=audiotracklist-and-videotracklist-objects:audiotracklist-11><a href=#audiotracklist>AudioTrackList</a></code> that was
  disabled is enabled, and whenever one that was enabled is disabled, the user agent must
  <a id=audiotracklist-and-videotracklist-objects:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=audiotracklist-and-videotracklist-objects:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=audiotracklist-and-videotracklist-objects:event-media-change><a href=#event-media-change>change</a></code> at the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-12><a href=#audiotracklist>AudioTrackList</a></code> object.</p>

  <p>An audio track that has no data for a particular position on the <a href=#media-timeline id=audiotracklist-and-videotracklist-objects:media-timeline>media timeline</a>,
  or that does not exist at that position, must be interpreted as being silent at that point on the
  timeline.</p>

  <p>The <dfn id=dom-videotracklist-selectedindex><code>VideoTrackList.selectedIndex</code></dfn> attribute
  must return the index of the currently selected track, if any. If the <code id=audiotracklist-and-videotracklist-objects:videotracklist-11><a href=#videotracklist>VideoTrackList</a></code>
  object does not currently represent any tracks, or if none of the tracks are selected, it must
  instead return −1.</p>

  <p>The <dfn id=dom-videotrack-selected><code>VideoTrack.selected</code></dfn> attribute, on
  getting, must return true if the track is currently selected, and false otherwise. On setting, it
  must select the track if the new value is true, and unselect it otherwise. If the track is in a
  <code id=audiotracklist-and-videotracklist-objects:videotracklist-12><a href=#videotracklist>VideoTrackList</a></code>, then all the other <code id=audiotracklist-and-videotracklist-objects:videotrack-12><a href=#videotrack>VideoTrack</a></code> objects in that list must
  be unselected. (If the track is no longer in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-13><a href=#videotracklist>VideoTrackList</a></code> object, then the track
  being selected or unselected has no effect beyond changing the value of the attribute on the
  <code id=audiotracklist-and-videotracklist-objects:videotrack-13><a href=#videotrack>VideoTrack</a></code> object.)</p>

  <p id=toggle-video-track>Whenever a track in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-14><a href=#videotracklist>VideoTrackList</a></code> that was previously
  not selected is selected, and whenever the selected track in a <code id=audiotracklist-and-videotracklist-objects:videotracklist-15><a href=#videotracklist>VideoTrackList</a></code> is
  unselected without a new track being selected in its stead, the user agent must <a id=audiotracklist-and-videotracklist-objects:queue-a-task-2 href=webappapis.html#queue-a-task>queue a
  task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=audiotracklist-and-videotracklist-objects:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named <code id=audiotracklist-and-videotracklist-objects:event-media-change-2><a href=#event-media-change>change</a></code> at the <code id=audiotracklist-and-videotracklist-objects:videotracklist-16><a href=#videotracklist>VideoTrackList</a></code> object. This <a href=webappapis.html#concept-task id=audiotracklist-and-videotracklist-objects:concept-task>task</a> must be <a href=webappapis.html#queue-a-task id=audiotracklist-and-videotracklist-objects:queue-a-task-3>queued</a> before the
  <a href=webappapis.html#concept-task id=audiotracklist-and-videotracklist-objects:concept-task-2>task</a> that fires the <code id=audiotracklist-and-videotracklist-objects:event-media-resize><a href=#event-media-resize>resize</a></code> event, if any.</p>

  <p>A video track that has no data for a particular position on the <a href=#media-timeline id=audiotracklist-and-videotracklist-objects:media-timeline-2>media timeline</a>
  must be interpreted as being <a id=audiotracklist-and-videotracklist-objects:transparent-black href=https://drafts.csswg.org/css-color/#transparent-black data-x-internal=transparent-black>transparent black</a> at that point on the timeline, with
  the same dimensions as the last frame before that position, or, if the position is before all the
  data for that track, the same dimensions as the first frame for that track. A track that does not
  exist at all at the current position must be treated as if it existed but had no data.</p>

  <p class=example>For instance, if a video has a track that is only introduced after one hour of
  playback, and the user selects that track then goes back to the start, then the user agent will
  act as if that track started at the start of the <a href=#media-resource id=audiotracklist-and-videotracklist-objects:media-resource-10>media resource</a> but was simply
  transparent until one hour in.</p>

  <hr>

  <p>The following are the <a id=audiotracklist-and-videotracklist-objects:event-handlers href=webappapis.html#event-handlers>event handlers</a> (and their corresponding <a href=webappapis.html#event-handler-event-type id=audiotracklist-and-videotracklist-objects:event-handler-event-type>event handler event types</a>) that must be supported, as <a id=audiotracklist-and-videotracklist-objects:event-handler-idl-attributes href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>,
  by all objects implementing the <code id=audiotracklist-and-videotracklist-objects:audiotracklist-13><a href=#audiotracklist>AudioTrackList</a></code> and <code id=audiotracklist-and-videotracklist-objects:videotracklist-17><a href=#videotracklist>VideoTrackList</a></code>
  interfaces:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=audiotracklist-and-videotracklist-objects:event-handlers-2>イベントハンドラー</a> </th><th><a id=audiotracklist-and-videotracklist-objects:event-handler-event-type-2 href=webappapis.html#event-handler-event-type>イベントハンドラーイベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-tracklist-onchange><code>onchange</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-change-3><a href=#event-media-change>change</a></code>
    </td></tr><tr><td><dfn id=handler-tracklist-onaddtrack><code>onaddtrack</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>
    </td></tr><tr><td><dfn id=handler-tracklist-onremovetrack><code>onremovetrack</code></dfn> </td><td> <code id=audiotracklist-and-videotracklist-objects:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>
  </td></tr></table>

  

  


  <h6 id=selecting-specific-audio-and-video-tracks-declaratively><span class=secno>4.8.12.10.2</span> 宣言的に特定のオーディオとビデオトラックを選択する<a href=#selecting-specific-audio-and-video-tracks-declaratively class=self-link></a></h6>

  <p><code id=selecting-specific-audio-and-video-tracks-declaratively:dom-media-audiotracks><a href=#dom-media-audiotracks>audioTracks</a></code>および<code id=selecting-specific-audio-and-video-tracks-declaratively:dom-media-videotracks><a href=#dom-media-videotracks>videoTracks</a></code>属性はスクリプトを再生すべきそのトラックを選択できるが、<a href=#media-resource id=selecting-specific-audio-and-video-tracks-declaratively:media-resource>メディアリソース</a>の<a id=selecting-specific-audio-and-video-tracks-declaratively:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>の<a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=selecting-specific-audio-and-video-tracks-declaratively:concept-url-fragment data-x-internal=concept-url-fragment>フラグメント</a>で特定のトラックを指定することにより、宣言的に特定のトラックを選択することも可能である。<a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=selecting-specific-audio-and-video-tracks-declaratively:concept-url-fragment-2 data-x-internal=concept-url-fragment>フラグメント</a>の形式は、<a href=#media-resource id=selecting-specific-audio-and-video-tracks-declaratively:media-resource-2>メディアリソース</a>の<a id=selecting-specific-audio-and-video-tracks-declaratively:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIMEタイプ</a>に依存する。<a href=references.html#refsRFC2046>[RFC2046]</a> <a href=references.html#refsURL>[URL]</a></p>

  <div class=example>

   <p>この例において、<a id=selecting-specific-audio-and-video-tracks-declaratively:media-fragment-syntax href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>メディアフラグメント構文</a>をサポートする形式を使用するビデオが、ラベル"Alternative"として代替アングルがデフォルトのビデオトラックの代わりに有効にされるように埋め込まれている。</p>

   <pre>&lt;video src="myvideo#track=Alternative"&gt;&lt;/video&gt;</pre>

  </div>



  <h5 id=timed-text-tracks><span class=secno>4.8.12.11</span> 時限テキストトラック<a href=#timed-text-tracks class=self-link></a></h5>

  <h6 id=text-track-model><span class=secno>4.8.12.11.1</span> テキストトラックモデル<a href=#text-track-model class=self-link></a></h6><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28973" title='&lt;track&gt; elements added with their text track already showing do not run the "time marches on" steps'>28973</a></div>

  <p><a href=#media-element id=text-track-model:media-element>メディア要素</a>は、<a href=#media-element id=text-track-model:media-element-2>メディア要素</a>の<dfn id=list-of-text-tracks>テキストトラックのリスト</dfn>として知られ、関連した<dfn id=text-track>テキストトラック</dfn>のグループを持つことができる。<a href=#text-track id=text-track-model:text-track>テキストトラック</a>は以下のようにソートされる：</p>

  <ol class=brief><li><a id=text-track-model:tree-order href=https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order data-x-internal=tree-order>ツリー順</a>で、<a href=#media-element id=text-track-model:media-element-3>メディア要素</a>の<code id=text-track-model:the-track-element><a href=#the-track-element>track</a></code>要素の子に対応する<a href=#text-track id=text-track-model:text-track-2>テキストトラック</a>。</li><li>古いものから順で、追加された順に、<code id=text-track-model:dom-media-addtexttrack><a href=#dom-media-addtexttrack>addTextTrack()</a></code>メソッドを使用して追加された任意の<a href=#text-track id=text-track-model:text-track-3>テキストトラック</a>。</li><li><a href=#media-resource id=text-track-model:media-resource-2>メディアリソース</a>の書式仕様によって定義された順序で、任意の<a href=#media-resource-specific-text-track id=text-track-model:media-resource-specific-text-track>メディアリソース固有のテキストトラック</a>（<a href=#media-resource id=text-track-model:media-resource>メディアリソース</a>が内のデータに対応する<a href=#text-track id=text-track-model:text-track-4>テキストトラック</a>）。</li></ol>

  <p><a href=#text-track id=text-track-model:text-track-5>テキストトラック</a>の構成要素は次のとおり：</p>

  <dl><dt><dfn id=text-track-kind>テキストトラックの種類</dfn>

   <dd>

    <p>これは、トラックがユーザーエージェントによって処理される方法を決定する。種類は文字列で表される。可能性のある文字列は次のとおり：</p>

    <ul class=brief><li><dfn id=dom-texttrack-kind-subtitles><code>subtitles</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-captions><code>captions</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-descriptions><code>descriptions</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-chapters><code>chapters</code></dfn>
     </li><li><dfn id=dom-texttrack-kind-metadata><code>metadata</code></dfn>
    </li></ul>

    <p><code id=text-track-model:the-track-element-2><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-6>テキストトラック</a>の場合、<a href=#text-track-kind id=text-track-model:text-track-kind>トラックの種類</a>は動的に変更できる。</p>

   <dt><dfn id=text-track-label>ラベル</dfn>

   <dd>

    <p>これは、ユーザーに対するトラックを特定するために意図する判読可能な文字列である。</p>

    <p><code id=text-track-model:the-track-element-3><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-7>テキストトラック</a>の場合、<a href=#text-track-label id=text-track-model:text-track-label>トラックのラベル</a>は動的に変更できる。</p>

    <p><a href=#text-track-label id=text-track-model:text-track-label-2>テキストトラックのラベル</a>が空の文字列である場合、ユーザーエージェントは自動的にそのユーザーインターフェイスで使用するためのテキストトラックの他のプロパティ（たとえばテキストトラックの種類とテキストトラックの言語など）から適切なラベルを生成すべきである。この自動生成されたラベルは、APIで公開されない。</p>

   <dt><dfn id=text-track-in-band-metadata-track-dispatch-type>帯域内のメタデータトラックディスパッチタイプ</dfn>

   <dd>

    <p>これは、文書内の別のスクリプトに派遣できるようにするためにトラックを有効にする帯域内メタデータトラックに対する<a href=#media-resource id=text-track-model:media-resource-3>メディアリソース</a>から抽出された文字列である。</p>

    <p class=example>たとえば、ウェブ上やウェブ固有のインタラクティブ機能でのストリーミングによる従来のTV局の放送は、広告対象、ゲームショーの間のトリビアゲームデータ、スポーツゲームの間の選手の状態、食糧計画中のレシピ情報などに対するメタデータをもつテキストトラックを含むかもしれない。各プログラムが開始および終了すると、新しいトラックが追加されたりストリームから削除されたり、各トラックが追加されると、ユーザーエージェントはこの属性値を使用する専用のスクリプトモジュールにトラックを結合できる。</p>

    <p>帯域内のメタデータテキストトラック以外では、<a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-model:text-track-in-band-metadata-track-dispatch-type>帯域内のメタデータトラックディスパッチタイプ</a>は、空の文字列である。この値が異なるメディア形式に対してどのように設定されるかは、<a href=#steps-to-expose-a-media-resource-specific-text-track id=text-track-model:steps-to-expose-a-media-resource-specific-text-track>メディアリソース固有のテキストトラックを公開するための手順</a>に記載される。</p>

   <dt><dfn id=text-track-language>言語</dfn>

   <dd>

    <p>これは、テキストトラックのキューの言語を表す文字列（BCP 47言語タグ）である。<a href=references.html#refsBCP47>[BCP47]</a></p>

    <p><code id=text-track-model:the-track-element-4><a href=#the-track-element>track</a></code>要素に対応する<a href=#text-track id=text-track-model:text-track-8>テキストトラック</a>の場合、<a href=#text-track-language id=text-track-model:text-track-language>テキストトラックの言語</a>は、動的に変更できる。</p>

   <dt><dfn id=text-track-readiness-state>準備状態</dfn>

   <dd>

    <p>以下のうちの1つをとる：</p>

    <dl><dt><dfn id=text-track-not-loaded>ロードされてない</dfn>

     <dd>

      <p>テキストトラックのキューが得られていないことを示す。</p>

     <dt><dfn id=text-track-loading>ロード中</dfn>

     <dd>

      <p>テキストトラックがロードされており、これまでに検出された致命的なエラーがないことを示す。追加のキューは、依然としてパーサによってトラックに追加されるかもしれない。</p>

     <dt><dfn id=text-track-loaded>ロードされた</dfn>

     <dd>

      <p>テキストトラックが致命的なエラーなしでロードされたことを示す。</p>

     <dt><dfn id=text-track-failed-to-load>ロードに失敗した</dfn>

     <dd>

      <p>テキストトラックは有効であるが、ユーザーエージェントがトラックを取得しようとした際、これが何らかの方法（たとえば<a id=text-track-model:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>が<a href=urls-and-fetching.html#parse-a-url id=text-track-model:parse-a-url>解析</a>できなかった、ネットワークエラー、未知のテキストトラック形式など）で失敗したことを示す。キューの一部または全部は、おそらく欠損しているか、含まれていないだろう。</p>

     </dl>

    <p>トラックが得られるように、<a href=#text-track id=text-track-model:text-track-9>テキストトラック</a>の<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state>準備状態</a>を動的に変更する。</p>

   <dt><dfn id=text-track-mode>モード</dfn>

   <dd>

    <p>以下のうちの1つをとる：</p>

    <dl><dt><dfn id=text-track-disabled>無効</dfn>

     <dd>

      <p>テキストトラックがアクティブでないことを示す。DOM内のトラックを公開する目的以外では、ユーザーエージェントはテキストトラックを無視している。どのキューもアクティブでなく、どのイベントも発火せず、ユーザーエージェントは、トラックのキューを得ることを試みることはない。</p>

     <dt><dfn id=text-track-hidden>非表示</dfn>

     <dd>

      <p>テキストトラックがアクティブであるが、ユーザーエージェントは、積極的にキューを表示していないことを示す。どの試みもまだトラックのキューを得るために行われていない場合、ユーザーエージェントは、一瞬そのような試みを実行する。ユーザーエージェントは、キューがアクティブであるリストを維持しており、イベントはそれに応じて発火されている。</p>

     <dt><dfn id=text-track-showing>表示</dfn>

     <dd>

      <p>テキストトラックがアクティブであることを示す。どの試みもまだトラックのキューを得るために行われていない場合、ユーザーエージェントは、一瞬そのような試みを実行する。ユーザーエージェントは、キューがアクティブであるリストを維持しており、イベントはそれに応じて発火されている。また、<a href=#text-track-kind id=text-track-model:text-track-kind-2>種類</a>が<code id=text-track-model:dom-texttrack-kind-subtitles><a href=#dom-texttrack-kind-subtitles>subtitles</a></code>や<code id=text-track-model:dom-texttrack-kind-captions><a href=#dom-texttrack-kind-captions>captions</a></code>であるテキストトラックで、キューは必要に応じてビデオにオーバーレイされている。<a href=#text-track-kind id=text-track-model:text-track-kind-3>種類</a>が<code id=text-track-model:dom-texttrack-kind-descriptions><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>であるテキストトラックで、ユーザーエージェントは、非視覚的な方法でユーザーに使用可能なキューを作成している。そして、<a href=#text-track-kind id=text-track-model:text-track-kind-4>種類</a>が<code id=text-track-model:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code>であるテキストトラックで、ユーザーエージェントは、ユーザーがキューを選択することによって<a href=#media-resource id=text-track-model:media-resource-4>メディアリソース</a>の任意のポイントに移動することができるメカニズムをユーザーに利用可能にしている。</p>

     </dl>

   <dt><dfn id=text-track-list-of-cues>0個以上のキューリスト</dfn>

   <dd>

    <p><dfn id=rules-for-updating-the-text-track-rendering>テキストトラックのレンダリングを更新するための規則</dfn>とともに、<a href=#text-track-cue id=text-track-model:text-track-cue>テキストトラックキュー</a>のリスト。たとえば、WebVTTの場合、<a id=text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks data-x-internal=rules-for-updating-the-display-of-webvtt-text-tracks>WebVTTテキストトラックの表示を更新するための規則</a>。<a href=references.html#refsWEBVTT>[WEBVTT]</a> </p>

    <p><a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues>テキストトラックのキューのリスト</a>は、<a href=#text-track id=text-track-model:text-track-10>テキスト·トラック</a>が<a href=#text-track-not-loaded id=text-track-model:text-track-not-loaded>まだロードされていない</a>か、すでに<a href=#text-track-loading id=text-track-model:text-track-loading>ロード中</a>である、またはDOM操作に起因してのいずれかのために、動的に変更できる。</p>

   </dl>

  <p>各<a href=#text-track id=text-track-model:text-track-11>テキストトラック</a>は、対応する<code id=text-track-model:texttrack><a href=#texttrack>TextTrack</a></code>オブジェクトを持つ。</p>

  <hr>

  <p>各<a href=#media-element id=text-track-model:media-element-4>メディア要素</a>は、最初は空でなければならない<dfn id=list-of-pending-text-tracks>保留中のテキストトラックのリスト</dfn>、最初はfalseでなければならない<dfn id=blocked-on-parser>blocked-on-parser</dfn>フラグ、最初はfalseでなければならない<dfn id=did-perform-automatic-track-selection>did-perform-automatic-track-selection</dfn>フラグを持つ。</p>

  <p>ユーザーエージェントが<a href=#media-element id=text-track-model:media-element-5>メディア要素</a>に属する<dfn id=populate-the-list-of-pending-text-tracks>保留中のテキストトラックのリストを追加する</dfn>必要がある場合、ユーザーエージェントは、<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks>保留中のテキストトラックのリスト</a>に要素の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks>テキストトラックのリスト</a>で各<a href=#text-track id=text-track-model:text-track-12>テキストトラック</a>を追加しなければならない。要素のテキストトラックのリストで<a href=#text-track-mode id=text-track-model:text-track-mode>テキストトラックモード</a>は<a href=#text-track-disabled id=text-track-model:text-track-disabled>無効</a>であり、かつそのリストの<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state-2>テキストトラックの準備状態</a>は<a href=#text-track-loading id=text-track-model:text-track-loading-2>ロード中</a>である。</p>

  <p><code id=text-track-model:the-track-element-5><a href=#the-track-element>track</a></code>要素の親ノードが変更ときはいつでも、ユーザーエージェントは、要素が属する全<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-2>保留中のテキストトラックのリスト</a>から該当する<a href=#text-track id=text-track-model:text-track-13>テキストトラック</a>を削除しなければならない。</p>

  <p><a href=#text-track id=text-track-model:text-track-14>テキストトラック</a>の<a href=#text-track-readiness-state id=text-track-model:text-track-readiness-state-3>テキストトラックの準備状態</a>が<a href=#text-track-loaded id=text-track-model:text-track-loaded>ロードされる</a>か、<a href=#text-track-failed-to-load id=text-track-model:text-track-failed-to-load>ロードに失敗する</a>のいずれかに変更されるときはいつでも、ユーザーエージェントは、テキストトラックが属する全<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-3>保留中のテキストトラックのリスト</a>から削除しなければならない。</p>

  <p><a href=#media-element id=text-track-model:media-element-6>メディア要素</a>が<a id=text-track-model:html-parser href=parsing.html#html-parser>HTMLパーサー</a>や<a id=text-track-model:xml-parser href=xhtml.html#xml-parser>XMLパーサー</a>によって作成された場合、ユーザーエージェントは、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser>blocked-on-parser</a>フラグをtrueに設定しなければならない。<a href=#media-element id=text-track-model:media-element-7>メディア要素</a>が<a id=text-track-model:html-parser-2 href=parsing.html#html-parser>HTMLパーサー</a>や<a id=text-track-model:xml-parser-2 href=xhtml.html#xml-parser>XMLパーサー</a>の<a id=text-track-model:stack-of-open-elements href=parsing.html#stack-of-open-elements>オープン要素のスタック</a>からポップされる場合、ユーザーエージェントは、<a href=#honor-user-preferences-for-automatic-text-track-selection id=text-track-model:honor-user-preferences-for-automatic-text-track-selection>自動テキストトラックの選択に対してユーザーの好みを尊重</a>しなければならず、<a href=#populate-the-list-of-pending-text-tracks id=text-track-model:populate-the-list-of-pending-text-tracks>保留中のテキストトラックのリストを追加し</a>、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser-2>blocked-on-parser</a>フラグをfalseに設定する。</p>

  <p>要素の<a href=#list-of-pending-text-tracks id=text-track-model:list-of-pending-text-tracks-4>保留中のテキストトラックのリスト</a>が空であり、要素の<a href=#blocked-on-parser id=text-track-model:blocked-on-parser-3>blocked-on-parser</a>フラグがfalseの両方である場合、<a href=#media-element id=text-track-model:media-element-8>メディア要素</a>の<a href=#text-track id=text-track-model:text-track-15>テキストトラック</a>は<dfn id=the-text-tracks-are-ready>準備</dfn>ができている。</p>

  <p>各<a href=#media-element id=text-track-model:media-element-9>メディア要素</a>は、最初に未設定でなければならない<dfn id=pending-text-track-change-notification-flag>保留中のテキストトラック変更通知フラグ</dfn>を持つ。</p>

  <p><a href=#media-element id=text-track-model:media-element-10>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-2>テキストトラックのリスト</a>に属する<a href=#text-track id=text-track-model:text-track-16>テキストトラック</a>が、その<a href=#text-track-mode id=text-track-model:text-track-mode-2>テキストトラックモード</a>変更値を持つたびに、ユーザーエージェントは、<a href=#media-element id=text-track-model:media-element-11>メディア要素</a>のために次の手順を実行しなければならない：</p>

  <ol><li><p>If the <a href=#media-element id=text-track-model:media-element-12>media element</a>'s <a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag>pending text track change notification
   flag</a> is set, return.</li><li><p><a href=#media-element id=text-track-model:media-element-13>メディア要素</a>の<a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag-2>保留中のテキストトラック変更通知フラグ</a>を設定する。</li><li>

    <p><a id=text-track-model:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to run these steps:</p>

    <ol><li><p><a href=#media-element id=text-track-model:media-element-14>メディア要素</a>の<a href=#pending-text-track-change-notification-flag id=text-track-model:pending-text-track-change-notification-flag-3>保留中のテキストトラック変更通知フラグ</a>を設定解除する。</li><li><p><a href=#media-element id=text-track-model:media-element-15>メディア要素</a>の<code id=text-track-model:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code>属性の<code id=text-track-model:texttracklist><a href=#texttracklist>TextTrackList</a></code>オブジェクトで<code id=text-track-model:event-media-change><a href=#event-media-change>change</a></code>に名付けられる<a href=https://dom.spec.whatwg.org/#concept-event-fire id=text-track-model:concept-event-fire data-x-internal=concept-event-fire>イベントを発火する</a>。</li></ol>

   </li><li><p><a href=#media-element id=text-track-model:media-element-16>メディア要素</a>の<a href=#show-poster-flag id=text-track-model:show-poster-flag>ショーポスターフラグ</a>が設定されていない場合、手順の<i id=text-track-model:time-marches-on><a href=#time-marches-on>時間行進</a></i>を実行する。</li></ol>

  <p>このセクションに記載される<a href=webappapis.html#concept-task id=text-track-model:concept-task>タスク</a>の<a id=text-track-model:task-source href=webappapis.html#task-source>タスクソース</a>は、<a id=text-track-model:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM操作タスクソース</a>である。</p>

  <hr>

  <p><dfn id=text-track-cue>テキストトラックキュー</dfn>は、特定の時刻に表示され別の時刻に消滅するテキストに字幕やキャプションに対するインスタンスに対応する、<a href=#text-track id=text-track-model:text-track-17>テキストトラック</a>で時刻依存のデータの単位である。</p>

  <p>各<a href=#text-track-cue id=text-track-model:text-track-cue-2>テキストトラックキュー</a>の構成は次のとおり：</p>

  <dl><dt><dfn id=text-track-cue-identifier>識別子</dfn>
   <dd>
    <p>任意の文字列。</p>
   <dt><dfn id=text-track-cue-start-time>開始時刻</dfn>
   <dd>
    <p>時刻は、秒、秒の小数で、キューが適用される<a href=#media-data id=text-track-model:media-data>メディアデータ</a>の範囲の開始を表現する。</p>
   <dt><dfn id=text-track-cue-end-time>終了時刻</dfn>
   <dd>
    <p>時刻は、秒、秒の小数で、キューが適用される<a href=#media-data id=text-track-model:media-data-2>メディアデータ</a>の範囲の終了を表現する。</p>
   <dt><dfn id=text-track-cue-pause-on-exit-flag>pause-on-exitフラグ</dfn>
   <dd>
    <p>キューが適用される範囲の最後に達した際の、<a href=#media-resource id=text-track-model:media-resource-5>メディアリソース</a>の再生が一時停止するかどうかを示す真偽値。</p>
   <dt>追加の形式固有のデータ<dd>
    <p>フォーマットのために必要なものとしての、キューの実際のデータを含む、追加フィールド。たとえば、WebVTTは、<a id=text-track-model:text-track-cue-writing-direction href=https://w3c.github.io/webvtt/#webvtt-cue-writing-direction data-x-internal=text-track-cue-writing-direction>テキストトラックキュー書き込み方向</a>などを持つ。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>
   </dl>

  <p class=note><a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time>テキストトラックキューの開始時刻</a>および<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time>テキストトラックキューの終了時刻</a>は負であってもよい。（時刻ゼロがアクティブにすることはできない前の全体のキュー、しかし、<a href=#current-playback-position id=text-track-model:current-playback-position>現在の再生位置</a>は負になることはない。）</p>

  <p>各<a href=#text-track-cue id=text-track-model:text-track-cue-3>テキストトラックキュー</a>は、対応する<code id=text-track-model:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code>オブジェクト（より具体的には、たとえばWebVTTのキューが<code id=text-track-model:vttcue><a data-x-internal=vttcue href=https://w3c.github.io/webvtt/#vttcue>VTTCue</a></code>インターフェイスを使用するような、<code id=text-track-model:texttrackcue-2><a href=#texttrackcue>TextTrackCue</a></code>を継承したオブジェクト）を持つ。<a href=#text-track-cue id=text-track-model:text-track-cue-4>テキストトラックキュー</a>のメモリー内表現は、動的にこの<code id=text-track-model:texttrackcue-3><a href=#texttrackcue>TextTrackCue</a></code> APIを通して変更できる。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p><a href=#text-track-cue id=text-track-model:text-track-cue-5>テキストトラックキュー</a>は、<a href=#text-track-cue id=text-track-model:text-track-cue-6>テキストトラックキュー</a>の特定の種類に対して仕様で定義されている、<a href=#rules-for-updating-the-text-track-rendering id=text-track-model:rules-for-updating-the-text-track-rendering>テキストトラックレンダリングを更新するための規則</a>に関連付けられる。これらの規則は、キューを表すオブジェクトが<code id=text-track-model:dom-texttrack-addcue><a href=#dom-texttrack-addcue>addCue()</a></code>メソッドを使用して<code id=text-track-model:texttrack-2><a href=#texttrack>TextTrack</a></code>オブジェクトに追加される際に特に使用される。</p>

  <p>加えて、各<a href=#text-track-cue id=text-track-model:text-track-cue-7>テキストトラックキュー</a>は、動的な2つの情報を持つ：</p>

  <dl><dt><dfn id=text-track-cue-active-flag>アクティブフラグ</dfn>
   <dd>

    <p>このフラグは、最初に設定を解除されなければならない。キューがアクティブまたは非アクティブになった際、フラグは、イベントが適切に発火されるように、および右のキューがレンダリングされることを確認するために使用される。</p>

    <p><a href=#text-track-cue id=text-track-model:text-track-cue-8>テキストトラックキュー</a>がその<a href=#text-track id=text-track-model:text-track-18>テキストトラック</a>の<a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues-2>キューのテキストトラックリスト</a>から削除されるたびに、<a href=#text-track id=text-track-model:text-track-19>テキストトラック</a>自体はその<a href=#media-element id=text-track-model:media-element-17>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-3>テキストトラックのリスト</a>から削除される、または<a href=#text-track-disabled id=text-track-model:text-track-disabled-2>無効</a>に変更されるその<a href=#text-track-mode id=text-track-model:text-track-mode-3>テキストトラックモード</a>を持つたびに、かつ<a href=#media-element id=text-track-model:media-element-18>メディア要素</a>の<code id=text-track-model:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>が<code id=text-track-model:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>に戻されるたびに、ユーザーエージェントは同期的にこのフラグを設定解除しなければならない。フラグが、関連付帯条件より前に<a href=#text-track-showing id=text-track-model:text-track-showing>表示</a>されていた<a href=#text-track id=text-track-model:text-track-20>テキストトラック</a>内の1つ以上のキューに対してこの方法で解除される場合、影響を受けるすべてのキューに対してフラグを解除した後、ユーザーエージェントは、これらの<a href=#text-track id=text-track-model:text-track-21>テキストトラック</a>に属する<a href=#rules-for-updating-the-text-track-rendering id=text-track-model:rules-for-updating-the-text-track-rendering-2>テキストトラックのレンダリングを更新するための規則</a>を適用しなければならない。たとえば、WebVTTに基づく<a href=#text-track id=text-track-model:text-track-22>テキストトラック</a>用、<a id=text-track-model:rules-for-updating-the-display-of-webvtt-text-tracks-2 href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks data-x-internal=rules-for-updating-the-display-of-webvtt-text-tracks>WebVTTテキストトラックの表示を更新するための規則</a>など。<a href=references.html#refsWEBVTT>[WEBVTT]</a></p> <dt><dfn id=text-track-cue-display-state>表示状態</dfn>
   <dd>

    <p>これは、一貫性のある位置にキューを保つために、レンダリングモデルの一部として使用される。これは最初は空でなければならない。<a href=#text-track-cue-active-flag id=text-track-model:text-track-cue-active-flag>テキストトラックキューのアクティブフラグ</a>が設定解除されるたびに、ユーザーエージェントは<a href=#text-track-cue-display-state id=text-track-model:text-track-cue-display-state>テキストトラックキューの表示状態</a>を空にしなければならない。</p>

   </dl>

  <p><a href=#media-element id=text-track-model:media-element-19>メディア要素</a>の<a href=#text-track id=text-track-model:text-track-23>テキストトラック</a>の<a href=#text-track-cue id=text-track-model:text-track-cue-9>テキストトラックキュー</a>は、<dfn id=text-track-cue-order>テキストトラックキュー順</dfn>に互いに相対的に順序付けされ、以下のように決定される：<a href=#media-element id=text-track-model:media-element-20>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-model:list-of-text-tracks-4>テキストトラックのリスト</a>に出現するそれらの<a href=#text-track id=text-track-model:text-track-25>テキストトラック</a>として同じ順序でソートされるグループをもつ、それらの<a href=#text-track id=text-track-model:text-track-24>テキストトラック</a>で最初のグループの<a href=#text-track-cue id=text-track-model:text-track-cue-10>キュー</a>：次に、各グループ内で、<a href=#text-track-cue id=text-track-model:text-track-cue-11>キュー</a>は、最も早いものの順に、その<a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time-2>開始時刻</a>でソートされなければならない。それから、同じ<a href=#text-track-cue-start-time id=text-track-model:text-track-cue-start-time-3>開始時刻</a>を持つ任意の<a href=#text-track-cue id=text-track-model:text-track-cue-12>キュー</a>は、最も遅いものの順に、その<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time-2>終了時刻</a>でソートされなければならず、最後に、同一の<a href=#text-track-cue-end-time id=text-track-model:text-track-cue-end-time-3>終了時刻</a>を持つ任意の<a href=#text-track-cue id=text-track-model:text-track-cue-13>キュー</a>は、最も古いものの順に、それらがそれぞれの<a href=#text-track-list-of-cues id=text-track-model:text-track-list-of-cues-3>キューのテキストトラックリスト</a>に最後に追加した順にソートされなければならない。（たとえば、WebVTTファイル由来のキューに対して、最初にファイルに記載されていた順でなど。）<a href=references.html#refsWEBVTT>[WEBVTT]</a></p>


  <h6 id=sourcing-in-band-text-tracks><span class=secno>4.8.12.11.2</span> 帯域内テキストトラックの情報源<a href=#sourcing-in-band-text-tracks class=self-link></a></h6>

  <p><dfn id=media-resource-specific-text-track>メディアリソース固有のテキストトラック</dfn>は<a href=#media-resource id=sourcing-in-band-text-tracks:media-resource>メディアリソース</a>で見つけられるデータに対応する<a href=#text-track id=sourcing-in-band-text-tracks:text-track>テキストトラック</a>である。</p>


  

  <p>Rules for processing and rendering such data are defined by the relevant specifications, e.g.
  the specification of the video format if the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-2>media resource</a> is a video. Details for
  some legacy formats can be found in the <cite>Sourcing In-band Media Resource Tracks from Media
  Containers into HTML</cite> specification. <a href=references.html#refsINBAND>[INBAND]</a></p>

  <p>When a <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-3>media resource</a> contains data that the user agent recognizes and supports as
  being equivalent to a <a href=#text-track id=sourcing-in-band-text-tracks:text-track-2>text track</a>, the user agent <a href=#found-a-media-resource-specific-timed-track>runs</a> the <dfn id=steps-to-expose-a-media-resource-specific-text-track>steps to expose a
  media-resource-specific text track</dfn> with the relevant data, as follows.</p>

  

  <ol><li><p>Associate the relevant data with a new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-3>text track</a> and its corresponding new
   <code id=sourcing-in-band-text-tracks:texttrack><a href=#texttrack>TextTrack</a></code> object. The <a href=#text-track id=sourcing-in-band-text-tracks:text-track-4>text track</a> is a <a href=#media-resource-specific-text-track id=sourcing-in-band-text-tracks:media-resource-specific-text-track>media-resource-specific
   text track</a>.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-5>text track</a>'s <a href=#text-track-kind id=sourcing-in-band-text-tracks:text-track-kind>kind</a>, <a href=#text-track-label id=sourcing-in-band-text-tracks:text-track-label>label</a>, and <a href=#text-track-language id=sourcing-in-band-text-tracks:text-track-language>language</a>
   based on the semantics of the relevant data, as defined by the relevant specification. If there
   is no label in that data, then the <a href=#text-track-label id=sourcing-in-band-text-tracks:text-track-label-2>label</a> must be set to the
   empty string.</li><li><p>Associate the <a href=#text-track-list-of-cues id=sourcing-in-band-text-tracks:text-track-list-of-cues>text track list of cues</a> with the <a href=#rules-for-updating-the-text-track-rendering id=sourcing-in-band-text-tracks:rules-for-updating-the-text-track-rendering>rules for updating the
   text track rendering</a> appropriate for the format in question.</p>

   </li><li>

    <p>If the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-6>text track</a>'s <a href=#text-track-kind id=sourcing-in-band-text-tracks:text-track-kind-2>kind</a> is <code id=sourcing-in-band-text-tracks:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code> or <code id=sourcing-in-band-text-tracks:dom-texttrack-kind-metadata><a href=#dom-texttrack-kind-metadata>metadata</a></code>, then set the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type>text track in-band
    metadata track dispatch type</a> as follows, based on the type of the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-4>media
    resource</a>:</p>

    <dl class=switch><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-5>media resource</a> is an Ogg file<dd>The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-2>text track in-band metadata track dispatch type</a> must be set to the value
     of the Name header field. <a href=references.html#refsOGGSKELETONHEADERS>[OGGSKELETONHEADERS]</a><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-6>media resource</a> is a WebM file<dd>The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-3>text track in-band metadata track dispatch type</a> must be set to the value
     of the <code>CodecID</code> element. <a href=references.html#refsWEBMCG>[WEBMCG]</a><dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-7>media resource</a> is an MPEG-2 file<dd>Let <var>stream type</var> be the value of the "stream_type" field describing the
     text track's type in the file's program map section, interpreted as an 8-bit unsigned integer.
     Let <var>length</var> be the value of the "ES_info_length" field for the track in the
     same part of the program map section, interpreted as an integer as defined by the MPEG-2
     specification. Let <var>descriptor bytes</var> be the <var>length</var> bytes
     following the "ES_info_length" field. The <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-4>text track in-band metadata track dispatch
     type</a> must be set to the concatenation of the <var>stream type</var> byte and
     the zero or more <var>descriptor bytes</var> bytes, expressed in hexadecimal using
     <a href=https://triple-underscore.github.io/infra-ja.html#ascii-upper-hex-digit id=sourcing-in-band-text-tracks:uppercase-ascii-hex-digits data-x-internal=uppercase-ascii-hex-digits>ASCII upper hex digits</a>. <a href=references.html#refsMPEG2>[MPEG2]</a>

     <dt>If the <a href=#media-resource id=sourcing-in-band-text-tracks:media-resource-8>media resource</a> is an MPEG-4 file<dd>Let the
     first <code>stsd</code> box of the
     first <code>stbl</code> box of the
     first <code>minf</code> box of the
     first <code>mdia</code> box of the
     <a href=#text-track id=sourcing-in-band-text-tracks:text-track-7>text track</a>'s <code>trak</code> box in the
     first <code>moov</code> box
     of the file be the <i>stsd box</i>, if any.

     If the file has no <i>stsd box</i>, or if the <i>stsd box</i> has neither a <code>mett</code> box nor a <code>metx</code> box, then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-5>text track
     in-band metadata track dispatch type</a> must be set to the empty string.

     Otherwise, if the <i>stsd box</i> has a <code>mett</code> box then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-6>text
     track in-band metadata track dispatch type</a> must be set to the concatenation of the
     string "<code>mett</code>", a U+0020 SPACE character, and the value of the first <code>mime_format</code> field of the first <code>mett</code> box of the <i>stsd
     box</i>, or the empty string if that field is absent in that box.

     Otherwise, if the <i>stsd box</i> has no <code>mett</code> box but has a <code>metx</code> box then the <a href=#text-track-in-band-metadata-track-dispatch-type id=sourcing-in-band-text-tracks:text-track-in-band-metadata-track-dispatch-type-7>text track in-band metadata track dispatch type</a>
     must be set to the concatenation of the string "<code>metx</code>", a U+0020 SPACE
     character, and the value of the first <code>namespace</code> field of the first <code>metx</code> box of the <i>stsd box</i>, or the empty string if that field is absent in
     that box.

     <a href=references.html#refsMPEG4>[MPEG4]</a>

     </dl>

   </li><li><p>Populate the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-8>text track</a>'s <a href=#text-track-list-of-cues id=sourcing-in-band-text-tracks:text-track-list-of-cues-2>list of
   cues</a> with the cues parsed so far, following the <a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues id=sourcing-in-band-text-tracks:guidelines-for-exposing-cues-in-various-formats-as-text-track-cues>guidelines for exposing
   cues</a>, and begin updating it dynamically as necessary.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-9>text track</a>'s <a href=#text-track-readiness-state id=sourcing-in-band-text-tracks:text-track-readiness-state>readiness
   state</a> to <a href=#text-track-loaded id=sourcing-in-band-text-tracks:text-track-loaded>loaded</a>.</li><li><p>Set the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-10>text track</a>'s <a href=#text-track-mode id=sourcing-in-band-text-tracks:text-track-mode>mode</a> to the
   mode consistent with the user's preferences and the requirements of the relevant specification
   for the data.</p>

    <p class=note>For instance, if there are no other active subtitles, and this is a forced
    subtitle track (a subtitle track giving subtitles in the audio track's primary language, but
    only for audio that is actually in another language), then those subtitles might be activated
    here.</p>

   </li><li><p>Add the new <a href=#text-track id=sourcing-in-band-text-tracks:text-track-11>text track</a> to the <a href=#media-element id=sourcing-in-band-text-tracks:media-element>media element</a>'s <a href=#list-of-text-tracks id=sourcing-in-band-text-tracks:list-of-text-tracks>list of text
   tracks</a>.</li><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-in-band-text-tracks:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=sourcing-in-band-text-tracks:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code> at the <a href=#media-element id=sourcing-in-band-text-tracks:media-element-2>media element</a>'s <code id=sourcing-in-band-text-tracks:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=sourcing-in-band-text-tracks:texttracklist><a href=#texttracklist>TextTrackList</a></code> object,
   using <code id=sourcing-in-band-text-tracks:trackevent><a href=#trackevent>TrackEvent</a></code>, with the <code id=sourcing-in-band-text-tracks:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code>
   attribute initialized to the <a href=#text-track id=sourcing-in-band-text-tracks:text-track-12>text track</a>'s <code id=sourcing-in-band-text-tracks:texttrack-2><a href=#texttrack>TextTrack</a></code> object.</li></ol>

  

  

  



  

  <h6 id=sourcing-out-of-band-text-tracks><span class=secno>4.8.12.11.3</span> Sourcing out-of-band text tracks<a href=#sourcing-out-of-band-text-tracks class=self-link></a></h6>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element><a href=#the-track-element>track</a></code> element is created, it must be associated with a new <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track>text
  track</a> (with its value set as defined below) and its corresponding new
  <code id=sourcing-out-of-band-text-tracks:texttrack><a href=#texttrack>TextTrack</a></code> object.</p>

  <p>The <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind>text track kind</a> is determined from the state of the element's <code id=sourcing-out-of-band-text-tracks:attr-track-kind><a href=#attr-track-kind>kind</a></code> attribute according to the following table; for a state given
  in a cell of the first column, the <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-2>kind</a> is the string given
  in the second column:</p>

  <table><thead><tr><th>状態
     </th><th>String
   
   <tbody></th></tr><tr><td><a href=#attr-track-kind-subtitles id=sourcing-out-of-band-text-tracks:attr-track-kind-subtitles>Subtitles</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles><a href=#dom-texttrack-kind-subtitles>subtitles</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-captions id=sourcing-out-of-band-text-tracks:attr-track-kind-captions>Captions</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions><a href=#dom-texttrack-kind-captions>captions</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-descriptions id=sourcing-out-of-band-text-tracks:attr-track-kind-descriptions>概要</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-chapters id=sourcing-out-of-band-text-tracks:attr-track-kind-chapters>Chapters metadata</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-chapters><a href=#dom-texttrack-kind-chapters>chapters</a></code>
    </td></tr><tr><td><a href=#attr-track-kind-metadata id=sourcing-out-of-band-text-tracks:attr-track-kind-metadata>Metadata</a>
     </td><td><code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata><a href=#dom-texttrack-kind-metadata>metadata</a></code>
  </td></tr></table>

  <p>The <a href=#text-track-label id=sourcing-out-of-band-text-tracks:text-track-label>text track label</a> is the element's <a href=#track-label id=sourcing-out-of-band-text-tracks:track-label>track label</a>.</p>

  <p>The <a href=#text-track-language id=sourcing-out-of-band-text-tracks:text-track-language>text track language</a> is the element's <a href=#track-language id=sourcing-out-of-band-text-tracks:track-language>track language</a>, if any, or
  the empty string otherwise.</p>

  <p>As the <code id=sourcing-out-of-band-text-tracks:attr-track-kind-2><a href=#attr-track-kind>kind</a></code>, <code id=sourcing-out-of-band-text-tracks:attr-track-label><a href=#attr-track-label>label</a></code>,
  and <code id=sourcing-out-of-band-text-tracks:attr-track-srclang><a href=#attr-track-srclang>srclang</a></code> attributes are set, changed, or removed, the
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-2>text track</a> must update accordingly, as per the definitions above.</p>

  <p class=note>Changes to the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url>track URL</a> are handled in the algorithm below.</p>

  <p>The <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state>text track readiness state</a> is initially <a href=#text-track-not-loaded id=sourcing-out-of-band-text-tracks:text-track-not-loaded>not loaded</a>, and the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode>text track mode</a> is initially <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled>disabled</a>.</p>

  <p>The <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues>text track list of cues</a> is initially empty. It is dynamically modified when
  the referenced file is parsed. Associated with the list are the <a href=#rules-for-updating-the-text-track-rendering id=sourcing-out-of-band-text-tracks:rules-for-updating-the-text-track-rendering>rules for updating the text
  track rendering</a> appropriate for the format in question; for WebVTT, this is the <a id=sourcing-out-of-band-text-tracks:rules-for-updating-the-display-of-webvtt-text-tracks href=https://w3c.github.io/webvtt/#rules-for-updating-the-display-of-webvtt-text-tracks data-x-internal=rules-for-updating-the-display-of-webvtt-text-tracks>rules
  for updating the display of WebVTT text tracks</a>. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element-2><a href=#the-track-element>track</a></code> element's parent element changes and the new parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element>media
  element</a>, then the user agent must add the <code id=sourcing-out-of-band-text-tracks:the-track-element-3><a href=#the-track-element>track</a></code> element's corresponding
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-3>text track</a> to the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-2>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks>list of text tracks</a>, and
  then <a id=sourcing-out-of-band-text-tracks:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named
  <code id=sourcing-out-of-band-text-tracks:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code> at the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-3>media element</a>'s <code id=sourcing-out-of-band-text-tracks:dom-media-texttracks><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=sourcing-out-of-band-text-tracks:texttracklist><a href=#texttracklist>TextTrackList</a></code> object,
  using <code id=sourcing-out-of-band-text-tracks:trackevent><a href=#trackevent>TrackEvent</a></code>, with the <code id=sourcing-out-of-band-text-tracks:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code> attribute
  initialized to the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-4>text track</a>'s <code id=sourcing-out-of-band-text-tracks:texttrack-2><a href=#texttrack>TextTrack</a></code> object.</p>

  <p>When a <code id=sourcing-out-of-band-text-tracks:the-track-element-4><a href=#the-track-element>track</a></code> element's parent element changes and the old parent was a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-4>media
  element</a>, then the user agent must remove the <code id=sourcing-out-of-band-text-tracks:the-track-element-5><a href=#the-track-element>track</a></code> element's corresponding
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-5>text track</a> from the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-5>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-2>list of text tracks</a>,
  and then <a id=sourcing-out-of-band-text-tracks:queue-a-task-2 href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-2 data-x-internal=concept-event-fire>fire an event</a> named
  <code id=sourcing-out-of-band-text-tracks:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code> at the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-6>media element</a>'s
  <code id=sourcing-out-of-band-text-tracks:dom-media-texttracks-2><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=sourcing-out-of-band-text-tracks:texttracklist-2><a href=#texttracklist>TextTrackList</a></code>
  object, using <code id=sourcing-out-of-band-text-tracks:trackevent-2><a href=#trackevent>TrackEvent</a></code>, with the <code id=sourcing-out-of-band-text-tracks:dom-trackevent-track-2><a href=#dom-trackevent-track>track</a></code>
  attribute initialized to the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-6>text track</a>'s <code id=sourcing-out-of-band-text-tracks:texttrack-3><a href=#texttrack>TextTrack</a></code> object.</p>
  

  <hr>

  <p>When a <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-7>text track</a> corresponding to a <code id=sourcing-out-of-band-text-tracks:the-track-element-6><a href=#the-track-element>track</a></code> element is added to a
  <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-7>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-3>list of text tracks</a>, the user agent must <a id=sourcing-out-of-band-text-tracks:queue-a-task-3 href=webappapis.html#queue-a-task>queue a
  task</a> to run the following steps for the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-8>media element</a>:</p>

  <ol><li><p>If the element's <a href=#blocked-on-parser id=sourcing-out-of-band-text-tracks:blocked-on-parser>blocked-on-parser</a> flag is true, then return.</li><li><p>If the element's <a href=#did-perform-automatic-track-selection id=sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection>did-perform-automatic-track-selection</a> flag is true, then
   return.</li><li><p><a href=#honor-user-preferences-for-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:honor-user-preferences-for-automatic-text-track-selection>Honor user preferences for automatic text track selection</a> for this
   element.</li></ol>

  <p>When the user agent is required to <dfn id=honor-user-preferences-for-automatic-text-track-selection>honor user preferences for automatic text track
  selection</dfn> for a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-9>media element</a>, the user agent must run the following steps:</p>

  <ol><li><p><a href=#perform-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection>Perform automatic text track selection</a> for <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-subtitles-2><a href=#dom-texttrack-kind-subtitles>subtitles</a></code> and <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-captions-2><a href=#dom-texttrack-kind-captions>captions</a></code>.</li><li><p><a href=#perform-automatic-text-track-selection id=sourcing-out-of-band-text-tracks:perform-automatic-text-track-selection-2>Perform automatic text track selection</a> for <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-descriptions-2><a href=#dom-texttrack-kind-descriptions>descriptions</a></code>.</li><li><p>If there are any <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-8>text tracks</a> in the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-10>media
   element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-4>list of text tracks</a> whose <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-3>text track kind</a> is <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata-2><a href=#dom-texttrack-kind-metadata>chapters</a></code> or <code id=sourcing-out-of-band-text-tracks:dom-texttrack-kind-metadata-3><a href=#dom-texttrack-kind-metadata>metadata</a></code> that correspond to <code id=sourcing-out-of-band-text-tracks:the-track-element-7><a href=#the-track-element>track</a></code>
   elements with a <code id=sourcing-out-of-band-text-tracks:attr-track-default><a href=#attr-track-default>default</a></code> attribute set whose <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-2>text
   track mode</a> is set to <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled-2>disabled</a>, then set the
   <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-3>text track mode</a> of all such tracks to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden>hidden</a></li><li><p>Set the element's <a href=#did-perform-automatic-track-selection id=sourcing-out-of-band-text-tracks:did-perform-automatic-track-selection-2>did-perform-automatic-track-selection</a> flag to
   true.</li></ol>

  <p>When the steps above say to <dfn id=perform-automatic-text-track-selection>perform automatic text track selection</dfn> for one or more
  <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-4>text track kinds</a>, it means to run the following steps:</p>

  <ol><li><p>Let <var>candidates</var> be a list consisting of the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-9>text tracks</a> in the <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-11>media element</a>'s <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-5>list of text tracks</a>
   whose <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-5>text track kind</a> is one of the kinds that were passed to the algorithm, if any,
   in the order given in the <a href=#list-of-text-tracks id=sourcing-out-of-band-text-tracks:list-of-text-tracks-6>list of text tracks</a>.</li><li><p>If <var>candidates</var> is empty, then return.</li><li><p>If any of the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-10>text tracks</a> in <var>candidates</var> have a <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-4>text track mode</a> set to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing>showing</a>, return.</li><li>

    <p>If the user has expressed an interest in having a track from <var>candidates</var>
    enabled based on its <a href=#text-track-kind id=sourcing-out-of-band-text-tracks:text-track-kind-6>text track kind</a>, <a href=#text-track-language id=sourcing-out-of-band-text-tracks:text-track-language-2>text track language</a>, and
    <a href=#text-track-label id=sourcing-out-of-band-text-tracks:text-track-label-2>text track label</a>, then set its <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-5>text track mode</a> to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-2>showing</a>.</p> 

    <p class=note>For example, the user could have set a browser preference to the effect of "I
    want French captions whenever possible", or "If there is a subtitle track with 'Commentary' in
    the title, enable it", or "If there are audio description tracks available, enable one, ideally
    in Swiss German, but failing that in Standard Swiss German or Standard German".</p>

    <p>Otherwise, if there are any <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-11>text tracks</a> in <var>candidates</var> that correspond to <code id=sourcing-out-of-band-text-tracks:the-track-element-8><a href=#the-track-element>track</a></code> elements with a <code id=sourcing-out-of-band-text-tracks:attr-track-default-2><a href=#attr-track-default>default</a></code> attribute set whose <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-6>text track mode</a> is
    set to <a href=#text-track-disabled id=sourcing-out-of-band-text-tracks:text-track-disabled-3>disabled</a>, then set the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-7>text track
    mode</a> of the first such track to <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-3>showing</a>.</p>

   </li></ol>

  <p>When a <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-12>text track</a> corresponding to a <code id=sourcing-out-of-band-text-tracks:the-track-element-9><a href=#the-track-element>track</a></code> element experiences any of
  the following circumstances, the user agent must <a href=#start-the-track-processing-model id=sourcing-out-of-band-text-tracks:start-the-track-processing-model>start the <code>track</code> processing
  model</a> for that <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-13>text track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-10><a href=#the-track-element>track</a></code> element:

  

  <ul><li>The <code id=sourcing-out-of-band-text-tracks:the-track-element-11><a href=#the-track-element>track</a></code> element is created.</li><li>The <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-14>text track</a> has its <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-8>text track mode</a> changed.</li><li>The <code id=sourcing-out-of-band-text-tracks:the-track-element-12><a href=#the-track-element>track</a></code> element's parent element changes and the new parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-12>media
   element</a>.</li></ul>

  <p>When a user agent is to <dfn id=start-the-track-processing-model>start the <code>track</code> processing model</dfn> for a
  <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-15>text track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-13><a href=#the-track-element>track</a></code> element, it must run the following algorithm.
  This algorithm interacts closely with the <a id=sourcing-out-of-band-text-tracks:event-loop href=webappapis.html#event-loop>event loop</a> mechanism; in particular, it has
  a <a id=sourcing-out-of-band-text-tracks:synchronous-section href=webappapis.html#synchronous-section>synchronous section</a> (which is triggered as part of the <a id=sourcing-out-of-band-text-tracks:event-loop-2 href=webappapis.html#event-loop>event loop</a>
  algorithm). The steps in that section are marked with ⌛.</p>

  <ol><li><p>If another occurrence of this algorithm is already running for this <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-16>text
   track</a> and its <code id=sourcing-out-of-band-text-tracks:the-track-element-14><a href=#the-track-element>track</a></code> element, return, letting that other algorithm
   take care of this element.</li><li><p>If the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-17>text track</a>'s <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-9>text track mode</a> is not set to one of <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-2>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-4>showing</a>,
   then return.</li><li><p>If the <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-18>text track</a>'s <code id=sourcing-out-of-band-text-tracks:the-track-element-15><a href=#the-track-element>track</a></code> element does not have a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-13>media
   element</a> as a parent, return.</li><li><p>Run the remainder of these steps <a id=sourcing-out-of-band-text-tracks:in-parallel href=infrastructure.html#in-parallel>in parallel</a>, allowing whatever caused these steps to
   run to continue.</li><li><p><i>Top</i>: <a id=sourcing-out-of-band-text-tracks:await-a-stable-state href=webappapis.html#await-a-stable-state>Await a stable state</a>. The <a id=sourcing-out-of-band-text-tracks:synchronous-section-2 href=webappapis.html#synchronous-section>synchronous section</a>
   consists of the following steps. (The steps in the <a id=sourcing-out-of-band-text-tracks:synchronous-section-3 href=webappapis.html#synchronous-section>synchronous section</a> are marked
   with ⌛.)</li><li><p>⌛ Set the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-2>text track readiness state</a> to <a href=#text-track-loading id=sourcing-out-of-band-text-tracks:text-track-loading>loading</a>.</li><li><p>⌛ Let <var>URL</var> be the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-2>track URL</a> of the
   <code id=sourcing-out-of-band-text-tracks:the-track-element-16><a href=#the-track-element>track</a></code> element.</li><li><p>⌛ If the <code id=sourcing-out-of-band-text-tracks:the-track-element-17><a href=#the-track-element>track</a></code> element's parent is a <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-14>media element</a> then
   let <var>corsAttributeState</var> be the state of the parent <a href=#media-element id=sourcing-out-of-band-text-tracks:media-element-15>media element</a>'s <code id=sourcing-out-of-band-text-tracks:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code> content attribute. Otherwise, let
   <var>corsAttributeState</var> be <a href=urls-and-fetching.html#attr-crossorigin-none id=sourcing-out-of-band-text-tracks:attr-crossorigin-none>No CORS</a>.</li><li><p>End the <a id=sourcing-out-of-band-text-tracks:synchronous-section-4 href=webappapis.html#synchronous-section>synchronous section</a>, continuing the remaining steps
   <a id=sourcing-out-of-band-text-tracks:in-parallel-2 href=infrastructure.html#in-parallel>in parallel</a>.</li><li>

    <p>If <var>URL</var> is not the empty string, then:

    

    <ol><li><p>Let <var>request</var> be the result of <a href=urls-and-fetching.html#create-a-potential-cors-request id=sourcing-out-of-band-text-tracks:create-a-potential-cors-request>creating a potential-CORS request</a> given
     <var>URL</var>, "<code>track</code>", and <var>corsAttributeState</var>, and with the
     <i>same-origin fallback flag</i> set.</li><li><p>Set <var>request</var>'s <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-request-client id=sourcing-out-of-band-text-tracks:concept-request-client data-x-internal=concept-request-client>client</a> to the
     <code id=sourcing-out-of-band-text-tracks:the-track-element-18><a href=#the-track-element>track</a></code> element's <a id=sourcing-out-of-band-text-tracks:node-document href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-document data-x-internal=node-document>node document</a>'s <code id=sourcing-out-of-band-text-tracks:window><a href=window-object.html#window>Window</a></code> object's
     <a id=sourcing-out-of-band-text-tracks:environment-settings-object href=webappapis.html#environment-settings-object>environment settings object</a>.</li><li><p><a href=https://triple-underscore.github.io/Fetch-ja.html#concept-fetch id=sourcing-out-of-band-text-tracks:concept-fetch data-x-internal=concept-fetch>Fetch</a> <var>request</var>.</li></ol>

    <p>The <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task>tasks</a> <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-4>queued</a> by the
    fetching algorithm on the <a id=sourcing-out-of-band-text-tracks:networking-task-source href=webappapis.html#networking-task-source>networking task source</a> to process the data as it is being
    fetched must determine the  type of
    the resource. If the  type of the resource is not a supported text
    track format, the load will fail, as described below. Otherwise, the resource's data must be
    passed to the appropriate parser (e.g., the <a id=sourcing-out-of-band-text-tracks:webvtt-parser href=https://w3c.github.io/webvtt/#webvtt-parser data-x-internal=webvtt-parser>WebVTT parser</a>) as it is received, with the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-2>text
    track list of cues</a> being used for that parser's output. <a href=references.html#refsWEBVTT>[WEBVTT]</a></p>

    <p class=note>The appropriate parser will incrementally update the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-3>text track list of
    cues</a> during these <a id=sourcing-out-of-band-text-tracks:networking-task-source-2 href=webappapis.html#networking-task-source>networking task
    source</a> <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-2>tasks</a>, as each such task is
    run with whatever data has been received from the network).</p>

    <p class=critical>This specification does not currently say whether or how to check the MIME
    types of text tracks, or whether or how to perform file type sniffing using the actual file
    data. Implementors differ in their intentions on this matter and it is therefore unclear what
    the right solution is. In the absence of any requirement here, the HTTP specification's strict
    requirement to follow the Content-Type header prevails ("Content-Type specifies the media type
    of the underlying data." ... "If and only if the media type is not given by a Content-Type
    field, the recipient MAY attempt to guess the media type via inspection of its content
    and/or the name extension(s) of the URI used to identify the resource.").</p>

    <p>If fetching fails for any reason (network error, the server returns an error code, CORS
    fails, etc), or if <var>URL</var> is the empty string, then <a id=sourcing-out-of-band-text-tracks:queue-a-task-5 href=webappapis.html#queue-a-task>queue a task</a> to first
    change the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-3>text track readiness state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load>failed to load</a> and then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-3 data-x-internal=concept-event-fire>fire an event</a>
    named <code id=sourcing-out-of-band-text-tracks:event-track-error><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-19><a href=#the-track-element>track</a></code> element. This
    <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-3>task</a> must use the <a id=sourcing-out-of-band-text-tracks:dom-manipulation-task-source href=webappapis.html#dom-manipulation-task-source>DOM manipulation task
    source</a>.</p>
    

    <p>If fetching does not fail, but the  type of the resource is not a supported
    text track format, or the file was not successfully processed (e.g., the format in question is
    an XML format and the file contained a well-formedness error that the XML specification requires
    be detected and reported to the application), then the <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-4>task</a>
    that is <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-6>queued</a> by the <a id=sourcing-out-of-band-text-tracks:networking-task-source-3 href=webappapis.html#networking-task-source>networking task source</a> in
    which the aforementioned problem is found must change the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-4>text track readiness
    state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load-2>failed to load</a> and <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-4 data-x-internal=concept-event-fire>fire an event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-error-2><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-20><a href=#the-track-element>track</a></code> element.</p>

    <p>If fetching does not fail, and the file was successfully processed, then the final <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-5>task</a> that is <a href=webappapis.html#queue-a-task id=sourcing-out-of-band-text-tracks:queue-a-task-7>queued</a> by the
    <a id=sourcing-out-of-band-text-tracks:networking-task-source-4 href=webappapis.html#networking-task-source>networking task source</a>, after it has finished parsing the data, must change the
    <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-5>text track readiness state</a> to <a href=#text-track-loaded id=sourcing-out-of-band-text-tracks:text-track-loaded>loaded</a>, and
    <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-5 data-x-internal=concept-event-fire>fire an event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-load><a href=#event-track-load>load</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-21><a href=#the-track-element>track</a></code> element.</p>

    <p>If, while fetching is ongoing, either:</p>

    <ul><li>the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-3>track URL</a> changes so that it is no longer equal to <var>URL</var>, while the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-10>text track mode</a> is set to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-3>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-5>showing</a>; or</li><li>the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-11>text track mode</a> changes to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-4>hidden</a>
     or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-6>showing</a>, while the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-4>track URL</a> is not
     equal to <var>URL</var></li></ul>

    <p>...then the user agent must abort <a href=https://triple-underscore.github.io/Fetch-ja.html#concept-fetch id=sourcing-out-of-band-text-tracks:concept-fetch-2 data-x-internal=concept-fetch>fetching</a>, discarding
    any pending <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-6>tasks</a> generated by that algorithm (and
    in particular, not adding any cues to the <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-4>text track list of cues</a> after the moment
    the URL changed), and then <a id=sourcing-out-of-band-text-tracks:queue-a-task-8 href=webappapis.html#queue-a-task>queue a task</a> that first changes the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-6>text track
    readiness state</a> to <a href=#text-track-failed-to-load id=sourcing-out-of-band-text-tracks:text-track-failed-to-load-3>failed to load</a> and
    then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=sourcing-out-of-band-text-tracks:concept-event-fire-6 data-x-internal=concept-event-fire>fires an event</a> named <code id=sourcing-out-of-band-text-tracks:event-track-error-3><a href=#event-track-error>error</a></code> at the <code id=sourcing-out-of-band-text-tracks:the-track-element-22><a href=#the-track-element>track</a></code> element. This <a href=webappapis.html#concept-task id=sourcing-out-of-band-text-tracks:concept-task-7>task</a> must use the <a id=sourcing-out-of-band-text-tracks:dom-manipulation-task-source-2 href=webappapis.html#dom-manipulation-task-source>DOM manipulation task source</a>.  </p>

   </li><li><p>Wait until the <a href=#text-track-readiness-state id=sourcing-out-of-band-text-tracks:text-track-readiness-state-7>text track readiness state</a> is no longer set to <a href=#text-track-loading id=sourcing-out-of-band-text-tracks:text-track-loading-2>loading</a>.</li><li><p>Wait until the <a href=#track-url id=sourcing-out-of-band-text-tracks:track-url-5>track URL</a> is no longer equal to <var>URL</var>, at
   the same time as the <a href=#text-track-mode id=sourcing-out-of-band-text-tracks:text-track-mode-12>text track mode</a> is set to <a href=#text-track-hidden id=sourcing-out-of-band-text-tracks:text-track-hidden-5>hidden</a> or <a href=#text-track-showing id=sourcing-out-of-band-text-tracks:text-track-showing-7>showing</a>.</li><li><p>Jump to the step labeled <i>top</i>.</li></ol>

  <p>Whenever a <code id=sourcing-out-of-band-text-tracks:the-track-element-23><a href=#the-track-element>track</a></code> element has its <code id=sourcing-out-of-band-text-tracks:attr-track-src><a href=#attr-track-src>src</a></code> attribute
  set, changed, or removed, the user agent must <a id=sourcing-out-of-band-text-tracks:immediately href=infrastructure.html#immediately>immediately</a> empty the element's <a href=#text-track id=sourcing-out-of-band-text-tracks:text-track-19>text
  track</a>'s <a href=#text-track-list-of-cues id=sourcing-out-of-band-text-tracks:text-track-list-of-cues-5>text track list of cues</a>. (This also causes the algorithm above to stop
  adding cues from the resource being obtained using the previously given URL, if any.)</p>

  


  

  <h6 id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues><span class=secno>4.8.12.11.4</span> <dfn>Guidelines for exposing cues</dfn> in various formats as <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue>text track cues</a><a href=#guidelines-for-exposing-cues-in-various-formats-as-text-track-cues class=self-link></a></h6>

  <p>How a specific format's text track cues are to be interpreted for the purposes of processing by
  an HTML user agent is defined by that format. In the absence of such a specification, this section
  provides some constraints within which implementations can attempt to consistently expose such
  formats.</p>

  <p>To support the <a href=#text-track id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track>text track</a> model of HTML, each unit of timed data is converted to a
  <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-2>text track cue</a>. Where the mapping of the format's features to the aspects of a
  <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-3>text track cue</a> as defined in this specification are not defined, implementations must
  ensure that the mapping is consistent with the definitions of the aspects of a <a href=#text-track-cue id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-4>text track
  cue</a> as defined above, as well as with the following constraints:</p>

  <dl><dt>The <a href=#text-track-cue-identifier id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-identifier>text track cue identifier</a>
   <dd>
    <p>Should be set to the empty string if the format has no obvious analogue to a per-cue
    identifier.</p>
   <dt>The <a href=#text-track-cue-pause-on-exit-flag id=guidelines-for-exposing-cues-in-various-formats-as-text-track-cues:text-track-cue-pause-on-exit-flag>text track cue pause-on-exit flag</a>
   <dd>
    <p>Should be set to false.</p>
   </dl>

  


  <h6 id=text-track-api><span class=secno>4.8.12.11.5</span> テキストトラックAPI<a href=#text-track-api class=self-link></a></h6>

  <pre class=idl>[Exposed=Window]
interface <dfn id=texttracklist>TextTrackList</dfn> : <a id=text-track-api:eventtarget href=https://triple-underscore.github.io/DOM4-ja.html#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  readonly attribute unsigned long <a href=#dom-texttracklist-length id=text-track-api:dom-texttracklist-length>length</a>;
  <a href=#dom-texttracklist-item>getter</a> <a href=#texttrack id=text-track-api:texttrack>TextTrack</a> (unsigned long index);
  <a href=#texttrack id=text-track-api:texttrack-2>TextTrack</a>? <a href=#dom-texttracklist-gettrackbyid id=text-track-api:dom-texttracklist-gettrackbyid>getTrackById</a>(DOMString id);

  attribute <a id=text-track-api:eventhandler href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onchange id=text-track-api:handler-texttracklist-onchange>onchange</a>;
  attribute <a id=text-track-api:eventhandler-2 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onaddtrack id=text-track-api:handler-texttracklist-onaddtrack>onaddtrack</a>;
  attribute <a id=text-track-api:eventhandler-3 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttracklist-onremovetrack id=text-track-api:handler-texttracklist-onremovetrack>onremovetrack</a>;
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-texttracks-dev><a href=#dom-media-texttracks>textTracks</a></code> . <code>length</code><dd>
    <p><a href=#media-element id=text-track-api:media-element>メディア要素</a>（たとえば<code id=text-track-api:the-track-element><a href=#the-track-element>track</a></code>要素から）に関連付けられた<a href=#text-track id=text-track-api:text-track>テキストトラック</a>の数を返す。これは、<a href=#media-element id=text-track-api:media-element-2>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks>テキストトラックのリスト</a>で<a href=#text-track id=text-track-api:text-track-2>テキストトラック</a>の数である。</p>
   <dt><var>media</var> . <code id=text-track-api:dom-media-texttracks><a href=#dom-media-texttracks>textTracks[</a></code> <var>n</var> <code>]</code><dd>
    <p><a href=#media-element id=text-track-api:media-element-3>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-2>テキストトラックのリスト</a>で<var>n</var>番目の<a href=#text-track id=text-track-api:text-track-3>テキストトラック</a>を表す<code id=text-track-api:texttrack-3><a href=#texttrack>TextTrack</a></code>オブジェクトを返す。</p>
   <dt><var>textTrack</var> = <var>media</var> . <code id=text-track-api:dom-media-texttracks-2><a href=#dom-media-texttracks>textTracks</a></code> . <code id=dom-texttracklist-gettrackbyid-dev><a href=#dom-texttracklist-gettrackbyid>getTrackById</a></code>( <var>id</var> )<dd>

    <p>与えられた識別子とともに<code id=text-track-api:texttrack-4><a href=#texttrack>TextTrack</a></code>オブジェクトを返す、または一切トラックがその識別子を持たない場合nullを返す。</p>

   </dl>

  

  <p>A <code id=text-track-api:texttracklist><a href=#texttracklist>TextTrackList</a></code> object represents a dynamically updating list of <a href=#text-track id=text-track-api:text-track-4>text tracks</a> in a given order.</p>

  <p>The <dfn id=dom-media-texttracks><code>textTracks</code></dfn> attribute of <a href=#media-element id=text-track-api:media-element-4>media elements</a> must return a <code id=text-track-api:texttracklist-2><a href=#texttracklist>TextTrackList</a></code> object
  representing the <code id=text-track-api:texttrack-5><a href=#texttrack>TextTrack</a></code> objects of the <a href=#text-track id=text-track-api:text-track-5>text tracks</a>
  in the <a href=#media-element id=text-track-api:media-element-5>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-3>list of text tracks</a>, in the same order as in the
  <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-4>list of text tracks</a>.</p>

  <p>The <dfn id=dom-texttracklist-length><code>length</code></dfn> attribute of a
  <code id=text-track-api:texttracklist-3><a href=#texttracklist>TextTrackList</a></code> object must return the number of <a href=#text-track id=text-track-api:text-track-6>text
  tracks</a> in the list represented by the <code id=text-track-api:texttracklist-4><a href=#texttracklist>TextTrackList</a></code> object.</p>

  <p>The <a id=text-track-api:supported-property-indices href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of a <code id=text-track-api:texttracklist-5><a href=#texttracklist>TextTrackList</a></code> object at any
  instant are the numbers from zero to the number of <a href=#text-track id=text-track-api:text-track-7>text tracks</a> in
  the list represented by the <code id=text-track-api:texttracklist-6><a href=#texttracklist>TextTrackList</a></code> object minus one, if any. If there are no
  <a href=#text-track id=text-track-api:text-track-8>text tracks</a> in the list, there are no <a id=text-track-api:supported-property-indices-2 href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property
  indices</a>.</p>

  <p id=dom-texttracklist-item>To <a id=text-track-api:determine-the-value-of-an-indexed-property href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-determine-the-value-of-an-indexed-property data-x-internal=determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> of a
  <code id=text-track-api:texttracklist-7><a href=#texttracklist>TextTrackList</a></code> object for a given index <var>index</var>, the user agent must return
  the <var>index</var>th <a href=#text-track id=text-track-api:text-track-9>text track</a> in the list represented by the
  <code id=text-track-api:texttracklist-8><a href=#texttracklist>TextTrackList</a></code> object.</p>

  <p>The <dfn id=dom-texttracklist-gettrackbyid><code>getTrackById(<var>id</var>)</code></dfn> method must return the first <code id=text-track-api:texttrack-6><a href=#texttrack>TextTrack</a></code> in the
  <code id=text-track-api:texttracklist-9><a href=#texttracklist>TextTrackList</a></code> object whose <code id=text-track-api:dom-texttrack-id><a href=#dom-texttrack-id>id</a></code> IDL attribute
  would return a value equal to the value of the <var>id</var> argument. When no tracks
  match the given argument, the method must return null.</p>

  

  <hr>

  <pre class=idl>enum <dfn id=texttrackmode>TextTrackMode</dfn> { "<a href=#dom-texttrack-disabled id=text-track-api:dom-texttrack-disabled>disabled</a>",  "<a href=#dom-texttrack-hidden id=text-track-api:dom-texttrack-hidden>hidden</a>",  "<a href=#dom-texttrack-showing id=text-track-api:dom-texttrack-showing>showing</a>" };
enum <dfn id=texttrackkind>TextTrackKind</dfn> { "<a href=#dom-texttrack-kind-subtitles id=text-track-api:dom-texttrack-kind-subtitles>subtitles</a>",  "<a href=#dom-texttrack-kind-captions id=text-track-api:dom-texttrack-kind-captions>captions</a>",  "<a href=#dom-texttrack-kind-descriptions id=text-track-api:dom-texttrack-kind-descriptions>descriptions</a>",  "<a href=#dom-texttrack-kind-chapters id=text-track-api:dom-texttrack-kind-chapters>chapters</a>",  "<a href=#dom-texttrack-kind-metadata id=text-track-api:dom-texttrack-kind-metadata>metadata</a>" };

[Exposed=Window]
interface <dfn id=texttrack>TextTrack</dfn> : <a id=text-track-api:eventtarget-2 href=https://triple-underscore.github.io/DOM4-ja.html#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  readonly attribute <a href=#texttrackkind id=text-track-api:texttrackkind>TextTrackKind</a> <a href=#dom-texttrack-kind id=text-track-api:dom-texttrack-kind>kind</a>;
  readonly attribute DOMString <a href=#dom-texttrack-label id=text-track-api:dom-texttrack-label>label</a>;
  readonly attribute DOMString <a href=#dom-texttrack-language id=text-track-api:dom-texttrack-language>language</a>;

  readonly attribute DOMString <a href=#dom-texttrack-id id=text-track-api:dom-texttrack-id-2>id</a>;
  readonly attribute DOMString <a href=#dom-texttrack-inbandmetadatatrackdispatchtype id=text-track-api:dom-texttrack-inbandmetadatatrackdispatchtype>inBandMetadataTrackDispatchType</a>;

  attribute <a href=#texttrackmode id=text-track-api:texttrackmode>TextTrackMode</a> <a href=#dom-texttrack-mode id=text-track-api:dom-texttrack-mode>mode</a>;

  readonly attribute <a href=#texttrackcuelist id=text-track-api:texttrackcuelist>TextTrackCueList</a>? <a href=#dom-texttrack-cues id=text-track-api:dom-texttrack-cues>cues</a>;
  readonly attribute <a href=#texttrackcuelist id=text-track-api:texttrackcuelist-2>TextTrackCueList</a>? <a href=#dom-texttrack-activecues id=text-track-api:dom-texttrack-activecues>activeCues</a>;

  void <a href=#dom-texttrack-addcue id=text-track-api:dom-texttrack-addcue>addCue</a>(<a href=#texttrackcue id=text-track-api:texttrackcue>TextTrackCue</a> cue);
  void <a href=#dom-texttrack-removecue id=text-track-api:dom-texttrack-removecue>removeCue</a>(<a href=#texttrackcue id=text-track-api:texttrackcue-2>TextTrackCue</a> cue);

  attribute <a id=text-track-api:eventhandler-4 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrack-oncuechange id=text-track-api:handler-texttrack-oncuechange>oncuechange</a>;
};</pre>

  <dl class=domintro><dt><var>textTrack</var> = <var>media</var> . <code id=dom-media-addtexttrack-dev><a href=#dom-media-addtexttrack>addTextTrack</a></code>( <var>kind</var> [, <var>label</var> [, <var>language</var> ] ] )<dd>

    <p><a href=#media-element id=text-track-api:media-element-6>メディア要素</a>の<a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-5>テキストトラックのリスト</a>に追加された新しい<code id=text-track-api:texttrack-7><a href=#texttrack>TextTrack</a></code>オブジェクトを作成して返す。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-kind-dev><a href=#dom-texttrack-kind>kind</a></code><dd>

    <p><a href=#text-track-kind id=text-track-api:text-track-kind>テキストトラックの種類</a>の文字列を返す。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-label-dev><a href=#dom-texttrack-label>label</a></code><dd>

    <p>存在する、または空の文字列（オブジェクトがユーザーに公開される場合、オブジェクトの他の属性からおそらく生成する必要があるカスタムラベルを示す）がある場合、<a href=#text-track-label id=text-track-api:text-track-label>テキストトラックのラベル</a>を返す。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-language-dev><a href=#dom-texttrack-language>language</a></code><dd>
    <p><a href=#text-track-language id=text-track-api:text-track-language>テキストトラックの言語</a>の文字列を返す。</p>
   <dt><var>textTrack</var> . <code id=dom-texttrack-id-dev><a href=#dom-texttrack-id>id</a></code><dd>

    <p>指定されたトラックのIDを返す。</p>

    <p>帯域内トラックに対して、フォーマットが<a id=text-track-api:media-fragment-syntax href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>メディアフラグメント構文</a>をサポートし、かつ<code id=text-track-api:dom-texttracklist-gettrackbyid-2><a href=#dom-texttracklist-gettrackbyid>getTrackById()</a></code>メソッドとともに使用できる場合、これは、<a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=text-track-api:concept-url-fragment data-x-internal=concept-url-fragment>フラグメント</a>で使用できるIDである。</p>

    <p><code id=text-track-api:the-track-element-2><a href=#the-track-element>track</a></code>要素に対応する<code id=text-track-api:texttrack-8><a href=#texttrack>TextTrack</a></code>オブジェクトに対して、これは<code id=text-track-api:the-track-element-3><a href=#the-track-element>track</a></code>要素のIDである。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-inbandmetadatatrackdispatchtype-dev><a href=#dom-texttrack-inbandmetadatatrackdispatchtype>inBandMetadataTrackDispatchType</a></code><dd>

    <p><a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-api:text-track-in-band-metadata-track-dispatch-type>テキストトラック帯域内のメタデータトラックディスパッチタイプ</a>の文字列を返す。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-mode-dev><a href=#dom-texttrack-mode>mode</a></code> [ = <var>value</var> ]<dd>

    <p>以下のリストから文字列によって表される、<a href=#text-track-mode id=text-track-api:text-track-mode>テキストトラックモード</a>を返す：</p>

    <dl><dt>"<code id=text-track-api:dom-texttrack-disabled-2><a href=#dom-texttrack-disabled>disabled</a></code>"<dd>
      <p><a href=#text-track-disabled id=text-track-api:text-track-disabled>テキストトラック無効</a>モード。</p>
     <dt>"<code id=text-track-api:dom-texttrack-hidden-2><a href=#dom-texttrack-hidden>hidden</a></code>"<dd>
      <p><a href=#text-track-hidden id=text-track-api:text-track-hidden>テキストトラック非表示</a>モード。</p>
     <dt>"<code id=text-track-api:dom-texttrack-showing-2><a href=#dom-texttrack-showing>showing</a></code>"<dd>
      <p><a href=#text-track-showing id=text-track-api:text-track-showing>テキストトラック表示</a>モード。</p>
     </dl>

    <p>モードを変更する設定が可能である。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-cues-dev><a href=#dom-texttrack-cues>cues</a></code><dd>
    <p><code id=text-track-api:texttrackcuelist-3><a href=#texttrackcuelist>TextTrackCueList</a></code>オブジェクトとして、<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues>キューのテキストトラックリスト</a>を返す。</p>
   <dt><var>textTrack</var> . <code id=dom-texttrack-activecues-dev><a href=#dom-texttrack-activecues>activeCues</a></code><dd>

    <p><code id=text-track-api:texttrackcuelist-4><a href=#texttrackcuelist>TextTrackCueList</a></code>オブジェクトとして、現在アクティブである<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-2>キューのテキストトラックリスト</a>から、<a href=#text-track-cue id=text-track-api:text-track-cue>テキストトラックキュー</a>を返す（つまり、<a href=#current-playback-position id=text-track-api:current-playback-position>現在の再生位置</a>の前に開始し、その後で終了する）。</p>

   <dt><var>textTrack</var> . <code id=dom-texttrack-addcue-dev><a href=#dom-texttrack-addcue>addCue</a></code>( <var>cue</var> )<dd>
    <p><var>textTrack</var>の<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-3>キューのテキストトラックリスト</a>に指定されたキューを追加する。</p>
   <dt><var>textTrack</var> . <code id=dom-texttrack-removecue-dev><a href=#dom-texttrack-removecue>removeCue</a></code>( <var>cue</var> )<dd>
    <p><var>textTrack</var>の<a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-4>キューのテキストトラックリスト</a>から指定されたキューを削除する。</p>
   </dl>

  

  <p>The <dfn id=dom-media-addtexttrack><code>addTextTrack(<var>kind</var>, <var>label</var>, <var>language</var>)</code></dfn> method of <a href=#media-element id=text-track-api:media-element-7>media elements</a>, when invoked, must run the following steps:</p>

  <ol><li>

    <p>Create a new <code id=text-track-api:texttrack-9><a href=#texttrack>TextTrack</a></code> object.</p>

   </li><li>

    <p>Create a new <a href=#text-track id=text-track-api:text-track-10>text track</a> corresponding to the new object, and set its <a href=#text-track-kind id=text-track-api:text-track-kind-2>text
    track kind</a> to <var>kind</var>, its <a href=#text-track-label id=text-track-api:text-track-label-2>text track label</a> to <var>label</var>, its <a href=#text-track-language id=text-track-api:text-track-language-2>text track language</a> to <var>language</var>, its
    <a href=#text-track-readiness-state id=text-track-api:text-track-readiness-state>text track readiness state</a> to the <a href=#text-track-loaded id=text-track-api:text-track-loaded>text track loaded</a> state, its
    <a href=#text-track-mode id=text-track-api:text-track-mode-2>text track mode</a> to the <a href=#text-track-hidden id=text-track-api:text-track-hidden-2>text track hidden</a> mode, and its <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-5>text
    track list of cues</a> to an empty list.</p>

    <p>Initially, the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-6>text track list of cues</a> is not associated with any <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering>rules
    for updating the text track rendering</a>. When a <a href=#text-track-cue id=text-track-api:text-track-cue-2>text track cue</a> is added to it,
    the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-7>text track list of cues</a> has its rules permanently set accordingly.</p>

   </li><li>

    <p>Add the new <a href=#text-track id=text-track-api:text-track-11>text track</a> to the <a href=#media-element id=text-track-api:media-element-8>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-6>list of text
    tracks</a>.</p>

   </li><li>

    <p><a id=text-track-api:queue-a-task href=webappapis.html#queue-a-task>Queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=text-track-api:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named
    <code id=text-track-api:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code> at the <a href=#media-element id=text-track-api:media-element-9>media element</a>'s <code id=text-track-api:dom-media-texttracks-3><a href=#dom-media-texttracks>textTracks</a></code> attribute's <code id=text-track-api:texttracklist-10><a href=#texttracklist>TextTrackList</a></code> object,
    using <code id=text-track-api:trackevent><a href=#trackevent>TrackEvent</a></code>, with the <code id=text-track-api:dom-trackevent-track><a href=#dom-trackevent-track>track</a></code>
    attribute initialized to the new <a href=#text-track id=text-track-api:text-track-12>text track</a>'s <code id=text-track-api:texttrack-10><a href=#texttrack>TextTrack</a></code> object.</p>

   </li><li>

    <p>Return the new <code id=text-track-api:texttrack-11><a href=#texttrack>TextTrack</a></code> object.</p>

   </li></ol>

  <hr>

  <p>The <dfn id=dom-texttrack-kind><code>kind</code></dfn> attribute must return the
  <a href=#text-track-kind id=text-track-api:text-track-kind-3>text track kind</a> of the <a href=#text-track id=text-track-api:text-track-13>text track</a> that the <code id=text-track-api:texttrack-12><a href=#texttrack>TextTrack</a></code> object
  represents.</p>

  <p>The <dfn id=dom-texttrack-label><code>label</code></dfn> attribute must return the
  <a href=#text-track-label id=text-track-api:text-track-label-3>text track label</a> of the <a href=#text-track id=text-track-api:text-track-14>text track</a> that the <code id=text-track-api:texttrack-13><a href=#texttrack>TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id=dom-texttrack-language><code>language</code></dfn> attribute must return the
  <a href=#text-track-language id=text-track-api:text-track-language-3>text track language</a> of the <a href=#text-track id=text-track-api:text-track-15>text track</a> that the <code id=text-track-api:texttrack-14><a href=#texttrack>TextTrack</a></code>
  object represents.</p>

  <p>The <dfn id=dom-texttrack-id><code>id</code></dfn> attribute returns the track's
  identifier, if it has one, or the empty string otherwise. For tracks that correspond to
  <code id=text-track-api:the-track-element-4><a href=#the-track-element>track</a></code> elements, the track's identifier is the value of the element's <code id=text-track-api:the-id-attribute><a href=dom.html#the-id-attribute>id</a></code> attribute, if any. For in-band tracks, the track's identifier is
  specified by the <a href=#media-resource id=text-track-api:media-resource>media resource</a>. If the <a href=#media-resource id=text-track-api:media-resource-2>media resource</a> is in a format
  that supports <a id=text-track-api:media-fragment-syntax-2 href=https://www.w3.org/TR/media-frags/#media-fragment-syntax data-x-internal=media-fragment-syntax>media fragment syntax</a>, the identifier returned for a particular
  track must be the same identifier that would enable the track if used as the name of a track in
  the track dimension of such a <a href=https://triple-underscore.github.io/URL-ja.html#concept-url-fragment id=text-track-api:concept-url-fragment-2 data-x-internal=concept-url-fragment>fragment</a>.</p>

  <p>The <dfn id=dom-texttrack-inbandmetadatatrackdispatchtype><code>inBandMetadataTrackDispatchType</code></dfn>
  attribute must return the <a href=#text-track-in-band-metadata-track-dispatch-type id=text-track-api:text-track-in-band-metadata-track-dispatch-type-2>text track in-band metadata track dispatch type</a> of the
  <a href=#text-track id=text-track-api:text-track-16>text track</a> that the <code id=text-track-api:texttrack-15><a href=#texttrack>TextTrack</a></code> object represents.</p>

  <p>The <dfn id=dom-texttrack-mode><code>mode</code></dfn> attribute, on getting, must return
  the string corresponding to the <a href=#text-track-mode id=text-track-api:text-track-mode-3>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-17>text track</a> that
  the <code id=text-track-api:texttrack-16><a href=#texttrack>TextTrack</a></code> object represents, as defined by the following list:</p>

  <dl><dt>"<dfn id=dom-texttrack-disabled><code>disabled</code></dfn>"<dd><a href=#text-track-disabled id=text-track-api:text-track-disabled-2>テキストトラック無効</a>モード。<dt>"<dfn id=dom-texttrack-hidden><code>hidden</code></dfn>"<dd><a href=#text-track-hidden id=text-track-api:text-track-hidden-3>テキストトラック非表示</a>モード。<dt>"<dfn id=dom-texttrack-showing><code>showing</code></dfn>"<dd><a href=#text-track-showing id=text-track-api:text-track-showing-2>テキストトラック表示</a>モード。</dl>

  <p>On setting, if the new value isn't equal to what the attribute would currently return, the new
  value must be processed as follows:</p>

  <dl class=switch><dt>If the new value is "<code id=text-track-api:dom-texttrack-disabled-3><a href=#dom-texttrack-disabled>disabled</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-4>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-18>text track</a> that the
    <code id=text-track-api:texttrack-17><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-disabled id=text-track-api:text-track-disabled-3>text track disabled</a> mode.</p>

   <dt>If the new value is "<code id=text-track-api:dom-texttrack-hidden-3><a href=#dom-texttrack-hidden>hidden</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-5>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-19>text track</a> that the
    <code id=text-track-api:texttrack-18><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-hidden id=text-track-api:text-track-hidden-4>text track hidden</a> mode.</p>

   <dt>If the new value is "<code id=text-track-api:dom-texttrack-showing-3><a href=#dom-texttrack-showing>showing</a></code>"<dd>

    <p>Set the <a href=#text-track-mode id=text-track-api:text-track-mode-6>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-20>text track</a> that the
    <code id=text-track-api:texttrack-19><a href=#texttrack>TextTrack</a></code> object represents to the <a href=#text-track-showing id=text-track-api:text-track-showing-3>text track showing</a> mode.</p>

   </dl>

  <p>If the <a href=#text-track-mode id=text-track-api:text-track-mode-7>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-21>text track</a> that the <code id=text-track-api:texttrack-20><a href=#texttrack>TextTrack</a></code> object represents is not the <a href=#text-track-disabled id=text-track-api:text-track-disabled-4>text track disabled</a> mode, then the <dfn id=dom-texttrack-cues><code>cues</code></dfn> attribute must return a <a id=text-track-api:live href=infrastructure.html#live>live</a> <code id=text-track-api:texttrackcuelist-5><a href=#texttrackcuelist>TextTrackCueList</a></code> object that represents the subset of the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-8>text track list of cues</a> of the <a href=#text-track id=text-track-api:text-track-22>text track</a> that the <code id=text-track-api:texttrack-21><a href=#texttrack>TextTrack</a></code> object represents whose <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time>end times</a> occur at or after the <a href=#earliest-possible-position-when-the-script-started id=text-track-api:earliest-possible-position-when-the-script-started>earliest possible position when the script started</a>, in <a href=#text-track-cue-order id=text-track-api:text-track-cue-order>text track cue order</a>. そうでなければ、nullを返す。For each <code id=text-track-api:texttrack-22><a href=#texttrack>TextTrack</a></code> object, when an object is returned, the same <code id=text-track-api:texttrackcuelist-6><a href=#texttrackcuelist>TextTrackCueList</a></code> object must be returned each time.</p>

  <p>The <dfn id=earliest-possible-position-when-the-script-started>earliest possible position when the script started</dfn> is whatever the
  <a href=#earliest-possible-position id=text-track-api:earliest-possible-position>earliest possible position</a> was the last time the <a id=text-track-api:event-loop href=webappapis.html#event-loop>event loop</a> reached step
  1.</p>

  <p>If the <a href=#text-track-mode id=text-track-api:text-track-mode-8>text track mode</a> of the <a href=#text-track id=text-track-api:text-track-23>text track</a> that the <code id=text-track-api:texttrack-23><a href=#texttrack>TextTrack</a></code> object represents is not the <a href=#text-track-disabled id=text-track-api:text-track-disabled-5>text track disabled</a> mode, then the <dfn id=dom-texttrack-activecues><code>activeCues</code></dfn> attribute must return a <a id=text-track-api:live-2 href=infrastructure.html#live>live</a> <code id=text-track-api:texttrackcuelist-7><a href=#texttrackcuelist>TextTrackCueList</a></code> object that represents the subset of the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-9>text track list of cues</a> of the <a href=#text-track id=text-track-api:text-track-24>text track</a> that the <code id=text-track-api:texttrack-24><a href=#texttrack>TextTrack</a></code> object represents whose <a href=#active-flag-was-set-when-the-script-started id=text-track-api:active-flag-was-set-when-the-script-started>active flag was set when the script started</a>, in <a href=#text-track-cue-order id=text-track-api:text-track-cue-order-2>text track cue order</a>. そうでなければ、nullを返す。For each <code id=text-track-api:texttrack-25><a href=#texttrack>TextTrack</a></code> object, when an object is returned, the same <code id=text-track-api:texttrackcuelist-8><a href=#texttrackcuelist>TextTrackCueList</a></code> object must be returned each time.</p>

  <p>A <a href=#text-track-cue id=text-track-api:text-track-cue-3>text track cue</a>'s <dfn id=active-flag-was-set-when-the-script-started>active flag was set when the script started</dfn> if its
  <a href=#text-track-cue-active-flag id=text-track-api:text-track-cue-active-flag>text track cue active flag</a> was set the last time the <a id=text-track-api:event-loop-2 href=webappapis.html#event-loop>event loop</a> reached
  <a href=webappapis.html#step1>step 1</a>.</p>

  <hr>

  <p>The <dfn id=dom-texttrack-addcue><code>addCue(<var>cue</var>)</code></dfn> method
  of <code id=text-track-api:texttrack-26><a href=#texttrack>TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-10>text track list of cues</a> does not yet have any associated <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-2>rules
   for updating the text track rendering</a>, then associate the <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-11>text track list of
   cues</a> with the <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-3>rules for updating the text track rendering</a> appropriate to <var>cue</var>.</p>

   </li><li><p>If <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-12>text track list of cues</a>' associated <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-4>rules for updating the text
   track rendering</a> are not the same <a href=#rules-for-updating-the-text-track-rendering id=text-track-api:rules-for-updating-the-text-track-rendering-5>rules for updating the text track rendering</a>
   as appropriate for <var>cue</var>, then throw an <a id=text-track-api:invalidstateerror href=https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a>
   <code id=text-track-api:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</p>

   </li><li><p>If the given <var>cue</var> is in a <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-13>text track list of cues</a>, then
   remove <var>cue</var> from that <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-14>text track list of cues</a>.</li><li><p>Add <var>cue</var> to the <code id=text-track-api:texttrack-27><a href=#texttrack>TextTrack</a></code> object's <a href=#text-track id=text-track-api:text-track-25>text track</a>'s
   <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-15>text track list of cues</a>.</li></ol>

  <p>The <dfn id=dom-texttrack-removecue><code>removeCue(<var>cue</var>)</code></dfn>
  method of <code id=text-track-api:texttrack-28><a href=#texttrack>TextTrack</a></code> objects, when invoked, must run the following steps:</p>

  <ol><li><p>If the given <var>cue</var> is not in the <code id=text-track-api:texttrack-29><a href=#texttrack>TextTrack</a></code> object's <a href=#text-track id=text-track-api:text-track-26>text
   track</a>'s <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-16>text track list of cues</a>, then throw a
   <a id=text-track-api:notfounderror href=https://triple-underscore.github.io/WebIDL-ja.html#notfounderror data-x-internal=notfounderror>"<code>NotFoundError</code>"</a> <code id=text-track-api:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>.</li><li><p>Remove <var>cue</var> from the <code id=text-track-api:texttrack-30><a href=#texttrack>TextTrack</a></code> object's <a href=#text-track id=text-track-api:text-track-27>text track</a>'s
   <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-17>text track list of cues</a>.</li></ol>

  

  <div class=example>

   <p>この例において、<code id=text-track-api:the-audio-element><a href=#the-audio-element>audio</a></code>要素は、多数のサウンドエフェクトを含むサウンドファイルから特定のサウンドエフェクトを再生するために使用される。キューは、たとえブラウザーが一部のスクリプトを実行してビジーであっても、オーディオがクリップの最後で正確に終了するよう、オーディオを一時停止するために使用される。ページがオーディオを一時停止するスクリプトに依存し、ブラウザーは指定された正確な時間にスクリプトを実行することができなかった場合、次のクリップの出だしを聞いているかもしれない。</p>

   <pre>var sfx = new Audio('sfx.wav');
var sounds = sfx.addTextTrack('metadata');

// add sounds we care about
function addFX(start, end, name) {
  var cue = new VTTCue(start, end, '');
  cue.id = name;
  cue.pauseOnExit = true;
  sounds.addCue(cue);
}
addFX(12.783, 13.612, 'dog bark');
addFX(13.612, 15.091, 'kitten mew'))

function playSound(id) {
  sfx.currentTime = sounds.getCueById(id).startTime;
  sfx.play();
}

// play a bark as soon as we can
sfx.oncanplaythrough = function () {
  playSound('dog bark');
}
// meow when the user tries to leave,
// and have the browser ask them to stay
window.onbeforeunload = function (e) {
  playSound('kitten mew');
  e.preventDefault();
}</pre>

  </div>

  <hr>

  <pre class=idl>[Exposed=Window]
interface <dfn id=texttrackcuelist>TextTrackCueList</dfn> {
  readonly attribute unsigned long <a href=#dom-texttrackcuelist-length id=text-track-api:dom-texttrackcuelist-length>length</a>;
  <a href=#dom-texttrackcuelist-item>getter</a> <a href=#texttrackcue id=text-track-api:texttrackcue-3>TextTrackCue</a> (unsigned long index);
  <a href=#texttrackcue id=text-track-api:texttrackcue-4>TextTrackCue</a>? <a href=#dom-texttrackcuelist-getcuebyid id=text-track-api:dom-texttrackcuelist-getcuebyid>getCueById</a>(DOMString id);
};</pre>

  <dl class=domintro><dt><var>cuelist</var> . <code id=dom-texttrackcuelist-length-dev><a href=#dom-texttrackcuelist-length>length</a></code><dd>
    <p>リスト内の<a href=#text-track-cue id=text-track-api:text-track-cue-4>キュー</a>の数を返す。</p>
   <dt><var>cuelist</var>[<var>index</var>]<dd>
    <p>リスト内のインデックス<var>index</var>を持つ<a href=#text-track-cue id=text-track-api:text-track-cue-5>テキストトラックキュー</a>を返す。キューは、<a href=#text-track-cue-order id=text-track-api:text-track-cue-order-3>テキストトラックキュー順</a>にソートされる。</p>
   <dt><var>cuelist</var> . <code id=dom-texttrackcuelist-getcuebyid-dev><a href=#dom-texttrackcuelist-getcuebyid>getCueById</a></code>( <var>id</var> )<dd>
    <p><a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier>テキストトラックキュー識別子</a><var>id</var>を持つ（<a href=#text-track-cue-order id=text-track-api:text-track-cue-order-4>テキストトラックキュー順</a>で）最初の<a href=#text-track-cue id=text-track-api:text-track-cue-6>テキストトラックキュー</a>を返す。</p>
    <p>いずれのキューも指定された識別子を持たない場合、または引数が空の文字列である場合、nullを返す。</p>
   </dl>

  

  <p>A <code id=text-track-api:texttrackcuelist-9><a href=#texttrackcuelist>TextTrackCueList</a></code> object represents a dynamically updating list of <a href=#text-track-cue id=text-track-api:text-track-cue-7>text track cues</a> in a given order.</p>

  <p>The <dfn id=dom-texttrackcuelist-length><code>length</code></dfn> attribute must return
  the number of <a href=#text-track-cue id=text-track-api:text-track-cue-8>cues</a> in the list represented by the
  <code id=text-track-api:texttrackcuelist-10><a href=#texttrackcuelist>TextTrackCueList</a></code> object.</p>

  <p>The <a id=text-track-api:supported-property-indices-3 href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of a <code id=text-track-api:texttrackcuelist-11><a href=#texttrackcuelist>TextTrackCueList</a></code> object at any
  instant are the numbers from zero to the number of <a href=#text-track-cue id=text-track-api:text-track-cue-9>cues</a> in the
  list represented by the <code id=text-track-api:texttrackcuelist-12><a href=#texttrackcuelist>TextTrackCueList</a></code> object minus one, if any. If there are no
  <a href=#text-track-cue id=text-track-api:text-track-cue-10>cues</a> in the list, there are no <a id=text-track-api:supported-property-indices-4 href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property
  indices</a>.</p>

  <p id=dom-texttrackcuelist-item>To <a id=text-track-api:determine-the-value-of-an-indexed-property-2 href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-determine-the-value-of-an-indexed-property data-x-internal=determine-the-value-of-an-indexed-property>determine the value of an indexed property</a> for a
  given index <var>index</var>, the user agent must return the <var>index</var>th <a href=#text-track-cue id=text-track-api:text-track-cue-11>text track
  cue</a> in the list represented by the <code id=text-track-api:texttrackcuelist-13><a href=#texttrackcuelist>TextTrackCueList</a></code> object.</p>

  <p>The <dfn id=dom-texttrackcuelist-getcuebyid><code>getCueById(<var>id</var>)</code></dfn> method, when called with an argument other than the empty string,
  must return the first <a href=#text-track-cue id=text-track-api:text-track-cue-12>text track cue</a> in the list represented by the
  <code id=text-track-api:texttrackcuelist-14><a href=#texttrackcuelist>TextTrackCueList</a></code> object whose <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-2>text track cue identifier</a> is <var>id</var>, if any, or null otherwise. If the argument is the empty string, then the method
  must return null.</p>

  

  <hr>

  <pre class=idl>[Exposed=Window]
interface <dfn id=texttrackcue>TextTrackCue</dfn> : <a id=text-track-api:eventtarget-3 href=https://triple-underscore.github.io/DOM4-ja.html#interface-eventtarget data-x-internal=eventtarget>EventTarget</a> {
  readonly attribute <a href=#texttrack id=text-track-api:texttrack-31>TextTrack</a>? <a href=#dom-texttrackcue-track id=text-track-api:dom-texttrackcue-track>track</a>;

  attribute DOMString <a href=#dom-texttrackcue-id id=text-track-api:dom-texttrackcue-id>id</a>;
  attribute double <a href=#dom-texttrackcue-starttime id=text-track-api:dom-texttrackcue-starttime>startTime</a>;
  attribute double <a href=#dom-texttrackcue-endtime id=text-track-api:dom-texttrackcue-endtime>endTime</a>;
  attribute boolean <a href=#dom-texttrackcue-pauseonexit id=text-track-api:dom-texttrackcue-pauseonexit>pauseOnExit</a>;

  attribute <a id=text-track-api:eventhandler-5 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrackcue-onenter id=text-track-api:handler-texttrackcue-onenter>onenter</a>;
  attribute <a id=text-track-api:eventhandler-6 href=webappapis.html#eventhandler>EventHandler</a> <a href=#handler-texttrackcue-onexit id=text-track-api:handler-texttrackcue-onexit>onexit</a>;
};</pre>

  <dl class=domintro><dt><var>cue</var> . <a href=#dom-texttrackcue-track id=dom-texttrackcue-track-dev>track</a><dd>
    <p>存在する場合、この<a href=#text-track-cue id=text-track-api:text-track-cue-13>テキストトラックキュー</a>が属する<code id=text-track-api:texttrack-32><a href=#texttrack>TextTrack</a></code>オブジェクトを返し、そうでなければnullを返す。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-id id=dom-texttrackcue-id-dev>id</a> [ = <var>value</var> ]<dd>
    <p><a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-3>テキストトラックキュー識別子</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-starttime id=dom-texttrackcue-starttime-dev>startTime</a> [ = <var>value</var> ]<dd>
    <p>秒単位で、<a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time>テキストトラックキューの開始時刻</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-endtime id=dom-texttrackcue-endtime-dev>endTime</a> [ = <var>value</var> ]<dd>
    <p>秒単位で、<a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-2>テキストトラックキューの終了時刻</a>を返す。</p>
    <p>設定可能である。</p>
   <dt><var>cue</var> . <a href=#dom-texttrackcue-pauseonexit id=dom-texttrackcue-pauseonexit-dev>pauseOnExit</a> [ = <var>value</var> ]<dd>
    <p><a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag>テキスト·トラック·キューpause-on-exitフラグ</a>が設定される場合trueを返し、そうでなければfalseを返す。</p>
    <p>設定可能である。</p>
   </dl>

  

  <p>The <dfn id=dom-texttrackcue-track><code>track</code></dfn> attribute, on getting, must
  return the <code id=text-track-api:texttrack-33><a href=#texttrack>TextTrack</a></code> object of the <a href=#text-track id=text-track-api:text-track-28>text track</a> in whose <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-18>list of cues</a> the <a href=#text-track-cue id=text-track-api:text-track-cue-14>text track cue</a> that the
  <code id=text-track-api:texttrackcue-5><a href=#texttrackcue>TextTrackCue</a></code> object represents finds itself, if any; or null otherwise.</p>

  <p>The <dfn id=dom-texttrackcue-id><code>id</code></dfn> attribute, on getting, must return
  the <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-4>text track cue identifier</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-15>text track cue</a> that the
  <code id=text-track-api:texttrackcue-6><a href=#texttrackcue>TextTrackCue</a></code> object represents. On setting, the <a href=#text-track-cue-identifier id=text-track-api:text-track-cue-identifier-5>text track cue
  identifier</a> must be set to the new value.</p>

  <p>The <dfn id=dom-texttrackcue-starttime><code>startTime</code></dfn> attribute, on
  getting, must return the <a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time-2>text track cue start time</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-16>text track cue</a>
  that the <code id=text-track-api:texttrackcue-7><a href=#texttrackcue>TextTrackCue</a></code> object represents, in seconds. On setting, the <a href=#text-track-cue-start-time id=text-track-api:text-track-cue-start-time-3>text track
  cue start time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id=text-track-api:texttrackcue-8><a href=#texttrackcue>TextTrackCue</a></code> object's <a href=#text-track-cue id=text-track-api:text-track-cue-17>text track cue</a> is in a <a href=#text-track id=text-track-api:text-track-29>text track</a>'s
  <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-19>list of cues</a>, and that <a href=#text-track id=text-track-api:text-track-30>text track</a> is in
  a <a href=#media-element id=text-track-api:media-element-10>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-7>list of text tracks</a>, and the <a href=#media-element id=text-track-api:media-element-11>media
  element</a>'s <a href=#show-poster-flag id=text-track-api:show-poster-flag>show poster flag</a> is not set, then run the <i id=text-track-api:time-marches-on><a href=#time-marches-on>time marches on</a></i> steps for that <a href=#media-element id=text-track-api:media-element-12>media element</a>.</p>

  <p>The <dfn id=dom-texttrackcue-endtime><code>endTime</code></dfn> attribute, on getting,
  must return the <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-3>text track cue end time</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-18>text track cue</a> that the
  <code id=text-track-api:texttrackcue-9><a href=#texttrackcue>TextTrackCue</a></code> object represents, in seconds. On setting, the <a href=#text-track-cue-end-time id=text-track-api:text-track-cue-end-time-4>text track cue end
  time</a> must be set to the new value, interpreted in seconds; then, if the
  <code id=text-track-api:texttrackcue-10><a href=#texttrackcue>TextTrackCue</a></code> object's <a href=#text-track-cue id=text-track-api:text-track-cue-19>text track cue</a> is in a <a href=#text-track id=text-track-api:text-track-31>text track</a>'s
  <a href=#text-track-list-of-cues id=text-track-api:text-track-list-of-cues-20>list of cues</a>, and that <a href=#text-track id=text-track-api:text-track-32>text track</a> is in
  a <a href=#media-element id=text-track-api:media-element-13>media element</a>'s <a href=#list-of-text-tracks id=text-track-api:list-of-text-tracks-8>list of text tracks</a>, and the <a href=#media-element id=text-track-api:media-element-14>media
  element</a>'s <a href=#show-poster-flag id=text-track-api:show-poster-flag-2>show poster flag</a> is not set, then run the <i id=text-track-api:time-marches-on-2><a href=#time-marches-on>time marches on</a></i> steps for that <a href=#media-element id=text-track-api:media-element-15>media element</a>.</p>

  <p>The <dfn id=dom-texttrackcue-pauseonexit><code>pauseOnExit</code></dfn> attribute, on
  getting, must return true if the <a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag-2>text track cue pause-on-exit flag</a> of the <a href=#text-track-cue id=text-track-api:text-track-cue-20>text
  track cue</a> that the <code id=text-track-api:texttrackcue-11><a href=#texttrackcue>TextTrackCue</a></code> object represents is set; or false otherwise.
  On setting, the <a href=#text-track-cue-pause-on-exit-flag id=text-track-api:text-track-cue-pause-on-exit-flag-3>text track cue pause-on-exit flag</a> must be set if the new value is
  true, and must be unset otherwise.</p>


  <h6 id=cue-events><span class=secno>4.8.12.11.6</span> Event handlers for objects of the text track APIs<a href=#cue-events class=self-link></a></h6>

  <p>The following are the <a id=cue-events:event-handlers href=webappapis.html#event-handlers>event handlers</a> that (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type>event handler event types</a>) that must
  be supported, as <a id=cue-events:event-handler-idl-attributes href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>, by all objects implementing the
  <code id=cue-events:texttracklist><a href=#texttracklist>TextTrackList</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-2>イベントハンドラー</a> </th><th><a id=cue-events:event-handler-event-type-2 href=webappapis.html#event-handler-event-type>イベントハンドラーイベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttracklist-onchange><code>onchange</code></dfn> </td><td> <code id=cue-events:event-media-change><a href=#event-media-change>change</a></code>
    </td></tr><tr><td><dfn id=handler-texttracklist-onaddtrack><code>onaddtrack</code></dfn> </td><td> <code id=cue-events:event-media-addtrack><a href=#event-media-addtrack>addtrack</a></code>
    </td></tr><tr><td><dfn id=handler-texttracklist-onremovetrack><code>onremovetrack</code></dfn> </td><td> <code id=cue-events:event-media-removetrack><a href=#event-media-removetrack>removetrack</a></code>
  </td></tr></table>

  <p>The following are the <a id=cue-events:event-handlers-3 href=webappapis.html#event-handlers>event handlers</a> that (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type-3>event handler event types</a>) that must
  be supported, as <a id=cue-events:event-handler-idl-attributes-2 href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>, by all objects implementing the
  <code id=cue-events:texttrack><a href=#texttrack>TextTrack</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-4>イベントハンドラー</a> </th><th><a id=cue-events:event-handler-event-type-4 href=webappapis.html#event-handler-event-type>イベントハンドラーイベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttrack-oncuechange><code>oncuechange</code></dfn> </td><td> <code id=cue-events:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code>
  </td></tr></table>

  <p>The following are the <a id=cue-events:event-handlers-5 href=webappapis.html#event-handlers>event handlers</a> (and their corresponding <a href=webappapis.html#event-handler-event-type id=cue-events:event-handler-event-type-5>event handler event types</a>) that must
  be supported, as <a id=cue-events:event-handler-idl-attributes-3 href=webappapis.html#event-handler-idl-attributes>event handler IDL attributes</a>, by all objects implementing the
  <code id=cue-events:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code> interface:</p>

  <table><thead><tr><th><a href=webappapis.html#event-handlers id=cue-events:event-handlers-6>イベントハンドラー</a> </th><th><a id=cue-events:event-handler-event-type-6 href=webappapis.html#event-handler-event-type>イベントハンドラーイベント型</a>
   <tbody></th></tr><tr><td><dfn id=handler-texttrackcue-onenter><code>onenter</code></dfn> </td><td> <code id=cue-events:event-media-enter><a href=#event-media-enter>enter</a></code>
    </td></tr><tr><td><dfn id=handler-texttrackcue-onexit><code>onexit</code></dfn> </td><td> <code id=cue-events:event-media-exit><a href=#event-media-exit>exit</a></code>
  </td></tr></table>

  



  <h6 id=best-practices-for-metadata-text-tracks><span class=secno>4.8.12.11.7</span> Best practices for metadata text tracks<a href=#best-practices-for-metadata-text-tracks class=self-link></a></h6>

  <p><i>この節は非規範的である。</i></p>

  <p>テキストトラックは、対話型または拡張されたビューに対して、メディアデータに関連するデータを格納するために使用することができる。 </p>

  <p>たとえば、スポーツ中継を表示するページは、現在のスコアに関する情報を含むだろう。ロボット工学のコンテストがライブストリーミングされていたとする。次のように、画像にスコアを重ねることができる：</p>

  <p><iframe src="data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%0A%3Cstyle%3E%0A%20body%2C%20html%20%7B%20margin%3A%200%3B%20padding%3A%200%3B%20overflow%3A%20hidden%3B%20%7D%0A%20div%20%7B%20width%3A%20600px%3B%20height%3A%20400px%3B%20position%3A%20relative%3B%20%7D%0A%20p%20%7B%20position%3A%20absolute%3B%20top%3A%200%3B%20margin%3A%200.25em%3B%20font%3A%20small-caps%20900%202em%20sans-serif%3B%20text-shadow%3A%20white%200%200%204px%3B%20%7D%0A%20span%20%7B%20display%3A%20block%3B%20%7D%0A%20.left%20%7B%20color%3A%20red%3B%20left%3A%200%3B%20text-align%3A%20left%3B%20%7D%0A%20.right%20%7B%20color%3A%20blue%3B%20right%3A%200%3B%20text-align%3A%20right%3B%20%7D%0A%20.middle%20%7B%20color%3A%20white%3B%20top%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%20text-align%3A%20center%3B%20text-shadow%3A%20black%200%200%204px%3B%20%7D%0A%20.middle%20span%20%7B%20display%3A%20inline-block%3B%20margin%3A%200%201em%3B%20font-size%3A%200.75em%3B%20text-transform%3A%20uppercase%3B%20%7D%0A%3C%2Fstyle%3E%0A%3Cdiv%3E%0A%20%3Cimg%20src%3D%22https%3A%2F%2Fhtml.spec.whatwg.org%2Fimages%2Frobots.jpeg%22%3E%0A%20%3Cp%20class%3D%22score%20left%22%3E%3Cspan%3ERed%20Alliance%3C%2Fspan%3E%20%3Cspan%3E78%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20right%22%3E%3Cspan%3EBlue%20Alliance%3C%2Fspan%3E%20%3Cspan%3E66%3C%2Fspan%3E%3C%2Fp%3E%0A%20%3Cp%20class%3D%22score%20middle%22%3E%3Cspan%3EQual%20Match%2037%3C%2Fspan%3E%20%3Cspan%3EFriday%2014%3A21%3C%2Fspan%3E%0A%3C%2Fdiv%3E" width=600 height=400></iframe>

  <p>ユーザーがビデオ内の任意のポイントをシークするたびに、スコア表示を正しく描画させるために、メタデータテキストトラックキューは、スコアに適切であるようにする必要がある。たとえば、上のフレームにおいて、試合数を与える試合の長さに続く1つのキュー、青の同盟のスコアが変化するまで続く1つのキュー、そして赤の同盟のスコアが変化するまで続く1つのキューがおそらくあるだろう。ビデオがちょうどライブイベントのストリームである場合、右下における時間は、キューに基づくよりもむしろ、おそらく自動的に現在のビデオの時間から派生になる。しかし、ビデオが単なるハイライトだった場合、それはまたキューに記載されるかもしれない。</p>

  <p>次は、このようなものの断片がWebVTTファイル内のようになるものを示す：</p>

  <pre>WEBVTT

...

05:10:00.000 --&gt; 05:12:15.000
matchtype:qual
matchnumber:37

...

05:11:02.251 --&gt; 05:11:17.198
red:78

05:11:03.672 --&gt; 05:11:54.198
blue:66

05:11:17.198 --&gt; 05:11:25.912
red:80

05:11:25.912 --&gt; 05:11:26.522
red:83

05:11:26.522 --&gt; 05:11:26.982
red:86

05:11:26.982 --&gt; 05:11:27.499
red:89

...</pre>

  <p>ここで重要なことは、該当するイベントが適用する時間の長さに及ぶキューに情報が与えられることに注目することである。代わりに、スコアが変化する際に、スコアがゼロ長さ（または非常に短い、ほぼゼロ長さ）のキューとして指定された場合、
たとえば05:11:17.198で"red+2"、05:11:25.912で"red+3"などと言ったときに、問題は発生する。主に、スクリプトが一切の通知を見逃されていないことを確認するためにキューのリスト全体を渡り歩く必要があるため、シークは実装がはるかに困難である。キューが短い場合、スクリプトが明確にキューをリッスンしない限り、スクリプトはキューがアクティブであることを見ることはない。</p>

  <p>この方法でキューを使用する場合、著者は、現在の注釈を更新するために<code id=best-practices-for-metadata-text-tracks:event-media-cuechange><a href=#event-media-cuechange>cuechange</a></code>イベントを使用することを勧める。（具体的には、それはキューが変更されていない場合でも、仕事をすることを必要とするように<code id=best-practices-for-metadata-text-tracks:event-media-timeupdate><a href=#event-media-timeupdate>timeupdate</a></code>イベントを使用することがあまり適切でなく、そしてより重要なことは、<code id=best-practices-for-metadata-text-tracks:event-media-timeupdate-2><a href=#event-media-timeupdate>timeupdate</a></code>イベントがレート制限されているため、メタデータキューがアクティブになる場合、かつ表示が更新される場合、間のより高いレイテンシーを導入する。）</p>



  <h5 id=identifying-a-track-kind-through-a-url><span class=secno>4.8.12.12</span> URLを通してトラックの種類を識別する<a href=#identifying-a-track-kind-through-a-url class=self-link></a></h5>

  <p><code id=identifying-a-track-kind-through-a-url:dom-audiotrack-kind><a href=#dom-audiotrack-kind>AudioTrack.kind</a></code>または<code id=identifying-a-track-kind-through-a-url:dom-videotrack-kind><a href=#dom-videotrack-kind>VideoTrack.kind</a></code>IDL属性の戻り値を識別する、または<a href=#text-track-kind id=identifying-a-track-kind-through-a-url:text-track-kind>テキストトラックの種類</a>を識別するための<a id=identifying-a-track-kind-through-a-url:url href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を必要とするその他の仕様またはフォーマットは、<code id=identifying-a-track-kind-through-a-url:about:html-kind><a href=urls-and-fetching.html#about:html-kind>about:html-kind</a></code> <a id=identifying-a-track-kind-through-a-url:url-2 href=https://triple-underscore.github.io/URL-ja.html#concept-url data-x-internal=url>URL</a>を使用しなければならない。</p>



  <h5 id=user-interface><span class=secno>4.8.12.13</span> ユーザーインターフェイス<a href=#user-interface class=self-link></a></h5>

  <p><dfn id=attr-media-controls><code>controls</code></dfn>属性は<a id=user-interface:boolean-attribute href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>である。存在する場合、著者がスクリプト化されたコントローラーを提供しておらず、ユーザーエージェントに独自のコントロールセットを提供したいと考えていることを示す。</p>

  

  <p>If the attribute is present, or if <a href=webappapis.html#concept-n-noscript id=user-interface:concept-n-noscript>scripting is
  disabled</a> for the <a href=#media-element id=user-interface:media-element>media element</a>, then the user agent should <dfn id=expose-a-user-interface-to-the-user>expose a user
  interface to the user</dfn>. This user interface should include features to begin playback, pause
  playback, seek to an arbitrary position in the content (if the content supports arbitrary
  seeking), change the volume, change the display of closed captions or embedded sign-language
  tracks, select different audio tracks or turn on audio descriptions, and show the media content in
  manners more suitable to the user (e.g. fullscreen video or in an independent resizable window).
  Other controls may also be made available.</p>

  <p>Even when the attribute is absent, however, user agents may provide controls to affect playback
  of the media resource (e.g. play, pause, seeking, track selection, and volume controls), but such
  features should not interfere with the page's normal rendering. For example, such features could
  be exposed in the <a href=#media-element id=user-interface:media-element-2>media element</a>'s context menu, platform media keys, or a remote
  control. The user agent may implement this simply by <a href=#expose-a-user-interface-to-the-user id=user-interface:expose-a-user-interface-to-the-user>exposing a user interface to the user</a> as described above (as if the <code id=user-interface:attr-media-controls><a href=#attr-media-controls>controls</a></code> attribute was present).</p>

  <p>If the user agent <a href=#expose-a-user-interface-to-the-user id=user-interface:expose-a-user-interface-to-the-user-2>exposes a user interface to
  the user</a> by displaying controls over the <a href=#media-element id=user-interface:media-element-3>media element</a>, then the user agent
  should suppress any user interaction events while the user agent is interacting with this
  interface. (For example, if the user clicks on a video's playback control, <code id=user-interface:event-mousedown><a data-x-internal=event-mousedown href=https://w3c.github.io/uievents/#event-type-mousedown>mousedown</a></code> events and so forth would not simultaneously be fired at
  elements on the page.)</p>

  <p>Where possible (specifically, for starting, stopping, pausing, and unpausing playback, for
  seeking, for changing the rate of playback, for fast-forwarding or rewinding, for listing,
  enabling, and disabling text tracks, and for muting or changing the volume of the audio), user
  interface features exposed by the user agent must be implemented in terms of the DOM API described
  above, so that, e.g., all the same events fire.</p>

  <p>Features such as fast-forward or rewind must be implemented by only changing the <code>playbackRate</code> attribute (and not the <code>defaultPlaybackRate</code>
  attribute).</p>

  <p>Seeking must be implemented in terms of <a href=#dom-media-seek id=user-interface:dom-media-seek>seeking</a> to the
  requested position in the <a href=#media-element id=user-interface:media-element-4>media element</a>'s <a href=#media-timeline id=user-interface:media-timeline>media timeline</a>. For media
  resources where seeking to an arbitrary position would be slow, user agents are encouraged to use
  the <i>approximate-for-speed</i> flag when seeking in response to the user manipulating an
  approximate position interface such as a seek bar.</p>

  <p>The <dfn id=dom-media-controls><code>controls</code></dfn> IDL attribute must
  <a id=user-interface:reflect href=common-dom-interfaces.html#reflect>reflect</a> the content attribute of the same name.</p>

  <hr>

  

  <dl class=domintro><dt><var>media</var> . <code id=dom-media-volume-dev><a href=#dom-media-volume>volume</a></code> [ = <var>value</var> ]<dd>

    <p>0.0から1.0までの範囲の数字として、現在の再生音量を返す。ここで0.0は最小音量で1.0は最大音量である。</p>

    <p>音量を変更する設定が可能である。</p>

    <p>新しい値が0.0から1.0の範囲でない場合、<a id=user-interface:indexsizeerror href=https://triple-underscore.github.io/WebIDL-ja.html#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=user-interface:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>を投げる。 </p>

   <dt><var>media</var> . <code id=dom-media-muted-dev><a href=#dom-media-muted>muted</a></code> [ = <var>value</var> ]<dd>

    <p><code id=user-interface:dom-media-volume><a href=#dom-media-volume>volume</a></code>属性を上書きし、音声がミュートである場合trueを返し、<code id=user-interface:dom-media-volume-2><a href=#dom-media-volume>volume</a></code>属性が無視される場合、falseを返す。</p>

    <p>オーディオがミュートであるかどうかを変更する設定が可能である。</p>

   </dl>

  

  <p>A <a href=#media-element id=user-interface:media-element-5>media element</a> has a <dfn id=concept-media-volume>playback volume</dfn>, which is a fraction in the range 0.0 (silent) to 1.0 (loudest).
  Initially, the volume should be 1.0, but user agents may remember the last set value across
  sessions, on a per-site basis or otherwise, so the volume may start at other values.</p>

  <p>The <dfn id=dom-media-volume><code>volume</code></dfn> IDL attribute must return the
  <a href=#concept-media-volume id=user-interface:concept-media-volume>playback volume</a> of any audio portions of the
  <a href=#media-element id=user-interface:media-element-6>media element</a>. On setting, if the new value is in the range 0.0 to 1.0 inclusive, the
  <a href=#media-element id=user-interface:media-element-7>media element</a>'s <a href=#concept-media-volume id=user-interface:concept-media-volume-2>playback volume</a> must be
  set to the new value. If the new value is outside the range 0.0 to 1.0 inclusive, then, on
  setting, an <a id=user-interface:indexsizeerror-2 href=https://triple-underscore.github.io/WebIDL-ja.html#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=user-interface:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code> must be thrown
  instead.</p>

  <p>A <a href=#media-element id=user-interface:media-element-8>media element</a> can also be <dfn id=concept-media-muted>muted</dfn>. If
  anything is muting the element, then it is muted. (For example, when the <a href=#direction-of-playback id=user-interface:direction-of-playback>direction of
  playback</a> is backwards, the element is muted.)</p>

  <p>The <dfn id=dom-media-muted><code>muted</code></dfn> IDL attribute must return the value
  to which it was last set. When a <a href=#media-element id=user-interface:media-element-9>media element</a> is created, if the element has a <code id=user-interface:attr-media-muted><a href=#attr-media-muted>muted</a></code> content attribute specified, then the <code id=user-interface:dom-media-muted><a href=#dom-media-muted>muted</a></code> IDL attribute should be set to true; otherwise, the user
  agents may set the value to the user's preferred value (e.g. remembering the last set value across
  sessions, on a per-site basis or otherwise). While the <code id=user-interface:dom-media-muted-2><a href=#dom-media-muted>muted</a></code>
  IDL attribute is set to true, the <a href=#media-element id=user-interface:media-element-10>media element</a> must be <a href=#concept-media-muted id=user-interface:concept-media-muted>muted</a>.</p>

  <p>Whenever either of the values that would be returned by the <code id=user-interface:dom-media-volume-3><a href=#dom-media-volume>volume</a></code> and <code id=user-interface:dom-media-muted-3><a href=#dom-media-muted>muted</a></code> IDL
  attributes change, the user agent must <a id=user-interface:queue-a-task href=webappapis.html#queue-a-task>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=user-interface:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named <code id=user-interface:event-media-volumechange><a href=#event-media-volumechange>volumechange</a></code> at the <a href=#media-element id=user-interface:media-element-11>media element</a>. Then, if
  the <a href=#media-element id=user-interface:media-element-12>media element</a> is not <a href=#allowed-to-play id=user-interface:allowed-to-play>allowed to play</a>, the user agent must run the
  <a href=#internal-pause-steps id=user-interface:internal-pause-steps>internal pause steps</a> for the <a href=#media-element id=user-interface:media-element-13>media element</a>.</p>

  <p>An element's <dfn id=effective-media-volume>effective media volume</dfn> is determined as follows:</p>

  <ol><li><p>If the user has indicated that the user agent is to override the volume of the element,
   then return the volume desired by the user.</li><li><p>If the element's audio output is <a href=#concept-media-muted id=user-interface:concept-media-muted-2>muted</a>, then
   return zero.</li><li><p>Let <var>volume</var> be the <a href=#concept-media-volume id=user-interface:concept-media-volume-3>playback
   volume</a> of the audio portions of the <a href=#media-element id=user-interface:media-element-14>media element</a>, in range 0.0 (silent) to
   1.0 (loudest).</li><li><p>Return <var>volume</var>, interpreted relative to the range 0.0 to 1.0, with 0.0 being
   silent, and 1.0 being the loudest setting, values in between increasing in loudness. The range
   need not be linear. The loudest setting may be lower than the system's loudest possible setting;
   for example the user could have set a maximum volume.</li></ol>

  

  <p><a href=#media-element id=user-interface:media-element-15>メディア要素</a>の<dfn id=attr-media-muted><code>muted</code></dfn>属性は、潜在的にユーザー設定を上書きし、<a href=#media-resource id=user-interface:media-resource>メディアリソース</a>に属するオーディオ出力のデフォルトの状態を制御する<a id=user-interface:boolean-attribute-2 href=common-microsyntaxes.html#boolean-attribute>真偽属性</a>である。</p>

  

  <p>The <dfn id=dom-media-defaultmuted><code>defaultMuted</code></dfn> IDL attribute must
  <a id=user-interface:reflect-2 href=common-dom-interfaces.html#reflect>reflect</a> the <code id=user-interface:attr-media-muted-2><a href=#attr-media-muted>muted</a></code> content attribute.</p>

  

  <p class=note>この属性は動的効果（要素のデフォルトの状態のみを制御する）を持たない。</p>

  <div class=example>

   <p>このビデオ（広告）は自動再生するが、ユーザーを悩ますのを避けるために音なしで再生して、ユーザーが音声をオンにできるようにする。ユーザーの操作なしで消音できない場合、ユーザーエージェントは映像を一時停止することができる。</p>

   <pre>&lt;video src="adverts.cgi?kind=video" controls autoplay loop muted&gt;&lt;/video&gt;</pre>

  </div>




  <h5 id=time-ranges><span class=secno>4.8.12.14</span> 時間範囲<a href=#time-ranges class=self-link></a></h5>

  <p><code id=time-ranges:timeranges><a href=#timeranges>TimeRanges</a></code>インターフェイスを実装したオブジェクトは、時間の範囲（期間）のリストを表す。</p>

  <pre class=idl>[Exposed=Window]
interface <dfn id=timeranges>TimeRanges</dfn> {
  readonly attribute unsigned long <a href=#dom-timeranges-length id=time-ranges:dom-timeranges-length>length</a>;
  double <a href=#dom-timeranges-start id=time-ranges:dom-timeranges-start>start</a>(unsigned long index);
  double <a href=#dom-timeranges-end id=time-ranges:dom-timeranges-end>end</a>(unsigned long index);
};</pre>

  <dl class=domintro><dt><var>media</var> . <code id=dom-timeranges-length-dev><a href=#dom-timeranges-length>length</a></code><dd>

    <p>オブジェクト内の範囲の数を返す。</p>

   <dt><var>time</var> = <var>media</var> . <code id=dom-timeranges-start-dev><a href=#dom-timeranges-start>start</a></code>(<var>index</var>)<dd>

    <p>指定されたインデックスをもつ範囲の開始時刻を返す。</p>

    <p>インデックスが範囲外の場合<a id=time-ranges:indexsizeerror href=https://triple-underscore.github.io/WebIDL-ja.html#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=time-ranges:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>を投げる。</p>

   <dt><var>time</var> = <var>media</var> . <code id=dom-timeranges-end-dev><a href=#dom-timeranges-end>end</a></code>(<var>index</var>)<dd>

    <p>指定されたインデックスをもつ範囲の終了時刻を返す。</p>

    <p>インデックスが範囲外の場合<a id=time-ranges:indexsizeerror-2 href=https://triple-underscore.github.io/WebIDL-ja.html#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=time-ranges:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>を投げる。</p>

   </dl>

  

  <p>The <dfn id=dom-timeranges-length><code>length</code></dfn> IDL attribute must return the
  number of ranges represented by the object.</p>

  <p>The <dfn id=dom-timeranges-start><code>start(<var>index</var>)</code></dfn>
  method must return the position of the start of the <var>index</var>th range represented
  by the object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>The <dfn id=dom-timeranges-end><code>end(<var>index</var>)</code></dfn> method
  must return the position of the end of the <var>index</var>th range represented by the
  object, in seconds measured from the start of the timeline that the object covers.</p>

  <p>These methods must throw <a id=time-ranges:indexsizeerror-3 href=https://triple-underscore.github.io/WebIDL-ja.html#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=time-ranges:domexception-3><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code>s
  if called with an <var>index</var> argument greater than or equal to the number of ranges
  represented by the object.</p>

  <p>When a <code id=time-ranges:timeranges-2><a href=#timeranges>TimeRanges</a></code> object is said to be a
  <dfn id=normalised-timeranges-object>normalized <code>TimeRanges</code>
  object</dfn>, the ranges it represents must obey the following criteria:</p>

  <ul><li>The start of a range must be greater than the end of all earlier ranges.</li><li>The start of a range must be less than or equal to the end of that same range.</li></ul>

  <p>In other words, the ranges in such an object are ordered, don't overlap, and don't touch
  (adjacent ranges are folded into one bigger range). A range can be empty (referencing just a
  single moment in time), e.g. to indicate that only one frame is currently buffered in the case
  that the user agent has discarded the entire <a href=#media-resource id=time-ranges:media-resource>media resource</a> except for the current
  frame, when a <a href=#media-element id=time-ranges:media-element>media element</a> is paused.</p>

  <p>Ranges in a <code id=time-ranges:timeranges-3><a href=#timeranges>TimeRanges</a></code> object must be inclusive.</p>

  <p class=example>Thus, the end of a range would be equal to the start of a following adjacent
  (touching but not overlapping) range. Similarly, a range covering a whole timeline anchored at
  zero would have a start equal to zero and an end equal to the duration of the timeline.</p>

  <p>The timelines used by the objects returned by the <code id=time-ranges:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code>, <code id=time-ranges:dom-media-seekable><a href=#dom-media-seekable>seekable</a></code> and
  <code id=time-ranges:dom-media-played><a href=#dom-media-played>played</a></code> IDL attributes of <a href=#media-element id=time-ranges:media-element-2>media
  elements</a> must be that element's <a href=#media-timeline id=time-ranges:media-timeline>media timeline</a>.</p>

  


  <h5 id=the-trackevent-interface><span class=secno>4.8.12.15</span> The <code id=the-trackevent-interface:trackevent><a href=#trackevent>TrackEvent</a></code> interface<a href=#the-trackevent-interface class=self-link></a></h5>

  <pre class=idl>[Exposed=Window,
 Constructor(DOMString type, optional <a href=#trackeventinit id=the-trackevent-interface:trackeventinit>TrackEventInit</a> eventInitDict)]
interface <dfn id=trackevent>TrackEvent</dfn> : <a id=the-trackevent-interface:event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event data-x-internal=event>Event</a> {
  readonly attribute (<a href=#videotrack id=the-trackevent-interface:videotrack>VideoTrack</a> or <a href=#audiotrack id=the-trackevent-interface:audiotrack>AudioTrack</a> or <a href=#texttrack id=the-trackevent-interface:texttrack>TextTrack</a>)? <a href=#dom-trackevent-track id=the-trackevent-interface:dom-trackevent-track>track</a>;
};

dictionary <dfn id=trackeventinit>TrackEventInit</dfn> : <a id=the-trackevent-interface:eventinit href=https://triple-underscore.github.io/DOM4-ja.html#dictdef-eventinit data-x-internal=eventinit>EventInit</a> {
  (<a href=#videotrack id=the-trackevent-interface:videotrack-2>VideoTrack</a> or <a href=#audiotrack id=the-trackevent-interface:audiotrack-2>AudioTrack</a> or <a href=#texttrack id=the-trackevent-interface:texttrack-2>TextTrack</a>)? track = null;
};</pre>

  <dl class=domintro><dt><var>event</var> . <code id=dom-trackevent-track-dev><a href=#dom-trackevent-track>track</a></code><dd>

    <p>イベントが関連するトラックオブジェクト（<code id=the-trackevent-interface:texttrack-3><a href=#texttrack>TextTrack</a></code>、<code id=the-trackevent-interface:audiotrack-3><a href=#audiotrack>AudioTrack</a></code>、または<code id=the-trackevent-interface:videotrack-3><a href=#videotrack>VideoTrack</a></code>）を返す。</p>

   </dl>

  

  <p>The <dfn id=dom-trackevent-track><code>track</code></dfn> attribute must return the value
  it was initialized to. It represents the context information for the event.</p>

  



  <h5 id=mediaevents><span class=secno>4.8.12.16</span> Events summary<a href=#mediaevents class=self-link></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>上記の処理モデルの一部として、<a href=#media-element id=mediaevents:media-element>メディア要素</a>で以下のイベントが発火する：</p>

  <table><thead><tr><th>イベント名
     </th><th>インターフェイス
     </th><th>発火条件
     </th><th>前提条件

   <tbody></th></tr><tr><td><dfn id=event-media-loadstart><code>loadstart</code></dfn>

     </td><td><code id=mediaevents:event><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#concept-media-load-algorithm id=mediaevents:concept-media-load-algorithm>リソース選択アルゴリズム</a>の一部として、<a href=#media-data id=mediaevents:media-data>メディアデータ</a>を探し始める。

     </td><td><code id=mediaevents:dom-media-networkstate><a href=#dom-media-networkstate> networkState</a></code>が<code id=mediaevents:dom-media-network_loading><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-progress><code>progress</code></dfn>

     </td><td><code id=mediaevents:event-2><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-2>メディアデータ</a>をフェッチしている。

     </td><td><code id=mediaevents:dom-media-networkstate-2><a href=#dom-media-networkstate> networkState</a></code>が<code id=mediaevents:dom-media-network_loading-2><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-suspend><code>suspend</code></dfn>

     </td><td><code id=mediaevents:event-3><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、意図的に現在の<a href=#media-data id=mediaevents:media-data-3>メディアデータ</a>をフェッチしていない。

     </td><td><code id=mediaevents:dom-media-networkstate-3><a href=#dom-media-networkstate> networkState</a></code>は<code id=mediaevents:dom-media-network_idle><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>と等しい

    </td></tr><tr><td><dfn id=event-media-abort><code>abort</code></dfn>

     </td><td><code id=mediaevents:event-4><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、完全にダウンロードされる前に<a href=#media-data id=mediaevents:media-data-4>メディアデータ</a>のフェッチを停止するが、エラーによるものではない。

     </td><td><code id=mediaevents:dom-media-error><a href=#dom-media-error>error</a></code>は、コード<code id=mediaevents:dom-mediaerror-media_err_aborted><a href=#dom-mediaerror-media_err_aborted>MEDIA_ERR_ABORTED</a></code>をもつオブジェクトである。<code id=mediaevents:dom-media-networkstate-4><a href=#dom-media-networkstate> networkState</a></code>は、ダウンロードが中止された時期に応じて、<code id=mediaevents:dom-media-network_empty><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>または<code id=mediaevents:dom-media-network_idle-2><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>のいずれかに等しい。

    </td></tr><tr><td><dfn id=event-media-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-5><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><a href=#media-data id=mediaevents:media-data-5>メディアデータ</a>のフェッチ中またはリソースの種類がサポートされるメディアフォーマットでない間ににエラーが発生する。

     </td><td><code id=mediaevents:dom-media-error-2><a href=#dom-media-error>error</a></code>は、コード<code id=mediaevents:dom-mediaerror-media_err_network><a href=#dom-mediaerror-media_err_network>MEDIA_ERR_NETWORK</a></code>以上をもつオブジェクトである。<code id=mediaevents:dom-media-networkstate-5><a href=#dom-media-networkstate> networkState</a></code>は、ダウンロードが中止された時期に応じて、<code id=mediaevents:dom-media-network_empty-2><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>または<code id=mediaevents:dom-media-network_idle-3><a href=#dom-media-network_idle>NETWORK_IDLE</a></code>のいずれかに等しい。

    </td></tr><tr><td><dfn id=event-media-emptied><code>emptied</code></dfn>

     </td><td><code id=mediaevents:event-6><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>以前<code id=mediaevents:dom-media-network_empty-3><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>状態でなかった<code id=mediaevents:dom-media-networkstate-6><a href=#dom-media-networkstate>networkState</a></code>である<a href=#media-element id=mediaevents:media-element-2>メディア要素</a>が、その状態にちょうど切り替わった（ロード中に致命的なエラーが発生したため、<a href=#concept-media-load-algorithm id=mediaevents:concept-media-load-algorithm-2>リソース選択アルゴリズム</a>がすでに実行している間に<code id=mediaevents:dom-media-load><a href=#dom-media-load>load()</a></code>メソッドが呼び出されたためのいずれか）。

     </td><td><code id=mediaevents:dom-media-networkstate-7><a href=#dom-media-networkstate>networkState</a></code>は<code id=mediaevents:dom-media-network_empty-4><a href=#dom-media-network_empty>NETWORK_EMPTY</a></code>であり、すべてのIDL属性は、初期状態である。

    </td></tr><tr><td><dfn id=event-media-stalled><code>stalled</code></dfn>

     </td><td><code id=mediaevents:event-7><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-6>メディアデータ</a>をフェッチしようとしているが、データが突発的に用意されない。

     </td><td><code id=mediaevents:dom-media-networkstate-8><a href=#dom-media-networkstate>networkState</a></code>は<code id=mediaevents:dom-media-network_loading-3><a href=#dom-media-network_loading>NETWORK_LOADING</a></code>である。

   <tbody></td></tr><tr><td><dfn id=event-media-loadedmetadata><code>loadedmetadata</code></dfn>

     </td><td><code id=mediaevents:event-8><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、ちょうど<a href=#media-resource id=mediaevents:media-resource>メディアリソース</a>と<a href=#the-text-tracks-are-ready id=mediaevents:the-text-tracks-are-ready>テキストトラックの準備</a>の期間と寸法を決定した。

     </td><td><code id=mediaevents:dom-media-readystate><a href=#dom-media-readystate>readyState</a></code>は初期時間に対して新たに<code id=mediaevents:dom-media-have_metadata><a href=#dom-media-have_metadata>HAVE_METADATA</a></code>に等しいかそれ以上である。

    </td></tr><tr><td><dfn id=event-media-loadeddata><code>loadeddata</code></dfn>

     </td><td><code id=mediaevents:event-9><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、初期時間に対して<a href=#current-playback-position id=mediaevents:current-playback-position>現在の再生位置</a>で<a href=#media-data id=mediaevents:media-data-7>メディアデータ</a>をレンダリングできる。

     </td><td><code id=mediaevents:dom-media-readystate-2><a href=#dom-media-readystate>readyState</a></code>は、初期時間に対して新たに<code id=mediaevents:dom-media-have_current_data><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>以上に増加した。

    </td></tr><tr><td><dfn id=event-media-canplay><code>canplay</code></dfn>

     </td><td><code id=mediaevents:event-10><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、<a href=#media-data id=mediaevents:media-data-8>メディアデータ</a>の再生を再開できるが、再生を今すぐ開始されることになったかどうかを推定し、<a href=#media-resource id=mediaevents:media-resource-2>メディアリソース</a>は、コンテンツの追加のバッファリングに対して停止させることなく、終わりに現在の再生レートでレンダリングできなかった。

     </td><td><code id=mediaevents:dom-media-readystate-3><a href=#dom-media-readystate>readyState</a></code>は、新たに<code id=mediaevents:dom-media-have_future_data><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>以上に増加した。

    </td></tr><tr><td><dfn id=event-media-canplaythrough><code>canplaythrough</code></dfn>

     </td><td><code id=mediaevents:event-11><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>ユーザーエージェントは、再生が今すぐ開始されることになったかどうかを推定し、<a href=#media-resource id=mediaevents:media-resource-3>メディアリソース</a>は追加のバッファリングに対して停止することなく、現在の再生レートの最後までのすべての方法でレンダリングできる。

     </td><td><code id=mediaevents:dom-media-readystate-4><a href=#dom-media-readystate>readyState</a></code>は最近の<code id=mediaevents:dom-media-have_enough_data><a href=#dom-media-have_enough_data>HAVE_ENOUGH_DATA</a></code>に等しい。

    </td></tr><tr><td><dfn id=event-media-playing><code>playing</code></dfn>

     </td><td><code id=mediaevents:event-12><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>再生は、<a href=#media-data id=mediaevents:media-data-9>メディアデータ</a>の不足のために、一時停止または遅延された後に開始する準備ができている。

     </td><td><code id=mediaevents:dom-media-readystate-5><a href=#dom-media-readystate>readyState</a></code>が新たに等しいまたは<code id=mediaevents:dom-media-have_future_data-2><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>を超えており、<code id=mediaevents:dom-media-paused><a href=#dom-media-paused>paused</a></code>はfalseであり、または<code id=mediaevents:dom-media-paused-2><a href=#dom-media-paused>paused</a></code>が新たにfalseであり、<code id=mediaevents:dom-media-readystate-6><a href=#dom-media-readystate>readyState</a></code>が等しいか、または<code id=mediaevents:dom-media-have_future_data-3><a href=#dom-media-have_future_data>HAVE_FUTURE_DATA</a></code>より大きい。たとえこのイベントが発火したとしても、要素は依然として<a href=#potentially-playing id=mediaevents:potentially-playing>潜在的に再生</a>されないかもしれない。たとえば、要素が<a href=#paused-for-user-interaction id=mediaevents:paused-for-user-interaction>ユーザーとの対話のために一時停止</a>または<a href=#paused-for-in-band-content id=mediaevents:paused-for-in-band-content>帯域内のコンテンツを一時停止</a>される場合。

    </td></tr><tr><td><dfn id=event-media-waiting><code>waiting</code></dfn>

     </td><td><code id=mediaevents:event-13><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>次のフレームが利用できないため、再生が停止したが、ユーザーエージェントは、そのフレームがやがて利用できるようになると予想する。

     </td><td><code id=mediaevents:dom-media-readystate-7><a href=#dom-media-readystate>readyState</a></code>が等しいか、または<code id=mediaevents:dom-media-have_current_data-2><a href=#dom-media-have_current_data>HAVE_CURRENT_DATA</a></code>未満であり、<code id=mediaevents:dom-media-paused-3><a href=#dom-media-paused>paused</a></code>はfalseである。<code id=mediaevents:dom-media-seeking><a href=#dom-media-seeking>seeking</a></code>はtrueである、または<a href=#current-playback-position id=mediaevents:current-playback-position-2>現在の再生位置</a>は<code id=mediaevents:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code>内の領域のいずれかに含まれていないかのいずれか。再生が<code id=mediaevents:dom-media-paused-4><a href=#dom-media-paused>paused</a></code>がfalseでなしにその他の理由で停止することは可能であるが、それらの理由はこのイベントは発火しない（そしてそのような状況が解決するときに、別々の<code id=mediaevents:event-media-playing><a href=#event-media-playing>playing</a></code>イベントがどちらか発火しない）：たとえば、<a href=#ended-playback id=mediaevents:ended-playback>再生が終了</a>する、または再生が<a href=#stopped-due-to-errors id=mediaevents:stopped-due-to-errors>エラーにより停止</a>される、または要素が<a href=#paused-for-user-interaction id=mediaevents:paused-for-user-interaction-2>ユーザーとの対話のために一時停止</a>または<a href=#paused-for-in-band-content id=mediaevents:paused-for-in-band-content-2>帯域内コンテンツのために一時停止</a>している。

   <tbody></td></tr><tr><td><dfn id=event-media-seeking><code>seeking</code></dfn>

     </td><td><code id=mediaevents:event-14><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-seeking-2><a href=#dom-media-seeking>seeking</a></code> IDL属性がtrueに変更され、かつユーザーエージェントが新しい位置を探し始めている。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-seeked><code>seeked</code></dfn>

     </td><td><code id=mediaevents:event-15><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><a href=#current-playback-position id=mediaevents:current-playback-position-3>current playback position</a>が変更された後に、<code id=mediaevents:dom-media-seeking-3><a href=#dom-media-seeking>seeking</a></code> IDL属性がfalseに変更された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-ended><code>ended</code></dfn>

     </td><td><code id=mediaevents:event-16><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><a href=#media-resource id=mediaevents:media-resource-4>メディアリソース</a>の終わりに達したため、再生が停止した。

     </td><td><code id=mediaevents:dom-media-currenttime><a href=#dom-media-currenttime>currentTime</a></code>は、<a href=#media-resource id=mediaevents:media-resource-5>メディアリソース</a>の最後に等しく、<code id=mediaevents:dom-media-ended><a href=#dom-media-ended>ended</a></code>はtrueである。

   <tbody></td></tr><tr><td><dfn id=event-media-durationchange><code>durationchange</code></dfn>

     </td><td><code id=mediaevents:event-17><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-duration><a href=#dom-media-duration>duration</a></code>属性はちょうど更新された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-timeupdate><code>timeupdate</code></dfn>

     </td><td><code id=mediaevents:event-18><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><a href=#current-playback-position id=mediaevents:current-playback-position-4>現在の再生位置</a>が、通常の再生の一部として、または、たとえば不連続的に、特に興味深い方法で変更された。

     </td><td>

    </td></tr><tr><td><dfn id=event-media-play><code>play</code></dfn>

     </td><td><code id=mediaevents:event-19><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>要素はもはや一時停止でない。<code id=mediaevents:dom-media-play><a href=#dom-media-play>play()</a></code>メソッドが返された後、または<code id=mediaevents:attr-media-autoplay><a href=#attr-media-autoplay>autoplay</a></code>属性を開始する再生を起こす際に発火した。

     </td><td><code id=mediaevents:dom-media-paused-5><a href=#dom-media-paused>paused</a></code>は、新たにfalseである。

    </td></tr><tr><td><dfn id=event-media-pause><code>pause</code></dfn>

     </td><td><code id=mediaevents:event-20><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>要素が一時停止された。<code id=mediaevents:dom-media-pause><a href=#dom-media-pause>pause()</a></code>メソッドが返された後に発火した。

     </td><td><code id=mediaevents:dom-media-paused-6><a href=#dom-media-paused>paused</a></code>は、新たにtrueである。

    </td></tr><tr><td><dfn id=event-media-ratechange><code>ratechange</code></dfn>

     </td><td><code id=mediaevents:event-21><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-defaultplaybackrate><a href=#dom-media-defaultplaybackrate> defaultPlaybackRate</a></code>または<code id=mediaevents:dom-media-playbackrate><a href=#dom-media-playbackrate> playbackRate</a></code>属性が更新されたばかりのいずれか。

     </td><td>

   <tbody></td></tr><tr><td><dfn id=event-media-resize><code>resize</code></dfn>

     </td><td><code id=mediaevents:event-22><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><code id=mediaevents:dom-video-videowidth><a href=#dom-video-videowidth>videoWidth</a></code>と<code id=mediaevents:dom-video-videoheight><a href=#dom-video-videoheight>videoHeight</a></code>属性のいずれかまたは両方がちょうど更新されている。

     </td><td><a href=#media-element id=mediaevents:media-element-3>メディア要素</a>は<code id=mediaevents:the-video-element><a href=#the-video-element>video</a></code>要素である。<code id=mediaevents:dom-media-readystate-8><a href=#dom-media-readystate>readyState</a></code>は<code id=mediaevents:dom-media-have_nothing><a href=#dom-media-have_nothing>HAVE_NOTHING</a></code>でない。

    </td></tr><tr><td><dfn id=event-media-volumechange><code>volumechange</code></dfn>

     </td><td><code id=mediaevents:event-23><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><code id=mediaevents:dom-media-volume><a href=#dom-media-volume>volume</a></code>属性または<code id=mediaevents:dom-media-muted><a href=#dom-media-muted>muted</a></code>属性のいずれかが変更された。関連する属性のセッターが返された後に発火した。

     </td><td>

  </td></tr></table>


  <p>次のイベントは<code id=mediaevents:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>要素で発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェイス

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-source-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-24><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td><a href=#media-data id=mediaevents:media-data-10>メディアデータ</a>のフェッチ中またはリソースの種類がサポートされるメディアフォーマットでない間ににエラーが発生する。

  </td></tr></table>


  <p><code id=mediaevents:audiotracklist><a href=#audiotracklist>AudioTrackList</a></code>、<code id=mediaevents:videotracklist><a href=#videotracklist>VideoTrackList</a></code>、および<code id=mediaevents:texttracklist><a href=#texttracklist>TextTrackList</a></code>オブジェクトで次のイベントが発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェイス

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-change><code>change</code></dfn>

     </td><td><code id=mediaevents:event-25><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>トラックリストの1つ以上のトラックが有効か無効である。

    </td></tr><tr><td><dfn id=event-media-addtrack><code>addtrack</code></dfn>

     </td><td><code id=mediaevents:trackevent><a href=#trackevent>TrackEvent</a></code>

     </td><td>トラックはトラックリストに加えられている。

    </td></tr><tr><td><dfn id=event-media-removetrack><code>removetrack</code></dfn>

     </td><td><code id=mediaevents:trackevent-2><a href=#trackevent>TrackEvent</a></code>

     </td><td>トラックはトラックリストから削除されている。

  </td></tr></table>



  <p>以下のイベントは、<code id=mediaevents:texttrack><a href=#texttrack>TextTrack</a></code>オブジェクトおよび<code id=mediaevents:the-track-element><a href=#the-track-element>track</a></code>要素で発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェイス

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-cuechange><code>cuechange</code></dfn>

     </td><td><code id=mediaevents:event-26><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>トラック内の1つ以上のキューがアクティブになるか、アクティブで停止している。

  </td></tr></table>


  <p>次のイベントは、<code id=mediaevents:the-track-element-2><a href=#the-track-element>track</a></code>要素で発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェイス

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-track-error><code>error</code></dfn>

     </td><td><code id=mediaevents:event-27><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>テキストトラックフォーマットがサポートされないトラックデータまたはリソースの種類のフェッチ中にエラーが発生する。

    </td></tr><tr><td><dfn id=event-track-load><code>load</code></dfn>

     </td><td><code id=mediaevents:event-28><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>トラックデータがフェッチされ、正常に処理される。
  </td></tr></table>


  <p>次のイベントは、<code id=mediaevents:texttrackcue><a href=#texttrackcue>TextTrackCue</a></code>オブジェクトで発火する：</p>

  <table><thead><tr><th>イベント名

     </th><th>インターフェイス

     </th><th>発火条件

   <tbody></th></tr><tr><td><dfn id=event-media-enter><code>enter</code></dfn>

     </td><td><code id=mediaevents:event-29><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>キューはアクティブになっている。

    </td></tr><tr><td><dfn id=event-media-exit><code>exit</code></dfn>

     </td><td><code id=mediaevents:event-30><a data-x-internal=event href=https://triple-underscore.github.io/DOM4-ja.html#interface-event>Event</a></code>

     </td><td>キューはアクティブになるのを停止している。

  </td></tr></table>



  

  <h5 id=security-and-privacy-considerations><span class=secno>4.8.12.17</span> Security and privacy considerations<a href=#security-and-privacy-considerations class=self-link></a></h5>

  <p>The main security and privacy implications of the <code id=security-and-privacy-considerations:the-video-element><a href=#the-video-element>video</a></code> and <code id=security-and-privacy-considerations:the-audio-element><a href=#the-audio-element>audio</a></code>
  elements come from the ability to embed media cross-origin. There are two directions that threats
  can flow: from hostile content to a victim page, and from a hostile page to victim content.</p>

  <hr>

  <p>If a victim page embeds hostile content, the threat is that the content might contain scripted
  code that attempts to interact with the <code id=security-and-privacy-considerations:document><a href=dom.html#document>Document</a></code> that embeds the content. To avoid
  this, user agents must ensure that there is no access from the content to the embedding page. In
  the case of media content that uses DOM concepts, the embedded content must be treated as if it
  was in its own unrelated <a id=security-and-privacy-considerations:top-level-browsing-context href=browsers.html#top-level-browsing-context>top-level browsing context</a>.</p>

  <p class=example>For instance, if an SVG animation was embedded in a <code id=security-and-privacy-considerations:the-video-element-2><a href=#the-video-element>video</a></code> element,
  the user agent would not give it access to the DOM of the outer page. From the perspective of
  scripts in the SVG resource, the SVG file would appear to be in a lone top-level browsing context
  with no parent.</p>

  <hr>

  <p>If a hostile page embeds victim content, the threat is that the embedding page could obtain
  information from the content that it would not otherwise have access to. The API does expose some
  information: the existence of the media, its type, its duration, its size, and the performance
  characteristics of its host. Such information is already potentially problematic, but in practice
  the same information can more or less be obtained using the <code id=security-and-privacy-considerations:the-img-element><a href=embedded-content.html#the-img-element>img</a></code> element, and so it
  has been deemed acceptable.</p>

  <p>However, significantly more sensitive information could be obtained if the user agent further
  exposes metadata within the content, such as subtitles. That information is therefore only exposed
  if the video resource uses CORS. The <code id=security-and-privacy-considerations:attr-media-crossorigin><a href=#attr-media-crossorigin>crossorigin</a></code>
  attribute allows authors to enable CORS. <a href=references.html#refsFETCH>[FETCH]</a></p>

  <p class=example>Without this restriction, an attacker could trick a user running within a
  corporate network into visiting a site that attempts to load a video from a previously leaked
  location on the corporation's intranet. If such a video included confidential plans for a new
  product, then being able to read the subtitles would present a serious confidentiality breach.</p>

  



  <h5 id=best-practices-for-authors-using-media-elements><span class=secno>4.8.12.18</span> メディア要素を使用する著者に対するベストプラクティス<a href=#best-practices-for-authors-using-media-elements class=self-link></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>セットトップボックスや携帯電話などの小型機器上でオーディオおよびビデオを再生するリソースは多くの場合、限られたデバイスのハードウェアリソースによって制限される。たとえば、デバイスは3つの一斉ビデオのみをサポートするかもしれない。このような理由から、要素への参照をすべて削除することに関して非常に慎重であり、かつガーベジコレクションすることによって、または要素の<code id=best-practices-for-authors-using-media-elements:attr-media-src><a href=#attr-media-src>src</a></code>属性と任意の<code id=best-practices-for-authors-using-media-elements:the-source-element><a href=embedded-content.html#the-source-element>source</a></code>要素の子孫を削除してから、要素の<code id=best-practices-for-authors-using-media-elements:dom-media-load><a href=#dom-media-load>load()</a></code>メソッドを呼び出ことによってのいずれかで、それらが再生し終わった際、<a href=#media-element id=best-practices-for-authors-using-media-elements:media-element>メディア要素</a>が保持するリソースを解放することを推奨する。</p>

  <p>同様に、再生速度が正確に1.0でない場合、ハードウェア、ソフトウェア、またはフォーマットの制限はビデオフレームに欠損や、オーディオに音途切れや無音をもたらすかもしれない。</p>


  

  <h5 id=best-practices-for-implementers-of-media-elements><span class=secno>4.8.12.19</span> Best practices for implementers of media elements<a href=#best-practices-for-implementers-of-media-elements class=self-link></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>How accurately various aspects of the <a href=#media-element id=best-practices-for-implementers-of-media-elements:media-element>media element</a> API are implemented is
  considered a quality-of-implementation issue.</p>

  <p>For example, when implementing the <code id=best-practices-for-implementers-of-media-elements:dom-media-buffered><a href=#dom-media-buffered>buffered</a></code> attribute,
  how precise an implementation reports the ranges that have been buffered depends on how carefully
  the user agent inspects the data. Since the API reports ranges as times, but the data is obtained
  in byte streams, a user agent receiving a variable-bitrate stream might only be able to determine
  precise times by actually decoding all of the data. User agents aren't required to do this,
  however; they can instead return estimates (e.g. based on the average bitrate seen so far) which
  get revised as more information becomes available.</p>

  <p>As a general rule, user agents are urged to be conservative rather than optimistic. For
  example, it would be bad to report that everything had been buffered when it had not.</p>

  <p>Another quality-of-implementation issue would be playing a video backwards when the codec is
  designed only for forward playback (e.g. there aren't many key frames, and they are far apart, and
  the intervening frames only have deltas from the previous frame). User agents could do a poor job,
  e.g. only showing key frames; however, better implementations would do more work and thus do a
  better job, e.g. actually decoding parts of the video forwards, storing the complete frames, and
  then playing the frames backwards.</p>

  <p>Similarly, while implementations are allowed to drop buffered data at any time (there is no
  requirement that a user agent keep all the media data obtained for the lifetime of the media
  element), it is again a quality of implementation issue: user agents with sufficient resources to
  keep all the data around are encouraged to do so, as this allows for a better user experience. For
  example, if the user is watching a live stream, a user agent could allow the user only to view the
  live video; however, a better user agent would buffer everything and allow the user to seek
  through the earlier material, pause it, play it forwards and backwards, etc.</p>

  <hr>

  <p>When a <a href=#media-element id=best-practices-for-implementers-of-media-elements:media-element-2>media element</a> that is paused is <a href=infrastructure.html#remove-an-element-from-a-document id=best-practices-for-implementers-of-media-elements:remove-an-element-from-a-document>removed from a document</a> and not reinserted before the next time the <a id=best-practices-for-implementers-of-media-elements:event-loop href=webappapis.html#event-loop>event
  loop</a> reaches <a href=webappapis.html#step1>step 1</a>, implementations that are resource constrained are encouraged to take
  that opportunity to release all hardware resources (like video planes, networking resources, and
  data buffers) used by the <a href=#media-element id=best-practices-for-implementers-of-media-elements:media-element-3>media element</a>. (User agents still have to keep track of the
  playback position and so forth, though, in case playback is later restarted.)</p>

  



  <nav><a href=iframe-embed-object.html>← 4.8.5 iframe要素</a> — <a href=./>目次</a> — <a href=image-maps.html>4.8.13 map要素 →</a></nav>
</body></html>