<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Edition for Web Developers日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="./search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><h2 id="dev-edition-h2" class="no-num no-toc">Edition for Web Developers — Last Updated <span class="pubdate">14 December 2021</span></h2></hgroup>
   

   <div id="search"><input placeholder="Search. Press '/'" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="./">目次</a> — <a href="infrastructure.html">2 共通インフラ →</a></nav><ol class="toc"><li><a href="introduction.html#introduction"><span class="secno">1</span> 導入</a><ol><li><a href="introduction.html#is-this-html5?"><span class="secno">1.1</span> これはHTML5か？</a><li><a href="introduction.html#background"><span class="secno">1.2</span> 背景</a><li><a href="introduction.html#audience"><span class="secno">1.3</span> 読者</a><li><a href="introduction.html#scope"><span class="secno">1.4</span> 範囲</a><li><a href="introduction.html#history-2"><span class="secno">1.5</span> 歴史</a><li><a href="introduction.html#design-notes"><span class="secno">1.6</span> 設計ノート</a><ol><li><a href="introduction.html#compliance-with-other-specifications"><span class="secno">1.6.1</span> 他の仕様の順守</a><li><a href="introduction.html#extensibility"><span class="secno">1.6.2</span> 拡張性</a></ol><li><a href="introduction.html#html-vs-xhtml"><span class="secno">1.7</span> HTML vs XML構文</a><li><a href="introduction.html#structure-of-this-specification"><span class="secno">1.8</span> この文書の構成</a><ol><li><a href="introduction.html#typographic-conventions"><span class="secno">1.8.1</span> 表現規則</a></ol><li><a href="introduction.html#a-quick-introduction-to-html"><span class="secno">1.9</span> HTMLの簡単な手引き</a><ol><li><a href="introduction.html#writing-secure-applications-with-html"><span class="secno">1.9.1</span> HTMLで安全なアプリケーションを作成する</a><li><a href="introduction.html#common-pitfalls-to-avoid-when-using-the-scripting-apis"><span class="secno">1.9.2</span> スクリプトAPIの使用時に回避すべき共通の落とし穴</a><li><a href="introduction.html#how-to-catch-mistakes-when-writing-html:-validators-and-conformance-checkers"><span class="secno">1.9.3</span> HTMLを記述するときに誤りを見つける方法：バリデーターと適合性チェッカー</a></ol><li><a href="introduction.html#conformance-requirements-for-authors"><span class="secno">1.10</span> 著者に対する適合性要件</a><ol><li><a href="introduction.html#presentational-markup"><span class="secno">1.10.1</span> プレゼンテーション的なマークアップ</a><li><a href="introduction.html#syntax-errors"><span class="secno">1.10.2</span> 構文エラー</a><li><a href="introduction.html#restrictions-on-content-models-and-on-attribute-values"><span class="secno">1.10.3</span> コンテンツモデルと属性値の制約</a></ol><li><a href="introduction.html#suggested-reading"><span class="secno">1.11 </span> 推奨される読み物</a></ol></ol><h2 id="introduction"><span class="secno">1</span> 導入<a href="#introduction" class="self-link"></a></h2>

  


  <h3 id="is-this-html5?"><span class="secno">1.1</span> これはHTML5か？<a href="#is-this-html5?" class="self-link"></a></h3>

  

  <p>一口に言えば：はい。</p>

  <p>より長くは：用語"HTML5"は、広範にモダンなウェブ技術を参照するための流行語として使用され、（決してすべてではないけれども）その多くはWHATWGで開発されている。この文書は、その1つである。他の文書は、<a href="https://spec.whatwg.org" />WHATWG specification overview</a>から利用可能である。</p>


  <h3 id="background"><span class="secno">1.2</span> 背景<a href="#background" class="self-link"></a></h3>

  

  <p>HTMLは、ワールドワイドウェブの中核となるマークアップ言語である。そもそも、HTMLは本来セマンティックに科学的な文書を記述するための言語として設計されたものであった。しかし、長年にわたるHTMLの普遍的な設計は、多岐にわたる文書およびアプリケーションでさえもを記述するために適応するHTMLを可能にした。</p>


  <h3 id="audience"><span class="secno">1.3</span> 読者<a href="#audience" class="self-link"></a></h3>

  

  <p>この仕様は、この仕様で定義された機能を使用する文書およびスクリプトの著者を対象としている。</p>

  <p>正確さのためのわかりやすさや、完全性のための簡潔さを犠牲にする場所において、おそらくこの文書は、少なくともウェブ技術について十分な知識を持たない読者には適さない。よりわかりやすいチュートリアルやオーサリングガイドが、より易しいHTML5入門を提供するだろう。</p>

  <p>特に、DOMの基礎に精通することが、この仕様のより技術的な一部の要素を完全に理解するために必要である。Web IDL、HTTP、XML、Unicode、文字エンコーディング、JavaScript、およびCSSの理解も随所で役立つだろうが、必須ではない。</p>


  <h3 id="scope"><span class="secno">1.4</span> 範囲<a href="#scope" class="self-link"></a></h3>

  

  <p>この仕様は、静的な文書から動的なアプリケーションに至るまで、ウェブ上でアクセシブルなページをオーサリングするための、セマンティックレベルのマークアップ言語および関連するセマンティックレベルのスクリプトAPIを提供することに限定される。</p>

  <p>この仕様の範囲は、外観のメディア固有なカスタマイズに対するメカニズムの提供を含まない（ただし、ウェブブラウザーのデフォルトのレンダリング規則はこの仕様の末尾に含まれ、またCSSに結びつけるための複数のメカニズムが言語の一部として提供される）。</p>

  <p>この仕様の範囲は、オペレーティングシステム全体を記述することではない。具体的には、ハードウェア設定ソフトウェア、画像処理ツール、ユーザーが毎日のようにハイエンドなワークステーションで使用することが予想されるアプリケーションが範囲外である。アプリケーションの観点から、この仕様は、低いCPU要件とともに、不定期にユーザーによって、または定期的だが異なる場所からの使用が予想されるアプリケーションを特に対象とする。そのようなアプリケーションの例は、オンライン購買システム、検索システム、ゲーム（特に多人数参加型オンラインゲーム）、公衆電話帳やアドレス帳、通信ソフトウェア（電子メールクライアント、インスタントメッセージクライアント、ディスカッションソフトウェア）、文書編集ソフトなどを含む。</p>


  <h3 id="history-2"><span class="secno">1.5</span> 歴史<a href="#history-2" class="self-link"></a></h3>

  

  <p>最初の5年間（1990-1995）、HTMLは多数の改訂と拡張を経験した。最初はCERNで、次にIETFでホストされた。</p>

  <p>W3Cの発足とともに、HTMLは再び開発の場を変えた。1995年にHTML 3.0として知られる初期の不成功に終わったHTMLを拡張する試みは、HTML 3.2として知られるより実用的なアプローチとなり、これは1997年に完了した。HTML4が同年の直後に続いた。</p>

  <p>翌年、W3C会員はHTMLの展開をやめ、代わりにXHTMLとして知られるXMLベースの同等物の開発に着手することを決定した。この取り組みはXMLのHTML4の再定式化を開始した。これは、新たなシリアライゼーションを除く新機能を追加しないXHTML 1.0として知られ、2000年に完了した。XHTML 1.0の後に、W3Cの中心はXHTMLモジュール化の旗印の下、XHTMLを拡張する他のワーキンググループの作業をより簡単にすることに移った。これと並行して、W3CはXHTML2と呼ばれる、それまでのHTMLやXHTML言語と互換性のない新しい言語の開発に取り組んだ。</p>

  <p>HTMLの進化が1998年に停滞したころ、ブラウザーベンダーによって開発されたHTMLのためのAPIの一部がDOM Level 1（1998年）とDOM Level 2 CoreおよびDOM Level 2 HTML（2000年にはじまり2003年に最高潮になる）として規定・発行された。これらの取り組みは2004年に発行されたDOM Level 3仕様とともに次第に弱まっていき、ワーキンググループはすべてのLevel 3草案を完了する前に打ち切られてしまった。</p>

  <p>2003年に、ウェブフォームの次世代として位置づけられた技術であるXFormsの公表は、HTMLの代替を見つけることよりも、進化するHTML自身に再び関心を巻き起こした。この関心は、XMLの展開が、実際に展開された（HTMLのような）技術の置換というよりも、むしろウェブ技術としてもっぱら（RSSや後のAtomのような）新しい技術に限られたという認識から生まれた。</p>

  <p>既存のHTMLウェブページとの非互換なレンダリングエンジンの実装をブラウザーに要求することなく、XForms 1.0で導入された多数の機能を提供するためのHTML4フォームの拡張が可能だったことを示す、というコンセプトの証明は、この新たな関心の最初の結果であった。草案がすでに公然と利用可能であり、すべての資源に投入を要請されていた一方で、初期段階において、仕様はOpera Softwareの著作権下にあった。</p>

  <p>HTMLの進化が再開されるべきであるという考えは2004年のW3Cワークショップで試された。ここでHTML5の作業（後述）の基礎となる原則の一部、前述のフォームに関連した機能をカバーする初期草案の計画と同じく、MozillaとOperaの共同でW3Cに提案された。この提案は以前に選択したウェブの進化の方向性と矛盾するものであるとして却下された。代わりに、W3C幹部と会員はXMLベースの代替品の開発を継続することを決議した。</p>

  <p>その後まもなく、WHATWGと呼ばれる新しい舞台のもとでApple、Mozilla、Operaは共同で作業を継続する意向を発表した。公開メーリングリストが作成され、草案はWHATWGのサイトに移された。その後著作権は3ベンダー共同で所有するよう修正され、仕様の再利用を可能にした。</p>

  <p>WHATWGは複数の中核となる原則に基づく。特に技術は下位互換性を持つ必要があり、たとえこれが実装よりむしろ仕様が変わることを意味しても仕様と実装は一致する必要があり、仕様は実装が相互にリバースエンジニアリングすることなしに完全な相互運用性を達成可能であることが必要だというものである。</p>

  <p>特に後者の要件は、以前にHTML4、XHTML1、DOM2 HTMLという3つの異なる文書で規定されたものを含むようHTML5仕様の範囲として要求した。このことはまた、これまで慣例と考えられていたよりも多くの必要事項を含むことを意味した。</p>

  <p>2006年、結局W3CはHTML5の開発に参加することに興味を示し、2007年にHTML5仕様の開発にWHATWGと協力するためのワーキンググループを設立した。Apple、Mozilla、およびOperaは、W3CにW3Cライセンスの下で仕様を公開することを許可し、WHATWGサイトのバージョンでは制限の少ないライセンスを維持した。</p>

  <p>長年にわたり、両グループは一緒に働いてきた。しかし、2011年に両グループは、異なる目標を持っていたという結論に達した：WHATWGは、既知の問題とともに状態でそれを凍結するよりもむしろ連続的に仕様を維持し、プラットフォームを進化させ必要に応じて新しい機能を追加することで、HTMLに対する生きている標準の作業を続けたがっていた一方で、W3Cは"HTML5"の"完成"バージョンを公開したがっていた。</p>

  <p>2019年にWHATWGとW3Cは、今後HTMLの単一バージョンに関して共同作業を行う<a href="https://www.w3.org/blog/news/archives/7753">協定に署名した</a>。それがこの文書である。</p>



  <h3 id="design-notes"><span class="secno">1.6</span> 設計ノート<a href="#design-notes" class="self-link"></a></h3>

  

  <p>一見しただけでは、HTMLの多くの特徴がでたらめであり一貫性のないように見えることを認めなければならない。</p>

  <p>HTML、HTMLのDOM APIのサポート、およびHTMLのサポートする技術の多くは、多くの場合、互いの存在を知らない、異なる優先順位をもつ多数の人々により数十年にわたって開発されてきた。</p>

  <p>このように機能は多くの出典から生じており、とりわけ一貫性のある方法で設計されていない。さらに、ウェブの独特の特性により、バグが修正される前にバグに依存する方法でコンテンツがしばしば意図せず書かれるため、実装バグはたびたびデファクトスタンダードになっており、今ではデジュールスタンダードになっている。</p>

  <p>そのような状況にもかかわらず、一定の設計目標に執着する試みがなされている。これらは、次節で説明する。</p>


  



  <h4 id="compliance-with-other-specifications"><span class="secno">1.6.1</span> 他の仕様の順守<a href="#compliance-with-other-specifications" class="self-link"></a></h4>

  

  <p>この仕様は、多種多様な他の仕様と互いに影響しあい、依存する。残念ながら特定の状況において、矛盾する要求は、これら他の仕様に属する要件の違反をこの仕様に導く。この違反が発生した時はいつでも、違反はそれぞれ"<dfn id="willful-violation">故意の違反</dfn>"として言及され、違反の理由が指摘される。</p>



  <h4 id="extensibility"><span class="secno">1.6.2</span> 拡張性<a href="#extensibility" class="self-link"></a></h4>

  

  <p>HTMLは、安全な方法でセマンティックスを追加するために使用できる広範な配列の拡張性メカニズムを持つ：</p>

  <ul><li><p>著者は、最も適切な既存の"本物の"HTML要素を使用しつつ、効果的に独自の要素を作成する、要素を拡張するための<code id="extensibility:classes"><a href="dom.html#classes">class</a></code>属性を使用できる。そのため拡張を知らないブラウザーおよび他のツールは多少でも適切にサポートできる。たとえば、これはマイクロフォーマットで使用される方針である。<li><p>著者は、<code id="extensibility:attr-data-*"><a href="dom.html#attr-data-*">data-*=""</a></code>属性を使用して処理するための、インラインのクライアントサイドスクリプトまたはサイト全体のサーバーサイドスクリプトのデータを含むことができる。これらは決してブラウザーによって触れられないことが保証され、スクリプトが探すおよび実行できるHTML要素でデータをスクリプトに含むことを可能にする。<li><p>著者は、ページ全体のメタデータを含む<code id="extensibility:the-meta-element"><a href="semantics.html#the-meta-element">&lt;meta name="" content=""></a></code>メカニズムを使用できる。<li><p>著者は、<a href="links.html#concept-rel-extensions" id="extensibility:concept-rel-extensions">リンクタイプの定義済み集合の拡張</a>を登録することにより、特定の意味を持つリンクに注釈を付ける<code id="extensibility:attr-hyperlink-rel"><a href="links.html#attr-hyperlink-rel">rel=""</a></code>メカニズムを使用できる。これは、マイクロフォーマットでも使用される。<li><p>著者は、インラインまたはサーバーサイドスクリプトによるさらなる処理のためのカスタムタイプとともに、<code id="extensibility:the-script-element"><a href="scripting.html#the-script-element">&lt;script type=""></a></code>メカニズムを用いて生データを埋め込むことができる。<li><p>著者は、JavaScriptプロトタイピングのメカニズムを使用してAPIを拡張することができる。たとえば、これは、広くスクリプトライブラリーによって使用される。<li><p>著者は、他のアプリケーションおよびサイトで共有するデータのネストされた名前-値ペアを埋め込むためにマイクロデータ機能（<code id="extensibility:attr-itemscope"><a href="microdata.html#attr-itemscope">itemscope=""</a></code>および<code id="extensibility:names:-the-itemprop-attribute"><a href="microdata.html#names:-the-itemprop-attribute">itemprop=""</a></code>属性）を使用することができる。</ul>




  <h3 id="html-vs-xhtml"><span class="secno">1.7</span> HTML vs XML構文<a href="#html-vs-xhtml" class="self-link"></a></h3>

  

  <p>この仕様は、文書やアプリケーションを記述するための抽象的な言語、およびその言語を使用するリソースのメモリー内表現と情報交換するためのAPIを定義する。</p>

  <p>メモリー内表現は略して"DOM HTML"、または"DOM"として知られている。</p>

  <p>この抽象的な言語を使用するリソースを送信するために使用できる種々の具体的な構文が存在し、この仕様で定義されるものが2つ存在する。</p>

  <p>1つ目のそのような具体的な構文は、HTML構文である。これは、ほとんどの著者のための推奨される形式であり、ほとんどのレガシーウェブブラウザーと互換性がある。文書が<code>text/html</code> <a id="html-vs-xhtml:mime-type" href="https://triple-underscore.github.io/mimesniff-ja.html#mime-type" data-x-internal="mime-type">MIMEタイプ</a>で送信される場合、ウェブブラウザーによってHTML文書として処理される。この仕様は"HTML"として知られる最新のHTML構文を定義する。</p>

  <p>2つ目の具体的な構文は、XML構文である。文書が<code>application/xhtml+xml</code>のような<a id="html-vs-xhtml:xml-mime-type" href="https://triple-underscore.github.io/mimesniff-ja.html#xml-mime-type" data-x-internal="xml-mime-type">XML MIMEタイプ</a>で送信される場合、ウェブブラウザーによりXML文書として処理され、XMLプロセッサーにより解析される。著者は、XMLとHTMLの処理が異なることに注意する。とりわけ、些細な構文エラーが、XMLとしてラベル付けされた文書を完全にレンダリングするのを中止させることに注意する。一方、HTML構文では無視される。</p>

  <p class="note">HTMLのためのXML構文は、以前に"XHTML"と呼ばれていたが、この仕様ではその用語を使用しない（他にも理由はあるが、MathMLやSVGのHTML構文にそのような用語は使用されないため）。</p>

  <p>DOM、HTML構文、およびXML構文は、すべて同じコンテンツを表すことはできない。たとえば、名前空間はHTML構文を使用して表現できないが、DOMとXML構文でサポートされる。同様に、<code id="html-vs-xhtml:the-noscript-element"><a href="scripting.html#the-noscript-element">noscript</a></code>の機能を使用する文書は、HTML構文を使って表すことができるが、DOMまたはXML構文で表すことができない。文字列"<code>--></code>"が含まれるコメントは、HTMLとXML構文では表せず、DOMでのみ表すことができる。</p>


  <h3 id="structure-of-this-specification"><span class="secno">1.8</span> この文書の構成<a href="#structure-of-this-specification" class="self-link"></a></h3>

  

  <p>この仕様は以下の主要な章で構成される：</p>

  <dl><dt><a href="#introduction">導入</a><dd>HTML標準のためのコンテキストを提供する非標準の資料。<dt><a href="infrastructure.html#infrastructure">共通インフラ</a><dd>適合クラス、アルゴリズム、定義、および仕様の残り部分の共通土台。<dt><a href="dom.html#dom">セマンティックス、構造、およびHTML文書のAPI群</a><dd>文書は要素から構築されている。これらの要素は、DOMを使用するツリーを形成する。この章は、このDOMの機能だけでなく、すべての要素に共通な機能を紹介し、要素を定義するのに使用される概念を定義する。<dt><a href="semantics.html#semantics">HTMLの要素</a><dd>各要素は、この章で説明される事前に定義された意味を持つ。要素の使用方法について、著者向けの規則も与えられる。これは、ビデオの再生や字幕、フォーム制御やフォーム送信、HTMLキャンバスとして知られる2次元のグラフィックAPIのようなHTMLの大きな署名機能を含む。<dt><a href="microdata.html#microdata">Microdata</a><dd>ツールが文書から名前-値ペアのツリーを抽出することができるように、この仕様は文書に機械読み取り可能な注釈を追加するための仕組みを導入する。この章は、このメカニズムを説明する。この章はまた、連絡先情報、カレンダーイベント、およびライセンス作品に対する複数のサンプルMicrodata語彙を定義する。<dt><a href="interaction.html#editing">ユーザーとの対話処理</a><dd>HTML文書は、この章で説明されている、ユーザーが対話し、フォーカスやドラッグアンドドロップがどのように機能するかなど、コンテンツを変更するための多数のメカニズムを提供することができる。<dt><a href="browsers.html#browsers">ウェブページの読み込み</a><dd>HTML文書は、周りから孤立して存在しない―この章は、ウェブブラウザーなど、複数のページに対処する環境に影響を与える機能の多くを定義する。<dt><a href="webappapis.html#webappapis">ウェブアプリケーションAPI</a><dd>この章は、HTMLにおけるアプリケーションのスクリプトのための基本的な機能を紹介する。<dt><a href="workers.html#workers">Web workers</a><dd>この章は、JavaScriptにおけるバックグラウンドスレッドのためのAPIを定義する。<dt><a href="worklets.html#worklets">Worklets</a><dd>この章は、メインのJavaScript 実行環境とは別にJavaScriptを実行する必要があるAPIのためのインフラを定義する。<dt><a href="comms.html#comms">通信API</a><dd>この章は、HTMLで記述されるアプリケーションが同一クライアントを実行する異なるドメインから他のアプリケーションと通信するために使用することのできる複数のメカニズムを説明する。この章はまた、Server Sent Eventsまたは<code>EventSource</code>として知られるサーバープッシュなイベントストリームメカニズム、およびWeb Socketsとして知られるスクリプトに対する双方向全二重ソケットプロトコルを導入する。<dt><a href="webstorage.html#webstorage">Web storage</a><dd>この章は、名前-値ペアを基にしたクライアントサイドのストレージメカニズムを定義する。<dt><a href="syntax.html#syntax">HTML構文</a><dt><a href="xhtml.html#xhtml">XML構文</a><dd>これら構文の機能がシリアル化された形式で表現されず、かつ他人に送信できなかった場合、機能のすべてが無駄になるだろう。そしてこれら構文の章では、HTMLとXMLの構文を定義する。</dl>

  <p><a href="obsolete.html#obsolete">旧式の機能</a>および<a href="#iana">IANA考慮</a>のリストといった付録も存在する。</p>


  



  <h4 id="typographic-conventions"><span class="secno">1.8.1</span> 表現規則<a href="#typographic-conventions" class="self-link"></a></h4>

  <p>これは、定義、要件、または説明である。</p>

  <p class="note">これは注である。</p>

  <p class="example">これは例である。</p>

  <p class="XXX">これは未解決の問題である。</p>

  <p class="warning">これは警告である。</p>

  

  <dl class="domintro"><dt><code><var>variable</var> = <var>object</var>.<a href="#x-that" id="typographic-conventions:x-that">method</a>([<var>optionalArgument</var>])</code><dd><p>これはインターフェイスの使用法を著者に説明する注である。</dl>

  <pre><code class='css'><c- c>/* これはCSS断片である */</c-></code></pre>

  <p>用語の定義例は<dfn id="x-this">このように</dfn>マークアップされる。その用語の使用は、<a href="#x-this" id="typographic-conventions:x-this">このように</a>または<i id="typographic-conventions:x-this-2"><a href="#x-this">このように</a></i>マークアップされる。</p>

  <p>要素、属性、またはAPIの定義例は<dfn id="x-that"><code>このように</code></dfn>マークアップされる。その要素、属性、またはAPIへの参照は、<code id="typographic-conventions:x-that-2"><a href="#x-that">このように</a></code>マークアップされる。</p>

  <p>その他のコード断片は、<code>このように</code>マークアップされる。</p>

  <p>変数は、<var>このように</var>マークアップされる。</p>

  

  <p>場合によっては、要件は条件と対応する要件とともにリストの形で与えられる。このような場合、たとえ要件に対する条件の複数の集合である場合であっても、条件に適用される要件は常に、条件に従う要件の最初の集合である。次のようにこのような例が提示される：</p>

  <dl class="switch"><dt>これは条件である<dt>これは別の条件である<dd>これは上記の条件に当てはまる要件である。<dt>これは3番目の条件である<dd>これは3番目の条件に当てはまる要件である。</dl>




  <h3 id="a-quick-introduction-to-html"><span class="secno">1.9</span> HTMLの簡単な手引き<a href="#a-quick-introduction-to-html" class="self-link"></a></h3>

  

  <p>基本的なHTML文書は次のようになる：</p>

  <pre id="intro-early-example"><code class='html'><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>head</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>title</c-><c- p>></c->Sample page<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>head</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>body</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Sample page<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->This is a <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"demo.html"</c-><c- p>></c->simple<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> sample.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- c>&lt;!-- this is a comment --></c->
 <c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>html</c-><c- p>></c-></code></pre>

  <p>HTML文書は、要素とテキストツリーで構成される。各要素は、"<code>&lt;body></code>"のような<a href="syntax.html#syntax-start-tag" id="a-quick-introduction-to-html:syntax-start-tag">開始タグ</a>と"<code>&lt;/body></code>"のような<a href="syntax.html#syntax-end-tag" id="a-quick-introduction-to-html:syntax-end-tag">終了タグ</a>でソース内に表示される。（場合によって、特定の開始タグと終了タグは<a href="syntax.html#syntax-tag-omission" id="a-quick-introduction-to-html:syntax-tag-omission">省略</a>および別のタグで暗示されるかもしれない。）</p>

  <p>タグは、重複することなく、その要素が互いの中に完全にネストされなければならない：</p>

  <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->This is <c- p>&lt;</c-><c- f>em</c-><c- p>></c->very <c- p>&lt;</c-><c- f>strong</c-><c- p>></c->wrong<c- p>&lt;/</c-><c- f>em</c-><c- p>></c->!<c- p>&lt;/</c-><c- f>strong</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>
  <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->This <c- p>&lt;</c-><c- f>em</c-><c- p>></c->is <c- p>&lt;</c-><c- f>strong</c-><c- p>></c->correct<c- p>&lt;/</c-><c- f>strong</c-><c- p>></c->.<c- p>&lt;/</c-><c- f>em</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

  <p>この仕様は、要素がどのようにネストできるかに関する規則に沿って、HTMLで使用できる要素の集合を定義する。</p>

  <p>要素は、要素が動作する方法を制御する属性を持つことができる。以下の例では、<code id="a-quick-introduction-to-html:the-a-element"><a href="text-level-semantics.html#the-a-element">a</a></code>要素と<code id="a-quick-introduction-to-html:attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code>属性を使用して形成される、<a id="a-quick-introduction-to-html:hyperlink" href="links.html#hyperlink">ハイパーリンク</a>が存在する：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"demo.html"</c-><c- p>></c->simple<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-></code></pre>

  <p><a href="syntax.html#syntax-attributes" id="a-quick-introduction-to-html:syntax-attributes">属性</a>は開始タグの内部に置かれ、"<code>=</code>"文字で区切られた<a href="syntax.html#syntax-attribute-name" id="a-quick-introduction-to-html:syntax-attribute-name">名前</a>と<a href="syntax.html#syntax-attribute-value" id="a-quick-introduction-to-html:syntax-attribute-value">値</a>で構成される。属性値が<a id="a-quick-introduction-to-html:space-characters" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>または任意の<code>"</code> <code>'</code> <code>`</code> <code>=</code> <code>&lt;</code> <code>></code>を含まない場合、属性値は<a href="syntax.html#unquoted">引用符で囲まない</a>ままにできる。そうでなければ、単一引用符または二重引用符のいずれかを使用して、引用符で囲む必要がある。値が空文字列の場合、"<code>=</code>"文字とともに値を完全に省略できる。</p>

  <pre><code class='html'><c- c>&lt;!-- empty attributes --></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>address</c-> <c- e>disabled</c-><c- p>></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>address</c-> <c- e>disabled</c-><c- o>=</c-><c- s>""</c-><c- p>></c->

<c- c>&lt;!-- attributes with a value --></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>address</c-> <c- e>maxlength</c-><c- o>=</c-><c- s>200</c-><c- p>></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>address</c-> <c- e>maxlength</c-><c- o>=</c-><c- s>'200'</c-><c- p>></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>address</c-> <c- e>maxlength</c-><c- o>=</c-><c- s>"200"</c-><c- p>></c-></code></pre>

  <p>HTMLユーザーエージェント（たとえばウェブブラウザー）はこのマークアップを<i>解析し</i>、マークアップをDOM（Document Object Model）ツリーに変化させる。DOMツリーは文書のメモリー内表現である。</p>

  <p>DOMツリーは数種類のノードを含む。具体的には、<code id="a-quick-introduction-to-html:documenttype"><a data-x-internal="documenttype" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documenttype">DocumentType</a></code>ノード、<code id="a-quick-introduction-to-html:element"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>ノード、<code id="a-quick-introduction-to-html:text"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノード、<code id="a-quick-introduction-to-html:comment"><a data-x-internal="comment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-comment">Comment</a></code>ノード、場合によっては<code id="a-quick-introduction-to-html:processinginstruction"><a data-x-internal="processinginstruction" href="https://triple-underscore.github.io/DOM4-ja.html#interface-processinginstruction">ProcessingInstruction</a></code>ノードである。</p>

  <p><a href="#intro-early-example">この節の一番上にあるマークアップ断片</a>は以下のDOMツリーに変換される：</p>

  <ul class="domTree"><li class="t10">DOCTYPE: <code>html</code><li class="t1"><code id="a-quick-introduction-to-html:the-html-element"><a href="semantics.html#the-html-element">html</a></code> <span class="t2"><code id="a-quick-introduction-to-html:attr-lang" class="attribute name"><a href="dom.html#attr-lang">lang</a></code>="<code class="attribute value">en</code>"</span><ul><li class="t1"><code id="a-quick-introduction-to-html:the-head-element"><a href="semantics.html#the-head-element">head</a></code><ul><li class="t3"><code id="a-quick-introduction-to-html:text-2"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣␣</span><li class="t1"><code id="a-quick-introduction-to-html:the-title-element"><a href="semantics.html#the-title-element">title</a></code><ul><li class="t3"><code id="a-quick-introduction-to-html:text-3"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>Sample page</span></ul><li class="t3"><code id="a-quick-introduction-to-html:text-4"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣</span></ul><li class="t3"><code id="a-quick-introduction-to-html:text-5"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣</span><li class="t1"><code id="a-quick-introduction-to-html:the-body-element"><a href="sections.html#the-body-element">body</a></code><ul><li class="t3"><code id="a-quick-introduction-to-html:text-6"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣␣</span><li class="t1"><code id="a-quick-introduction-to-html:the-h1,-h2,-h3,-h4,-h5,-and-h6-elements"><a href="sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code><ul><li class="t3"><code id="a-quick-introduction-to-html:text-7"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>Sample page</span></ul><li class="t3"><code id="a-quick-introduction-to-html:text-8"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣␣</span><li class="t1"><code id="a-quick-introduction-to-html:the-p-element"><a href="grouping-content.html#the-p-element">p</a></code><ul><li class="t3"><code id="a-quick-introduction-to-html:text-9"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>This is a </span><li class="t1"><code id="a-quick-introduction-to-html:the-a-element-2"><a href="text-level-semantics.html#the-a-element">a</a></code> <span class="t2"><code id="a-quick-introduction-to-html:attr-hyperlink-href-2" class="attribute name"><a href="links.html#attr-hyperlink-href">href</a></code>="<code class="attribute value">demo.html</code>"</span><ul><li class="t3"><code id="a-quick-introduction-to-html:text-10"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>simple</span></ul><li class="t3"><code id="a-quick-introduction-to-html:text-11"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span> sample.</span></ul><li class="t3"><code id="a-quick-introduction-to-html:text-12"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣␣</span><li class="t8"><code id="a-quick-introduction-to-html:comment-2"><a data-x-internal="comment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-comment">#comment</a></code>: <span> this is a comment </span><li class="t3"><code id="a-quick-introduction-to-html:text-13"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>⏎␣⏎</span></ul></ul></ul>

  <p>このツリーの<a id="a-quick-introduction-to-html:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">文書要素</a>は、常にHTML文書内のその位置で見つけられる要素である<code id="a-quick-introduction-to-html:the-html-element-2"><a href="semantics.html#the-html-element">html</a></code>要素となる。<code id="a-quick-introduction-to-html:the-head-element-2"><a href="semantics.html#the-head-element">head</a></code>と<code id="a-quick-introduction-to-html:the-body-element-2"><a href="sections.html#the-body-element">body</a></code>の2つの要素だけでなく、間に<code id="a-quick-introduction-to-html:text-14"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノードを含む。</p>

  <p>ソースはDOMで多数のスペース（ここでは"␣"で表す）および<code id="a-quick-introduction-to-html:text-16"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノードの終わる改行（"⏎"）を含むため、最初に期待したよりもDOMツリーに多数の<code id="a-quick-introduction-to-html:text-15"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノードがある。しかし、歴史的な理由から、元のマークアップ内のスペースや改行のすべて、特に、<code id="a-quick-introduction-to-html:the-head-element-3"><a href="semantics.html#the-head-element">head</a></code>開始タグが暗黙に省略されて終了する前のすべての空白、および<code id="a-quick-introduction-to-html:the-body-element-3"><a href="sections.html#the-body-element">body</a></code>終了タグが<code id="a-quick-introduction-to-html:the-body-element-4"><a href="sections.html#the-body-element">body</a></code>の終端で終了する後のすべての空白は、DOMには表示されない。</p>

  <p><code id="a-quick-introduction-to-html:the-head-element-4"><a href="semantics.html#the-head-element">head</a></code>要素は、テキスト"サンプルページ"を持つ<code id="a-quick-introduction-to-html:text-17"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノードを含む<code id="a-quick-introduction-to-html:the-title-element-2"><a href="semantics.html#the-title-element">title</a></code>要素を含む。同様に、<code id="a-quick-introduction-to-html:the-body-element-5"><a href="sections.html#the-body-element">body</a></code>要素は<code id="a-quick-introduction-to-html:the-h1,-h2,-h3,-h4,-h5,-and-h6-elements-2"><a href="sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>要素、<code id="a-quick-introduction-to-html:the-p-element-2"><a href="grouping-content.html#the-p-element">p</a></code>要素、およびコメントを含む。</p>

  <hr>

  <p>このDOMツリーはページ内のスクリプトから操作できる。（一般的にJavaScriptで）スクリプトは、<code id="a-quick-introduction-to-html:the-script-element"><a href="scripting.html#the-script-element">script</a></code>要素を使用して、または<a id="a-quick-introduction-to-html:event-handler-content-attributes" href="webappapis.html#event-handler-content-attributes">イベントハンドラーコンテンツ属性</a>を使用して埋め込むことができる小さなプログラムである。たとえば、"Hello World"を表示するために、<code id="a-quick-introduction-to-html:the-output-element"><a href="form-elements.html#the-output-element">output</a></code>要素の値を設定するスクリプトを持つフォームはこのようになる：</p>

  <pre><code class='html'><c- p>&lt;</c-><a id='a-quick-introduction-to-html:the-form-element' href='forms.html#the-form-element'><c- f>form</c-></a> <a href='forms.html#attr-form-name' id='a-quick-introduction-to-html:attr-form-name'><c- e>name</c-></a><c- o>=</c-><c- s>"main"</c-><c- p>></c->
 Result: <c- p>&lt;</c-><a id='a-quick-introduction-to-html:the-output-element-2' href='form-elements.html#the-output-element'><c- f>output</c-></a> <a href='form-control-infrastructure.html#attr-fe-name' id='a-quick-introduction-to-html:attr-fe-name'><c- e>name</c-></a><c- o>=</c-><c- s>"result"</c-><c- p>>&lt;/</c-><c- f>output</c-><c- p>></c->
 <c- p>&lt;</c-><a id='a-quick-introduction-to-html:the-script-element-2' href='scripting.html#the-script-element'><c- f>script</c-></a><c- p>></c->
  <span>document</span><c- p>.</c-><a href='dom.html#dom-document-forms' id='a-quick-introduction-to-html:dom-document-forms'>forms</a><c- p>.</c->main<c- p>.</c-><a href='forms.html#dom-form-elements' id='a-quick-introduction-to-html:dom-form-elements'>elements</a><c- p>.</c->result<c- p>.</c-><a href='form-elements.html#dom-output-value' id='a-quick-introduction-to-html:dom-output-value'>value</a> <c- o>=</c-> <c- t>'Hello World'</c-><c- p>;</c->
 <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

  <p>DOMツリー内の各要素はオブジェクトによって表され、これらオブジェクトは、オブジェクトを操作できるようにするためのAPIを持つ。たとえば、リンク（たとえば上記ツリーの<code id="a-quick-introduction-to-html:the-a-element-3"><a href="text-level-semantics.html#the-a-element">a</a></code>要素）は、"<code id="a-quick-introduction-to-html:attr-hyperlink-href-3"><a href="links.html#attr-hyperlink-href">href</a></code>"属性を複数の方法で変更できる：</p>

  <pre><code class='js'><c- a>var</c-> a <c- o>=</c-> <span>document</span><c- p>.</c-><a href='dom.html#dom-document-links' id='a-quick-introduction-to-html:dom-document-links'>links</a><c- p>[</c-><c- mf>0</c-><c- p>];</c-> <c- c1>// obtain the first link in the document</c->
a<c- p>.</c-><a href='links.html#dom-hyperlink-href' id='a-quick-introduction-to-html:dom-hyperlink-href'>href</a> <c- o>=</c-> <c- t>'sample.html'</c-><c- p>;</c-> <c- c1>// change the destination URL of the link</c->
a<c- p>.</c-><a href='links.html#dom-hyperlink-protocol' id='a-quick-introduction-to-html:dom-hyperlink-protocol'>protocol</a> <c- o>=</c-> <c- t>'https'</c-><c- p>;</c-> <c- c1>// change just the scheme part of the URL</c->
a<c- p>.</c->setAttribute<c- p>(</c-><c- t>'href'</c-><c- p>,</c-> <c- t>'https://example.com/'</c-><c- p>);</c-> <c- c1>// change the content attribute directly</c-></code></pre>

  <p>HTML文書が実装（特にウェブブラウザーのような対話的な実装）によって処理および表示されるときに、HTML文書を表現するための手段としてDOMツリーは使用されるので、この仕様では、大部分が上記のマークアップの代わりにDOMツリーの用語で記述される。</p>

  <hr>

  <p>HTML文書は、メディアに依存しない対話的なコンテンツの記述を表す。HTML文書は、画面で、音声シンセサイザーを通して、または点字ディスプレイでレンダリングされるかもしれない。そのようなレンダリングが行われる方法に影響を与えるために、著者はCSSなどのスタイル言語を使用できる。</p>

  <p>次の例において、CSSを使用するページは、青地に黄となっている。</p>

  <pre><code class='html'><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>head</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>title</c-><c- p>></c->Sample styled page<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>style</c-><c- p>></c->
   <c- f>body</c-> <c- p>{</c-> <c- k>background</c-><c- p>:</c-> <c- kc>navy</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-> <c- kc>yellow</c-><c- p>;</c-> <c- p>}</c->
  <c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>head</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>body</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Sample styled page<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->This page is just a demo.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>html</c-><c- p>></c-></code></pre>

  <p>どのようにHTMLを使用するかの詳細について、著者はチュートリアルとガイドを参考にするよう促される。この仕様に含まれている例の一部も役立つかもしれないが、やむを得ず最初は理解しにくいかもしれない詳細なレベルで言語を定義することに初心者は注意すること。</p>




  <h4 id="writing-secure-applications-with-html"><span class="secno">1.9.1</span> HTMLで安全なアプリケーションを作成する<a href="#writing-secure-applications-with-html" class="self-link"></a></h4>

  

  <p>HTMLが対話的なサイトを作成するために使用される場合、攻撃者がサイト自身またはサイトのユーザーの整合性を危険にさらすことを通して脆弱性をもたらすのを避けるような配慮が必要である。</p>

  <p>この問題の包括的な研究は、この文書の範囲を超える。また著者は、より詳細に問題を研究することを強く促す。ただし、この節は、HTMLアプリケーション開発における一般的な落とし穴について簡単な手引きの提供を試みる。</p>

  <p>ウェブのセキュリティモデルは"origin"の概念に基づいており、それに対応してウェブ上で潜在的な攻撃の多くは、生成元をまたいだ振る舞いを伴うとされる。<a href="references.html#refsORIGIN">[ORIGIN]</a></p>

  <dl><dt>ユーザー入力の非検証<dt>クロスサイトスクリプティング（XSS）<dt>SQLインジェクション<dd><p>たとえばテキストコメントのようなユーザーが生成したコンテンツ、URLパラメーターの値、サードパーティサイトからのメッセージなどの信頼できない入力を受け入れるとき、データは使用する前に検証され、表示される場合に適切にエスケープすることが不可欠である。これを行わないと、敵対的なユーザーが負の年齢のように偽のユーザー情報を提供するなどの潜在的に安全なものから、ユーザーが情報を含むページを見て毎回スクリプトを実行するまたは潜在的にプロセスへの攻撃を伝播するなどの深刻なもの、サーバー内のすべてのデータを削除するなどの壊滅的なものまで、さまざまな攻撃の実行を許してしまう。</p>

    <p>ユーザー入力を検証するためのフィルターを作成する場合、フィルターは常に既知の安全な構造物を許可し、他のすべての入力を許可しないような、セーフリストベースであることが不可欠である。（たとえば、将来的に発明されるかもしれないなどの理由で）すべての危険が既知ではないとして、既知の危険な入力を許さずその他を許すブロックリストベースのフィルターは安全ではない。</p>

    <div class="example"><p>たとえば、ページが何を表示するかを決定するために、ページのURLのクエリー文字列を見て、次に、サイトがメッセージを表示することで、そのページにユーザーをリダイレクトするとしよう：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>ul</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"message.cgi?say=Hello"</c-><c- p>></c->Say Hello<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"message.cgi?say=Welcome"</c-><c- p>></c->Say Welcome<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"message.cgi?say=Kittens"</c-><c- p>></c->Say Kittens<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c-></code></pre>

     <p>メッセージがエスケープせずに単にユーザーに表示された場合、敵対的な攻撃者は、script要素が含まれるURLを作成する可能性がある：</p>

     <pre>https://example.com/message.cgi?say=%3Cscript%3Ealert%28%27Oh%20no%21%27%29%3C/script%3E</pre>

     <p>攻撃者は被害者のユーザーがこのページにアクセスすることを確信しているならば、攻撃者が選択したスクリプトは、ページ上で実行されるだろう。そのようなスクリプトは、サイトが提供するものによってのみ制限され、好きなだけ敵対行為を起こすことができる。たとえば、サイトがeコマースショップであれば、スクリプトによってユーザーの知らないうちに勝手に多くの不要な買い物をする可能性がある。</p>

     <p>これは、クロスサイトスクリプティング攻撃と呼ばれている。</p>

    </div>

    <p>コードを実行させるサイトをだまそうとするために使用できる多くの構成要素がある。著者がセーフリストのフィルターを書く場合に考慮が促されるいくつかのものがある：</p>

    <ul><li><code id="writing-secure-applications-with-html:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>のような無害のように思える要素を許可する場合、同様に、与えられた属性をセーフリストに登録することが重要である。たとえば、imgがすべての属性を許可する場合、攻撃者は、任意のスクリプトを実行するために<code id="writing-secure-applications-with-html:handler-onload"><a href="webappapis.html#handler-onload">onload</a></code>属性を使用できる。<li>（たとえばリンクについて）URLの提供を許可する場合、悪用される可能性がある多数のスキームが存在するため、各URLのスキームも明示的にセーフリストに登録する必要がある。最も顕著な例は、"<code>javascript:</code>"だが、ユーザーエージェントは他のものを実装することができる（そして実際、歴史的に実装している）。<li><code id="writing-secure-applications-with-html:the-base-element"><a href="semantics.html#the-base-element">base</a></code>要素を挿入できるようにすることは、相対的なリンクを持つページでの任意の<code id="writing-secure-applications-with-html:the-script-element"><a href="scripting.html#the-script-element">script</a></code>要素がハイジャックされる可能性があり、同様に任意のフォームの提出が敵対サイトにリダイレクトされてしまうことを意味する。</ul>
   <dt>クロスサイトリクエストフォージェリー（CSRF）<dd><p>たとえば、ユーザー名でフォーラムにメッセージを投稿する、購入する、またはパスポートの申請するなど、サイトがユーザーに対してユーザー固有の副作用を伴うフォーム送信を行うことを許可する場合、他のサイトによってユーザーを無意識にリクエストするようにだますよりかはむしろ、意図的にユーザーによって行われたことを確認するのが重要である。</p>

    <p>HTMLフォームが他の生成元に送信できるため、この問題は存在する。</p>

    <p>サイトは、ユーザー固有な秘密のトークンを使用してフォームを生成する、またはすべての要求に`<code id="writing-secure-applications-with-html:http-origin"><a data-x-internal="http-origin" href="https://triple-underscore.github.io/Fetch-ja.html#http-origin">Origin</a></code>`ヘッダーをチェックしてそのような攻撃を防ぐことができる。</p>
   <dt>クリックジャッキング<dd><p>ユーザーが望まないだろう振る舞いを実行するインターフェイスをユーザーに提供するようなページは、ユーザーがアクティブにするインターフェイスでだまされる可能性を回避するように設計する必要がある。</p>

    <p>たとえば、敵対的なサイトが小さな<code id="writing-secure-applications-with-html:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>を被害者のサイトに配置し、ユーザーがリアクションゲームをプレイすることによって、クリックするようユーザーにさせる場合、ユーザーをだます1つの手段である。ひとたびユーザーがゲームをプレイすると、敵対サイトはユーザーがクリックしようとすると同時にマウスカーソルの下にiframeを配置できる。こうして被害者サイトのインターフェイスをクリックするようにユーザーを騙す。</p>

    <p>これを回避するために、フレームに使用されることを予想しないサイトは、（たとえば<code id="writing-secure-applications-with-html:dom-top"><a href="browsers.html#dom-top">top</a></code>属性の値に<code id="writing-secure-applications-with-html:dom-window"><a href="window-object.html#dom-window">window</a></code>オブジェクトを比較することによって）フレームにないことを検出した場合のみ、それらのインターフェイスを有効にすることを促進する。</p>
   </dl>



  <h4 id="common-pitfalls-to-avoid-when-using-the-scripting-apis"><span class="secno">1.9.2</span> スクリプトAPIの使用時に回避すべき共通の落とし穴<a href="#common-pitfalls-to-avoid-when-using-the-scripting-apis" class="self-link"></a></h4>

  

  <p>HTML内のスクリプトは"実行から完了まで"のセマンティックスがある。これは、イベントを発火または文書を解析し続けるなど、ほかに何かを実行する前に、一般にブラウザーは途切れずスクリプトを実行することを意味する。</p>

  <p>一方、HTMLファイルの解析は増加的に発生する。これは、パーサーがスクリプトが実行できるよう任意の時点で一時停止可能であることを意味する。これは一般に良いことであるが、イベントが発火する可能性ができた後に、著者はイベントハンドラーをフックするのを避けるよう注意する必要があることを意味する。</p>

  <p>これを確実に行う、<a id="common-pitfalls-to-avoid-when-using-the-scripting-apis:event-handler-content-attributes" href="webappapis.html#event-handler-content-attributes">イベントハンドラーのコンテンツ属性</a>を使用する、または要素を作成して同じスクリプト内でイベントハンドラーを追加するという2つの方法がある。前述のように、追加のイベントが発動する前に、スクリプトが完了するまで実行されているため、後者は安全である。</p>

  <div class="example"><p>これが明示することができる1つの方法は、<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素と<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:event-load"><a href="indices.html#event-load">load</a></code>イベントである。特に画像がすでに（共通の）キャッシュされている場合は、要素が解析されると同時にイベントは発火することができる。</p>

   <p>これは、著者は<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:event-load-2"><a href="indices.html#event-load">load</a></code>イベントを捕まえるために<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素に<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:handler-onload"><a href="webappapis.html#handler-onload">onload</a></code>ハンドラーを使用している：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"games.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Games"</c-> <c- e>onload</c-><c- o>=</c-><c- s>"gamesLogoHasLoaded(event)"</c-><c- p>></c-></code></pre>

   <p>要素がスクリプトによって追加されている場合、イベントハンドラーは同じスクリプトで追加され、イベントが見落とされることはないだろう：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>var</c-> img <c- o>=</c-> <c- k>new</c-> Image<c- p>();</c->
 img<c- p>.</c->src <c- o>=</c-> <c- t>'games.png'</c-><c- p>;</c->
 img<c- p>.</c->alt <c- o>=</c-> <c- t>'Games'</c-><c- p>;</c->
 img<c- p>.</c->onload <c- o>=</c-> gamesLogoHasLoaded<c- p>;</c->
 <c- c1>// img.addEventListener('load', gamesLogoHasLoaded, false); // would work also</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>しかし、著者が最初に<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code>要素を作成し、別のスクリプトでイベントリスナーを追加した場合、<code id="common-pitfalls-to-avoid-when-using-the-scripting-apis:event-load-3"><a href="indices.html#event-load">load</a></code>イベントが発火している間に、見逃す機会がある：</p>

   <pre class="bad"><code class='html'><c- c>&lt;!-- Do not use this style, it has a race condition! --></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>id</c-><c- o>=</c-><c- s>"games"</c-> <c- e>src</c-><c- o>=</c-><c- s>"games.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Games"</c-><c- p>></c->
 <c- c>&lt;!-- the 'load' event might fire here while the parser is taking a</c->
<c- c>      break, in which case you will not see it! --></c->
 <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>var</c-> img <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- t>'games'</c-><c- p>);</c->
  img<c- p>.</c->onload <c- o>=</c-> gamesLogoHasLoaded<c- p>;</c-> <c- c1>// might never fire!</c->
 <c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  </div>



  <h4 id="how-to-catch-mistakes-when-writing-html:-validators-and-conformance-checkers"><span class="secno">1.9.3</span> HTMLを記述するときに誤りを見つける方法：バリデーターと適合性チェッカー<a href="#how-to-catch-mistakes-when-writing-html:-validators-and-conformance-checkers" class="self-link"></a></h4>

  

  <p>著者は、よく目にする誤りを見つける適合性チェッカー（<i>バリデーター</i>とも呼ばれる）を利用することが推奨される。WHATWGはそのようなツールのリストを維持する：<a href="https://whatwg.org/validator" />https://whatwg.org/validator/</a></p>



  <h3 id="conformance-requirements-for-authors"><span class="secno">1.10</span> 著者に対する適合性要件<a href="#conformance-requirements-for-authors" class="self-link"></a></h3>

  

  <p>HTML仕様の以前のバージョンとは異なり、この仕様は、妥当な文書向け同様に、妥当でない文書の詳細な必要な処理を定義する。</p> 

  <p>しかし、妥当でないコンテンツの処理は、ほとんどの場合明確に定義されるけれども、文書のための適合性要件は依然として重要である。実際には、相互運用性（すべての実装が、信頼性と同一または同等の方法で特定のコンテンツを処理している状況）は、文書適合性要件の唯一の目標ではない。この節は、適合文書とエラーをもつ文書を区別するための、より一般的な理由の一部を列挙する。</p>


  <h4 id="presentational-markup"><span class="secno">1.10.1</span> プレゼンテーション的なマークアップ<a href="#presentational-markup" class="self-link"></a></h4>

  

  <p>もはや以前のHTMLバージョンからのプレゼンテーション的な機能のほとんどを使用できない。一般にプレゼンテーション的なマークアップは、多くの問題を有することが見出されている：</p>

  <dl><dt>プレゼンテーション的な要素の使用は、より乏しいアクセシビリティにつながる<dd><p>ユーザー支援技術（AT）に満足な体験（たとえばARIAを用いて）を提供する方法でプレゼンテーション的なマークアップを使用することは可能だが、セマンティックに適切なマークアップを用いる場合よりも著しく困難である。さらに、たとえそのような技術を用いても、テキストモードブラウザーのユーザーのような、AT以外の非グラフィカルユーザー向けのページをアクセシブルにする助けにはならない。</p>

    <p>その一方で、メディアに依存しないマークアップの使用は、多くのユーザー（たとえばテキストブラウザー）に機能するよう作成される文書向けの容易な手段を提供する。</p>
   <dt>メンテナンスのより高いコスト<dd><p>マークアップがスタイルに依存しない方法で書かれるサイトの維持は大幅に容易である。たとえば、<code>&lt;font color=""></code>を使用してサイトの色を変更すると、サイト全体にわたっての変更が必要になるのに対し、CSSに基づくサイトは同様の変更を単一のファイルの変更によって可能である。</p>
   <dt>より大きな文書サイズ<dd><p>プレゼンテーション的なマークアップは、きわめて冗長になる傾向がある。したがって、より大きな文書サイズとなる。</p>
   </dl>

  <p>このためこのバージョンでは、プレゼンテーション的なマークアップはHTMLから削除された。この変化は驚くべきものではない。HTML4は何年も前にプレゼンテーション的なマークアップを非推奨とし、著者がプレゼンテーション的なマークアップからの脱却を支援するモード（HTML4 Transitional）を提供した。後に、XHTML 1.1は一段と踏み込み、完全にそれらの機能を廃止した。</p>

  <p>HTMLで唯一残っているプレゼンテーション的なマークアップ機能は、<code id="presentational-markup:attr-style"><a href="dom.html#attr-style">style</a></code>属性と<code id="presentational-markup:the-style-element"><a href="semantics.html#the-style-element">style</a></code>要素である。<code id="presentational-markup:attr-style-2"><a href="dom.html#attr-style">style</a></code>属性の使用は本番環境で推奨されないが、ラピッドプロトタイピング（そのルールが直接後で別のスタイルシートに移動することができる）、および独立したスタイルシートが不便である他とは異なる場合での特定のスタイルを提供するのに役立つ。同様に、<code id="presentational-markup:the-style-element-2"><a href="semantics.html#the-style-element">style</a></code>要素は、配信またはページ固有のスタイルに有用であるが、一般にスタイルを複数ページに適用する場合、外部スタイルシートはより使いやすそうである。</p>

  <p>また、以前にプレゼンテーション的であった一部の要素がメディアに依存しないよう、この仕様で再定義されていることは注目すべきである：<code id="presentational-markup:the-b-element"><a href="text-level-semantics.html#the-b-element">b</a></code>、<code id="presentational-markup:the-i-element"><a href="text-level-semantics.html#the-i-element">i</a></code>、<code id="presentational-markup:the-hr-element"><a href="grouping-content.html#the-hr-element">hr</a></code>、<code id="presentational-markup:the-s-element"><a href="text-level-semantics.html#the-s-element">s</a></code>、<code id="presentational-markup:the-small-element"><a href="text-level-semantics.html#the-small-element">small</a></code>および<code id="presentational-markup:the-u-element"><a href="text-level-semantics.html#the-u-element">u</a></code>。</p>


  <h4 id="syntax-errors"><span class="secno">1.10.2</span> 構文エラー<a href="#syntax-errors" class="self-link"></a></h4>

  

  <p>HTMLの構文は、さまざまな問題を回避するために拘束されている。</p>

  <dl><dt>直感的でないエラー処理の動作<dd><p>特定の妥当でない構文構造が解析されるとき、高度に直感的でないDOMツリーをもたらす。</p>

    <div class="example"><p>たとえば、次のマークアップ断片は、<code id="syntax-errors:the-hr-element"><a href="grouping-content.html#the-hr-element">hr</a></code>要素が、対応する<code id="syntax-errors:the-table-element"><a href="tables.html#the-table-element">table</a></code>要素の<em>前の</em>兄弟となるDOMをもたらす：</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>table</c-><c- p>>&lt;</c-><c- f>hr</c-><c- p>></c->...</code></pre>

    </div>
   <dt>オプションのエラー回復を持つエラー<dd><p>より奇妙で複雑なエラー処理規則を実装することなく、制御された環境で使用できるようにするため、ユーザーエージェントは<span>解析エラー</span>に遭遇した場合に失敗が許可される。</p>
   <dt>エラー処理の動作がストリーミングのユーザーエージェントとの互換性がないエラー<dd><p>前述した<code>&lt;table>&lt;hr>...</code>のような例に対する振る舞いなど、一部のエラー処理動作は、ストリーミングのユーザーエージェント（状態を保存することなく、1回のパスでHTMLファイルを処理するユーザーエージェント）と互換性がない。そのようなユーザーエージェントとの相互運用性の問題を回避するために、そのような振る舞いに起因するいかなる構文も妥当でないと見なされる。</p>
   <dt>infoset強制をもたらす可能性のあるエラー<dd><p>XMLに基づくユーザーエージェントがHTMLパーサーに接続される場合、たとえば要素または属性名が複数のコロンを一切含まないように、XMLがHTMLファイルにより侵害されることを強要する特定の不変条件が可能である。これを処理すると、パーサーがXML互換infosetにHTML DOMを強要することを要求できる。このような処理を要求するほとんどの構文構造は妥当でないとみなされる。（2回連続ハイフンを含む、またはハイフンで終わるコメントは、HTML構文で許可される例外である。）</p>
   <dt>不均衡なパフォーマンスの低下につながるエラー<dd><p>特定の構文構造は不均衡なパフォーマンスの低下につながることがある。このような構造の使用を思いとどまらせるために、典型的な不適合とする。</p>

    <div class="example"><p>たとえば、すべての閉じられていない<code id="syntax-errors:the-i-element"><a href="text-level-semantics.html#the-i-element">i</a></code>要素が各段落で再構成されなければならないために、次のマークアップはパフォーマンスの低下をもたらし、各段落で次第により多くの要素をもたらす：</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>i</c-><c- p>></c->She dreamt.
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>i</c-><c- p>></c->She dreamt that she ate breakfast.
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>i</c-><c- p>></c->Then lunch.
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>i</c-><c- p>></c->And finally dinner.</code></pre>

     <p>この断片に対して得られるDOMは次のようになる：</p>

     <ul class="domTree"><li class="t1"><code id="syntax-errors:the-p-element"><a href="grouping-content.html#the-p-element">p</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-2"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t3"><code id="syntax-errors:text"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>She dreamt.</span></ul></ul><li class="t1"><code id="syntax-errors:the-p-element-2"><a href="grouping-content.html#the-p-element">p</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-3"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-4"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t3"><code id="syntax-errors:text-2"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>She dreamt that she ate breakfast.</span></ul></ul></ul><li class="t1"><code id="syntax-errors:the-p-element-3"><a href="grouping-content.html#the-p-element">p</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-5"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-6"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-7"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t3"><code id="syntax-errors:text-3"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>Then lunch.</span></ul></ul></ul></ul><li class="t1"><code id="syntax-errors:the-p-element-4"><a href="grouping-content.html#the-p-element">p</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-8"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-9"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-10"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t1"><code id="syntax-errors:the-i-element-11"><a href="text-level-semantics.html#the-i-element">i</a></code><ul><li class="t3"><code id="syntax-errors:text-4"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">#text</a></code>: <span>And finally dinner.</span></ul></ul></ul></ul></ul></ul>

    </div>
   <dt>壊れやすい構文構造に関係したエラー<dd><p>歴史的な理由により、比較的壊れやすい構文構造が存在する。そのような問題に偶発的に陥るユーザーの数を減らすために、これらを適合しないようにする。</p>

    <div class="example"><p>たとえば、属性における指定文字参照の特定の構文解析は、閉じセミコロンが省略されても起こる。指定文字参照を形成しない文字が続くアンパサンドを含むのは安全であるが、その文字が指定文字参照を形成<em>する</em>文字列に変更された場合、その文字列は代わりに文字として解釈されるだろう。</p>

     <p>次の断片で、属性値は"<code>?bill&amp;ted</code>"となる：</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?bill&amp;ted"</c-><c- p>></c->Bill and Ted<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-></code></pre>

     <p>しかし、次の断片では、属性値は"<code>?art&amp;copy</code>"を意図<em>せず</em>、実際には"<code>?art©</code>"となる。なぜならば最後のセミコロンがなく、"<code>&amp;copy</code>"は"<code>&amp;copy;</code>"と同様に扱われ、したがって"<code>©</code>"として解釈される：</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?art&amp;copy"</c-><c- p>></c->Art and Copy<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-></code></pre>

     <p>この問題を回避するため、すべての指定文字参照はセミコロンで終了する必要があり、セミコロンなしの指定文字参照の使用は、エラーとしてフラグ付けされる。</p>

     <p>よって、上記の例を表現するためのふさわしい方法は、次のとおり：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?bill&amp;ted"</c-><c- p>></c->Bill and Ted<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> <c- c>&lt;!-- &amp;ted is ok, since it's not a named character reference --></c-></code></pre>
     <pre><code class='html'><c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?art&amp;amp;copy"</c-><c- p>></c->Art and Copy<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> <c- c>&lt;!-- the &amp; has to be escaped, since &amp;copy </c-><em><c- c>is</c-></em><c- c> a named character reference --></c-></code></pre>

    </div>
   <dt>レガシーユーザーエージェントにおける既知の相互運用性の問題に関係したエラー<dd><p>特定の構文構造は、レガシーユーザーエージェントでは特に微妙または重大な問題を引き起こすことが知られており、したがって著者が回避するのを助けるために不適合としてマークされる。</p>

    <div class="example"><p>たとえば、これはU+0060 GRAVE ACCENT文字（`）が引用符なしの属性で許可されない理由となる。特定のユーザーエージェントにおいて、これは時に引用符として扱われる。</p>

    </div>

    <div class="example"><p>もう1つの例は、<a id="syntax-errors:no-quirks-mode" href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-no-quirks" data-x-internal="no-quirks-mode">非互換モード</a>のトリガーに必要なDOCTYPEである。なぜなら<a id="syntax-errors:quirks-mode" href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-quirks" data-x-internal="quirks-mode">互換モード</a>でのレガシーユーザーエージェントの動作は文書化されていないことが多いためである。</p>

    </div>
   <dt>著者をセキュリティ攻撃にさらす危険のあるエラー<dd><p>一定の制限は、純粋に既知のセキュリティ問題を回避するために存在している。</p>

    <div class="example"><p>たとえば、UTF-7を使用する上での制限事項は、UTF-7を用いた既知のクロスサイトスクリプティング攻撃に対して純粋に著者が犠牲になるのを避けるために存在している。<a href="references.html#refsUTF7">[UTF7]</a></p>

    </div>
   <dt>著者の意図が不明であるケース<dd><p>著者の意図が極めて不明確であるマークアップは、多くの場合不適合とされる。このエラーの早期の修正が以降のメンテナンスをより容易にする。</p>

    <div class="example"><p>たとえば、次の著者の意図は<code id="syntax-errors:the-h1,-h2,-h3,-h4,-h5,-and-h6-elements"><a href="sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h1</a></code>見出しか<code id="syntax-errors:the-h1,-h2,-h3,-h4,-h5,-and-h6-elements-2"><a href="sections.html#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements">h2</a></code>見出しなのか不明瞭である：</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Contact details<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c-></code></pre>

    </div>
   <dt>タイプミスである可能性が高いケース<dd><p>ユーザーが単純なタイプミスをした場合、エラーが早期に発見できれば手助けとなり、デバッグに要する時間を大幅に節約できるだろう。したがってこの仕様は、この仕様で定義される名前と一致しない要素名、属性名、およびその他の使用をエラーとみなす。</p>

    <div class="example"><p>たとえば、著者が<code>&lt;caption></code>の代わりに<code>&lt;capton></code>を入力した場合、これをエラーとしてフラグ付けすれば、著者はすぐにタイプミスを修正できるだろう。</p>

    </div>
   <dt>将来的に新しい構文を妨害する可能性のあるエラー<dd><p>言語構文は、将来的に拡張できるようにするために、特定のその他の無害な機能を禁止している。</p>

    <div class="example"><p>たとえば、終了タグの"属性"は現在無視され、むしろ妥当でなく、将来に言語が変更する場合は、既に展開された（かつ妥当な）コンテンツと競合することなく、その構文機能の利用を整える。</p>

    </div>
   </dl>

  <p>一部の著者は、常にすべての属性を引用符でくくる、および任意のタグを含む習慣が有益であること見いだし、HTML構文の柔軟性を利用することによって与えられる簡潔さの小さな利益を乗り越えて、そのような習慣に由来する堅牢性を好む。そうした著者を支援するため、適合性チェッカーは、このような規則が適用される動作モードを提供できる。</p>



  <h4 id="restrictions-on-content-models-and-on-attribute-values"><span class="secno">1.10.3</span> コンテンツモデルと属性値の制約<a href="#restrictions-on-content-models-and-on-attribute-values" class="self-link"></a></h4>

  

  <p>言語構文の範囲を超えて、この仕様は要素や属性を指定できる方法も制限する。この制限は、同様の理由で存在している：</p>

  <dl><dt>あいまいなセマンティックスを持つコンテンツに関係したエラー<dd><p>定義済みの意味を持つ要素の誤用を避けるために、コンテンツモデルは、入れ子があいまいな値を持つだろう場合の、要素が入れ子にすることができる方法の制限が定義される。</p>

    <p class="example">たとえば、著者がセクション全体がキー入力すべきであると示すことはまずないため、この仕様は、<code id="restrictions-on-content-models-and-on-attribute-values:the-kbd-element"><a href="text-level-semantics.html#the-kbd-element">kbd</a></code>要素の内側に<code id="restrictions-on-content-models-and-on-attribute-values:the-section-element"><a href="sections.html#the-section-element">section</a></code>要素を入れ子にするのを禁止する。</p>
   <dt>表明セマンティックスにおける矛盾を伴うエラー<dd><p>同様に、要素の誤用に著者の注意を引くため、セマンティックスにおいて明らかな矛盾がある表現も適合性エラーと見なされる。</p>

    <div class="example"><p>たとえば以下の断片では、セマンティックスは無意味となる：水平線とセルは両立することはできず、ラジオボタンとプログレスバーも両立し得ない。</p>

     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>hr</c-> <c- e>role</c-><c- o>=</c-><c- s>"cell"</c-><c- p>></c-></code></pre>
     <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>radio</c-> <c- e>role</c-><c- o>=</c-><c- s>progressbar</c-><c- p>></c-></code></pre>

    </div>

    <p class="example">別の例では、<code id="restrictions-on-content-models-and-on-attribute-values:the-li-element"><a href="grouping-content.html#the-li-element">li</a></code>要素のみを子にできる<code id="restrictions-on-content-models-and-on-attribute-values:the-ul-element"><a href="grouping-content.html#the-ul-element">ul</a></code>要素の内容モデルには制約がある。定義によりリストは0個以上のリスト項目のみからなり、<code id="restrictions-on-content-models-and-on-attribute-values:the-ul-element-2"><a href="grouping-content.html#the-ul-element">ul</a></code>要素は<code id="restrictions-on-content-models-and-on-attribute-values:the-li-element-2"><a href="grouping-content.html#the-li-element">li</a></code>要素以外のものが含まれる場合、意図するものが明らかでない。</p>
   <dt>デフォルトのスタイルが混乱を招く可能性があるケース<dd><p>特定の要素は、混乱につながる可能性が高い組み合わせとなるデフォルトのスタイルや振る舞いがある。この問題がなく同等の選択肢を持つ場所では、混乱する組み合わせは許可されない。</p>

    <p class="example">たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:the-div-element"><a href="grouping-content.html#the-div-element">div</a></code>要素は<a href="https://drafts.csswg.org/css2/#block-boxes%E2%91%A0" id="restrictions-on-content-models-and-on-attribute-values:block-box" data-x-internal="block-box">ブロックボックス</a>として、<code id="restrictions-on-content-models-and-on-attribute-values:the-span-element"><a href="text-level-semantics.html#the-span-element">span</a></code>要素は<a href="https://drafts.csswg.org/css2/#inline-box" id="restrictions-on-content-models-and-on-attribute-values:inline-box" data-x-internal="inline-box">インラインボックス</a>としてレンダリングされる。<a id="restrictions-on-content-models-and-on-attribute-values:inline-box-2" href="https://drafts.csswg.org/css2/#inline-box" data-x-internal="inline-box">インラインボックス</a>の内側に<a id="restrictions-on-content-models-and-on-attribute-values:block-box-2" href="https://drafts.csswg.org/css2/#block-boxes%E2%91%A0" data-x-internal="block-box">ブロックボックス</a>を置くことは不必要な混乱を招く。<code id="restrictions-on-content-models-and-on-attribute-values:the-div-element-2"><a href="grouping-content.html#the-div-element">div</a></code>要素のみをネストにする、または<code id="restrictions-on-content-models-and-on-attribute-values:the-span-element-2"><a href="text-level-semantics.html#the-span-element">span</a></code>要素のみをネストする、または<code id="restrictions-on-content-models-and-on-attribute-values:the-div-element-3"><a href="grouping-content.html#the-div-element">div</a></code>の内側に<code id="restrictions-on-content-models-and-on-attribute-values:the-span-element-3"><a href="text-level-semantics.html#the-span-element">span</a></code>要素をネストすることのいずれも、すべて<code id="restrictions-on-content-models-and-on-attribute-values:the-span-element-4"><a href="text-level-semantics.html#the-span-element">span</a></code>要素で<code id="restrictions-on-content-models-and-on-attribute-values:the-div-element-4"><a href="grouping-content.html#the-div-element">div</a></code>要素をネストするのと同じ目的を果たすが、後者は<a id="restrictions-on-content-models-and-on-attribute-values:inline-box-3" href="https://drafts.csswg.org/css2/#inline-box" data-x-internal="inline-box">インラインボックス</a>に<a id="restrictions-on-content-models-and-on-attribute-values:block-box-3" href="https://drafts.csswg.org/css2/#block-boxes%E2%91%A0" data-x-internal="block-box">ブロックボックス</a>を含み、この組み合わせは許可されない。</p>

    <p class="example">もう1つの例は、<a id="restrictions-on-content-models-and-on-attribute-values:interactive-content-2" href="dom.html#interactive-content-2">インタラクティブコンテンツ</a>は入れ子にできないことだろう。たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:the-button-element"><a href="form-elements.html#the-button-element">button</a></code>要素は<code id="restrictions-on-content-models-and-on-attribute-values:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素を含めることはできない。これは、そのような入れ子となる対話的な要素のデフォルトの動作がユーザーに極度の混乱をもたらすことがあるためである。これらの要素を入れ子にする代わりに、並置することができる。</p>
   <dt>仕様の誤解する可能性を示すエラー<dd><p>ときに、著者の混乱を起こす可能性のために認められないものがある。</p>

    <p class="example">たとえば、値"<code>false</code>"を<code id="restrictions-on-content-models-and-on-attribute-values:attr-fe-disabled"><a href="form-control-infrastructure.html#attr-fe-disabled">disabled</a></code>属性に設定することは許可されない。これは、要素が見かけ上enabledになることを意味するにもかかわらず、実際には要素が<em>disabled</em>を意味する（実装のために重要なものはその値ではなく、属性の存在である）ためである。</p>
   <dt>単に言語に簡素化を強制する制限を含むエラー<dd><p>一部の適合性エラーは、著者が学ぶ必要のある言語を平易にする。</p>

    <p class="example">たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:the-area-element"><a href="image-maps.html#the-area-element">area</a></code>要素の<code id="restrictions-on-content-models-and-on-attribute-values:attr-area-shape"><a href="image-maps.html#attr-area-shape">shape</a></code>属性は、実際には同義なものとして<code>circ</code>と<code id="restrictions-on-content-models-and-on-attribute-values:attr-area-shape-keyword-circle"><a href="image-maps.html#attr-area-shape-keyword-circle">circle</a></code>の値の両方を受け入れるにもかかわらず、チュートリアルやその他の学習補助を平易にするよう、<code>circ</code>値の使用を許可しない。両者を許可しても利益はないだろうが、言語を教えるときに余計な混乱を引き起こすだろう。</p>
   <dt>パーサーの特殊性を伴うエラー<dd><p>特定の要素はやや風変わりな方法（一般には歴史的な理由）で解析され、その要素の内容モデルの制約は、これらの問題に著者がさらされることの回避を意図する。</p>

    <div class="example"><p>たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素は<a id="restrictions-on-content-models-and-on-attribute-values:phrasing-content-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>の内側で許可されない。なぜならHTMLとして解析される場合、<code id="restrictions-on-content-models-and-on-attribute-values:the-form-element-2"><a href="forms.html#the-form-element">form</a></code>要素の開始タグは、<code id="restrictions-on-content-models-and-on-attribute-values:the-p-element"><a href="grouping-content.html#the-p-element">p</a></code>要素の終了タグを意味するのである。したがって、1つではなく2つの<a href="dom.html#paragraph" id="restrictions-on-content-models-and-on-attribute-values:paragraph">段落</a>をもたらす：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Welcome. <c- p>&lt;</c-><c- f>form</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>></c->Name:<c- p>&lt;/</c-><c- f>label</c-><c- p>></c-> <c- p>&lt;</c-><c- f>input</c-><c- p>>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

     <p>これは、正確に次のように解析される：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Welcome. <c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>form</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>></c->Name:<c- p>&lt;/</c-><c- f>label</c-><c- p>></c-> <c- p>&lt;</c-><c- f>input</c-><c- p>>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

    </div>
   <dt>スクリプトにデバッグ困難な手段に失敗をもたらすエラー<dd><p>一部のエラーは、デバッグ困難だろうスクリプトの問題を防ぐ手助けを意図している。</p>

    <p class="example">例えば、同じ値を持つ2つの<code id="restrictions-on-content-models-and-on-attribute-values:the-id-attribute"><a href="dom.html#the-id-attribute">id</a></code>属性を持つことは不適合である理由となる。二重のIDは、時には悲惨な結果とその原因を究明するのを困難にするとともに、間違った要素の選択をもたらす。</p>
   <dt>オーサリング時間を浪費するエラー<dd><p>一部の構造は許可されない。なぜなら、そのような構造は歴史的に無駄なオーサリング時間の多くの原因であり、その構造を避けるよう著者に推奨することで、著者は将来の取り組みに時間を節約できるためである。</p>

    <p class="example">たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:the-script-element"><a href="scripting.html#the-script-element">script</a></code>要素の<code id="restrictions-on-content-models-and-on-attribute-values:attr-script-src"><a href="scripting.html#attr-script-src">src</a></code>属性は、要素の内容を無視する。しかし、これは明らかでなく、特に要素の内容が実行可能なスクリプトのように見える場合。スクリプトが実行されないことに気づくことなく、著者がインラインスクリプトをデバッグしようする多くの時間を費やすことにつながるだろう。この問題を軽減するため、この仕様は<code id="restrictions-on-content-models-and-on-attribute-values:attr-script-src-2"><a href="scripting.html#attr-script-src">src</a></code>属性が存在する場合、<code id="restrictions-on-content-models-and-on-attribute-values:the-script-element-2"><a href="scripting.html#the-script-element">script</a></code>要素内に実行可能なスクリプトを不適合とする。これは、文書を検証する著者が、この種の誤りとともに時間を無駄にする可能性を低くすることを意味する。</p>
   <dt>XMLからの移行する著者に影響する範囲を伴うエラー<dd><p>一部の著者は、XMLとHTMLの両方で同様の結果に解釈可能なファイルを書くことを好む。この習慣は無数の微妙な困難さ（特にスクリプト、スタイル、または自動化されたシリアライゼーションの任意の種類を含む場合）のために一般的に推奨されないけれども、この仕様は、少なくとも多少の困難の軽減を意図するいくつかの制約がある。これは、著者がHTMLとXMLとの間で移行する場合に過渡的な段階として容易に使用できるようにする。</p>

    <p class="example">たとえば、<code id="restrictions-on-content-models-and-on-attribute-values:attr-lang"><a href="dom.html#attr-lang">lang</a></code>と<code id="restrictions-on-content-models-and-on-attribute-values:attr-xml-lang"><a data-x-internal="attr-xml-lang" href="https://www.w3.org/TR/xml/#sec-lang-tag">xml:lang</a></code>という属性が2つの同期を維持することを目的とするやや複雑な規則がある。</p>

    <p class="example">もう1つの例は、適合文書中の要素が、HTMLまたはXMLとして処理したかどうか、同じ名前空間に終わることの確認を意図されるようなHTMLシリアライゼーションで<code>xmlns</code>属性の値を制限するだろう。</p>
   <dt>将来の拡張のために予約される範囲を伴うエラー<dd><p>言語の今後の改正で新しい構文を可能にするために意図された構文の制限と同様に、要素や属性値の内容モデルに対する一部の制限は、HTML語彙の将来の拡張を可能にするために意図されている。</p>

    <p class="example">たとえば、U+005F LOW LINE文字（_）で始まる<code id="restrictions-on-content-models-and-on-attribute-values:attr-hyperlink-target"><a href="links.html#attr-hyperlink-target">target</a></code>属性値を特定の事前に定義された値のみに制限することは、新たな事前定義された値を、著者が定義した値と競合することなく将来の時点で導入することができる。</p>
   <dt>他の仕様の誤使用を示すエラー<dd><p>一定の制約は他の仕様によって作られた制約のサポートを意図する。</p>

    <p class="example">たとえば、メディアクエリーを取る属性が<em>妥当な</em>メディアクエリーのみの使用を要求することは、その仕様の適合規則に従うことの重要性を強調している。</p>
   </dl>



  <h3 id="suggested-reading"><span class="secno">1.11 </span> 推奨される読み物<a href="#suggested-reading" class="self-link"></a></h3>

  

  <p>以下の文書は、この仕様書の読者が興味をもつかもしれない。</p>

  <dl><dt><cite>Character Model for the World Wide Web 1.0: Fundamentals</cite> <a href="references.html#refsCHARMOD">[CHARMOD]</a><dd><blockquote><p>このアーキテクチャーの仕様は、Unicode標準とISO/IEC 10646で共同定義した国際文字集合として、ウェブ上で相互運用可能なテキスト操作のための共通の基準を仕様書の著者、ソフトウェア開発者、およびコンテンツ開発者に提供する。テーマは、用語'文字'、'エンコーディング'および'文字列'の使用、参照処理モデル、文字エンコーディングの識別および選択、文字エスケープ、ならびに文字列の索引付けを含む対処である。</blockquote><dt><cite>Unicode Security Considerations</cite> <a href="references.html#refsUTR36">[UTR36]</a><dd><blockquote><p>Unicodeは極めて多数の文字を含み、世界の様々な書記体系を包含するため、誤った使用方法は、プログラムまたはシステムをセキュリティ攻撃にさらす可能性がある。次々に製品は国際化されるので、これは特に重要である。この文書は、プログラマー、システムアナリスト、規格の開発者、およびユーザーが考慮すべきセキュリティ上の考慮事項の一部について説明し、問題のリスクを軽減するために明確な推奨事項を提供する。</blockquote><dt><cite>Web Content Accessibility Guidelines (WCAG)</cite> <a href="references.html#refsWCAG">[WCAG]</a><dd><blockquote><p>ウェブコンテンツ・アクセシビリティ・ガイドライン（WCAG）は、ウェブコンテンツをよりアクセシブルにするための幅広い推奨事項を扱う。このガイドラインに従うことにより、全盲およびロービジョン、ろうおよび難聴、学習障害、認知制限、運動制限、言語障害、光過敏性発作ならびにこれらの組み合わせを持つ人々の広い範囲にアクセシブルなコンテンツを提供できる。このガイドラインに従うことはまた、多くの場合一般のユーザーに対してウェブコンテンツをより使いやすくする。</blockquote></dl>



  <nav><a href="./">目次</a> — <a href="infrastructure.html">2 共通インフラ →</a></nav>
