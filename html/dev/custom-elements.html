<!DOCTYPE html><html class=split lang=ja>
<script src=/link-fixup.js defer=""></script><meta charset=utf-8><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport>
<title>HTML Standard, Developer's Edition æ—¥æœ¬èªè¨³</title><meta content=#3c790a name=theme-color><link rel=icon href=https://resources.whatwg.org/logo.svg>
<script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
  </script>
<style>
   .status { min-height: 0.6em; font: 1em sans-serif; width: 9em; padding: 0.3em; position: absolute; z-index: 8; right: 0.3em; background: #EEE; color: black; box-shadow: 0 0 3px #999; overflow: hidden; margin: -2em 0 0 0; border-collapse: initial; border-spacing: initial; }
   .status:hover { z-index: 9; }
   .status:focus-within { z-index: 9; }
   .status.wrapped > :not(input) { display: none; }
   .status > input { position: absolute; left: 0; top: 0; width: 1em; height: 1em; border: none; background: transparent; padding: 0; margin: 0; }
   .status > p { font-size: 0.6em; margin: 0; padding: 0; }
   .status > p + p { padding-top: 0.5em; }
   .status > p > strong { margin-left: 1.5em; }
   .status > .support { display: block; }
   .status > .support > span { padding: 0.2em 0; display: block; display: table; }
   .status > .support > span.partial { color: #666666; filter: grayscale(50%); }
   .status > .support > span.no { color: #CCCCCC; filter: grayscale(100%); }
   .status > .support > span.no::before { opacity: 0.5; }
   .status > .support > span:first-of-type { padding-top: 0.5em; }
   .status > .support > span > span { padding: 0 0.5em; display: table-cell; vertical-align: top; }
   .status > .support > span > span:first-child { width: 100%; }
   .status > .support > span > span:last-child { width: 100%; white-space: pre; padding: 0; }
   .status > .support > span::before { content: ' '; display: table-cell; min-width: 1.5em; height: 1.5em; background: no-repeat center center; background-size: contain; text-align: right; font-size: 0.75em; font-weight: bold; }
   .status > .support > .and_chr::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .and_ff::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .and_uc::before { background-image: url(https://resources.whatwg.org/browser-logos/uc.png); } /* UC Browser for Android */
   .status > .support > .android::before { background-image: url(https://resources.whatwg.org/browser-logos/android.svg); }
   .status > .support > .bb::before { background-image: url(https://resources.whatwg.org/browser-logos/bb.jpg); } /* Blackberry Browser */
   .status > .support > .chrome::before { background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg); }
   .status > .support > .edge::before { background-image: url(https://resources.whatwg.org/browser-logos/edge.svg); }
   .status > .support > .firefox::before { background-image: url(https://resources.whatwg.org/browser-logos/firefox.png); }
   .status > .support > .ie::before { background-image: url(https://resources.whatwg.org/browser-logos/ie.png); }
   .status > .support > .ie_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/ie-mobile.svg); }
   .status > .support > .ios_saf::before { background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg); }
   .status > .support > .op_mini::before { background-image: url(https://resources.whatwg.org/browser-logos/opera-mini.png); }
   .status > .support > .op_mob::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .opera::before { background-image: url(https://resources.whatwg.org/browser-logos/opera.png); }
   .status > .support > .safari::before { background-image: url(https://resources.whatwg.org/browser-logos/safari.png); }
   .status > .support > .samsung::before { background-image: url(https://resources.whatwg.org/browser-logos/samsung.png); }
   .status > .caniuse { text-align: right; font-style: italic; width: 100%; }
   .status > .caniuse + p { margin-top: 0.5em; border-top: 1px solid silver; }

   @media (max-width: 767px) {
     .status { right: -9em; }
   }
  </style><link rel=stylesheet href=styles.css>
<body>
  <script async="" src=search.js></script>
  
  
  <header id=head class="head with-buttons">
   <a href=https://whatwg.org/ class=logo><img alt=WHATWG src=https://resources.whatwg.org/logo.svg width=100 height=100></a>
   
   <hgroup><h1><a rel=home href=/dev/>HTML: The Living Standard</a></h1><h2 id=dev-edition-h2 class="no-num no-toc">Developer's Edition â€” Last Updated <span class=pubdate>11 March 2018</span></h2></hgroup>
   

   <div id=search>
    <input placeholder="Search. Press '/'" autocomplete=off name=query id=query type=search>
    <ol id=results></ol>
   </div>
  </header>

  

  
  

  
  

  

  <nav><a href=canvas.html>â† 4.12.5 canvasè¦ç´ </a> â€“ <a href=./>ç›®æ¬¡</a> â€“ <a href=semantics-other.html>4.14 å°‚ç”¨è¦ç´ ãªã—ã®ä¸€èˆ¬çš„èªå½™ â†’</a></nav><ol class=toc><li><ol><li><a href=custom-elements.html#custom-elements><span class=secno>4.13</span> ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a><ol><li><a href=custom-elements.html#custom-elements-intro><span class=secno>4.13.1</span> å°å…¥</a><ol><li><a href=custom-elements.html#custom-elements-autonomous-example><span class=secno>4.13.1.1</span> è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®ä½œæˆ</a></li><li><a href=custom-elements.html#custom-elements-customized-builtin-example><span class=secno>4.13.1.2</span> ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ ã®ä½œæˆ</a></li><li><a href=custom-elements.html#custom-elements-autonomous-drawbacks><span class=secno>4.13.1.3</span> è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®æ¬ ç‚¹</a></li><li><a href=custom-elements.html#custom-elements-upgrades-examples><span class=secno>4.13.1.4</span> Upgrading elements after their creation</a></li></ol></li><li><a href=custom-elements.html#custom-element-conformance><span class=secno>4.13.2</span> Requirements for custom element constructors</a></li><li><a href=custom-elements.html#custom-elements-core-concepts><span class=secno>4.13.3</span> Core concepts</a></li><li><a href=custom-elements.html#custom-elements-api><span class=secno>4.13.4</span> The <code>CustomElementRegistry</code> interface</a></li><li><a href=custom-elements.html#custom-element-reactions><span class=secno>4.13.5</span> Custom element reactions</a></li></ol></li></ol></li></ol><h3 id=custom-elements><span class=secno>4.13</span> ã‚«ã‚¹ã‚¿ãƒ è¦ç´ <a href=#custom-elements class=self-link></a></h3><div class=status><input onclick=toggleStatus(this) value=â‹° type=button><p class=support><strong>Support:</strong> custom-elementsv1<span class="and_chr partial"><span>Chrome for Android (limited)</span> <span>64+</span></span><span class="chrome partial"><span>Chrome (limited)</span> <span>54+</span></span><span class="ios_saf partial"><span>iOS Safari (limited)</span> <span>10.3+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11.8+</span></span><span class="firefox partial"><span>Firefox (limited)</span> <span>59+</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>6.2+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="safari partial"><span>Safari (limited)</span> <span>10.1+</span></span><span class="android partial"><span>Android Browser (limited)</span> <span>62+</span></span><span class="opera partial"><span>Opera (limited)</span> <span>41+</span></span><p class=caniuse>Source: <a href="https://caniuse.com/#feat=custom-elementsv1">caniuse.com</a></div>

  <h4 id=custom-elements-intro><span class=secno>4.13.1</span> å°å…¥<a href=#custom-elements-intro class=self-link></a></h4>

  

  <p><a href=#custom-element id=custom-elements-intro:custom-element>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã¯ã€è‘—è€…ã«å®Œå…¨ã«æ©Ÿèƒ½ã™ã‚‹DOMè¦ç´ ã‚’ç‹¬è‡ªã«æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã™ã‚‹ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒ†ã‚£ãƒ³ã‚°ãªã©ã§äº‹å¾Œã«è¿½åŠ ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®å‹•ä½œã¨ã¨ã‚‚ã«ã€è‘—è€…ã¯æ–‡æ›¸å†…ã§éæ¨™æº–è¦ç´ ã‚’å¸¸ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ããŸãŒã€ãã®ã‚ˆã†ãªè¦ç´ ã¯æ­´å²çš„ã«ä¸é©åˆã§ã‚ã‚Šã€ã‚ã¾ã‚Šæ©Ÿèƒ½ã—ãªã‹ã£ãŸã€‚ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚’<a href=#element-definition id=custom-elements-intro:element-definition>å®šç¾©ã™ã‚‹</a>ã“ã¨ã§ã€è‘—è€…ã¯ãƒ‘ãƒ¼ã‚µãƒ¼ã«è¦ç´ ã‚’æ­£ã—ãæ§‹æˆã™ã‚‹æ–¹æ³•ã¨ã€ãã®ã‚¯ãƒ©ã‚¹ã®è¦ç´ ãŒå¤‰æ›´ã«ã©ã®ã‚ˆã†ã«åå¿œã™ã‚‹ã‹ã‚’é€šçŸ¥ã§ãã‚‹ã€‚</p>

  <p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã¯ã€ï¼ˆã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®å®šç¾©ã®ã‚ˆã†ãªï¼‰ä½ãƒ¬ãƒ™ãƒ«ã®è‘—è€…å…¬é–‹æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã«é–¢ã—ã¦ã€ï¼ˆHTMLã®è¦ç´ ã®ã‚ˆã†ãªï¼‰æ—¢å­˜ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ã‚’èª¬æ˜ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€"ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆç†åŒ–ã™ã‚‹"ãŸã‚ã®å¤§ããªåŠªåŠ›ã®ä¸€éƒ¨ã§ã‚ã‚‹ã€‚ä»Šæ—¥ã€HTMLã®æ—¢å­˜è¦ç´ ã®æŒ¯ã‚‹èˆã„ã‚’å®Œå…¨ã«èª¬æ˜ã™ã‚‹ã“ã¨ã‚’å¦¨ã’ã‚‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ï¼ˆæ©Ÿèƒ½çš„ãŠã‚ˆã³æ„å‘³çš„ãªè¦ç´ ï¼‰ã®æ©Ÿèƒ½ã«ã¯å¤šãã®åˆ¶é™ãŒã‚ã‚‹ãŒã€æˆ‘ã€…ã¯æ™‚é–“ã®çµŒéã¨ã¨ã‚‚ã«ã“ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’ç¸®å°ã—ãŸã„ã¨æ€ã†ã€‚</p>

  <h5 id=custom-elements-autonomous-example><span class=secno>4.13.1.1</span> è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®ä½œæˆ<a href=#custom-elements-autonomous-example class=self-link></a></h5>

  

  <p><a href=#autonomous-custom-element id=custom-elements-autonomous-example:autonomous-custom-element>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹ãŸã‚ã«ã€å›½æ——ã®å°ã•ãªã‚¢ã‚¤ã‚³ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã‚«ãƒ—ã‚»ãƒ«åŒ–ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚’å®šç¾©ã—ã¦ã¿ã‚ˆã†ã€‚ç§ãŸã¡ã®ç›®æ¨™ã¯ã€æ¬¡ã®ã‚ˆã†ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã‚ã‚‹ï¼š</p>

  <pre>&lt;flag-icon country="nl"&gt;&lt;/flag-icon&gt;</pre>

  <p>ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€ã¾ãšã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®ã‚¯ãƒ©ã‚¹ã‚’å®£è¨€ã—ã€<code>HTMLElement</code>ã‚’æ‹¡å¼µã™ã‚‹ï¼š</p>

  <pre>class FlagIcon extends HTMLElement {
  constructor() {
    super();
    this._countryCode = null;
  }

  static get observedAttributes() { return ["country"]; }

  attributeChangedCallback(name, oldValue, newValue) {
    // name will always be "country" due to observedAttributes
    this._countryCode = newValue;
    this._updateRendering();
  }
  connectedCallback() {
    this._updateRendering();
  }

  get country() {
    return this._countryCode;
  }
  set country(v) {
    this.setAttribute("country", v);
  }

  _updateRendering() {
    // Left as an exercise for the reader. But, you'll probably want to
    // check this.ownerDocument.defaultView to see if we've been
    // inserted into a document with a browsing context, and avoid
    // doing any work if not.
  }
}</pre>

  <p>æ¬¡ã«ã€è¦ç´ ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«æ¬¡ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦å¿…è¦ãŒã‚ã‚‹ï¼š</p>

  <pre>customElements.define("flag-icon", FlagIcon);</pre>

  <p>ã“ã®æ™‚ç‚¹ã§ã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯å‹•ä½œã™ã‚‹ã€‚<code>flag-icon</code>ã‚¿ã‚°ã‚’è¦‹ã‚‹ãŸã³ã«ã€ãƒ‘ãƒ¼ã‚µãƒ¼ã¯<code>FlagIcon</code>ã‚¯ãƒ©ã‚¹ã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã€è¦ç´ ã®å†…éƒ¨çŠ¶æ…‹ã‚’è¨­å®šã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ï¼ˆé©åˆ‡ãªå ´åˆï¼‰ã€æ–°ã—ã„<code>country</code>å±æ€§ã«ã¤ã„ã¦ã‚³ãƒ¼ãƒ‰ã«ä¼ãˆã‚‹ã€‚</p>

  <p>DOM APIã‚’ä½¿ç”¨ã—ã¦<code>flag-icon</code>è¦ç´ ã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ï¼š</p>

  <pre>const flagIcon = document.createElement("flag-icon")
flagIcon.country = "jp"
document.body.appendChild(flagIcon)</pre>

  <p>æœ€å¾Œã«ã€<a href=#custom-element-constructor id=custom-elements-autonomous-example:custom-element-constructor>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿</a>è‡ªä½“ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚ã¤ã¾ã‚Šã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã§ã‚ã‚‹ï¼š</p>

  <pre>const flagIcon = new FlagIcon()
flagIcon.country = "jp"
document.body.appendChild(flagIcon)</pre>

  <h5 id=custom-elements-customized-builtin-example><span class=secno>4.13.1.2</span> ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ ã®ä½œæˆ<a href=#custom-elements-customized-builtin-example class=self-link></a></h5>

  

  <p><a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã¯ã€<a href=#autonomous-custom-element id=custom-elements-customized-builtin-example:autonomous-custom-element>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã¨ã¯ã‚ãšã‹ã«ç•°ãªã‚‹å®šç¾©ãŒã‚ã‚Šã€ãã—ã¦å¤§ããç•°ãªã‚‹ä½¿ã‚ã‚Œæ–¹ã‚’ã™ã‚‹ã€ç‹¬è‡ªã®ç¨®é¡ã®<a href=#custom-element id=custom-elements-customized-builtin-example:custom-element>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã§ã‚ã‚‹ã€‚ã“ã®è¦ç´ ã¯ã€æ–°ã—ã„ã‚«ã‚¹ã‚¿ãƒ æ©Ÿèƒ½ã§HTMLã®æ—¢å­˜è¦ç´ ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ã§ã€HTMLã®æ—¢å­˜è¦ç´ ç”±æ¥ã®å‹•ä½œã®å†åˆ©ç”¨ã‚’å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«å­˜åœ¨ã™ã‚‹ã€‚æ®‹å¿µãªã“ã¨ã«ã€HTMLè¦ç´ ã®æ—¢å­˜ã®å‹•ä½œã®å¤šããŒ<a href=#autonomous-custom-element id=custom-elements-customized-builtin-example:autonomous-custom-element-2>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã‚’ç´”ç²‹ã«ä½¿ç”¨ã—ã¦è¤‡è£½ã§ããªã„ãŸã‚ã€ã“ã‚Œã¯é‡è¦ã§ã‚ã‚‹ã€‚ä»£ã‚ã‚Šã«ã€<a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-2>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã¯ã€æ—¢å­˜ã®è¦ç´ ã«ã‚«ã‚¹ã‚¿ãƒ æ§‹ç¯‰å‹•ä½œã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ãƒƒã‚¯ã€ãŠã‚ˆã³ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒã‚§ãƒ¼ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å¯èƒ½ã«ã—ã€æ—¢å­˜ã®è¦ç´ ã®ä¸Šã«ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’æœ¬è³ªçš„ã«"æ··åœ¨"ã•ã›ã‚‹ã€‚</p>

  <p><a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-3>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚„ä»–ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãŒè¦ç´ ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ãŠã‚ˆã³å‹•ä½œã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«è¦ç´ ã®ãƒ­ãƒ¼ã‚«ãƒ«åã¨ã—ã¦æ‰±ã†ã®ã§ã€<a href=#autonomous-custom-element id=custom-elements-customized-builtin-example:autonomous-custom-element-3>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã¨ã¯ç•°ãªã‚‹æ§‹æ–‡ã‚’å¿…è¦ã¨ã™ã‚‹ã€‚ã¤ã¾ã‚Šã€æ—¢å­˜ã®å‹•ä½œã®ä¸Šã«æ§‹ç¯‰ã™ã‚‹<a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-4>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã®æ¦‚å¿µã¯ã€å…ƒã®ãƒ­ãƒ¼ã‚«ãƒ«åã‚’ä¿æŒã™ã‚‹æ‹¡å¼µè¦ç´ ã«æ±ºå®šçš„ã«ä¾å­˜ã™ã‚‹ã€‚</p>

  <p>ã“ã®ä¾‹ã«ãŠã„ã¦ã€<code>plastic-button</code>ã¨ã„ã†<a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-5>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã‚’ä½œæˆã™ã‚‹ã€‚ã“ã‚Œã¯é€šå¸¸ã®ãƒœã‚¿ãƒ³ã®ã‚ˆã†ã«å‹•ä½œã™ã‚‹ãŒã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãŸã³ã«ãƒ•ã‚¡ãƒ³ã‚·ãƒ¼ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚ä»Šå›ã¯<code>HTMLElement</code>ã®ä»£ã‚ã‚Šã«<code>HTMLButtonElement</code>ã‚’æ‹¡å¼µã™ã‚‹ãŒã€å‰ã¨åŒã˜ã‚ˆã†ã«ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã‚‹ï¼š</p>

  <pre>class PlasticButton extends HTMLButtonElement {
  constructor() {
    super();

    this.addEventListener("click", () =&gt; {
      // Draw some fancy animation effects!
    });
  }
}</pre>

  <p>ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã‚’å®šç¾©ã™ã‚‹å ´åˆã€<code>extends</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼š</p>

  <pre>customElements.define("plastic-button", PlasticButton, { extends: "button" });</pre>

  <p>ä¸€èˆ¬ã«ã€æ‹¡å¼µã•ã‚Œã¦ã„ã‚‹è¦ç´ ã®åå‰ã¯ã€åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å…±æœ‰ã™ã‚‹è¦ç´ ï¼ˆ<code>HTMLQuoteElement</code>ã‚’å…±æœ‰ã™ã‚‹<code id=custom-elements-customized-builtin-example:the-q-element><a href=text-level-semantics.html#the-q-element>q</a></code>ã¨<code id=custom-elements-customized-builtin-example:the-blockquote-element><a href=grouping-content.html#the-blockquote-element>blockquote</a></code>ã®ä¸¡è€…ãªã©ï¼‰ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã€æ‹¡å¼µã™ã‚‹è¦ç´ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å˜ã«èª¿ã¹ã‚‹ã ã‘ã§ã¯åˆ¤æ–­ã™ã‚‹ã“ã¨ãŒã§ããªã„ã€‚</p>

  <p>To construct our <a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-6>customized built-in element</a> from parsed HTML source text, we use
  the <code id=custom-elements-customized-builtin-example:attr-is><a href=#attr-is>is</a></code> attribute on a <code id=custom-elements-customized-builtin-example:the-button-element><a href=form-elements.html#the-button-element>button</a></code> element:</p>

  <pre>&lt;button is="plastic-button"&gt;Click Me!&lt;/button&gt;</pre>

  <p><a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-7>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã‚’<a href=#autonomous-custom-element id=custom-elements-customized-builtin-example:autonomous-custom-element-4>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã¨ã—ã¦ä½¿ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã†ã¾ã<em>ã„ã‹ãªã„</em>ã€‚ã¤ã¾ã‚Šã€<code>&lt;plastic-button&gt;Click me?&lt;/plastic-button&gt;</code>ã¯ç‰¹åˆ¥ãªå‹•ä½œã‚’ã—ãªã„<code>HTMLElement</code>ã‚’ä½œæˆã™ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚</p>

  <p>If you need to create a customized built-in element programmatically, you can use the following
  form of <code id=custom-elements-customized-builtin-example:dom-document-createelement><a data-x-internal=dom-document-createelement href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelement>createElement()</a></code>:</p>

  <pre>const plasticButton = document.createElement("button", { is: "plastic-button" });
plasticButton.textContent = "Click me!";</pre>

  <p>å‰ã¨åŒã˜ã‚ˆã†ã«ã€ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚‚å‹•ä½œã™ã‚‹ï¼š</p>

  <pre>const plasticButton2 = new PlasticButton();
console.log(plasticButton2.localName);  // will output "button"
console.assert(plasticButton2 instanceof PlasticButton);
console.assert(plasticButton2 instanceof HTMLButtonElement);</pre>

  <p>Note that when creating a customized built-in element programmatically, the <code id=custom-elements-customized-builtin-example:attr-is-2><a href=#attr-is>is</a></code> attribute will not be present in the DOM, since it was not explicitly
  set. However, <a href=#attr-is-during-serialization>it will be added to the output when
  serializing</a>:</p>

  <pre>console.assert(!plasticButton.hasAttribute("is"));
console.log(plasticButton.outerHTML); // will output '&lt;button is="plastic-button"&gt;&lt;/button&gt;'</pre>

  <p>Regardless of how it is created, all the of the ways in which <code id=custom-elements-customized-builtin-example:the-button-element-2><a href=form-elements.html#the-button-element>button</a></code> is special
  apply to such "plastic buttons" as well: their focus behavior, ability to participate in <span>form submission</span>, the <code id=custom-elements-customized-builtin-example:attr-fe-disabled><a href=form-control-infrastructure.html#attr-fe-disabled>disabled</a></code> attribute, and so on.</p>

  <p id=customized-built-in-element-restrictions><a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-8>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã¯ã€æœ‰ç”¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæä¾›ã™ã‚‹å‹•ä½œã¾ãŸã¯APIã‚’æŒã¤æ—¢å­˜ã®HTMLè¦ç´ ã‚’æ‹¡å¼µã‚’å¯èƒ½ã«ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã€‚ãã®ãŸã‚ã€ã“ã®ä»•æ§˜ã§å®šç¾©ã•ã‚Œã‚‹æ—¢å­˜ã®HTMLè¦ç´ ã®ã¿ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ãŒã§ãã€<a id=custom-elements-customized-builtin-example:element-interface href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-interface data-x-internal=element-interface>è¦ç´ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹</a>ã¨ã—ã¦<code>HTMLUnknownElement</code>ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«å®šç¾©ã•ã‚ŒãŸ<code id=custom-elements-customized-builtin-example:bgsound><a href=obsolete.html#bgsound>bgsound</a></code>ã€<code id=custom-elements-customized-builtin-example:blink><a href=obsolete.html#blink>blink</a></code>ã€<code id=custom-elements-customized-builtin-example:isindex><a href=obsolete.html#isindex>isindex</a></code>ã€<code id=custom-elements-customized-builtin-example:keygen><a href=obsolete.html#keygen>keygen</a></code>ã€<code id=custom-elements-customized-builtin-example:multicol><a href=obsolete.html#multicol>multicol</a></code>ã€<code id=custom-elements-customized-builtin-example:nextid><a href=obsolete.html#nextid>nextid</a></code>ã€ã¾ãŸã¯<code id=custom-elements-customized-builtin-example:spacer><a href=obsolete.html#spacer>spacer</a></code>ãªã©ã®ãƒ¬ã‚¬ã‚·ãƒ¼è¦ç´ ã¯æ‹¡å¼µã§ããªã„ã€‚</p>

  <p>ã“ã®è¦ä»¶ã®1ã¤ã®ç†ç”±ã¯å°†æ¥ã®äº’æ›æ€§ã§ã‚ã‚‹ã€‚ã‚‚ã—<a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-9>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ãŒã€ãŸã¨ãˆã°<code>combobox</code>ã®ã‚ˆã†ãªã€ç¾åœ¨ä¸æ˜ã®è¦ç´ ã‚’æ‹¡å¼µã—ãŸã‚‚ã®ãŒå®šç¾©ã•ã‚ŒãŸãªã‚‰ã€æ´¾ç”Ÿã—ãŸ<a href=#customized-built-in-element id=custom-elements-customized-builtin-example:customized-built-in-element-10>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã®ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæä¾›ã®å‹•ä½œã«èˆˆå‘³ã‚’æŒãŸãªã„åŸºæœ¬è¦ç´ ã«ä¾å­˜ã™ã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã€ã“ã‚Œã¯ã“ã®ä»•æ§˜ãŒå°†æ¥<code>combobox</code>è¦ç´ ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã‚’å¦¨ã’ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚</p>

  <h5 id=custom-elements-autonomous-drawbacks><span class=secno>4.13.1.3</span> è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã®æ¬ ç‚¹<a href=#custom-elements-autonomous-drawbacks class=self-link></a></h5>

  

  <p>ä»¥ä¸‹ã§è¦å®šã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ãã—ã¦ä¸Šè¨˜ã§è§¦ã‚ŒãŸã‚ˆã†ã«ã€å˜ã«<code>taco-button</code>ã¨ã„ã†è¦ç´ ã‚’å®šç¾©ã—ã¦ä½¿ç”¨ã—ã¦ã‚‚ã€ãã®ã‚ˆã†ãªè¦ç´ ãŒãƒœã‚¿ãƒ³ã‚’<a href=dom.html#represents id=custom-elements-autonomous-drawbacks:represents>è¡¨ã™</a>ã“ã¨ã‚’æ„å‘³ã—ãªã„ã€‚ã¤ã¾ã‚Šã€ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã€æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æŠ€è¡“ãªã©ã®ãƒ„ãƒ¼ãƒ«ã¯ã€å®šç¾©ã•ã‚ŒãŸåå‰ã ã‘ã«åŸºã¥ã„ã¦ã€çµæœã®è¦ç´ ã‚’ãƒœã‚¿ãƒ³ã¨ã—ã¦è‡ªå‹•çš„ã«å‡¦ç†ã—ãªã„ã€‚</p>

  <p><a href=#autonomous-custom-element id=custom-elements-autonomous-drawbacks:autonomous-custom-element>è‡ªå¾‹ã‚«ã‚¹ã‚¿ãƒ è¦ç´ </a>ã‚’ä¾ç„¶ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ä¸€æ–¹ã§ã€æ§˜ã€…ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ‰€æœ›ã®ãƒœã‚¿ãƒ³ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä¼ãˆã‚‹ãŸã‚ãŸã‚ã«ã¯ã€è¤‡æ•°ã®æŠ€è¡“ã‚’ç”¨ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼š</p>

  <ul><li><p><code id=custom-elements-autonomous-drawbacks:attr-tabindex><a href=interaction.html#attr-tabindex>tabindex</a></code>å±æ€§ã®è¿½åŠ ã¯ã€<code>taco-button</code>ã‚’<a id=custom-elements-autonomous-drawbacks:interactive-content-2 href=dom.html#interactive-content-2>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a>ã«ã—ã€<a href=interaction.html#focusable-area id=custom-elements-autonomous-drawbacks:focusable-area>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½</a>ã«ã™ã‚‹ã€‚ã‚‚ã—<code>taco-button</code>ã‚’è«–ç†çš„ã«ç„¡åŠ¹ã«ã™ã‚‹ãªã‚‰ã°ã€<code id=custom-elements-autonomous-drawbacks:attr-tabindex-2><a href=interaction.html#attr-tabindex>tabindex</a></code>å±æ€§ã‚’å‰Šé™¤ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã ã‚ã†ã“ã¨ã«æ³¨æ„ã™ã‚‹ã“ã¨ã€‚</li><li><p>å¤šæ§˜ãªARIAå±æ€§ã®è¿½åŠ ã¯ã€ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æŠ€è¡“ã«ä¼ãˆã‚‹ã®ã«å½¹ç«‹ã¤ã€‚ãŸã¨ãˆã°ã€<code id=custom-elements-autonomous-drawbacks:attr-aria-role><a href=infrastructure.html#attr-aria-role>role</a></code>å±æ€§ã‚’"<code id=custom-elements-autonomous-drawbacks:attr-aria-role-button><a data-x-internal=attr-aria-role-button href=http://momdo.github.io/wai-aria-1.1/#button>button</a></code>"ã«è¨­å®šã™ã‚‹ã¨ã€ã“ã‚Œã¯ãƒœã‚¿ãƒ³ã§ã‚ã‚‹ã¨ã„ã†ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä¼ãˆã‚‹ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æŠ€è¡“ã§é€šå¸¸ã®ãƒœã‚¿ãƒ³ã®ã‚ˆã†ãªã‚„ã‚Šå–ã‚Šã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¨æ­£å¸¸ã«ã‚„ã‚Šã¨ã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æŠ€è¡“ãŒå­ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ¼ãƒ‰ã‚’æ¨ªæ–­ã—ã¦é€šçŸ¥ã™ã‚‹ä»£ã‚ã‚Šã«ã€<code id=custom-elements-autonomous-drawbacks:attr-aria-label><a data-x-internal=attr-aria-label href=http://momdo.github.io/wai-aria-1.1/#aria-label>aria-label</a></code>å±æ€§ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€ãƒœã‚¿ãƒ³ã«<a href=http://momdo.github.io/wai-aria-1.1/#dfn-accessible-name id=custom-elements-autonomous-drawbacks:concept-accessible-name data-x-internal=concept-accessible-name>ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªåå‰</a>ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãã‚Œã‹ã‚‰ãƒœã‚¿ãƒ³ãŒè«–ç†çš„ã«ç„¡åŠ¹ã«ã§ã‚ã‚‹ã¨ãã«<code id=custom-elements-autonomous-drawbacks:attr-aria-disabled><a data-x-internal=attr-aria-disabled href=http://momdo.github.io/wai-aria-1.1/#aria-disabled>aria-disabled</a></code>ã‚’"<code>true</code>"ã«è¨­å®šã™ã‚‹ã¨ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æŠ€è¡“ã«ãƒœã‚¿ãƒ³ã®ç„¡åŠ¹çŠ¶æ…‹ãŒä¼ã‚ã‚‹ã€‚</li><li><p>é€šå¸¸äºˆæƒ³ã•ã‚Œã‚‹ãƒœã‚¿ãƒ³ã®å‹•ä½œã‚’å‡¦ç†ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒœã‚¿ãƒ³ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¼ãˆã‚‹ã“ã¨ã‚’æ‰‹ä¼ã†ã€‚ã“ã®å ´åˆã€æœ€ã‚‚é–¢é€£æ€§ã®é«˜ã„ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯ã€é©åˆ‡ãª<code id=custom-elements-autonomous-drawbacks:event-keydown><a data-x-internal=event-keydown href=https://w3c.github.io/uievents/#event-type-keydown>keydown</a></code>ã‚¤ãƒ™ãƒ³ãƒˆã‚’<code id=custom-elements-autonomous-drawbacks:event-click><a data-x-internal=event-click href=https://w3c.github.io/uievents/#event-type-click>click</a></code>ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ãƒ—ãƒ­ã‚­ã‚·ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã®ã§ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¨ã‚¯ãƒªãƒƒã‚¯ã®ä¸¡æ–¹ã§ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</li><li><p><code>taco-button</code>è¦ç´ ã«æä¾›ã•ã‚Œã‚‹ä»»æ„ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¦–è¦šã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã«åŠ ãˆã¦ã€è¦–è¦šã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã¯ã¾ãŸã€ä¾‹ãˆã°ç„¡åŠ¹ã«ãªã‚‹ãªã©ã€è«–ç†çŠ¶æ…‹ã®å¤‰åŒ–ã‚’åæ˜ ã™ã‚‹ã‚ˆã†ã«æ›´æ–°ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã¤ã¾ã‚Šã€<code>taco-button</code>ã®è¦å‰‡ã‚’æŒã¤ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã¯ã™ã¹ã¦ã€<code>taco-button[disabled]</code>ã®è¦å‰‡ã‚‚å¿…è¦ã¨ãªã‚‹ã€‚</li></ul>

  <p>ã“ã‚Œã‚‰ã®ç‚¹ã‚’å¿µé ­ã«ç½®ã„ã¦ã€ï¼ˆç„¡åŠ¹ã«ã™ã‚‹æ©Ÿèƒ½ã‚’å«ã‚€ï¼‰ãƒœã‚¿ãƒ³ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’ä¼ãˆã‚‹è²¬ä»»ã‚’è² ã£ãŸãƒ•ãƒ«æ©Ÿèƒ½ã®<code>taco-button</code>ã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ï¼š</p>

  <pre>class TacoButton extends HTMLElement {
  static get observedAttributes() { return ["disabled"]; }

  constructor() {
    super();

    this.addEventListener("keydown", e =&gt; {
      if (e.keyCode === 32 || e.keyCode === 13) {
        this.dispatchEvent(new MouseEvent("click", {
          bubbles: true,
          cancelable: true
        }));
      }
    });

    this.addEventListener("click", e =&gt; {
      if (this.disabled) {
        e.preventDefault();
        e.stopPropagation();
      }
    });

    this._observer = new MutationObserver(() =&gt; {
      this.setAttribute("aria-label", this.textContent);
    });
  }

  connectedCallback() {
    this.setAttribute("role", "button");
    this.setAttribute("tabindex", "0");

    this._observer.observe(this, {
      childList: true,
      characterData: true,
      subtree: true
    });
  }

  disconnectedCallback() {
    this._observer.disconnect();
  }

  get disabled() {
    return this.hasAttribute("disabled");
  }

  set disabled(v) {
    if (v) {
      this.setAttribute("disabled", "");
    } else {
      this.removeAttribute("disabled");
    }
  }

  attributeChangedCallback() {
    // only is called for the disabled attribute due to observedAttributes
    if (this.disabled) {
      this.removeAttribute("tabindex");
      this.setAttribute("aria-disabled", "true");
    } else {
      this.setAttribute("tabindex", "0");
      this.setAttribute("aria-disabled", "false");
    }
  }
}</pre>

  <p>ã“ã®ã‚ˆã†ã«ã‹ãªã‚Šè¤‡é›‘ãªè¦ç´ å®šç¾©ãŒã‚ã£ã¦ã‚‚ã€ãã®è¦ç´ ã¯ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã®ãŸã‚ã«ä½¿ç”¨ã™ã‚‹å–œã³ã¨ã¯ãªã‚‰ãªã„ã€‚è‡ªèº«ã®æ„å¿—ã®<code id=custom-elements-autonomous-drawbacks:attr-tabindex-3><a href=interaction.html#attr-tabindex>tabindex</a></code>ã‚„<code id=custom-elements-autonomous-drawbacks:attr-aria-*><a href=infrastructure.html#attr-aria-*>aria-*</a></code>å±æ€§ã‚’ç¶™ç¶šçš„ã«"ç™ºèŠ½"ã•ã›ã‚‹ã€‚ã“ã‚Œã¯ã€ç¾åœ¨ã®ã¨ã“ã‚ã€ï¼ˆé€šå¸¸ã¯ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‹•ä½œã‚’ä¸Šæ›¸ãã§ãã‚‹ã‚ˆã†ã«äºˆç´„ã•ã‚Œã¦ã„ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšï¼‰ã“ã‚Œã‚‰ã®å±æ€§ã‚’å¼·åˆ¶çš„ã«ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ã«å¯¾ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚„ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å‹•ä½œã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã§ã‚ã‚‹ã€‚</p>

  <p>å¯¾ç…§çš„ã«ã€å‰ç¯€ã§ç¤ºã—ãŸã‚ˆã†ã«ã€å˜ä¸€ã®<a href=#customized-built-in-element id=custom-elements-autonomous-drawbacks:customized-built-in-element>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã¯ã€<code id=custom-elements-autonomous-drawbacks:the-button-element><a href=form-elements.html#the-button-element>button</a></code>è¦ç´ ã®ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã¨å‹•ä½œã‚’è‡ªå‹•çš„ã«ç¶™æ‰¿ã™ã‚‹ã€‚ã“ã‚Œã‚‰ã®å‹•ä½œã‚’æ‰‹å‹•ã§å®Ÿè£…ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚ä¸€èˆ¬ã«ã€HTMLã®æ—¢å­˜è¦ç´ ã®ä¸Šã«æ§‹ç¯‰ã•ã‚Œã‚‹é‡è¦ãªå‹•ä½œã‚„ã‚»ãƒãƒ³ãƒ†ã‚£ã‚¯ã‚¹ã‚’æŒã¤è¦ç´ ã«ã¤ã„ã¦ã¯ã€<a href=#customized-built-in-element id=custom-elements-autonomous-drawbacks:customized-built-in-element-2>ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸçµ„ã¿è¾¼ã¿è¦ç´ </a>ã®é–‹ç™ºã€ä¿å®ˆã€ãŠã‚ˆã³æ¶ˆè²»ãŒå®¹æ˜“ã«ãªã‚‹ã€‚</p>

  <h5 id=custom-elements-upgrades-examples><span class=secno>4.13.1.4</span> Upgrading elements after their creation<a href=#custom-elements-upgrades-examples class=self-link></a></h5>

  

  <p>Because <a href=#element-definition id=custom-elements-upgrades-examples:element-definition>element definition</a> can occur at any time, a non-custom element could be
  <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-create-element id=custom-elements-upgrades-examples:create-an-element data-x-internal=create-an-element>created</a>, and then later become a <a href=#custom-element id=custom-elements-upgrades-examples:custom-element>custom
  element</a> after an appropriate <span>definition</span> is
  registered. We call this process "upgrading" the element, from a normal element into a custom
  element.</p>

  <p><span>Upgrades</span> enable scenarios where it may be
  preferable for <span>custom element definitions</span> to be
  registered after relevant elements have been initially created, such as by the parser. They allow
  progressive enhancement of the content in the custom element. For example, in the following HTML
  document the element definition for <code>img-viewer</code> is loaded
  asynchronously:</p>

  <pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;title&gt;Image viewer example&lt;/title&gt;

&lt;img-viewer filter="Kelvin"&gt;
  &lt;img src="images/tree.jpg" alt="A beautiful tree towering over an empty savannah"&gt;
&lt;/img-viewer&gt;

&lt;script src="js/elements/img-viewer.js" async&gt;&lt;/script&gt;</pre>

  <p>The definition for the <code>img-viewer</code> element here is loaded using a
  <code id=custom-elements-upgrades-examples:the-script-element><a href=scripting.html#the-script-element>script</a></code> element marked with the <code id=custom-elements-upgrades-examples:attr-script-async><a href=scripting.html#attr-script-async>async</a></code>
  attribute, placed after the <code>&lt;img-viewer&gt;</code> tag in the markup. While the
  script is loading, the <code>img-viewer</code> element will be treated as an undefined
  element, similar to a <code id=custom-elements-upgrades-examples:the-span-element><a href=text-level-semantics.html#the-span-element>span</a></code>. Once the script loads, it will define the <code>img-viewer</code> element, and the existing <code>img-viewer</code> element on
  the page will be upgraded, applying the custom element's definition (which presumably includes
  applying an image filter identified by the string "Kelvin", enhancing the image's visual
  appearance).</p>

  <hr>

  <p>Note that <span>upgrades</span> only apply to elements in the
  document tree. (Formally, elements that are <a id=custom-elements-upgrades-examples:connected href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a>.) An element that is not
  inserted into a document will stay un-upgraded. An example illustrates this point:</p>

  <pre>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;title&gt;Upgrade edge-cases example&lt;/title&gt;

&lt;example-element&gt;&lt;/example-element&gt;

&lt;script&gt;
  "use strict";

  const inDocument = document.querySelector("example-element");
  const outOfDocument = document.createElement("example-element");

  // Before the element definition, both are HTMLElement:
  console.assert(inDocument instanceof HTMLElement);
  console.assert(outOfDocument instanceof HTMLElement);

  class ExampleElement extends HTMLElement {}
  customElements.define("example-element", ExampleElement);

  // After element definition, the in-document element was upgraded:
  console.assert(inDocument instanceof ExampleElement);
  console.assert(!(outOfDocument instanceof ExampleElement));

  document.body.appendChild(outOfDocument);

  // Now that we've moved the element into the document, it too was upgraded:
  console.assert(outOfDocument instanceof ExampleElement);
&lt;/script&gt;</pre>

  <h4 id=custom-element-conformance><span class=secno>4.13.2</span> Requirements for custom element constructors<a href=#custom-element-conformance class=self-link></a></h4>

  <p>When authoring <a href=#custom-element-constructor id=custom-element-conformance:custom-element-constructor>custom element constructors</a>,
  authors are bound by the following conformance requirements:</p>

  <ul><li><p>A parameter-less call to <code>super()</code> must be the first statement in the
   constructor body, to establish the correct prototype chain and <b>this</b> value before any
   further code is run.</li><li><p>A <code>return</code> statement must not appear anywhere inside the constructor
   body, unless it is a simple early-return (<code>return</code> or <code>return
   this</code>).</li><li><p>The constructor must not use the <code id=custom-element-conformance:dom-document-write><a href=dynamic-markup-insertion.html#dom-document-write>document.write()</a></code>
   or <code id=custom-element-conformance:dom-document-open><a href=dynamic-markup-insertion.html#dom-document-open>document.open()</a></code> methods.</li><li><p>The element's attributes and children must not be inspected, as in the non-<span>upgrade</span> case none will be present, and relying on
   upgrades makes the element less usable.</li><li><p>The element must not gain any attributes or children, as this violates the expectations of
   consumers who use the <code id=custom-element-conformance:dom-document-createelement><a data-x-internal=dom-document-createelement href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelement>createElement</a></code> or <code id=custom-element-conformance:dom-document-createelementns><a data-x-internal=dom-document-createelementns href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelementns>createElementNS</a></code> methods.</li><li><p>In general, work should be deferred to <code>connectedCallback</code> as much as
   possibleâ€”especially work involving fetching resources or rendering. However, note that <code>connectedCallback</code> can be called more than once, so any initialization work that
   is truly one-time will need a guard to prevent it from running twice.</li><li><p>In general, the constructor should be used to set up initial state and default values, and
   to set up event listeners and possibly a <a id=custom-element-conformance:shadow-root href=https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-root data-x-internal=shadow-root>shadow root</a>.</li></ul>

  <p>Several of these requirements are checked during <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-create-element id=custom-element-conformance:create-an-element data-x-internal=create-an-element>element
  creation</a>, either directly or indirectly, and failing to follow them will result in a custom
  element that cannot be instantiated by the parser or DOM APIs. This is true even if the work is
  done inside a constructor-initiated <span>microtask</span>, as a <span>microtask checkpoint</span> can occur immediately after construction.</p>

  <h4 id=custom-elements-core-concepts><span class=secno>4.13.3</span> Core concepts<a href=#custom-elements-core-concepts class=self-link></a></h4>

  <p>A <dfn id=custom-element data-export="">custom element</dfn> is an element that is <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-custom id=custom-elements-core-concepts:concept-element-custom data-x-internal=concept-element-custom>custom</a>. Informally, this means that its constructor and
  prototype are defined by the author, instead of by the user agent. This author-supplied
  constructor function is called the <dfn id=custom-element-constructor data-export="">custom element constructor</dfn>.</p>

  <p>Two distinct types of <a href=#custom-element id=custom-elements-core-concepts:custom-element>custom elements</a> can be defined:</p>

  <ol><li><p>An <dfn id=autonomous-custom-element data-export="">autonomous custom element</dfn>, which is defined with no <code>extends</code> option. These types of custom elements have a local name equal to their
   <span>defined name</span>.</li><li><p>A <dfn id=customized-built-in-element data-export="">customized built-in element</dfn>, which is defined with an <code>extends</code> option. These types of custom elements have a local name equal to the
   value passed in their <code>extends</code> option, and their <span>defined name</span> is used as the value of the
   <dfn id=attr-is><code>is</code></dfn> attribute, which therefore must be a <a href=#valid-custom-element-name id=custom-elements-core-concepts:valid-custom-element-name>valid
   custom element name</a>.</li></ol>

  <p>After a <a href=#custom-element id=custom-elements-core-concepts:custom-element-2>custom element</a> is <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-create-element id=custom-elements-core-concepts:create-an-element data-x-internal=create-an-element>created</a>,
  changing the value of the <code id=custom-elements-core-concepts:attr-is><a href=#attr-is>is</a></code> attribute does not
  change the element's behavior.</p>

  <p><a href=#autonomous-custom-element id=custom-elements-core-concepts:autonomous-custom-element>Autonomous custom elements</a> have the following
  element definition:</p>

  <dl class=element><dt><a href=dom.html#concept-element-categories id=custom-elements-core-concepts:concept-element-categories>ã‚«ãƒ†ã‚´ãƒªãƒ¼</a>ï¼š<dd><a id=custom-elements-core-concepts:flow-content-2 href=dom.html#flow-content-2>ãƒ•ãƒ­ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a>ã€‚<dd><a id=custom-elements-core-concepts:phrasing-content-2 href=dom.html#phrasing-content-2>ãƒ•ãƒ¬ãƒ¼ã‚¸ãƒ³ã‚°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a>ã€‚<dd><a id=custom-elements-core-concepts:palpable-content-2 href=dom.html#palpable-content-2>ãƒ‘ãƒ«ãƒ‘ãƒ–ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a>ã€‚<dt><a href=dom.html#concept-element-contexts id=custom-elements-core-concepts:concept-element-contexts>ã“ã®è¦ç´ ã‚’ä½¿ç”¨ã§ãã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</a>ï¼š<dd><a id=custom-elements-core-concepts:phrasing-content-2-2 href=dom.html#phrasing-content-2>ãƒ•ãƒ¬ãƒ¼ã‚¸ãƒ³ã‚°ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a>ãŒæœŸå¾…ã•ã‚Œã‚‹å ´æ‰€ã€‚<dt><a href=dom.html#concept-element-content-model id=custom-elements-core-concepts:concept-element-content-model>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ¢ãƒ‡ãƒ«</a>ï¼š<dd><a id=custom-elements-core-concepts:transparent href=dom.html#transparent>é€éçš„</a>ã€‚<dt><a href=dom.html#concept-element-attributes id=custom-elements-core-concepts:concept-element-attributes>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å±æ€§</a>ï¼š<dd><a id=custom-elements-core-concepts:global-attributes href=dom.html#global-attributes>Global attributes</a>, except the <code id=custom-elements-core-concepts:attr-is-2><a href=#attr-is>is</a></code> attribute<dd>åå‰ç©ºé–“ã‚’æŒãŸãªã„ãã®ä»–ã®å±æ€§ï¼ˆæ–‡å‚ç…§ï¼‰ã€‚<dt><a href=dom.html#concept-element-dom id=custom-elements-core-concepts:concept-element-dom>DOMã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹</a>ï¼š<dd>Supplied by the element's author (inherits from <code>HTMLElement</code>)</dl>


  <p>An <a href=#autonomous-custom-element id=custom-elements-core-concepts:autonomous-custom-element-2>autonomous custom element</a> does not have any special meaning: it
  <a id=custom-elements-core-concepts:represents href=dom.html#represents>represents</a> its children. A <a href=#customized-built-in-element id=custom-elements-core-concepts:customized-built-in-element>customized built-in element</a> inherits the
  semantics of the element that it extends.</p>

  <p>Any namespace-less attribute that is relevant to the element's functioning, as determined by
  the element's author, may be specified on an <a href=#autonomous-custom-element id=custom-elements-core-concepts:autonomous-custom-element-3>autonomous custom element</a>, so long as
  the attribute name is <a id=custom-elements-core-concepts:xml-compatible href=infrastructure.html#xml-compatible>XML-compatible</a> and contains no <a href=https://triple-underscore.github.io/infra-ja.html#ascii-upper-alpha id=custom-elements-core-concepts:uppercase-ascii-letters data-x-internal=uppercase-ascii-letters>ASCII upper alphas</a>. The exception is the <code id=custom-elements-core-concepts:attr-is-3><a href=#attr-is>is</a></code> attribute,
  which must not be specified on an <a href=#autonomous-custom-element id=custom-elements-core-concepts:autonomous-custom-element-4>autonomous custom element</a> (and which will have no
  effect if it is).</p>

  <p><a href=#customized-built-in-element id=custom-elements-core-concepts:customized-built-in-element-2>Customized built-in elements</a> follow the
  normal requirements for attributes, based on the elements they extend. To add custom
  attribute-based behavior, use <code id=custom-elements-core-concepts:attr-data-*><a href=dom.html#attr-data-*>data-*</a></code> attributes.</p>

  <hr>

  <p>A <dfn id=valid-custom-element-name data-export="">valid custom element name</dfn> is a sequence of characters
  <var>name</var> that meets all of the following requirements:</p>

  <ul><li>
    <p><var>name</var> must match the <code id=custom-elements-core-concepts:prod-potentialcustomelementname><a href=#prod-potentialcustomelementname>PotentialCustomElementName</a></code> production:</p>

    <dl><dt><code><dfn id=prod-potentialcustomelementname>PotentialCustomElementName</dfn> ::=</code><dd><code>[a-z] (<a href=#prod-pcenchar id=custom-elements-core-concepts:prod-pcenchar>PCENChar</a>)* '-'
     (<a href=#prod-pcenchar id=custom-elements-core-concepts:prod-pcenchar-2>PCENChar</a>)*</code><dt><code><dfn id=prod-pcenchar>PCENChar</dfn> ::=</code><dd><code>"-" | "." | [0-9] | "_" | [a-z] | #xB7 | [#xC0-#xD6] | [#xD8-#xF6] |
     [#xF8-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x203F-#x2040] | [#x2070-#x218F] |
     [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] |
     [#x10000-#xEFFFF]</code></dl>

    <p>This uses the <a href=https://www.w3.org/TR/xml/#sec-notation>EBNF notation</a> from the
    <cite>XML</cite> specification. <a href=references.html#refsXML>[XML]</a></p>
   </li><li>
    <p><var>name</var> must not be any of the following:</p>

    <ul class=brief><li><code>annotation-xml</code></li><li><code>color-profile</code></li><li><code>font-face</code></li><li><code>font-face-src</code></li><li><code>font-face-uri</code></li><li><code>font-face-format</code></li><li><code>font-face-name</code></li><li><code>missing-glyph</code></li></ul>

    <p class=note>The list of names above is the summary of all hyphen-containing element names
    from the <a href=infrastructure.html#other-applicable-specifications id=custom-elements-core-concepts:other-applicable-specifications>applicable specifications</a>, namely
    <cite>SVG</cite> and <cite>MathML</cite>. <a href=references.html#refsSVG>[SVG]</a> <a href=references.html#refsMATHML>[MATHML]</a></p>
   </li></ul>

  <div class=note>
   <p>These requirements ensure a number of goals for <a href=#valid-custom-element-name id=custom-elements-core-concepts:valid-custom-element-name-2>valid
   custom element names</a>:</p>

   <ul><li><p>They start with an <a id=custom-elements-core-concepts:lowercase-ascii-letters href=https://triple-underscore.github.io/infra-ja.html#ascii-lower-alpha data-x-internal=lowercase-ascii-letters>ASCII lower alpha</a>, ensuring that the HTML parser will
    treat them as tags instead of as text.</li><li><p>They do not contain any <a href=https://triple-underscore.github.io/infra-ja.html#ascii-upper-alpha id=custom-elements-core-concepts:uppercase-ascii-letters-2 data-x-internal=uppercase-ascii-letters>ASCII upper alphas</a>,
    ensuring that the user agent can always treat HTML elements ASCII-case-insensitively.</li><li><p>They contain a hyphen, used for namespacing and to ensure forward compatibility (since no
    elements will be added to HTML, SVG, or MathML with hyphen-containing local names in the
    future).</li><li><p>They can always be created with <code id=custom-elements-core-concepts:dom-document-createelement><a data-x-internal=dom-document-createelement href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelement>createElement()</a></code> and <code id=custom-elements-core-concepts:dom-document-createelementns><a data-x-internal=dom-document-createelementns href=https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelementns>createElementNS()</a></code>, which have restrictions that go
    beyond the parser's.</li></ul>

   <p>Apart from these restrictions, a large variety of names is allowed, to give maximum
   flexibility for use cases like <code>&lt;math-Î±&gt;</code> or <code>&lt;emotion-ğŸ˜&gt;</code>.</p>
  </div>

  

  <h4 id=custom-elements-api><span class=secno>4.13.4</span> The <code>CustomElementRegistry</code> interface<a href=#custom-elements-api class=self-link></a></h4>

  

  <p class=note>Custom element registries are associated with <code>Window</code> objects, instead
  of <code>Document</code> objects, since each <a href=#custom-element-constructor id=custom-elements-api:custom-element-constructor>custom element constructor</a> inherits from
  the <code>HTMLElement</code> interface, and there is exactly one <code>HTMLElement</code>
  interface per <code>Window</code> object.</p>

  

  <dl class=domintro><dt><var>window</var> . <code>customElements</code> . <code id=dom-customelementregistry-define>define</code>(<var>name</var>,
   <var>constructor</var>)<dd>Defines a new <a href=#custom-element id=custom-elements-api:custom-element>custom element</a>, mapping the given name to the given constructor as
   an <a href=#autonomous-custom-element id=custom-elements-api:autonomous-custom-element>autonomous custom element</a>.<dt><var>window</var> . <code>customElements</code> . <code id=custom-elements-api:dom-customelementregistry-define><a href=#dom-customelementregistry-define>define</a></code>(<var>name</var>, <var>constructor</var>,
   { extends: <var>baseLocalName</var> })<dd>Defines a new <a href=#custom-element id=custom-elements-api:custom-element-2>custom element</a>, mapping the given name to the given constructor as
   a <a href=#customized-built-in-element id=custom-elements-api:customized-built-in-element>customized built-in element</a> for the <a id=custom-elements-api:element-type href=infrastructure.html#element-type>element type</a> identified by the
   supplied <var>baseLocalName</var>. A <a id=custom-elements-api:notsupportederror href=https://triple-underscore.github.io/WebIDL-ja.html#notsupportederror data-x-internal=notsupportederror>"<code>NotSupportedError</code>"</a>
   <code id=custom-elements-api:domexception><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code> will be thrown upon trying to extend a <a href=#custom-element id=custom-elements-api:custom-element-3>custom element</a> or
   an unknown element.<dt><var>window</var> . <code>customElements</code> . <code id=dom-customelementregistry-get>get</code>(<var>name</var>)<dd>Retrieves the <a href=#custom-element-constructor id=custom-elements-api:custom-element-constructor-2>custom element constructor</a> defined for the given <span>name</span>. Returns undefined if there is no
   <span>custom element definition</span> with the given <span>name</span>.<dt><var>window</var> . <code>customElements</code> . <code id=dom-customelementregistry-whendefined>whenDefined</code>(<var>name</var>)<dd>Returns a promise that will be fulfilled when a <a href=#custom-element id=custom-elements-api:custom-element-4>custom element</a> becomes defined
   with the given name. (If such a <a href=#custom-element id=custom-elements-api:custom-element-5>custom element</a> is already defined, the returned
   promise will be immediately fulfilled.) Returns a promise rejected with a
   <a id=custom-elements-api:syntaxerror href=https://triple-underscore.github.io/WebIDL-ja.html#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=custom-elements-api:domexception-2><a data-x-internal=domexception href=https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException>DOMException</a></code> if not given a <a href=#valid-custom-element-name id=custom-elements-api:valid-custom-element-name>valid
   custom element name</a>.<dt><var>window</var> . <code>customElements</code> . <code id=dom-customelementregistry-upgrade>upgrade</code>(<var>root</var>)<dd><span>Tries to upgrade</span> all <a id=custom-elements-api:shadow-including-inclusive-descendant href=https://dom.spec.whatwg.org/#concept-shadow-including-inclusive-descendant data-x-internal=shadow-including-inclusive-descendant>shadow-including
   inclusive descendant</a> elements of <var>root</var>, even if they are not
   <a id=custom-elements-api:connected href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a>.</dl>

  <p><dfn id=element-definition>Element definition</dfn> is a process of adding a <span>custom element definition</span>
  to the <code>CustomElementRegistry</code>. This is accomplished by the <code id=custom-elements-api:dom-customelementregistry-define-2><a href=#dom-customelementregistry-define>define()</a></code> method.  </p>

  

  <div class=example>
   <p>The <code id=custom-elements-api:dom-customelementregistry-whendefined><a href=#dom-customelementregistry-whendefined>whenDefined()</a></code> method can be
   used to avoid performing an action until all appropriate <a href=#custom-element id=custom-elements-api:custom-element-6>custom
   elements</a> are <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-defined id=custom-elements-api:concept-element-defined data-x-internal=concept-element-defined>defined</a>. In this example, we
   combine it with the <code>:defined</code> pseudo-class to hide a
   dynamically-loaded article's contents until we're sure that all of the <a href=#autonomous-custom-element id=custom-elements-api:autonomous-custom-element-2>autonomous custom elements</a> it uses are defined.</p>

   <pre>articleContainer.hidden = true;

fetch(articleURL)
  .then(response =&gt; response.text())
  .then(text =&gt; {
    articleContainer.innerHTML = text;

    return Promise.all(
      [...articleContainer.querySelectorAll(":not(:defined)")]
        .map(el =&gt; customElements.whenDefined(el.localName))
    );
  })
  .then(() =&gt; {
    articleContainer.hidden = false;
  });</pre>
  </div>

  

  <div class=example>
   <p>The <code id=custom-elements-api:dom-customelementregistry-upgrade><a href=#dom-customelementregistry-upgrade>upgrade()</a></code> method allows upgrading
   of elements at will. Normally elements are automatically upgraded when they become
   <a id=custom-elements-api:connected-2 href=https://triple-underscore.github.io/DOM4-ja.html#connected data-x-internal=connected>connected</a>, but this method can be used if you need to upgrade before you're ready to
   connect the element.</p>

   <pre>const el = document.createElement("spider-man");

class SpiderMan extends HTMLElement {}
customElements.define("spider-man", SpiderMan);

console.assert(!(el instanceof SpiderMan)); // not yet upgraded

customElements.upgrade(el);
console.assert(el instanceof SpiderMan);    // upgraded!</pre>
  </div>

  

  <h4 id=custom-element-reactions><span class=secno>4.13.5</span> Custom element reactions<a href=#custom-element-reactions class=self-link></a></h4>

  <p>A <a href=#custom-element id=custom-element-reactions:custom-element>custom element</a> possesses the ability to respond to certain occurrences by
  running author code:</p>

  <ul><li><p>When <span>upgraded</span>, its <a href=#custom-element-constructor id=custom-element-reactions:custom-element-constructor>constructor</a> is run, with no arguments.</li><li><p>When it <a id=custom-element-reactions:becomes-connected href=infrastructure.html#becomes-connected>becomes connected</a>, its <code>connectedCallback</code> is
   called, with no arguments.</li><li><p>When it <a id=custom-element-reactions:becomes-disconnected href=infrastructure.html#becomes-disconnected>becomes disconnected</a>, its <code>disconnectedCallback</code>
   is called, with no arguments.</li><li><p>When it is <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt id=custom-element-reactions:concept-node-adopt data-x-internal=concept-node-adopt>adopted</a> into a new document, its <code>adoptedCallback</code> is called, given the old document and new document as
   arguments.</li><li><p>When any of its attributes are <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-change id=custom-element-reactions:concept-element-attributes-change data-x-internal=concept-element-attributes-change>changed</a>, <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-append id=custom-element-reactions:concept-element-attributes-append data-x-internal=concept-element-attributes-append>appended</a>, <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-remove id=custom-element-reactions:concept-element-attributes-remove data-x-internal=concept-element-attributes-remove>removed</a>, or <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-replace id=custom-element-reactions:concept-element-attributes-replace data-x-internal=concept-element-attributes-replace>replaced</a>, its <code>attributeChangedCallback</code> is called, given the attribute's local name, old value,
   new value, and namespace as arguments. (An attribute's old or new value is considered to be null
   when the attribute is added or removed, respectively.)</li></ul>

  <p>We call these reactions collectively <dfn id=concept-custom-element-reaction>custom
  element reactions</dfn>.</p>

  <p>The way in which <a href=#concept-custom-element-reaction id=custom-element-reactions:concept-custom-element-reaction>custom element reactions</a>
  are invoked is done with special care, to avoid running author code during the middle of delicate
  operations. Effectively, they are delayed until "just before returning to user script". This means
  that for most purposes they appear to execute synchronously, but in the case of complicated
  composite operations (like <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone id=custom-element-reactions:concept-node-clone data-x-internal=concept-node-clone>cloning</a>, or <a href=https://triple-underscore.github.io/DOM4-ja.html#concept-range id=custom-element-reactions:concept-range data-x-internal=concept-range>range</a> manipulation), they will instead be delayed until after all
  the relevant user agent processing steps have completed, and then run together as a batch.</p>

  <p>It is guaranteed that <a href=#concept-custom-element-reaction id=custom-element-reactions:concept-custom-element-reaction-2>custom element reactions</a> always are invoked in the
  same order as their triggering actions, at least within the local context of a single <a href=#custom-element id=custom-element-reactions:custom-element-2>custom
  element</a>. (Because <a href=#concept-custom-element-reaction id=custom-element-reactions:concept-custom-element-reaction-3>custom element
  reaction</a> code can perform its own mutations, it is not possible to give a global ordering
  guarantee across multiple elements.)</p>

  


  <nav><a href=canvas.html>â† 4.12.5 canvasè¦ç´ </a> â€“ <a href=./>ç›®æ¬¡</a> â€“ <a href=semantics-other.html>4.14 å°‚ç”¨è¦ç´ ãªã—ã®ä¸€èˆ¬çš„èªå½™ â†’</a></nav>
</body></html>