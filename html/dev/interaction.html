<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Edition for Web Developers日本語訳</title><meta content="#3c790a" name="theme-color"><meta content="light dark" name="color-scheme"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="./search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" class="darkmode-aware" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><p id="dev-edition-h2">Edition for Web Developers — Last Updated <span class="pubdate">17 October 2025</span></hgroup>
   

   <div id="search"><input placeholder="Search. Press &apos;/&apos;" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="microdata.html">← 5 Microdata</a> — <a href="./">目次</a> — <a href="dnd.html">6.11 ドラッグアンドドロップ →</a></nav><ol class="toc"><li><a href="interaction.html#editing"><span class="secno">6</span> ユーザーとの対話処理</a><ol><li><a href="interaction.html#the-hidden-attribute"><span class="secno">6.1</span> <code>hidden</code>属性</a><li><a href="interaction.html#page-visibility"><span class="secno">6.2</span> ページの可視</a><ol><li><a href="interaction.html#the-visibilitystateentry-interface"><span class="secno">6.2.1</span> <code>VisibilityStateEntry</code>インターフェイス</a></ol><li><a href="interaction.html#inert-subtrees"><span class="secno">6.3</span> 不活性サブツリー</a><ol><li><a href="interaction.html#modal-dialogs-and-inert-subtrees"><span class="secno">6.3.1</span> モーダルダイアログと不活性サブツリー</a><li><a href="interaction.html#the-inert-attribute"><span class="secno">6.3.2</span> <code>inert</code>属性</a></ol><li><a href="interaction.html#tracking-user-activation"><span class="secno">6.4</span> ユーザーのアクティブ化の追跡</a><ol><li><a href="interaction.html#the-useractivation-interface"><span class="secno">6.4.1</span> <code>UserActivation</code>インターフェイス</a></ol><li><a href="interaction.html#activation"><span class="secno">6.5</span> 要素のアクティブ化動作</a><ol><li><a href="interaction.html#the-toggleevent-interface"><span class="secno">6.5.1</span> <code>ToggleEvent</code>インターフェイス</a><li><a href="interaction.html#the-commandevent-interface"><span class="secno">6.5.2</span> <code>CommandEvent</code>インターフェイス</a></ol><li><a href="interaction.html#focus"><span class="secno">6.6</span> フォーカス</a><ol><li><a href="interaction.html#introduction-7"><span class="secno">6.6.1</span> 導入</a><li><a href="interaction.html#data-model"><span class="secno">6.6.2</span> データモデル</a><li><a href="interaction.html#the-tabindex-attribute"><span class="secno">6.6.3</span> <code>tabindex</code>属性</a><li><a href="interaction.html#focus-management-apis"><span class="secno">6.6.4</span> フォーカス管理API</a><li><a href="interaction.html#the-autofocus-attribute"><span class="secno">6.6.5</span> <code>autofocus</code>属性</a></ol><li><a href="interaction.html#assigning-keyboard-shortcuts"><span class="secno">6.7</span> キーボードショートカットの割り当て</a><ol><li><a href="interaction.html#introduction-8"><span class="secno">6.7.1</span> 導入</a><li><a href="interaction.html#the-accesskey-attribute"><span class="secno">6.7.2</span> <code>accesskey</code>属性</a></ol><li><a href="interaction.html#editing-2"><span class="secno">6.8</span> 編集</a><ol><li><a href="interaction.html#contenteditable"><span class="secno">6.8.1</span> 編集可能な文書領域を作成する：<code>contenteditable</code>コンテンツ属性</a><li><a href="interaction.html#making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">6.8.2</span> 文書全体を編集可能にする：<code>designMode</code>のゲッターおよびセッター</a><li><a href="interaction.html#best-practices-for-in-page-editors"><span class="secno">6.8.3</span> ページ内編集者のためのベストプラクティス</a><li><a href="interaction.html#spelling-and-grammar-checking"><span class="secno">6.8.4</span> スペルと文法チェック</a><li><a href="interaction.html#writing-suggestions"><span class="secno">6.8.5</span> 書き込みの提案</a><li><a href="interaction.html#autocapitalization"><span class="secno">6.8.6</span> 自動大文字化</a><li><a href="interaction.html#autocorrection"><span class="secno">6.8.7</span> 自動修正</a><li><a href="interaction.html#input-modalities:-the-inputmode-attribute"><span class="secno">6.8.8</span> 入力モダリティ：<code>inputmode</code>属性</a><li><a href="interaction.html#input-modalities:-the-enterkeyhint-attribute"><span class="secno">6.8.9</span> 入力モダリティ：<code>enterkeyhint</code>属性</a></ol><li><a href="interaction.html#find-in-page"><span class="secno">6.9</span> ページ内検索</a><ol><li><a href="interaction.html#introduction-9"><span class="secno">6.9.1</span> 導入</a><li><a href="interaction.html#interaction-with-details-and-hidden=until-found"><span class="secno">6.9.2</span> <code>details</code>と<code>hidden=until-found</code>との相互作用</a><li><a href="interaction.html#interaction-with-selection"><span class="secno">6.9.3</span> 選択との相互作用</a></ol><li><a href="interaction.html#close-requests-and-close-watchers"><span class="secno">6.10</span> 閉じ要求および閉じウォッチャー</a><ol><li><a href="interaction.html#close-requests"><span class="secno">6.10.1</span> 閉じ要求</a><li><a href="interaction.html#the-closewatcher-interface"><span class="secno">6.10.2</span> <code>CloseWatcher</code>インターフェイス</a></ol></ol></ol><h2 id="editing"><span class="secno">6</span> <dfn>ユーザーとの対話処理</dfn><a href="#editing" class="self-link"></a></h2>


  <h3 id="the-hidden-attribute"><span class="secno">6.1</span> <code id="the-hidden-attribute:attr-hidden"><a href="#attr-hidden">hidden</a></code>属性<a href="#the-hidden-attribute" class="self-link"></a></h3><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden" title="The hidden global attribute is an enumerated attribute indicating that the browser should not render the contents of the element. For example, it can be used to hide elements of the page that can&apos;t be used until the login process has been completed.">Global_attributes/hidden</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>102+</span></span><hr><span class="opera no"><span>Opera</span><span>No</span></span><span class="edge_blink yes"><span>Edge</span><span>102+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden" title="The hidden global attribute is an enumerated attribute indicating that the browser should not render the contents of the element. For example, it can be used to hide elements of the page that can&apos;t be used until the login process has been completed.">Global_attributes/hidden</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>5.1+</span></span><span class="chrome yes"><span>Chrome</span><span>10+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p>すべての<a id="the-hidden-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>は<dfn data-dfn-for="html-global" id="attr-hidden" data-dfn-type="element-attr"><code>hidden</code></dfn>コンテンツ属性設定を持ってもよい。<code id="the-hidden-attribute:attr-hidden-2"><a href="#attr-hidden">hidden</a></code>属性は、次のキーワードと状態を持つ<a id="the-hidden-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である：</p>

  <table><thead><tr><th>キーワード<th>状態<th>概要<tbody><tr><td><dfn data-dfn-for="html-global/hidden" id="attr-hidden-hidden" data-dfn-type="attr-value"><code>hidden</code></dfn><td><dfn id="attr-hidden-hidden-state">非表示</dfn><td>レンダリングされない。<tr><td><dfn data-dfn-for="html-global/hidden" id="attr-hidden-until-found" data-dfn-type="attr-value"><code>until-found</code></dfn><td><dfn id="attr-hidden-until-found-state">Hidden Until Found</dfn><td>レンダリングされないが、 <a href="#find-in-page-2" id="the-hidden-attribute:find-in-page-2">ページ内検索</a>および<a href="browsing-the-web.html#navigate-fragid" id="the-hidden-attribute:navigate-fragid">フラグメントナビゲーション</a>で内部のコンテンツにアクセスできる。</table>

  <div data-algorithm=""><p>The attribute's <i id="the-hidden-attribute:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">missing value default</a></i> is the <dfn id="attr-hidden-not-hidden-state">Not Hidden</dfn> state, and its <i id="the-hidden-attribute:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">invalid value default</a></i> and <i id="the-hidden-attribute:empty-value-default"><a href="common-microsyntaxes.html#empty-value-default">empty value default</a></i> are both the <a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state">Hidden</a> state.</p>
  </div>

  <p>要素が<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-2">hidden</a>状態の<code id="the-hidden-attribute:attr-hidden-3"><a href="#attr-hidden">hidden</a></code>属性を持つ場合、それは、その要素がまだないこと、もしくはもはやページの現在の状態には直接関係がない、または、ユーザーが直接アクセスするのとは対照的に、ページの他の部分で再利用するコンテンツを宣言するために使用されていることを示す。ユーザーエージェントは、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-3">Hidden</a>状態にある要素をレンダリングすべきでない。 </p>

  

  <p>要素が<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state">Hidden Until Found</a>にある<code id="the-hidden-attribute:attr-hidden-4"><a href="#attr-hidden">hidden</a></code>属性を持つ場合、その要素は<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-4">Hidden</a>状態のように非表示になっているが、要素内のコンテンツは<a href="#find-in-page-2" id="the-hidden-attribute:find-in-page-2-2">ページ内検索</a>および<a href="browsing-the-web.html#navigate-fragid" id="the-hidden-attribute:navigate-fragid-2">フラグメントナビゲーション</a>にアクセスできることを示す。When these features attempt to scroll to a target which is in the element's subtree, the user agent will remove the <code id="the-hidden-attribute:attr-hidden-5"><a href="#attr-hidden">hidden</a></code> attribute in order to reveal the content before scrolling to it by running the <span>ancestor revealing algorithm</span> on the target node.</p>

  


  <div class="note"><p>この属性は通常CSSを使用して実装されているため、CSSを使用して上書きすることもできる。たとえば、'display: block'をすべての要素に適用する規則は、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-5">Hidden</a>状態の影響を相殺するだろう。したがって著者は、期待通りに属性がスタイル付けされていることを確認し、そのスタイルシートを書くときに注意する必要がある。さらに、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-2">Hidden Until Found</a>状態をサポートしないレガシーユーザーエージェントは、'content-visibility: hidden'ではなく'display: none'になるため、著者はスタイルシートが<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-3">Hidden Until Found</a>要素の'display'または'content-visibility'プロパティを変更しないようにすることを勧める。</p>

   <p><a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-4">Hidden Until Found</a>状態に<code id="the-hidden-attribute:attr-hidden-6"><a href="#attr-hidden">hidden</a></code>属性をもつ要素は、'display: none'ではなく'content-visibility: hidden'を使用するため、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-5">Hidden Until Found</a>状態には、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-6">Hidden</a>状態Dとは異なる2つの注意点が存在する：</p>

   <ol><li><p>ページ内検索で表示するには、要素が<a id="the-hidden-attribute:layout-containment" href="https://triple-underscore.github.io/css-contain-ja.html#containment-layout" data-x-internal="layout-containment">レイアウトの包含</a>の影響を受ける必要がある。 これは、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-6">Hidden Until Found</a>状態の要素が'none'、'contents'、または'inline'の'display'値を持つ場合、その要素はページ内検索によって表示されないことを意味する。<li><p><a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-7">Hidden Until Found</a>状態の場合、要素は依然として<a href="https://momdo.github.io/css2/visufx.html#propdef-visibility" id="the-hidden-attribute:'visibility'" data-x-internal="'visibility'">生成ボックス</a>がある。これはつまり、ボーダー、マージン、およびパディングは要素の周囲にレンダリングされたままになる。</ol>
  </div>

  <div class="example"><p>次の骨格の例において、属性は、ユーザーがログインするまでウェブゲームのメイン画面を非表示にするために使用される：</p>

   <pre><code class='html'>  <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->The Example Game<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>section</c-> <c- e>id</c-><c- o>=</c-><c- s>"login"</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>h2</c-><c- p>></c->Login<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>form</c-><c- p>></c->
    ...
    <c- c>&lt;!-- calls login() once the user's credentials have been checked --></c->
   <c- p>&lt;/</c-><c- f>form</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    <c- a>function</c-> login<c- p>()</c-> <c- p>{</c->
      <c- c1>// switch screens</c->
      document<c- p>.</c->getElementById<c- p>(</c-><c- t>'login'</c-><c- p>).</c->hidden <c- o>=</c-> <c- kc>true</c-><c- p>;</c->
      document<c- p>.</c->getElementById<c- p>(</c-><c- t>'game'</c-><c- p>).</c->hidden <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
    <c- p>}</c->
   <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>section</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>section</c-> <c- e>id</c-><c- o>=</c-><c- s>"game"</c-> <c- e>hidden</c-><c- p>></c->
   ...
  <c- p>&lt;/</c-><c- f>section</c-><c- p>></c-></code></pre>

  </div>

  <p><code id="the-hidden-attribute:attr-hidden-7"><a href="#attr-hidden">hidden</a></code>属性は、別のプレゼンテーションに合法的に示すことができたコンテンツを隠すために使用されてはならない。たとえば、タブ付きインターフェイスは単にオーバーフロープレゼンテーションの一種であるため、タブ付きダイアログでパネルを隠すために<code id="the-hidden-attribute:attr-hidden-8"><a href="#attr-hidden">hidden</a></code>を使用することは誤りである。―それはスクロールバーをもつ1つの大きなページ内のすべてのフォームコントロールを示すのと同様である。ちょうど1つのプレゼンテーションからコンテンツを非表示にするためにこの属性を使用することも同様に誤りである。―何かが<code id="the-hidden-attribute:attr-hidden-9"><a href="#attr-hidden">hidden</a></code>とマークされる場合、それは、たとえばスクリーンリーダーなどを含む、すべてのプレゼンテーションから隠されている。</p>

  
  

  <p>自身が<code id="the-hidden-attribute:attr-hidden-10"><a href="#attr-hidden">hidden</a></code>でない要素は、<code id="the-hidden-attribute:attr-hidden-11"><a href="#attr-hidden">hidden</a></code>である要素へ<a id="the-hidden-attribute:hyperlink" href="links.html#hyperlink">ハイパーリンク</a>されてはならない。自身が<code id="the-hidden-attribute:attr-hidden-12"><a href="#attr-hidden">hidden</a></code>でない<code id="the-hidden-attribute:the-label-element"><a href="forms.html#the-label-element">label</a></code>および<code id="the-hidden-attribute:the-output-element"><a href="form-elements.html#the-output-element">output</a></code>要素の<code>for</code>属性も同様に、<code id="the-hidden-attribute:attr-hidden-13"><a href="#attr-hidden">hidden</a></code>である要素を参照してはならない。どちらの場合も、このような参照はユーザーの混乱を引き起こすだろう。</p>

  <p>しかし、要素およびスクリプトは、他のコンテキストで<code id="the-hidden-attribute:attr-hidden-14"><a href="#attr-hidden">hidden</a></code>である要素を参照してもよい。</p>

  <div class="example"><p>たとえば、<code id="the-hidden-attribute:attr-hidden-15"><a href="#attr-hidden">hidden</a></code>属性でマークされたセクションにリンクする<code id="the-hidden-attribute:attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code>属性を使用するのは誤りだろう。コンテンツが適切または関連しない場合、それにリンクする理由はない。</p>

   <p>しかし、自身が<code id="the-hidden-attribute:attr-hidden-16"><a href="#attr-hidden">hidden</a></code>である説明を参照するために、ARIA <code id="the-hidden-attribute:attr-aria-describedby"><a data-x-internal="attr-aria-describedby" href="http://momdo.github.io/wai-aria-1.3/#aria-describedby">aria-describedby</a></code>属性を使用することは構わない。説明を非表示にすることはそれらが単独で有用でないことを意味する一方で、それらは、それらが説明する要素から参照される特定のコンテキストにおいて有用である方法で記述することもできる。</p>

   <p>同様に、<code id="the-hidden-attribute:attr-hidden-17"><a href="#attr-hidden">hidden</a></code>属性を持つ<code id="the-hidden-attribute:the-canvas-element"><a href="canvas.html#the-canvas-element">canvas</a></code>要素は、オフスクリーンバッファーとしてスクリプト化されたグラフィックスエンジンによって使用されるかもしれず、フォームコントロールは、<code id="the-hidden-attribute:attr-fae-form"><a href="form-control-infrastructure.html#attr-fae-form">form</a></code>属性を使用する隠し<code id="the-hidden-attribute:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素を参照するかもしれない。</p>

  </div>

  <p><code id="the-hidden-attribute:attr-hidden-18"><a href="#attr-hidden">hidden</a></code>属性によって非表示にされたセクション内の要素は依然としてアクティブである。たとえば、そのようなセクションでのスクリプトやフォームコントロールは、依然として実行および送信する。それらのプレゼンテーションのみがユーザーに変更される。</p>

  

  <h3 id="page-visibility"><span class="secno">6.2</span> ページの可視<a href="#page-visibility" class="self-link"></a></h3>

  <p>作成時の初期値を含む、<a id="page-visibility:traversable-navigable" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の<a id="page-visibility:system-visibility-state" href="document-sequences.html#system-visibility-state">システム可視状態</a>は、ユーザー エージェントによって決定される。たとえば、ブラウザーウィンドウが最小化されているか、ブラウザータブが現在バックグラウンドにあるか、またはタスクスイッチャーなどのシステム要素がページを覆い隠しているかどうかを表す。</p>

  <div data-algorithm=""><p>When a user agent determines that the <a id="page-visibility:system-visibility-state-2" href="document-sequences.html#system-visibility-state">system visibility state</a> for <a id="page-visibility:traversable-navigable-2" href="document-sequences.html#traversable-navigable">traversable navigable</a> <var>traversable</var> has changed to <var>newState</var>, it must run the following steps:</p>

  <ol><li><p>Let <var>navigables</var> be the <a id="page-visibility:inclusive-descendant-navigables" href="document-sequences.html#inclusive-descendant-navigables">inclusive descendant navigables</a> of <var>traversable</var>'s <a href="document-sequences.html#nav-document" id="page-visibility:nav-document">active document</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="page-visibility:list-iterate" data-x-internal="list-iterate">For each</a> <var>navigable</var> of <var>navigables</var> <span class="XXX">in what order?</span>:</p>

    <ol><li><p>Let <var>document</var> be <var>navigable</var>'s <a href="document-sequences.html#nav-document" id="page-visibility:nav-document-2">active document</a>.<li><p><span>Queue a global task</span> on the <span>user interaction task source</span> given <var>document</var>'s <span>relevant global object</span> to <a href="#update-the-visibility-state" id="page-visibility:update-the-visibility-state">update the visibility state</a> of <var>document</var> with <var>newState</var>.</ol>
   </ol>
  </div>

  <p><code>Document</code>は<dfn data-dfn-for="Document" id="visibility-state" data-export="">可視状態</dfn>を持ち、これは"<code>hidden</code>"または"<code>visible</code>"のいずれかで、最初は"<code>hidden</code>"に設定される。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState" title="The Document.visibilityState read-only property returns the visibility of the document, that is in which context this element is now visible. It is useful to know if the document is in the background or an invisible tab, or only loaded for pre-rendering.">Document/visibilityState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>18+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>33+</span></span><hr><span class="opera yes"><span>Opera</span><span>20+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4.3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>20+</span></span></div></div></div><div data-algorithm=""><p><dfn data-dfn-for="Document" id="dom-document-visibilitystate" data-dfn-type="attribute"><code>visibilityState</code></dfn>ゲッターの手順は、<a id="page-visibility:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">この</a><a href="#visibility-state" id="page-visibility:visibility-state">可視状態</a>を返すものである。</p>
  </div>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/hidden" title="The Document.hidden read-only property returns a Boolean value indicating if the page is considered hidden or not.">Document/hidden</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>18+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>33+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4.3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><div data-algorithm=""><p><dfn data-dfn-for="Document" id="dom-document-hidden" data-dfn-type="attribute"><code>hidden</code></dfn>のゲッター手順は、<a id="page-visibility:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">この</a><a href="#visibility-state" id="page-visibility:visibility-state-2">可視状態</a>が"<code>hidden</code>"の場合はtrueを返し、それ以外の場合はfalseを返すものである。</p>
  </div>

  <div data-algorithm=""><p>To <dfn id="update-the-visibility-state">update the visibility state</dfn> of <code>Document</code> <var>document</var> to <var>visibilityState</var>:</p>

  <ol><li><p>If <var>document</var>'s <a href="#visibility-state" id="page-visibility:visibility-state-3">visibility state</a> equals <var>visibilityState</var>, then return.<li><p>Set <var>document</var>'s <a href="#visibility-state" id="page-visibility:visibility-state-4">visibility state</a> to <var>visibilityState</var>.<li><p><a href="https://triple-underscore.github.io/performance-timeline-ja.html#queue-a-performanceentry" id="page-visibility:queue-a-performance-entry" data-x-internal="queue-a-performance-entry">Queue</a> a new <code>VisibilityStateEntry</code> whose <a href="#visibilitystateentry-state" id="page-visibility:visibilitystateentry-state">visibility state</a> is <var>visibilityState</var> and whose <a href="#visibilitystateentry-timestamp" id="page-visibility:visibilitystateentry-timestamp">timestamp</a> is the <a id="page-visibility:current-high-resolution-time" href="https://triple-underscore.github.io/hr-time-ja.html#dfn-current-high-resolution-time" data-x-internal="current-high-resolution-time">current high resolution time</a> given <var>document</var>'s <span>relevant global object</span>.</p>

   <li><p>Run the <a id="page-visibility:screen-orientation-change-steps" href="https://triple-underscore.github.io/screen-orientation-ja.html#dfn-screen-orientation-change-steps" data-x-internal="screen-orientation-change-steps">screen orientation change steps</a> with <var>document</var>. <a href="references.html#refsSCREENORIENTATION">[SCREENORIENTATION]</a><li><p>Run the <a id="page-visibility:view-transition-page-visibility-change-steps" href="https://triple-underscore.github.io/css-view-transitions-ja.html#view-transition-page-visibility-change-steps" data-x-internal="view-transition-page-visibility-change-steps">view transition page visibility change steps</a> with <var>document</var>.<li><p>Run any <dfn id="page-visibility-change-steps" data-export="">page visibility change steps</dfn> which may be defined in other specifications, with <a href="#visibility-state" id="page-visibility:visibility-state-5">visibility state</a> and <var>document</var>.</p>

    <p class="XXX">It would be better if specification authors sent a pull request to add calls from here into their specifications directly, instead of using the <a href="#page-visibility-change-steps" id="page-visibility:page-visibility-change-steps">page visibility change steps</a> hook, to ensure well-defined cross-specification call order. As of the time of this writing the following specifications are known to have <a href="#page-visibility-change-steps" id="page-visibility:page-visibility-change-steps-2">page visibility change steps</a>, which will be run in an unspecified order: <cite>Device Posture API</cite> and <cite>Web NFC</cite>. <a href="references.html#refsDEVICEPOSTURE">[DEVICEPOSTURE]</a> <a href="references.html#refsWEBNFC">[WEBNFC]</a></p>
   <li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="page-visibility:concept-event-fire" data-x-internal="concept-event-fire">Fire an event</a> named <code id="page-visibility:event-visibilitychange"><a href="indices.html#event-visibilitychange">visibilitychange</a></code> at <var>document</var>, with its <code id="page-visibility:dom-event-bubbles"><a data-x-internal="dom-event-bubbles" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-bubbles">bubbles</a></code> attribute initialized to true.</ol>
  </div>

  <h4 id="the-visibilitystateentry-interface"><span class="secno">6.2.1</span> <code>VisibilityStateEntry</code>インターフェイス<a href="#the-visibilitystateentry-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/VisibilityStateEntry" title="The VisibilityStateEntry interface provides timings of page visibility state changes, i.e., when a tab changes from the foreground to the background or vice versa.">VisibilityStateEntry</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>115+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>115+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p><code>VisibilityStateEntry</code>インターフェイスは、文書がアクティブになった瞬間から、文書の可視性の変更を公開する。</p>

  <div class="example">たとえば、これは、ページ内のJavaScriptコードが、可視性の変化とペイントのタイミングの相関関係を調べることを可能にする。<pre><code class='js'><c- a>function</c-> wasHiddenBeforeFirstContentfulPaint<c- p>()</c-> <c- p>{</c->
    <c- a>const</c-> fcpEntry <c- o>=</c-> performance<c- p>.</c->getEntriesByName<c- p>(</c-><c- u>"first-contentful-paint"</c-><c- p>)[</c-><c- mf>0</c-><c- p>];</c->
    <c- a>const</c-> visibilityStateEntries <c- o>=</c-> performance<c- p>.</c->getEntriesByType<c- p>(</c-><c- u>"visibility-state"</c-><c- p>);</c->
    <c- k>return</c-> visibilityStateEntries<c- p>.</c->some<c- p>(</c->e <c- p>=></c->
                                            e<c- p>.</c->startTime <c- o>&lt;</c-> fcpEntry<c- p>.</c->startTime <c- o>&amp;&amp;</c->
                                            e<c- p>.</c->name <c- o>===</c-> <c- u>"hidden"</c-><c- p>);</c->
<c- p>}</c-></code></pre>
  </div>

  <p class="note">ページを非表示にすると、レンダリングおよびその他のユーザエージェント操作のスロットリングが発生する可能性があるため、そのようなスロットリングが発生したことを示すものとして、可視の変更を使用するのが一般的である。ただし、長時間の非アクティブ状態など、他の要因によっても、さまざまなブラウザーでスロットリングが発生する可能性がある。</p>

  

  <p><code>VisibilityStateEntry</code>は、関連付けられた<a id="the-visibilitystateentry-interface:domhighrestimestamp" href="https://triple-underscore.github.io/hr-time-ja.html#dom-domhighrestimestamp" data-x-internal="domhighrestimestamp"><code>DOMHighResTimeStamp</code></a><dfn id="visibilitystateentry-timestamp">タイムスタンプ</dfn>を持つ。</p>

  <p><code>VisibilityStateEntry</code>は、関連付けられた"<code>visible</code>"または "<code>hidden</code>"<dfn id="visibilitystateentry-state">可視状態</dfn>を持つ。</p>

  <div data-algorithm=""><p><dfn data-dfn-for="VisibilityStateEntry" id="visibilitystateentry-name" data-dfn-type="attribute"><code>name</code></dfn>ゲッターステップは、<a id="the-visibilitystateentry-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>の<a href="#visibilitystateentry-state" id="the-visibilitystateentry-interface:visibilitystateentry-state">可視状態</a>を返す。</p>
  </div>

  <div data-algorithm=""><p><dfn data-dfn-for="VisibilityStateEntry" id="visibilitystateentry-entrytype" data-dfn-type="attribute"><code>entryType</code></dfn>ゲッターステップは、"<code>visibility-state</code>"を返す。</p>
  </div>

  <div data-algorithm=""><p><dfn data-dfn-for="VisibilityStateEntry" id="visibilitystateentry-starttime" data-dfn-type="attribute"><code>startTime</code></dfn>ゲッターステップは、<a id="the-visibilitystateentry-interface:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>の<a href="#visibilitystateentry-timestamp" id="the-visibilitystateentry-interface:visibilitystateentry-timestamp">タイムスタンプ</a>を返す。</p>
  </div>

  <div data-algorithm=""><p><dfn data-dfn-for="VisibilityStateEntry" id="visibilitystateentry-duration" data-dfn-type="attribute"><code>duration</code></dfn>ゲッターステップは0を返す。</p>
  </div>


  <h3 id="inert-subtrees"><span class="secno">6.3</span> 不活性サブツリー<a href="#inert-subtrees" class="self-link"></a></h3>

  <p class="note">同じ名前の属性の説明については、<code id="inert-subtrees:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>も参照のこと。</p>

  <p>ノード（特に要素およびテキストノード）は<dfn id="inert">不活性</dfn>である可能性がある。ノードが<a href="#inert" id="inert-subtrees:inert">不活性</a>である場合：</p>

  <ul><li><p>ヒットテストは、あたかも<a id="inert-subtrees:'pointer-events'" href="https://triple-underscore.github.io/css-ui-ja.html#pointer-events-control" data-x-internal="'pointer-events'">'pointer-events'</a> CSSプロパティが'none'に設定されているかのように動作しなければならない。<li><p>テキスト選択機能は、あたかも<a id="inert-subtrees:'user-select'" href="https://triple-underscore.github.io/css-ui-ja.html#content-selection" data-x-internal="'user-select'">'user-select'</a> CSSプロパティが'none'に設定されているかのように動作しなければならない。<li><p><span>編集可能</span>である場合、ノードはあたかも編集不可能であるかのように動作する。<li><p>ユーザーエージェントは、<a href="#find-in-page-2" id="inert-subtrees:find-in-page-2">ページ内検索</a>の目的でノードを無視すべきである。</ul>

  <p class="note">通例、不活性ノードにフォーカスを当てることはできず、ユーザーエージェントは非活性ノードをアクセシビリティAPIまたは支援技術に公開しない。<a href="interactive-elements.html#concept-command" id="inert-subtrees:concept-command">コマンド</a>である不活性ノードは、上記の方法ではユーザーには使用不能となる。</p>

  <p>いずれにせよ、ユーザーエージェントは、<a href="#find-in-page-2" id="inert-subtrees:find-in-page-2-2">ページ内検索</a>およびテキスト選択の制限をユーザーが上書き可能にしてもよい。</p>

  <p>デフォルトでは、ノードは<a href="#inert" id="inert-subtrees:inert-2">不活性</a>ではない。</p>

  <h4 id="modal-dialogs-and-inert-subtrees"><span class="secno">6.3.1</span> モーダルダイアログと不活性サブツリー<a href="#modal-dialogs-and-inert-subtrees" class="self-link"></a></h4>

  <div data-algorithm=""><p><var>subject</var>が<var>document</var>の<a id="modal-dialogs-and-inert-subtrees:top-layer" href="https://triple-underscore.github.io/css-position4-ja.html#document-top-layer" data-x-internal="top-layer">最上位レイヤー</a>の一番上の<code id="modal-dialogs-and-inert-subtrees:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素である場合、<code>Document</code> <var>document</var>は<dfn id="blocked-by-a-modal-dialog">モーダルダイアログボックスによってブロックされる</dfn><var>subject</var>である。<var>document</var>がそのようにブロックされる一方で、<var>document</var>に<a id="modal-dialogs-and-inert-subtrees:connected" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">接続されている</a>すべてのノードは、<var>subject</var>要素とその<a id="modal-dialogs-and-inert-subtrees:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫を除き、<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert">不活性</a>とマークされなければならない。</p>
  </div>

  <div data-algorithm=""><p><var>subject</var>は、<code id="modal-dialogs-and-inert-subtrees:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>属性を介してさらに<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert-2">不活性</a>になることができるが、<var>subject</var>自体に指定されている場合に限る（つまり、<var>subject</var>は祖先の不活性を回避する）。<var>subject</var>の<a id="modal-dialogs-and-inert-subtrees:flat-tree-2" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫は、同じように<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert-3">不活性</a>になることがある。</p>
  </div>

  <p class="note"><code id="modal-dialogs-and-inert-subtrees:the-dialog-element-2"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素の<code id="modal-dialogs-and-inert-subtrees:dom-dialog-showmodal"><a href="interactive-elements.html#dom-dialog-showmodal">showModal()</a></code>メソッドは、<code id="modal-dialogs-and-inert-subtrees:the-dialog-element-3"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素を<a id="modal-dialogs-and-inert-subtrees:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">ノード文書</a>の<a id="modal-dialogs-and-inert-subtrees:top-layer-2" href="https://triple-underscore.github.io/css-position4-ja.html#document-top-layer" data-x-internal="top-layer">最上位レイヤー</a>に<a href="https://triple-underscore.github.io/css-position4-ja.html#add-an-element-to-the-top-layer" id="modal-dialogs-and-inert-subtrees:add-an-element-to-the-top-layer" data-x-internal="add-an-element-to-the-top-layer">追加する</a>ことによって、このメカニズムをトリガーさせる。</p>

  <h4 id="the-inert-attribute"><span class="secno">6.3.2</span> <dfn><code>inert</code></dfn>属性<a href="#the-inert-attribute" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inert" title="The inert global attribute is a Boolean attribute indicating that the browser will ignore the element. With the inert attribute, all of the element&apos;s flat tree descendants (such as modal &lt;dialog>s) that don&apos;t otherwise escape inertness are ignored. The inert attribute also makes the browser ignore input events sent by the user, including focus-related events and events from assistive technologies.">Global_attributes/inert</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>112+</span></span><span class="safari yes"><span>Safari</span><span>15.5+</span></span><span class="chrome yes"><span>Chrome</span><span>102+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>102+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p><code id="the-inert-attribute:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>属性は、その存在によって、（モーダルダイアログなど）他の方法では不活性化を免れない要素およびそのすべての<a id="the-inert-attribute:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫がユーザーエージェントによって<a href="#inert" id="the-inert-attribute:inert">不活性</a>にされることを示す<a id="the-inert-attribute:boolean-attribute" href="common-microsyntaxes.html#boolean-attribute">真偽属性</a>である。</p>

  <p>不活性サブツリーは、不活性状態ではないページの外観を理解または使用するために重要なコンテンツまたはコントロールを含むべきでない。不活性サブツリー内のコンテンツは、すべてのユーザーによって認識できる、またはインタラクティブではない。著者は、要素が表す内容が何らかの形で視覚的に隠されていない限り、要素を不活性と指定すべきでない。ほとんどの場合、著者は個々のフォームコントロールに<code id="the-inert-attribute:inert-2"><a href="#inert">inert</a></code>属性を指定すべきでない。このような場合は、<code id="the-inert-attribute:attr-fe-disabled"><a href="form-control-infrastructure.html#attr-fe-disabled">disabled</a></code>属性の方がおそらく適切である。</p>

  <div class="example"><p>次の例は、"loading"メッセージによって視覚的に隠されている、部分的に読み込まれたコンテンツを不活性としてマークする方法を示す。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>section</c-> <c- e>aria-labelledby</c-><c- o>=</c-><c- s>s1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>h3</c-> <c- e>id</c-><c- o>=</c-><c- s>s1</c-><c- p>></c->Population by City<c- p>&lt;/</c-><c- f>h3</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>container</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>loading</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>></c->Loading...<c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>inert</c-><c- p>></c->
      <c- p>&lt;</c-><c- f>form</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->Date range<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>start</c-><c- p>></c->Start<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>date</c-> <c- e>id</c-><c- o>=</c-><c- s>start</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>end</c-><c- p>></c->End<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>date</c-> <c- e>id</c-><c- o>=</c-><c- s>end</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>button</c-><c- p>></c->Apply<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
        <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
      <c- p>&lt;/</c-><c- f>form</c-><c- p>></c->
      <c- p>&lt;</c-><c- f>table</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>caption</c-><c- p>></c->From 20-- to 20--<c- p>&lt;/</c-><c- f>caption</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>thead</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>tr</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->City<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->State<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->20-- Population<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->20-- Population<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Percentage change<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>tr</c-><c- p>></c->
        <c- p>&lt;/</c-><c- f>thead</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tbody</c-><c- p>></c->
          <c- c>&lt;!-- ... --></c->
        <c- p>&lt;/</c-><c- f>tbody</c-><c- p>></c->
      <c- p>&lt;/</c-><c- f>table</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c-></code></pre><img alt="Screenshot of Population by City content with an overlaid loading message which visually obscures the form controls and data table which have not fully rendered, and thus are in the inert state." src="https://html.spec.whatwg.org/images/inert-example-loading-section.png" width="947" height="243"><p> "loading"のオーバーレイは、不活性のコンテンツを覆い隠し、不活性のコンテンツが現在アクセス可能でないことを視覚的に明らかにする。見出しおよび"loading"のテキストは、<code id="the-inert-attribute:inert-3"><a href="#inert">inert</a></code>属性をもつ要素の子孫ではないことに注意する。これは、このテキストがすべてのユーザーをアクセス可能にするが、不活性のコンテンツは誰も操作できなくなる。</p>
  </div>

  <div class="note"><p>デフォルトでは、要素またはそのサブツリーが不活性であることを示す永続的な視覚的表示は存在しない。そのようなコンテンツに適切な視覚的なスタイルは、多くの場合、コンテキストに依存する。例えば、不活性な画面外のナビゲーションパネルは、その画面外の位置がコンテンツを視覚的にさえぎるので、デフォルトスタイルを必要としない。同様に、モーダル<code id="the-inert-attribute:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素のbackdropは、ウェブページの不活性なコンテンツを具体的にスタイル設定するのではなく、視覚的にさえぎる手段として機能する。</p>

   <p>しかし、他の多くの状況では、ユーザーの混乱を避けるために、著者は文書のどの部分がアクティブで、どの部分が不活性であるかを明確にマークすることが強く勧める。特に、すべてのユーザーがページのすべての部分を一度に表示できるわけではないことを覚えておく価値がある。 たとえば、スクリーンリーダーのユーザー、小型のデバイスや拡大鏡を使用しているユーザー、特に小さなウィンドウを使用しているユーザーでさえ、ページのアクティブな部分を見ることができず、不活性なセクションが明らかに不活性でない場合はフラストレーションを感じる可能性がある。</p>
  </div>

  <h3 id="tracking-user-activation"><span class="secno">6.4</span> <dfn data-export="">ユーザーのアクティブ化</dfn>の追跡<a href="#tracking-user-activation" class="self-link"></a></h3>

  <p>ユーザーに迷惑となる可能性がある特定のAPI（ポップアップを開く、振動する電話など）の悪用を防ぐために、ユーザーエージェントは、ユーザーがウェブページをアクティブに操作している、または少なくとも1回はページを操作した場合にのみ、これらのAPIを許可する。この"アクティブな相互作用"の状態は、この節で定義されたメカニズムを通じて維持される。</p>

  

  <p>ユーザーのアクティブ化に依存するAPIは、さまざまなレベルに分類される：</p>

  <dl><dt><dfn id="sticky-activation-gated-api" data-lt="sticky activation-gated API" data-export="">定着したアクティブ化ゲート型API</dfn><dd><p>このAPIは、<span>定着したアクティブ化</span>状態がtrueである必要があるため、最初のユーザーによるアクティブ化までブロックされる。<dt><dfn id="transient-activation-gated-api" data-lt="transient activation-gated
   API" data-export="">一時的なアクティブ化ゲート型API</dfn><dd><p>このAPIは、<span>一時的なアクティブ化</span>状態がtrueであることを必要とするが、それを<span>消費</span>しないため、一時的な状態が<span>期限切れ</span>になるまで、ユーザーによるアクティブ化ごとに複数の呼び出しが許可される。<dt><dfn id="activation-consuming-api" data-lt="transient activation-consuming API" data-export="">一時的なアクティブ化を消費するAPI</dfn><dd><p>このAPIは、<span>一時的なアクティブ化</span>状態がtrueであることを必要とし、ユーザーによるアクティブ化ごとの複数の呼び出しを防ぐために、各呼び出しで<span>ユーザーによるアクティブ化を消費する</span>。<dt><dfn id="history-action-activation-consuming-api" data-lt="history-action activation-consuming API" data-export="">履歴アクションのアクティブ化を消費するAPI </dfn><dd><p>このAPIは、<span>履歴アクションのアクティブ化</span>状態がtrueであることを要求し、ユーザーアクティブ化ごとに複数のコールが発生するのを防ぐために、各コールで<span>履歴アクションのアクティブ化を消費する</span>。</dl>


  <h4 id="the-useractivation-interface"><span class="secno">6.4.1</span> <code>UserActivation</code>インターフェイス<a href="#the-useractivation-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation" title="The UserActivation interface allows querying information about a window&apos;s user activation state.">UserActivation</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <div data-algorithm=""><p>各<code>Window</code>は、<dfn id="associated-useractivation">関連付けられた<code>UserActivation</code></dfn>を持ち、これは<code>UserActivation</code>オブジェクトである。<code>Window</code>オブジェクトの作成時に、<a href="#associated-useractivation" id="the-useractivation-interface:associated-useractivation">関連する<code>UserActivation</code></a>を<code>Window</code>オブジェクトの<span>関連領域</span>で作成された<a id="the-useractivation-interface:new" href="https://triple-underscore.github.io/WebIDL-JS-ja.html#new" data-x-internal="new">新しい</a><code>UserActivation</code>オブジェクトに設定しなければならない。</p>
  </div>

  

  <dl class="domintro"><dt><code><span>navigator</span>.<span id="dom-navigator-useractivation">userActivation</span>.<span id="dom-useractivation-hasbeenactive">hasBeenActive</span></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/userActivation" title="The read-only userActivation property of the Navigator interface returns a UserActivation object which contains information about the current window&apos;s user activation state.">Navigator/userActivation</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation/hasBeenActive" title="The read-only hasBeenActive property of the UserActivation interface indicates whether the current window has sticky user activation (see sticky activation).">UserActivation/hasBeenActive</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>ウィンドウが<span>スティッキーアクティベーション</span>を持つかどうかを返す。</p>
   <dt><code><span>navigator</span>.<a href="#dom-navigator-useractivation" id="the-useractivation-interface:dom-navigator-useractivation">userActivation</a>.<span id="dom-useractivation-isactive">isActive</span></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation/hasBeenActive" title="The read-only hasBeenActive property of the UserActivation interface indicates whether the current window has sticky user activation (see sticky activation).">UserActivation/hasBeenActive</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>ウィンドウが<span>一時的にアクティベーション</span>を持つかどうかを返す。</p>
   </dl>

  


  <h3 id="activation"><span class="secno">6.5</span> 要素のアクティブ化動作<a href="#activation" class="self-link"></a></h3>

  <p>HTMLの特定の要素は、ユーザーがアクティブにすることができることを意味する、<a id="activation:activation-behaviour" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">アクティブ化動作</a>を持つ。これは、常に<code id="activation:event-click"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code>イベントによって発生する。</p>

  

  

  <dl class="domintro"><dt><code><var>element</var>.<span id="dom-click">click</span>()</code><dd><p>あたかも要素をクリックされたかのように動作する。</dl>

  

  <h4 id="the-toggleevent-interface"><span class="secno">6.5.1</span> <code>ToggleEvent</code>インターフェイス<a href="#the-toggleevent-interface" class="self-link"></a></h4>

  

  <dl class="domintro"><dt><code><var>event</var>.<a href="#dom-toggleevent-oldstate-2" id="dom-toggleevent-oldstate">oldState</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent/oldState" title="The oldState read-only property of the ToggleEvent interface is a string representing the state the element is transitioning from.">ToggleEvent/oldState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>クローズからオープンに遷移する場合は"<code>closed</code>"に設定し、オープンからクローズに遷移する場合は"<code>open</code>"に設定する。</p>
   <dt><code><var>event</var>.<a href="#dom-toggleevent-newstate-2" id="dom-toggleevent-newstate">newState</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent/newState" title="The newState read-only property of the ToggleEvent interface is a string representing the state the element is transitioning to.">ToggleEvent/newState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>クローズからオープンに遷移する場合は"<code>open</code>"に設定し、オープンからクローズに遷移する場合は"<code>closed</code>"に設定する。</p>
   <dt><code><var>event</var>.<a href="#dom-toggleevent-source-2" id="dom-toggleevent-source">source</a></code><dd><p>切り替えを開始したエレメントに設定する。これは、<code id="the-toggleevent-interface:attr-popovertarget"><a href="popover.html#attr-popovertarget">popovertarget</a></code>および<code id="the-toggleevent-interface:attr-button-commandfor"><a href="form-elements.html#attr-button-commandfor">commandfor</a></code>属性で設定できる。ソース要素がない場合、nullに設定される。</p>
   </dl>

  <div data-algorithm=""><p><dfn data-dfn-for="ToggleEvent" id="dom-toggleevent-oldstate-2" data-dfn-type="attribute"><code>oldState</code></dfn>および<dfn data-dfn-for="ToggleEvent" id="dom-toggleevent-newstate-2" data-dfn-type="attribute"><code>newState</code></dfn>属性は、初期化された値を返さなければならない。</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="ToggleEvent" id="dom-toggleevent-source-2" data-dfn-type="attribute"><code>source</code></dfn> getter steps are to return the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#retarget" id="the-toggleevent-interface:dom-retarget" data-x-internal="dom-retarget">retargeting</a> <code id="the-toggleevent-interface:dom-toggleevent-source-2"><a href="#dom-toggleevent-source-2">source</a></code> against <a id="the-toggleevent-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <code id="the-toggleevent-interface:dom-event-currenttarget"><a data-x-internal="dom-event-currenttarget" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-currenttarget">currentTarget</a></code>.</p>
  </div>

  <p class="XXX"><a href="https://github.com/whatwg/dom/issues/1328">DOM standard issue #1328</a> tracks how to better standardize associated event data in a way which makes sense on Events. Currently an event attribute initialized to a value cannot also have a getter, and so an internal slot (or map of additional fields) is required to properly specify this.</p>

  <p><dfn id="toggle-task-tracker">toggle task tracker</dfn>は、次のような<a id="the-toggleevent-interface:struct" href="https://triple-underscore.github.io/infra-ja.html#struct" data-x-internal="struct">構造体</a>である：</p>

  <dl><dt><dfn id="toggle-task-task">task</dfn><dd><code>ToggleEvent</code>を発火する<span>タスク</span>。<dt><dfn id="toggle-task-old-state">old state</dfn><dd><code id="the-toggleevent-interface:dom-toggleevent-oldstate-2"><a href="#dom-toggleevent-oldstate-2">oldState</a></code>属性の<a href="#toggle-task-task" id="the-toggleevent-interface:toggle-task-task">タスク</a>のイベントの値を表す文字列。</dl>

  <h4 id="the-commandevent-interface"><span class="secno">6.5.2</span> <code>CommandEvent</code>インターフェイス<a href="#the-commandevent-interface" class="self-link"></a></h4>

  

  <dl class="domintro"><dt><code><var>event</var>.<a href="#dom-commandevent-command-2" id="dom-commandevent-command">command</a></code><dd><p>要素が実行できるアクションを返す。</p>
   <dt><code><var>event</var>.<a href="#dom-commandevent-source-2" id="dom-commandevent-source">source</a></code><dd><p>このイベントを発生させるために相互作用した<code id="the-commandevent-interface:element"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>を返す。</p>
   </dl>

  <div data-algorithm=""><p><dfn data-dfn-for="CommandEvent" id="dom-commandevent-command-2" data-dfn-type="attribute"><code>command</code></dfn>属性は、初期化された値を返さなければならない。</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="CommandEvent" id="dom-commandevent-source-2" data-dfn-type="attribute"><code>source</code></dfn> getter steps are to return the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#retarget" id="the-commandevent-interface:dom-retarget" data-x-internal="dom-retarget">retargeting</a> <code id="the-commandevent-interface:dom-commandevent-source-2"><a href="#dom-commandevent-source-2">source</a></code> against <a id="the-commandevent-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <code id="the-commandevent-interface:dom-event-currenttarget"><a data-x-internal="dom-event-currenttarget" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-currenttarget">currentTarget</a></code>.</p>
  </div>

  <p class="XXX"><a href="https://github.com/whatwg/dom/issues/1328">DOM standard issue #1328</a> tracks how to better standardize associated event data in a way which makes sense on Events. Currently an event attribute initialized to a value cannot also have a getter, and so an internal slot (or map of additional fields) is required to properly specify this.</p>

  <h3 id="focus"><span class="secno">6.6</span> フォーカス<a href="#focus" class="self-link"></a></h3>

  
  
  
  

  

  <h4 id="introduction-7"><span class="secno">6.6.1</span> 導入<a href="#introduction-7" class="self-link"></a></h4>

  

  <p>HTMLユーザーインターフェイスは典型的に、フォームコントロール、スクロール可能領域、リンク、ダイアログボックス、ブラウザータブなど、複数の対話的なウィジットから成る。これらウィジェットは、他（たとえば、リンク、フォームコントロール）を含むもの（たとえば、ブラウザータブ、ダイアログボックス）をもつ、階層構造を形成する。</p>

  <p>キーボードを使用するインターフェイスと情報交換する場合、アクティブなウィジェットから、<a href="#focused" id="introduction-7:focused">フォーカスされる</a>と呼ばれる、対話的なウィジェットの階層構造を通して、キー入力はシステムから流れる。</p>

  <div class="example"><p>グラフィカル環境で動作するブラウザータブにおいて動作するHTMLアプリケーションを考えてみる。このアプリケーションが、いくつかのテキストコントロールおよびリンクをもつページを持ち、それ自身がテキストコントロールとボタンを持った、モーダルダイアログを表示していると想定する。</p>

   <p>このシナリオにおいて、その子の間でHTMLアプリケーションを含むブラウザータブを持つだろう、フォーカス可能なウィジェットの階層構造は、ブラウザーウィンドウを含むかもしれない。タブ自身は、ダイアログと同様に、その子として、様々なリンクおよびテキストコントロールを持つだろう。ダイアログ自身は、その子として、テキストコントロールおよびボタンを持つだろう。</p>

   <p><img alt="" src="https://html.spec.whatwg.org/multipage/images/focus-tree.png" width="800" height="450"><p>この例で<a href="#focused" id="introduction-7:focused-2">フォーカス</a>をもつウィジェットがダイアログボックスでテキストコントロールであった場合、キー入力は、グラフィカルシステムから①ウェブブラウザー、②タブ、③ダイアログ、そして最後に④テキストコントロールへ流される。</p>

  </div>

  <p>キーボード<em>イベント</em>は、常にこの<a href="#focused" id="introduction-7:focused-3">フォーカスされた</a>要素で対象にされる。</p>


  <h4 id="data-model"><span class="secno">6.6.2</span> データモデル<a href="#data-model" class="self-link"></a></h4>

  <div data-algorithm=""><p id="tlbc-system-focus"><a id="data-model:top-level-traversable" href="document-sequences.html#top-level-traversable">トップレベルトラバーサブル</a>は、オペレーティングシステムからチャネルされたキーボード入力（おそらく<a href="document-sequences.html#nav-document" id="data-model:nav-document">アクティブな文書</a>の<a id="data-model:descendant-navigables" href="document-sequences.html#descendant-navigables">子孫ナビゲート可能</a>の1つがターゲット）を受け取ることができる場合、<dfn data-dfn-for="top-level
  traversable" id="system-focus" data-export="">システムフォーカス</dfn>を持つ。</p>
  </div>

  <p><a id="data-model:top-level-traversable-2" href="document-sequences.html#top-level-traversable">トップレベル横断可能</a>は、その<a id="data-model:system-visibility-state" href="document-sequences.html#system-visibility-state">システム可視状態</a>が"<code>visible</code>"である場合、 <dfn data-dfn-for="top-level traversable" id="user-attention">ユーザーアテンション</dfn>を持ち、そして<a href="#system-focus" id="data-model:system-focus">システムフォーカス</a>を持つか、またはそれに直接関連するユーザーエージェントウィジェットが、オペレーティングシステムから送られたキーボード入力を受け取ることができるかのいずれかである。</p>
  

  <p class="note">ブラウザーウィンドウがフォーカスを失うと、ユーザーアテンションは失われるが、一方でシステムのフォーカスもまた、ロケーションバーなど、ブラウザーウィンドウ内の他のシステムウィジェットを失われる可能性がある。</p>

  <div data-algorithm=""><p><code>Document</code> <var>d</var>は、<var>d</var>が<a id="data-model:fully-active" href="document-sequences.html#fully-active">完全にアクティブ</a>であり、かつ<var>d</var>の<a id="data-model:node-navigable" href="document-sequences.html#node-navigable">ノートナビゲート可能</a>の<a href="document-sequences.html#nav-top" id="data-model:nav-top">トップレベル横断可能</a>に <a href="#user-attention" id="data-model:user-attention">ユーザーアテンション</a>がある場合、<dfn data-dfn-for="Document" id="fully-active-descendant-of-a-top-level-traversable-with-user-attention" data-export="">ユーザーアテンションをもつトップレベル横断可能の完全にアクティブの子孫</dfn>である。</p>
  </div>

  <p>用語<dfn id="focusable-area">フォーカス可能領域</dfn>は、そのようなキーボード入力の対象になる可能性があるインターフェイスの領域を指すために使用される。フォーカス可能領域は、要素、要素の一部、またはユーザーエージェントによって処理される他の領域となることができる。</p>

  <p>各<a href="#focusable-area" id="data-model:focusable-area">フォーカス可能領域</a>は、DOMで<a href="#focusable-area" id="data-model:focusable-area-2">フォーカス可能領域</a>の位置を表す<code id="data-model:node"><a data-x-internal="node" href="https://triple-underscore.github.io/DOM4-ja.html#interface-node">Node</a></code>オブジェクトである、<dfn id="dom-anchor">DOMアンカー</dfn>を持つ。（<a href="#focusable-area" id="data-model:focusable-area-3">フォーカス可能領域</a>が<code id="data-model:node-2"><a data-x-internal="node" href="https://triple-underscore.github.io/DOM4-ja.html#interface-node">Node</a></code>自身である場合、それはそれ自身の<a href="#dom-anchor" id="data-model:dom-anchor">DOM anchor</a>である。）<a href="#focusable-area" id="data-model:focusable-area-5">フォーカス可能領域</a>を表すために他のDOMオブジェクトが存在しない場合、<a href="#dom-anchor" id="data-model:dom-anchor-2">DOMアンカー</a>は、<a href="#focusable-area" id="data-model:focusable-area-4">フォーカス可能領域</a>に適するようないくつかのAPIで使用される。</p>

  <p>次のテーブルは、どのオブジェクトが<a href="#focusable-area" id="data-model:focusable-area-6">フォーカス可能領域</a>となることができるかを説明する。左の列におけるセルは、<a href="#focusable-area" id="data-model:focusable-area-7">フォーカス可能領域</a>となることができるオブジェクトを説明する。右の列におけるセルは、この要素に対する<a href="#dom-anchor" id="data-model:dom-anchor-3">DOMアンカー</a>を説明する。（両方の列をまたぐセルは、非規範的な例である。）</p>

  <table id="table-fa"><thead><tr><th id="th-fa-area"><a href="#focusable-area" id="data-model:focusable-area-8">フォーカス可能領域</a><th id="th-fa-dom-rep"><a href="#dom-anchor" id="data-model:dom-anchor-4">DOMアンカー</a><tr><th colspan="2" id="th-fa-examples"> 例<tbody><tr><th headers="th-fa-area" id="td-fa-1" class="data-header">次のすべての基準を満たす要素：<ul class="brief"><li>要素の<span>tabindex値</span>がnullでない、または要素がユーザーエージェントによってフォーカス可能であると判断される、<li>要素が<a id="data-model:shadow-host" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">シャドウホスト</a>ではないか、<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="data-model:concept-element-shadow-root" data-x-internal="concept-element-shadow-root">デリゲートのフォーカス</a>がfalseである<a id="data-model:delegates-focus" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">シャドウルート</a>のいずれかを持つ、<li>要素は<a href="semantics-other.html#concept-element-disabled" id="data-model:concept-element-disabled">実際に無効</a>ではない、<li>要素は<a href="#inert" id="data-model:inert">不活性</a>ではない。<li>要素は、<span>レンダリングされている</span>、<span>レンダリングを子に委任している</span>、または<a id="data-model:being-used-as-relevant-canvas-fallback-content" href="canvas.html#being-used-as-relevant-canvas-fallback-content">関連するキャンバスのフォールバックコンテンツとして使用されている</a>のいずれかである。</ul>
     <td headers="td-fa-1 th-fa-dom-rep">要素自身。<tr><td headers="td-fa-1 th-fa-examples" colspan="2"><p class="example"><code id="data-model:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>、<code id="data-model:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>、<code id="data-model:text-(type=text)-state-and-search-state-(type=search)"><a href="input.html#text-(type=text)-state-and-search-state-(type=search)">&lt;input type=text></a></code>、時として<code id="data-model:the-a-element"><a href="text-level-semantics.html#the-a-element">&lt;a href=""></a></code>（プラットフォーム慣習に依存する）。<tbody><tr><th headers="th-fa-area" id="td-fa-2" class="data-header"><span>レンダリングされている</span>および<a href="#inert" id="data-model:inert-2">不活性</a>でない<code id="data-model:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素に関連する<a id="data-model:image-map" href="image-maps.html#image-map">イメージマップ</a>における<code id="data-model:the-area-element"><a href="image-maps.html#the-area-element">area</a></code>要素の形状。<td headers="td-fa-2 th-fa-dom-rep"><code id="data-model:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素<tr><td headers="td-fa-2 th-fa-examples" colspan="2"><div class="example"><p>次の例において、それぞれ画像の、<code id="data-model:the-area-element-2"><a href="image-maps.html#the-area-element">area</a></code>要素は2つの形状を作成する。最初の形状の<a href="#dom-anchor" id="data-model:dom-anchor-5">DOMアンカー</a>は、最初の<code id="data-model:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code>要素であり、2つめの形状の<a href="#dom-anchor" id="data-model:dom-anchor-6">DOM anchor</a>は、2つめの<code id="data-model:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code>要素である。</p>
      <pre><code class='html'><c- p>&lt;</c-><c- f>map</c-> <c- e>id</c-><c- o>=</c-><c- s>wallmap</c-><c- p>>&lt;</c-><c- f>area</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Enter Door"</c-> <c- e>coords</c-><c- o>=</c-><c- s>"10,10,100,200"</c-> <c- e>href</c-><c- o>=</c-><c- s>"door.html"</c-><c- p>>&lt;/</c-><c- f>map</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/innerwall.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"There is a white wall here, with a door."</c-> <c- e>usemap</c-><c- o>=</c-><c- s>"#wallmap"</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/outerwall.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"There is a red wall here, with a door."</c-> <c- e>usemap</c-><c- o>=</c-><c- s>"#wallmap"</c-><c- p>></c-></code></pre>
     </div>

   <tbody><tr><th headers="th-fa-area" id="td-fa-3" class="data-header">要素のサブウィジェットを提供されるユーザーエージェントは、<span>レンダリングされている</span>かつ<a href="semantics-other.html#concept-element-disabled" id="data-model:concept-element-disabled-2">実際に無効</a>または<a href="#inert" id="data-model:inert-3">不活性</a>でない。<td headers="td-fa-3 th-fa-dom-rep"><a href="#focusable-area" id="data-model:focusable-area-9">フォーカス可能領域</a>がサブウィジェットとなる要素。<tr><td headers="td-fa-3 th-fa-examples" colspan="2"><p class="example"><code id="data-model:the-video-element"><a href="media.html#the-video-element">video</a></code>要素に対する<span>ユーザーに公開されるユーザーインターフェイスにおけるコントロール</span>、<code id="data-model:number-state-(type=number)"><a href="input.html#number-state-(type=number)">&lt;input type=number></a></code>のスピンコントロールバージョンにおけるアップ・ダウンボタン、キーボード入力を用いた開くまたは閉じるために要素を有効にする<code id="data-model:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code>要素のレンダリングの一部。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-4" class="data-header"><span>レンダリングされている</span>かつ<a href="#inert" id="data-model:inert-4">不活性</a>でない要素のスクロール可能な領域。<td headers="td-fa-4 th-fa-dom-rep">スクロール可能な領域のスクロールが作成されたボックスに対する要素<tr><td headers="td-fa-4 th-fa-examples" colspan="2"><p class="example">CSS <a id="data-model:'overflow'" href="https://triple-underscore.github.io/css-overflow3-ja.html#propdef-overflow" data-x-internal="'overflow'">'overflow'</a>プロパティの'scroll'値が典型的にスクロール可能領域を作成する。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-5" class="data-header">非nullの<a href="document-sequences.html#concept-document-bc" id="data-model:concept-document-bc">ブラウジングコンテキスト</a>があり、<a href="#inert" id="data-model:inert-5">不活性</a>ではない<code>Document</code>の<a id="data-model:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>。 <td headers="td-fa-5 th-fa-dom-rep"><a id="data-model:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>が作成された<code>Document</code>。<tr><td headers="td-fa-5 th-fa-examples" colspan="2"><p class="example"><code id="data-model:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>のコンテンツ。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-6" class="data-header">特にアクセシビリティを支援するために、またはプラットフォームの規則によりよく一致させるために、ユーザーエージェントによってフォーカス可能な領域であると判断される他の要素または要素の一部。 <td headers="td-fa-6 th-fa-dom-rep">要素。<tr><td headers="td-fa-6 th-fa-examples" colspan="2"><p class="example">ユーザーエージェントは、すべてのリストアイテムの箇条書きを<span>シーケンシャルにフォーカス可能</span>にして、その結果ユーザーがリストをより簡単にナビゲートできるようにすることができる。</p>
     <p class="example">同様に、ユーザーエージェントは、<code id="data-model:attr-title"><a href="dom.html#attr-title">title</a></code>属性をもつすべての要素を<span>シーケンシャルにフォーカス可能</span>にして、その結果それら属性の助言情報にアクセスすることができる。</p>

  </table>

  <p id="bc-focus-ergo-bcc-focus" class="note"><a href="#bc-focus-ergo-bcc-focus" class="self-link"></a>A <a id="data-model:navigable-container" href="document-sequences.html#navigable-container">navigable container</a> (e.g. an <code id="data-model:the-iframe-element-3"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>) is a <a href="#focusable-area" id="data-model:focusable-area-10">focusable area</a>, but key events routed to a <a id="data-model:navigable-container-2" href="document-sequences.html#navigable-container">navigable container</a> get immediately routed to its <a id="data-model:content-navigable" href="document-sequences.html#content-navigable">content navigable</a>'s <a href="document-sequences.html#nav-document" id="data-model:nav-document-2">active document</a>. Similarly, in sequential focus navigation a <a id="data-model:navigable-container-3" href="document-sequences.html#navigable-container">navigable container</a> essentially acts merely as a placeholder for its <a id="data-model:content-navigable-2" href="document-sequences.html#content-navigable">content navigable</a>'s <a href="document-sequences.html#nav-document" id="data-model:nav-document-3">active document</a>.</p>

  <hr>

  <p>各<code>Document</code>の1つの<a href="#focusable-area" id="data-model:focusable-area-11">フォーカス可能な領域</a>は、<dfn id="focused-area-of-the-document">文書のフォーカスされた領域</dfn>として指定される。どのコントロールがそのように呼ばれるかは時間とともに変化し、この仕様におけるアルゴリズムに基づく。</p>

  <p class="note">たとえ文書が<a id="data-model:fully-active-2" href="document-sequences.html#fully-active">完全にアクティブ</a>でなくかつユーザーに表示されないとしても、<a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document">文書のフォーカスされた領域</a>を保持できる。文書の<a id="data-model:fully-active-3" href="document-sequences.html#fully-active">完全にアクティブ</a>な状態が変化しても、<a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-2">文書のフォーカスされた領域</a>は同じままとなる。</p>

  <div data-algorithm=""><p id="currently-focused-area-of-a-top-level-browsing-context">The <dfn id="currently-focused-area-of-a-top-level-traversable">currently focused area of a top-level traversable</dfn> <var>traversable</var> is the <a href="#focusable-area" id="data-model:focusable-area-12">focusable area</a>-or-null returned by this algorithm:</p>

  <ol><li><p>If <var>traversable</var> does not have <a href="#system-focus" id="data-model:system-focus-2">system focus</a>, then return null.<li><p>Let <var>candidate</var> be <var>traversable</var>'s <a href="document-sequences.html#nav-document" id="data-model:nav-document-4">active document</a>.<li><p>While <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-3">focused area</a> is a <a id="data-model:navigable-container-4" href="document-sequences.html#navigable-container">navigable container</a> with a non-null <a id="data-model:content-navigable-3" href="document-sequences.html#content-navigable">content navigable</a>: set <var>candidate</var> to the <a href="document-sequences.html#nav-document" id="data-model:nav-document-5">active document</a> of that <a id="data-model:navigable-container-5" href="document-sequences.html#navigable-container">navigable container</a>'s <a id="data-model:content-navigable-4" href="document-sequences.html#content-navigable">content navigable</a>.<li><p>If <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-4">focused area</a> is non-null, set <var>candidate</var> to <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-5">focused area</a>.<li><p><var>candidate</var>を返す。</ol>
  </div>

  <div data-algorithm=""><p id="current-focus-chain-of-a-top-level-browsing-context">The <dfn id="current-focus-chain-of-a-top-level-traversable">current focus chain of a top-level traversable</dfn> <var>traversable</var> is the <span>focus chain</span> of the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable">currently focused area</a> of <var>traversable</var>, if <var>traversable</var> is non-null, or an empty list otherwise.</p>
  </div>

  <div data-algorithm=""><p>An element that is the <a href="#dom-anchor" id="data-model:dom-anchor-7">DOM anchor</a> of a <a href="#focusable-area" id="data-model:focusable-area-13">focusable area</a> is said to <dfn id="gains-focus">gain focus</dfn> when that <a href="#focusable-area" id="data-model:focusable-area-14">focusable area</a> becomes the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable-2">currently focused area of a top-level traversable</a>. When an element is the <a href="#dom-anchor" id="data-model:dom-anchor-8">DOM anchor</a> of a <a href="#focusable-area" id="data-model:focusable-area-15">focusable area</a> of the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable-3">currently focused area of a top-level traversable</a>, it is <dfn id="focused">focused</dfn>.</p>
  </div>

  

  <h4 id="the-tabindex-attribute"><span class="secno">6.6.3</span> <code id="the-tabindex-attribute:attr-tabindex"><a href="#attr-tabindex">tabindex</a></code>属性<a href="#the-tabindex-attribute" class="self-link"></a></h4>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex" title="The tabindex global attribute allows developers to make HTML elements focusable, allow or prevent them from being sequentially focusable (usually with the Tab key, hence the name) and determine their relative ordering for sequential focus navigation.">Global_attributes/tabindex</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="htmlsvg-global" id="attr-tabindex" data-dfn-type="element-attr"><code>tabindex</code></dfn>コンテンツ属性は、著者が、<a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor">DOMアンカー</a>として要素を持つ要素および領域を<a href="#focusable-area" id="the-tabindex-attribute:focusable-area">フォーカス可能領域</a>にする、<span>シーケンシャルフォーカス可能</span>にすることを許可または防止する、ならびに<span>シーケンシャルフォーカスナビゲーション</span>の相対的な順序を決定することを可能にする。</p>

  <p>名前"tab index"は、フォーカス可能な要素を通してナビゲートするための<kbd>Tab</kbd>キーの一般的な使用方法に由来する。"tabbing"（タブ移動）という用語は、<span>シーケンシャルフォーカス可能</span>な<a href="#focusable-area" id="the-tabindex-attribute:focusable-area-2">フォーカス可能領域</a>を前に進めることを指す。</p>

  <p><code id="the-tabindex-attribute:attr-tabindex-2"><a href="#attr-tabindex">tabindex</a></code>属性が指定される場合、<a id="the-tabindex-attribute:valid-integer" href="common-microsyntaxes.html#valid-integer">妥当な整数</a>である値を持たなければならない。正の数値は、要素の<a href="#focusable-area" id="the-tabindex-attribute:focusable-area-3">フォーカス可能領域</a>の相対的な位置を<span>シーケンシャルフォーカスナビゲーション順序</span>で指定し、負の数値はコントロールが<span>シーケンシャルフォーカス可能</span>でないことを示す。</p>

  <p>0または-1以外の値を使用している場合、開発者は、これが正しく行うために複雑になるよう、自身の<code id="the-tabindex-attribute:attr-tabindex-3"><a href="#attr-tabindex">tabindex</a></code>属性に対して用心すべきである。</p>

  <div class="note"><p>以下に、可能な<code id="the-tabindex-attribute:attr-tabindex-4"><a href="#attr-tabindex">tabindex</a></code>属性値の動作の概要を提供する。</p>

   <dl><dt>省略（または非整数値）<dd>ユーザーエージェントは、要素が<span>フォーカス可能</span>かどうかを決定する。もしそうであるならば、その要素が<span>シーケンシャルフォーカス可能</span>または<span>クリックフォーカス可能</span>（もしくはその両方）かを決定する。<dt>−1（または他の負の整数値）<dd>要素が<span>フォーカス可能</span>になり、著者がその要素を<span>クリックフォーカス可能</span>にするが、<span>シーケンシャルフォーカス可能</span>にしないことを示す。ユーザーエージェントは、たとえばプラットフォームの規則に従った特定の要素タイプ、またはキーボードのみのユーザーのために、クリックおよびシーケンシャルフォーカスの可能性に関するこの設定を無視する場合がある。<dt>0<dd>要素を<span>フォーカス可能</span>にし、著者がその要素を<span>クリックフォーカス可能</span>と<span>シーケンシャルフォーカス可能</span>の両方を好むことを示す。ユーザーエージェントは、クリックおよびシーケンシャルフォーカスのこの設定を無視する場合がある。<dt>正の整数値<dd>0と同じように動作するが、さらに、<span>tabindex順のフォーカスナビゲーションスコープ</span>内で相対的な順序を作成するため、<code id="the-tabindex-attribute:attr-tabindex-5"><a href="#attr-tabindex">tabindex</a></code>属性値がより大きい要素は後から来る。</dl>

   <p><code id="the-tabindex-attribute:attr-tabindex-6"><a href="#attr-tabindex">tabindex</a></code>属性は、要素をフォーカス不可にするために使用できないことに注意する。ページ著者ができる唯一の方法は、要素を<a href="semantics-other.html#concept-element-disabled" id="the-tabindex-attribute:concept-element-disabled">無効</a>にする、または要素を<a href="#inert" id="the-tabindex-attribute:inert">不活性</a>にすることである。</p>
  </div>

  


  


  <h4 id="focus-management-apis"><span class="secno">6.6.4</span> フォーカス管理API<a href="#focus-management-apis" class="self-link"></a></h4>

  

  <dl class="domintro"><dt><code><var>documentOrShadowRoot</var>.<span id="dom-documentorshadowroot-activeelement">activeElement</span></code><dd><p>キーイベントがルーティングされる<var>documentOrShadowRoot</var>内の最も深い要素を返す。大まかにいって、これは文書におけるフォーカスされた要素である。</p>

    <p>このAPIために、<a id="focus-management-apis:child-navigable" href="document-sequences.html#child-navigable">子ナビゲート可能</a>がフォーカスされるとき、その<a href="document-sequences.html#nav-container" id="focus-management-apis:nav-container">コンテナー</a>は<a href="document-sequences.html#nav-parent" id="focus-management-apis:nav-parent">親</a>の<a href="document-sequences.html#nav-document" id="focus-management-apis:nav-document">アクティブな文書</a>内で<a href="#bc-focus-ergo-bcc-focus">フォーカスされる</a>。 たとえば、ユーザーが<code id="focus-management-apis:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>でフォーカスをテキストコントロールに移動する場合、<code id="focus-management-apis:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>は<code id="focus-management-apis:the-iframe-element-3"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>の<a id="focus-management-apis:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>において<code id="focus-management-apis:dom-documentorshadowroot-activeelement"><a href="#dom-documentorshadowroot-activeelement">activeElement</a></code> APIによって返される要素である。</p>

    <p>同様に、フォーカスされた要素が<var>documentOrShadowRoot</var>とは異なる<a id="focus-management-apis:node-tree" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-tree" data-x-internal="node-tree">ノードツリー</a>にあるとき、<var>documentOrShadowRoot</var>がフォーカスされた要素の<a id="focus-management-apis:shadow-including-inclusive-ancestor" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-inclusive-ancestor" data-x-internal="shadow-including-inclusive-ancestor">シャドウを含む包含祖先</a>である場合、返される要素は<var>documentOrShadowRoot</var>と同じ<a id="focus-management-apis:node-tree-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-tree" data-x-internal="node-tree">ノードツリー</a>にある<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host" id="focus-management-apis:concept-documentfragment-host" data-x-internal="concept-documentfragment-host">ホスト</a>になり、そうでない場合はnullになる。</p>
   <dt><code><var>document</var>.<span id="dom-document-hasfocus">hasFocus</span>()</code><dd><p>キーイベントが<var>document</var>を経由またはルーティングされている場合はtrueを返し、そうでなければfalseを返す。大まかにいって、これはフォーカスされている<var>document</var>、または<var>document</var>内にネストされた文書に対応する。</p>
   <dt><code><var>window</var>.<span id="dom-window-focus">focus</span>()</code><dd><p><var>window</var>の<span>ナビゲート可能な</span>フォーカスを移動する。</p>
   <dt><code><var>element</var>.<span id="dom-focus">focus</span>()</code><dt><code><var>element</var>.<a href="#dom-focus" id="focus-management-apis:dom-focus">focus</a>({ <span>preventScroll</span>, <span>focusVisible</span> })</code><dd><p>フォーカスを<var>element</var>に移動する。</p>

    <p><var>element</var>が<a id="focus-management-apis:navigable-container" href="document-sequences.html#navigable-container">ナビゲート可能なテキストコンテナー</a>である場合、代わりに<a id="focus-management-apis:content-navigable" href="document-sequences.html#content-navigable">ナビゲート可能なコンテンツ</a>にフォーカスを移動する。</p>

    <p>デフォルトでは、このメソッドも<var>element</var>をビューにスクロールする。<code>preventScroll</code>オプションを指定してtrueに設定すると、この動作が防止される。</p>

    <p>デフォルトでは、ユーザーエージェント<a id="focus-management-apis:implementation-defined" href="https://triple-underscore.github.io/infra-ja.html#implementation-defined" data-x-internal="implementation-defined">実装で定義されたヒューリスティック</a>を使用して、フォーカスリングを介して<a id="focus-management-apis:indicate-focus" href="https://triple-underscore.github.io/selectors4-ja.html#indicate-focus" data-x-internal="indicate-focus">フォーカスを示す</a>かどうかを決定する。<code>focusVisible</code>オプションを指定してtrueに設定すると、フォーカスリングが常に表示される。</p>
   <dt><code><var>element</var>.<span id="dom-blur">blur</span>()</code><dd><p>フォーカスを<a id="focus-management-apis:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>に移動する。このメソッドの使用は奨められない。<a id="focus-management-apis:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>にフォーカスしたい場合、<code>Document</code>の<a id="focus-management-apis:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">文書要素</a>上の<code id="focus-management-apis:dom-focus-2"><a href="#dom-focus">focus()</a></code>メソッドを呼び出す。</p>

    <p>見苦しいフォーカスリングを発見する場合、フォーカスリングを非表示にするためにこの方法を使用してはならない。代わりに、<a id="focus-management-apis:'outline'" href="https://triple-underscore.github.io/css-ui-ja.html#outline" data-x-internal="'outline'">'outline'</a>プロパティを上書きするために<code id="focus-management-apis::focus-visible"><a data-x-internal=":focus-visible" href="https://triple-underscore.github.io/selectors4-ja.html#the-focus-visible-pseudo">:focus-visible</a></code>疑似クラスを使用し、要素がフォーカスされるものを表示する別の方法を提供する。代替フォーカススタイルが利用可能にならないか、ページが主にキーボードを使用してページをナビゲートする人に対して著しく使用可能にならないか、ページをナビゲートするのに役立つフォーカスアウトラインを使う人の視覚を減少させないかどうかに注意する。</p>

    

    <div class="example"><p>たとえば、<code id="focus-management-apis:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素からアウトラインを隠し、代わりにフォーカスを示すために黄色の背景を使用するために、次を使うことができる：</p>

     <pre><code class='css'><c- f>textarea:focus-visible </c-><c- p>{</c-> <c- k>outline</c-><c- p>:</c-> none<c- p>;</c-> <c- k>background</c-><c- p>:</c-> yellow<c- p>;</c-> <c- k>color</c-><c- p>:</c-> black<c- p>;</c-> <c- p>}</c-></code></pre>

    </div>
   </dl>

  


  <h4 id="the-autofocus-attribute"><span class="secno">6.6.5</span> <span id="autofocusing-a-form-control:-the-autofocus-attribute"></span><code id="the-autofocus-attribute:attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code>属性<a href="#the-autofocus-attribute" class="self-link"></a></h4>

  <p><dfn data-dfn-for="html-global" id="attr-fe-autofocus" data-dfn-type="element-attr"><code>autofocus</code></dfn>コンテンツ属性は、著者にページがロードされるとすぐに要素にフォーカスされることを示すのを可能にし、ユーザーは重要な要素に手動でフォーカスすることなく入力を開始できる。</p>

  <p><code id="the-autofocus-attribute:attr-popover"><a href="popover.html#attr-popover">popover</a></code>属性が設定されている<code id="the-autofocus-attribute:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素または<a id="the-autofocus-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>内部の要素に<code id="the-autofocus-attribute:attr-fe-autofocus-2"><a href="#attr-fe-autofocus">autofocus</a></code>属性が指定される場合、ダイアログまたはポップオーバーが表示されたときにフォーカスされる。</p>

  <p><code id="the-autofocus-attribute:attr-fe-autofocus-3"><a href="#attr-fe-autofocus">autofocus</a></code>属性は<a id="the-autofocus-attribute:boolean-attribute" href="common-microsyntaxes.html#boolean-attribute">真偽属性</a>である。</p>

  <div data-algorithm=""><p>To find the <dfn id="nearest-ancestor-autofocus-scoping-root-element">nearest ancestor autofocus scoping root element</dfn> given an <code id="the-autofocus-attribute:element"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code> <var>element</var>:</p>

  <ol><li><p>If <var>element</var> is a <code id="the-autofocus-attribute:the-dialog-element-2"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> element, then return <var>element</var>.<li><p>If <var>element</var>'s <code id="the-autofocus-attribute:attr-popover-2"><a href="popover.html#attr-popover">popover</a></code> attribute is not in the <a href="popover.html#attr-popover-none-state" id="the-autofocus-attribute:attr-popover-none-state">No Popover</a> state, then return <var>element</var>.<li><p>Let <var>ancestor</var> be <var>element</var>.<li><p>While <var>ancestor</var> has a <a id="the-autofocus-attribute:parent-element" href="https://triple-underscore.github.io/DOM4-ja.html#parent-element" data-x-internal="parent-element">parent element</a>:</p>

    <ol><li><p>Set <var>ancestor</var> to <var>ancestor</var>'s <a id="the-autofocus-attribute:parent-element-2" href="https://triple-underscore.github.io/DOM4-ja.html#parent-element" data-x-internal="parent-element">parent element</a>.<li><p>If <var>ancestor</var> is a <code id="the-autofocus-attribute:the-dialog-element-3"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> element, then return <var>ancestor</var>.<li><p>If <var>ancestor</var>'s <code id="the-autofocus-attribute:attr-popover-3"><a href="popover.html#attr-popover">popover</a></code> attribute is not in the <a href="popover.html#attr-popover-none-state" id="the-autofocus-attribute:attr-popover-none-state-2">No Popover</a> state, then return <var>ancestor</var>.</ol>
   <li><p>Return <var>ancestor</var>.</ol>
  </div>

  <p>両方が<code id="the-autofocus-attribute:attr-fe-autofocus-4"><a href="#attr-fe-autofocus">autofocus</a></code>属性を指定される同じ<a href="#nearest-ancestor-autofocus-scoping-root-element" id="the-autofocus-attribute:nearest-ancestor-autofocus-scoping-root-element">直近の祖先オートフォーカス範囲のルート要素</a>をもつ2つの要素が存在してはならない。</p>

  

  <div class="example"><p>次の断片において、文書が読み込まれるとき、テキストコントロールにフォーカスされる。</p>
   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>maxlength</c-><c- o>=</c-><c- s>"256"</c-> <c- e>name</c-><c- o>=</c-><c- s>"q"</c-> <c- e>value</c-><c- o>=</c-><c- s>""</c-> <c- e>autofocus</c-><c- p>></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"submit"</c-> <c- e>value</c-><c- o>=</c-><c- s>"Search"</c-><c- p>></c-></code></pre>
  </div>

  <div class="example"><p><code id="the-autofocus-attribute:attr-fe-autofocus-5"><a href="#attr-fe-autofocus">autofocus</a></code>属性は、フォームコントロールだけでなく、すべての要素に適用される。 これにより、次のような例が可能になる：</p>
   <pre><code class='html'><c- p>&lt;</c-><c- f>div</c-> <c- e>contenteditable</c-> <c- e>autofocus</c-><c- p>></c->Edit <c- p>&lt;</c-><c- f>strong</c-><c- p>></c->me!<c- p>&lt;/</c-><c- f>strong</c-><c- p>>&lt;</c-><c- f>div</c-><c- p>></c-></code></pre>
  </div>



  <h3 id="assigning-keyboard-shortcuts"><span class="secno">6.7</span> キーボードショートカットの割り当て<a href="#assigning-keyboard-shortcuts" class="self-link"></a></h3>

  <h4 id="introduction-8"><span class="secno">6.7.1</span> 導入<a href="#introduction-8" class="self-link"></a></h4>

  

  <p>アクティブにされるまたはフォーカスさせることができる各要素は<code id="introduction-8:the-accesskey-attribute"><a href="#the-accesskey-attribute">accesskey</a></code>属性を使用して、それをアクティブにするための単一のキーの組み合わせを割り当てることができる。</p>

  <p>正確なショートカットは、ユーザーエージェントによって決定され、ユーザーのキーボードに関する情報に基づき、どのキーボードショートカットが既にプラットフォーム上に存在し、他にどのようなショートカットがページ上で指定され、ガイドとして<code id="introduction-8:the-accesskey-attribute-2"><a href="#the-accesskey-attribute">accesskey</a></code>属性に提供された情報を使用する。</p>

  <p>関連するキーボードショートカットが多種多様な入力デバイスで利用可能であることを確実にするために、著者は<code id="introduction-8:the-accesskey-attribute-3"><a href="#the-accesskey-attribute">accesskey</a></code>属性で多数の選択肢を提供できる。</p>

  <p>各選択肢は、文字または数字のような、単一の文字で構成される。</p>

  <p>ユーザーエージェントは、キーボードショートカットの一覧をユーザーに提供できるが、著者は行うことも推奨される。<code>accessKeyLabel</code> IDL属性は、ユーザーエージェントによって割り当てられた実際のキーの組み合わせを表す文字列を返す。</p>

  <div class="example"><p>この例において、著者はショートカットキーを使用して呼び出すことができるボタンを提供してきた。フルキーボードをサポートするために、著者は可能なキーとして"C"を提供している。テンキーのみを搭載したデバイスをサポートするために、著者は別の可能なキーとして"1"を提供している。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>button</c-> <c- e>value</c-><c- o>=</c-><c- s>Collect</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"collect()"</c->
       <strong><c- e>accesskey</c-><c- o>=</c-><c- s>"C 1"</c-></strong> <c- e>id</c-><c- o>=</c-><c- s>c</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>To tell the user what the shortcut key is, the author has here opted to explicitly add the key combination to the button's label:</p>

   <pre><code class='js'><c- a>function</c-> addShortcutKeyLabel<c- p>(</c->button<c- p>)</c-> <c- p>{</c->
<strong>  <c- k>if</c-> <c- p>(</c->button<c- p>.</c->accessKeyLabel <c- o>!=</c-> <c- t>''</c-><c- p>)</c->
    button<c- p>.</c->value <c- o>+=</c-> <c- t>' ('</c-> <c- o>+</c-> button<c- p>.</c->accessKeyLabel <c- o>+</c-> <c- t>')'</c-><c- p>;</c-></strong>
<c- p>}</c->
addShortcutKeyLabel<c- p>(</c->document<c- p>.</c->getElementById<c- p>(</c-><c- t>'c'</c-><c- p>));</c-></code></pre>

   <p>異なるプラットフォーム上のブラウザーは、たとえ同じキーの組み合わせであっても、そのプラットフォーム上で普及している規則に基づいて異なるラベルを表示する。たとえば、キーの組み合わせが、Controlキー、Shiftキー、および文字Cである場合、Macのブラウザーが"<samp>^⇧C</samp>"を表示するかもしれない一方で、Windowsのブラウザーは"<samp>Ctrl+Shift+C</samp>"を表示するかもしれない。一方でEmacsのブラウザーは単に"<samp>C-C</samp>"を表示するかもしれない。同様に、キーの組み合わせがAltキーとEscキーである場合、Windowsは"<samp>Alt+Esc</samp>"を使用するかもしれず、Macは"<samp>⌥⎋</samp>"を使用するかもしれず、Emacsのブラウザーは、"<samp>M-ESC</samp>"または"<samp>ESC ESC</samp>"を使用するかもしれない。</p>

   <p>したがって、一般に、<code>accessKeyLabel</code> IDL属性から返された値を解析しようとするのは賢明ではない。</p>

  </div>


  <h4 id="the-accesskey-attribute"><span class="secno">6.7.2</span> <dfn data-dfn-for="html-global" data-dfn-type="element-attr"><code>accesskey</code></dfn>属性<a href="#the-accesskey-attribute" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey" title="The accesskey global attribute provides a hint for generating a keyboard shortcut for the current element. The attribute value must consist of a single printable character (which includes accented and other characters that can be generated by the keyboard).">Global_attributes/accesskey</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p>すべての<a id="the-accesskey-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>は、<code id="the-accesskey-attribute:the-accesskey-attribute"><a href="#the-accesskey-attribute">accesskey</a></code>コンテンツ属性の設定を持ってもよい。<code id="the-accesskey-attribute:the-accesskey-attribute-2"><a href="#the-accesskey-attribute">accesskey</a></code>属性値は、要素をアクティブにするまたはフォーカスするキーボードショートカットを作成するためのガイドとして、ユーザーエージェントによって使用される。</p>

  <p>指定される場合、値は、<a id="the-accesskey-attribute:ordered-set-of-unique-space-separated-tokens" href="common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens">順序付きの一意な空白区切りトークンの集合</a>でなければならない。これらのトークンはいずれも別のトークンと<a id="the-accesskey-attribute:identical-to" href="https://triple-underscore.github.io/infra-ja.html#string-is" data-x-internal="identical-to">同一</a>でなく、それぞれが正確に1コードポイント長さでなければならない。</p>

  <div class="example"><p>次の例において、サイトを熟知するキーボードユーザーがより迅速に関連するページに移動できるよう、さまざまなリンクがアクセスキーとともに与えられる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>nav</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Consortium Activities"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"A"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/activities"</c-><c- p>></c->Activities<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Technical Reports and Recommendations"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"T"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/TR/"</c-><c- p>></c->Technical Reports<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Alphabetical Site Index"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"S"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/siteindex"</c-><c- p>></c->Site Index<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"About This Site"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"B"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/"</c-><c- p>></c->About Consortium<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Contact Consortium"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"C"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/contact"</c-><c- p>></c->Contact<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>nav</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>次の例において、検索フィールドは2つの可能なアクセスキー、"s"と"0"（この順番で）が与えられる。テンキー付きの小さなデバイス上のユーザーエージェントは単なる簡素なキー<kbd><kbd>0</kbd></kbd>を選ぶかもしれないが、フルキーボードを搭載したデバイスでのユーザーエージェントは、ショートカットキーとして<kbd><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>S</kbd></kbd>を選ぶかもしれない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>action</c-><c- o>=</c-><c- s>"/search"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>label</c-><c- p>></c->Search: <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"search"</c-> <c- e>name</c-><c- o>=</c-><c- s>"q"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"s 0"</c-><c- p>>&lt;/</c-><c- f>label</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"submit"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>次の例において、ボタンは説明可能なアクセスキーを持つ。このスクリプトは次に、ユーザーエージェントが選択したキーの組み合わせを通知するためにボタンのラベルの更新を試みる。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>submit</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"N @ 1"</c-> <c- e>value</c-><c- o>=</c-><c- s>"Compose"</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>function</c-> labelButton<c- p>(</c->button<c- p>)</c-> <c- p>{</c->
   <c- k>if</c-> <c- p>(</c->button<c- p>.</c->accessKeyLabel<c- p>)</c->
     button<c- p>.</c->value <c- o>+=</c-> <c- t>' ('</c-> <c- o>+</c-> button<c- p>.</c->accessKeyLabel <c- o>+</c-> <c- t>')'</c-><c- p>;</c->
 <c- p>}</c->
 <c- a>var</c-> inputs <c- o>=</c-> document<c- p>.</c->getElementsByTagName<c- p>(</c-><c- t>'input'</c-><c- p>);</c->
 <c- k>for</c-> <c- p>(</c-><c- a>var</c-> i <c- o>=</c-> <c- mf>0</c-><c- p>;</c-> i <c- o>&lt;</c-> inputs<c- p>.</c->length<c- p>;</c-> i <c- o>+=</c-> <c- mf>1</c-><c- p>)</c-> <c- p>{</c->
   <c- k>if</c-> <c- p>(</c->inputs<c- p>[</c->i<c- p>].</c->type <c- o>==</c-> <c- u>"submit"</c-><c- p>)</c->
     labelButton<c- p>(</c->inputs<c- p>[</c->i<c- p>]);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>あるユーザーエージェントにおいて、ボタンのラベルは"<samp>Compose（⌘N）</samp>"になるかもしれない。別のものにおいて、これは"<samp>Compose（Alt+⇧+1）</samp>"になるかもしれない。ユーザーエージェントがキーを割り当てない場合、単に"<samp>Compose</samp>"になる。正確な文字列は<span>割り当てられるアクセスキー</span>が何であるか、およびどのようにユーザーエージェントがそのキーの組み合わせを表すかに依存する。</p>

  </div>


  



  <h3 id="editing-2"><span class="secno">6.8</span> 編集<a href="#editing-2" class="self-link"></a></h3>

  <h4 id="contenteditable"><span class="secno">6.8.1</span> 編集可能な文書領域を作成する：<code id="contenteditable:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>コンテンツ属性<a href="#contenteditable" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/contentEditable" title="The contentEditable property of the HTMLElement interface specifies whether or not the element is editable.">HTMLElement/contentEditable</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable" title="The contenteditable global attribute is an enumerated attribute indicating if the element should be editable by the user. If so, the browser modifies its widget to allow editing.">Global_attributes/contenteditable</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-contenteditable" data-dfn-type="element-attr"><code>enctype</code></dfn>コンテンツ属性は、次のキーワードおよび状態をもつ<a id="contenteditable:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である：</p>

  <table><thead><tr><th>キーワード<th>状態<th>概要<tbody><tr><td><dfn data-dfn-for="html-global/contenteditable" id="attr-contenteditable-true" data-dfn-type="attr-value"><code>true</code></dfn><td><dfn id="attr-contenteditable-true-state">True</dfn><td>要素は編集可能である。<tr><td><dfn data-dfn-for="html-global/contenteditable" id="attr-contenteditable-false" data-dfn-type="attr-value"><code>false</code></dfn><td><dfn id="attr-contenteditable-false-state">False</dfn><td>要素は編集可能でない。<tr><td><dfn data-dfn-for="html-global/contenteditable" id="attr-contenteditable-plaintextonly" data-dfn-type="attr-value"><code>plaintext-only</code></dfn><td><dfn id="attr-contenteditable-plaintextonly-state">Plaintext-Only</dfn><td>要素の生のテキストコンテンツのみが編集可能である。リッチフォーマットは無効になる。</table>


  <div data-algorithm=""><p>この属性の<i id="contenteditable:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>および<i id="contenteditable:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">無効値のデフォルト</a></i>は両方とも<dfn id="attr-contenteditable-inherit-state">inherit</dfn>状態である。継承状態は、親要素の状態に基づいて要素が編集可能である（または編集可能でない）ことを示す。The attribute's <i id="contenteditable:empty-value-default"><a href="common-microsyntaxes.html#empty-value-default">empty value default</a></i> is the <a href="#attr-contenteditable-true-state" id="contenteditable:attr-contenteditable-true-state">True</a> state.</p>
  </div>

  <div class="example"><p>たとえば、ユーザーがHTMLを使用する記事を書くことが期待される、新しい記事を公開するために<code id="contenteditable:the-form-element"><a href="forms.html#the-form-element">form</a></code>および<code id="contenteditable:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>を持つページを考えてみる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>method</c-><c- o>=</c-><c- s>POST</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->New article<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>textarea</c-> <c- e>name</c-><c- o>=</c-><c- s>article</c-><c- p>></c-><c- ni>&amp;lt;</c->p>Hello world.<c- ni>&amp;lt;</c->/p><c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>button</c-><c- p>></c->Publish<c- p>&lt;/</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>スクリプトを有効にする場合、<code id="contenteditable:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素は、<code id="contenteditable:attr-contenteditable-2"><a href="#attr-contenteditable">contenteditable</a></code>属性を使用して、代わりにリッチテキストコントロールに置き換えることができる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>method</c-><c- o>=</c-><c- s>POST</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->New article<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>textarea</c-> <c- e>id</c-><c- o>=</c-><c- s>textarea</c-> <c- e>name</c-><c- o>=</c-><c- s>article</c-><c- p>></c-><c- ni>&amp;lt;</c->p>Hello world.<c- ni>&amp;lt;</c->/p><c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>div</c-> <c- e>style</c-><c- o>=</c-><c- s>"white-space: pre-wrap"</c-> <c- e>hidden</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>></c->Hello world.<c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
   <c- a>let</c-> textarea <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- u>"textarea"</c-><c- p>);</c->
   <c- a>let</c-> div <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- u>"div"</c-><c- p>);</c->
   textarea<c- p>.</c->hidden <c- o>=</c-> <c- kc>true</c-><c- p>;</c->
   div<c- p>.</c->hidden <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
   div<c- p>.</c->contentEditable <c- o>=</c-> <c- u>"true"</c-><c- p>;</c->
   div<c- p>.</c->oninput <c- o>=</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
     textarea<c- p>.</c->value <c- o>=</c-> div<c- p>.</c->innerHTML<c- p>;</c->
   <c- p>};</c->
  <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>button</c-><c- p>></c->Publish<c- p>&lt;/</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>たとえば挿入リンクを挿入する機能は、<code>document.execCommand()</code>APIを使用する、または<code id="contenteditable:selection"><a data-x-internal="selection" href="https://triple-underscore.github.io/selection-api-ja.html#selection-interface">Selection</a></code>APIおよび他のDOM APIを使用して実装することができる。<a href="references.html#refsEXECCOMMAND">[EXECCOMMAND]</a> <a href="references.html#refsSELECTION">[SELECTION]</a> <a href="references.html#refsDOM">[DOM]</a></p>
  </div>

  <div class="example"><p><code id="contenteditable:attr-contenteditable-3"><a href="#attr-contenteditable">contenteditable</a></code>属性はまた、大きな効果を使用することができる：</p>

   <pre><code class='html'><c- cp>&lt;!doctype html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>en</c-><c- p>></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->Live CSS editing!<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>style</c-> <c- e>style</c-><c- o>=</c-><c- s>white-space:pre</c-> <c- e>contenteditable</c-><c- p>></c->
<c- f>html</c-> <c- p>{</c-> <c- k>margin</c-><c- p>:</c-><c- mf>.2</c-><c- b>em</c-><c- p>;</c-> <c- k>font-size</c-><c- p>:</c-><c- mi>2</c-><c- b>em</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-><c- kc>lime</c-><c- p>;</c-> <c- k>background</c-><c- p>:</c-><c- kc>purple</c-> <c- p>}</c->
<c- f>head</c-><c- o>,</c-> <c- f>title</c-><c- o>,</c-> <c- f>style</c-> <c- p>{</c-> <c- k>display</c-><c- p>:</c-><c- kc>block</c-> <c- p>}</c->
<c- f>body</c-> <c- p>{</c-> <c- k>display</c-><c- p>:</c-><c- kc>none</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c-></code></pre>
  </div>

  <dl class="domintro"><dt><code><var>element</var>.<span id="dom-contenteditable">contentEditable</span> [ = <var>value</var> ]</code><dd><p><code id="contenteditable:attr-contenteditable-4"><a href="#attr-contenteditable">contenteditable</a></code>属性の状態に基づいて、"<code>true</code>"、"<code>plaintext-only</code>"、"<code>false</code>"、または"<code>inherit</code>"を返す。</p>

    <p>その状態を変更する設定が可能である。</p>

    <p>新しい値がこれらの文字列のいずれかでない場合、<a id="contenteditable:syntaxerror" href="https://triple-underscore.github.io/WebIDL-ja.html#syntaxerror" data-x-internal="syntaxerror">"<code>SyntaxError</code>"</a> <code id="contenteditable:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   <dt><code><var>element</var>.<span id="dom-iscontenteditable">isContentEditable</span></code><dd><p>要素が編集可能な場合にtrueを返す。そうでなければfalseを返す。</dl>

  



  <h4 id="making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">6.8.2</span> 文書全体を編集可能にする：<code id="making-entire-documents-editable:-the-designmode-idl-attribute:dom-document-designmode"><a href="#dom-document-designmode">designMode</a></code>のゲッターおよびセッター<a href="#making-entire-documents-editable:-the-designmode-idl-attribute" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var>.<span id="dom-document-designmode">designMode</span> [ = <var>value</var> ]</code><dd><p>文書が編集可能である場合に"<code>on</code>"を返し、ない場合に"<code>off</code>"を返す。</p>

    <p>文書の現在の状態を変更する設定が可能である。これは、文書をフォーカスし、その文書で文書の選択をリセットする。</p>
   </dl>

  


  <h4 id="best-practices-for-in-page-editors"><span class="secno">6.8.3</span> ページ内編集者のためのベストプラクティス<a href="#best-practices-for-in-page-editors" class="self-link"></a></h4>

  <p>著者は、もともと値'pre-wrap'へこれら編集のメカニズムを介して作成された<span>編集ホスト</span>およびマークアップ上の<a id="best-practices-for-in-page-editors:'white-space'" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>プロパティを設定することを奨める。デフォルトのHTML空白処理は、あまりWYSIWYG編集に向かず、そして<a id="best-practices-for-in-page-editors:'white-space'-2" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>がデフォルト値のままである場合、いくつかのコーナーの場合において、行の折り返しは正しく動作しない。</p>

  <div class="example"><p>デフォルト'normal'値が代わりに使用される場合に発生する問題の例として、単語の間に2つのスペース（ここでは"␣"によって表される）とともに、"<kbd>yellow␣␣ball</kbd>"と入力したユーザーの場合を考える。<a id="best-practices-for-in-page-editors:'white-space'-3" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>のデフォルト値（'normal'）のための場所での編集規則ともに、結果のマークアップは、"<samp>yellow&amp;nbsp; ball</samp>"または"<samp>yellow &amp;nbsp;ball</samp>"のいずれかで構成される。すなわち、2つの単語間の非開票スペースに加えて、通常スペースが存在する。<a id="best-practices-for-in-page-editors:'white-space'-4" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>に対する'normal'値は共に相殺するために隣接する通常スペースを必要とするため、これは必要である。</p>

   <p>前者の場合において、たとえ行の末尾で"<samp>yellow</samp>"単独で一致するとしても、"<samp>yellow⍽</samp>"は次の行（"⍽"は非改行スペースを表すためにここで使用されている）に折り返す。後者の場合において、行の先頭に包まれる場合、"<samp>⍽ball</samp>"は非改行スペース由来の可視インデントを持つだろう。</p>

   <p>しかし、<a id="best-practices-for-in-page-editors:'white-space'-5" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>が'pre-wrap'に設定される場合、編集規則は、代わりに単に単語間に2つの通常のスペースを置き、2つの単語が行末で分割されるべきであり、スペースはレンダリングから削除されてきれいになる。</p>

  </div>

  

  <h4 id="spelling-and-grammar-checking"><span class="secno">6.8.4</span> スペルと文法チェック<a href="#spelling-and-grammar-checking" class="self-link"></a></h4>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/spellcheck" title="The spellcheck global attribute is an enumerated attribute that defines whether the element may be checked for spelling errors.">Global_attributes/spellcheck</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>9+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>57+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>9.3+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>47+</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>37+</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-spellcheck" data-dfn-type="element-attr"><code>spellcheck</code></dfn>属性は、次のキーワードと状態を持つ<a id="spelling-and-grammar-checking:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である：</p>

  <table><thead><tr><th>キーワード<th>状態<th>概要<tbody><tr><td><dfn data-dfn-for="html-global/spellcheck" id="attr-spellcheck-true" data-dfn-type="attr-value"><code>true</code></dfn><td><dfn id="attr-spellcheck-true-state">True</dfn><td>スペルおよび文法がチェックされる。<tr><td><dfn data-dfn-for="html-global/spellcheck" id="attr-spellcheck-false" data-dfn-type="attr-value"><code>false</code></dfn><td><dfn id="attr-spellcheck-false-state">False</dfn><td>スペルおよび文法がチェックされない。</table>

  <div data-algorithm=""><p>この属性の<i id="spelling-and-grammar-checking:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>と<i id="spelling-and-grammar-checking:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">無効値のデフォルト</a></i>は、両方とも<dfn id="attr-spellcheck-default-state">Default</dfn>状態である。デフォルト状態は、下記で定義されるように、おそらく親要素自身の<code id="spelling-and-grammar-checking:attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code>状態に基づいて、デフォルトの動作に応じて動作する要素であることを示す。The attribute's <i id="spelling-and-grammar-checking:empty-value-default"><a href="common-microsyntaxes.html#empty-value-default">empty value default</a></i> is the <a href="#attr-spellcheck-true-state" id="spelling-and-grammar-checking:attr-spellcheck-true-state">True</a> state.</p>
  </div>

  

  <dl class="domintro"><dt><code><var>element</var>.<span id="dom-spellcheck">spellcheck</span> [ = <var>value</var> ]</code><dd><p>要素がスペルや文法チェックを持つ場合はtrueを返す。そうでなければfalseを返す。</p>

    <p>デフォルトを上書きして<code id="spelling-and-grammar-checking:attr-spellcheck-2"><a href="#attr-spellcheck">spellcheck</a></code>コンテンツ属性を設定するための、設定が可能である。</p>
   </dl>

  

  <p class="note">この仕様は、スペルや文法チェッカーに対するユーザーインターフェイスを定義しない。ユーザーエージェントはオンデマンドチェックを提供するかもしれず、チェックが有効である間に連続的なチェックを実行するかもしれず、または他のインターフェイスを使用するかもしれない。</p>

  <h4 id="writing-suggestions"><span class="secno">6.8.5</span> 書き込みの提案<a href="#writing-suggestions" class="self-link"></a></h4>

  <p>ユーザーエージェントは、ユーザーがフォームコントロール（<code id="writing-suggestions:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素など）または<span>編集ホスト</span>内の要素のいずれかの編集可能領域に入力するときに、書き込みの提案を提供する。</p>

  <p><dfn data-dfn-for="html-global" id="attr-writingsuggestions" data-dfn-type="element-attr"><code>writingsuggestions</code></dfn>コンテンツ属性は、次のキーワードおよび状態をもつ<a id="writing-suggestions:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である：</p>

  <table><thead><tr><th>キーワード<th>状態<th>概要<tbody><tr><td><dfn data-dfn-for="html-global/writingsuggestions" id="attr-writingsuggestions-true" data-dfn-type="attr-value"><code>true</code></dfn><td><dfn id="attr-writingsuggestions-true-state">True</dfn><td>この要素については、書き込みの提案を行うべきである。<tr><td><dfn data-dfn-for="html-global/writingsuggestions" id="attr-writingsuggestions-false" data-dfn-type="attr-value"><code>false</code></dfn><td><dfn id="attr-writingsuggestions-false-state">False</dfn><td>この要素については、書き込みの提案を行うべきでない。</table>

  <div data-algorithm=""><p>この属性の<i id="writing-suggestions:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>は、<dfn id="attr-writingsuggestions-default-state">Default</dfn>状態である。デフォルト状態は、下記で定義されるように、おそらく親要素自身の<code id="writing-suggestions:attr-writingsuggestions"><a href="#attr-writingsuggestions">writingsuggestions</a></code>状態に基づいて、デフォルトの動作に応じて動作する要素であることを示す。</p>
  </div>

  <div data-algorithm=""><p>The attribute's <i id="writing-suggestions:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">invalid value default</a></i> and <i id="writing-suggestions:empty-value-default"><a href="common-microsyntaxes.html#empty-value-default">empty value default</a></i> are both the <a href="#attr-writingsuggestions-true-state" id="writing-suggestions:attr-writingsuggestions-true-state">True</a> state.</p>
  </div>

  <dl class="domintro"><dt><code><var>element</var>.<span id="dom-writingsuggestions">writingSuggestions</span> [ = <var>value</var> ]</code><dd><p>ユーザーエージェントが要素のスコープの下で書き込みの提案を行う場合は "<code>true</code>"を返し、そうでなければ "<code>false</code>"を返す。</p>

    <p>デフォルトを上書きして<code id="writing-suggestions:attr-writingsuggestions-2"><a href="#attr-writingsuggestions">writingsuggestions</a></code>コンテンツ属性を設定するための、設定が可能である。</p>
   </dl>

  

  <hr>

  <div data-algorithm=""><p>User agents should only offer suggestions within an element's scope if the result of running the following algorithm given <var>element</var> returns true:</p>

  <ol><li><p>If the user has disabled writing suggestions, then return false.<li><p>If none of the following conditions are true:</p>

    <ul><li><p><var>element</var> is an <code id="writing-suggestions:the-input-element"><a href="input.html#the-input-element">input</a></code> element whose <code id="writing-suggestions:attr-input-type"><a href="input.html#attr-input-type">type</a></code> attribute is in either the <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="writing-suggestions:text-(type=text)-state-and-search-state-(type=search)">Text</a>, <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="writing-suggestions:text-(type=text)-state-and-search-state-(type=search)-2">Search</a>, <a href="input.html#telephone-state-(type=tel)" id="writing-suggestions:telephone-state-(type=tel)">Telephone</a>, <a href="input.html#url-state-(type=url)" id="writing-suggestions:url-state-(type=url)">URL</a>, or <a href="input.html#email-state-(type=email)" id="writing-suggestions:email-state-(type=email)">Email</a> state and is <i id="writing-suggestions:concept-fe-mutable"><a href="form-control-infrastructure.html#concept-fe-mutable">mutable</a></i>;<li><p><var>element</var> is a <code id="writing-suggestions:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code> element that is <i id="writing-suggestions:concept-fe-mutable-2"><a href="form-control-infrastructure.html#concept-fe-mutable">mutable</a></i>; or<li><p><var>element</var> is an <span>editing host</span> or is <span>editable</span>,</ul>

    <p>then return false.</p>
   <li><p>If <var>element</var> has an <a id="writing-suggestions:inclusive-ancestor" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-inclusive-ancestor" data-x-internal="inclusive-ancestor">inclusive ancestor</a> with a <code id="writing-suggestions:attr-writingsuggestions-3"><a href="#attr-writingsuggestions">writingsuggestions</a></code> content attribute that's not in the <a href="#attr-writingsuggestions-default-state" id="writing-suggestions:attr-writingsuggestions-default-state">Default</a> and the nearest such ancestor's <code id="writing-suggestions:attr-writingsuggestions-4"><a href="#attr-writingsuggestions">writingsuggestions</a></code> content attribute is in the <a href="#attr-writingsuggestions-false-state" id="writing-suggestions:attr-writingsuggestions-false-state">False</a> state, then return false.<li><p>Otherwise, return true.</ol>
  </div>

  <p class="note">This specification does not define the user interface for writing suggestions. A user agent could offer on-demand suggestions, continuous suggestions as the user types, inline suggestions, autofill-like suggestions in a popup, or could use other interfaces.</p>

  <h4 id="autocapitalization"><span class="secno">6.8.6</span> 自動大文字化<a href="#autocapitalization" class="self-link"></a></h4>

  <p>モバイルデバイス上の仮想キーボードや音声入力など、テキストを入力するいくつかの方法では、文の最初の文字を自動的に大文字にすることでユーザーを支援することがある（この規則で言語でテキストを構成する場合）。自動大文字化を実装する仮想キーボードは、自動大文字にすべき文字を入力しようとするとき、大文字の文字を表示するように自動的に切り替えるかもしれない（ただし、ユーザーはその文字を小文字に切り替え可能である）。例えば音声入力など、他の入力の種類は、ユーザーが最初に介入するオプションを与えないような方法で自動大文字化を行ってもよい。<code id="autocapitalization:attr-autocapitalize"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、著者がそのような振る舞いを制御するのを可能にする。</p>

  <p>典型的に実装されるように、<code id="autocapitalization:attr-autocapitalize-2"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、物理キーボードで入力するときの動作に影響しない。（この理由のために、場合によっては自動大文字化の動作を上書きしたり、最初の入力の後にテキストを編集することをユーザーの能力と同様に、属性をいかなる種類の入力検証にも当てにしてはならない。</p>

  <p>ホストされている編集可能領域の自動大文字化動作を制御するために<span>編集ホスト</span>上で、その要素にテキストを入力するための動作を制御するために<code id="autocapitalization:the-input-element"><a href="input.html#the-input-element">input</a></code>もしくは<code id="autocapitalization:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の上で、または<code id="autocapitalization:the-form-element-2"><a href="forms.html#the-form-element">form</a></code>要素に関連付けられたすべての<a href="forms.html#category-autocapitalize" id="autocapitalization:category-autocapitalize">自動大文字化および自動修正継承要素</a>のデフォルトの動作を制御するために<code id="autocapitalization:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素上で<code id="autocapitalization:attr-autocapitalize-3"><a href="#attr-autocapitalize">autocapitalize</a></code>属性を使用することができる。<p><code id="autocapitalization:attr-autocapitalize-4"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、<code id="autocapitalization:attr-input-type"><a href="input.html#attr-input-type">type</a></code>属性が<a href="input.html#url-state-(type=url)" id="autocapitalization:url-state-(type=url)">URL</a>、<a href="input.html#email-state-(type=email)" id="autocapitalization:email-state-(type=email)">Email、</a>または<a href="input.html#password-state-(type=password)" id="autocapitalization:password-state-(type=password)">Password</a>状態のいずれかにある<code id="autocapitalization:the-input-element-2"><a href="input.html#the-input-element">input</a></code>要素に対して、自動大文字化を有効にすることはない。</p>

  <p>自動大文字化処理モデルは、次のように定義される5つの<dfn id="autocapitalization-hint">自動大文字化ヒント</dfn>の中から選択することに基づく：</p>

  <dl><dt><dfn id="autocap-hint-default">Default</dfn><dd><p>ユーザーエージェントおよび入力メソッドは、自動大文字化を有効にするかどうかを独自に決定すべきである。<dt><dfn id="autocap-hint-none">None</dfn><dd><p>自動大文字化は適用されるべきではない（すべての文字は小文字をデフォルトにすべきである）。<dt><dfn id="autocap-hint-sentences">Sentences</dfn><dd><p>各文の最初の文字は大文字をデフォルトにすべきである。他のすべての文字は小文字をデフォルトにすべきである。<dt><dfn id="autocap-hint-words">Words</dfn><dd><p>各単語の最初の文字は大文字をデフォルトにすべきである。他のすべての文字は小文字をデフォルトにすべきである。<dt><dfn id="autocap-hint-characters">Characters</dfn><dd><p>全ての文字は大文字をデフォルトにすべきである。</dl>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autocapitalize" title="The autocapitalize global attribute is an enumerated attribute that controls whether and how text input is automatically capitalized as it is entered/edited by the user.">Global_attributes/autocapitalize</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>111+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>5+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-autocapitalize" data-dfn-type="element-attr"><code>autocapitalize</code></dfn>属性は、状態が可能な<a href="#autocapitalization-hint" id="autocapitalization:autocapitalization-hint">自動大文字ヒント</a>である<a id="autocapitalization:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。属性の状態で指定された<a href="#autocapitalization-hint" id="autocapitalization:autocapitalization-hint-2">自動大文字化ヒント</a>は、ユーザーエージェントの動作を通知する、<span>使用済みの自動大文字化ヒント</span>を形成するための他の考慮事項と組み合わされる。この属性のキーワードと状態マッピングは次のとおり：</p>

  <table><thead><tr><th>キーワード<th>状態<tbody><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-off" data-dfn-type="attr-value"><code>off</code></dfn><td rowspan="2"><a href="#autocap-hint-none" id="autocapitalization:autocap-hint-none">None</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-none" data-dfn-type="attr-value"><code>none</code></dfn><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-on" data-dfn-type="attr-value"><code>on</code></dfn><td rowspan="2"><a href="#autocap-hint-sentences" id="autocapitalization:autocap-hint-sentences">Sentences</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-sentences" data-dfn-type="attr-value"><code>sentences</code></dfn><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-words" data-dfn-type="attr-value"><code>words</code></dfn><td><a href="#autocap-hint-words" id="autocapitalization:autocap-hint-words">Words</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-characters" data-dfn-type="attr-value"><code>characters</code></dfn><td><a href="#autocap-hint-characters" id="autocapitalization:autocap-hint-characters">Characters</a></table>

  <div data-algorithm=""><p>The attribute's <i id="autocapitalization:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">missing value default</a></i> is the <a href="#autocap-hint-default" id="autocapitalization:autocap-hint-default">Default</a> state, and its <i id="autocapitalization:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">invalid value default</a></i> is the <a href="#autocap-hint-sentences" id="autocapitalization:autocap-hint-sentences-2">Sentences</a> state.</div>

  <dl class="domintro"><dt><code><var>element</var>.<span id="dom-autocapitalize">autocapitalize</span> [ = <var>value</var> ]</code><dd><p>要素の現在の自動大文字化状態を返す。設定されていない場合は空文字列を返す。<code id="autocapitalization:the-form-element-3"><a href="forms.html#the-form-element">form</a></code>要素から状態を継承する<code id="autocapitalization:the-input-element-3"><a href="input.html#the-input-element">input</a></code>要素と<code id="autocapitalization:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の場合、これは<code id="autocapitalization:the-form-element-4"><a href="forms.html#the-form-element">form</a></code>要素の自動大文字化状態を返すが、編集可能領域の要素の場合、これは（この要素が実際に<span>編集ホスト</span>でない限り）編集ホストの自動大文字化状態を返さないことに注意すること。</p>

    <p><code id="autocapitalization:attr-autocapitalize-5"><a href="#attr-autocapitalize">autocapitalize</a></code>コンテンツ属性を設定する（そしてそれによって要素の自動大文字化動作を変化させる）ことで、設定が可能である。</p>
   </dl>

  


  <h4 id="autocorrection"><span class="secno">6.8.7</span> 自動修正<a href="#autocorrection" class="self-link"></a></h4>

  <p>一部のテキスト入力方法は、入力中にスペルミスのある単語を自動的に修正することでユーザーを支援する。このプロセスは自動修正とも呼ばれる。ユーザーエージェントは、編集可能なテキストの自動修正を、フォームコントロール（<code id="autocorrection:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の値など）、または<span>編集ホスト</span>内の要素（<code id="autocorrection:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>を使用するなど）でサポートできる。自動修正は、テキストが自動修正されようとしている、または自動修正されたことを示すユーザーインターフェイスを伴ってもよく、一般に、スペルミスのある単語の後に句読文字、スペース、または新しい段落を挿入するときに実行される。<code id="autocorrection:attr-autocorrect"><a href="#attr-autocorrect">autocorrect</a></code>属性は、著者にそのような動作を制御を可能にする。</p>

  <p>ホストされている編集可能領域の自動大文字化動作を制御するために編集ホスト上で、その要素にテキストを入力するための動作を制御するために<code id="autocorrection:the-input-element"><a href="input.html#the-input-element">input</a></code>もしくは<code id="autocorrection:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の上で、または<code id="autocorrection:the-form-element-2"><a href="forms.html#the-form-element">form</a></code>要素に関連付けられたすべての<a href="forms.html#category-autocapitalize" id="autocorrection:category-autocapitalize">自動大文字化および自動修正継承要素</a>のデフォルトの動作を制御するために<code id="autocorrection:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素上で<code id="autocorrection:attr-autocorrect-2"><a href="#attr-autocorrect">autocapitalize</a></code>属性を使用することができる。</p>

  <p><code id="autocorrection:attr-input-type"><a href="input.html#attr-input-type">type</a></code>属性が<a href="input.html#url-state-(type=url)" id="autocorrection:url-state-(type=url)">URL</a>、<a href="input.html#email-state-(type=email)" id="autocorrection:email-state-(type=email)">Email</a>または<a href="input.html#password-state-(type=password)" id="autocorrection:password-state-(type=password)">Password</a>のいずれかの状態にある<code id="autocorrection:the-input-element-2"><a href="input.html#the-input-element">input</a></code>要素では<code id="autocorrection:attr-autocorrect-3"><a href="#attr-autocorrect">autocorrect</a></code>属性によって自動修正が有効になることはない。</p>

  <p><dfn data-dfn-for="html-global" id="attr-autocorrect" data-dfn-type="element-attr"><code>autocorrect</code></dfn>属性は、次のキーワードと状態を持つ列挙属性である：</p>

  <table><thead><tr><th>キーワード<th>状態<th>概要<tbody><tr><td><dfn data-dfn-for="html-global/autocorrect" id="attr-autocorrect-on" data-dfn-type="attr-value"><code>on</code></dfn><td><dfn id="concept-autocorrection-on">On</dfn><td>ユーザーエージェントは、ユーザーの入力中にスペルミスを自動的に修正することができる。左への入力中にスペルが自動的に修正されるかどうかは、ユーザーエージェントが決定するものであり、要素とユーザーの好みによって決まってもよい。<tr><td><dfn data-dfn-for="html-global/autocorrect" id="attr-autocorrect-off" data-dfn-type="attr-value"><code>off</code></dfn><td><dfn id="concept-autocorrection-off">Off</dfn><td>ユーザーエージェントは、ユーザーの入力中にスペルを自動的に修正することはできない。</table>

  <div data-algorithm=""><p>The attribute's <i id="autocorrection:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">invalid value default</a></i>, <i id="autocorrection:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">missing value default</a></i>, and <i id="autocorrection:empty-value-default"><a href="common-microsyntaxes.html#empty-value-default">empty value default</a></i> are all the <a href="#concept-autocorrection-on" id="autocorrection:concept-autocorrection-on">On</a> state.</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="HTMLElement" id="dom-autocorrect" data-dfn-type="attribute"><code>autocorrect</code></dfn> getter steps are: return true if the element's <a href="#used-autocorrection-state" id="autocorrection:used-autocorrection-state">used autocorrection state</a> is <a href="#concept-autocorrection-on" id="autocorrection:concept-autocorrection-on-2">On</a> and false if the element's <a href="#used-autocorrection-state" id="autocorrection:used-autocorrection-state-2">used autocorrection state</a> is <a href="#concept-autocorrection-off" id="autocorrection:concept-autocorrection-off">Off</a>. セッターステップ手順は次のとおり：指定した値がtrueの場合、要素の<code id="autocorrection:attr-autocorrect-4"><a href="#attr-autocorrect">autocorrect</a></code>属性を"<code>on</code>"に設定しなければならない。そうでなければ、"<code>off</code>"に設定しなければならない。</p>
  </div>

  <div data-algorithm=""><p>To compute the <dfn id="used-autocorrection-state">used autocorrection state</dfn> of an element <var>element</var>, run these steps:</p>

  <ol><li><p>If <var>element</var> is an <code id="autocorrection:the-input-element-3"><a href="input.html#the-input-element">input</a></code> element whose <code id="autocorrection:attr-input-type-2"><a href="input.html#attr-input-type">type</a></code> attribute is in one of the <a href="input.html#url-state-(type=url)" id="autocorrection:url-state-(type=url)-2">URL</a>, <a href="input.html#email-state-(type=email)" id="autocorrection:email-state-(type=email)-2">Email</a>, or <a href="input.html#password-state-(type=password)" id="autocorrection:password-state-(type=password)-2">Password</a> states, then return <a href="#concept-autocorrection-off" id="autocorrection:concept-autocorrection-off-2">Off</a>.<li><p>If the <code id="autocorrection:attr-autocorrect-5"><a href="#attr-autocorrect">autocorrect</a></code> content attribute is present on <var>element</var>, then return the state of the attribute.<li><p>If <var>element</var> is an <a href="forms.html#category-autocapitalize" id="autocorrection:category-autocapitalize-2">autocapitalize-and-autocorrect inheriting element</a> and has a non-null <a id="autocorrection:form-owner" href="form-control-infrastructure.html#form-owner">form owner</a>, then return the state of <var>element</var>'s <a id="autocorrection:form-owner-2" href="form-control-infrastructure.html#form-owner">form owner</a>'s <code id="autocorrection:attr-autocorrect-6"><a href="#attr-autocorrect">autocorrect</a></code> attribute.<li><p>Return <a href="#concept-autocorrection-on" id="autocorrection:concept-autocorrection-on-3">On</a>.</ol>
  </div>

  <dl class="domintro"><dt><var>element</var> . <code id="dom-autocorrect-2"><a href="#dom-autocorrect">autocorrect</a></code><dd><p>要素の自動修正動作を返す。<code id="autocorrection:the-form-element-3"><a href="forms.html#the-form-element">form</a></code>要素から状態を継承する<a href="forms.html#category-autocapitalize" id="autocorrection:category-autocapitalize-3">自動大文字化および自動修正の継承要素</a>の場合、これは<code id="autocorrection:the-form-element-4"><a href="forms.html#the-form-element">form</a></code>要素の自動修正動作を返すが、編集可能領域内の要素の場合、<span>編集ホスト</span>の自動修正動作は返さない（この要素が実際に<span>編集ホスト</span>でない場合）。<dt><var>element</var> . <code id="autocorrection:dom-autocorrect"><a href="#dom-autocorrect">autocorrect</a></code> = <var>value</var><dd><p><code id="autocorrection:attr-autocorrect-7"><a href="#attr-autocorrect">autocorrect</a></code>コンテンツ属性を更新する（そしてこれにより、要素の自動修正動作が変更される）。</dl>

  <div class="example"><p><code id="autocorrection:the-input-element-4"><a href="input.html#the-input-element">input</a></code>要素は、<code id="autocorrection:attr-autocorrect-8"><a href="#attr-autocorrect">autocorrect</a></code>コンテンツ属性を持たないため、"<code id="autocorrection:attr-autocorrect-off"><a href="#attr-autocorrect-off">off</a></code>"という属性を持つ<code id="autocorrection:the-form-element-5"><a href="forms.html#the-form-element">form</a></code>要素から継承されるため、自動修正ができない。しかし、<code id="autocorrection:the-textarea-element-3"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素は、値が"<code id="autocorrection:attr-autocorrect-on"><a href="#attr-autocorrect-on">on</a></code>"の<code id="autocorrection:attr-autocorrect-9"><a href="#attr-autocorrect">autocorrect</a></code>コンテンツ属性があるため、自動修正が可能である。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>autocorrect</c-><c- o>=</c-><c- s>"off"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"search"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>textarea</c-> <c- e>autocorrect</c-><c- o>=</c-><c- s>"on"</c-><c- p>>&lt;/</c-><c- f>textarea</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>
  </div>


  <h4 id="input-modalities:-the-inputmode-attribute"><span class="secno">6.8.8</span> 入力モダリティ：<code id="input-modalities:-the-inputmode-attribute:attr-inputmode"><a href="#attr-inputmode">inputmode</a></code>属性<a href="#input-modalities:-the-inputmode-attribute" class="self-link"></a></h4>

  <p>ユーザーエージェントは、フォームコントロール（<code id="input-modalities:-the-inputmode-attribute:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の値など）で、または<span>編集ホスト</span>（<code id="input-modalities:-the-inputmode-attribute:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>など）における要素で<code id="input-modalities:-the-inputmode-attribute:attr-inputmode-2"><a href="#attr-inputmode">inputmode</a></code>属性をサポートすることができる。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode" title="The inputmode global attribute is an enumerated attribute that hints at the type of data that might be entered by the user while editing the element or its contents. This allows a browser to display an appropriate virtual keyboard.">Global_attributes/inputmode</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>95+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>66+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>79+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>12.2+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-inputmode" data-dfn-type="element-attr"><code>inputmode</code></dfn>コンテンツ属性は、ユーザーがコンテンツを入力する際に最も参考になる入力メカニズムの種類を指定する<a id="input-modalities:-the-inputmode-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。</p>

  <table><thead><tr><th>キーワード<th>説明<tbody><tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-none" data-dfn-type="attr-value"><code>none</code></dfn><td>ユーザーエージェントは仮想キーボードを表示すべきではない。このキーワードは、独自のキーボードコントロールをレンダリングするコンテンツに役立つ。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-text" data-dfn-type="attr-value"><code>text</code></dfn><td>ユーザーエージェントは、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-tel" data-dfn-type="attr-value"><code>tel</code></dfn><td>ユーザーエージェントは、電話番号入力が可能な仮想キーボードを表示すべきであある。これは、数字0〜9、"＃"文字、および"*"文字のキーを含むべきである。一部のロケールで、これはまた、アルファベットのニーモニックラベル（たとえば、米国で、"2"キーはまた、歴史的に文字A、B、およびCで標識されている）を含むことができる。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-url" data-dfn-type="attr-value"><code>url</code></dfn><td>ユーザーエージェントは、"/"と"."文字、"www"や".com"のようなドメイン名の中で見つかった文字列を簡単に入力するための、<a href="https://triple-underscore.github.io/URL-ja.html#concept-url" id="input-modalities:-the-inputmode-attribute:url" data-x-internal="url">URL</a>の入力を補助するためのキーとともに、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-email" data-dfn-type="attr-value"><code>email</code></dfn><td>ユーザーエージェントは、"@"文字および"."文字のような、電子メールアドレスの入力を補助するためのキーとともに、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-numeric" data-dfn-type="attr-value"><code>numeric</code></dfn><td>ユーザーエージェントは、数字入力が可能な仮想キーボードを表示すべきであある。このキーワードは、PIN入力に便利である。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-decimal" data-dfn-type="attr-value"><code>decimal</code></dfn><td>ユーザーエージェントは、小数入力が可能な仮想キーボードを表示すべきであある。ロケールの数値キーおよびフォーマットセパレーターを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-search" data-dfn-type="attr-value"><code>search</code></dfn><td>ユーザーエージェントは、検索に最適化された仮想キーボードを表示すべきである。</table>

  

  <h4 id="input-modalities:-the-enterkeyhint-attribute"><span class="secno">6.8.9</span> 入力モダリティ：<code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint"><a href="#attr-enterkeyhint">enterkeyhint</a></code>属性<a href="#input-modalities:-the-enterkeyhint-attribute" class="self-link"></a></h4>

  <p>ユーザーエージェントは、フォームコントロール（<code id="input-modalities:-the-enterkeyhint-attribute:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の値など）で、または<span>編集ホスト</span>（<code id="input-modalities:-the-enterkeyhint-attribute:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>など）における要素で<code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint-2"><a href="#attr-enterkeyhint">enterkeyhint</a></code>属性をサポートすることができる。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/enterkeyhint" title="The enterkeyhint global attribute is an enumerated attribute defining what action label (or icon) to present for the enter key on virtual keyboards.">Global_attributes/enterkeyhint</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>94+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>77+</span></span><hr><span class="opera yes"><span>Opera</span><span>66+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>57+</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-enterkeyhint" data-dfn-type="element-attr"><code>enterkeyhint</code></dfn>コンテンツ属性は、仮想キーボードのEnterキーに表示するアクションラベル（またはアイコン）を指定する<a id="input-modalities:-the-enterkeyhint-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。これにより、ユーザーにとってより役立つようにするために、著者はEnterキーの表示をカスタマイズを可能にする。</p>

  <table><thead><tr><th>キーワード<th>説明<tbody><tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-enter" data-dfn-type="attr-value"><code>enter</code></dfn><td>ユーザーエージェントは、典型的には新しい行を挿入する、操作'enter'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-done" data-dfn-type="attr-value"><code>done</code></dfn><td>ユーザーエージェントは、典型的には入力するものがもう何もなく、そして input method editor (IME)は閉じられることを意味する、操作'done'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-go" data-dfn-type="attr-value"><code>go</code></dfn><td>ユーザーエージェントは、典型的にはユーザーがタイプしたテキストのターゲットにユーザーを連れて行くことを意味する、操作'go'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-next" data-dfn-type="attr-value"><code>next</code></dfn><td>ユーザーエージェントは、典型的にはテキストを受け付ける次のフィールドにユーザーを連れて行く、操作'next'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-previous" data-dfn-type="attr-value"><code>previous</code></dfn><td>ユーザーエージェントは、典型的にはテキストを受け入れる前のフィールドにユーザーを連れて行く、操作'previous'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-search" data-dfn-type="attr-value"><code>search</code></dfn><td>ユーザーエージェントは、典型的にはユーザーがタイプしたテキストの検索の結果にユーザーを連れて行く、操作「検索」の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-send" data-dfn-type="attr-value"><code>send</code></dfn><td>ユーザーエージェントは、典型的にはテキストをそのテキストのターゲットに配信する、操作'send'の合図を提示すべきである。</table>

  

  <h3 id="find-in-page"><span class="secno">6.9</span> ページ内検索<a href="#find-in-page" class="self-link"></a></h3>

  <h4 id="introduction-9"><span class="secno">6.9.1</span> 導入<a href="#introduction-9" class="self-link"></a></h4>

  <p>このセクションは、<dfn id="find-in-page-2">ページ内検索</dfn>を定義する。これは、ユーザーが特定の情報に対してページのコンテンツを検索できるようにする一般的なユーザーエージェントのメカニズムである。</p>

  <p><a href="#find-in-page-2" id="introduction-9:find-in-page-2">ページ内検索</a>機能へのアクセスは、ページ内検索<dfn id="find-in-page-interface">インターフェイス</dfn>を介して提供される。これはユーザーエージェントが提供するユーザーインターフェイスであり、ユーザーが入力と検索のパラメーターを指定できるようする。このインターフェイスは、ショートカットまたはメニュー選択の結果として表示される。</p>

  <p><a href="#find-in-page-interface" id="introduction-9:find-in-page-interface">ページ内検索インターフェイス</a>のテキスト入力と設定の組み合わせは、ユーザーの<dfn id="fip-query">クエリー</dfn>を表す。これは通常、ユーザーが検索したいテキストと、オプションの設定（例えば、検索を単語に限定する機能など）が含まれる。</p>

  <p>ユーザーエージェントは、与えられた<a href="#fip-query" id="introduction-9:fip-query">クエリー</a>のページコンテンツを処理し、0個以上の<dfn id="fip-matches">マッチ</dfn>を識別する。これはユーザー<a href="#fip-query" id="introduction-9:fip-query-2">クエリー</a>を満たすコンテンツ範囲である。</p>

  <p><a href="#fip-matches" id="introduction-9:fip-matches">マッチ</a>の1つが<dfn id="fip-active-match">アクティブなマッチ</dfn>としてユーザーに識別される。 それはハイライトされ、スクロールして表示される。ユーザーは、<a href="#find-in-page-interface" id="introduction-9:find-in-page-interface-2">ページ内検索インターフェイス</a>を使用して<a href="#fip-active-match" id="introduction-9:fip-active-match">アクティブなマッチ</a>を前進させることにより、<a href="#fip-matches" id="introduction-9:fip-matches-2">マッチ</a>をナビゲートできる。</p>

  <p class="XXX"><a href="https://github.com/whatwg/html/issues/3539">Issue #3539</a>は、<a href="#find-in-page-2" id="introduction-9:find-in-page-2-2">ページ内検索</a>が現在指定されていない<code>window.find()</code> APIの基礎となる方法の標準化を追跡する。</p>

  <h4 id="interaction-with-details-and-hidden=until-found"><span class="secno">6.9.2</span> <code id="interaction-with-details-and-hidden=until-found:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code>と<code id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state"><a href="#attr-hidden-until-found-state">hidden=until-found</a></code>との相互作用 <a href="#interaction-with-details-and-hidden=until-found" class="self-link"></a></h4>

  <div data-algorithm=""><p>ページ内検索が一致するものの検索を開始するとき、 <code id="interaction-with-details-and-hidden=until-found:attr-details-open"><a href="interactive-elements.html#attr-details-open">open</a></code>属性が設定されていないページ内のすべての<code id="interaction-with-details-and-hidden=until-found:the-details-element-2"><a href="interactive-elements.html#the-details-element">details</a></code>要素は、ページ内検索が検索できるようにするために、<code id="interaction-with-details-and-hidden=until-found:attr-details-open-2"><a href="interactive-elements.html#attr-details-open">open</a></code>属性を変更せずに、2番目のスロットの<a href="https://triple-underscore.github.io/css-contain-ja.html#skips-its-contents" id="interaction-with-details-and-hidden=until-found:skips-its-contents" data-x-internal="skips-its-contents">スキップされたコンテンツ</a>にアクセスできるようにすべきである。同様に、<a href="#attr-hidden-until-found-state" id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state-2">Hidden Until Found</a>状態の<code id="interaction-with-details-and-hidden=until-found:attr-hidden"><a href="#attr-hidden">hidden</a></code>属性をもつすべてのHTML要素は、ページ内検索で検索できるようにするために、<code id="interaction-with-details-and-hidden=until-found:attr-hidden-2"><a href="#attr-hidden">hidden</a></code>属性を変更せずに<a href="https://triple-underscore.github.io/css-contain-ja.html#skips-its-contents" id="interaction-with-details-and-hidden=until-found:skips-its-contents-2" data-x-internal="skips-its-contents">スキップされたコンテンツ</a>にアクセスできるようにすべきである。ページ内検索が一致の検索を終了した後、<code id="interaction-with-details-and-hidden=until-found:the-details-element-3"><a href="interactive-elements.html#the-details-element">details</a></code>要素と、<a href="#attr-hidden-until-found-state" id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state-3">Hidden Until Found</a>状態の<code id="interaction-with-details-and-hidden=until-found:attr-hidden-3"><a href="#attr-hidden">hidden</a></code>属性をもつ要素は、コンテンツが再びスキップされるようにすべきである。このプロセス全体は同期的に行われなければならない（したがって、ユーザーや著者のコードを監視することはできない）。<a href="references.html#refsCSSCONTAIN">[CSSCONTAIN]</a></p>
  </div>

  <div data-algorithm=""><p>When find-in-page chooses a new <a href="#fip-active-match" id="interaction-with-details-and-hidden=until-found:fip-active-match">active match</a>, perform the following steps:</p>

  <ol><li><p>Let <var>node</var> be the first node in the <a href="#fip-active-match" id="interaction-with-details-and-hidden=until-found:fip-active-match-2">active match</a>.<li><p><span>Queue a global task</span> on the <span>user interaction task source</span> given <var>node</var>'s <span>relevant global object</span> to run the <span>ancestor revealing algorithm</span> on <var>node</var>.</ol>
  </div>

  <p class="warning">このようにページ内検索が<code id="interaction-with-details-and-hidden=until-found:the-details-element-4"><a href="interactive-elements.html#the-details-element">details</a></code>要素を自動展開すると、<code id="interaction-with-details-and-hidden=until-found:event-toggle"><a href="indices.html#event-toggle">toggle</a></code>イベントが発火する。ページ内検索が起動する別の<code id="interaction-with-details-and-hidden=until-found:event-scroll"><a data-x-internal="event-scroll" href="https://triple-underscore.github.io/cssom-view-ja.html#eventdef-document-scroll">scroll</a></code>イベントと同様に、このイベントは、ユーザーがページ内検索のダイアログに入力している内容を検出するためにページによって使用される。ページが、現在の検索語と、ユーザーが入力できるすべての次の文字をギャップで区切った小さなスクロール可能領域を作成し、ブラウザがどの文字にスクロールするかを観察した場合、その文字を検索語に追加し、スクロール可能領域を更新して、検索語を段階的に構築できる。考えられる次のマッチをそれぞれ閉じた<code id="interaction-with-details-and-hidden=until-found:the-details-element-5"><a href="interactive-elements.html#the-details-element">details</a></code>要素でラップすることで、ページは<code id="interaction-with-details-and-hidden=until-found:event-scroll-2"><a data-x-internal="event-scroll" href="https://triple-underscore.github.io/cssom-view-ja.html#eventdef-document-scroll">scroll</a></code>イベントではなく<code id="interaction-with-details-and-hidden=until-found:event-toggle-2"><a href="indices.html#event-toggle">toggle</a></code>イベントをリッスンすることができる。この攻撃は、ユーザーがページ内検索ダイアログに入力したすべての文字に作用しないことによって、両方のイベントに対して対処することができる。</p>

  <h4 id="interaction-with-selection"><span class="secno">6.9.3</span> 選択との相互作用<a href="#interaction-with-selection" class="self-link"></a></h4>

  <p>ページ内検索プロセスは、文書のコンテキストで呼び出され、その文書の<a href="https://triple-underscore.github.io/selection-api-ja.html#dfn-selection" id="interaction-with-selection:document-selection" data-x-internal="document-selection">選択</a>に影響を与えることがある。 具体的には、<a href="#fip-active-match" id="interaction-with-selection:fip-active-match">アクティブなマッチ</a>を定義する範囲が、現在の選択を決定することがある。しかし、この選択の更新は、ページ内検索プロセスのさまざまな時点で発生することがある（たとえば、<a href="#find-in-page-interface" id="interaction-with-selection:find-in-page-interface">ページ内検索インターフェイス</a>の終了時、または<a href="#fip-active-match" id="interaction-with-selection:fip-active-match-2">アクティブなマッチ</a>の範囲の変更時）。<h3 id="close-requests-and-close-watchers"><span class="secno">6.10</span> 閉じ要求および閉じウォッチャー<a href="#close-requests-and-close-watchers" class="self-link"></a></h3>

  <h4 id="close-requests"><span class="secno">6.10.1</span> 閉じ要求<a href="#close-requests" class="self-link"></a></h4>

  <p><a id="close-requests:implementation-defined" href="https://triple-underscore.github.io/infra-ja.html#implementation-defined" data-x-internal="implementation-defined">実装で定義された</a>（そしておそらくデバイス固有の）方法で、ユーザーはユーザーエージェントに<dfn id="close-request" data-export="">閉じ要求</dfn>を送ることができる。これは、ユーザーが、ポップオーバー、メニュー、ダイアログ、ピッカー、表示モードなど、現在画面に表示されているものを閉じたいことを示す。</p>

  <div class="example"><p>閉じ要求の例を次に示す：</p>

   <ul><li><p>デスクトッププラットフォームの<kbd>Esc</kbd>キー。<li><p>Androidなどの特定のモバイルプラットフォームでの戻るボタンまたはジェスチャー。<li><p>iOS VoiceOverの2本指スクラブ"z"ジェスチャーなど、支援技術の取り消しジェスチャー。<li><p>DualShockゲームパッドの丸ボタンなど、ゲームコントローラーの標準的な"戻る"ボタン</ul>
  </div>

  

  <p><kbd>Esc</kbd>キーを押すことが<a href="#close-request" id="close-requests:close-request">閉じ要求</a>として解釈されるプラットフォームでは、ユーザーエージェントは、キーが押されている<em>down</em>を、キーが離されているのではなく、閉じ要求としなければならない。したがって、上記のアルゴリズムでは、発生する"関連イベント"は単一の<code id="close-requests:event-keydown"><a data-x-internal="event-keydown" href="https://triple-underscore.github.io/uievents-ja.html#event-type-keydown">keydown</a></code>イベントでなければならない。</p>

  <p class="example"><kbd>Esc</kbd>が<a href="#close-request" id="close-requests:close-request-2">閉じ要求</a>であるプラットフォームでは、ユーザーエージェントはまず、適切に初期化された<code id="close-requests:event-keydown-2"><a data-x-internal="event-keydown" href="https://triple-underscore.github.io/uievents-ja.html#event-type-keydown">keydown</a></code>イベントを発火する。ウェブ開発者が<code id="close-requests:dom-event-preventdefault"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code>を呼び出してイベントをキャンセルした場合、それ以降は何も起こらない。しかし、イベントがキャンセルされずに発生した場合、ユーザーエージェントは<span>クローズウォッチャーの処理</span>に進む。</p>

  <p class="example">戻るボタンが潜在的<a href="#close-request" id="close-requests:close-request-3">閉じ要求</a>であるプラットフォームでは、イベントは関係しないため、戻るボタンが押されると、ユーザーエージェントは直接<span>クローズウォッチャー の処理</span>に進む。<span>アクティブな</span><span>クローズウォッチャー</span>が存在する場合、それがトリガーされる。存在しない場合、ユーザーエージェントは、別の方法で、例えば、-1の<a id="close-requests:traverse-the-history-by-a-delta" href="browsing-the-web.html#traverse-the-history-by-a-delta">デルタによる履歴のトラバース</a>要求として、戻るボタンの押下を解釈することができる。</p>


  


  <h4 id="the-closewatcher-interface"><span class="secno">6.10.2</span> <code>CloseWatcher</code>インターフェイス<a href="#the-closewatcher-interface" class="self-link"></a></h4>

  

  <dl class="domintro"><dt><code><var>watcher</var> = new <span id="dom-closewatcher">CloseWatcher</span>()</code><dt><code><var>watcher</var> = new <a href="#dom-closewatcher" id="the-closewatcher-interface:dom-closewatcher">CloseWatcher</a>({ <span id="dom-closewatcheroptions-signal">signal</span> })</code><dd><p>新しい<code>CloseWatcher</code>インスタンスを作成する。</p>

    <p><code id="the-closewatcher-interface:dom-closewatcheroptions-signal"><a href="#dom-closewatcheroptions-signal">signal</a></code>オプションが与えられる場合、与えられた<code id="the-closewatcher-interface:abortsignal"><a data-x-internal="abortsignal" href="https://triple-underscore.github.io/DOM4-ja.html#abortsignal">AbortSignal</a></code>をアボートすることで、<var>watcher</var>を破棄できる（あたかも<code id="the-closewatcher-interface:dom-closewatcher-destroy"><a href="#dom-closewatcher-destroy">watcher.destroy()</a></code>のように）。</p>

    <p>いずれかの<span>close watcher</span>がすでにアクティブであり、かつ<code>Window</code>が<span>history-action activation</span>を持たない場合、結果として生じる<code>CloseWatcher</code>は、<a href="#close-request" id="the-closewatcher-interface:close-request">close request</a>に応答して、すでにアクティブな<span>close watcher</span>とともに閉じられる。（このすでにアクティブな<span>close watcher</span>は、必ずしも<code>CloseWatcher</code>オブジェクトである必要はない。モーダル<code id="the-closewatcher-interface:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素、または<code id="the-closewatcher-interface:attr-popover"><a href="popover.html#attr-popover">popover</a></code> 属性をもつ要素によって生成されたポップオーバーである可能性がある。）</p>
   <dt><code><var>watcher</var>.<span id="dom-closewatcher-requestclose">requestClose</span>()</code><dd><p>最初に<code id="the-closewatcher-interface:event-cancel"><a href="indices.html#event-cancel">cancel</a></code>イベントを発火させ、かつそのイベントが<code id="the-closewatcher-interface:dom-event-preventdefault"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code>でキャンセルされない場合、あたかも<code id="the-closewatcher-interface:dom-closewatcher-destroy-2"><a href="#dom-closewatcher-destroy">watcher.destroy()</a></code>が呼び出されたかのように閉じたウォッチャを非アクティブ化する前に<code id="the-closewatcher-interface:event-close"><a href="indices.html#event-close">close</a></code>イベントを発火させる。これにより、あたかも<a href="#close-request" id="the-closewatcher-interface:close-request-2">close request</a>が<var>watcher</var>をターゲットとして送信されたかのように動作する。</p>

    <p>これは、キャンセルおよびクローズロジックを<code id="the-closewatcher-interface:event-cancel-2"><a href="indices.html#event-cancel">cancel</a></code>および<code id="the-closewatcher-interface:event-close-2"><a href="indices.html#event-close">close</a></code>イベントハンドラーに統合するために使用できるヘルパーユーティリティであり、非<a href="#close-request" id="the-closewatcher-interface:close-request-3">close request</a>のすべてのクローズアフォーダンスでこのメソッドを呼び出すことができる。</p>
   <dt><code><var>watcher</var>.<span id="dom-closewatcher-close">close</span>()</code><dd><p>即座に<code id="the-closewatcher-interface:event-close-3"><a href="indices.html#event-close">close</a></code>イベントを発火させ、 あたかも<code id="the-closewatcher-interface:dom-closewatcher-destroy-3"><a href="#dom-closewatcher-destroy">watcher.destroy()</a></code>が呼び出されたかのようにクローズウォッチャーを停止させる。</p>

    <p>これは、<code id="the-closewatcher-interface:event-cancel-3"><a href="indices.html#event-cancel">cancel</a></code>イベントハンドラー内のロジックをスキップして、  <code id="the-closewatcher-interface:event-close-4"><a href="indices.html#event-close">close</a></code>イベントハンドラーへの終了ロジックをトリガーするために使用できるヘルパーユーティリティである。</p>
   <dt><code><var>watcher</var>.<span id="dom-closewatcher-destroy">destroy</span>()</code><dd><p><var>watcher</var>を停止させ、<code id="the-closewatcher-interface:event-close-5"><a href="indices.html#event-close">close</a></code>イベントを受け取らないようにし、新しい独立した<code>CloseWatcher</code>インスタンスを構築できるようにする。</p>

    <p>これは、関連するUI要素が閉じられる以外の方法で分解された場合に呼び出されることを目的とする。</p>
   </dl>

  

  <p>下記は、<code>CloseWatcher</code>インターフェイスを実装するすべてのオブジェクトによって、<a id="the-closewatcher-interface:event-handler-idl-attributes" href="webappapis.html#event-handler-idl-attributes">イベントハンドラーIDL属性</a>として、サポートされる<a id="the-closewatcher-interface:event-handlers" href="webappapis.html#event-handlers">イベントハンドラー</a>（および対応する<span>イベントハンドラーイベント型</span>）である：</p>

  <table><thead><tr><th><a href="webappapis.html#event-handlers" id="the-closewatcher-interface:event-handlers-2">イベントハンドラー</a><th><span>イベントハンドラーイベント型</span><tbody><tr><td><dfn data-dfn-for="CloseWatcher" id="handler-closewatcher-oncancel" data-dfn-type="attribute"><code>oncancel</code></dfn><td><code id="the-closewatcher-interface:event-cancel-4"><a href="indices.html#event-cancel">cancel</a></code><tr><td><dfn data-dfn-for="CloseWatcher" id="handler-closewatcher-onclose" data-dfn-type="attribute"><code>onclose</code></dfn><td><code id="the-closewatcher-interface:event-close-6"><a href="indices.html#event-close">close</a></code></table>

  <div id="example-CloseWatcher-basic" class="example"><a href="#example-CloseWatcher-basic" class="self-link"></a><p>ユーザーが指定した<a href="#close-request" id="the-closewatcher-interface:close-request-4">閉じる要求</a>と閉じるボタンが押されたときに自動的に閉じるカスタムピッカーコントロールを実装する場合、次のコードは、<code>CloseWatcher</code> APIを使用して閉じる要求を処理する方法を示す：</p>

   <pre><code class='js'><c- a>const</c-> watcher <c- o>=</c-> <c- k>new</c-> CloseWatcher<c- p>();</c->
<c- a>const</c-> picker <c- o>=</c-> setUpAndShowPickerDOMElement<c- p>();</c->

<c- a>let</c-> chosenValue <c- o>=</c-> <c- kc>null</c-><c- p>;</c->

watcher<c- p>.</c->onclose <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  chosenValue <c- o>=</c-> picker<c- p>.</c->querySelector<c- p>(</c-><c- t>'input'</c-><c- p>).</c->value<c- p>;</c->
  picker<c- p>.</c->remove<c- p>();</c->
<c- p>};</c->

picker<c- p>.</c->querySelector<c- p>(</c-><c- t>'.close-button'</c-><c- p>).</c->onclick <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> watcher<c- p>.</c->requestClose<c- p>();</c-></code></pre>

   <p>選択された値を収集するためのロジックが、<code>CloseWatcher</code>オブジェクトの <code id="the-closewatcher-interface:event-close-7"><a href="indices.html#event-close">close</a></code>イベントハンドラーに集中されていることに注意する。閉じるボタンの<code id="the-closewatcher-interface:event-click"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code>イベントハンドラーは、<code id="the-closewatcher-interface:dom-closewatcher-requestclose"><a href="#dom-closewatcher-requestclose">requestClose()</a></code>を呼び出すことによって、そのロジックに委任される。</p>
  </div>

  <div id="example-CloseWatcher-cancel" class="example"><a href="#example-CloseWatcher-cancel" class="self-link"></a><p><code>CloseWatcher</code>オブジェクトの<code id="the-closewatcher-interface:event-cancel-5"><a href="indices.html#event-cancel">cancel</a></code>イベントを使用すると、<code id="the-closewatcher-interface:event-close-8"><a href="indices.html#event-close">close</a></code>イベントの発火および<code>CloseWatcher</code>の破棄を防ぐことができる。一般的な使用例を次に示す：</p>

   <pre><code class='js'>watcher<c- p>.</c->oncancel <c- o>=</c-> <c- k>async</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
  <c- k>if</c-> <c- p>(</c->hasUnsavedData <c- o>&amp;&amp;</c-> e<c- p>.</c->cancelable<c- p>)</c-> <c- p>{</c->
    e<c- p>.</c->preventDefault<c- p>();</c->

    <c- a>const</c-> userReallyWantsToClose <c- o>=</c-> <c- k>await</c-> askForConfirmation<c- p>(</c-><c- u>"Are you sure you want to close?"</c-><c- p>);</c->
    <c- k>if</c-> <c- p>(</c->userReallyWantsToClose<c- p>)</c-> <c- p>{</c->
      hasUnsavedData <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
      watcher<c- p>.</c->close<c- p>();</c->
    <c- p>}</c->
  <c- p>}</c->
<c- p>};</c-></code></pre>

   <p>不正使用防止のため、このイベントは、ページに<span>history-action activation</span>がある場合にのみ  <code id="the-closewatcher-interface:dom-event-cancelable"><a data-x-internal="dom-event-cancelable" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-cancelable">cancelable</a></code>になる。これは、指定された<a href="#close-request" id="the-closewatcher-interface:close-request-5">閉じる要求</a>の後に失われる。これにより、ユーザーによるアクティブ化が介在しない状態でユーザーが閉じる要求を2回続けて送信した場合、要求は確実に成功する。2回目の要求は、<code id="the-closewatcher-interface:event-cancel-6"><a href="indices.html#event-cancel">cancel</a></code>イベントハンドラーによる<code id="the-closewatcher-interface:dom-event-preventdefault-2"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code>の呼び出し試行を無視し、<code>CloseWatcher</code>の終了に進む。</p>
  </div>

  <p>上記の2つの例を組み合わせると、<code id="the-closewatcher-interface:dom-closewatcher-requestclose-2"><a href="#dom-closewatcher-requestclose">requestClose()</a></code>と <code id="the-closewatcher-interface:dom-closewatcher-close"><a href="#dom-closewatcher-close">close()</a></code>の違いがわかる。閉じるボタンの<code id="the-closewatcher-interface:event-click-2"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code>イベントハンドラーで<code id="the-closewatcher-interface:dom-closewatcher-requestclose-3"><a href="#dom-closewatcher-requestclose">requestClose()</a></code>を使用したので、そのボタンをクリックすると<code>CloseWatcher</code>の<code id="the-closewatcher-interface:event-cancel-7"><a href="indices.html#event-cancel">cancel</a></code>イベントがトリガーされ、保存されていないデータがある場合はユーザーに確認を求める可能性がある。<code id="the-closewatcher-interface:dom-closewatcher-close-2"><a href="#dom-closewatcher-close">close()</a></code>を使用した場合、このチェックはスキップされる。これが適切な場合もあるが、通常は<code id="the-closewatcher-interface:dom-closewatcher-requestclose-4"><a href="#dom-closewatcher-requestclose">requestClose()</a></code>の方が、ユーザーがトリガーする閉じる要求に適している。</p>

  <div id="example-CloseWatcher-grouping" class="example"><a href="#example-CloseWatcher-grouping" class="self-link"></a><p><code id="the-closewatcher-interface:event-cancel-8"><a href="indices.html#event-cancel">cancel</a></code>イベントに対する<a href="#tracking-user-activation" id="the-closewatcher-interface:tracking-user-activation">user activation</a>制限に加えて、 <code>CloseWatcher</code>構成物のためのより巧妙な形式のユーザーアクティベーションゲーティングがある。ユーザーがアクティブ化せずに複数<code>CloseWatcher</code>を作成した場合、新しく作成されたものは、最後に作成されたもの <span>close watcher</span>と一緒にグループ化されるため、1つの<a href="#close-request" id="the-closewatcher-interface:close-request-6">閉じ要求</a>で両方が閉じられる：</p>

   <pre><code class='js'>window<c- p>.</c->onload <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// This will work as normal: it is the first close watcher created without user activation.</c->
  <c- p>(</c-><c- k>new</c-> CloseWatcher<c- p>()).</c->onclose <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> <c- d>/* ... */</c-> <c- p>};</c->
<c- p>};</c->

button1<c- p>.</c->onclick <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// This will work as normal: the button click counts as user activation.</c->
  <c- p>(</c-><c- k>new</c-> CloseWatcher<c- p>()).</c->onclose <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> <c- d>/* ... */</c-> <c- p>};</c->
<c- p>};</c->

button2<c- p>.</c->onclick <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c->
  <c- c1>// These will be grouped together, and both will close in response to a single close request.</c->
  <c- p>(</c-><c- k>new</c-> CloseWatcher<c- p>()).</c->onclose <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> <c- d>/* ... */</c-> <c- p>};</c->
  <c- p>(</c-><c- k>new</c-> CloseWatcher<c- p>()).</c->onclose <c- o>=</c-> <c- p>()</c-> <c- p>=></c-> <c- p>{</c-> <c- d>/* ... */</c-> <c- p>};</c->
<c- p>};</c-></code></pre>

   <p>つまり、  <code id="the-closewatcher-interface:dom-closewatcher-destroy-4"><a href="#dom-closewatcher-destroy">destroy()</a></code>、<code id="the-closewatcher-interface:dom-closewatcher-close-3"><a href="#dom-closewatcher-close">close()</a></code>または<code id="the-closewatcher-interface:dom-closewatcher-requestclose-5"><a href="#dom-closewatcher-requestclose">requestClose()</a></code>を適切に呼び出すことが重要である。そうすることが、グループ化されていない「フリー」のクローズウォッチャースロットを取り戻す唯一の方法である。ユーザーのアクティブ化なしに作成されたこのようなクローズウォッチャーは、セッションの非アクティブタイムアウトダイアログや、ユーザーのアクティブ化に応答して生成されないサーバートリガーイベントの緊急通知などの場合に役立つ。</p>
  </div>


  <nav><a href="microdata.html">← 5 Microdata</a> — <a href="./">目次</a> — <a href="dnd.html">6.11 ドラッグアンドドロップ →</a></nav>
