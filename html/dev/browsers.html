<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Edition for Web Developers日本語訳</title><meta content="#3c790a" name="theme-color"><meta content="light dark" name="color-scheme"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="./search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" class="darkmode-aware" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><p id="dev-edition-h2">Edition for Web Developers — Last Updated <span class="pubdate">15 January 2026</span></hgroup>
   

   <div id="search"><input placeholder="Search. Press &apos;/&apos;" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="popover.html">← 6.12 popover属性</a> — <a href="./">目次</a> — <a href="nav-history-apis.html">7.2 ナビゲーションおよびセッション履歴に関連するAPI →</a></nav><ol class="toc"><li><a href="browsers.html#browsers"><span class="secno">7</span> ウェブページの読み込み</a><ol><li><a href="browsers.html#loading-web-pages-supporting-concepts"><span class="secno">7.1</span> サポートコンセプト</a><ol><li><a href="browsers.html#origin"><span class="secno">7.1.1</span> 生成元</a><ol><li><a href="browsers.html#sites"><span class="secno">7.1.1.1</span> サイト</a><li><a href="browsers.html#relaxing-the-same-origin-restriction"><span class="secno">7.1.1.2</span> 同一生成元制限を緩和する</a><li><a href="browsers.html#the-origin-interface"><span class="secno">7.1.1.3</span> The <code>Origin</code> interface</a></ol><li><a href="browsers.html#origin-keyed-agent-clusters"><span class="secno">7.1.2</span> オリジンキーエージェントクラスター</a><li><a href="browsers.html#cross-origin-opener-policies"><span class="secno">7.1.3</span> 生成元をまたいだオープナーポリシー</a><ol><li><a href="browsers.html#the-coop-headers"><span class="secno">7.1.3.1</span> ヘッダー</a></ol><li><a href="browsers.html#coep"><span class="secno">7.1.4</span> 生成元をまたいだ埋め込みポリシー</a><ol><li><a href="browsers.html#the-coep-headers"><span class="secno">7.1.4.1</span> ヘッダー</a></ol><li><a href="browsers.html#sandboxing"><span class="secno">7.1.5</span> サンドボックス</a></ol></ol></ol><h2 id="browsers"><span class="secno">7</span> ウェブページの読み込み<a href="#browsers" class="self-link"></a></h2>

  

  <h3 id="loading-web-pages-supporting-concepts"><span class="secno">7.1</span> サポートコンセプト<a href="#loading-web-pages-supporting-concepts" class="self-link"></a></h3>

  <h4 id="origin"><span class="secno">7.1.1</span> 生成元<a href="#origin" class="self-link"></a></h4>
  

  <p>生成元は、ウェブのセキュリティモデルの基本的な通貨である。生成元を共有するウェブプラットフォーム内の2つの当事者が互いに信頼し、同一の権限を有すると仮定される。異なる生成元をもつ当事者は、互いに潜在的に悪意があると見なされ、互いから程度を変化させるよう隔離される。</p>

  <p class="example">たとえば、<code>bank.example.com</code>でホストされるExample Bankのウェブサイトは、<code>charity.example.org</code>でホストExample CharityのウェブサイトのDOMを検査しようとすると、<a id="origin:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="origin:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> が発生する。</p>

  <hr>

  <p id="origin-2"><dfn id="concept-origin" data-export="">生成元</dfn>は次のいずれかである：</p>

  <dl><dt><dfn id="concept-origin-opaque" data-export="">不透明な生成元</dfn><dd><p>内部値であり、シリアライズされていないために再作成することができない（<span>生成元のシリアライズ</span>ごとに"<code>null</code>"としてシリアライズされる）。意味のある操作は、透過性のテストのみである。<dt><dfn id="concept-origin-tuple" data-export="">タプルの生成元</dfn><dd><p>A <a id="origin:tuple" href="https://triple-underscore.github.io/infra-ja.html#tuple" data-x-internal="tuple">tuple</a> consisting of:<ul class="brief"><li><dfn data-dfn-for="origin" id="concept-origin-scheme" data-export="">スキーム</dfn>（<a id="origin:ascii-string" href="https://triple-underscore.github.io/infra-ja.html#ascii-string" data-x-internal="ascii-string">ASCII文字列</a>）。<li><dfn data-dfn-for="origin" id="concept-origin-host" data-export="">ホスト</dfn>（<a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="origin:concept-host" data-x-internal="concept-host">ホスト</a>）。<li><dfn data-dfn-for="origin" id="concept-origin-port" data-export="">ポート</dfn>（nullまたは16-bit符号なし整数）。<li><dfn data-dfn-for="origin" id="concept-origin-domain" data-export="">ドメイン</dfn>（nullまたは<a href="https://triple-underscore.github.io/URL-ja.html#concept-domain" id="origin:concept-domain" data-x-internal="concept-domain">ドメイン</a>）。特に明記されていない限り、null。</ul>
   </dl>

  <p class="note"><a href="#concept-origin" id="origin:concept-origin">生成元</a>は、たとえば複数の<code>Document</code>オブジェクト間で共有できる。さらに、<a href="#concept-origin" id="origin:concept-origin-2">生成元</a>は一般に不変である。<a href="#concept-origin-tuple" id="origin:concept-origin-tuple">タプルの生成元</a>の<a href="#concept-origin-domain" id="origin:concept-origin-domain">ドメイン</a>のみ、および<code id="origin:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code> APIを介してのみ変更できる。</p>

  

  <p class="example">("<code>https</code>", "<code>xn--maraa-rta.example</code>", null, null)の <span>シリアライゼーション</span>は"<code>https://xn--maraa-rta.example</code>"となる。</p>

  

  <div class="example"><p>次の表は、2つの<a href="#concept-origin-tuple" id="origin:concept-origin-tuple-2">タプル生成元</a>が<span id="same-origin">同一生成元</span>および<span id="same-origin-domain">同一生成元ドメイン</span>である場合の例を示す。</p>

   <table><tr><th><var>A</var><th><var>B</var><th><a href="#same-origin" id="origin:same-origin">same origin</a><th><a href="#same-origin-domain" id="origin:same-origin-domain">same origin-domain</a><tr><td>("<code>https</code>", "<code>example.org</code>", null, null)<td>("<code>https</code>", "<code>example.org</code>", null, null)<td>✅<td>✅<tr><td>("<code>https</code>", "<code>example.org</code>", 314, null)<td>("<code>https</code>", "<code>example.org</code>", 420, null)<td>❌<td>❌<tr><td>("<code>https</code>", "<code>example.org</code>", 314, "<code>example.org</code>")<td>("<code>https</code>", "<code>example.org</code>", 420, "<code>example.org</code>")<td>❌<td>✅<tr><td>("<code>https</code>", "<code>example.org</code>", null, null)<td>("<code>https</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>✅<td>❌<tr><td>("<code>https</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>("<code>http</code>", "<code>example.org</code>", null, "<code>example.org</code>")<td>❌<td>❌</table>
  </div>


  <h5 id="sites"><span class="secno">7.1.1.1</span> サイト<a href="#sites" class="self-link"></a></h5>

  <p><dfn id="scheme-and-host">スキームとホスト</dfn>は、<dfn id="concept-scheme-and-host-scheme">スキーム</dfn>（<a id="sites:ascii-string" href="https://triple-underscore.github.io/infra-ja.html#ascii-string" data-x-internal="ascii-string">ASCII文字列</a>）および<dfn id="concept-scheme-and-host-host">ホスト</dfn>（<a href="https://triple-underscore.github.io/URL-ja.html#concept-host" id="sites:concept-host" data-x-internal="concept-host">ホスト</a>）の<a id="sites:tuple" href="https://triple-underscore.github.io/infra-ja.html#tuple" data-x-internal="tuple">タプル</a>である。</p>

  <p><dfn id="site" data-export="">サイト</dfn>は<a href="#concept-origin-opaque" id="sites:concept-origin-opaque">不透明な生成元</a>または<a href="#scheme-and-host" id="sites:scheme-and-host">scheme-and-host</a>である。</p>

  

  <p class="note"><a href="#same-origin" id="sites:same-origin">同一生成元</a>および<a href="#same-origin-domain" id="sites:same-origin-domain">同一origin-domain</a>の概念とは異なり、<a href="#schemelessly-same-site" id="sites:schemelessly-same-site">スキームレスで同じサイト</a>および<a href="#same-site" id="sites:same-site">同じサイト</a>の場合、<a href="#concept-origin-port" id="sites:concept-origin-port">ポート</a>および<a href="#concept-origin-domain" id="sites:concept-origin-domain">ドメイン</a>コンポーネントは無視される。</p>

  <p class="warning"><a href="https://triple-underscore.github.io/URL-ja.html#warning-avoid-psl"><cite>URL</cite>で説明される</a>理由により、<a href="#same-origin" id="sites:same-origin-2">同一生成元</a>チェックを優先して、可能な場合は<a href="#same-site" id="sites:same-site-2">同じサイト</a>および<a href="#schemelessly-same-site" id="sites:schemelessly-same-site-2">スキームレスで同じサイト</a>の概念を回避すべきである。</p>

  <div id="example-same-site" class="example"><a href="#example-same-site" class="self-link"></a><p>次の表は、2つの<a href="#concept-origin-tuple" id="sites:concept-origin-tuple">タプル生成元</a>が<span id="schemelessly-same-site">スキームレス同一サイト</span>および<span id="same-site">同一サイト</span>である場合の例を示す。</p>

  <p><code>wildlife.museum</code>、<code>museum</code>、および<code>com</code>は<a href="https://triple-underscore.github.io/URL-ja.html#host-public-suffix" id="sites:public-suffix" data-x-internal="public-suffix">公開サフィックス</a>であり、<code>example.com</code>はそうではない：</p>

   <table><tr><th><var>A</var><th><var>B</var><th><a href="#schemelessly-same-site" id="sites:schemelessly-same-site-3">schemelessly same site</a><th><a href="#same-site" id="sites:same-site-3">same site</a><tr><td>("<code>https</code>", "<code>example.com</code>")<td>("<code>https</code>", "<code>sub.example.com</code>")<td>✅<td>✅<tr><td>("<code>https</code>", "<code>example.com</code>")<td>("<code>https</code>", "<code>sub.other.example.com</code>")<td>✅<td>✅<tr><td>("<code>https</code>", "<code>example.com</code>")<td>("<code>http</code>", "<code>non-secure.example.com</code>")<td>✅<td>❌<tr><td>("<code>https</code>", "<code>r.wildlife.museum</code>")<td>("<code>https</code>", "<code>sub.r.wildlife.museum</code>")<td>✅<td>✅<tr><td>("<code>https</code>", "<code>r.wildlife.museum</code>")<td>("<code>https</code>", "<code>sub.other.r.wildlife.museum</code>")<td>✅<td>✅<tr><td>("<code>https</code>", "<code>r.wildlife.museum</code>")<td>("<code>https</code>", "<code>other.wildlife.museum</code>")<td>❌<td>❌<tr><td>("<code>https</code>", "<code>r.wildlife.museum</code>")<td>("<code>https</code>", "<code>wildlife.museum</code>")<td>❌<td>❌<tr><td>("<code>https</code>", "<code>wildlife.museum</code>")<td>("<code>https</code>", "<code>wildlife.museum</code>")<td>✅<td>✅<tr><td>("<code>https</code>", "<code>example.com</code>")<td>("<code>https</code>", "<code>example.com.</code>")<td>❌<td>❌</table>

   <p>（ここでは<a href="#concept-origin-port" id="sites:concept-origin-port-2">ポート</a>および<a href="#concept-origin-domain" id="sites:concept-origin-domain-2">ドメイン</a>のコンポーネントは考慮されていないため、省略している。）</p>
  </div>


  <h5 id="relaxing-the-same-origin-restriction"><span class="secno">7.1.1.2</span> 同一生成元制限を緩和する<a href="#relaxing-the-same-origin-restriction" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>document</var>.<span id="dom-document-domain">domain</span> [ = <var>domain</var> ]</code><dd><p>セキュリティチェックのために使用される現在のドメインを返す。</p>

    <p>サブドメインを削除する値に設定し、<a href="#concept-origin" id="relaxing-the-same-origin-restriction:concept-origin">生成元</a>の<a href="#concept-origin-domain" id="relaxing-the-same-origin-restriction:concept-origin-domain">ドメイン</a>を変更し、同じドメインの他のサブドメイン（同じことを行う場合）のページが互いにアクセスできるようにすることができる。これにより、ドメインの異なるホスト上のページが、互いのDOMに同期的にアクセスできるようになる。</p>

    <p>サンドボックス化された<code id="relaxing-the-same-origin-restriction:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>、<a href="#concept-origin-opaque" id="relaxing-the-same-origin-restriction:concept-origin-opaque">不透明な生成元</a>をもつ<code>Document</code>、および<a href="document-sequences.html#concept-document-bc" id="relaxing-the-same-origin-restriction:concept-document-bc">ブラウジングコンテキスト</a>のない<code>Document</code>において、セッターは<a id="relaxing-the-same-origin-restriction:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a>例外を投げる。<code id="relaxing-the-same-origin-restriction:dom-crossoriginisolated"><a href="webappapis.html#dom-crossoriginisolated">crossOriginIsolated</a></code>または<code id="relaxing-the-same-origin-restriction:dom-originagentcluster"><a href="#dom-originagentcluster">originAgentCluster</a></code>がtrueを返す場合、セッターは何もしない。</p>
   </dl>

  <div class="critical"><p><code id="relaxing-the-same-origin-restriction:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code>セッターの使用を避ける。これは、同一生成元ポリシーが提供するセキュリティ保護を損なうものである。これは共有ホスティングを使用している場合に特に顕著である。たとえば、信頼できないサードパーティが同じIPアドレスだが異なるポートで HTTP サーバーをホストできる場合、<code id="relaxing-the-same-origin-restriction:dom-document-domain-2"><a href="#dom-document-domain">document.domain</a></code>セッターを使用した後に生成元を比較するときにポートが無視されるため、通常は同じホスト上の2つの異なるサイトを保護する同一生成元の保護が失敗する。</p>

   <p>これらのセキュリティ上の落とし穴があるため、この機能はウェブプラットフォームから削除されるプロセスにある。（これは何年もかかる長いプロセスである。）</p>

   <p>代わりに、安全な方法で生成元間で通信するために、<code>postMessage()</code> または<code>MessageChannel</code>オブジェクトを使用する。</p>
  </div>

  

  <h5 id="the-origin-interface"><span class="secno">7.1.1.3</span> The <code>Origin</code> interface<a href="#the-origin-interface" class="self-link"></a></h5>

  <p>The <code>Origin</code> interface represents an <a href="#concept-origin" id="the-origin-interface:concept-origin">origin</a>, allowing robust <a href="#same-origin" id="the-origin-interface:same-origin">same origin</a> and <a href="#same-site" id="the-origin-interface:same-site">same site</a> comparisons.</p>

  

  <p><code>Origin</code> objects have an associated <dfn data-dfn-for="Origin" id="concept-origin-origin">origin</dfn>, which holds an <a href="#concept-origin" id="the-origin-interface:concept-origin-2">origin</a>.</p>

  <p><a href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-platform-object" id="the-origin-interface:platform-object" data-x-internal="platform-object">Platform objects</a> have an <dfn data-dfn-for="platform object" id="extract-an-origin" data-export="">extract an origin</dfn> operation, which returns null unless otherwise specified.</p>

  <div data-algorithm=""><p>Objects implementing the <code>Origin</code> interface's <a href="#extract-an-origin" id="the-origin-interface:extract-an-origin">extract an origin</a> steps are to return <a id="the-origin-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin">origin</a>.</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="Origin" id="dom-origin-constructor" data-dfn-type="constructor"><code>new Origin()</code></dfn> constructor steps are to set <a id="the-origin-interface:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-2">origin</a> to a unique <a href="#concept-origin-opaque" id="the-origin-interface:concept-origin-opaque">opaque origin</a>.</p>
  </div>

  <div data-algorithm=""><p>The static <dfn data-dfn-for="Origin" id="dom-origin-from" data-dfn-type="method"><code>from(<var>value</var>)</code></dfn> method steps are:</p>

  <ol><li><p>If <var>value</var> is a <a id="the-origin-interface:platform-object-2" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-platform-object" data-x-internal="platform-object">platform object</a>:</p>
    <ol><li><p>Let <var>origin</var> be the result of executing <var>value</var>'s <a href="#extract-an-origin" id="the-origin-interface:extract-an-origin-2">extract an origin</a> operation.<li><p>If <var>origin</var> is not null, then return a new <code>Origin</code> object whose <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-3">origin</a> is <var>origin</var>.</ol>
   <li><p>If <var>value</var> is a <a id="the-origin-interface:string" href="https://triple-underscore.github.io/infra-ja.html#string" data-x-internal="string">string</a>:</p>
    <ol><li><p>Let <var>parsedURL</var> be the result of <a href="https://triple-underscore.github.io/URL-ja.html#concept-basic-url-parser" id="the-origin-interface:basic-url-parser" data-x-internal="basic-url-parser">basic URL parsing</a> <var>value</var>.<li><p>If <var>parsedURL</var> is not failure, then return a new <code>Origin</code> object whose <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-4">origin</a> is set to <var>parsedURL</var>'s <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-origin" id="the-origin-interface:concept-url-origin" data-x-internal="concept-url-origin">origin</a>.</ol>
   <li><p>Throw a <code id="the-origin-interface:typeerror"><a data-x-internal="typeerror" href="https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code>.</ol>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="Origin" id="dom-origin-opaque" data-dfn-type="attribute"><code>opaque</code></dfn> getter steps are to return true if <a id="the-origin-interface:this-3" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-5">origin</a> is an <a href="#concept-origin-opaque" id="the-origin-interface:concept-origin-opaque-2">opaque origin</a>; otherwise false.</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="Origin" id="dom-origin-issameorigin" data-dfn-type="method"><code>isSameOrigin(<var>other</var>)</code></dfn> method steps are to return true if <a id="the-origin-interface:this-4" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-6">origin</a> is <a href="#same-origin" id="the-origin-interface:same-origin-2">same origin</a> with <var>other</var>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-7">origin</a>; otherwise false.</p>
  </div>

  <div data-algorithm=""><p>The <dfn data-dfn-for="Origin" id="dom-origin-issamesite" data-dfn-type="method"><code>isSameSite(<var>other</var>)</code></dfn> method steps are to return true if <a id="the-origin-interface:this-5" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-8">origin</a> is <a href="#same-site" id="the-origin-interface:same-site-2">same site</a> with <var>other</var>'s <a href="#concept-origin-origin" id="the-origin-interface:concept-origin-origin-9">origin</a>; otherwise false.</p>
  </div>


  <h4 id="origin-keyed-agent-clusters"><span class="secno">7.1.2</span> <span id="origin-isolation"></span>オリジンキーエージェントクラスター<a href="#origin-keyed-agent-clusters" class="self-link"></a></h4>

  <dl class="domintro"><dt><code>window.<span id="dom-originagentcluster">originAgentCluster</span></code><dd><p>このセクションで説明されている方法で、この<code>Window</code>が<a href="#concept-origin" id="origin-keyed-agent-clusters:concept-origin">オリジン</a><span>キー</span>の<a id="origin-keyed-agent-clusters:agent-cluster" href="https://tc39.es/ecma262/#sec-agent-clusters" data-x-internal="agent-cluster">エージェントクラスター</a>に属す場合はtrueを返す。</p>
   </dl>

  <p><span>セキュアなコンテキスト</span>で配信された<code>Document</code>は、`<dfn id="origin-agent-cluster" data-dfn-type="http-header"><code>Origin-Agent-Cluster</code></dfn>` HTTPレスポンスヘッダーを使用して、<a href="#concept-origin" id="origin-keyed-agent-clusters:concept-origin-2">オリジン</a><span>キー</span>の<a id="origin-keyed-agent-clusters:agent-cluster-2" href="https://tc39.es/ecma262/#sec-agent-clusters" data-x-internal="agent-cluster">エージェントクラスター</a>に配置するように要求することができる。このヘッダーは<a href="https://httpwg.org/specs/rfc8941.html" id="origin-keyed-agent-clusters:http-structured-header" data-x-internal="http-structured-header">構造化されたヘッダー</a>であり、その値は<a href="https://httpwg.org/specs/rfc8941.html#boolean" id="origin-keyed-agent-clusters:http-structured-header-boolean" data-x-internal="http-structured-header-boolean">真偽値</a>でなければらない。<a href="references.html#refsSTRUCTURED-FIELDS">[STRUCTURED-FIELDS]</a></p>

  <p><a href="https://httpwg.org/specs/rfc8941.html#boolean" id="origin-keyed-agent-clusters:http-structured-header-boolean-2" data-x-internal="http-structured-header-boolean">構造化されたヘッダー</a>のtrueの値（すなわち、`<code>?1</code>`）ではない<span>値</span>は無視される。</p>

  <p>このヘッダーを使用した結果は、<code id="origin-keyed-agent-clusters:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code>を使用して<a href="#relaxing-the-same-origin-restriction">同一生成元の制限を緩和</a>しようとしても何も実行されない代わりに、<code id="origin-keyed-agent-clusters:webassembly.module"><a data-x-internal="webassembly.module" href="https://webassembly.github.io/spec/js-api/#module">WebAssembly.Module</a></code>オブジェクトを生成元をまたいだ<code>Document</code>に送信することができなくなることである（たとえ<a href="#same-site" id="origin-keyed-agent-clusters:same-site">同じサイト</a>であっても）。水面下で、この分離により、ユーザーエージェントは、プロセスやスレッドなどの<a href="https://tc39.es/ecma262/#sec-agent-clusters" id="origin-keyed-agent-clusters:agent-cluster-3" data-x-internal="agent-cluster">エージェントクラスター</a>に対応する実装固有のリソースをより効率的に割り当てることが可能になる。</p>

  <p><a id="origin-keyed-agent-clusters:browsing-context-group" href="document-sequences.html#browsing-context-group">ブラウジングコンテキストグループ</a>内では、`<code id="origin-keyed-agent-clusters:origin-agent-cluster"><a href="#origin-agent-cluster">Origin-Agent-Cluster</a></code>`ヘッダーは、たとえ一方がヘッダーを送信し、他方が送信しない場合でも、同一生成元の<code>Document</code>オブジェクトが異なる<a href="https://tc39.es/ecma262/#sec-agent-clusters" id="origin-keyed-agent-clusters:agent-cluster-4" data-x-internal="agent-cluster">エージェントクラスター</a>で終わる原因にはならないことに注意する。</p>

  <p class="note">つまり、<code id="origin-keyed-agent-clusters:dom-originagentcluster"><a href="#dom-originagentcluster">originAgentCluster</a></code>ゲッターは、同じ<a id="origin-keyed-agent-clusters:browsing-context-group-2" href="document-sequences.html#browsing-context-group">ブラウジングコンテキストグループ</a>内の以前にロードされた同一生成元のページでヘッダーが省略されていた場合、たとえヘッダーが設定されていても、falseを返すことができるということである。同様に、ヘッダーが設定されていなくてもtrueを返すことができる。</p>

  <div data-algorithm=""></div>

  <p class="note"><a href="#concept-origin-opaque" id="origin-keyed-agent-clusters:concept-origin-opaque">不透明な生成元</a>をもつ<code>Document</code>は、無条件に生成元が分離されているとみなすことができる。その場合、ヘッダーは効果がなく、かつ<code id="origin-keyed-agent-clusters:dom-originagentcluster-2"><a href="#dom-originagentcluster">originAgentCluster</a></code>ゲッターは常にtrueを返すだろう。</p>

  <p class="note">同様に、<a id="origin-keyed-agent-clusters:agent-cluster-5" href="https://tc39.es/ecma262/#sec-agent-clusters" data-x-internal="agent-cluster">エージェントクラスター</a>の<span>クロスオリジン分離モード</span>が"<code id="origin-keyed-agent-clusters:cross-origin-isolation-none"><a href="document-sequences.html#cross-origin-isolation-none">none</a></code>"ではない<code>Document</code>は、自動的にオリジンキーが設定される。生成元をまたいだ分離を達成するために使用される`<code id="origin-keyed-agent-clusters:cross-origin-opener-policy-2"><a href="#cross-origin-opener-policy-2">Cross-Origin-Opener-Policy</a></code>`および`<code id="origin-keyed-agent-clusters:cross-origin-embedder-policy"><a href="#cross-origin-embedder-policy">Cross-Origin-Embedder-Policy</a></code>`ヘッダーは、同じアドレス空間内のすべてのものがそこに存在することを保証することを目的としているため、`<code id="origin-keyed-agent-clusters:origin-agent-cluster-2"><a href="#origin-agent-cluster">Origin-Agent-Cluster</a></code>`ヘッダーは、リソースの割り当てに関する実装への追加のヒントとして有用であるかもしれない。しかし、それを追加しても、著者のコードに追加の目に見える影響はない。</p>


  <h4 id="cross-origin-opener-policies"><span class="secno">7.1.3</span> 生成元をまたいだオープナーポリシー<a href="#cross-origin-opener-policies" class="self-link"></a></h4>

  <p><dfn id="cross-origin-opener-policy-value">オープナーポリシー値</dfn>は、<a id="cross-origin-opener-policies:top-level-browsing-context" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>にナビゲートされたドキュメントに対し、新しい<a id="cross-origin-opener-policies:top-level-browsing-context-2" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>および、それに対応する<a href="document-sequences.html#tlbc-group" id="cross-origin-opener-policies:tlbc-group">グループ</a>の作成を強制できる。可能な値は次のとおり：</p>

  <dl><dt>"<dfn id="coop-unsafe-none"><code>unsafe-none</code></dfn>"<dd><p>これは（現在の）デフォルトであり、文書が別の<span>オープナーポリシー</span>を指定しない限り、文書がその前の文書と同じ<a id="cross-origin-opener-policies:top-level-browsing-context-3" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>を占有することを意味する。<dt>"<dfn id="coop-same-origin-allow-popups"><code>same-origin-allow-popups</code></dfn>"<dd><p>これは、前の文書が同じ<span>オープナーポリシー</span>を指定しており、それらが<a href="#same-origin" id="cross-origin-opener-policies:same-origin">同一生成元</a>でない限り、文書の新しい<a id="cross-origin-opener-policies:top-level-browsing-context-4" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>を強制的に作成する。<dt>"<dfn id="coop-same-origin"><code>same-origin</code></dfn>"<dd><p>これは、"<code id="cross-origin-opener-policies:coop-same-origin-allow-popups"><a href="#coop-same-origin-allow-popups">same-origin-allow-popups</a></code>"と同じように動作するが、作成される<a id="cross-origin-opener-policies:auxiliary-browsing-context" href="document-sequences.html#auxiliary-browsing-context">補助ブラウジングコンテキスト</a>は、同じ<span>オープナーポリシー</span>を持つ<a href="#same-origin" id="cross-origin-opener-policies:same-origin-2">同一生成元</a>の文書を含める必要があることが追加される。さもなければ、オープナーに非公開で表示される。<dt>"<dfn id="coop-same-origin-plus-coep"><code>same-origin-plus-COEP</code></dfn>"<dd><p>これは"<code id="cross-origin-opener-policies:coop-same-origin"><a href="#coop-same-origin">same-origin</a></code>"と同じように動作するが、（新しい）<a id="cross-origin-opener-policies:top-level-browsing-context-5" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>の<a href="document-sequences.html#tlbc-group" id="cross-origin-opener-policies:tlbc-group-2">グループ</a>の<a href="document-sequences.html#bcg-cross-origin-isolation" id="cross-origin-opener-policies:bcg-cross-origin-isolation">生成元をまたいだ分離</a>を"<code id="cross-origin-opener-policies:cross-origin-isolation-logical"><a href="document-sequences.html#cross-origin-isolation-logical">logical</a></code>"または"<code id="cross-origin-opener-policies:cross-origin-isolation-concrete"><a href="document-sequences.html#cross-origin-isolation-concrete">concrete</a></code>"のいずれかに設定することが追加される。</p>

    <p class="note">"<code id="cross-origin-opener-policies:coop-same-origin-plus-coep"><a href="#coop-same-origin-plus-coep">same-origin-plus-COEP</a></code>"は`<code id="cross-origin-opener-policies:cross-origin-opener-policy-2"><a href="#cross-origin-opener-policy-2">Cross-Origin-Opener-Policy</a></code>`ヘッダーで直接設定することはできないが、`<code><a href="#cross-origin-opener-policy-2" id="cross-origin-opener-policies:cross-origin-opener-policy-2-2">Cross-Origin-Opener-Policy</a>: <a href="#coop-same-origin" id="cross-origin-opener-policies:coop-same-origin-2">same-origin</a></code>`と`<code id="cross-origin-opener-policies:cross-origin-embedder-policy"><a href="#cross-origin-embedder-policy">Cross-Origin-Embedder-Policy</a></code>` ヘッダー（値は<a href="#compatible-with-cross-origin-isolation" id="cross-origin-opener-policies:compatible-with-cross-origin-isolation">クロスオリジン分離と互換</a>）を一緒に設定した結果である。</p>
   <dt>"<dfn id="coop-noopener-allow-popups"><code>noopener-allow-popups</code></dfn>"<dd><p>これは、先行文書に関係なく、文書の新しい<a id="cross-origin-opener-policies:top-level-browsing-context-6" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>を強制的に作成する。</p>

    <div class="note"><p><code id="cross-origin-opener-policies:coop-noopener-allow-popups"><a href="#coop-noopener-allow-popups">noopener-allow-popups</a></code>値を含めると、それが適用される文書とそのオープナーとの間のオープナー関係が切断されるが、それらの同一生成元の文書の間に強固なセキュリティ境界を作成しない。</p>

     <p>同一生成元のアプリケーションによるその他のリスクには、次がある：</p>

     <ul><li><p>文書のコンテンツをフェッチする同一生成元リクエスト — Fetch Metadataフィルタリングによって緩和できる。<a href="references.html#refsFETCHMETADATA">[FETCHMETADATA]</a><li><p>同一生成元フレーミング - <code id="cross-origin-opener-policies:x-frame-options"><a href="speculative-loading.html#x-frame-options">X-Frame-Options</a></code>またはCSP <code id="cross-origin-opener-policies:frame-ancestors-directive"><a data-x-internal="frame-ancestors-directive" href="https://triple-underscore.github.io/CSP3-ja.html#frame-ancestors">frame-ancestors</a></code>によって緩和できる。<li><p>JavaScriptでアクセス可能なcookie - すべてのcookieが<code>httponly</code>であることを確認することで緩和できる。<li><p>機密データへの<code id="cross-origin-opener-policies:dom-localstorage"><a href="webstorage.html#dom-localstorage">localStorage</a></code>アクセス。<li><p>サービスワーカーのインストール。<li><p><a href="https://w3c.github.io/ServiceWorker/#cache">Cache API</a>の操作または機密データへのアクセス。<a href="references.html#refsSW">[SW]</a><li><p>機密情報を公開する<code>postMessage</code>または<code>BroadcastChannel</code>メッセージング。<li><p>同一生成元の文書に対してユーザーの操作を必要としない自動入力。</ul>

     <p><code id="cross-origin-opener-policies:coop-noopener-allow-popups-2"><a href="#coop-noopener-allow-popups">noopener-allow-popups</a></code>を使用する開発者は、機密性の高いアプリケーションが、<code id="cross-origin-opener-policies:dom-localstorage-2"><a href="webstorage.html#dom-localstorage">localStorage</a></code>、その他のクライアントサイドのストレージAPI、 <code>BroadcastChannel</code>、関連する同一生成元の通信メカニズムなど、他の同一生成元の文書にアクセスできるクライアントサイドの機能に依存しないようにする必要がある。また、サーバーサイドのエンドポイントが、応答コンテンツが同じオリジンのドキュメントに非ナビゲーションのリクエストに機密データを戻さないようにする必要もある。</p>
    </div>
   </dl>

  


  <h5 id="the-coop-headers"><span class="secno">7.1.3.1</span> ヘッダー<a href="#the-coop-headers" class="self-link"></a></h5><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy" title="The HTTP Cross-Origin-Opener-Policy (COOP) response header allows you to ensure a top-level document does not share a browsing context group with cross-origin documents.">Headers/Cross-Origin-Opener-Policy</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>79+</span></span><span class="safari yes"><span>Safari</span><span>15.2+</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span><hr><span class="opera no"><span>Opera</span><span>No</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Android</span><span>No</span></span></div></div></div>

  <p><code>Document</code>の<a href="dom.html#concept-document-coop" id="the-coop-headers:concept-document-coop">生成元をまたいだオープナーポリシー</a>は `<dfn id="cross-origin-opener-policy-2" data-dfn-type="http-header"><code>Cross-Origin-Opener-Policy</code></dfn>`および`<dfn id="cross-origin-opener-policy-report-only" data-dfn-type="http-header"><code>Cross-Origin-Opener-Policy-Report-Only</code></dfn>` HTTPレスポンスヘッダーから派生する。このヘッダーは<a href="https://httpwg.org/specs/rfc8941.html" id="the-coop-headers:http-structured-header" data-x-internal="http-structured-header">構造化されたヘッダー</a>であり、その値は<a href="https://httpwg.org/specs/rfc8941.html#token" id="the-coop-headers:http-structured-header-token" data-x-internal="http-structured-header-token">トークン</a>でなければならない。<a href="references.html#refsSTRUCTURED-FIELDS">[STRUCTURED-FIELDS]</a></p>

  <p>妥当な<a href="https://httpwg.org/specs/rfc8941.html#token" id="the-coop-headers:http-structured-header-token-2" data-x-internal="http-structured-header-token">トークン</a>の値は、<a href="#cross-origin-opener-policy-value" id="the-coop-headers:cross-origin-opener-policy-value">オープナーポリシー値</a>である。トークンはまた、付属の<a href="https://httpwg.org/specs/rfc8941.html#param" id="the-coop-headers:http-structured-header-parameters" data-x-internal="http-structured-header-parameters">パラメーター</a>を持ってもよい。これらのうち、"<dfn id="coop-report-to"><code>report-to</code></dfn>"パラメーターは、適切な報告エンドポイントを識別する<a id="the-coop-headers:valid-url-string" href="https://triple-underscore.github.io/URL-ja.html#valid-url-string" data-x-internal="valid-url-string">妥当なURL文字列</a>を持つことができる。<a href="references.html#refsREPORTING">[REPORTING]</a></p>

  <p class="note"><span>ユーザー</span>エージェントは、このヘッダーに不正値が含まれている場合、そのヘッダーを無視する。同様に、値が<a href="https://httpwg.org/specs/rfc8941.html#token" id="the-coop-headers:http-structured-header-token-3" data-x-internal="http-structured-header-token">トークン</a>として解析できない場合、ユーザーエージェントはこのヘッダーを無視する。</p>

  


  <h4 id="coep"><span class="secno">7.1.4</span> 生成元をまたいだ埋め込みポリシー<a href="#coep" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Embedder-Policy" title="The HTTP Cross-Origin-Embedder-Policy (COEP) response header configures embedding cross-origin resources into the document.">Headers/Cross-Origin-Embedder-Policy</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>79+</span></span><span class="safari yes"><span>Safari</span><span>15.2+</span></span><span class="chrome yes"><span>Chrome</span><span>83+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>83+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>86+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p><dfn id="embedder-policy-value" data-export="">埋め込みポリシー値</dfn>は、リソース所有者からの明示的な許可なしに、生成元をまたいだリソースのフェッチを制御する3つの文字列の1つである。</p>

  <dl><dt>"<dfn data-dfn-for="embedder policy value" id="coep-unsafe-none" data-export=""><code>unsafe-none</code></dfn>"<dd><p>これはデフォルトの値である。この値を使用するとき、<a id="coep:cors-protocol" href="https://triple-underscore.github.io/Fetch-ja.html#http-cors-protocol" data-x-internal="cors-protocol">CORSプロトコル</a>または`<code id="coep:cross-origin-resource-policy"><a data-x-internal="cross-origin-resource-policy" href="https://triple-underscore.github.io/Fetch-ja.html#http-cross-origin-resource-policy">Cross-Origin-Resource-Policy</a></code>`ヘッダーを通して明示的な許可を与えることなしに生成元をまたいだリソースをフェッチすることができる。<dt>"<dfn data-dfn-for="embedder policy value" id="coep-require-corp" data-export=""><code>require-corp</code></dfn>"<dd><p>この値を使用するとき、生成元をまたいだリソースをフェッチするには、<a id="coep:cors-protocol-2" href="https://triple-underscore.github.io/Fetch-ja.html#http-cors-protocol" data-x-internal="cors-protocol">CORSプロトコル</a>または`<code id="coep:cross-origin-resource-policy-2"><a data-x-internal="cross-origin-resource-policy" href="https://triple-underscore.github.io/Fetch-ja.html#http-cross-origin-resource-policy">Cross-Origin-Resource-Policy</a></code>`ヘッダーを通してサーバーの明示的な許可が必要となる。<dt>"<dfn data-dfn-for="embedder policy value" id="coep-credentialless" data-export=""><code>credentialless</code></dfn>"<dd><p>この値を使用する場合、生成元をまたいだno-CORSリソースをフェッチすると、クレデンシャルが省略される。代わりに、明示的な`<code id="coep:cross-origin-resource-policy-3"><a data-x-internal="cross-origin-resource-policy" href="https://triple-underscore.github.io/Fetch-ja.html#http-cross-origin-resource-policy">Cross-Origin-Resource-Policy</a></code>`ヘッダーは必要ない。クレデンシャルを使用して送信されるその他のリクエストには、<a id="coep:cors-protocol-3" href="https://triple-underscore.github.io/Fetch-ja.html#http-cors-protocol" data-x-internal="cors-protocol">CORSプロトコル</a>または `<code id="coep:cross-origin-resource-policy-4"><a data-x-internal="cross-origin-resource-policy" href="https://triple-underscore.github.io/Fetch-ja.html#http-cross-origin-resource-policy">Cross-Origin-Resource-Policy</a></code>`ヘッダーを介したサーバーの明示的な権限が必要である。</dl>

  <div class="warning"><p>"<code id="coep:coep-credentialless"><a href="#coep-credentialless">credentialless</a></code>"をサポートする前に、実装者は次の両方をサポートすることを強く勧める：<ul class="brief"><li><a href="https://wicg.github.io/private-network-access" />プライベートネットワークアクセス</a><li><a href="https://github.com/annevk/orb">不透明なレスポンスのブロックキング</a></ul>

   <p>そうでなければ、攻撃者は、<span>生成元をまたいだ分離機能</span>を使用して、クライアントのネットワーク位置を利用して非公開リソースを読み取ることを可能にする。</p>
  </div>

  <div data-algorithm=""><p><a href="#embedder-policy-value" id="coep:embedder-policy-value">エンベッダーポリシー値</a>は、"<code id="coep:coep-credentialless-2"><a href="#coep-credentialless">credentialless</a></code>"または"<code id="coep:coep-require-corp"><a href="#coep-require-corp">require-corp</a></code>"である場合、<dfn id="compatible-with-cross-origin-isolation">生成元をまたいだ分離</dfn>と互換性がある。</p>
  </div>

  


  <h5 id="the-coep-headers"><span class="secno">7.1.4.1</span> ヘッダー<a href="#the-coep-headers" class="self-link"></a></h5>

  <p>`<dfn id="cross-origin-embedder-policy" data-dfn-type="http-header"><code>Cross-Origin-Embedder-Policy</code></dfn>`および`<dfn id="cross-origin-embedder-policy-report-only" data-dfn-type="http-header"><code>Cross-Origin-Embedder-Policy-Report-Only</code></dfn>` HTTPレスポンスヘッダーフィールドは、サーバーが<span>環境設定オブジェクト</span>の<span>埋め込みポリシー</span>を宣言することを可能にする。このヘッダーは<a href="https://httpwg.org/specs/rfc8941.html" id="the-coep-headers:http-structured-header" data-x-internal="http-structured-header">構造化されたヘッダー</a>であり、その値は<a href="https://httpwg.org/specs/rfc8941.html#token" id="the-coep-headers:http-structured-header-token" data-x-internal="http-structured-header-token">トークン</a>でなければならない。<a href="references.html#refsSTRUCTURED-FIELDS">[STRUCTURED-FIELDS]</a><p>妥当な<a href="https://httpwg.org/specs/rfc8941.html#token" id="the-coep-headers:http-structured-header-token-2" data-x-internal="http-structured-header-token">トークン</a>の値は、<a href="#embedder-policy-value" id="the-coep-headers:embedder-policy-value">埋め込みポリシー値</a>である。トークンはまた、付属の<a href="https://httpwg.org/specs/rfc8941.html#param" id="the-coep-headers:http-structured-header-parameters" data-x-internal="http-structured-header-parameters">パラメーター</a>を持ってもよい。これらのうち、"<dfn id="coep-report-to"><code>report-to</code></dfn>"パラメーターは、適切な報告エンドポイントを識別する<a id="the-coep-headers:valid-url-string" href="https://triple-underscore.github.io/URL-ja.html#valid-url-string" data-x-internal="valid-url-string">妥当なURL文字列</a>を持つことができる。<a href="references.html#refsREPORTING">[REPORTING]</a></p>

  <div class="note"><p><span>処理モデル</span>は、トークンとして解析できないヘッダーの存在下ではオープンに失敗する（デフォルトで"<code id="the-coep-headers:coep-unsafe-none"><a href="#coep-unsafe-none">unsafe-none</a></code>"）。これには、与えられた応答に存在する`<code id="the-coep-headers:cross-origin-embedder-policy"><a href="#cross-origin-embedder-policy">Cross-Origin-Embedder-Policy</a></code>`ヘッダーの複数のインスタンスを組み合わせて作成された不注意なリストが含まれる。</p>

   <table class="data"><thead><tr><th>`<code id="the-coep-headers:cross-origin-embedder-policy-2"><a href="#cross-origin-embedder-policy">Cross-Origin-Embedder-Policy</a></code>`<th>最終<a href="#embedder-policy-value" id="the-coep-headers:embedder-policy-value-2">埋め込みポリシー値</a><tbody><tr><td><em>No header delivered</em><td>"<code id="the-coep-headers:coep-unsafe-none-2"><a href="#coep-unsafe-none">unsafe-none</a></code>"<tr><td>`<code>require-corp</code>`<td>"<code id="the-coep-headers:coep-require-corp"><a href="#coep-require-corp">require-corp</a></code>"<tr><td>`<code>unknown-value</code>`<td>"<code id="the-coep-headers:coep-unsafe-none-3"><a href="#coep-unsafe-none">unsafe-none</a></code>"<tr><td>`<code>require-corp, unknown-value</code>`<td>"<code id="the-coep-headers:coep-unsafe-none-4"><a href="#coep-unsafe-none">unsafe-none</a></code>"<tr><td>`<code>unknown-value, unknown-value</code>`<td>"<code id="the-coep-headers:coep-unsafe-none-5"><a href="#coep-unsafe-none">unsafe-none</a></code>"<tr><td>`<code>unknown-value, require-corp</code>`<td>"<code id="the-coep-headers:coep-unsafe-none-6"><a href="#coep-unsafe-none">unsafe-none</a></code>"<tr><td>`<code>require-corp, require-corp</code>`<td>"<code id="the-coep-headers:coep-unsafe-none-7"><a href="#coep-unsafe-none">unsafe-none</a></code>"</table>

   <p>（同じことが`<code id="the-coep-headers:cross-origin-embedder-policy-report-only"><a href="#cross-origin-embedder-policy-report-only">Cross-Origin-Embedder-Policy-Report-Only</a></code>`にも適用される。）</p>
  </div>

  


  <h4 id="sandboxing"><span class="secno">7.1.5</span> サンドボックス<a href="#sandboxing" class="self-link"></a></h4>

  <p><dfn id="sandboxing-flag-set" data-export="">サンドボックスフラグセット</dfn>は次のフラグの0個以上の集合であり、これは潜在的に信頼されないリソースが持つ能力を制限するために使用される：</p>

  <dl><dt><dfn id="sandboxed-navigation-browsing-context-flag" data-export="">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、コンテンツが、<a href="browsing-the-web.html#sandboxLinks">サンドボックス化されたブラウジングコンテキスト自体</a>（またはその中にさらにネストされたブラウジングコンテキスト）、<a href="document-sequences.html#auxiliary-browsing-context" id="sandboxing:auxiliary-browsing-context">補助ブラウジングコンテキスト</a>（次に定義される<a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a>によって保護されている）、および<a id="sandboxing:top-level-browsing-context" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>（<a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag">サンドボックス化されたユーザー起動ブラウジングコンテキストフラグなしのトップレベルナビゲーション</a>、および以下に定義される<a href="#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-with-user-activation-browsing-context-flag">サンドボックス化されたユーザー起動ブラウジングコンテキストフラグありトップレベルナビゲーション</a>によって保護されている）以外のブラウジングコンテキストをナビゲートすることを防止するものである。</p>

    <p><a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-2">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a>が設定されない場合、それにもかかわらず一定の場合における制限はポップアップ（新しい<a href="document-sequences.html#top-level-browsing-context" id="sandboxing:top-level-browsing-context-2">トップレベルブラウジングコンテキスト</a>）を開くことができる。これらの<a href="document-sequences.html#browsing-context" id="sandboxing:browsing-context">ブラウジングコンテキスト</a>は常に、<dfn id="one-permitted-sandboxed-navigator">1つの許可されたサンドボックス化されたナビゲーター</dfn>を持ち、実際に移動するために作成した<a id="sandboxing:browsing-context-2" href="document-sequences.html#browsing-context">ブラウジングコンテキスト</a>を許可する、ブラウジングコンテキストが作成されるときに設定を持つ。（そうでなければ、<a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a>は、それらが開かれた場合であってもナビゲートされていくのを防ぐだろう。）</p>
   <dt><dfn id="sandboxed-auxiliary-navigation-browsing-context-flag" data-export="">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="document-sequences.html#sandboxWindowOpen">コンテンツが新しい補助ブラウジングコンテキストを作成するのを防ぐ</a>。 たとえば、<code id="sandboxing:attr-hyperlink-target"><a href="links.html#attr-hyperlink-target">target</a></code>属性や<code id="sandboxing:dom-open"><a href="nav-history-apis.html#dom-open">window.open()</a></code>メソッドを使用する。</p>
   <dt><dfn id="sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" data-export="">ユーザーによるアクティブ化なしでサンドボックス化されたトップレベルナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="browsing-the-web.html#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。サンドボックス化されたブラウジングコンテキストの<a id="sandboxing:active-window" href="document-sequences.html#active-window">アクティブウィンドウ</a>が<span>一時的なアクティブ化</span>を持たない場合にのみ考慮される。</p>

    <p><a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-2">ユーザーによるアクティブ化なしでサンドボックス化されたトップレベルナビゲーションブラウジングコンテキストフラグ</a>が設定されて<em>いない</em>場合、コンテンツはその<a id="sandboxing:top-level-browsing-context-3" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>をナビゲートすることができるが、他の<a href="document-sequences.html#browsing-context" id="sandboxing:browsing-context-3">ブラウジングコンテキスト</a>は、<a href="#sandboxed-navigation-browsing-context-flag" id="sandboxing:sandboxed-navigation-browsing-context-flag-2">サンドボックス化されたナビゲーションブラウジングコンテキストフラグ</a>、および<a href="#sandboxed-auxiliary-navigation-browsing-context-flag" id="sandboxing:sandboxed-auxiliary-navigation-browsing-context-flag-3">サンドボックス化された補助ナビゲーションブラウジングコンテキストフラグ</a>によって保護されたままである。</p>
   <dt><dfn id="sandboxed-top-level-navigation-with-user-activation-browsing-context-flag" data-export="">ユーザーによるアクティブ化でサンドボックス化されたトップレベルナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="browsing-the-web.html#sandboxLinks">それらの<span>トップレベルブラウジングコンテキスト</span>のナビゲートからコンテンツを防ぎ</a>、かつ<a href="#sandboxClose">それらの<span>トップレベルブラウジングコンテキスト</span>の遮断からコンテンツを防ぐ</a>。サンドボックス化されたブラウジングコンテキストの<a id="sandboxing:active-window-2" href="document-sequences.html#active-window">アクティブウィンドウ</a>が<span>一時的なアクティブ化</span>を持つ場合にのみ考慮される。</p>

    <p><a href="#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag" id="sandboxing:sandboxed-top-level-navigation-without-user-activation-browsing-context-flag-3">ユーザーによるアクティブ化なしでサンドボックス化されたブラウジングコンテキストフラグ</a>と同様に、このフラグは<a id="sandboxing:top-level-browsing-context-4" href="document-sequences.html#top-level-browsing-context">トップレベルブラウジングコンテキスト</a>にのみ影響する。 設定されていない場合、他の<a href="document-sequences.html#browsing-context" id="sandboxing:browsing-context-4">ブラウジングコンテキスト</a>が他のフラグによって保護されている可能性がある。</p>
   <dt><dfn id="sandboxed-origin-browsing-context-flag" data-export="">サンドボックス化された生成元ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="document-sequences.html#sandboxOrigin">不透明な生成元にコンテンツを強制する</a>。したがって、同一<a href="#concept-origin" id="sandboxing:concept-origin">生成元</a>から他のコンテンツにアクセスすることを防止する。</p>

    <p>このフラグはまた、<a href="#sandboxCookies"><code>document.cookie</code> IDL属性からの読み取りまたは書き込みをするスクリプトを防止し</a>、<code id="sandboxing:dom-localstorage"><a href="webstorage.html#dom-localstorage">localStorage</a></code>へのアクセスをブロックする。</p>
   <dt><dfn id="sandboxed-forms-browsing-context-flag" data-export="">サンドボックス化されたフォームブラウジングコンテキストフラグ</dfn><dd><p>このフラグは<a href="#sandboxSubmitBlocked">フォーム送信をブロックする</a>。</p>
   <dt><dfn id="sandboxed-pointer-lock-browsing-context-flag" data-export="">サンドボックス化されたポインターロックブラウジングコンテキストフラグ</dfn><dd><p>このフラグはPointer Lock APIを無効にする。<a href="references.html#refsPOINTERLOCK">[POINTERLOCK]</a></p>
   <dt><dfn id="sandboxed-scripts-browsing-context-flag" data-export="">サンドボックス化されたスクリプトブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="#sandboxScriptBlocked">スクリプトの実行をブロックする</a>。</p>
   <dt><dfn id="sandboxed-automatic-features-browsing-context-flag" data-export="">サンドボックス化された自動機能ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<a href="media.html#attr-media-autoplay" id="sandboxing:attr-media-autoplay">自動ビデオ再生</a>や<a href="interaction.html#attr-fe-autofocus" id="sandboxing:attr-fe-autofocus">自動フォームコントロールフォーカス</a>などの、自動的に切り替える機能をブロックする。</p>
   <dt><dfn id="sandboxed-document.domain-browsing-context-flag" data-export="">サンドボックス化された<code>document.domain</code>ブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、コンテンツが<code id="sandboxing:dom-document-domain"><a href="#dom-document-domain">document.domain</a></code>セッターを使用することから防ぐ。</p>
   <dt><dfn id="sandbox-propagates-to-auxiliary-browsing-contexts-flag" data-export="">サンドボックスが補助ブラウジングコンテキストに伝播するフラグ</dfn><dd><p>このフラグは、コンテンツが作成する<a id="sandboxing:auxiliary-browsing-context-2" href="document-sequences.html#auxiliary-browsing-context">補助ブラウジングコンテキスト</a>がコンテンツの<span>アクティブなサンドボックスフラグセット</span>を継承するのを保証することで、そのコンテンツがサンドボックスをエスケープするのを防ぐ。</p>
   <dt><dfn id="sandboxed-modals-flag" data-export="">サンドボックス化されたモーダルフラグ</dfn><dd><p>このフラグは、コンテンツが次の機能のいずれかを使用してモーダルダイアログを生成するのを防ぐ：</p>

    <ul><li><code id="sandboxing:dom-alert"><a href="timers-and-user-prompts.html#dom-alert">window.alert()</a></code><li><code id="sandboxing:dom-confirm"><a href="timers-and-user-prompts.html#dom-confirm">window.confirm()</a></code><li><code id="sandboxing:dom-print"><a href="timers-and-user-prompts.html#dom-print">window.print()</a></code><li><code id="sandboxing:dom-prompt"><a href="timers-and-user-prompts.html#dom-prompt">window.prompt()</a></code><li><code id="sandboxing:event-beforeunload"><a href="indices.html#event-beforeunload">beforeunload</a></code>イベント</ul>
   <dt><dfn id="sandboxed-orientation-lock-browsing-context-flag" data-export="">サンドボックス化された方向ロックブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、画面の向きをロックする機能を無効にする。<a href="references.html#refsSCREENORIENTATION">[SCREENORIENTATION]</a></p>
   <dt><dfn id="sandboxed-presentation-browsing-context-flag" data-export="">サンドボックス化されたプレゼンテーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグはPresentation APIを無効にする。 <a href="references.html#refsPRESENTATION">[PRESENTATION]</a></p>
   <dt><dfn id="sandboxed-downloads-browsing-context-flag" data-export="">サンドボックス化されたダウンロードブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、<span>ハイパーリンクのダウンロード</span>または<span>ダウンロードとして処理される</span><a href="browsing-the-web.html#navigation-as-a-download">ナビゲーション</a>のいずれを介して、コンテンツがダウンロードを開始またはインスタンス化するのを防ぐ。</p>
   <dt><dfn id="sandboxed-custom-protocols-navigation-browsing-context-flag" data-export="">サンドボックス化されたカスタムプロトコルナビゲーションブラウジングコンテキストフラグ</dfn><dd><p>このフラグは、非<a href="https://triple-underscore.github.io/Fetch-ja.html#fetch-scheme" id="sandboxing:fetch-scheme" data-x-internal="fetch-scheme">フェッチスキーム</a>へのナビゲーションが<a href="browsing-the-web.html#hand-off-to-external-software" id="sandboxing:hand-off-to-external-software">外部ソフトウェアに渡される</a>のを妨げる。</p>
   </dl>

  


  <nav><a href="popover.html">← 6.12 popover属性</a> — <a href="./">目次</a> — <a href="nav-history-apis.html">7.2 ナビゲーションおよびセッション履歴に関連するAPI →</a></nav>
