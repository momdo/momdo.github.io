<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Developer's Edition 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="/dev/search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="./dev" />HTML: The Living Standard</a></h1><h2 id="dev-edition-h2" class="no-num no-toc">Developer's Edition — Last Updated <span class="pubdate">13 July 2020</span></h2></hgroup>
   

   <div id="search"><input placeholder="Search. Press '/'" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="common-microsyntaxes.html">← 2.4 共通マイクロ構文</a> — <a href="./">目次</a> — <a href="common-dom-interfaces.html">2.6 共通DOMインターフェイス →</a></nav><ol class="toc"><li><ol><li><a href="urls-and-fetching.html#urls"><span class="secno">2.5</span> URL</a><ol><li><a href="urls-and-fetching.html#terminology-2"><span class="secno">2.5.1</span> 用語</a><li><a href="urls-and-fetching.html#cors-settings-attributes"><span class="secno">2.5.2</span> CORS設定属性</a><li><a href="urls-and-fetching.html#referrer-policy-attributes"><span class="secno">2.5.3</span> リファラーポリシー属性</a><li><a href="urls-and-fetching.html#nonce-attributes"><span class="secno">2.5.4</span> Nonce属性</a><li><a href="urls-and-fetching.html#lazy-loading-attributes"><span class="secno">2.5.5</span> Lazy loading attributes</a></ol></ol></ol><h3 id="urls"><span class="secno">2.5</span> URL<a href="#urls" class="self-link"></a></h3>

  <h4 id="terminology-2"><span class="secno">2.5.1</span> 用語<a href="#terminology-2" class="self-link"></a></h4>

  <p><a id="terminology-2:valid-url-string" href="https://triple-underscore.github.io/U#valid-url-string" data-x-internal="valid-url-string">妥当なURL文字列</a>だが空文字列でない場合、文字列は<dfn id="valid-non-empty-url">妥当な空でないURL</dfn>である。</p>

  <p><a href="https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace" id="terminology-2:strip-leading-and-trailing-ascii-whitespace" data-x-internal="strip-leading-and-trailing-ascii-whitespace">先頭と末尾のASCII空白文字を取り除いた</a>あとに<a id="terminology-2:valid-url-string-2" href="https://triple-underscore.github.io/U#valid-url-string" data-x-internal="valid-url-string">妥当なURL文字列</a>である場合、文字列は<dfn id="valid-url-potentially-surrounded-by-spaces">潜在的にスペースで囲まれた妥当なURL</dfn>である。</p>

  <p><a href="https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace" id="terminology-2:strip-leading-and-trailing-ascii-whitespace-2" data-x-internal="strip-leading-and-trailing-ascii-whitespace">先頭と末尾のASCII空白文字を取り除いた</a>あとに、<a href="#valid-non-empty-url" id="terminology-2:valid-non-empty-url">妥当な空でないURL</a>である場合、文字列は<dfn id="valid-non-empty-url-potentially-surrounded-by-spaces">潜在的にスペースで囲まれた妥当な空でないURL</dfn>である。</p>

  <p>この仕様は、たとえ解決不可能でも、XMLツールの互換性のために必要な場合、<a id="terminology-2:html-documents" href="https://triple-underscore.github.io/DOM4-ja.html#html-document" data-x-internal="html-documents">HTML文書</a>の<a href="syntax.html#syntax-doctype" id="terminology-2:syntax-doctype">DOCTYPE</a>で用いるための<code id="terminology-2:about-protocol"><a data-x-internal="about-protocol" href="https://tools.ietf.org/html/rfc6694#section-2">about:</a></code> URL予約としてURL <dfn id="about:legacy-compat"><code>about:legacy-compat</code></dfn>を定義する。<a href="references.html#refsABOUT">[ABOUT]</a></p>

  <p>この仕様は、たとえ解決不可能でも、メディアトラック類のための識別子として用いられる<code id="terminology-2:about-protocol-2"><a data-x-internal="about-protocol" href="https://tools.ietf.org/html/rfc6694#section-2">about:</a></code> URLを予約としてURL <dfn id="about:html-kind"><code>about:html-kind</code></dfn>を定義する。<a href="references.html#refsABOUT">[ABOUT]</a></p>

  <p>この仕様は、たとえ解決不可能でも、<a href="iframe-embed-object.html#an-iframe-srcdoc-document" id="terminology-2:an-iframe-srcdoc-document"><code>iframe</code> <code>srcdoc</code>文書</a>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="terminology-2:the-document's-address" data-x-internal="the-document's-address">URL</a>として用いられる<code id="terminology-2:about-protocol-3"><a data-x-internal="about-protocol" href="https://tools.ietf.org/html/rfc6694#section-2">about:</a></code> URLを予約としてURL <dfn id="about:srcdoc"><code>about:srcdoc</code></dfn>を定義する。<a href="references.html#refsABOUT">[ABOUT]</a></p>

  <p><code>Document</code>オブジェクト<var>document</var>の<dfn id="fallback-base-url">フォールバック基底URL</dfn>は、次の手順を実行して得られる<a id="terminology-2:url-record" href="https://triple-underscore.github.io/URL-ja.html#concept-url" data-x-internal="url-record">URLレコード</a>である：</p>

  <ol><li><p>If <var>document</var> is <a id="terminology-2:an-iframe-srcdoc-document-2" href="iframe-embed-object.html#an-iframe-srcdoc-document">an <code>iframe</code> <code>srcdoc</code> document</a>, then return the <a href="#document-base-url" id="terminology-2:document-base-url">document base URL</a> of <var>document</var>'s <a href="browsers.html#concept-document-bc" id="terminology-2:concept-document-bc">browsing context</a>'s <a href="browsers.html#bc-container-document" id="terminology-2:bc-container-document">container document</a>.<li><p><var>document</var>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="terminology-2:the-document's-address-2" data-x-internal="the-document's-address">URL</a>が<code id="terminology-2:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code>であり、かつ<var>document</var>の<a href="browsers.html#concept-document-bc" id="terminology-2:concept-document-bc-2">ブラウジングコンテキスト</a>の<a id="terminology-2:creator-base-url" href="browsers.html#creator-base-url">クリエイター基底URL</a>が非nullである場合、<a id="terminology-2:creator-base-url-2" href="browsers.html#creator-base-url">クリエイター基底URL</a>を返す。</p>
   <li><p><var>document</var>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="terminology-2:the-document's-address-3" data-x-internal="the-document's-address">URL</a>を返す。</ol>

  <p><code>Document</code>オブジェクトの<dfn id="document-base-url" data-export="">文書基底URL</dfn>は、次の手順を実行して得られる<a id="terminology-2:absolute-url" href="https://triple-underscore.github.io/URL-ja.html#syntax-url-absolute" data-x-internal="absolute-url">絶対URL</a>である：</p>

  <ol><li><p><code>Document</code>に<code id="terminology-2:attr-base-href"><a href="semantics.html#attr-base-href">href</a></code>属性を持つ<code id="terminology-2:the-base-element"><a href="semantics.html#the-base-element">base</a></code>要素が存在しない場合、<code>Document</code>の<a href="#fallback-base-url" id="terminology-2:fallback-base-url">フォールバック基底URL</a>を返す。<li><p>そうでなければ、<a id="terminology-2:tree-order" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order" data-x-internal="tree-order">ツリー順</a>で、<code id="terminology-2:attr-base-href-2"><a href="semantics.html#attr-base-href">href</a></code>属性を持つ<code>Document</code>で最初の<code id="terminology-2:the-base-element-2"><a href="semantics.html#the-base-element">base</a></code>要素の<span>凍結基底URL</span>を返す。</ol>


  



  


  


  <h4 id="cors-settings-attributes"><span class="secno">2.5.2</span> CORS設定属性<a href="#cors-settings-attributes" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin" title="The crossorigin attribute, valid on the &lt;audio>, &lt;img>, &lt;link>, &lt;script>, and &lt;video> elements, provides support for CORS, defining how the element handles crossorigin requests, thereby enabling the configuration of the CORS requests for the element's fetched data. Depending on the element, the attribute can be a CORS settings attribute.">Attributes/crossorigin</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>Yes</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>Yes</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div>

  <p><dfn id="cors-settings-attribute">CORS設定属性</dfn>は、<a id="cors-settings-attributes:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。The following table lists the keywords and states for the attribute — the states given in the first cell of the rows with keywords give the states to which those keywords map.</p>

  <table><thead><tr><th>状態<th>キーワード<th>概要<tbody><tr><td rowspan="2"><dfn id="attr-crossorigin-anonymous">Anonymous</dfn><td><dfn id="attr-crossorigin-anonymous-keyword"><code>anonymous</code></dfn><td rowspan="2">要素に対する<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request" id="cors-settings-attributes:concept-request" data-x-internal="concept-request">リクエスト</a>は、"<code>cors</code>"に設定されるリクエストの<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-mode" id="cors-settings-attributes:concept-request-mode" data-x-internal="concept-request-mode">モード</a>および"<code>same-origin</code>"に設定されるリクエストの<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode" id="cors-settings-attributes:concept-request-credentials-mode" data-x-internal="concept-request-credentials-mode">認証情報モード</a>を持つ。<tr><td>(the empty string)<tr><td><dfn id="attr-crossorigin-use-credentials">Use Credentials</dfn><td><dfn id="attr-crossorigin-use-credentials-keyword"><code>use-credentials</code></dfn><td>要素に対する<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request" id="cors-settings-attributes:concept-request-2" data-x-internal="concept-request">リクエスト</a>は、"<code>cors</code>"に設定されるリクエストの<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-mode" id="cors-settings-attributes:concept-request-mode-2" data-x-internal="concept-request-mode">モード</a>および"<code>include</code>"に設定されるリクエストの<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode" id="cors-settings-attributes:concept-request-credentials-mode-2" data-x-internal="concept-request-credentials-mode">認証情報モード</a>を持つ。</table>

  <p>The attribute's <i id="cors-settings-attributes:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">invalid value default</a></i> is the <a href="#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous">Anonymous</a> state, and its <i id="cors-settings-attributes:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">missing value default</a></i> is the <dfn id="attr-crossorigin-none">No CORS</dfn> state. For the purposes of <a href="common-dom-interfaces.html#reflect" id="cors-settings-attributes:reflect">reflection</a>, the <span>canonical keyword</span> for the <a href="#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous-2">Anonymous</a> state is the <code id="cors-settings-attributes:attr-crossorigin-anonymous-keyword"><a href="#attr-crossorigin-anonymous-keyword">anonymous</a></code> keyword.</p>

  <p><a href="#cors-settings-attribute" id="cors-settings-attributes:cors-settings-attribute">CORS設定属性</a>によって管理されるフェッチの大部分は、<span>潜在的なCORS要求</span>アルゴリズムの作成によって行われる。</p>

  <p><span>モジュールスクリプト</span>の場合、特定の<a href="#cors-settings-attribute" id="cors-settings-attributes:cors-settings-attribute-2">CORS設定属性</a>は、わずかに異なる意味を持つように再利用されている。この属性は、<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request" id="cors-settings-attributes:concept-request-3" data-x-internal="concept-request">リクエスト</a>の<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode" id="cors-settings-attributes:concept-request-credentials-mode-3" data-x-internal="concept-request-credentials-mode">認証情報</a>モードにのみ影響を与る（<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-mode" id="cors-settings-attributes:concept-request-mode-3" data-x-internal="concept-request-mode">モード</a>は常に"<code>cors</code>"なので）。この変換を実行するために、属性の状態をオンにすることで決定するような、与えられた<a href="#cors-settings-attribute" id="cors-settings-attributes:cors-settings-attribute-3">CORS設定属性</a>の<dfn id="module-script-credentials-mode">モジュールスクリプト資格情報モード</dfn>を定義する。</p>

  <dl class="switch"><dt><a href="#attr-crossorigin-none" id="cors-settings-attributes:attr-crossorigin-none">No CORS</a><dt><a href="#attr-crossorigin-anonymous" id="cors-settings-attributes:attr-crossorigin-anonymous-3">Anonymous</a><dd>"<code>same-origin</code>"<dt><a href="#attr-crossorigin-none" id="cors-settings-attributes:attr-crossorigin-none-2">Use Credentials</a><dd>"<code>include</code>"</dl>


  <h4 id="referrer-policy-attributes"><span class="secno">2.5.3</span> リファラーポリシー属性<a href="#referrer-policy-attributes" class="self-link"></a></h4>

  <p><dfn id="referrer-policy-attribute" data-export="">リファラポリシー属性</dfn>は、<a id="referrer-policy-attributes:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。空文字列を含む各<a id="referrer-policy-attributes:referrer-policy" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy" data-x-internal="referrer-policy">リファラーポリシー</a>は、同じ名前の状態にマッピングする、この属性のためのキーワードである。</p>

  <p>属性の<i id="referrer-policy-attributes:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>および<i id="referrer-policy-attributes:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>の両方は、空文字列状態である。</p>

  <p>様々な<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="referrer-policy-attributes:concept-fetch" data-x-internal="concept-fetch">フェッチ</a>の処理モデルにこの状態の影響は、<cite>Fetch</cite>、および<cite>Referrer Policy</cite>で、この仕様を通してより詳細に定義される。<a href="references.html#refsFETCH">[FETCH]</a> <a href="references.html#refsREFERRERPOLICY">[REFERRERPOLICY]</a></p>

  <div class="note"><p>複数の信号は、どの処理モデルが与えられる<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="referrer-policy-attributes:concept-fetch-2" data-x-internal="concept-fetch">フェッチ</a>に使用されるかに寄与することができる。<a href="#referrer-policy-attribute" id="referrer-policy-attributes:referrer-policy-attribute">リファラポリシー属性</a>はそのうちの一つである。一般に、この信号が処理される順序は次のとおり：</p>

   <ol><li><p>まず、<code id="referrer-policy-attributes:link-type-noreferrer"><a href="links.html#link-type-noreferrer">noreferrer</a></code>リンクタイプの存在<li><p>次に、<a href="#referrer-policy-attribute" id="referrer-policy-attributes:referrer-policy-attribute-2">リファラーポリシー属性</a>の値<li><p>それから<code id="referrer-policy-attributes:meta-referrer"><a href="semantics.html#meta-referrer">referrer</a></code>に設定される<code id="referrer-policy-attributes:attr-meta-name"><a href="semantics.html#attr-meta-name">name</a></code>をもつ任意の<code id="referrer-policy-attributes:the-meta-element"><a href="semantics.html#the-meta-element">meta</a></code>要素の存在<li><p>最後に、`<code id="referrer-policy-attributes:http-referrer-policy"><a data-x-internal="http-referrer-policy" href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn">Referrer-Policy</a></code>` HTTPヘッダー。</ol>
  </div>

  <h4 id="nonce-attributes"><span class="secno">2.5.4</span> Nonce属性<a href="#nonce-attributes" class="self-link"></a></h4>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/nonce" title="The nonce property of the HTMLOrForeignElement interface returns the cryptographic number used once that is used by Content Security Policy to determine whether a given fetch will be allowed to proceed.">HTMLOrForeignElement/nonce</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>75+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>61+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android no"><span>Firefox Android</span><span>No</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>61+</span></span><span class="webview_android yes"><span>WebView Android</span><span>61+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>8.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><p><dfn data-export="" data-dfn-type="element-attr" id="attr-nonce" data-dfn-for="htmlsvg-global">nonce</dfn>コンテンツ属性は、与えられたフェッチが処理されてもよいどうかを判断するために<cite>Content Security Policy</cite>で使用することができる暗号ノンス（"一度使用される数字"）を表す。値はテキストである。<a href="references.html#refsCSP">[CSP]</a></p>

  <p>Elements that have a <code id="nonce-attributes:attr-nonce"><a href="#attr-nonce">nonce</a></code> content attribute ensure that the crytographic nonce is only exposed to script (and not to side-channels like CSS attribute selectors) by taking the value from the content attribute, moving it into an internal slot named <dfn data-dfn-for="HTMLOrSVGElement" id="cryptographicnonce" data-dfn-type="attribute" data-export="">[[CryptographicNonce]]</dfn>, exposing it to script via the <code>HTMLOrSVGElement</code> interface mixin, and setting the content attribute to the empty string. 特に指定しない限り、スロットの値は空の文字列である。</p>

  <dl class="domintro"><dt><var>element</var> . <code>nonce</code><dd><p>要素の<a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce">[[CryptographicNonce]]</a>内部スロットの値を返す。</p>
    <p>そのスロットの値を更新するために設定することができる。</p>
   </dl>

  <p>取得時に、<dfn data-export="" data-dfn-type="attribute" data-dfn-for="HTMLOrSVGElement" id="dom-noncedelement-nonce"><code>nonce</code></dfn> IDL属性は、この要素の<a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-2">[[CryptographicNonce]]</a>の値を返さなければならない。この要素の<a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-3">[[CryptographicNonce]]</a>を指定された値に設定する。</p>

  <p id="nonce-does-not-update-dom" class="note"><code id="nonce-attributes:dom-noncedelement-nonce"><a href="#dom-noncedelement-nonce">nonce</a></code> IDL属性のセッターが対応するcontent属性を更新しないことに注意されたい。これは、要素が<a id="nonce-attributes:becomes-browsing-context-connected" href="infrastructure.html#becomes-browsing-context-connected">ブラウジングコンテキストに接続された</a>ときに以下の<code id="nonce-attributes:attr-nonce-2"><a href="#attr-nonce">nonce</a></code>コンテンツ属性を空の文字列に設定するのと同様に、セレクターなどのコンテンツ属性をより簡単に読み取ることができるメカニズムによるnonce値の流出を防ぐことを意味する。この動作が導入された<a href="https://github.com/whatwg/html/issues/2369">issue #2369</a>で詳細を確認されたい。</p>

  <p>The following <a href="https://dom.spec.whatwg.org/#concept-element-attributes-change-ext" id="nonce-attributes:concept-element-attributes-change-ext" data-x-internal="concept-element-attributes-change-ext">attribute change steps</a> are used for the <code id="nonce-attributes:attr-nonce-3"><a href="#attr-nonce">nonce</a></code> content attribute:<ol><li><p>If <var>element</var> does not <a id="nonce-attributes:include" href="https://heycam.github.io/webidl/#include" data-x-internal="include">include</a> <code>HTMLOrSVGElement</code>, then return.<li><p>If <var>localName</var> is not <code id="nonce-attributes:attr-nonce-4"><a href="#attr-nonce">nonce</a></code> or <var>namespace</var> is not null, then return.<li><p>If <var>value</var> is null, then set <var>element</var>'s <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-4">[[CryptographicNonce]]</a> to the empty string.<li><p>Otherwise, set <var>element</var>'s <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-5">[[CryptographicNonce]]</a> to <var>value</var>.</ol>

  <p>Whenever an element <a href="https://heycam.github.io/webidl/#include" id="nonce-attributes:include-2" data-x-internal="include">including</a> <code>HTMLOrSVGElement</code> <a id="nonce-attributes:becomes-browsing-context-connected-2" href="infrastructure.html#becomes-browsing-context-connected">becomes browsing-context connected</a>, the user agent must execute the following steps on the <var>element</var>:</p>

  <ol><li><p>Let <var>CSP list</var> be <var>element</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-root" id="nonce-attributes:shadow-including-root" data-x-internal="shadow-including-root">shadow-including root</a>'s <a href="dom.html#concept-document-csp-list" id="nonce-attributes:concept-document-csp-list">CSP list</a>.<li><p>If <var>CSP list</var> <a id="nonce-attributes:contains-a-header-delivered-content-security-policy" href="https://w3c.github.io/webappsec-csp/#contains-a-header-delivered-content-security-policy" data-x-internal="contains-a-header-delivered-content-security-policy">contains a header-delivered Content Security Policy</a>, and <var>element</var> has a <code id="nonce-attributes:attr-nonce-5"><a href="#attr-nonce">nonce</a></code> content attribute <var>attr</var> whose value is not the empty string, then:</p>

    <ol><li><p>Let <var>nonce</var> be <var>element</var>'s <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-6">[[CryptographicNonce]]</a>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-attributes-set-value" id="nonce-attributes:concept-element-attributes-set-value" data-x-internal="concept-element-attributes-set-value">Set an attribute value</a> for <var>element</var> using "<code id="nonce-attributes:attr-nonce-6"><a href="#attr-nonce">nonce</a></code>" and the empty string.<li><p>Set <var>element</var>'s <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-7">[[CryptographicNonce]]</a> to <var>nonce</var>.</ol>

    <p class="note">If <var>element</var>'s <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-8">[[CryptographicNonce]]</a> were not restored it would be the empty string at this point.</p>
   </ol>

  <p class="note">As each <code>Document</code>'s <a href="dom.html#concept-document-csp-list" id="nonce-attributes:concept-document-csp-list-2">CSP list</a> is append-only, user agents can optimize away the <a id="nonce-attributes:contains-a-header-delivered-content-security-policy-2" href="https://w3c.github.io/webappsec-csp/#contains-a-header-delivered-content-security-policy" data-x-internal="contains-a-header-delivered-content-security-policy">contains a header-delivered Content Security Policy</a> check by, for example, holding a flag on the <code>Document</code>, set during <span><code>Document</code> creation and initialization</span>.</p>

  <p>The <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone-ext" id="nonce-attributes:concept-node-clone-ext" data-x-internal="concept-node-clone-ext">cloning steps</a> for elements that <a id="nonce-attributes:include-3" href="https://heycam.github.io/webidl/#include" data-x-internal="include">include</a> <code>HTMLOrSVGElement</code> must set the <a href="#cryptographicnonce" id="nonce-attributes:cryptographicnonce-9">[[CryptographicNonce]]</a> slot on the copy to the value of the slot on the element being cloned.</p>

  <h4 id="lazy-loading-attributes"><span class="secno">2.5.5</span> Lazy loading attributes<a href="#lazy-loading-attributes" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading" title="Lazy loading is a strategy to identify resources as non-blocking (non-critical) and load these only when needed. It's a way to shorten the length of the critical rendering path, which translates into reduced page load times.">Lazy_loading</a><div class="support"><span class="firefox yes"><span>Firefox</span><span>75+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>76+</span></span><hr><span class="opera yes"><span>Opera</span><span>63+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android no"><span>Firefox Android</span><span>No</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>76+</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>No</span></span><span class="opera_android yes"><span>Opera Android</span><span>54+</span></span><hr><span class="caniuse"><span><a href="https://caniuse.com/#feat=loading-lazy-attr" title="Lazy loading via attribute for images &amp; iframes">caniuse.com table</a></span></span></div></div></div>

  <p><dfn id="lazy-loading-attribute">遅延読み込み属性</dfn>は<a id="lazy-loading-attributes:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。次の表は、キーワードと属性の状態を示す。1列目のキーワードは、キーワードと同じ行で2列目のセル内の状態に対応づける。</p>

  <p>この属性は、属性の現在の状態に応じて、すぐにリソースを取得する、または要素に関連付けられた条件が満たされるまで取得を延期するようユーザーエージェントに指示する。</p>

  <table><thead><tr><th>キーワード<th>状態<th>説明<tbody><tr><td><dfn id="attr-loading-lazy"><code>lazy</code></dfn><td><dfn id="attr-loading-lazy-state">Lazy</dfn><td>いくつかの条件が満たされるまでリソースのフェッチを延期するために使用される。<tr><td><dfn id="attr-loading-eager"><code>eager</code></dfn><td><dfn id="attr-loading-eager-state">Eager</dfn><td>リソースをすぐにフェッチするために使用される。デフォルト状態。</table>

  <p>属性の<i id="lazy-loading-attributes:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>と<i id="lazy-loading-attributes:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">無効値のデフォルト</a></i>は両方とも<a href="#attr-loading-eager-state" id="lazy-loading-attributes:attr-loading-eager-state">Eager</a>状態である。</p>

  <hr>

  <p>The <dfn id="will-lazy-load-element-steps">will lazy load element steps</dfn>, given an element <var>element</var>, are as follows:</p>

  <ol><li><p>If <span>scripting is disabled</span> for <var>element</var>, then return false.</p>

    <p class="note">This is an anti-tracking measure, because if a user agent supported lazy loading when scripting is disabled, it would still be possible for a site to track a user's approximate scroll position throughout a session, by strategically placing images in a page's markup such that a server can track how many images are requested and when.</p>
   <li><p>If <var>element</var>'s <a href="#lazy-loading-attribute" id="lazy-loading-attributes:lazy-loading-attribute">lazy loading attribute</a> is in the <a href="#attr-loading-lazy-state" id="lazy-loading-attributes:attr-loading-lazy-state">Lazy</a> state, then return true.<li><p>Return false.</ol>

  <p>Each <code id="lazy-loading-attributes:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> and <code id="lazy-loading-attributes:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code> element has associated <dfn id="lazy-load-resumption-steps">lazy load resumption steps</dfn>, initially null.</p>

  <p class="note">For <code id="lazy-loading-attributes:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> and <code id="lazy-loading-attributes:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code> elements that <a href="#will-lazy-load-element-steps" id="lazy-loading-attributes:will-lazy-load-element-steps">will lazy load</a>, these steps are run from the <a href="#lazy-load-intersection-observer" id="lazy-loading-attributes:lazy-load-intersection-observer">lazy load intersection observer</a>'s callback or when their <a href="#lazy-loading-attribute" id="lazy-loading-attributes:lazy-loading-attribute-2">lazy loading attribute</a> is set to the <a href="#attr-loading-eager-state" id="lazy-loading-attributes:attr-loading-eager-state-2">Eager</a> state. This causes the element to continue loading.</p>

  <p>Each <code>Document</code> has a <dfn id="lazy-load-intersection-observer">lazy load intersection observer</dfn>, initially set to null but can be set to an <code id="lazy-loading-attributes:intersectionobserver"><a data-x-internal="intersectionobserver" href="https://w3c.github.io/IntersectionObserver/#intersectionobserver">IntersectionObserver</a></code> instance.</p>

  <p>To <dfn id="start-intersection-observing-a-lazy-loading-element">start intersection-observing a lazy loading element</dfn> <var>element</var>, run these steps:</p>

  <ol><li><p>Let <var>doc</var> be <var>element</var>'s <a id="lazy-loading-attributes:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If <var>doc</var>'s <a href="#lazy-load-intersection-observer" id="lazy-loading-attributes:lazy-load-intersection-observer-2">lazy load intersection observer</a> is null, set it to a new <code id="lazy-loading-attributes:intersectionobserver-2"><a data-x-internal="intersectionobserver" href="https://w3c.github.io/IntersectionObserver/#intersectionobserver">IntersectionObserver</a></code> instance, initialized as follows:</p>

    <p class="XXX">The intention is to use the original value of the <code id="lazy-loading-attributes:intersectionobserver-3"><a data-x-internal="intersectionobserver" href="https://w3c.github.io/IntersectionObserver/#intersectionobserver">IntersectionObserver</a></code> constructor. However, we're forced to use the JavaScript-exposed constructor in this specification, until <cite>Intersection Observer</cite> exposes low-level hooks for use in specifications. See bug <a href="https://github.com/w3c/IntersectionObserver/issues/427">w3c/IntersectionObserver#427</a> which tracks this. <a href="references.html#refsINTERSECTIONOBSERVER">[INTERSECTIONOBSERVER]</a></p>

    <ul><li><p>The <var>callback</var> is these steps, with arguments <var>entries</var> and <var>observer</var>:</p>

      <ol><li><p>For each <var>entry</var> in <var>entries</var> <span class="XXX">using a method of iteration which does not trigger developer-modifiable array accessors or iteration hooks</span>:</p>

        <ol><li><p>Let <var>resumptionSteps</var> be null.<li><p>If <var>entry</var>.<code id="lazy-loading-attributes:dom-intersectionobserverentry-isintersecting"><a data-x-internal="dom-intersectionobserverentry-isintersecting" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-isintersecting">isIntersecting</a></code> is true, then set <var>resumptionSteps</var> to <var>entry</var>.<code id="lazy-loading-attributes:dom-intersectionobserverentry-target"><a data-x-internal="dom-intersectionobserverentry-target" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target">target</a></code>'s <a href="#lazy-load-resumption-steps" id="lazy-loading-attributes:lazy-load-resumption-steps">lazy load resumption steps</a>.<li><p>If <var>resumptionSteps</var> is null, then return.<li><p><a href="#stop-intersection-observing-a-lazy-loading-element" id="lazy-loading-attributes:stop-intersection-observing-a-lazy-loading-element">Stop intersection-observing a lazy loading element</a> for <var>entry</var>.<code id="lazy-loading-attributes:dom-intersectionobserverentry-target-2"><a data-x-internal="dom-intersectionobserverentry-target" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target">target</a></code>.<li><p>Set <var>entry</var>.<code id="lazy-loading-attributes:dom-intersectionobserverentry-target-3"><a data-x-internal="dom-intersectionobserverentry-target" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target">target</a></code>'s <a href="#lazy-load-resumption-steps" id="lazy-loading-attributes:lazy-load-resumption-steps-2">lazy load resumption steps</a> to null.<li><p>Invoke <var>resumptionSteps</var>.</ol>

        <p class="XXX">The intention is to use the original value of the <code id="lazy-loading-attributes:dom-intersectionobserverentry-isintersecting-2"><a data-x-internal="dom-intersectionobserverentry-isintersecting" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-isintersecting">isIntersecting</a></code> and <code id="lazy-loading-attributes:dom-intersectionobserverentry-target-4"><a data-x-internal="dom-intersectionobserverentry-target" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserverentry-target">target</a></code> getters. See <a href="https://github.com/w3c/IntersectionObserver/issues/427">w3c/IntersectionObserver#427</a>. <a href="references.html#refsINTERSECTIONOBSERVER">[INTERSECTIONOBSERVER]</a></p>
       </ol>
     <li><p>The <var>options</var> is an <code id="lazy-loading-attributes:intersectionobserverinit"><a data-x-internal="intersectionobserverinit" href="https://w3c.github.io/IntersectionObserver/#dictdef-intersectionobserverinit">IntersectionObserverInit</a></code> dictionary with the following dictionary members: «[ "<code>rootMargin</code>" → an <a id="lazy-loading-attributes:implementation-defined" href="https://infra.spec.whatwg.org/#implementation-defined" data-x-internal="implementation-defined">implementation-defined</a> value ]»</p>

      <p class="XXX">See <a href="https://github.com/whatwg/html/issues/5408">issue #5408</a>.</p>

      <p class="note">This allows for fetching the image during scrolling, when it does not yet — but is about to — intersect the viewport.</p>
     </ul>
   <li><p>Call <var>doc</var>'s <a href="#lazy-load-intersection-observer" id="lazy-loading-attributes:lazy-load-intersection-observer-3">lazy load intersection observer</a>'s <code id="lazy-loading-attributes:dom-intersectionobserver-observe"><a data-x-internal="dom-intersectionobserver-observe" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-observe">observe</a></code> method with <var>element</var> as the argument.</p>

    <p class="XXX">The intention is to use the original value of the <code id="lazy-loading-attributes:dom-intersectionobserver-observe-2"><a data-x-internal="dom-intersectionobserver-observe" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-observe">observe</a></code> method. See <a href="https://github.com/w3c/IntersectionObserver/issues/427">w3c/IntersectionObserver#427</a>. <a href="references.html#refsINTERSECTIONOBSERVER">[INTERSECTIONOBSERVER]</a></p>
   </ol>

  <p>To <dfn id="stop-intersection-observing-a-lazy-loading-element">stop intersection-observing a lazy loading element</dfn> <var>element</var>, run these steps:</p>

  <ol><li><p>Let <var>doc</var> be <var>element</var>'s <a id="lazy-loading-attributes:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>Assert: <var>doc</var>'s <a href="#lazy-load-intersection-observer" id="lazy-loading-attributes:lazy-load-intersection-observer-4">lazy load intersection observer</a> is not null.<li><p>Call <var>doc</var>'s <a href="#lazy-load-intersection-observer" id="lazy-loading-attributes:lazy-load-intersection-observer-5">lazy load intersection observer</a> <code id="lazy-loading-attributes:dom-intersectionobserver-unobserve"><a data-x-internal="dom-intersectionobserver-unobserve" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-unobserve">unobserve</a></code> method with <var>element</var> as the argument.</p>

    <p class="XXX">The intention is to use the original value of the <code id="lazy-loading-attributes:dom-intersectionobserver-unobserve-2"><a data-x-internal="dom-intersectionobserver-unobserve" href="https://w3c.github.io/IntersectionObserver/#dom-intersectionobserver-unobserve">unobserve</a></code> method. See <a href="https://github.com/w3c/IntersectionObserver/issues/427">w3c/IntersectionObserver#427</a>. <a href="references.html#refsINTERSECTIONOBSERVER">[INTERSECTIONOBSERVER]</a></p>
   </ol>


  <nav><a href="common-microsyntaxes.html">← 2.4 共通マイクロ構文</a> — <a href="./">目次</a> — <a href="common-dom-interfaces.html">2.6 共通DOMインターフェイス →</a></nav>
