<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard, Edition for Web Developers日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/dev/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  <script async="" src="./search.js"></script>
  
  
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1><a rel="home" href="../dev" />HTML: The Living Standard</a></h1><p id="dev-edition-h2">Edition for Web Developers — Last Updated <span class="pubdate">11 September 2023</span></hgroup>
   

   <div id="search"><input placeholder="Search. Press '/'" autocomplete="off" name="query" id="query" type="search"><ol id="results"></ol>
   </div>
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="browsers.html">← 7 ウェブページの読み込み</a> — <a href="./">目次</a> — <a href="document-sequences.html">7.3 文書シーケンスのインフラ →</a></nav><ol class="toc"><li><ol><li><a href="nav-history-apis.html#nav-traversal-apis"><span class="secno">7.2</span> ナビゲーションおよびセッション履歴に関連するAPI</a><ol><li><a href="nav-history-apis.html#the-window-object"><span class="secno">7.2.1</span> <code>Window</code>オブジェクト</a><ol><li><a href="nav-history-apis.html#apis-for-creating-and-navigating-browsing-contexts-by-name"><span class="secno">7.2.1.1</span> ウィンドウの開閉</a><li><a href="nav-history-apis.html#accessing-other-browsing-contexts"><span class="secno">7.2.1.2</span> <code>Window</code>オブジェクトのインデックス付きアクセス</a><li><a href="nav-history-apis.html#named-access-on-the-window-object"><span class="secno">7.2.1.3</span> <code>Window</code>オブジェクトの名前付きアクセス</a><li><a href="nav-history-apis.html#navigating-nested-browsing-contexts-in-the-dom"><span class="secno">7.2.1.4</span> 関連ウィンドウへのアクセス</a><li><a href="nav-history-apis.html#browser-interface-elements"><span class="secno">7.2.1.5</span> 歴史的なブラウザーインターフェイス要素API</a></ol><li><a href="nav-history-apis.html#the-windowproxy-exotic-object"><span class="secno">7.2.2</span> <code>WindowProxy</code>外来オブジェクト</a><li><a href="nav-history-apis.html#the-location-interface"><span class="secno">7.2.3</span> <code>Location</code>インターフェイス</a><li><a href="nav-history-apis.html#the-history-interface"><span class="secno">7.2.4</span> <code>History</code>インターフェイス</a><li><a href="nav-history-apis.html#navigation-api"><span class="secno">7.2.5</span> The navigation API</a><ol><li><a href="nav-history-apis.html#navigation-api-intro"><span class="secno">7.2.5.1</span> Introduction</a><li><a href="nav-history-apis.html#navigation-interface"><span class="secno">7.2.5.2</span> The <code>Navigation</code> interface</a><li><a href="nav-history-apis.html#navigation-api-core"><span class="secno">7.2.5.3</span> Core infrastructure</a><li><a href="nav-history-apis.html#the-navigationhistoryentry-interface"><span class="secno">7.2.5.4</span> The <code>NavigationHistoryEntry</code> interface</a><li><a href="nav-history-apis.html#the-history-entry-list"><span class="secno">7.2.5.5</span> The history entry list</a><li><a href="nav-history-apis.html#navigation-api-initiating-navigations"><span class="secno">7.2.5.6</span> Initiating navigations</a><li><a href="nav-history-apis.html#ongoing-navigation-tracking"><span class="secno">7.2.5.7</span> Ongoing navigation tracking</a><li><a href="nav-history-apis.html#the-navigate-event"><span class="secno">7.2.5.8</span> The <code>navigate</code> event</a><ol><li><a href="nav-history-apis.html#the-navigateevent-interface"><span class="secno">7.2.5.8.1</span> The <code>NavigateEvent</code> interface</a><li><a href="nav-history-apis.html#the-navigationdestination-interface"><span class="secno">7.2.5.8.2</span> The <code>NavigationDestination</code> interface</a></ol></ol><li><a href="nav-history-apis.html#nav-traversal-event-interfaces"><span class="secno">7.2.6</span> イベントインターフェイス</a><ol><li><a href="nav-history-apis.html#the-navigationcurrententrychangeevent-interface"><span class="secno">7.2.6.1</span> The <code>NavigationCurrentEntryChangeEvent</code> interface</a><li><a href="nav-history-apis.html#the-popstateevent-interface"><span class="secno">7.2.6.2</span> <code>PopStateEvent</code>インターフェイス</a><li><a href="nav-history-apis.html#the-hashchangeevent-interface"><span class="secno">7.2.6.3</span> <code>HashChangeEvent</code>インターフェイス</a><li><a href="nav-history-apis.html#the-pagetransitionevent-interface"><span class="secno">7.2.6.4</span> <code>PageTransitionEvent</code>インターフェイス</a><li><a href="nav-history-apis.html#the-beforeunloadevent-interface"><span class="secno">7.2.6.5</span> <code>BeforeUnloadEvent</code>インターフェイス</a></ol></ol></ol></ol><h3 id="nav-traversal-apis"><span class="secno">7.2</span> ナビゲーションおよびセッション履歴に関連するAPI<a href="#nav-traversal-apis" class="self-link"></a></h3>

  


  <h4 id="the-window-object"><span class="secno">7.2.1</span> <code>Window</code>オブジェクト<a href="#the-window-object" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window" title="The Window interface represents a window containing a DOM document; the document property points to the DOM document loaded in that window.">Window</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  

  <dl class="domintro"><dt><code><var>window</var>.<span id="dom-window">window</span></code><dt><code><var>window</var>.<span id="dom-frames">frames</span></code><dt><code><var>window</var>.<span id="dom-self">self</span></code><dd><p>これらの属性はすべて<var>window</var>を返す。<dt><code><var>window</var>.<span id="dom-document-2">document</span></code><dd><p><var>window</var>と関連する<code>Document</code>を返す。<dt><code><var>document</var>.<span id="dom-document-defaultview">defaultView</span></code><dd><p><var>document</var>に関連付けられた<code>Window</code>がある場合はそれを返し、そうでなければnullを返す。</dl>

  


  <h5 id="apis-for-creating-and-navigating-browsing-contexts-by-name"><span class="secno">7.2.1.1</span> ウィンドウの開閉<a href="#apis-for-creating-and-navigating-browsing-contexts-by-name" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>window</var> = <var>window</var>.<span id="dom-open">open</span>([ <var>url</var> [, <var>target</var> [, <var>features</var> ] ] ])</code><dd><p><var>url</var>（デフォルトで"<code id="apis-for-creating-and-navigating-browsing-contexts-by-name:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code>"）を表示するためのウィンドウを開き、それを返す。<var>target</var>（デフォルトで"<code>_blank</code>"）は、新しいウィンドウの名前を示す。すでにその名前をもつウィンドウが存在する場合、それが再利用される。<var>features</var>引数は<a id="apis-for-creating-and-navigating-browsing-contexts-by-name:set-of-comma-separated-tokens" href="common-microsyntaxes.html#set-of-comma-separated-tokens">コンマ区切りトークンの集合</a>を含むことができる：</p>

    <dl><dt>"<code>noopener</code>"<dt>"<code>noreferrer</code>"<dd><p>これらは、<a href="links.html#hyperlink" id="apis-for-creating-and-navigating-browsing-contexts-by-name:hyperlink">ハイパーリンク</a>上の<code id="apis-for-creating-and-navigating-browsing-contexts-by-name:link-type-noopener"><a href="links.html#link-type-noopener">noopener</a></code>および<code id="apis-for-creating-and-navigating-browsing-contexts-by-name:link-type-noreferrer"><a href="links.html#link-type-noreferrer">noreferrer</a></code>リンクタイプと同等に動作する。<dt>"<code>popup</code>"<dd><p>ユーザーエージェントに、新しいウィンドウに最小限のウェブブラウザーユーザーインターフェイスを提供するように促す。 （すべての<code>BarProp</code>オブジェクトにも<code id="apis-for-creating-and-navigating-browsing-contexts-by-name:dom-barprop-visible"><a href="#dom-barprop-visible">visible</a></code>ゲッターに影響を与える。）</dl>

    <pre class="example"><code class='js'>globalThis<c- p>.</c->open<c- p>(</c-><c- u>"https://email.example/message/CAOOOkFcWW97r8yg=SsWg7GgCmp4suVX9o85y8BvNRqMjuc5PXg"</c-><c- p>,</c-> <c- kc>undefined</c-><c- p>,</c-> <c- u>"noopener,popup"</c-><c- p>);</c-></code></pre>
   <dt><code><var>window</var>.<span id="dom-name">name</span> [ = <var>value</var> ]</code><dd><p>ウィンドウの名前を返す。</p>

    <p>名前を変更する設定が可能である。</p>
   <dt><code><var>window</var>.<span id="dom-window-close">close</span>()</code><dd><p>ウィンドウを閉じる。<dt><code><var>window</var>.<span id="dom-window-closed">closed</span></code><dd><p>ウィンドウが閉じられている場合はtrueを返し、そうでなければfalseを返す。<dt><code><var>window</var>.<span id="dom-window-stop">stop</span>()</code><dd><p>ドキュメントの読み込みを中止する。</dl>

  


  <h5 id="accessing-other-browsing-contexts"><span class="secno">7.2.1.2</span> <code>Window</code>オブジェクトのインデックス付きアクセス<a href="#accessing-other-browsing-contexts" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>window</var>.<span id="dom-length">length</span></code><dd><p><a id="accessing-other-browsing-contexts:document-tree-child-navigables" href="document-sequences.html#document-tree-child-navigables">文書ツリーの子ナビゲート可能</a>の数を返す。<dt><code><var>window</var>[<var>index</var>]</code><dd><p>指定された<a href="document-sequences.html#document-tree-child-navigables" id="accessing-other-browsing-contexts:document-tree-child-navigables-2">文書ツリーの子ナビゲート可能</a>に対応する<code id="accessing-other-browsing-contexts:windowproxy"><a href="#windowproxy">WindowProxy</a></code>を返す。</dl>

  


  <h5 id="named-access-on-the-window-object"><span class="secno">7.2.1.3</span> <code>Window</code>オブジェクトの名前付きアクセス<a href="#named-access-on-the-window-object" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>window</var>[<var>name</var>]</code><dd><p>指示された要素または要素のコレクションを返す。</p>

    <p>一般的な規則として、これに依存することはもろいコードを導く。たとえば、新しい機能がウェブプラットフォームに加えられるように、いずれかのIDがこのAPIのマッピングで終わることは時間をかけて変化できる。この代わりに、<code>document.getElementById()</code>または<code>document.querySelector()</code>を使用する。</p>
   </dl>

  


  <h5 id="navigating-nested-browsing-contexts-in-the-dom"><span class="secno">7.2.1.4</span> 関連ウィンドウへのアクセス<a href="#navigating-nested-browsing-contexts-in-the-dom" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>window</var>.<span id="dom-top">top</span></code><dd><p><a id="navigating-nested-browsing-contexts-in-the-dom:top-level-traversable" href="document-sequences.html#top-level-traversable">トップレベルトラバーサル</a>の<code id="navigating-nested-browsing-contexts-in-the-dom:windowproxy"><a href="#windowproxy">WindowProxy</a></code>を返す。<dt><code><var>window</var>.<span id="dom-opener">opener</span> [ = <var>value</var> ]</code><dd><p><a id="navigating-nested-browsing-contexts-in-the-dom:opener-browsing-context" href="document-sequences.html#opener-browsing-context">オープナーブラウジングコンテキスト</a>に対する<code id="navigating-nested-browsing-contexts-in-the-dom:windowproxy-2"><a href="#windowproxy">WindowProxy</a></code>を返す。</p>

    <p>存在しないまたはnullが設定されている場合、nullを返す。</p>

    <p>nullに設定可能である。</p>
   <dt><code><var>window</var>.<span id="dom-parent">parent</span></code><dd><p><a href="document-sequences.html#nav-parent" id="navigating-nested-browsing-contexts-in-the-dom:nav-parent">親ナビゲート可能</a>に対する<code id="navigating-nested-browsing-contexts-in-the-dom:windowproxy-3"><a href="#windowproxy">WindowProxy</a></code>を返す。<dt><code><var>window</var>.<span id="dom-frameelement">frameElement</span></code><dd><p><a id="navigating-nested-browsing-contexts-in-the-dom:navigable-container" href="document-sequences.html#navigable-container">ナビゲート可能コンテナー</a>要素を返す。</p>

    <p>存在しない場合、生成元をまたいだ状況でnullを返す。</p>
   </dl>

  


  <h5 id="browser-interface-elements"><span class="secno">7.2.1.5</span> 歴史的なブラウザーインターフェイス要素API<a href="#browser-interface-elements" class="self-link"></a></h5>

  <p>歴史的な理由から、<code>Window</code>インターフェイスには、特定のウェブブラウザーインターフェイス要素の可視性を表すいくつかのプロパティがあった。</p>

  

  <p>プライバシーと相互運用性の理由から、ウィンドウがポップアップウィンドウを表しているかどうかに関係なく、これらのプロパティはすべて同じ値を返すようになった。</p>

  

  

  <dl class="domintro"><dt><code><var>window</var>.<span id="dom-window-locationbar">locationbar</span>.<span id="dom-barprop-visible">visible</span></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/BarProp/visible" title="The visible read-only property of the BarProp interface returns true if the user interface element it represents is visible.">BarProp/visible</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dt><code><var>window</var>.<span id="dom-window-menubar">menubar</span>.<a href="#dom-barprop-visible" id="browser-interface-elements:dom-barprop-visible">visible</a></code><dt><code><var>window</var>.<span id="dom-window-personalbar">personalbar</span>.<a href="#dom-barprop-visible" id="browser-interface-elements:dom-barprop-visible-2">visible</a></code><dt><code><var>window</var>.<span id="dom-window-scrollbars">scrollbars</span>.<a href="#dom-barprop-visible" id="browser-interface-elements:dom-barprop-visible-3">visible</a></code><dt><code><var>window</var>.<span id="dom-window-statusbar">statusbar</span>.<a href="#dom-barprop-visible" id="browser-interface-elements:dom-barprop-visible-4">visible</a></code><dt><code><var>window</var>.<span id="dom-window-toolbar">toolbar</span>.<a href="#dom-barprop-visible" id="browser-interface-elements:dom-barprop-visible-5">visible</a></code><dd><p><code>Window</code>がポップアップでない場合はtrueを返す。そうでなければfalseを返す。</dl>

  


  <h4 id="the-windowproxy-exotic-object"><span class="secno">7.2.2</span> <code id="the-windowproxy-exotic-object:windowproxy"><a href="#windowproxy">WindowProxy</a></code>外来オブジェクト<a href="#the-windowproxy-exotic-object" class="self-link"></a></h4>

  <p><dfn id="windowproxy" data-dfn-type="interface"><code>WindowProxy</code></dfn>は、<code>Window</code>の通常のオブジェクトをラップする外来オブジェクトであり、ほとんどの操作をラップされたオブジェクトに間接的に転送する。各<a id="the-windowproxy-exotic-object:browsing-context" href="document-sequences.html#browsing-context">ブラウジングコンテキスト</a>は、関連する<code id="the-windowproxy-exotic-object:windowproxy-2"><a href="#windowproxy">WindowProxy</a></code>オブジェクトを持つ。<a id="the-windowproxy-exotic-object:browsing-context-2" href="document-sequences.html#browsing-context">ブラウジングコンテキスト</a>が<a href="browsing-the-web.html#navigate" id="the-windowproxy-exotic-object:navigate">ナビゲートされる</a>とき、<a id="the-windowproxy-exotic-object:browsing-context-3" href="document-sequences.html#browsing-context">ブラウジングコンテキスト</a>の関連付けられた<code id="the-windowproxy-exotic-object:windowproxy-3"><a href="#windowproxy">WindowProxy</a></code>オブジェクトによってラップされた<code>Window</code>オブジェクトが変更される。</p>

  


  <h4 id="the-location-interface"><span class="secno">7.2.3</span> <code>Location</code>インターフェイス<a href="#the-location-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/location" title="The Document.location read-only property returns a Location object, which contains information about the URL of the document and provides methods for changing that URL and loading another URL.">Document/location</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Location" title="The Location interface represents the location (URL) of the object it is linked to. Changes done on it are reflected on the object it relates to. Both the Document and Window interface have such a linked Location, accessible via Document.location and Window.location respectively.">Location</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>3+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/location" title="The Window.location read-only property returns a Location object with information about the current location of the document.">Window/location</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  <p>各<code>Window</code>オブジェクトは、<code>Location</code>オブジェクトの一意なインスタンスに関連付けられており、<code>Window</code>オブジェクトの作成時に割り当てられる。</p>

  

  <dl class="domintro"><dt><code><var>document</var>.<span id="dom-document-location">location</span> [ = <var>value</var> ]</code><dt><code><var>window</var>.<span id="dom-location">location</span> [ = <var>value</var> ]</code><dd><p>現在のページの位置と<code>Location</code>オブジェクトを返す。</p>

    <p>別のページにナビゲートするために、設定可能である。</p>
   </dl>

  

  <p><code>Location</code>オブジェクトは、関連付けられた<code>Document</code>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="the-location-interface:the-document's-address" data-x-internal="the-document's-address">URL</a>の表現と、関連付けられた<a id="the-location-interface:navigable" href="document-sequences.html#navigable">ナビゲート可能</a>を<a href="browsing-the-web.html#navigate" id="the-location-interface:navigate">ナビゲート</a>および<a href="browsing-the-web.html#reload" id="the-location-interface:reload">リロードする</a>ためのメソッドを提供する。</p>

  

  <dl class="domintro"><dt><code><var>location</var>.<span>toString()</span></code><dt><code><var>location</var>.<span id="dom-location-href">href</span></code><dd><p><code>Location</code>オブジェクトのURLを返す。</p>

    <p>与えられたURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-origin">origin</span></code><dd><p><code>Location</code>オブジェクトの生成元を返す。<dt><code><var>location</var>.<span id="dom-location-protocol">protocol</span></code><dd><p><code>Location</code>オブジェクトのスキームを返す。</p>

    <p>変更されたスキームと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-host">host</span></code><dd><p><code>Location</code>オブジェクトのURLのホストとポートを返す（スキームのデフォルトポートと異なる場合）。</p>

    <p>変更されたホストおよびポートと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-hostname">hostname</span></code><dd><p><code>Location</code>オブジェクトのホストを返す。</p>

    <p>変更されたホストと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-port">port</span></code><dd><p><code>Location</code>オブジェクトのポートを返す。</p>

    <p>変更されたポートと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-pathname">pathname</span></code><dd><p><code>Location</code>オブジェクトのパスを返す。</p>

    <p>変更されたパスと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-search">search</span></code><dd><p><code>Location</code>オブジェクトのURLのクエリーを返す（空でない場合は先頭の"<code>?</code>"を含む）。</p>

    <p>（先頭の"<code>?</code>"を無視して）変更されたクエリーと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-hash">hash</span></code><dd><p><code>Location</code>オブジェクトのURLのフラグメントを返す（空でない場合は先頭の"<code>#</code>"を含む）。</p>

    <p>（先頭の"<code>#</code>"を無視して）変更されたフラグメントと同じURLにナビゲートするように、設定可能である。</p>
   <dt><code><var>location</var>.<span id="dom-location-assign">assign</span>(<var>url</var>)</code><dd><p>与えられたURLにナビゲートする。<dt><code><var>location</var>.<span id="dom-location-replace">replace</span>(<var>url</var>)</code><dd><p>セッション履歴から現在のページを削除し、与えられたURLにナビゲートする。<dt><code><var>location</var>.<span id="dom-location-reload">reload</span>()</code><dd><p>現在のページをリロードする。<dt><code><var>location</var>.<span id="dom-location-ancestororigins">ancestorOrigins</span></code><dd><p><a id="the-location-interface:ancestor-navigables" href="document-sequences.html#ancestor-navigables">祖先ナビゲート可能</a>の<a href="document-sequences.html#nav-document" id="the-location-interface:nav-document">アクティブな文書</a>の生成元を列挙する <code>DOMStringList</code>オブジェクトを返す。</p>
   </dl>

  


  <h4 id="the-history-interface"><span class="secno">7.2.4</span> <code>History</code>インターフェイス<a href="#the-history-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/History" title="The History interface allows manipulation of the browser session history, that is the pages visited in the tab or frame that the current page is loaded in.">History</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/history" title="The Window.history read-only property returns a reference to the History object, which provides an interface for manipulating the browser session history (pages visited in the tab or frame that the current page is loaded in).">Window/history</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  

  <dl class="domintro"><dt><code><span id="dom-history">history</span>.<span id="dom-history-length">length</span></code><dd><p>現在の<a id="the-history-interface:traversable-navigable" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の全体の<a href="document-sequences.html#tn-session-history-entries" id="the-history-interface:tn-session-history-entries">セッション履歴エントリー</a>の数を返す。<dt><code><a href="#dom-history" id="the-history-interface:dom-history">history</a>.<span id="dom-history-scroll-restoration">scrollRestoration</span></code><dd><p><a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry">アクティブなセッション履歴エントリー</a>の<a href="browsing-the-web.html#she-scroll-restoration-mode" id="the-history-interface:she-scroll-restoration-mode">スクロール復元モード</a>を返す。<dt><code><a href="#dom-history" id="the-history-interface:dom-history-2">history</a>.<a href="#dom-history-scroll-restoration" id="the-history-interface:dom-history-scroll-restoration">scrollRestoration</a> = <var>value</var></code><dd><p><a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry-2">アクティブなセッション履歴エントリー</a>の<a href="browsing-the-web.html#she-scroll-restoration-mode" id="the-history-interface:she-scroll-restoration-mode-2">スクロール復元モード</a>を<var>value</var>に設定する。<dt><code><a href="#dom-history" id="the-history-interface:dom-history-3">history</a>.<span id="dom-history-state">state</span></code><dd><p><a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry-3">アクティブなセッション履歴エントリー</a>の<a href="browsing-the-web.html#she-classic-history-api-state" id="the-history-interface:she-classic-history-api-state">クラシック履歴API状態</a>を、JavaScript値にデシリアライズして返す。<dt><code><a href="#dom-history" id="the-history-interface:dom-history-4">history</a>.<a href="#dom-history-go" id="the-history-interface:dom-history-go">go</a>()</code><dd><p>現在のページをリロードする。<dt><code><a href="#dom-history" id="the-history-interface:dom-history-5">history</a>.<span id="dom-history-go">go</span>(<var>delta</var>)</code><dd><p>現在の<a id="the-history-interface:traversable-navigable-2" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の全体の<a href="document-sequences.html#tn-session-history-entries" id="the-history-interface:tn-session-history-entries-2">セッション履歴エントリー</a>リストで、指定された数のステップを前後に移動する。</p>

    <p>ゼロ差分は、現在のページをリロードする。</p>

    <p>差分が範囲外の場合、何もしない。</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-6">history</a>.<span id="dom-history-back">back</span>()</code><dd><p>現在の<a id="the-history-interface:traversable-navigable-3" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の全体の<a href="document-sequences.html#tn-session-history-entries" id="the-history-interface:tn-session-history-entries-3">セッション履歴エントリー</a>リストで1ステップ戻る。</p>

    <p>前のページが存在しない場合、何もしない。</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-7">history</a>.<span id="dom-history-forward">forward</span>()</code><dd><p>現在の<a id="the-history-interface:traversable-navigable-4" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の全体の<a href="document-sequences.html#tn-session-history-entries" id="the-history-interface:tn-session-history-entries-4">セッション履歴エントリー</a>リストで1ステップ進める。</p>

    <p>次のページが存在しない場合、何もしない。</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-8">history</a>.<span id="dom-history-pushstate">pushState</span>(<var>data</var>, "")</code><dd><p><a href="browsing-the-web.html#she-classic-history-api-state" id="the-history-interface:she-classic-history-api-state-2">クラシック履歴API状態</a>を<var>データ</var>のシリアル化に設定して、セッション履歴に新しいエントリーを追加する。<a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry-4">アクティブな履歴エントリー</a>の<a href="browsing-the-web.html#she-url" id="the-history-interface:she-url">URL</a>がコピーされ、新しいエントリーのURLに使用される。</p>

    <p> （2番目のパラメーターは歴史的な理由で存在し、省略することはできない。空の文字列を渡すことは慣例的なものである。）</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-9">history</a>.<a href="#dom-history-pushstate" id="the-history-interface:dom-history-pushstate">pushState</a>(<var>data</var>, "", <var>url</var>)</code><dd><p><a href="browsing-the-web.html#she-classic-history-api-state" id="the-history-interface:she-classic-history-api-state-3">クラシック履歴API状態</a>を<var>データ</var>のシリアル化に設定し、 <a href="browsing-the-web.html#she-url" id="the-history-interface:she-url-2">URL</a>を<var>url</var>に設定して、セッション履歴に新しいエントリーを追加する。</p>

    <p>現在の<code>Document</code>がURLを<var>url</var>に<a href="#can-have-its-url-rewritten" id="the-history-interface:can-have-its-url-rewritten">書き換えることができない</a>場合、<a id="the-history-interface:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="the-history-interface:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>が投げられる。</p>

    <p> （2番目のパラメーターは歴史的な理由で存在し、省略することはできない。空の文字列を渡すことは慣例的なものである。）</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-10">history</a>.<span id="dom-history-replacestate">replaceState</span>(<var>data</var>, "")</code><dd><p><a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry-5">アクティブセッション履歴エントリー</a>の<a href="browsing-the-web.html#she-classic-history-api-state" id="the-history-interface:she-classic-history-api-state-4">クラシック履歴API状態</a>を、 <var>データ</var>の構造化クローンに更新する。</p>

    <p> （2番目のパラメーターは歴史的な理由で存在し、省略することはできない。空の文字列を渡すことは慣例的なものである。）</p>
   <dt><code><a href="#dom-history" id="the-history-interface:dom-history-11">history</a>.<a href="#dom-history-replacestate" id="the-history-interface:dom-history-replacestate">replaceState</a>(<var>data</var>, "", <var>url</var>)</code><dd><p><a href="document-sequences.html#nav-active-history-entry" id="the-history-interface:nav-active-history-entry-6">アクティブなセッション履歴エントリー</a>の<a href="browsing-the-web.html#she-classic-history-api-state" id="the-history-interface:she-classic-history-api-state-5">クラシック履歴API状態</a>を <var>データ</var>の構造化クローンに更新し、その<a href="browsing-the-web.html#she-url" id="the-history-interface:she-url-3">URL</a>を<var>url</var>に更新する。</p>

    <p>現在の<code>Document</code>がURLを<var>url</var>に<a href="#can-have-its-url-rewritten" id="the-history-interface:can-have-its-url-rewritten-2">書き換えることができない</a>場合、<a id="the-history-interface:securityerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="the-history-interface:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>が投げられる。</p>

    <p> （2番目のパラメーターは歴史的な理由で存在し、省略することはできない。空の文字列を渡すことは慣例的なものである。）</p>
   </dl>

  

  <div class="example"><table><thead><tr><th><var>document</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="the-history-interface:the-document's-address" data-x-internal="the-document's-address">URL</a><th><var>targetURL</var><th><span id="can-have-its-url-rewritten">can have its URL rewritten</span><tbody><tr><td><code>https://example.com/home</code><td><code>https://example.com/home#about</code><td>✅<tr><td><code>https://example.com/home</code><td><code>https://example.com/home?page=shop</code><td>✅<tr><td><code>https://example.com/home</code><td><code>https://example.com/shop</code><td>✅<tr><td><code>https://example.com/home</code><td><code>https://user:pass@example.com/home</code><td>❌<tr><td><code>https://example.com/home</code><td><code>http://example.com/home</code><td>❌<tr><td><code>file:///path/to/x</code><td><code>file:///path/to/x#hash</code><td>✅<tr><td><code>file:///path/to/x</code><td><code>file:///path/to/x?search</code><td>✅<tr><td><code>file:///path/to/x</code><td><code>file:///path/to/y</code><td>❌<tr><td><code>about:blank</code><td><code>about:blank#hash</code><td>✅<tr><td><code>about:blank</code><td><code>about:blank?search</code><td>❌<tr><td><code>about:blank</code><td><code>about:srcdoc</code><td>❌<tr><td><code>data:text/html,foo</code><td><code>data:text/html,foo#hash</code><td>✅<tr><td><code>data:text/html,foo</code><td><code>data:text/html,foo?search</code><td>❌<tr><td><code>data:text/html,foo</code><td><code>data:text/html,bar</code><td>❌<tr><td><code>data:text/html,foo</code><td><code>data:bar</code><td>❌<tr><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43</code><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43#hash</code><td>✅<tr><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43</code><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43?search</code><td>❌<tr><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43</code><td><code>blob:https://example.com/anything</code><td>❌<tr><td><code>blob:https://example.com/77becafe-657b-4fdc-8bd3-e83aaa5e8f43</code><td><code>blob:path</code><td>❌</table>

   <p><code>Document</code>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="the-history-interface:the-document's-address-2" data-x-internal="the-document's-address">URL</a>のみが重要であり、その<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="the-history-interface:concept-document-origin" data-x-internal="concept-document-origin">生成元</a>は重要ではないことに注意する。継承された生成元をもつ<code id="the-history-interface:about:blank"><a href="infrastructure.html#about:blank">about:blank</a></code> <code>Document</code>、サンフォボックス<code id="the-history-interface:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>、または<code id="the-history-interface:dom-document-domain"><a href="browsers.html#dom-document-domain">document.domain</a></code>セッターが使用されている場合のように、これらが一致しないことがある。</p>
  </div>

  <div class="example"><p>ユーザーはいくつかの座標に常にあり、ユーザーが後で再開するための特定の座標に対応するページをブックマークできるような、ユーザーがラインに沿って移動できるゲームを考える。</p>

   <p>そのようなゲームでx=5位置を実装する静的ページは次のようになる：</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE HTML></c->
<c- c>&lt;!-- this is https://example.com/line?x=5 --></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->Line Game - 5<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->You are at coordinate 5 on the line.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=6"</c-><c- p>></c->Advance to 6<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> or
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=4"</c-><c- p>></c->retreat to 4<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->?
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>このようなシステムの問題点は、毎回ユーザーがクリックするとページ全体をリロードする必要があることにある。ここで、代わりにスクリプトを使用して、リロードを行うための別の方法：</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE HTML></c->
<c- c>&lt;!-- this starts off as https://example.com/line?x=5 --></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->Line Game - 5<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->You are at coordinate <c- p>&lt;</c-><c- f>span</c-> <c- e>id</c-><c- o>=</c-><c- s>"coord"</c-><c- p>></c->5<c- p>&lt;/</c-><c- f>span</c-><c- p>></c-> on the line.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=6"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"go(1); return false;"</c-><c- p>></c->Advance to 6<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> or
 <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?x=4"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"go(-1); return false;"</c-><c- p>></c->retreat to 4<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->?
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>var</c-> currentPage <c- o>=</c-> <c- mf>5</c-><c- p>;</c-> <c- c1>// prefilled by server</c->
 <c- a>function</c-> go<c- p>(</c->d<c- p>)</c-> <c- p>{</c->
   setupPage<c- p>(</c->currentPage <c- o>+</c-> d<c- p>);</c->
   history<c- p>.</c->pushState<c- p>(</c->currentPage<c- p>,</c-> <c- u>""</c-><c- p>,</c-> <c- t>'?x='</c-> <c- o>+</c-> currentPage<c- p>);</c->
 <c- p>}</c->
 onpopstate <c- o>=</c-> <c- a>function</c-><c- p>(</c->event<c- p>)</c-> <c- p>{</c->
   setupPage<c- p>(</c->event<c- p>.</c->state<c- p>);</c->
 <c- p>}</c->
 <c- a>function</c-> setupPage<c- p>(</c->page<c- p>)</c-> <c- p>{</c->
   currentPage <c- o>=</c-> page<c- p>;</c->
   document<c- p>.</c->title <c- o>=</c-> <c- t>'Line Game - '</c-> <c- o>+</c-> currentPage<c- p>;</c->
   document<c- p>.</c->getElementById<c- p>(</c-><c- t>'coord'</c-><c- p>).</c->textContent <c- o>=</c-> currentPage<c- p>;</c->
   document<c- p>.</c->links<c- p>[</c-><c- mf>0</c-><c- p>].</c->href <c- o>=</c-> <c- t>'?x='</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>+</c-><c- mf>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mf>0</c-><c- p>].</c->textContent <c- o>=</c-> <c- t>'Advance to '</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>+</c-><c- mf>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mf>1</c-><c- p>].</c->href <c- o>=</c-> <c- t>'?x='</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>-</c-><c- mf>1</c-><c- p>);</c->
   document<c- p>.</c->links<c- p>[</c-><c- mf>1</c-><c- p>].</c->textContent <c- o>=</c-> <c- t>'retreat to '</c-> <c- o>+</c-> <c- p>(</c->currentPage<c- o>-</c-><c- mf>1</c-><c- p>);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>スクリプトをもたないシステムにおいて、前の例と同じように動作する。しかし、同じ体験に対するネットワークアクセスが存在しないので、スクリプトをサポート<em>する</em>ユーザーは現在はるかに速く移動できる。さらに、経験に反して、ユーザーは単にナイーブなスクリプトベースのアプローチ、ブックマーク、およびセッション履歴の移動が依然として動作する必要がある。</p>

   <p>上記の例において、<code id="the-history-interface:dom-history-pushstate-2"><a href="#dom-history-pushstate">pushState()</a></code>メソッドへの<var>data</var>引数は、サーバーに送信されるものと同じ情報であるが、スクリプトはURLにユーザーが移動するたびに解析する必要はないので、より便利な形式となる。</p>

  </div>

  <div class="example"><p>ほとんどのアプリケーションは、すべての履歴エントリーに同じ<a id="the-history-interface:scroll-restoration-mode" href="browsing-the-web.html#scroll-restoration-mode">スクロール復元モード</a>値を使用したいと考えている。これを実現するために、できるだけ早く<code id="the-history-interface:dom-history-scroll-restoration-2"><a href="#dom-history-scroll-restoration">scrollRestoration</a></code>属性を設定して（たとえば、文書の<code id="the-history-interface:the-head-element"><a href="semantics.html#the-head-element">head</a></code>要素の最初の<code id="the-history-interface:the-script-element"><a href="scripting.html#the-script-element">script</a></code>要素で）、履歴セッションに追加されたエントリーが確実に希望のスクロール復元モードになるようにする。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>head</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
       <c- k>if</c-> <c- p>(</c-><c- t>'scrollRestoration'</c-> <c- k>in</c-> history<c- p>)</c->
            history<c- p>.</c->scrollRestoration <c- o>=</c-> <c- t>'manual'</c-><c- p>;</c->
  <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>head</c-><c- p>></c->
   </code></pre>
  </div>


  <h4 id="navigation-api"><span class="secno">7.2.5</span> The navigation API<a href="#navigation-api" class="self-link"></a></h4>

  <h5 id="navigation-api-intro"><span class="secno">7.2.5.1</span> Introduction<a href="#navigation-api-intro" class="self-link"></a></h5>

  

  <p>The navigation API, provided by the global <code>navigation</code> property, provides a modern and web application-focused way of managing navigations and history entries. It is a successor to the classic <code id="navigation-api-intro:dom-location"><a href="#dom-location">location</a></code> and <code id="navigation-api-intro:dom-history"><a href="#dom-history">history</a></code> APIs.</p>

  <p>One ability the API provides is inspecting <a href="browsing-the-web.html#session-history-entry" id="navigation-api-intro:session-history-entry">session history entries</a>. For example, the following will display the entries' URLs in an ordered list:</p>

  <pre><code class='js'><c- a>const</c-> ol <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"ol"</c-><c- p>);</c->
ol<c- p>.</c->start <c- o>=</c-> <c- mf>0</c-><c- p>;</c-> <c- c1>// so that the list items' ordinal values match up with the entry indices</c->

<c- k>for</c-> <c- p>(</c-><c- a>const</c-> entry <c- k>of</c-> navigation<c- p>.</c->entries<c- p>())</c-> <c- p>{</c->
  <c- a>const</c-> li <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"li"</c-><c- p>);</c->

  <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->index <c- o>&lt;</c-> navigation<c- p>.</c->currentEntry<c- p>.</c->index<c- p>)</c-> <c- p>{</c->
    li<c- p>.</c->className <c- o>=</c-> <c- u>"backward"</c-><c- p>;</c->
  <c- p>}</c-> <c- k>else</c-> <c- k>if</c-> <c- p>(</c->entry<c- p>.</c->index <c- o>></c-> navigation<c- p>.</c->currentEntry<c- p>.</c->index<c- p>)</c-> <c- p>{</c->
    li<c- p>.</c->className <c- o>=</c-> <c- u>"forward"</c-><c- p>;</c->
  <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
    li<c- p>.</c->className <c- o>=</c-> <c- u>"current"</c-><c- p>;</c->
  <c- p>}</c->

  li<c- p>.</c->textContent <c- o>=</c-> entry<c- p>.</c->url<c- p>;</c->
  ol<c- p>.</c->append<c- p>(</c->li<c- p>);</c->
<c- p>}</c-></code></pre>

  <p>The <code id="navigation-api-intro:dom-navigation-entries"><a href="#dom-navigation-entries">navigation.entries()</a></code> array contains <code>NavigationHistoryEntry</code> instances, which have other useful properties in addition to the <code id="navigation-api-intro:dom-navigationhistoryentry-url"><a href="#dom-navigationhistoryentry-url">url</a></code> and <code id="navigation-api-intro:dom-navigationhistoryentry-index"><a href="#dom-navigationhistoryentry-index">index</a></code> properties shown here. Note that the array only contains <code>NavigationHistoryEntry</code> objects that represent the current <a id="navigation-api-intro:navigable" href="document-sequences.html#navigable">navigable</a>, and thus its contents are not impacted by navigations inside <a href="document-sequences.html#navigable-container" id="navigation-api-intro:navigable-container">navigable containers</a> such as <code id="navigation-api-intro:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>s, or by navigations of the <a href="document-sequences.html#nav-parent" id="navigation-api-intro:nav-parent">parent navigable</a> in cases where the navigation API is itself being used inside an <code id="navigation-api-intro:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>. Additionally, it only contains <code>NavigationHistoryEntry</code> objects representing same-<a id="navigation-api-intro:concept-origin" href="browsers.html#concept-origin">origin</a> <a href="browsing-the-web.html#session-history-entry" id="navigation-api-intro:session-history-entry-2">session history entries</a>, meaning that if the user has visited other origins before or after the current one, there will not be corresponding <code>NavigationHistoryEntry</code>s.</p>

  <hr>

  <p>The navigation API can also be used to navigate, reload, or traverse through the history:</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>button</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"navigation.reload()"</c-><c- p>></c->Reload<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->

<c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"url"</c-> <c- e>id</c-><c- o>=</c-><c- s>"navigationURL"</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"navigation.navigate(navigationURL.value)"</c-><c- p>></c->Navigate<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->

<c- p>&lt;</c-><c- f>button</c-> <c- e>id</c-><c- o>=</c-><c- s>"backButton"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"navigation.back()"</c-><c- p>></c->Back<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>id</c-><c- o>=</c-><c- s>"forwardButton"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"navigation.forward()"</c-><c- p>></c->Forward<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->

<c- p>&lt;</c-><c- f>select</c-> <c- e>id</c-><c- o>=</c-><c- s>"traversalDestinations"</c-><c- p>>&lt;/</c-><c- f>select</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>id</c-><c- o>=</c-><c- s>"goButton"</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"navigation.traverseTo(traversalDestinations.value)"</c-><c- p>></c->Traverse To<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->

<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
backButton<c- p>.</c->disabled <c- o>=</c-> <c- o>!</c->navigation<c- p>.</c->canGoBack<c- p>;</c->
forwardButton<c- p>.</c->disabled <c- o>=</c-> <c- o>!</c->navigation<c- p>.</c->canGoForward<c- p>;</c->

<c- k>for</c-> <c- p>(</c-><c- a>const</c-> entry <c- k>of</c-> navigation<c- p>.</c->entries<c- p>())</c-> <c- p>{</c->
  traversalDestinations<c- p>.</c->append<c- p>(</c-><c- k>new</c-> Option<c- p>(</c->entry<c- p>.</c->url<c- p>,</c-> entry<c- p>.</c->key<c- p>));</c->
<c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  <p>Note that traversals are again limited to same-<a id="navigation-api-intro:concept-origin-2" href="browsers.html#concept-origin">origin</a> destinations, meaning that, for example, <code id="navigation-api-intro:dom-navigation-cangoback"><a href="#dom-navigation-cangoback">navigation.canGoBack</a></code> will be false if the previous <a id="navigation-api-intro:session-history-entry-3" href="browsing-the-web.html#session-history-entry">session history entry</a> is for a page from another origin.</p>

  <hr>

  <p>The most powerful part of the navigation API is the <code id="navigation-api-intro:event-navigate"><a href="indices.html#event-navigate">navigate</a></code> event, which fires whenever almost any navigation or traversal occurs in the current <a id="navigation-api-intro:navigable-2" href="document-sequences.html#navigable">navigable</a>:</p>

  <pre><code class='js'>navigation<c- p>.</c->onnavigate <c- o>=</c-> event <c- p>=></c-> <c- p>{</c->
  console<c- p>.</c->log<c- p>(</c->event<c- p>.</c->navigationType<c- p>);</c-> <c- c1>// "push", "replace", "reload", or "traverse"</c->
  console<c- p>.</c->log<c- p>(</c->event<c- p>.</c->destination<c- p>.</c->url<c- p>);</c->
  console<c- p>.</c->log<c- p>(</c->event<c- p>.</c->userInitiated<c- p>);</c->
  <c- c1>// ... and </c-><a href='#the-navigateevent-interface'><c- c1>other useful properties</c-></a>
<c- p>};</c-></code></pre>

  <p>(The event will not fire for <a href="document-lifecycle.html#nav-traversal-ui">location bar-initiated navigations</a>, or navigations initiated from other windows, when the destination of the navigation is a new document.)</p>

  <p>Much of the time, the event's <code id="navigation-api-intro:dom-event-cancelable"><a data-x-internal="dom-event-cancelable" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-cancelable">cancelable</a></code> property will be true, meaning this event can be canceled using <code id="navigation-api-intro:dom-event-preventdefault"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code>:</p>

  <pre><code class='js'>navigation<c- p>.</c->onnavigate <c- o>=</c-> event <c- p>=></c-> <c- p>{</c->
  <c- k>if</c-> <c- p>(</c->event<c- p>.</c->cancelable <c- o>&amp;&amp;</c-> isDisallowedURL<c- p>(</c->event<c- p>.</c->destination<c- p>.</c->url<c- p>))</c-> <c- p>{</c->
    alert<c- p>(</c-><c- sb>`Please don't go to </c-><c- si>${</c->event<c- p>.</c->destination<c- p>.</c->url<c- si>}</c-><c- sb>!`</c-><c- p>);</c->
    event<c- p>.</c->preventDefault<c- p>();</c->
  <c- p>}</c->
<c- p>};</c->
</code></pre>

  <p>The <code id="navigation-api-intro:dom-event-cancelable-2"><a data-x-internal="dom-event-cancelable" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-cancelable">cancelable</a></code> property will be false for some "<code id="navigation-api-intro:dom-navigationtype-traverse"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigations, such as those taking place inside <a href="document-sequences.html#child-navigable" id="navigation-api-intro:child-navigable">child navigables</a>, those crossing to new origins, or when the user attempts to traverse again shortly after a previous call to <code id="navigation-api-intro:dom-event-preventdefault-2"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code> prevented them from doing so.</p>

  <p>The <code>NavigateEvent</code>'s <code id="navigation-api-intro:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">intercept()</a></code> method allows intercepting a navigation and converting it into a same-document navigation:</p>

  <pre><code class='js'>navigation<c- p>.</c->addEventListener<c- p>(</c-><c- u>"navigate"</c-><c- p>,</c-> e <c- p>=></c-> <c- p>{</c->
  <c- c1>// Some navigations, e.g. cross-origin navigations, we cannot intercept.</c->
  <c- c1>// Let the browser handle those normally.</c->
  <c- k>if</c-> <c- p>(</c-><c- o>!</c->e<c- p>.</c->canIntercept<c- p>)</c-> <c- p>{</c->
    <c- k>return</c-><c- p>;</c->
  <c- p>}</c->

  <c- c1>// Similarly, don't intercept fragment navigations or downloads.</c->
  <c- k>if</c-> <c- p>(</c->e<c- p>.</c->hashChange <c- o>||</c-> e<c- p>.</c->downloadRequest <c- o>!==</c-> <c- kc>null</c-><c- p>)</c-> <c- p>{</c->
    <c- k>return</c-><c- p>;</c->
  <c- p>}</c->

  <c- a>const</c-> url <c- o>=</c-> <c- k>new</c-> URL<c- p>(</c->event<c- p>.</c->destination<c- p>.</c->url<c- p>);</c->

  <c- k>if</c-> <c- p>(</c->url<c- p>.</c->pathname<c- p>.</c->startsWith<c- p>(</c-><c- u>"/articles/"</c-><c- p>))</c-> <c- p>{</c->
    e<c- p>.</c->intercept<c- p>({</c->
      <c- k>async</c-> handler<c- p>()</c-> <c- p>{</c->
        <c- c1>// The URL has already changed, so show a placeholder while</c->
        <c- c1>// fetching the new content, such as a spinner or loading page.</c->
        renderArticlePagePlaceholder<c- p>();</c->

        <c- c1>// Fetch the new content and display when ready.</c->
        <c- a>const</c-> articleContent <c- o>=</c-> <c- k>await</c-> getArticleContent<c- p>(</c->url<c- p>.</c->pathname<c- p>,</c-> <c- p>{</c-> signal<c- o>:</c-> e<c- p>.</c->signal <c- p>});</c->
        renderArticlePage<c- p>(</c->articleContent<c- p>);</c->
      <c- p>}</c->
    <c- p>});</c->
  <c- p>}</c->
<c- p>});</c-></code></pre>

  <p>Note that the <code id="navigation-api-intro:dom-navigationinterceptoptions-handler"><a href="#dom-navigationinterceptoptions-handler">handler</a></code> function can return a promise to represent the asynchronous progress, and success or failure, of the navigation. While the promise is still pending, browser UI can treat the navigation as ongoing (e.g., by presenting a loading spinner). Other parts of the navigation API are also sensitive to these promises, such as the return value of <code id="navigation-api-intro:dom-navigation-navigate"><a href="#dom-navigation-navigate">navigation.navigate()</a></code>:<pre><code class='js'><c- a>const</c-> <c- p>{</c-> committed<c- p>,</c-> finished <c- p>}</c-> <c- o>=</c-> <c- k>await</c-> navigation<c- p>.</c->navigate<c- p>(</c-><c- u>"/articles/the-navigation-api-is-cool"</c-><c- p>);</c->

<c- c1>// The committed promise will fulfill once the URL has changed, which happens</c->
<c- c1>// immediately (as long as the NavigateEvent wasn't canceled).</c->
<c- k>await</c-> committed<c- p>;</c->

<c- c1>// The finished promise will fulfill once the Promise returned by handler() has</c->
<c- c1>// fulfilled, which happens once the article is downloaded and rendered. (Or,</c->
<c- c1>// it will reject, if handler() fails along the way).</c->
<c- k>await</c-> finished<c- p>;</c-></code></pre>

  <h5 id="navigation-interface"><span class="secno">7.2.5.2</span> The <code>Navigation</code> interface<a href="#navigation-interface" class="self-link"></a></h5>

  

  <p>The following are the <a id="navigation-interface:event-handlers" href="webappapis.html#event-handlers">event handlers</a> (and their corresponding <span>event handler event types</span>) supported, as <a id="navigation-interface:event-handler-idl-attributes" href="webappapis.html#event-handler-idl-attributes">event handler IDL attributes</a>, by all objects implementing the <code>Navigation</code> interface:</p>

  <table><thead><tr><th><a href="webappapis.html#event-handlers" id="navigation-interface:event-handlers-2">イベントハンドラー</a><th><span>イベントハンドラーイベント型</span><tbody><tr><td><dfn data-dfn-for="Navigation" id="handler-navigation-onnavigate" data-dfn-type="attribute"><code>onnavigate</code></dfn><td><code id="navigation-interface:event-navigate"><a href="indices.html#event-navigate">navigate</a></code><tr><td><dfn data-dfn-for="Navigation" id="handler-navigation-onnavigatesuccess" data-dfn-type="attribute"><code>onnavigatesuccess</code></dfn><td><code id="navigation-interface:event-navigatesuccess"><a href="indices.html#event-navigatesuccess">navigatesuccess</a></code><tr><td><dfn data-dfn-for="Navigation" id="handler-navigation-onnavigateerror" data-dfn-type="attribute"><code>onnavigateerror</code></dfn><td><code id="navigation-interface:event-navigateerror"><a href="indices.html#event-navigateerror">navigateerror</a></code><tr><td><dfn data-dfn-for="Navigation" id="handler-navigation-oncurrententrychange" data-dfn-type="attribute"><code>oncurrententrychange</code></dfn><td><code id="navigation-interface:event-currententrychange"><a href="indices.html#event-currententrychange">currententrychange</a></code></table>

  <h5 id="navigation-api-core"><span class="secno">7.2.5.3</span> Core infrastructure<a href="#navigation-api-core" class="self-link"></a></h5>

  

  <p>A key type used throughout the navigation API is the <code>NavigationType</code> enumeration:</p>

  

  <p>This captures the main web developer-visible types of "navigations", which (as <a href="browsing-the-web.html#note-meaning-of-navigate">noted elsewhere</a>) do not exactly correspond to this standard's singular <a id="navigation-api-core:navigate" href="browsing-the-web.html#navigate">navigate</a> algorithm. The meaning of each value is the following:</p>

  <dl><dt>"<dfn data-dfn-for="NavigationType" id="dom-navigationtype-push" data-dfn-type="enum-value"><code>push</code></dfn>"<dd>Corresponds to calls to <a id="navigation-api-core:navigate-2" href="browsing-the-web.html#navigate">navigate</a> where the <a id="navigation-api-core:history-handling-behavior" href="browsing-the-web.html#history-handling-behavior">history handling behavior</a> ends up as "<code id="navigation-api-core:navigationhistorybehavior-push"><a href="browsing-the-web.html#navigationhistorybehavior-push">push</a></code>", or to <code id="navigation-api-core:dom-history-pushstate"><a href="#dom-history-pushstate">history.pushState()</a></code>.<dt>"<dfn data-dfn-for="NavigationType" id="dom-navigationtype-replace" data-dfn-type="enum-value"><code>replace</code></dfn>"<dd>Corresponds to calls to <a id="navigation-api-core:navigate-3" href="browsing-the-web.html#navigate">navigate</a> where the <a id="navigation-api-core:history-handling-behavior-2" href="browsing-the-web.html#history-handling-behavior">history handling behavior</a> ends up as "<code id="navigation-api-core:navigationhistorybehavior-replace-2"><a href="browsing-the-web.html#navigationhistorybehavior-replace-2">replace</a></code>", or to <code id="navigation-api-core:dom-history-pushstate-2"><a href="#dom-history-pushstate">history.replaceState()</a></code>.<dt>"<dfn data-dfn-for="NavigationType" id="dom-navigationtype-reload" data-dfn-type="enum-value"><code>reload</code></dfn>"<dd>Corresponds to calls to <a id="navigation-api-core:reload" href="browsing-the-web.html#reload">reload</a>.<dt>"<dfn data-dfn-for="NavigationType" id="dom-navigationtype-traverse" data-dfn-type="enum-value"><code>traverse</code></dfn>"<dd>Corresponds to calls to <a id="navigation-api-core:traverse-the-history-by-a-delta" href="browsing-the-web.html#traverse-the-history-by-a-delta">traverse the history by a delta</a>.</dl>

  


  <h5 id="the-navigationhistoryentry-interface"><span class="secno">7.2.5.4</span> The <code>NavigationHistoryEntry</code> interface<a href="#the-navigationhistoryentry-interface" class="self-link"></a></h5>

  

  <dl class="domintro"><dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-url">url</span></code><dd><p>The URL of this navigation history entry.</p>

    <p>This can return null if the entry corresponds to a different <code>Document</code> than the current one (i.e., if <code id="the-navigationhistoryentry-interface:dom-navigationhistoryentry-samedocument"><a href="#dom-navigationhistoryentry-samedocument">sameDocument</a></code> is false), and that <code>Document</code> was fetched with a <a id="the-navigationhistoryentry-interface:referrer-policy" href="https://triple-underscore.github.io/webappsec-referrer-policy-ja.html#referrer-policy" data-x-internal="referrer-policy">referrer policy</a> of "<code>no-referrer</code>" or "<code>origin</code>", since that indicates the <code>Document</code> in question is hiding its URL even from other same-origin pages.</p>
   <dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-key">key</span></code><dd><p>A user agent-generated random UUID string representing this navigation history entry's place in the navigation history list. This value will be reused by other <code>NavigationHistoryEntry</code> instances that replace this one due to "<code id="the-navigationhistoryentry-interface:dom-navigationtype-replace"><a href="#dom-navigationtype-replace">replace</a></code>" navigations, and will survive reloads and session restores.</p>

    <p>This is useful for navigating back to this entry in the navigation history list, using <code id="the-navigationhistoryentry-interface:dom-navigation-traverseto"><a href="#dom-navigation-traverseto">navigation.traverseTo(key)</a></code>.</p>
   <dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-id">id</span></code><dd><p>A user agent-generated random UUID string representing this specific navigation history entry. This value will <em>not</em> be reused by other <code>NavigationHistoryEntry</code> instances. This value will survive reloads and session restores.</p>

    <p>This is useful for associating data with this navigation history entry using other storage APIs.</p>
   <dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-index">index</span></code><dd><p>The index of this <code>NavigationHistoryEntry</code> within <code id="the-navigationhistoryentry-interface:dom-navigation-entries"><a href="#dom-navigation-entries">navigation.entries()</a></code>, or −1 if the entry is not in the navigation history entry list.<dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-samedocument">sameDocument</span></code><dd><p>Indicates whether or not this navigation history entry is for the same <code>Document</code> as the current one, or not. This will be true, for example, when the entry represents a fragment navigation or single-page app navigation.<dt><code><var>entry</var>.<span id="dom-navigationhistoryentry-getstate">getState</span>()</code><dd><p>Returns the <span>deserialization</span> of the state stored in this entry, which was added to the entry using <code id="the-navigationhistoryentry-interface:dom-navigation-navigate"><a href="#dom-navigation-navigate">navigation.navigate()</a></code> or <code id="the-navigationhistoryentry-interface:dom-navigation-updatecurrententry"><a href="#dom-navigation-updatecurrententry">navigation.updateCurrentEntry()</a></code>. This state survives reloads and session restores.</p>

    <p>Note that in general, unless the state value is a primitive, <code class="js">entry.getState() !== entry.getState()</code>, since a fresh deserialization is returned each time.</p>

    <p>This state is unrelated to the classic history API's <code id="the-navigationhistoryentry-interface:dom-history-state"><a href="#dom-history-state">history.state</a></code>.</p>
   </dl>

  

  <p>The following are the <a id="the-navigationhistoryentry-interface:event-handlers" href="webappapis.html#event-handlers">event handlers</a> (and their corresponding <span>event handler event types</span>) supported, as <a id="the-navigationhistoryentry-interface:event-handler-idl-attributes" href="webappapis.html#event-handler-idl-attributes">event handler IDL attributes</a>, by all objects implementing the <code>NavigationHistoryEntry</code> interface:</p>

  <table><thead><tr><th><a href="webappapis.html#event-handlers" id="the-navigationhistoryentry-interface:event-handlers-2">イベントハンドラー</a><th><span>イベントハンドラーイベント型</span><tbody><tr><td><dfn data-dfn-for="NavigationHistoryEntry" id="handler-navigationhistoryentry-ondispose" data-dfn-type="attribute"><code>ondispose</code></dfn><td><code id="the-navigationhistoryentry-interface:event-dispose"><a href="indices.html#event-dispose">dispose</a></code></table>


  <h5 id="the-history-entry-list"><span class="secno">7.2.5.5</span> The history entry list<a href="#the-history-entry-list" class="self-link"></a></h5>

  <dl class="domintro"><dt><code><var>entries</var> = <span>navigation</span>.<span id="dom-navigation-entries">entries()</span></code><dd><p>Returns an array of <code>NavigationHistoryEntry</code> instances represent the current navigation history entry list, i.e., all <a href="browsing-the-web.html#session-history-entry" id="the-history-entry-list:session-history-entry">session history entries</a> for this <a id="the-history-entry-list:navigable" href="document-sequences.html#navigable">navigable</a> that are <a id="the-history-entry-list:same-origin" href="browsers.html#same-origin">same origin</a> and contiguous to the <a href="document-sequences.html#nav-current-history-entry" id="the-history-entry-list:nav-current-history-entry">current session history entry</a>.</p>

   <dt><code><span>navigation</span>.<span id="dom-navigation-currententry">currentEntry</span></code><dd><p>Returns the <code>NavigationHistoryEntry</code> corresponding to the <a href="document-sequences.html#nav-current-history-entry" id="the-history-entry-list:nav-current-history-entry-2">current session history entry</a>.</p>

   <dt><code><span>navigation</span>.<span id="dom-navigation-updatecurrententry">updateCurrentEntry</span>({ <span>state</span> })</code><dd><p>Updates the <a href="browsing-the-web.html#she-navigation-api-state" id="the-history-entry-list:she-navigation-api-state">navigation API state</a> of the <a href="document-sequences.html#nav-current-history-entry" id="the-history-entry-list:nav-current-history-entry-3">current session history entry</a>, without performing a navigation like <code id="the-history-entry-list:dom-navigation-reload"><a href="#dom-navigation-reload">navigation.reload()</a></code> would do.</p>

    <p>This method is best used to capture updates to the page that have already happened, and need to be reflected into the navigation API state. For cases where the state update is meant to drive a page update, instead use <code id="the-history-entry-list:dom-navigation-navigate"><a href="#dom-navigation-navigate">navigation.navigate()</a></code> or <code id="the-history-entry-list:dom-navigation-reload-2"><a href="#dom-navigation-reload">navigation.reload()</a></code>, which will trigger a <code id="the-history-entry-list:event-navigate"><a href="indices.html#event-navigate">navigate</a></code> event.</p>
   <dt><code><span>navigation</span>.<span id="dom-navigation-cangoback">canGoBack</span></code><dd><p>Returns true if the current <a href="document-sequences.html#nav-current-history-entry" id="the-history-entry-list:nav-current-history-entry-4">current session history entry</a> (i.e., <code id="the-history-entry-list:dom-navigation-currententry"><a href="#dom-navigation-currententry">currentEntry</a></code>) is not the first one in the navigation history entry list (i.e., in <code id="the-history-entry-list:dom-navigation-entries"><a href="#dom-navigation-entries">entries()</a></code>). This means that there is a previous <a id="the-history-entry-list:session-history-entry-2" href="browsing-the-web.html#session-history-entry">session history entry</a> for this <a id="the-history-entry-list:navigable-2" href="document-sequences.html#navigable">navigable</a>, and its <a href="browsing-the-web.html#she-document-state" id="the-history-entry-list:she-document-state">document state</a>'s <a href="browsing-the-web.html#document-state-origin" id="the-history-entry-list:document-state-origin">origin</a> is <a id="the-history-entry-list:same-origin-2" href="browsers.html#same-origin">same origin</a> with the current <code>Document</code>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="the-history-entry-list:concept-document-origin" data-x-internal="concept-document-origin">origin</a>.</p>

   <dt><code><span>navigation</span>.<span id="dom-navigation-cangoforward">canGoForward</span></code><dd><p>Returns true if the current <a href="document-sequences.html#nav-current-history-entry" id="the-history-entry-list:nav-current-history-entry-5">current session history entry</a> (i.e., <code id="the-history-entry-list:dom-navigation-currententry-2"><a href="#dom-navigation-currententry">currentEntry</a></code>) is not the last one in the navigation history entry list (i.e., in <code id="the-history-entry-list:dom-navigation-entries-2"><a href="#dom-navigation-entries">entries()</a></code>). This means that there is a next <a id="the-history-entry-list:session-history-entry-3" href="browsing-the-web.html#session-history-entry">session history entry</a> for this <a id="the-history-entry-list:navigable-3" href="document-sequences.html#navigable">navigable</a>, and its <a href="browsing-the-web.html#she-document-state" id="the-history-entry-list:she-document-state-2">document state</a>'s <a href="browsing-the-web.html#document-state-origin" id="the-history-entry-list:document-state-origin-2">origin</a> is <a id="the-history-entry-list:same-origin-3" href="browsers.html#same-origin">same origin</a> with the current <code>Document</code>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="the-history-entry-list:concept-document-origin-2" data-x-internal="concept-document-origin">origin</a>.</p>
  </dl>

  


  <h5 id="navigation-api-initiating-navigations"><span class="secno">7.2.5.6</span> Initiating navigations<a href="#navigation-api-initiating-navigations" class="self-link"></a></h5>

  <dl class="domintro"><dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<span id="dom-navigation-navigate">navigate</span>(<var>url</var>)</code><dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<a href="#dom-navigation-navigate" id="navigation-api-initiating-navigations:dom-navigation-navigate">navigate</a>(<var>url</var>, <var>options</var>)</code><dd><p><a href="browsing-the-web.html#navigate" id="navigation-api-initiating-navigations:navigate">Navigates</a> the current page to the given <var>url</var>. <var>options</var> can contain the following values:</p>

    <ul><li><p><code id="dom-navigationnavigateoptions-history">history</code> can be set to "<code id="navigationhistorybehavior-replace"><a href="browsing-the-web.html#navigationhistorybehavior-replace-2">replace</a></code>" to replace the current session history entry, instead of pushing a new one.<li><p><code id="dom-navigationoptions-info">info</code> can be set to any value; it will populate the <code id="navigation-api-initiating-navigations:dom-navigateevent-info"><a href="#dom-navigateevent-info">info</a></code> property of the corresponding <code>NavigateEvent</code>.<li><p><code id="dom-navigationnavigateoptions-state">state</code> can be set to any <a href="structured-data.html#serializable-objects" id="navigation-api-initiating-navigations:serializable-objects">serializable</a> value; it will populate the state retrieved by <code id="navigation-api-initiating-navigations:dom-navigationhistoryentry-getstate"><a href="#dom-navigationhistoryentry-getstate">navigation.currentEntry.getState()</a></code> once the navigation completes, for same-document navigations. (It will be ignored for navigations that end up cross-document.)</ul>

    <p>By default this will perform a full navigation (i.e., a cross-document navigation, unless the given URL differs only in a <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-fragment" id="navigation-api-initiating-navigations:concept-url-fragment" data-x-internal="concept-url-fragment">fragment</a> from the current one). The <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code> method can be used to convert it into a same-document navigation.</p>

    <p>The returned promises will behave as follows:</p>

    <ul><li><p>For navigations that get aborted, both promises will reject with an <a id="navigation-api-initiating-navigations:aborterror" href="https://triple-underscore.github.io/WebIDL-ja.html#aborterror" data-x-internal="aborterror">"<code>AbortError</code>"</a> <code id="navigation-api-initiating-navigations:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>For same-document navigations created by using the <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-2"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code> method, <code>committed</code> will fulfill immediately, and <code>finished</code> will fulfill or reject according to any promsies returned by handlers passed to <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-3"><a href="#dom-navigateevent-intercept">intercept()</a></code>.<li><p>For other same-document navigations (e.g., non-intercepted <a href="browsing-the-web.html#navigate-fragid" id="navigation-api-initiating-navigations:navigate-fragid">fragment navigations</a>), both promises will fulfill immediately.<li><p>For cross-document navigations, or navigations that result in 204 or 205 <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response-status" id="navigation-api-initiating-navigations:concept-response-status" data-x-internal="concept-response-status">statuses</a> or `<code id="navigation-api-initiating-navigations:http-content-disposition"><a data-x-internal="http-content-disposition" href="https://httpwg.org/specs/rfc6266.html">Content-Disposition: attachment</a></code>` header fields from the server (and thus do not actually navigate), both promises will never settle.</ul>

    <p>In all cases, when the returned promises fulfill, it will be with the <code>NavigationHistoryEntry</code> that was navigated to.</p>
   <dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<span id="dom-navigation-reload">reload</span>(<var>options</var>)</code><dd><p><a href="browsing-the-web.html#reload" id="navigation-api-initiating-navigations:reload">Reloads</a> the current page. <var>options</var> can contain <code id="navigation-api-initiating-navigations:dom-navigationoptions-info"><a href="#dom-navigationoptions-info">info</a></code> and <code id="dom-navigationreloadoptions-state">state</code>, which behave as described above.</p>

    <p>The default behavior of performing a from-network-or-cache reload of the current page can be overriden by the using the <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-4"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code> method. Doing so will mean this call only updates state or passes along the appropriate <code id="navigation-api-initiating-navigations:dom-navigationoptions-info-2"><a href="#dom-navigationoptions-info">info</a></code>, plus performing whater actions the <code id="navigation-api-initiating-navigations:event-navigate"><a href="indices.html#event-navigate">navigate</a></code> event handlers see fit to carry out.</p>

    <p>The returned promises will behave as follows:</p>

    <ul><li><p>If the reload is intercepted by using the <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-5"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code> method, <code>committed</code> will fulfill immediately, and <code>finished</code> will fulfill or reject according to any promsies returned by handlers passed to <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-6"><a href="#dom-navigateevent-intercept">intercept()</a></code>.<li><p>Otherwise, both promises will never settle.</ul>
   <dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<span id="dom-navigation-traverseto">traverseTo</span>(<var>key</var>)</code><dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<a href="#dom-navigation-traverseto" id="navigation-api-initiating-navigations:dom-navigation-traverseto">traverseTo</a>(<var>key</var>, { <a href="#dom-navigationoptions-info" id="navigation-api-initiating-navigations:dom-navigationoptions-info-3">info</a> })</code><dd><p><a href="browsing-the-web.html#apply-the-traverse-history-step" id="navigation-api-initiating-navigations:apply-the-traverse-history-step">Traverses</a> to the closest <a id="navigation-api-initiating-navigations:session-history-entry" href="browsing-the-web.html#session-history-entry">session history entry</a> that matches the <code>NavigationHistoryEntry</code> with the given <var>key</var>. <code id="navigation-api-initiating-navigations:dom-navigationoptions-info-4"><a href="#dom-navigationoptions-info">info</a></code> can be set to any value; it will populate the <code id="navigation-api-initiating-navigations:dom-navigateevent-info-2"><a href="#dom-navigateevent-info">info</a></code> property of the corresponding <code>NavigateEvent</code>.</p>

    <p>If a traversal to that <a id="navigation-api-initiating-navigations:session-history-entry-2" href="browsing-the-web.html#session-history-entry">session history entry</a> is already in progress, then this will return the promises for that original traversal, and <code id="navigation-api-initiating-navigations:dom-navigateevent-info-3"><a href="#dom-navigateevent-info">info</a></code> will be ignored.</p>

    <p>The returned promises will behave as follows:</p>

    <ul><li><p>If there is no <code>NavigationHistoryEntry</code> in <code id="navigation-api-initiating-navigations:dom-navigation-entries"><a href="#dom-navigation-entries">navigation.entries()</a></code> whose <code id="navigation-api-initiating-navigations:dom-navigationhistoryentry-key"><a href="#dom-navigationhistoryentry-key">key</a></code> matches <var>key</var>, both promises will reject with an <a id="navigation-api-initiating-navigations:invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="navigation-api-initiating-navigations:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>For same-document traversals intercepted by the <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-7"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code> method, <code>committed</code> will fulfill as soon as the traversal is processed and <code id="navigation-api-initiating-navigations:dom-navigation-currententry"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> is updated, and <code>finished</code> will fulfill or reject according to any promsies returned by the handlers passed to <code id="navigation-api-initiating-navigations:dom-navigateevent-intercept-8"><a href="#dom-navigateevent-intercept">intercept()</a></code>.<li><p>For non-intercepted same-document travesals, both promises will fulfill as soon as the traversal is processed and <code id="navigation-api-initiating-navigations:dom-navigation-currententry-2"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> is updated.<li><p>For cross-document traversals, including attempted cross-document traversals that end up resulting in a 204 or 205 <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response-status" id="navigation-api-initiating-navigations:concept-response-status-2" data-x-internal="concept-response-status">statuses</a> or `<code id="navigation-api-initiating-navigations:http-content-disposition-2"><a data-x-internal="http-content-disposition" href="https://httpwg.org/specs/rfc6266.html">Content-Disposition: attachment</a></code>` header fields from the server (and thus do not actually traverse), both promises will never settle.</ul>
   <dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<span id="dom-navigation-back">back</span>(<var>key</var>)</code><dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<a href="#dom-navigation-back" id="navigation-api-initiating-navigations:dom-navigation-back">back</a>(<var>key</var>, { <a href="#dom-navigationoptions-info" id="navigation-api-initiating-navigations:dom-navigationoptions-info-5">info</a> })</code><dd><p>Traverses to the closest previous <a id="navigation-api-initiating-navigations:session-history-entry-3" href="browsing-the-web.html#session-history-entry">session history entry</a> which results in this <a id="navigation-api-initiating-navigations:navigable" href="document-sequences.html#navigable">navigable</a> traversing, i.e., which corresponds to a different <code>NavigationHistoryEntry</code> and thus will cause <code id="navigation-api-initiating-navigations:dom-navigation-currententry-3"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> to change. <code id="navigation-api-initiating-navigations:dom-navigationoptions-info-6"><a href="#dom-navigationoptions-info">info</a></code> can be set to any value; it will populate the <code id="navigation-api-initiating-navigations:dom-navigateevent-info-4"><a href="#dom-navigateevent-info">info</a></code> property of the corresponding <code>NavigateEvent</code>.</p>

    <p>If a traversal to that <a id="navigation-api-initiating-navigations:session-history-entry-4" href="browsing-the-web.html#session-history-entry">session history entry</a> is already in progress, then this will return the promises for that original traversal, and <code id="navigation-api-initiating-navigations:dom-navigateevent-info-5"><a href="#dom-navigateevent-info">info</a></code> will be ignored.</p>

    <p>The returned promises behave equivalently to those returned by <code id="navigation-api-initiating-navigations:dom-navigation-traverseto-2"><a href="#dom-navigation-traverseto">traverseTo()</a></code>.</p>
   <dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<span id="dom-navigation-forward">forward</span>(<var>key</var>)</code><dt><code>{ <span>committed</span>, <span>finished</span> } = <span>navigation</span>.<a href="#dom-navigation-forward" id="navigation-api-initiating-navigations:dom-navigation-forward">forward</a>(<var>key</var>, { <a href="#dom-navigationoptions-info" id="navigation-api-initiating-navigations:dom-navigationoptions-info-7">info</a> })</code><dd><p>Traverses to the closest forward <a id="navigation-api-initiating-navigations:session-history-entry-5" href="browsing-the-web.html#session-history-entry">session history entry</a> which results in this <a id="navigation-api-initiating-navigations:navigable-2" href="document-sequences.html#navigable">navigable</a> traversing, i.e., which corresponds to a different <code>NavigationHistoryEntry</code> and thus will cause <code id="navigation-api-initiating-navigations:dom-navigation-currententry-4"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> to change. <code id="navigation-api-initiating-navigations:dom-navigationoptions-info-8"><a href="#dom-navigationoptions-info">info</a></code> can be set to any value; it will populate the <code id="navigation-api-initiating-navigations:dom-navigateevent-info-6"><a href="#dom-navigateevent-info">info</a></code> property of the corresponding <code>NavigateEvent</code>.</p>

    <p>If a traversal to that <a id="navigation-api-initiating-navigations:session-history-entry-6" href="browsing-the-web.html#session-history-entry">session history entry</a> is already in progress, then this will return the promises for that original traversal, and <code id="navigation-api-initiating-navigations:dom-navigateevent-info-7"><a href="#dom-navigateevent-info">info</a></code> will be ignored.</p>

    <p>The returned promises behave equivalently to those returned by <code id="navigation-api-initiating-navigations:dom-navigation-traverseto-3"><a href="#dom-navigation-traverseto">traverseTo()</a></code>.</p>
   </dl>

  


  <h5 id="ongoing-navigation-tracking"><span class="secno">7.2.5.7</span> Ongoing navigation tracking<a href="#ongoing-navigation-tracking" class="self-link"></a></h5>

  

  <dl class="domintro"><dt><code><span>navigation</span>.<span id="dom-navigation-transition">transition</span></code><dd><p>A <code>NavigationTransition</code> representing any ongoing navigation that hasn't yet reached the <code id="ongoing-navigation-tracking:event-navigatesuccess"><a href="indices.html#event-navigatesuccess">navigatesuccess</a></code> or <code id="ongoing-navigation-tracking:event-navigateerror"><a href="indices.html#event-navigateerror">navigateerror</a></code> stage, if one exists; or null, if there is no such transition ongoing.</p>

    <p>Since <code id="ongoing-navigation-tracking:dom-navigation-currententry"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> (and other properties like <code id="ongoing-navigation-tracking:dom-location-href"><a href="#dom-location-href">location.href</a></code>) are updated immediately upon navigation, this <code id="ongoing-navigation-tracking:dom-navigation-transition"><a href="#dom-navigation-transition">navigation.transition</a></code> property is useful for determining when such navigations are not yet fully settled, according to any handlers passed to <code id="ongoing-navigation-tracking:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code>.</p>
   <dt><code><span>navigation</span>.<a href="#dom-navigation-transition" id="ongoing-navigation-tracking:dom-navigation-transition-2">transition</a>.<span id="dom-navigationtransition-navigationtype">navigationType</span></code><dd><p>One of "<code id="ongoing-navigation-tracking:dom-navigationtype-push"><a href="#dom-navigationtype-push">push</a></code>", "<code id="ongoing-navigation-tracking:dom-navigationtype-replace"><a href="#dom-navigationtype-replace">replace</a></code>", "<code id="ongoing-navigation-tracking:dom-navigationtype-reload"><a href="#dom-navigationtype-reload">reload</a></code>", or "<code id="ongoing-navigation-tracking:dom-navigationtype-traverse"><a href="#dom-navigationtype-traverse">traverse</a></code>", indicating what type of navigation this transition is for.<dt><code><span>navigation</span>.<a href="#dom-navigation-transition" id="ongoing-navigation-tracking:dom-navigation-transition-3">transition</a>.<span id="dom-navigationtransition-from">from</span></code><dd><p>The <code>NavigationHistoryEntry</code> from which the transition is coming. This can be useful to compare against <code id="ongoing-navigation-tracking:dom-navigation-currententry-2"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code>.<dt><code><span>navigation</span>.<a href="#dom-navigation-transition" id="ongoing-navigation-tracking:dom-navigation-transition-4">transition</a>.<span id="dom-navigationtransition-finished">finished</span></code><dd><p>A promise which fulfills at the same time as the <code id="ongoing-navigation-tracking:event-navigatesuccess-2"><a href="indices.html#event-navigatesuccess">navigatesuccess</a></code> fires, or rejects at the same time the <code id="ongoing-navigation-tracking:event-navigateerror-2"><a href="indices.html#event-navigateerror">navigateerror</a></code> event fires.</dl>

  



  <h5 id="the-navigate-event"><span class="secno">7.2.5.8</span> The <code id="the-navigate-event:event-navigate"><a href="indices.html#event-navigate">navigate</a></code> event<a href="#the-navigate-event" class="self-link"></a></h5>

  <p>A major feature of the navigation API is the <code id="the-navigate-event:event-navigate-2"><a href="indices.html#event-navigate">navigate</a></code> event. This event is fired on any navigation (in the <span>broad sense of the word</span>), allowing web developers to monitor such outgoing navigations. In many cases, the event is <code id="the-navigate-event:dom-event-cancelable"><a data-x-internal="dom-event-cancelable" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-cancelable">cancelable</a></code>, which allows preventing the navigation from happening. And in others, the navigation can be intercepted and replaced with a same-document navigation by using the <code id="the-navigate-event:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">intercept()</a></code> method of the <code>NavigateEvent</code> class.</p>

  <h6 id="the-navigateevent-interface"><span class="secno">7.2.5.8.1</span> The <code>NavigateEvent</code> interface<a href="#the-navigateevent-interface" class="self-link"></a></h6>

  

  <dl class="domintro"><dt><code><var>event</var>.<span id="dom-navigateevent-navigationtype">navigationType</span></code><dd><p>One of "<code id="the-navigateevent-interface:dom-navigationtype-push"><a href="#dom-navigationtype-push">push</a></code>", "<code id="the-navigateevent-interface:dom-navigationtype-replace"><a href="#dom-navigationtype-replace">replace</a></code>", "<code id="the-navigateevent-interface:dom-navigationtype-reload"><a href="#dom-navigationtype-reload">reload</a></code>", or "<code id="the-navigateevent-interface:dom-navigationtype-traverse"><a href="#dom-navigationtype-traverse">traverse</a></code>", indicating what type of navigation this is.<dt><code><var>event</var>.<span id="dom-navigateevent-destination">destination</span></code><dd><p>A <code>NavigationDestination</code> representing the destination of the navigation.<dt><code><var>event</var>.<span id="dom-navigateevent-canintercept">canIntercept</span></code><dd><p>True if <code id="the-navigateevent-interface:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">intercept()</a></code> can be called to intercept this navigation and convert it into a same-document navigation, replacing its usual behavior; false otherwise.</p>

    <p>Generally speaking, this will be true whenever the current <code>Document</code> <a href="#can-have-its-url-rewritten" id="the-navigateevent-interface:can-have-its-url-rewritten">can have its URL rewritten</a> to the destination URL, except for in the case of cross-document "<code id="the-navigateevent-interface:dom-navigationtype-traverse-2"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigations, where it will always be false.</p>
   <dt><code><var>event</var>.<span id="dom-navigateevent-userinitiated">userInitiated</span></code><dd><p>True if this navigation was due to a user clicking on an <code id="the-navigateevent-interface:the-a-element"><a href="text-level-semantics.html#the-a-element">a</a></code> element, submitting a <code id="the-navigateevent-interface:the-form-element"><a href="forms.html#the-form-element">form</a></code> element, or using the <a href="document-lifecycle.html#nav-traversal-ui">browser UI</a> to navigate; false otherwise.<dt><code><var>event</var>.<span id="dom-navigateevent-hashchange">hashChange</span></code><dd><p>True for a <a href="browsing-the-web.html#navigate-fragid" id="the-navigateevent-interface:navigate-fragid">fragment navigation</a>; false otherwise.<dt><code><var>event</var>.<span id="dom-navigateevent-signal">signal</span></code><dd><p>An <code id="the-navigateevent-interface:abortsignal"><a data-x-internal="abortsignal" href="https://dom.spec.whatwg.org/#abortsignal">AbortSignal</a></code> which will become aborted if the navigation gets canceled, e.g., by the user pressing their browser's "Stop" button, or by another navigation interrupting this one.</p>

    <p>The expected pattern is for developers to pass this along to any async operations, such as <code id="the-navigateevent-interface:fetch()"><a data-x-internal="fetch()" href="https://triple-underscore.github.io/Fetch-ja.html#dom-global-fetch">fetch()</a></code>, which they perform as part of handling this navigation.</p>
   <dt><code><var>event</var>.<span id="dom-navigateevent-formdata">formData</span></code><dd><p>The <code id="the-navigateevent-interface:formdata"><a data-x-internal="formdata" href="https://triple-underscore.github.io/XHR-ja.html#formdata">FormData</a></code> representing the submitted form entries for this navigation, if this navigation is a "<code id="the-navigateevent-interface:dom-navigationtype-push-2"><a href="#dom-navigationtype-push">push</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-replace-2"><a href="#dom-navigationtype-replace">replace</a></code>" navigation representing a POST <span>form submission</span>; null otherwise.</p>

    <p>(Notably, this will be null even for "<code id="the-navigateevent-interface:dom-navigationtype-reload-2"><a href="#dom-navigationtype-reload">reload</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-traverse-3"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigations that are revisiting a <a id="the-navigateevent-interface:session-history-entry" href="browsing-the-web.html#session-history-entry">session history entry</a> that was originally created from a form submission.)</p>
   <dt><code><var>event</var>.<span id="dom-navigateevent-downloadrequest">downloadRequest</span></code><dd><p>Represents whether or not this navigation was requested to be a download, by using an <code id="the-navigateevent-interface:the-a-element-2"><a href="text-level-semantics.html#the-a-element">a</a></code> or <code id="the-navigateevent-interface:the-area-element"><a href="image-maps.html#the-area-element">area</a></code> element's <code id="the-navigateevent-interface:attr-hyperlink-download"><a href="links.html#attr-hyperlink-download">download</a></code> attribute:</p>

    <ul><li><p>If a download was not requested, then this property is null.<li><p>If a download was requested, returns the filename that was supplied as the <code id="the-navigateevent-interface:attr-hyperlink-download-2"><a href="links.html#attr-hyperlink-download">download</a></code> attribute's value. (This could be the empty string.)</ul>

    <p>Note that a download being requested does not always mean that a download will happen: for example, a download might be blocked by browser security policies, or end up being treated as a "<code id="the-navigateevent-interface:navigationhistorybehavior-push"><a href="browsing-the-web.html#navigationhistorybehavior-push">push</a></code>" navigation for <a href="https://github.com/whatwg/html/issues/7718" class="XXX">unspecified reasons</a>.</p>

    <p>Similarly, a navigation might end up being a download even if it was not requested to be one, due to the destination server responding with a `<code id="the-navigateevent-interface:http-content-disposition"><a data-x-internal="http-content-disposition" href="https://httpwg.org/specs/rfc6266.html">Content-Disposition: attachment</a></code>` header.</p>

    <p>Finally, note that the <code id="the-navigateevent-interface:event-navigate"><a href="indices.html#event-navigate">navigate</a></code> event will not fire at all for downloads initiated using browser UI affordances, e.g., those created by right-clicking and choosing to save the target of a link.</p>
   <dt><code><var>event</var>.<span id="dom-navigateevent-info">info</span></code><dd><p>An arbitrary JavaScript value passed via one of the <a href="#navigation-api-initiating-navigations">navigation API methods</a> which initiated this navigation, or undefined if the navigation was initiated by the user or by a different API.<dt><code><var>event</var>.<span id="dom-navigateevent-hasuavisualtransition">hasUAVisualTransition</span></code><dd><p>ユーザーエージェントが、このイベントをディスパッチする前に、このナビゲーションのビジュアルトランジションを実行した場合、trueを返す。trueの場合、著者がDOMをナビゲーション後の状態に同期的に更新するならば、最高のユーザーエクスペリエンスが得られる。<dt><code><var>event</var>.<span id="dom-navigateevent-intercept">intercept</span>({ <span id="dom-navigationinterceptoptions-handler">handler</span>, <span id="dom-navigationinterceptoptions-focusreset">focusReset</span>, <span id="dom-navigationinterceptoptions-scroll">scroll</span> })</code><dd><p>Intercepts this navigation, preventing its normal handling and instead converting it into a same-document navigation of the same type to the destination URL.</p>

    <p>The <code id="the-navigateevent-interface:dom-navigationinterceptoptions-handler"><a href="#dom-navigationinterceptoptions-handler">handler</a></code> option can be a function that returns a promise. The handler function will run after the <code id="the-navigateevent-interface:event-navigate-2"><a href="indices.html#event-navigate">navigate</a></code> event has finished firing, and the <code id="the-navigateevent-interface:dom-navigation-currententry"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code> property has been synchronously updated. This returned promise is used to signal the duration, and success or failure, of the navigation. After it settles, the browser signals to the user (e.g., via a loading spinner UI, or assistive technology) that the navigation is finished. Additionally, it fires <code id="the-navigateevent-interface:event-navigatesuccess"><a href="indices.html#event-navigatesuccess">navigatesuccess</a></code> or <code id="the-navigateevent-interface:event-navigateerror"><a href="indices.html#event-navigateerror">navigateerror</a></code> events as appropriate, which other parts of the web application can respond to.</p>

    <p>By default, using this method will cause focus to reset when any handlers' returned promises settle. Focus will be reset to the first element with the <code id="the-navigateevent-interface:attr-fe-autofocus"><a href="interaction.html#attr-fe-autofocus">autofocus</a></code> attribute set, or <a id="the-navigateevent-interface:the-body-element-2" href="dom.html#the-body-element-2">the body element</a> if the attribute isn't present. The <code id="the-navigateevent-interface:dom-navigationinterceptoptions-focusreset"><a href="#dom-navigationinterceptoptions-focusreset">focusReset</a></code> option can be set to "<code>manual</code>" to avoid this behavior.</p>

    <p>By default, using this method will delay the browser's scroll restoration logic for "<code id="the-navigateevent-interface:dom-navigationtype-traverse-4"><a href="#dom-navigationtype-traverse">traverse</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-reload-3"><a href="#dom-navigationtype-reload">reload</a></code>" navigations, or its scroll-reset/scroll-to-a-fragment logic for "<code id="the-navigateevent-interface:dom-navigationtype-push-3"><a href="#dom-navigationtype-push">push</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-replace-3"><a href="#dom-navigationtype-replace">replace</a></code>" navigations, until any handlers' returned promises settle. The <code id="the-navigateevent-interface:dom-navigationinterceptoptions-scroll"><a href="#dom-navigationinterceptoptions-scroll">scroll</a></code> option can be set to "<code>manual</code>" to turn off any browser-driven scroll behavior entirely for this navigation, or <code id="the-navigateevent-interface:dom-navigateevent-scroll"><a href="#dom-navigateevent-scroll">scroll()</a></code> can be called before the promise settles to trigger this behavior early.</p>

    <p>This method will throw a <a id="the-navigateevent-interface:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="the-navigateevent-interface:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> if <code id="the-navigateevent-interface:dom-navigateevent-canintercept"><a href="#dom-navigateevent-canintercept">canIntercept</a></code> is false, or if <code id="the-navigateevent-interface:dom-event-istrusted"><a data-x-internal="dom-event-istrusted" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-istrusted">isTrusted</a></code> is false. It will throw an <a id="the-navigateevent-interface:invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="the-navigateevent-interface:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> if not called synchronously, during event dispatch.</p>
   <dt><code><var>event</var>.<span id="dom-navigateevent-scroll">scroll</span>()</code><dd><p>For "<code id="the-navigateevent-interface:dom-navigationtype-traverse-5"><a href="#dom-navigationtype-traverse">traverse</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-reload-4"><a href="#dom-navigationtype-reload">reload</a></code>" navigations, restores the scroll position using the browser's usual scroll restoration logic.</p>

    <p>For "<code id="the-navigateevent-interface:dom-navigationtype-push-4"><a href="#dom-navigationtype-push">push</a></code>" or "<code id="the-navigateevent-interface:dom-navigationtype-replace-4"><a href="#dom-navigationtype-replace">replace</a></code>" navigations, either resets the scroll position to the top of the document or scrolls to the <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-fragment" id="the-navigateevent-interface:concept-url-fragment" data-x-internal="concept-url-fragment">fragment</a> specified by <code>destination.url</code> if there is one.</p>

    <p>If called more than once, or called after automatic post-transition scroll processing has happened due to the <code id="the-navigateevent-interface:dom-navigationinterceptoptions-scroll-2"><a href="#dom-navigationinterceptoptions-scroll">scroll</a></code> option being left as "<code>after-transition</code>", or called before the navigation has committed, this method will throw an <a id="the-navigateevent-interface:invalidstateerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="the-navigateevent-interface:domexception-3"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.</p>
   </dl>

  

  <h6 id="the-navigationdestination-interface"><span class="secno">7.2.5.8.2</span> The <code>NavigationDestination</code> interface<a href="#the-navigationdestination-interface" class="self-link"></a></h6>

  

  <dl class="domintro"><dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination">destination</a>.<span>url</span></code><dd><p>The URL being navigated to.<dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination-2">destination</a>.<span>key</span></code><dd><p>The value of the <code id="the-navigationdestination-interface:dom-navigationhistoryentry-key"><a href="#dom-navigationhistoryentry-key">key</a></code> property of the destination <code>NavigationHistoryEntry</code>, if this is a "<code id="the-navigationdestination-interface:dom-navigationtype-traverse"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigation, or the empty string otherwise.<dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination-3">destination</a>.<span>id</span></code><dd><p>The value of the <code id="the-navigationdestination-interface:dom-navigationhistoryentry-id"><a href="#dom-navigationhistoryentry-id">id</a></code> property of the destination <code>NavigationHistoryEntry</code>, if this is a "<code id="the-navigationdestination-interface:dom-navigationtype-traverse-2"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigation, or the empty string otherwise.<dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination-4">destination</a>.<span>index</span></code><dd><p>The value of the <code id="the-navigationdestination-interface:dom-navigationhistoryentry-index"><a href="#dom-navigationhistoryentry-index">index</a></code> property of the destination <code>NavigationHistoryEntry</code>, if this is a "<code id="the-navigationdestination-interface:dom-navigationtype-traverse-3"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigation, or −1 otherwise.<dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination-5">destination</a>.<span>sameDocument</span></code><dd><p>Indicates whether or not this navigation is to the same <code>Document</code> as the current one, or not. This will be true, for example, in the case of fragment navigations or <code id="the-navigationdestination-interface:dom-history-pushstate"><a href="#dom-history-pushstate">history.pushState()</a></code> navigations.</p>

    <p>Note that this property indicates the original nature of the navigation. If a cross-document navigation is converted into a same-document navigation using <code id="the-navigationdestination-interface:dom-navigateevent-intercept"><a href="#dom-navigateevent-intercept">navigateEvent.intercept()</a></code>, that will not change the value of this property.</p>
   <dt><code><var>event</var>.<a href="#dom-navigateevent-destination" id="the-navigationdestination-interface:dom-navigateevent-destination-6">destination</a>.<span>getState</span>()</code><dd><p>For "<code id="the-navigationdestination-interface:dom-navigationtype-traverse-4"><a href="#dom-navigationtype-traverse">traverse</a></code>" navigations, returns the <span>deserialization</span> of the state stored in the destination <a id="the-navigationdestination-interface:session-history-entry" href="browsing-the-web.html#session-history-entry">session history entry</a>.</p>

    <p>For "<code id="the-navigationdestination-interface:dom-navigationtype-push"><a href="#dom-navigationtype-push">push</a></code>" or "<code id="the-navigationdestination-interface:dom-navigationtype-replace"><a href="#dom-navigationtype-replace">replace</a></code>" navigations, returns the <span>deserialization</span> of the state passed to <code id="the-navigationdestination-interface:dom-navigation-navigate"><a href="#dom-navigation-navigate">navigation.navigate()</a></code>, if the navigation was initiated by that method, or undefined it if it wasn't.</p>

    <p>For "<code id="the-navigationdestination-interface:dom-navigationtype-reload"><a href="#dom-navigationtype-reload">reload</a></code>" navigations, returns the <span>deserialization</span> of the state passed to <code id="the-navigationdestination-interface:dom-navigation-reload"><a href="#dom-navigation-reload">navigation.reload()</a></code>, if the reload was initiated by that method, or undefined it if it wasn't.</p>
   </dl>

  

  <h4 id="nav-traversal-event-interfaces"><span class="secno">7.2.6</span> イベントインターフェイス<a href="#nav-traversal-event-interfaces" class="self-link"></a></h4>

  <p class="note"><code>NavigateEvent</code>インターフェイスには、その複雑さのために<a href="#the-navigate-event">独自の専用セクション</a>を持つ。</p>


  <h5 id="the-navigationcurrententrychangeevent-interface"><span class="secno">7.2.6.1</span> The <code>NavigationCurrentEntryChangeEvent</code> interface<a href="#the-navigationcurrententrychangeevent-interface" class="self-link"></a></h5>

  

  <dl class="domintro"><dt><code><var>event</var>.<span id="dom-navigationcurrententrychangeevent-navigationtype">navigationType</span></code><dd><p>Returns the type of navigation which caused the current entry to change, or null if the change is due to <code id="the-navigationcurrententrychangeevent-interface:dom-navigation-updatecurrententry"><a href="#dom-navigation-updatecurrententry">navigation.updateCurrentEntry()</a></code>.<dt><code><var>event</var>.<span id="dom-navigationcurrententrychangeevent-from">from</span></code><dd><p>Returns the previous value of <code id="the-navigationcurrententrychangeevent-interface:dom-navigation-currententry"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code>, before the current entry changed.</p>

    <p>If <code id="the-navigationcurrententrychangeevent-interface:dom-navigationcurrententrychangeevent-navigationtype"><a href="#dom-navigationcurrententrychangeevent-navigationtype">navigationType</a></code> is null or "<code id="the-navigationcurrententrychangeevent-interface:dom-navigationtype-reload"><a href="#dom-navigationtype-reload">reload</a></code>", then this value will be the same as <code id="the-navigationcurrententrychangeevent-interface:dom-navigation-currententry-2"><a href="#dom-navigation-currententry">navigation.currentEntry</a></code>. In that case, the event signifies that the contents of the entry changed, even if we did not move to a new entry or replace the current one.</p>
   </dl>

  


  <h5 id="the-popstateevent-interface"><span class="secno">7.2.6.2</span> <code>PopStateEvent</code>インターフェイス<a href="#the-popstateevent-interface" class="self-link"></a></h5><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PopStateEvent/PopStateEvent" title="The PopStateEvent() constructor creates a new PopStateEvent object.">PopStateEvent/PopStateEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>11+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>16+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>14+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PopStateEvent" title="PopStateEvent is an interface for the popstate event.">PopStateEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>4+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div>

  

  <dl class="domintro"><dt><code><var>event</var>.<span id="dom-popstateevent-state">state</span></code><dd><p><code id="the-popstateevent-interface:dom-history-pushstate"><a href="#dom-history-pushstate">pushState()</a></code>または<code id="the-popstateevent-interface:dom-history-replacestate"><a href="#dom-history-replacestate">replaceState()</a></code>へ提供される情報のコピーを返す。<dt><code><var>event</var>.<span id="dom-popstateevent-hasuavisualtransition">hasUAVisualTransition</span></code><dd><p>ユーザーエージェントが、このイベントをディスパッチする前に、このナビゲーションのビジュアルトランジションを実行した場合、trueを返す。trueの場合、著者がDOMをナビゲーション後の状態に同期的に更新するならば、最高のユーザーエクスペリエンスが得られる。</dl>

  


  <h5 id="the-hashchangeevent-interface"><span class="secno">7.2.6.3</span> <code>HashChangeEvent</code>インターフェイス<a href="#the-hashchangeevent-interface" class="self-link"></a></h5><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HashChangeEvent/HashChangeEvent" title="The HashChangeEvent() constructor creates a new HashChangeEvent object, that is used by the hashchange event fired at the window object when the fragment of the URL changes.">HashChangeEvent/HashChangeEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>11+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>16+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HashChangeEvent" title="The HashChangeEvent interface represents events that fire when the fragment identifier of the URL has changed.">HashChangeEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3.6+</span></span><span class="safari yes"><span>Safari</span><span>5+</span></span><span class="chrome yes"><span>Chrome</span><span>8+</span></span><hr><span class="opera yes"><span>Opera</span><span>10.6+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>8+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>5+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>11+</span></span></div></div></div>

  

  <dl class="domintro"><dt><code><var>event</var>.<span id="dom-hashchangeevent-oldurl">oldURL</span></code><dd><p>以前に現在であった<a id="the-hashchangeevent-interface:session-history-entry" href="browsing-the-web.html#session-history-entry">セッション履歴のエントリー</a>の<a id="the-hashchangeevent-interface:url" href="https://triple-underscore.github.io/URL-ja.html#concept-url" data-x-internal="url">URL</a>を返す。</p>
   <dt><code><var>event</var>.<span id="dom-hashchangeevent-newurl">newURL</span></code><dd><p>今現在である<a id="the-hashchangeevent-interface:session-history-entry-2" href="browsing-the-web.html#session-history-entry">セッション履歴のエントリー</a>の<a id="the-hashchangeevent-interface:url-2" href="https://triple-underscore.github.io/URL-ja.html#concept-url" data-x-internal="url">URL</a>を返す。</p>
   </dl>

  


  <h5 id="the-pagetransitionevent-interface"><span class="secno">7.2.6.4</span> <code>PageTransitionEvent</code>インターフェイス<a href="#the-pagetransitionevent-interface" class="self-link"></a></h5><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PageTransitionEvent/PageTransitionEvent" title="The PageTransitionEvent() constructor creates a new PageTransitionEvent object, that is used by the pageshow or pagehide events, fired at the window object when a page is loaded or unloaded.">PageTransitionEvent/PageTransitionEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>11+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>16+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/PageTransitionEvent" title="The PageTransitionEvent event object is available inside handler functions for the pageshow and pagehide events, fired when a document is being loaded or unloaded.">PageTransitionEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>5+</span></span><span class="chrome yes"><span>Chrome</span><span>4+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>4+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  

  <dl class="domintro"><dt><code><var>event</var>.<span id="dom-pagetransitionevent-persisted">persisted</span></code><dd><p><code id="the-pagetransitionevent-interface:event-pageshow"><a href="indices.html#event-pageshow">pageshow</a></code>に対して、ページが新しく読み込まれている（および<code id="the-pagetransitionevent-interface:event-load"><a href="indices.html#event-load">load</a></code>イベントが発生する）場合にfalseを返す。そうでなければ、trueを返す。</p>

    <p><code id="the-pagetransitionevent-interface:event-pagehide"><a href="indices.html#event-pagehide">pagehide</a></code>イベントに対して、ページが最後の時間まで出かける場合はfalseを返す。そうでなければtrueを返す。これは、ユーザーがこのページに戻った場合（<code>Document</code>の<i id="the-pagetransitionevent-interface:concept-document-salvageable"><a href="document-lifecycle.html#concept-document-salvageable">salvageable</a></i>状態がtrueのままの場合）にページが再利用される可能性があることを意味する。</p>

    <p>ページがサルベージ不能になる原因には、次のものがある：</p>

    <ul class="brief"><li>ユーザーエージェントが、<a href="document-lifecycle.html#unload-a-document" id="the-pagetransitionevent-interface:unload-a-document">アンロード</a>後に<a id="the-pagetransitionevent-interface:session-history-entry" href="browsing-the-web.html#session-history-entry">セッション履歴エントリー</a>で<code>Document</code>を存続させないことを決定した<li><i id="the-pagetransitionevent-interface:concept-document-salvageable-2"><a href="document-lifecycle.html#concept-document-salvageable">salvageable</a></i>ではない<code id="the-pagetransitionevent-interface:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>を持っている<li>アクティブな<code id="the-pagetransitionevent-interface:websocket-2"><a data-x-internal="websocket-2" href="https://triple-underscore.github.io/WebSocket-ja.html#websocket">WebSocket</a></code>オブジェクト<li><a href="document-lifecycle.html#abort-a-document" id="the-pagetransitionevent-interface:abort-a-document"><code>Document</code>の中止</a></ul>
   </dl>

  


  <h5 id="the-beforeunloadevent-interface"><span class="secno">7.2.6.5</span> <code>BeforeUnloadEvent</code>インターフェイス<a href="#the-beforeunloadevent-interface" class="self-link"></a></h5><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/BeforeUnloadEvent" title="BeforeUnloadEvent is an interface for the beforeunload event.">BeforeUnloadEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>30+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>3.0+</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  

  <p class="note"><code>BeforeUnloadEvent</code>固有の初期化メソッドは存在しない。</p>

  <p><code>BeforeUnloadEvent</code>インターフェイスは、イベントをキャンセルするだけでなく、<code>returnValue</code>属性を空文字列以外の値に設定することで、<a id="the-beforeunloadevent-interface:checking-if-unloading-is-canceled" href="browsing-the-web.html#checking-if-unloading-is-canceled">アンロードがキャンセルされたかどうかをチェック</a>できるようにするレガシーインターフェイスである。著者は、<code>returnValue</code>を使用する代わりに、<code id="the-beforeunloadevent-interface:dom-event-preventdefault"><a data-x-internal="dom-event-preventdefault" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-preventdefault">preventDefault()</a></code>メソッド、またはイベントをキャンセルするその他の手段を使用すべきである。</p>

  

  <nav><a href="browsers.html">← 7 ウェブページの読み込み</a> — <a href="./">目次</a> — <a href="document-sequences.html">7.3 文書シーケンスのインフラ →</a></nav>
