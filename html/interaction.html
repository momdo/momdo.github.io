<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/spec.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  
  <script defer="" crossorigin="" src="./html-dfn.js"></script>
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1 class="allcaps">HTML</h1><p id="living-standard">Living Standard — Last Updated <span class="pubdate">12 October 2023</span></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="microdata.html">← 5 Microdata</a> — <a href="./">目次</a> — <a href="dnd.html">6.10 ドラッグアンドドロップ →</a></nav><ol class="toc"><li id="toc-editing"><a href="interaction.html#editing"><span class="secno">6</span> ユーザーとの対話処理</a><ol><li><a href="interaction.html#the-hidden-attribute"><span class="secno">6.1</span> <code>hidden</code>属性</a><li><a href="interaction.html#page-visibility"><span class="secno">6.2</span> ページの可視</a><ol><li><a href="interaction.html#the-visibilitystateentry-interface"><span class="secno">6.2.1</span> <code>VisibilityStateEntry</code>インターフェイス</a></ol><li><a href="interaction.html#inert-subtrees"><span class="secno">6.3</span> 不活性サブツリー</a><ol><li><a href="interaction.html#modal-dialogs-and-inert-subtrees"><span class="secno">6.3.1</span> モーダルダイアログと不活性サブツリー</a><li><a href="interaction.html#the-inert-attribute"><span class="secno">6.3.2</span> <code>inert</code>属性</a></ol><li><a href="interaction.html#tracking-user-activation"><span class="secno">6.4</span> ユーザーのアクティブ化の追跡</a><ol><li><a href="interaction.html#user-activation-data-model"><span class="secno">6.4.1</span> Data model</a><li><a href="interaction.html#user-activation-processing-model"><span class="secno">6.4.2</span> Processing model</a><li><a href="interaction.html#user-activation-gated-apis"><span class="secno">6.4.3</span> ユーザーのアクティブ化の追跡</a><li><a href="interaction.html#the-useractivation-interface"><span class="secno">6.4.4</span> <code>UserActivation</code>インターフェイス</a><li><a href="interaction.html#user-activation-user-agent-automation"><span class="secno">6.4.5</span> User agent automation</a></ol><li><a href="interaction.html#activation"><span class="secno">6.5</span> 要素のアクティブ化動作</a><ol><li><a href="interaction.html#the-toggleevent-interface"><span class="secno">6.5.1</span> The <code>ToggleEvent</code> interface</a></ol><li><a href="interaction.html#focus"><span class="secno">6.6</span> フォーカス</a><ol><li><a href="interaction.html#introduction-8"><span class="secno">6.6.1</span> 導入</a><li><a href="interaction.html#data-model"><span class="secno">6.6.2</span> データモデル</a><li><a href="interaction.html#the-tabindex-attribute"><span class="secno">6.6.3</span> <code>tabindex</code>属性</a><li><a href="interaction.html#focus-processing-model"><span class="secno">6.6.4</span> Processing model</a><li><a href="interaction.html#sequential-focus-navigation"><span class="secno">6.6.5</span> Sequential focus navigation</a><li><a href="interaction.html#focus-management-apis"><span class="secno">6.6.6</span> フォーカス管理API</a><li><a href="interaction.html#the-autofocus-attribute"><span class="secno">6.6.7</span> <code>autofocus</code>属性</a></ol><li><a href="interaction.html#assigning-keyboard-shortcuts"><span class="secno">6.7</span> キーボードショートカットの割り当て</a><ol><li><a href="interaction.html#introduction-9"><span class="secno">6.7.1</span> 導入</a><li><a href="interaction.html#the-accesskey-attribute"><span class="secno">6.7.2</span> <code>accesskey</code>属性</a><li><a href="interaction.html#keyboard-shortcuts-processing-model"><span class="secno">6.7.3</span> Processing model</a></ol><li><a href="interaction.html#editing-2"><span class="secno">6.8</span> 編集</a><ol><li><a href="interaction.html#contenteditable"><span class="secno">6.8.1</span> 編集可能な文書領域を作成する：<code>contenteditable</code>コンテンツ属性</a><li><a href="interaction.html#making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">6.8.2</span> 文書全体を編集可能にする：<code>designMode</code>のゲッターおよびセッター</a><li><a href="interaction.html#best-practices-for-in-page-editors"><span class="secno">6.8.3</span> ページ内編集者のためのベストプラクティス</a><li><a href="interaction.html#editing-apis"><span class="secno">6.8.4</span> 編集API</a><li><a href="interaction.html#spelling-and-grammar-checking"><span class="secno">6.8.5</span> スペルと文法チェック</a><li><a href="interaction.html#autocapitalization"><span class="secno">6.8.6</span> 自動大文字化</a><li><a href="interaction.html#input-modalities:-the-inputmode-attribute"><span class="secno">6.8.7</span> 入力モダリティ：<code>inputmode</code>属性</a><li><a href="interaction.html#input-modalities:-the-enterkeyhint-attribute"><span class="secno">6.8.8</span> 入力モダリティ：<code>enterkeyhint</code>属性</a></ol><li><a href="interaction.html#find-in-page"><span class="secno">6.9</span> ページ内検索</a><ol><li><a href="interaction.html#introduction-10"><span class="secno">6.9.1</span> 導入</a><li><a href="interaction.html#interaction-with-details-and-hidden=until-found"><span class="secno">6.9.2</span> <code>details</code>と<code>hidden=until-found</code>との相互作用</a><li><a href="interaction.html#interaction-with-selection"><span class="secno">6.9.3</span> 選択との相互作用</a></ol></ol></ol><h2 id="editing"><span class="secno">6</span> <dfn>ユーザーとの対話処理</dfn><a href="#editing" class="self-link"></a></h2>


  <h3 id="the-hidden-attribute"><span class="secno">6.1</span> <code id="the-hidden-attribute:attr-hidden"><a href="#attr-hidden">hidden</a></code>属性<a href="#the-hidden-attribute" class="self-link"></a></h3><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden" title="The hidden global attribute is an enumerated attribute indicating that the browser should not render the contents of the element. For example, it can be used to hide elements of the page that can't be used until the login process has been completed.">Global_attributes/hidden</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>102+</span></span><hr><span class="opera no"><span>Opera</span><span>No</span></span><span class="edge_blink yes"><span>Edge</span><span>102+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden" title="The hidden global attribute is an enumerated attribute indicating that the browser should not render the contents of the element. For example, it can be used to hide elements of the page that can't be used until the login process has been completed.">Global_attributes/hidden</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>5.1+</span></span><span class="chrome yes"><span>Chrome</span><span>10+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p>すべての<a id="the-hidden-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>は<dfn data-dfn-for="html-global" id="attr-hidden" data-dfn-type="element-attr"><code>hidden</code></dfn>コンテンツ属性設定を持ってもよい。<code id="the-hidden-attribute:attr-hidden-2"><a href="#attr-hidden">draggable</a></code>属性は、<a id="the-hidden-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。以下の表は、この属性の状態を列挙する：</p>

  <table><thead><tr><th>状態<th>キーワード<tbody><tr><td><a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state">Until found state</a><td><dfn data-dfn-for="html-global/hidden" id="attr-hidden-until-found-keyword" data-dfn-type="attr-value"><code>until-found</code></dfn><tr><td rowspan="2"><a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state">Hidden state</a><td>空文字列<tr><td><dfn data-dfn-for="html-global/hidden" id="attr-hidden-hidden-keyword" data-dfn-type="attr-value"><code>hidden</code></dfn></table>

  <p>属性は省略してもよい。<i id="the-hidden-attribute:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>は<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-2">hidden state</a>である。<i id="the-hidden-attribute:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>は<dfn id="attr-hidden-not-hidden-state">not hidden state</dfn>である。</p>

  <p>要素が<dfn id="attr-hidden-hidden-state">hidden state</dfn>の<code id="the-hidden-attribute:attr-hidden-3"><a href="#attr-hidden">hidden</a></code>属性を持つ場合、それは、要素がまだないこと、またはもはやページの現在の状態には直接関係がない、または、ユーザーが直接アクセスするのとは対照的に、ページの他の部分で再利用するコンテンツを宣言するために使用されていることを示す。ユーザーエージェントは、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-3">hidden state</a>にある要素をレンダリングすべきでない。 この要件は、スタイルレイヤーを通して間接的に実装されてもよい。たとえば、ウェブブラウザーは、<a href="rendering.html#hiddenCSS">レンダリングセクションで提案されているルールを使用して</a>これらの要件を実装することができる。</p>

  <p>要素が<dfn id="attr-hidden-until-found-state">hidden until found state</dfn>にある<code id="the-hidden-attribute:attr-hidden-4"><a href="#attr-hidden">hidden</a></code>属性を持つ場合、その要素は<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-4">hidden state</a>のように非表示になっているが、要素内のコンテンツは<a href="#find-in-page-2" id="the-hidden-attribute:find-in-page-2">ページ内検索</a>および<a href="browsing-the-web.html#navigate-fragid" id="the-hidden-attribute:navigate-fragid">フラグメントナビゲーション</a>にアクセスできることを示す。これらの機能が要素のサブツリーにあるターゲットにスクロールしようとするとき、ユーザーエージェントは、スクロールする前にコンテンツを表示するために<code id="the-hidden-attribute:attr-hidden-5"><a href="#attr-hidden">hidden</a></code>属性を削除する。 <code id="the-hidden-attribute:attr-hidden-6"><a href="#attr-hidden">hidden</a></code>属性を削除することに加えて、<code id="the-hidden-attribute:event-beforematch"><a href="indices.html#event-beforematch">beforematch</a></code>という名前のイベントも、<code id="the-hidden-attribute:attr-hidden-7"><a href="#attr-hidden">hidden</a></code>属性が削除される前に要素で発火する。</p>

  <p><a href="rendering.html#hiddenCSS">レンダリングセクション</a>で指定されているように、<code id="the-hidden-attribute:attr-hidden-8"><a href="#attr-hidden">hidden</a></code>属性が<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-2">hidden until found state</a>にある場合、ウェブブラウザーは'display: none'ではなく'content-visibility: hidden'を使用するだろう。</p>


  <div class="note"><p>この属性は通常CSSを使用して実装されているため、CSSを使用して上書きすることもできる。たとえば、'display: block'をすべての要素に適用する規則は、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-5">hidden</a>状態の影響を相殺するだろう。したがって著者は、期待通りに属性がスタイル付けされていることを確認し、そのスタイルシートを書くときに注意する必要がある。さらに、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-3">hidden until found state</a>をサポートしないレガシーユーザーエージェントは、 'content-visibility: hidden',ではなく'display: none'になるため、著者はスタイルシートが<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-4">hidden until found</a>要素の'display'または'content-visibility プロパティを変更しないようにすることを勧める。</p>

   <p><a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-5">hidden until found state</a>に<code id="the-hidden-attribute:attr-hidden-9"><a href="#attr-hidden">hidden</a></code>属性をもつ要素は、'display: none'ではなく'content-visibility: hidden'を使用するため、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-6">hidden until found state</a>には、<a href="#attr-hidden-hidden-state" id="the-hidden-attribute:attr-hidden-hidden-state-6">hidden state</a>とは異なる2つの注意点が存在する：</p>

   <ol><li><p>ページ内検索で表示するには、要素が<a id="the-hidden-attribute:layout-containment" href="https://triple-underscore.github.io/css-contain-ja.html#containment-layout" data-x-internal="layout-containment">レイアウトの包含</a>の影響を受ける必要がある。 これは、<a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-7">hidden until found state</a>の要素が'none'、'contents'、または'inline'の'display'値を持つ場合、その要素はページ内検索によって表示されないことを意味する。<li><p><a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-8">hidden until found state</a>の場合、要素は依然として<a href="https://drafts.csswg.org/css2/#propdef-visibility" id="the-hidden-attribute:'visibility'" data-x-internal="'visibility'">生成ボックス</a>がある。これはつまり、ボーダー、マージン、およびパディングは要素の周囲にレンダリングされたままになる。</ol>
  </div>

  <div class="example"><p>以下の骨格の例において、属性は、ユーザーがログインするまでウェブゲームのメイン画面を非表示にするために使用される：</p>

   <pre><code class='html'>  <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->The Example Game<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>section</c-> <c- e>id</c-><c- o>=</c-><c- s>"login"</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>h2</c-><c- p>></c->Login<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>form</c-><c- p>></c->
    ...
    <c- c>&lt;!-- calls login() once the user's credentials have been checked --></c->
   <c- p>&lt;/</c-><c- f>form</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
    <c- a>function</c-> login<c- p>()</c-> <c- p>{</c->
      <c- c1>// switch screens</c->
      document<c- p>.</c->getElementById<c- p>(</c-><c- t>'login'</c-><c- p>).</c->hidden <c- o>=</c-> <c- kc>true</c-><c- p>;</c->
      document<c- p>.</c->getElementById<c- p>(</c-><c- t>'game'</c-><c- p>).</c->hidden <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
    <c- p>}</c->
   <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>section</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>section</c-> <c- e>id</c-><c- o>=</c-><c- s>"game"</c-> <c- e>hidden</c-><c- p>></c->
   ...
  <c- p>&lt;/</c-><c- f>section</c-><c- p>></c-></code></pre>

  </div>

  <p><code id="the-hidden-attribute:attr-hidden-10"><a href="#attr-hidden">hidden</a></code>属性は、別のプレゼンテーションに合法的に示すことができたコンテンツを隠すために使用されてはならない。たとえば、タブ付きインターフェイスは単にオーバーフロープレゼンテーションの一種であるため、タブ付きダイアログでパネルを隠すために<code id="the-hidden-attribute:attr-hidden-11"><a href="#attr-hidden">hidden</a></code>を使用することは誤りである。―それはスクロールバーをもつ1つの大きなページ内のすべてのフォームコントロールを示すのと同様である。ちょうど1つのプレゼンテーションからコンテンツを非表示にするためにこの属性を使用することも同様に誤りである。―何かが<code id="the-hidden-attribute:attr-hidden-12"><a href="#attr-hidden">hidden</a></code>とマークされる場合、それは、たとえばスクリーンリーダーなどを含む、すべてのプレゼンテーションから隠されている。</p>

  
  

  <p>自身が<code id="the-hidden-attribute:attr-hidden-13"><a href="#attr-hidden">hidden</a></code>でない要素は、<code id="the-hidden-attribute:attr-hidden-14"><a href="#attr-hidden">hidden</a></code>である要素へ<a id="the-hidden-attribute:hyperlink" href="links.html#hyperlink">ハイパーリンク</a>されてはならない。自身が<code id="the-hidden-attribute:attr-hidden-15"><a href="#attr-hidden">hidden</a></code>でない<code id="the-hidden-attribute:the-label-element"><a href="forms.html#the-label-element">label</a></code>および<code id="the-hidden-attribute:the-output-element"><a href="form-elements.html#the-output-element">output</a></code>要素の<code>for</code>属性も同様に、<code id="the-hidden-attribute:attr-hidden-16"><a href="#attr-hidden">hidden</a></code>である要素を参照してはならない。どちらの場合も、このような参照はユーザーの混乱を引き起こすだろう。</p>

  <p>しかし、要素およびスクリプトは、他のコンテキストで<code id="the-hidden-attribute:attr-hidden-17"><a href="#attr-hidden">hidden</a></code>である要素を参照してもよい。</p>

  <div class="example"><p>たとえば、<code id="the-hidden-attribute:attr-hidden-18"><a href="#attr-hidden">hidden</a></code>属性でマークされたセクションにリンクする<code id="the-hidden-attribute:attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code>属性を使用するのは誤りだろう。コンテンツが適切または関連しない場合、それにリンクする理由はない。</p>

   <p>しかし、自身が<code id="the-hidden-attribute:attr-hidden-19"><a href="#attr-hidden">hidden</a></code>である説明を参照するために、ARIA <code id="the-hidden-attribute:attr-aria-describedby"><a data-x-internal="attr-aria-describedby" href="http://momdo.github.io/wai-aria-1.2/#aria-describedby">aria-describedby</a></code>属性を使用することは構わない。説明を非表示にすることはそれらが単独で有用でないことを意味する一方で、それらは、それらが説明する要素から参照される特定のコンテキストにおいて有用である方法で記述することもできる。</p>

   <p>同様に、<code id="the-hidden-attribute:attr-hidden-20"><a href="#attr-hidden">hidden</a></code>属性を持つ<code id="the-hidden-attribute:the-canvas-element"><a href="canvas.html#the-canvas-element">canvas</a></code>要素は、オフスクリーンバッファーとしてスクリプト化されたグラフィックスエンジンによって使用されるかもしれず、フォームコントロールは、<code id="the-hidden-attribute:attr-fae-form"><a href="form-control-infrastructure.html#attr-fae-form">form</a></code>属性を使用する隠し<code id="the-hidden-attribute:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素を参照するかもしれない。</p>

  </div>

  <p><code id="the-hidden-attribute:attr-hidden-21"><a href="#attr-hidden">hidden</a></code>属性によって非表示にされたセクション内の要素は依然としてアクティブである。たとえば、そのようなセクションでのスクリプトやフォームコントロールは、依然として実行および送信する。それらのプレゼンテーションのみがユーザーに変更される。</p>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/hidden" title="The HTMLElement property hidden reflects the value of the element's hidden attribute.">HTMLElement/hidden</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>5.1+</span></span><span class="chrome yes"><span>Chrome</span><span>6+</span></span><hr><span class="opera yes"><span>Opera</span><span>11.6+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12+</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLElement" id="dom-hidden" data-dfn-type="attribute"><code>hidden</code></dfn> getter steps are:</p>

  <ol><li><p>If the <code id="the-hidden-attribute:attr-hidden-22"><a href="#attr-hidden">hidden</a></code> attribute is in the <a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-9">until-found</a> state, then return "<code id="the-hidden-attribute:attr-hidden-until-found-keyword"><a href="#attr-hidden-until-found-keyword">until-found</a></code>".<li><p>If the <code id="the-hidden-attribute:attr-hidden-23"><a href="#attr-hidden">hidden</a></code> attribute is set, then return true.<li><p>falseを返す。</ol>

  <p>The <code id="the-hidden-attribute:dom-hidden"><a href="#dom-hidden">hidden</a></code> setter steps are:</p>

  <ol><li><p>If the given value is a string that is an <a id="the-hidden-attribute:ascii-case-insensitive" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for "<code id="the-hidden-attribute:attr-hidden-until-found-keyword-2"><a href="#attr-hidden-until-found-keyword">until-found</a></code>", then set the <code id="the-hidden-attribute:attr-hidden-24"><a href="#attr-hidden">hidden</a></code> attribute to "<code id="the-hidden-attribute:attr-hidden-until-found-keyword-3"><a href="#attr-hidden-until-found-keyword">until-found</a></code>".<li><p>Otherwise, if the given value is false, then remove the <code id="the-hidden-attribute:attr-hidden-25"><a href="#attr-hidden">hidden</a></code> attribute.<li><p>Otherwise, if the given value is the empty string, then remove the <code id="the-hidden-attribute:attr-hidden-26"><a href="#attr-hidden">hidden</a></code> attribute.<li><p>Otherwise, if the given value is null, then remove the <code id="the-hidden-attribute:attr-hidden-27"><a href="#attr-hidden">hidden</a></code> attribute.<li><p>Otherwise, if the given value is 0, then remove the <code id="the-hidden-attribute:attr-hidden-28"><a href="#attr-hidden">hidden</a></code> attribute.<li><p>Otherwise, if the given value is NaN, then remove the <code id="the-hidden-attribute:attr-hidden-29"><a href="#attr-hidden">hidden</a></code> attribute.<li><p>Otherwise, set the <code id="the-hidden-attribute:attr-hidden-30"><a href="#attr-hidden">hidden</a></code> attribute to the empty string.</ol>

  <p>The <dfn id="ancestor-hidden-until-found-revealing-algorithm">ancestor hidden-until-found revealing algorithm</dfn> is to run the following steps on <var>currentNode</var>:</p>

  <ol><li><p>While <var>currentNode</var> has a parent node within the <a id="the-hidden-attribute:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">flat tree</a>:</p>

    <ol><li><p>If <var>currentNode</var> has the <code id="the-hidden-attribute:attr-hidden-31"><a href="#attr-hidden">hidden</a></code> attribute in the <a href="#attr-hidden-until-found-state" id="the-hidden-attribute:attr-hidden-until-found-state-10">hidden until found</a> state, then:</p>

      <ol><li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="the-hidden-attribute:concept-event-fire" data-x-internal="concept-event-fire">Fire an event</a> named <code id="the-hidden-attribute:event-beforematch-2"><a href="indices.html#event-beforematch">beforematch</a></code> at <var>currentNode</var>.<li><p>Remove the <code id="the-hidden-attribute:attr-hidden-32"><a href="#attr-hidden">hidden</a></code> attribute from <var>currentNode</var>.</ol>
     <li><p>Set <var>currentNode</var> to the parent node of <var>currentNode</var> within the <a id="the-hidden-attribute:flat-tree-2" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">flat tree</a>.</ol>
   </ol>

  

  <h3 id="page-visibility"><span class="secno">6.2</span> ページの可視<a href="#page-visibility" class="self-link"></a></h3>

  <p>作成時の初期値を含む、<a id="page-visibility:traversable-navigable" href="document-sequences.html#traversable-navigable">トラバース可能なナビゲート可能</a>の<a id="page-visibility:system-visibility-state" href="document-sequences.html#system-visibility-state">システム可視状態</a>は、ユーザー エージェントによって決定される。たとえば、ブラウザーウィンドウが最小化されているか、ブラウザータブが現在バックグラウンドにあるか、またはタスクスイッチャーなどのシステム要素がページを覆い隠しているかどうかを表す。</p>

  <p>When a user-agent determines that the <a id="page-visibility:system-visibility-state-2" href="document-sequences.html#system-visibility-state">system visibility state</a> for <a id="page-visibility:traversable-navigable-2" href="document-sequences.html#traversable-navigable">traversable navigable</a> <var>traversable</var> has changed to <var>newState</var>, it must run the following steps:</p>

  <ol><li><p>Let <var>navigables</var> be the <a id="page-visibility:inclusive-descendant-navigables" href="document-sequences.html#inclusive-descendant-navigables">inclusive descendant navigables</a> of <var>traversable</var>'s <a href="document-sequences.html#nav-document" id="page-visibility:nav-document">active document</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="page-visibility:list-iterate" data-x-internal="list-iterate">For each</a> <var>navigable</var> of <var>navigables</var> <span class="XXX">in what order?</span>:</p>

    <ol><li><p>Let <var>document</var> be <var>navigable</var>'s <a href="document-sequences.html#nav-document" id="page-visibility:nav-document-2">active document</a>.<li><p><a id="page-visibility:queue-a-global-task" href="webappapis.html#queue-a-global-task">Queue a global task</a> on the <a id="page-visibility:user-interaction-task-source" href="webappapis.html#user-interaction-task-source">user interaction task source</a> given <var>document</var>'s <a id="page-visibility:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a> to <a href="#update-the-visibility-state" id="page-visibility:update-the-visibility-state">update the visibility state</a> of <var>document</var> with <var>newState</var>.</ol>
   </ol>

  <p><code id="page-visibility:document"><a href="dom.html#document">Document</a></code>は<dfn data-dfn-for="Document" id="visibility-state" data-export="">可視状態</dfn>を持ち、これは"<code>hidden</code>"または"<code>visible</code>"のいずれかで、最初は"<code>hidden</code>"に設定される。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/visibilityState" title="The Document.visibilityState read-only property returns the visibility of the document, that is in which context this element is now visible. It is useful to know if the document is in the background or an invisible tab, or only loaded for pre-rendering.">Document/visibilityState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>18+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>33+</span></span><hr><span class="opera yes"><span>Opera</span><span>20+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4.3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>20+</span></span></div></div></div><p><dfn data-dfn-for="Document" id="dom-document-visibilitystate" data-dfn-type="attribute"><code>visibilityState</code></dfn>ゲッターの手順は、<a id="page-visibility:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">この</a><a href="#visibility-state" id="page-visibility:visibility-state">可視状態</a>を返すものである。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/hidden" title="The Document.hidden read-only property returns a Boolean value indicating if the page is considered hidden or not.">Document/hidden</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>18+</span></span><span class="safari yes"><span>Safari</span><span>7+</span></span><span class="chrome yes"><span>Chrome</span><span>33+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4.3+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><p><dfn data-dfn-for="Document" id="dom-document-hidden" data-dfn-type="attribute"><code>hidden</code></dfn>のゲッター手順は、<a id="page-visibility:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">この</a><a href="#visibility-state" id="page-visibility:visibility-state-2">可視状態</a>が"<code>hidden</code>"の場合はtrueを返し、それ以外の場合はfalseを返すものである。</p>

  <p>To <dfn id="update-the-visibility-state">update the visibility state</dfn> of <code id="page-visibility:document-2"><a href="dom.html#document">Document</a></code> <var>document</var> to <var>visibilityState</var>:</p>

  <ol><li><p>If <var>document</var>'s <a href="#visibility-state" id="page-visibility:visibility-state-3">visibility state</a> equals <var>visibilityState</var>, then return.<li><p>Set <var>document</var>'s <a href="#visibility-state" id="page-visibility:visibility-state-4">visibility state</a> to <var>visibilityState</var>.<li><p><a href="https://w3c.github.io/performance-timeline/#queue-a-performanceentry" id="page-visibility:queue-a-performance-entry" data-x-internal="queue-a-performance-entry">Queue</a> a new <code id="page-visibility:visibilitystateentry"><a href="#visibilitystateentry">VisibilityStateEntry</a></code> whose <a href="#visibilitystateentry-state" id="page-visibility:visibilitystateentry-state">visibility state</a> is <var>visibilityState</var> and whose <a href="#visibilitystateentry-timestamp" id="page-visibility:visibilitystateentry-timestamp">timestamp</a> is the <a id="page-visibility:current-high-resolution-time" href="https://triple-underscore.github.io/hr-time-ja.html#dfn-current-high-resolution-time" data-x-internal="current-high-resolution-time">current high resolution time</a> given <var>document</var>'s <a id="page-visibility:concept-relevant-global-2" href="webappapis.html#concept-relevant-global">relevant global object</a>.</p>

   <li><p>Run the <a id="page-visibility:screen-orientation-change-steps" href="https://w3c.github.io/screen-orientation/#dfn-screen-orientation-change-steps" data-x-internal="screen-orientation-change-steps">screen orientation change steps</a> with <var>document</var>. <a href="references.html#refsSCREENORIENTATION">[SCREENORIENTATION]</a><li><p>Run any <dfn id="page-visibility-change-steps" data-export="">page visibility change steps</dfn> which may be defined in other specifications, with <a href="#visibility-state" id="page-visibility:visibility-state-5">visibility state</a> and <var>document</var>.</p>

    <p class="XXX">It would be better if specification authors sent a pull request to add calls from here into their specifications directly, instead of using the <a href="#page-visibility-change-steps" id="page-visibility:page-visibility-change-steps">page visibility change steps</a> hook, to ensure well-defined cross-specification call order. As of the time of this writing the following specifications are known to have <a href="#page-visibility-change-steps" id="page-visibility:page-visibility-change-steps-2">page visibility change steps</a>, which will be run in an unspecified order: <cite>Device Posture API</cite> and <cite>Web NFC</cite>. <a href="references.html#refsDEVICEPOSTURE">[DEVICEPOSTURE]</a> <a href="references.html#refsWEBNFC">[WEBNFC]</a></p>
   <li><p>Fire an event named <code id="page-visibility:event-visibilitychange"><a href="indices.html#event-visibilitychange">visibilitychange</a></code> at <var>document</var>, with its <code id="page-visibility:dom-event-bubbles"><a data-x-internal="dom-event-bubbles" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-bubbles">bubbles</a></code> attribute initialized to true.</ol>

  <h4 id="the-visibilitystateentry-interface"><span class="secno">6.2.1</span> <code id="the-visibilitystateentry-interface:visibilitystateentry"><a href="#visibilitystateentry">VisibilityStateEntry</a></code>インターフェイス<a href="#the-visibilitystateentry-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/VisibilityStateEntry" title="The VisibilityStateEntry interface provides timings of page visibility state changes, i.e., when a tab changes from the foreground to the background or vice versa.">VisibilityStateEntry</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>115+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>115+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p><code id="the-visibilitystateentry-interface:visibilitystateentry-2"><a href="#visibilitystateentry">VisibilityStateEntry</a></code>インターフェイスは、文書がアクティブになった瞬間から、文書の可視性の変更を公開する。</p>

  <div class="example">たとえば、これは、ページ内のJavaScriptコードが、可視性の変化とペイントのタイミングの相関関係を調べることを可能にする。<pre><code class='js'><c- a>function</c-> wasHiddenBeforeFirstContentfulPaint<c- p>()</c-> <c- p>{</c->
    <c- a>const</c-> fcpEntry <c- o>=</c-> performance<c- p>.</c->getEntriesByName<c- p>(</c-><c- u>"first-contentful-paint"</c-><c- p>)[</c-><c- mf>0</c-><c- p>];</c->
    <c- a>const</c-> visibilityStateEntries <c- o>=</c-> performance<c- p>.</c->getEntriesByType<c- p>(</c-><c- u>"visibility-state"</c-><c- p>);</c->
    <c- k>return</c-> visibilityStateEntries<c- p>.</c->some<c- p>(</c->e <c- p>=></c->
                                            e<c- p>.</c->startTime <c- o>&lt;</c-> fcpEntry<c- p>.</c->startTime <c- o>&amp;&amp;</c->
                                            e<c- p>.</c->name <c- o>===</c-> <c- u>"hidden"</c-><c- p>);</c->
<c- p>}</c-></code></pre>
  </div>

  <p class="note">ページを非表示にすると、レンダリングおよびその他のユーザエージェント操作のスロットリングが発生する可能性があるため、そのようなスロットリングが発生したことを示すものとして、可視の変更を使用するのが一般的である。ただし、長時間の非アクティブ状態など、他の要因によっても、さまざまなブラウザーでスロットリングが発生する可能性がある。</p>

  <pre><code class='idl'>[<c- g>Exposed</c->=(<c- n>Window</c->)]
<c- b>interface</c-> <dfn id='visibilitystateentry' data-dfn-type='interface'><c- g>VisibilityStateEntry</c-></dfn> : <a id='the-visibilitystateentry-interface:performanceentry' href='https://w3c.github.io/performance-timeline/#dom-performanceentry' data-x-internal='performanceentry'><c- n>PerformanceEntry</c-></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#visibilitystateentry-name' id='the-visibilitystateentry-interface:visibilitystateentry-name'><c- g>name</c-></a>;                 // shadows inherited <a href='https://w3c.github.io/performance-timeline/#dom-performanceentry-name' id='the-visibilitystateentry-interface:performanceentry-name' data-x-internal='performanceentry-name'>name</a>
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#visibilitystateentry-entrytype' id='the-visibilitystateentry-interface:visibilitystateentry-entrytype'><c- g>entryType</c-></a>;            // shadows inherited <a href='https://w3c.github.io/performance-timeline/#dom-performanceentry-entrytype' id='the-visibilitystateentry-interface:performanceentry-entrytype' data-x-internal='performanceentry-entrytype'>entryType</a>
  <c- b>readonly</c-> <c- b>attribute</c-> <c- n>DOMHighResTimeStamp</c-> <a href='#visibilitystateentry-starttime' id='the-visibilitystateentry-interface:visibilitystateentry-starttime'><c- g>startTime</c-></a>;  // shadows inherited <a href='https://w3c.github.io/performance-timeline/#dom-performanceentry-starttime' id='the-visibilitystateentry-interface:performanceentry-starttime' data-x-internal='performanceentry-starttime'>startTime</a>
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>unsigned</c-> <c- b>long</c-> <a href='#visibilitystateentry-duration' id='the-visibilitystateentry-interface:visibilitystateentry-duration'><c- g>duration</c-></a>;         // shadows inherited <a href='https://w3c.github.io/performance-timeline/#dom-performanceentry-duration' id='the-visibilitystateentry-interface:performanceentry-duration' data-x-internal='performanceentry-duration'>duration</a>
};</code></pre>

  <p><code id="the-visibilitystateentry-interface:visibilitystateentry-3"><a href="#visibilitystateentry">VisibilityStateEntry</a></code>は、関連付けられた<a id="the-visibilitystateentry-interface:domhighrestimestamp" href="https://triple-underscore.github.io/hr-time-ja.html#dom-domhighrestimestamp" data-x-internal="domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> <dfn id="visibilitystateentry-timestamp">タイムスタンプ</dfn>を持つ。</p>

  <p><code id="the-visibilitystateentry-interface:visibilitystateentry-4"><a href="#visibilitystateentry">VisibilityStateEntry</a></code>は、関連付けられた"<code>visible</code>"または"<code>hidden</code>"<dfn id="visibilitystateentry-state">可視状態</dfn>を持つ。</p>

  <p><dfn id="visibilitystateentry-name"><code>name</code></dfn>ゲッターステップは、<a id="the-visibilitystateentry-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>の<a href="#visibilitystateentry-state" id="the-visibilitystateentry-interface:visibilitystateentry-state">可視状態</a>を返す。</p>

  <p><dfn id="visibilitystateentry-entrytype"><code>entryType</code></dfn>ゲッターステップは、"<code>visibility-state</code>"を返す。</p>

  <p><dfn id="visibilitystateentry-starttime"><code>startTime</code></dfn>ゲッターステップは、<a id="the-visibilitystateentry-interface:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>の<a href="#visibilitystateentry-timestamp" id="the-visibilitystateentry-interface:visibilitystateentry-timestamp">タイムスタンプ</a>を返す。</p>

  <p><dfn id="visibilitystateentry-duration"><code>duration</code></dfn>ゲッターステップは0を返す。</p>


  <h3 id="inert-subtrees"><span class="secno">6.3</span> 不活性サブツリー<a href="#inert-subtrees" class="self-link"></a></h3>

  <p class="note">同じ名前の属性の説明については、<code id="inert-subtrees:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>も参照のこと。</p>

  <p>ノード（特に要素およびテキストノード）は<dfn id="inert">不活性</dfn>である可能性がある。ノードが<a href="#inert" id="inert-subtrees:inert">不活性</a>である場合：</p>

  <ul><li><p>ヒットテストは、あたかも<a id="inert-subtrees:'pointer-events'" href="https://triple-underscore.github.io/css-ui-ja.html#pointer-events-control" data-x-internal="'pointer-events'">'pointer-events'</a> CSSプロパティが'none'に設定されているかのように動作しなければならない。<li><p>テキスト選択機能は、あたかも<a id="inert-subtrees:'user-select'" href="https://triple-underscore.github.io/css-ui-ja.html#content-selection" data-x-internal="'user-select'">'user-select'</a> CSSプロパティが'none'に設定されているかのように動作しなければならない。<li><p><a id="inert-subtrees:editable" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">編集可能</a>である場合、ノードはあたかも編集不可能であるかのように動作する。<li><p>ユーザーエージェントは、<a href="#find-in-page-2" id="inert-subtrees:find-in-page-2">ページ内検索</a>の目的でノードを無視すべきである。</ul>

  <p class="note">通例、不活性ノードにフォーカスを当てることはできず、ユーザーエージェントは非活性ノードをアクセシビリティAPIまたは支援技術に公開しない。<a href="interactive-elements.html#concept-command" id="inert-subtrees:concept-command">コマンド</a>である不活性ノードは、上記の方法ではユーザーには使用不能となる。</p>

  <p>いずれにせよ、ユーザーエージェントは、<a href="#find-in-page-2" id="inert-subtrees:find-in-page-2-2">ページ内検索</a>およびテキスト選択の制限をユーザーが上書き可能にしてもよい。</p>

  <p>デフォルトでは、ノードは<a href="#inert" id="inert-subtrees:inert-2">不活性</a>ではない。</p>

  <h4 id="modal-dialogs-and-inert-subtrees"><span class="secno">6.3.1</span> モーダルダイアログと不活性サブツリー<a href="#modal-dialogs-and-inert-subtrees" class="self-link"></a></h4>

  <p><var>subject</var>が<var>document</var>の<a id="modal-dialogs-and-inert-subtrees:top-layer" href="https://drafts.csswg.org/css-position-4/#document-top-layer" data-x-internal="top-layer">最上位レイヤー</a>の一番上の<code id="modal-dialogs-and-inert-subtrees:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素である場合、<code id="modal-dialogs-and-inert-subtrees:document"><a href="dom.html#document">Document</a></code> <var>document</var>は<dfn id="blocked-by-a-modal-dialog">モーダルダイアログボックスによってブロックされる</dfn><var>subject</var>である。<var>document</var>がそのようにブロックされる一方で、<var>document</var>に<a id="modal-dialogs-and-inert-subtrees:connected" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">接続されている</a>すべてのノードは、<var>subject</var>要素とその<a id="modal-dialogs-and-inert-subtrees:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫を除き、<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert">不活性</a>とマークされなければならない。</p>

  <p><var>subject</var>は、<code id="modal-dialogs-and-inert-subtrees:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>属性を介してさらに<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert-2">不活性</a>になることができるが、<var>subject</var>自体に指定されている場合に限る（つまり、<var>subject</var>は祖先の不活性を回避する）。<var>subject</var>の<a id="modal-dialogs-and-inert-subtrees:flat-tree-2" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫は、同じように<a href="#inert" id="modal-dialogs-and-inert-subtrees:inert-3">不活性</a>になることがある。</p>

  <p class="note"><code id="modal-dialogs-and-inert-subtrees:the-dialog-element-2"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素の<code id="modal-dialogs-and-inert-subtrees:dom-dialog-showmodal"><a href="interactive-elements.html#dom-dialog-showmodal">showModal()</a></code>メソッドは、<code id="modal-dialogs-and-inert-subtrees:the-dialog-element-3"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素を<a id="modal-dialogs-and-inert-subtrees:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">ノード文書</a>の<a id="modal-dialogs-and-inert-subtrees:top-layer-2" href="https://drafts.csswg.org/css-position-4/#document-top-layer" data-x-internal="top-layer">最上位レイヤー</a>に<a href="https://drafts.csswg.org/css-position-4/#add-an-element-to-the-top-layer" id="modal-dialogs-and-inert-subtrees:add-an-element-to-the-top-layer" data-x-internal="add-an-element-to-the-top-layer">追加する</a>ことによって、このメカニズムをトリガーさせる。</p>

  <h4 id="the-inert-attribute"><span class="secno">6.3.2</span> <dfn><code>inert</code></dfn>属性<a href="#the-inert-attribute" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inert" title="The inert global attribute is a Boolean attribute indicating that the browser will ignore the element. With the inert attribute, all of the element's flat tree descendants (such as modal &lt;dialog>s) that don't otherwise escape inertness are ignored. The inert attribute also makes the browser ignore input events sent by the user, including focus-related events and events from assistive technologies.">Global_attributes/inert</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>112+</span></span><span class="safari yes"><span>Safari</span><span>15.5+</span></span><span class="chrome yes"><span>Chrome</span><span>102+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>102+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p><code id="the-inert-attribute:the-inert-attribute"><a href="#the-inert-attribute">inert</a></code>属性は、その存在によって、（モーダルダイアログなど）他の方法では不活性化を免れない要素およびそのすべての<a id="the-inert-attribute:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">フラットツリー</a>の子孫がユーザーエージェントによって<a href="#inert" id="the-inert-attribute:inert">不活性</a>にされることを示す<a id="the-inert-attribute:boolean-attribute" href="common-microsyntaxes.html#boolean-attribute">真偽属性</a>である。</p>

  <p>不活性サブツリーは、不活性状態ではないページの外観を理解または使用するために重要なコンテンツまたはコントロールを含むべきでない。不活性サブツリー内のコンテンツは、すべてのユーザーによって認識できる、またはインタラクティブではない。著者は、要素が表す内容が何らかの形で視覚的に隠されていない限り、要素を不活性と指定すべきでない。ほとんどの場合、著者は個々のフォームコントロールに<code id="the-inert-attribute:inert-2"><a href="#inert">inert</a></code>属性を指定すべきでない。このような場合は、<code id="the-inert-attribute:attr-fe-disabled"><a href="form-control-infrastructure.html#attr-fe-disabled">disabled</a></code>属性の方がおそらく適切である。</p>

  <div class="example"><p>次の例は、"loading"メッセージによって視覚的に隠されている、部分的に読み込まれたコンテンツを不活性としてマークする方法を示す。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>section</c-> <c- e>aria-labelledby</c-><c- o>=</c-><c- s>s1</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>h3</c-> <c- e>id</c-><c- o>=</c-><c- s>s1</c-><c- p>></c->Population by City<c- p>&lt;/</c-><c- f>h3</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>container</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>class</c-><c- o>=</c-><c- s>loading</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>></c->Loading...<c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
    <c- p>&lt;</c-><c- f>div</c-> <c- e>inert</c-><c- p>></c->
      <c- p>&lt;</c-><c- f>form</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->Date range<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>start</c-><c- p>></c->Start<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>date</c-> <c- e>id</c-><c- o>=</c-><c- s>start</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>end</c-><c- p>></c->End<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>date</c-> <c- e>id</c-><c- o>=</c-><c- s>end</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>div</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>button</c-><c- p>></c->Apply<c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
        <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
      <c- p>&lt;/</c-><c- f>form</c-><c- p>></c->
      <c- p>&lt;</c-><c- f>table</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>caption</c-><c- p>></c->From 20-- to 20--<c- p>&lt;/</c-><c- f>caption</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>thead</c-><c- p>></c->
          <c- p>&lt;</c-><c- f>tr</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->City<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->State<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->20-- Population<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->20-- Population<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
            <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Percentage change<c- p>&lt;/</c-><c- f>th</c-><c- p>></c->
          <c- p>&lt;/</c-><c- f>tr</c-><c- p>></c->
        <c- p>&lt;/</c-><c- f>thead</c-><c- p>></c->
        <c- p>&lt;</c-><c- f>tbody</c-><c- p>></c->
          <c- c>&lt;!-- ... --></c->
        <c- p>&lt;/</c-><c- f>tbody</c-><c- p>></c->
      <c- p>&lt;/</c-><c- f>table</c-><c- p>></c->
    <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>div</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c-></code></pre><img src="https://html.spec.whatwg.org/images/inert-example-loading-section.png" width="947" alt="Screenshot of Population by City content with an overlaid loading message which visually obscures the form controls and data table which have not fully rendered, and thus are in the inert state." height="243"><p> "loading"のオーバーレイは、不活性のコンテンツを覆い隠し、不活性のコンテンツが現在アクセス可能でないことを視覚的に明らかにする。見出しおよび"loading"のテキストは、<code id="the-inert-attribute:inert-3"><a href="#inert">inert</a></code>属性をもつ要素の子孫ではないことに注意する。これは、このテキストがすべてのユーザーをアクセス可能にするが、不活性のコンテンツは誰も操作できなくなる。</p>
  </div>

  <div class="note"><p>デフォルトでは、要素またはそのサブツリーが不活性であることを示す永続的な視覚的表示は存在しない。そのようなコンテンツに適切な視覚的なスタイルは、多くの場合、コンテキストに依存する。例えば、不活性な画面外のナビゲーションパネルは、その画面外の位置がコンテンツを視覚的にさえぎるので、デフォルトスタイルを必要としない。同様に、モーダル<code id="the-inert-attribute:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素のbackdropは、ウェブページの不活性なコンテンツを具体的にスタイル設定するのではなく、視覚的にさえぎる手段として機能する。</p>

   <p>しかし、他の多くの状況では、ユーザーの混乱を避けるために、著者は文書のどの部分がアクティブで、どの部分が不活性であるかを明確にマークすることが強く勧める。特に、すべてのユーザーがページのすべての部分を一度に表示できるわけではないことを覚えておく価値がある。 たとえば、スクリーンリーダーのユーザー、小型のデバイスや拡大鏡を使用しているユーザー、特に小さなウィンドウを使用しているユーザーでさえ、ページのアクティブな部分を見ることができず、不活性なセクションが明らかに不活性でない場合はフラストレーションを感じる可能性がある。</p>
  </div>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/inert" title="The HTMLElement property inert reflects the value of the element's inert attribute. It is a boolean value that, when present, makes the browser "ignore" user input events for the element, including focus events and events from assistive technologies. The browser may also ignore page search and text selection in the element. This can be useful when building UIs such as modals where you would want to "trap" the focus inside the modal when it's visible.">HTMLElement/inert</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>112+</span></span><span class="safari yes"><span>Safari</span><span>15.5+</span></span><span class="chrome yes"><span>Chrome</span><span>102+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>102+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn id="dom-inert"><code>inert</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id="the-inert-attribute:reflect" href="common-dom-interfaces.html#reflect">反映</a>しなければならない。</p>

  <h3 id="tracking-user-activation"><span class="secno">6.4</span> <dfn data-export="">ユーザーのアクティブ化</dfn>の追跡<a href="#tracking-user-activation" class="self-link"></a></h3>

  <p>ユーザーに迷惑となる可能性がある特定のAPI（ポップアップを開く、振動する電話など）の悪用を防ぐために、ユーザーエージェントは、ユーザーがウェブページをアクティブに操作している、または少なくとも1回はページを操作した場合にのみ、これらのAPIを許可する。この"アクティブな相互作用"の状態は、この節で定義されたメカニズムを通じて維持される。</p>

  

  <h4 id="user-activation-data-model"><span class="secno">6.4.1</span> Data model<a href="#user-activation-data-model" class="self-link"></a></h4>

  <p>For the purpose of tracking user activation, each <code id="user-activation-data-model:window"><a href="nav-history-apis.html#window">Window</a></code> <var>W</var> has two relevant values:</p>

  <ul><li><p>A <dfn id="last-activation-timestamp">last activation timestamp</dfn>, which is either a <code id="user-activation-data-model:domhighrestimestamp"><a data-x-internal="domhighrestimestamp" href="https://triple-underscore.github.io/hr-time-ja.html#dom-domhighrestimestamp">DOMHighResTimeStamp</a></code>, positive infinity (indicating that <var>W</var> has never been activated), or negative infinity (indicating that the activation has been <a href="#consume-user-activation" id="user-activation-data-model:consume-user-activation">consumed</a>). Initially positive infinity.<li><p>A <dfn id="last-history-action-activation-timestamp">last history-action activation timestamp</dfn>, which is either a <code id="user-activation-data-model:domhighrestimestamp-2"><a data-x-internal="domhighrestimestamp" href="https://triple-underscore.github.io/hr-time-ja.html#dom-domhighrestimestamp">DOMHighResTimeStamp</a></code> or positive infinity, initially positive infinity.</ul>

  <p>A user agent also defines a <dfn id="transient-activation-duration">transient activation duration</dfn>, which is a constant number indicating how long a user activation is available for certain <a href="#user-activation-gated-apis">user activation-gated APIs</a> (e.g., for opening popups).</p>

  <p class="note">The <a href="#transient-activation-duration" id="user-activation-data-model:transient-activation-duration">transient activation duration</a> is expected be at most a few seconds, so that the user can possibly perceive the link between an interaction with the page and the page calling the activation-gated API.</p>

  <p>We then have the following boolean user activation states for <var>W</var>:</p>

  <dl><dt><dfn id="sticky-activation" data-export="">Sticky activation</dfn><dd><p>When the <a id="user-activation-data-model:current-high-resolution-time" href="https://triple-underscore.github.io/hr-time-ja.html#dfn-current-high-resolution-time" data-x-internal="current-high-resolution-time">current high resolution time</a> given <var>W</var> is greater than or equal to the <a href="#last-activation-timestamp" id="user-activation-data-model:last-activation-timestamp">last activation timestamp</a> in <var>W</var>, <var>W</var> is said to have <a href="#sticky-activation" id="user-activation-data-model:sticky-activation">sticky activation</a>.</p>

    <p>This is <var>W</var>'s historical activation state, indicating whether the user has ever interacted in <var>W</var>. It starts false, then changes to true (and never changes back to false) when <var>W</var> gets the very first <a href="#activation-notification" id="user-activation-data-model:activation-notification">activation notification</a>.</p>
   <dt><dfn id="transient-activation" data-export="">Transient activation</dfn><dd><p>When the <a id="user-activation-data-model:current-high-resolution-time-2" href="https://triple-underscore.github.io/hr-time-ja.html#dfn-current-high-resolution-time" data-x-internal="current-high-resolution-time">current high resolution time</a> given <var>W</var> is greater than or equal to the <a href="#last-activation-timestamp" id="user-activation-data-model:last-activation-timestamp-2">last activation timestamp</a> in <var>W</var>, and less than the <a href="#last-activation-timestamp" id="user-activation-data-model:last-activation-timestamp-3">last activation timestamp</a> in <var>W</var> plus the <a href="#transient-activation-duration" id="user-activation-data-model:transient-activation-duration-2">transient activation duration</a>, then <var>W</var> is said to have <a href="#transient-activation" id="user-activation-data-model:transient-activation">transient activation</a>.</p>

    <p>This is <var>W</var>'s current activation state, indicating whether the user has interacted in <var>W</var> recently. This starts with a false value, and remains true for a limited time after every <a href="#activation-notification" id="user-activation-data-model:activation-notification-2">activation notification</a> <var>W</var> gets.</p>

    <p>The <a href="#transient-activation" id="user-activation-data-model:transient-activation-2">transient activation</a> state is considered <dfn id="activation-expiry">expired</dfn> if it becomes false because the <a href="#transient-activation-duration" id="user-activation-data-model:transient-activation-duration-3">transient activation duration</a> time has elapsed since the last user activation. Note that it can become false even before the expiry time through an <a href="#consume-user-activation" id="user-activation-data-model:consume-user-activation-2">activation consumption</a>.</p>
   <dt><dfn id="history-action-activation">History-action activation</dfn><dd><p>When the <a href="#last-history-action-activation-timestamp" id="user-activation-data-model:last-history-action-activation-timestamp">last history-action activation timestamp</a> of <var>W</var> is not equal to the <a href="#last-activation-timestamp" id="user-activation-data-model:last-activation-timestamp-4">last activation timestamp</a> of <var>W</var>, then <var>W</var> is said to have <a href="#history-action-activation" id="user-activation-data-model:history-action-activation">history-action activation</a>.</p>

    <p>This is a special variant of user activation, used to allow access to certain session history APIs which, if used too frequently, would make it harder for the user to traverse back using <a href="document-lifecycle.html#nav-traversal-ui">browser UI</a>. It starts with a false value, and becomes true whenever the user interacts with <var>W</var>, but is reset to false through <a href="#consume-history-action-user-activation" id="user-activation-data-model:consume-history-action-user-activation">history-action activation consumption</a>. This ensures such APIs cannot be used multiple times in a row without an intervening user activation. But unlike <a href="#transient-activation" id="user-activation-data-model:transient-activation-3">transient activation</a>, there is no time limit within which such APIs must be used.</p>
   </dl>

  <p class="note">The <a href="#last-activation-timestamp" id="user-activation-data-model:last-activation-timestamp-5">last activation timestamp</a> and <a href="#last-history-action-activation-timestamp" id="user-activation-data-model:last-history-action-activation-timestamp-2">last history-action activation timestamp</a> are retained even after the <code id="user-activation-data-model:document"><a href="dom.html#document">Document</a></code> changes its <a id="user-activation-data-model:fully-active" href="document-sequences.html#fully-active">fully active</a> status (e.g., after navigating away from a <code id="user-activation-data-model:document-2"><a href="dom.html#document">Document</a></code>, or navigating to a cached <code id="user-activation-data-model:document-3"><a href="dom.html#document">Document</a></code>). This means <a href="#sticky-activation" id="user-activation-data-model:sticky-activation-2">sticky activation</a> state spans multiple navigations as long as the same <code id="user-activation-data-model:document-4"><a href="dom.html#document">Document</a></code> gets reused. For the transient activation state, the original <a href="#activation-expiry" id="user-activation-data-model:activation-expiry">expiry</a> time remains unchanged (i.e., the state still expires within the <a href="#transient-activation-duration" id="user-activation-data-model:transient-activation-duration-4">transient activation duration</a> limit from the original <a href="#activation-triggering-input-event" id="user-activation-data-model:activation-triggering-input-event">activation triggering input event</a>). It is important to consider this when deciding whether to base certain things off <a href="#sticky-activation" id="user-activation-data-model:sticky-activation-3">sticky activation</a> or <a href="#transient-activation" id="user-activation-data-model:transient-activation-4">transient activation</a>.</p>

  <h4 id="user-activation-processing-model"><span class="secno">6.4.2</span> Processing model<a href="#user-activation-processing-model" class="self-link"></a></h4>

  <p>When a user interaction causes firing of an <a href="#activation-triggering-input-event" id="user-activation-processing-model:activation-triggering-input-event">activation triggering input event</a> in a <code id="user-activation-processing-model:document"><a href="dom.html#document">Document</a></code> <var>document</var>, the user agent must perform the following <dfn id="activation-notification">activation notification</dfn> steps <em>before</em> <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-dispatch" id="user-activation-processing-model:concept-event-dispatch" data-x-internal="concept-event-dispatch">dispatching</a> the event:</p>

  <ol><li><p><a id="user-activation-processing-model:assert" href="https://triple-underscore.github.io/infra-ja.html#assert" data-x-internal="assert">Assert</a>: <var>document</var> is <a id="user-activation-processing-model:fully-active" href="document-sequences.html#fully-active">fully active</a>.<li><p>Let <var>windows</var> be « <var>document</var>'s <a id="user-activation-processing-model:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a> ».<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-extend" id="user-activation-processing-model:list-extend" data-x-internal="list-extend">Extend</a> <var>windows</var> with the <a href="document-sequences.html#nav-window" id="user-activation-processing-model:nav-window">active window</a> of each of <var>document</var>'s <a id="user-activation-processing-model:ancestor-navigables" href="document-sequences.html#ancestor-navigables">ancestor navigables</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-extend" id="user-activation-processing-model:list-extend-2" data-x-internal="list-extend">Extend</a> <var>windows</var> with the <a href="document-sequences.html#nav-window" id="user-activation-processing-model:nav-window-2">active window</a> of each of <var>document</var>'s <a id="user-activation-processing-model:descendant-navigables" href="document-sequences.html#descendant-navigables">descendant navigables</a>, filtered to include only those <a href="document-sequences.html#navigable" id="user-activation-processing-model:navigable">navigables</a> whose <a href="document-sequences.html#nav-document" id="user-activation-processing-model:nav-document">active document</a>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="user-activation-processing-model:concept-document-origin" data-x-internal="concept-document-origin">origin</a> is <a id="user-activation-processing-model:same-origin" href="browsers.html#same-origin">same origin</a> with <var>document</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="user-activation-processing-model:concept-document-origin-2" data-x-internal="concept-document-origin">origin</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="user-activation-processing-model:list-iterate" data-x-internal="list-iterate">For each</a> <var>window</var> in <var>windows</var>, set <var>window</var>'s <a href="#last-activation-timestamp" id="user-activation-processing-model:last-activation-timestamp">last activation timestamp</a> to the <a id="user-activation-processing-model:current-high-resolution-time" href="https://triple-underscore.github.io/hr-time-ja.html#dfn-current-high-resolution-time" data-x-internal="current-high-resolution-time">current high resolution time</a>.</ol>

  <p>An <dfn id="activation-triggering-input-event">activation triggering input event</dfn> is any event whose <code id="user-activation-processing-model:dom-event-istrusted"><a data-x-internal="dom-event-istrusted" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-istrusted">isTrusted</a></code> attribute is true and whose <code id="user-activation-processing-model:dom-event-type"><a data-x-internal="dom-event-type" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-type">type</a></code> is one of:</p>

  <ul class="brief"><li>"<code id="user-activation-processing-model:event-keydown"><a data-x-internal="event-keydown" href="https://triple-underscore.github.io/uievents-ja.html#event-type-keydown">keydown</a></code>", provided the key is neither the <kbd>Esc</kbd> key nor a shortcut key reserved by the user agent.<li>"<code id="user-activation-processing-model:event-mousedown"><a data-x-internal="event-mousedown" href="https://triple-underscore.github.io/uievents-ja.html#event-type-mousedown">mousedown</a></code>".<li>"<code id="user-activation-processing-model:event-pointerdown"><a data-x-internal="event-pointerdown" href="https://triple-underscore.github.io/pointerevents3-ja.html#the-pointerdown-event">pointerdown</a></code>", provided the event's <code id="user-activation-processing-model:pointertype"><a data-x-internal="pointertype" href="https://triple-underscore.github.io/pointerevents3-ja.html#dom-pointerevent-pointertype">pointerType</a></code> is "<code>mouse</code>".<li>"<code id="user-activation-processing-model:event-pointerup"><a data-x-internal="event-pointerup" href="https://triple-underscore.github.io/pointerevents3-ja.html#the-pointerup-event">pointerup</a></code>", provided the event's <code id="user-activation-processing-model:pointertype-2"><a data-x-internal="pointertype" href="https://triple-underscore.github.io/pointerevents3-ja.html#dom-pointerevent-pointertype">pointerType</a></code> is not "<code>mouse</code>".<li>"<code id="user-activation-processing-model:event-touchend"><a data-x-internal="event-touchend" href="https://triple-underscore.github.io/touch-events-ja.html#event-touchend">touchend</a></code>".</ul>

  <p><a href="#activation-consuming-api" id="user-activation-processing-model:activation-consuming-api">Activation consuming APIs</a> defined in this and other specifications can <dfn id="consume-user-activation" data-export="">consume user activation</dfn> by performing the following steps, given a <code id="user-activation-processing-model:window"><a href="nav-history-apis.html#window">Window</a></code> <var>W</var>:</p>

  <ol><li><p>If <var>W</var>'s <a href="nav-history-apis.html#window-navigable" id="user-activation-processing-model:window-navigable">navigable</a> is null, then return.<li><p>Let <var>top</var> be <var>W</var>'s <a href="nav-history-apis.html#window-navigable" id="user-activation-processing-model:window-navigable-2">navigable</a>'s <a href="document-sequences.html#nav-top" id="user-activation-processing-model:nav-top">top-level traversable</a>.<li><p>Let <var>navigables</var> be the <a id="user-activation-processing-model:inclusive-descendant-navigables" href="document-sequences.html#inclusive-descendant-navigables">inclusive descendant navigables</a> of <var>top</var>'s <a href="document-sequences.html#nav-document" id="user-activation-processing-model:nav-document-2">active document</a>.<li><p>Let <var>windows</var> be the list of <code id="user-activation-processing-model:window-2"><a href="nav-history-apis.html#window">Window</a></code> objects constructed by taking the <a href="document-sequences.html#nav-window" id="user-activation-processing-model:nav-window-3">active window</a> of each item in <var>navigables</var>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="user-activation-processing-model:list-iterate-2" data-x-internal="list-iterate">For each</a> <var>window</var> in <var>windows</var>, if <var>window</var>'s <a href="#last-activation-timestamp" id="user-activation-processing-model:last-activation-timestamp-2">last activation timestamp</a> is not positive infinity, then set <var>window</var>'s <a href="#last-activation-timestamp" id="user-activation-processing-model:last-activation-timestamp-3">last activation timestamp</a> to negative infinity.</ol>

  <p><a href="#history-action-activation-consuming-api" id="user-activation-processing-model:history-action-activation-consuming-api">History-action activation-consuming APIs</a> can <dfn id="consume-history-action-user-activation">consume history-action user activation</dfn> by performing the following steps, given a <code id="user-activation-processing-model:window-3"><a href="nav-history-apis.html#window">Window</a></code> <var>W</var>:</p>

  <ol><li><p>If <var>W</var>'s <a href="nav-history-apis.html#window-navigable" id="user-activation-processing-model:window-navigable-3">navigable</a> is null, then return.<li><p>Let <var>top</var> be <var>W</var>'s <a href="nav-history-apis.html#window-navigable" id="user-activation-processing-model:window-navigable-4">navigable</a>'s <a href="document-sequences.html#nav-top" id="user-activation-processing-model:nav-top-2">top-level traversable</a>.<li><p>Let <var>navigables</var> be the <a id="user-activation-processing-model:inclusive-descendant-navigables-2" href="document-sequences.html#inclusive-descendant-navigables">inclusive descendant navigables</a> of <var>top</var>'s <a href="document-sequences.html#nav-document" id="user-activation-processing-model:nav-document-3">active document</a>.<li><p>Let <var>windows</var> be the list of <code id="user-activation-processing-model:window-4"><a href="nav-history-apis.html#window">Window</a></code> objects constructed by taking the <a href="document-sequences.html#nav-window" id="user-activation-processing-model:nav-window-4">active window</a> of each item in <var>navigables</var>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="user-activation-processing-model:list-iterate-3" data-x-internal="list-iterate">For each</a> <var>window</var> in <var>windows</var>, set <var>window</var>'s <a href="#last-history-action-activation-timestamp" id="user-activation-processing-model:last-history-action-activation-timestamp">last history-action activation timestamp</a> to <var>window</var>'s <a href="#last-activation-timestamp" id="user-activation-processing-model:last-activation-timestamp-4">last activation timestamp</a>.</ol>

  <p class="note">Note the asymmetry in the sets of <a href="document-sequences.html#browsing-context" id="user-activation-processing-model:browsing-context">browsing contexts</a> in the page that are affected by an <a href="#activation-notification" id="user-activation-processing-model:activation-notification">activation notification</a> vs an <a href="#consume-user-activation" id="user-activation-processing-model:consume-user-activation">activation consumption</a>: an activation consumption changes (to false) the <a href="#transient-activation" id="user-activation-processing-model:transient-activation">transient activation</a> states for all browsing contexts in the page, but an activation notification changes (to true) the states for a subset of those browsing contexts. The exhaustive nature of consumption here is deliberate: it prevents malicious sites from making multiple calls to an <a href="#activation-consuming-api" id="user-activation-processing-model:activation-consuming-api-2">activation consuming API</a> from a single user activation (possibly by exploiting a deep hierarchy of <code id="user-activation-processing-model:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>s).</p>

  <h4 id="user-activation-gated-apis"><span class="secno">6.4.3</span> ユーザーのアクティブ化の追跡<a href="#user-activation-gated-apis" class="self-link"></a></h4>

  

  <p>ユーザーのアクティブ化に依存するAPIは、さまざまなレベルに分類される：</p>

  <dl><dt><dfn id="sticky-activation-gated-api" data-lt="sticky activation-gated API" data-export="">定着したアクティブ化ゲート型API</dfn><dd><p>このAPIは、<a href="#sticky-activation" id="user-activation-gated-apis:sticky-activation">定着したアクティブ化</a>状態がtrueである必要があるため、最初のユーザーによるアクティブ化までブロックされる。<dt><dfn id="transient-activation-gated-api" data-lt="transient activation-gated
   API" data-export="">一時的なアクティブ化ゲート型API</dfn><dt><dd><p>このAPIは、<a href="#transient-activation" id="user-activation-gated-apis:transient-activation">一時的なアクティブ化</a>状態がtrueであることを必要とするが、それを<a href="#consume-user-activation" id="user-activation-gated-apis:consume-user-activation">消費</a>しないため、一時的な状態が<a href="#activation-expiry" id="user-activation-gated-apis:activation-expiry">期限切れ</a>になるまで、ユーザーによるアクティブ化ごとに複数の呼び出しが許可される。<dt><dfn id="activation-consuming-api" data-lt="transient activation-consuming API" data-export="">一時的なアクティブ化を消費するAPI</dfn><dd><p>このAPIは、<a href="#transient-activation" id="user-activation-gated-apis:transient-activation-2">一時的なアクティブ化</a>状態がtrueであることを必要とし、ユーザーによるアクティブ化ごとの複数の呼び出しを防ぐために、各呼び出しで<a href="#consume-user-activation" id="user-activation-gated-apis:consume-user-activation-2">ユーザーによるアクティブ化を消費する</a>。<dt><dfn id="history-action-activation-consuming-api" data-lt="history-action activation-consuming API" data-export="">履歴アクションのアクティブ化を消費するAPI </dfn><dd><p>このAPIは、<a href="#history-action-activation" id="user-activation-gated-apis:history-action-activation">履歴アクションのアクティブ化</a>状態がtrueであることを要求し、ユーザーアクティブ化ごとに複数のコールが発生するのを防ぐために、各コールで<a href="#consume-history-action-user-activation" id="user-activation-gated-apis:consume-history-action-user-activation">履歴アクションのアクティブ化を消費する</a>。</dl>


  <h4 id="the-useractivation-interface"><span class="secno">6.4.4</span> <code id="the-useractivation-interface:useractivation"><a href="#useractivation">UserActivation</a></code>インターフェイス<a href="#the-useractivation-interface" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation" title="The UserActivation interface allows querying information about a window's user activation state.">UserActivation</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p>各<code id="the-useractivation-interface:window"><a href="nav-history-apis.html#window">Window</a></code>は、<dfn id="associated-useractivation">関連付けられた<code>UserActivation</code></dfn>を持ち、これは<code id="the-useractivation-interface:useractivation-2"><a href="#useractivation">UserActivation</a></code>オブジェクトである。<code id="the-useractivation-interface:window-2"><a href="nav-history-apis.html#window">Window</a></code>オブジェクトの作成時に、<a href="#associated-useractivation" id="the-useractivation-interface:associated-useractivation">関連する<code>UserActivation</code></a>を<code id="the-useractivation-interface:window-3"><a href="nav-history-apis.html#window">Window</a></code>オブジェクトの<a href="webappapis.html#concept-relevant-realm" id="the-useractivation-interface:concept-relevant-realm">関連領域</a>で作成された<a id="the-useractivation-interface:new" href="https://triple-underscore.github.io/WebIDL-JS-ja.html#new" data-x-internal="new">新しい</a><code id="the-useractivation-interface:useractivation-3"><a href="#useractivation">UserActivation</a></code>オブジェクトに設定しなければならない。</p>

  <pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='useractivation' data-dfn-type='interface'><c- g>UserActivation</c-></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-useractivation-hasbeenactive' id='the-useractivation-interface:dom-useractivation-hasbeenactive'><c- g>hasBeenActive</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-useractivation-isactive' id='the-useractivation-interface:dom-useractivation-isactive'><c- g>isActive</c-></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a id='NavigatorUserActivation-partial' href='system-state.html#navigator'><c- g>Navigator</c-></a> {
  [<c- g>SameObject</c->] <c- b>readonly</c-> <c- b>attribute</c-> <code id='the-useractivation-interface:useractivation-4'><a href='#useractivation'><c- n>UserActivation</c-></a></code> <a href='#dom-navigator-useractivation' id='the-useractivation-interface:dom-navigator-useractivation'><c- g>userActivation</c-></a>;
};</code></pre>

  <dl class="domintro"><dt><code><a href="system-state.html#dom-navigator" id="the-useractivation-interface:dom-navigator">navigator</a>.<a href="#dom-navigator-useractivation" id="dom-navigator-useractivation-dev">userActivation</a>.<a href="#dom-useractivation-hasbeenactive" id="dom-useractivation-hasbeenactive-dev">hasBeenActive</a></code><dd><p>ウィンドウが<a href="#sticky-activation" id="the-useractivation-interface:sticky-activation">スティッキーアクティベーション</a>を持つかどうかを返す。</p>
   <dt><code><a href="system-state.html#dom-navigator" id="the-useractivation-interface:dom-navigator-2">navigator</a>.<a href="#dom-navigator-useractivation" id="the-useractivation-interface:dom-navigator-useractivation-2">userActivation</a>.<a href="#dom-useractivation-isactive" id="dom-useractivation-isactive-dev">isActive</a></code><dd><p>ウィンドウが<a href="#transient-activation" id="the-useractivation-interface:transient-activation">一時的にアクティベーション</a>を持つかどうかを返す。</p>
   </dl>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/userActivation" title="The read-only userActivation property of the Navigator interface returns a UserActivation object which contains information about the current window's user activation state.">Navigator/userActivation</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="Navigator" id="dom-navigator-useractivation" data-dfn-type="attribute"><code>userActivation</code></dfn> getter steps are to return <a id="the-useractivation-interface:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="the-useractivation-interface:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a>'s <a href="#associated-useractivation" id="the-useractivation-interface:associated-useractivation-2">associated <code>UserActivation</code></a>.</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation/hasBeenActive" title="The read-only hasBeenActive property of the UserActivation interface indicates whether the current window has sticky user activation (see sticky activation).">UserActivation/hasBeenActive</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="UserActivation" id="dom-useractivation-hasbeenactive" data-dfn-type="attribute"><code>hasBeenActive</code></dfn> getter steps are to return true if <a id="the-useractivation-interface:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="the-useractivation-interface:concept-relevant-global-2" href="webappapis.html#concept-relevant-global">relevant global object</a> has <a href="#sticky-activation" id="the-useractivation-interface:sticky-activation-2">sticky activation</a>, and false otherwise.</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation/hasBeenActive" title="The read-only hasBeenActive property of the UserActivation interface indicates whether the current window has sticky user activation (see sticky activation).">UserActivation/hasBeenActive</a><div class="support"><span class="firefox no"><span>Firefox</span><span>No</span></span><span class="safari yes"><span>Safari</span><span>16.4+</span></span><span class="chrome yes"><span>Chrome</span><span>72+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="UserActivation" id="dom-useractivation-isactive" data-dfn-type="attribute"><code>isActive</code></dfn> getter steps are to return true if <a id="the-useractivation-interface:this-3" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="the-useractivation-interface:concept-relevant-global-3" href="webappapis.html#concept-relevant-global">relevant global object</a> has <a href="#transient-activation" id="the-useractivation-interface:transient-activation-2">transient activation</a>, and false otherwise.</p>


  <h4 id="user-activation-user-agent-automation"><span class="secno">6.4.5</span> User agent automation<a href="#user-activation-user-agent-automation" class="self-link"></a></h4>

  <p>For the purposes of user-agent automation and application testing, this specification defines the following <a id="user-activation-user-agent-automation:extension-command" href="https://w3c.github.io/webdriver/#dfn-extension-commands" data-x-internal="extension-command">extension command</a> for the <cite>Web Driver</cite> specification. It is optional for a user agent to support the following <a id="user-activation-user-agent-automation:extension-command-2" href="https://w3c.github.io/webdriver/#dfn-extension-commands" data-x-internal="extension-command">extension command</a>. <a href="references.html#refsWEBDRIVER">[WEBDRIVER]</a></p>

  <table class="data"><thead><tr><th>HTTP Method<th>URI Template<tbody><tr><td>`<code>POST</code>`<td><code>/session/{<var>session id</var>}/window/consume-user-activation</code></table>

  <p>The <a id="user-activation-user-agent-automation:remote-end-steps" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" data-x-internal="remote-end-steps">remote end steps</a> are:</p>

  <ol><li><p>Let <var>window</var> be <a href="https://w3c.github.io/webdriver/#dfn-current-browsing-context" id="user-activation-user-agent-automation:webdriver-current-browsing-context" data-x-internal="webdriver-current-browsing-context">current browsing context</a>'s <a id="user-activation-user-agent-automation:active-window" href="document-sequences.html#active-window">active window</a>.<li><p>Let <var>consume</var> be true if <var>window</var> has <a href="#transient-activation" id="user-activation-user-agent-automation:transient-activation">transient activation</a>; otherwise false.<li><p>If <var>consume</var> is true, then <a href="#consume-user-activation" id="user-activation-user-agent-automation:consume-user-activation">consume user activation</a> of <var>window</var>.<li><p>Return <a href="https://w3c.github.io/webdriver/#dfn-success" id="user-activation-user-agent-automation:success-value" data-x-internal="success-value">success</a> with data <var>consume</var>.</ol>

  


  <h3 id="activation"><span class="secno">6.5</span> 要素のアクティブ化動作<a href="#activation" class="self-link"></a></h3>

  <p>HTMLの特定の要素は、ユーザーがアクティブにすることができることを意味する、<a id="activation:activation-behaviour" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">アクティブ化動作</a>を持つ。これは、常に<code id="activation:event-click"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code>イベントによって発生する。</p>

  

  <p>The user agent should allow the user to manually trigger elements that have an <a id="activation:activation-behaviour-2" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">activation behavior</a>, for instance using keyboard or voice input, or through mouse clicks. When the user triggers an element with a defined <a id="activation:activation-behaviour-3" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">activation behavior</a> in a manner other than clicking it, the default action of the interaction event must be to <a id="activation:fire-a-click-event" href="webappapis.html#fire-a-click-event">fire a <code>click</code> event</a> at the element.</p>

  

  

  <dl class="domintro"><dt><code><var>element</var>.<a href="#dom-click" id="dom-click-dev">click</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click" title="The HTMLElement.click() method simulates a mouse click on an element.">HTMLElement/click</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>9+</span></span><hr><span class="opera yes"><span>Opera</span><span>10.5+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>11+</span></span></div></div></div><dd><p>あたかも要素をクリックされたかのように動作する。</dl>

  

  <p>Each element has an associated <dfn id="click-in-progress-flag">click in progress flag</dfn>, which is initially unset.</p>

  <p>The <dfn data-dfn-for="HTMLElement" id="dom-click" data-dfn-type="method"><code>click()</code></dfn> method must run the following steps:</p>

  <ol><li><p>If this element is a form control that is <a href="form-control-infrastructure.html#concept-fe-disabled" id="activation:concept-fe-disabled">disabled</a>, then return.<li><p>If this element's <a href="#click-in-progress-flag" id="activation:click-in-progress-flag">click in progress flag</a> is set, then return.<li><p>Set this element's <a href="#click-in-progress-flag" id="activation:click-in-progress-flag-2">click in progress flag</a>.<li><p><a id="activation:fire-a-synthetic-pointer-event" href="webappapis.html#fire-a-synthetic-pointer-event">Fire a synthetic pointer event</a> named <code id="activation:event-click-2"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code> at this element, with the <var>not trusted flag</var> set.<li><p>Unset this element's <a href="#click-in-progress-flag" id="activation:click-in-progress-flag-3">click in progress flag</a>.</ol>

  

  <h4 id="the-toggleevent-interface"><span class="secno">6.5.1</span> The <code id="the-toggleevent-interface:toggleevent"><a href="#toggleevent">ToggleEvent</a></code> interface<a href="#the-toggleevent-interface" class="self-link"></a></h4>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent/ToggleEvent" title="The ToggleEvent() constructor creates a new ToggleEvent object.">ToggleEvent/ToggleEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent" title="The ToggleEvent interface represents an event notifying the user when a popover element's state toggles between showing and hidden.">ToggleEvent</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='toggleevent' data-dfn-type='interface'><c- g>ToggleEvent</c-></dfn> : <a id='the-toggleevent-interface:event' href='https://triple-underscore.github.io/DOM4-ja.html#interface-event' data-x-internal='event'><c- n>Event</c-></a> {
  <c- g>constructor</c->(<c- b>DOMString</c-> <c- g>type</c->, <c- b>optional</c-> <a href='#toggleeventinit' id='the-toggleevent-interface:toggleeventinit'><c- n>ToggleEventInit</c-></a> <c- g>eventInitDict</c-> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>DOMString</c-> <c- g>oldState</c->;
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>DOMString</c-> <c- g>newState</c->;
};

<c- b>dictionary</c-> <dfn id='toggleeventinit' data-dfn-type='dictionary'><c- g>ToggleEventInit</c-></dfn> : <a id='the-toggleevent-interface:eventinit' href='https://triple-underscore.github.io/DOM4-ja.html#dictdef-eventinit' data-x-internal='eventinit'><c- n>EventInit</c-></a> {
  <c- b>DOMString</c-> <c- g>oldState</c-> = "";
  <c- b>DOMString</c-> <c- g>newState</c-> = "";
};</code></pre>

  <dl class="domintro"><dt><code><var>event</var>.<a href="#dom-toggleevent-oldstate" id="dom-toggleevent-oldstate-dev">oldState</a></code><dd><p>クローズからオープンに遷移する場合は"<code>closed</code>"に設定し、オープンからクローズに遷移する場合は"<code>open</code>"に設定する。</p>
   <dt><code><var>event</var>.<a href="#dom-toggleevent-newstate" id="dom-toggleevent-newstate-dev">newState</a></code><dd><p>クローズからオープンに遷移する場合は"<code>open</code>"に設定し、オープンからクローズに遷移する場合は"<code>closed</code>"に設定する。</p>
   </dl>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent/oldState" title="The oldState read-only property of the ToggleEvent interface is a string representing the state the element is transitioning from.">ToggleEvent/oldState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ToggleEvent/newState" title="The newState read-only property of the ToggleEvent interface is a string representing the state the element is transitioning to.">ToggleEvent/newState</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Requires setting a user preference or runtime flag.">🔰 114+</span></span><span class="safari yes"><span>Safari</span><span>17+</span></span><span class="chrome yes"><span>Chrome</span><span>114+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>114+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="ToggleEvent" id="dom-toggleevent-oldstate" data-dfn-type="attribute"><code>oldState</code></dfn> and <dfn data-dfn-for="ToggleEvent" id="dom-toggleevent-newstate" data-dfn-type="attribute"><code>newState</code></dfn> attributes must return the values they are initialized to.</p>

  <p>A <dfn id="toggle-task-tracker">toggle task tracker</dfn> is a <a id="the-toggleevent-interface:struct" href="https://triple-underscore.github.io/infra-ja.html#struct" data-x-internal="struct">struct</a> which has:</p>

  <dl><dt><dfn id="toggle-task-task">task</dfn><dd>A <a href="webappapis.html#concept-task" id="the-toggleevent-interface:concept-task">task</a> which fires a <code id="the-toggleevent-interface:toggleevent-2"><a href="#toggleevent">ToggleEvent</a></code>.<dt><dfn id="toggle-task-old-state">old state</dfn><dd><code id="the-toggleevent-interface:dom-toggleevent-oldstate"><a href="#dom-toggleevent-oldstate">oldState</a></code>属性の<a href="#toggle-task-task" id="the-toggleevent-interface:toggle-task-task">タスク</a>のイベントの値を表す文字列。</dl>


  <h3 id="focus"><span class="secno">6.6</span> フォーカス<a href="#focus" class="self-link"></a></h3>

  
  
  
  

  

  <h4 id="introduction-8"><span class="secno">6.6.1</span> 導入<a href="#introduction-8" class="self-link"></a></h4>

  <p><i>この節は非規範的である。</i></p>

  <p>HTMLユーザーインターフェイスは典型的に、フォームコントロール、スクロール可能領域、リンク、ダイアログボックス、ブラウザータブなど、複数の対話的なウィジットから成る。これらウィジェットは、他（たとえば、リンク、フォームコントロール）を含むもの（たとえば、ブラウザータブ、ダイアログボックス）をもつ、階層構造を形成する。</p>

  <p>キーボードを使用するインターフェイスと情報交換する場合、アクティブなウィジェットから、<a href="#focused" id="introduction-8:focused">フォーカスされる</a>と呼ばれる、対話的なウィジェットの階層構造を通して、キー入力はシステムから流れる。</p>

  <div class="example"><p>グラフィカル環境で動作するブラウザータブにおいて動作するHTMLアプリケーションを考えてみる。このアプリケーションが、いくつかのテキストコントロールおよびリンクをもつページを持ち、それ自身がテキストコントロールとボタンを持った、モーダルダイアログを表示していると想定する。</p>

   <p>このシナリオにおいて、その子の間でHTMLアプリケーションを含むブラウザータブを持つだろう、フォーカス可能なウィジェットの階層構造は、ブラウザーウィンドウを含むかもしれない。タブ自身は、ダイアログと同様に、その子として、様々なリンクおよびテキストコントロールを持つだろう。ダイアログ自身は、その子として、テキストコントロールおよびボタンを持つだろう。</p>

   <p><img width="800" src="https://html.spec.whatwg.org/multipage/images/focus-tree.png" height="450" alt=""><p>この例で<a href="#focused" id="introduction-8:focused-2">フォーカス</a>をもつウィジェットがダイアログボックスでテキストコントロールであった場合、キー入力は、グラフィカルシステムから①ウェブブラウザー、②タブ、③ダイアログ、そして最後に④テキストコントロールへ流される。</p>

  </div>

  <p>キーボード<em>イベント</em>は、常にこの<a href="#focused" id="introduction-8:focused-3">フォーカスされた</a>要素で対象にされる。</p>


  <h4 id="data-model"><span class="secno">6.6.2</span> データモデル<a href="#data-model" class="self-link"></a></h4>

  <p id="tlbc-system-focus"><a id="data-model:top-level-traversable" href="document-sequences.html#top-level-traversable">トップレベルトラバーサブル</a>は、オペレーティングシステムからチャネルされたキーボード入力（おそらく<a href="document-sequences.html#nav-document" id="data-model:nav-document">アクティブな文書</a>の<a id="data-model:descendant-navigables" href="document-sequences.html#descendant-navigables">子孫ナビゲート可能</a>の1つがターゲット）を受け取ることができる場合、<dfn data-dfn-for="top-level
  traversable" id="system-focus" data-export="">システムフォーカス</dfn>を持つ。</p>

  <p><a id="data-model:top-level-traversable-2" href="document-sequences.html#top-level-traversable">トップレベル横断可能</a>は、その<a id="data-model:system-visibility-state" href="document-sequences.html#system-visibility-state">システム可視状態</a>が"<code>visible</code>"である場合、 <dfn data-dfn-for="top-level traversable" id="user-attention">ユーザーアテンション</dfn>を持ち、そして<a href="#system-focus" id="data-model:system-focus">システムフォーカス</a>を持つか、またはそれに直接関連するユーザーエージェントウィジェットが、オペレーティングシステムから送られたキーボード入力を受け取ることができるかのいずれかである。</p>
  

  <p class="note">ブラウザーウィンドウがフォーカスを失うと、ユーザーアテンションは失われるが、一方でシステムのフォーカスもまた、ロケーションバーなど、ブラウザーウィンドウ内の他のシステムウィジェットを失われる可能性がある。</p>

  <p><code id="data-model:document"><a href="dom.html#document">Document</a></code> <var>d</var>は、<var>d</var>が<a id="data-model:fully-active" href="document-sequences.html#fully-active">完全にアクティブ</a>であり、かつ<var>d</var>の<a id="data-model:node-navigable" href="document-sequences.html#node-navigable">ノートナビゲート可能</a>の<a href="document-sequences.html#nav-top" id="data-model:nav-top">トップレベル横断可能</a>に <a href="#user-attention" id="data-model:user-attention">ユーザーアテンション</a>がある場合、<dfn data-dfn-for="Document" id="fully-active-descendant-of-a-top-level-traversable-with-user-attention" data-export="">ユーザーアテンションをもつトップレベル横断可能の完全にアクティブの子孫</dfn>である。</p>

  <p>用語<dfn id="focusable-area">フォーカス可能領域</dfn>は、そのようなキーボード入力の対象になる可能性があるインターフェイスの領域を指すために使用される。フォーカス可能領域は、要素、要素の一部、またはユーザーエージェントによって処理される他の領域となることができる。</p>

  <p>各<a href="#focusable-area" id="data-model:focusable-area">フォーカス可能領域</a>は、DOMで<a href="#focusable-area" id="data-model:focusable-area-2">フォーカス可能領域</a>の位置を表す<code id="data-model:node"><a data-x-internal="node" href="https://triple-underscore.github.io/DOM4-ja.html#interface-node">Node</a></code>オブジェクトである、<dfn id="dom-anchor">DOMアンカー</dfn>を持つ。（<a href="#focusable-area" id="data-model:focusable-area-3">フォーカス可能領域</a>が<code id="data-model:node-2"><a data-x-internal="node" href="https://triple-underscore.github.io/DOM4-ja.html#interface-node">Node</a></code>自身である場合、それはそれ自身の<a href="#dom-anchor" id="data-model:dom-anchor">DOM anchor</a>である。）<a href="#focusable-area" id="data-model:focusable-area-5">フォーカス可能領域</a>を表すために他のDOMオブジェクトが存在しない場合、<a href="#dom-anchor" id="data-model:dom-anchor-2">DOMアンカー</a>は、<a href="#focusable-area" id="data-model:focusable-area-4">フォーカス可能領域</a>に適するようないくつかのAPIで使用される。</p>

  <p>以下のテーブルは、どのオブジェクトが<a href="#focusable-area" id="data-model:focusable-area-6">フォーカス可能領域</a>となることができるかを説明する。左の列におけるセルは、<a href="#focusable-area" id="data-model:focusable-area-7">フォーカス可能領域</a>となることができるオブジェクトを説明する。右の列におけるセルは、この要素に対する<a href="#dom-anchor" id="data-model:dom-anchor-3">DOMアンカー</a>を説明する。（両方の列をまたぐセルは、非規範的な例である。）</p>

  <table id="table-fa"><thead><tr><th id="th-fa-area"><a href="#focusable-area" id="data-model:focusable-area-8">フォーカス可能領域</a><th id="th-fa-dom-rep"><a href="#dom-anchor" id="data-model:dom-anchor-4">DOMアンカー</a><tr><th colspan="2" id="th-fa-examples"> 例<tbody><tr><th headers="th-fa-area" id="td-fa-1" class="data-header">次のすべての基準を満たす要素：<ul class="brief"><li>要素の<a href="#tabindex-value" id="data-model:tabindex-value">tabindex値</a>がnullでない、または要素がユーザーエージェントによってフォーカス可能であると判断される、<li>要素が<a id="data-model:shadow-host" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">シャドウホスト</a>ではないか、<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="data-model:concept-element-shadow-root" data-x-internal="concept-element-shadow-root">デリゲートのフォーカス</a>がfalseである<a id="data-model:delegates-focus" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">シャドウルート</a>のいずれかを持つ、<li>要素は<a href="semantics-other.html#concept-element-disabled" id="data-model:concept-element-disabled">実際に無効</a>ではない、<li>要素は<a href="#inert" id="data-model:inert">不活性</a>ではない。<li>要素は<a id="data-model:being-rendered" href="rendering.html#being-rendered">レンダリングされている</a>か、<a id="data-model:being-used-as-relevant-canvas-fallback-content" href="canvas.html#being-used-as-relevant-canvas-fallback-content">関連するキャンバスフォールバックコンテンツとして使用されている</a>かのいずれかである。</ul>
     <td headers="td-fa-1 th-fa-dom-rep">要素自身。<tr><td colspan="2" headers="td-fa-1 th-fa-examples"><p class="example"><code id="data-model:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>、<code id="data-model:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>、<code id="data-model:text-(type=text)-state-and-search-state-(type=search)"><a href="input.html#text-(type=text)-state-and-search-state-(type=search)">&lt;input type=text></a></code>、時として<code id="data-model:the-a-element"><a href="text-level-semantics.html#the-a-element">&lt;a href=""></a></code>（プラットフォーム慣習に依存する）。<tbody><tr><th headers="th-fa-area" id="td-fa-2" class="data-header"><a id="data-model:being-rendered-2" href="rendering.html#being-rendered">レンダリングされている</a>および<a href="#inert" id="data-model:inert-2">不活性</a>でない<code id="data-model:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素に関連する<a id="data-model:image-map" href="image-maps.html#image-map">イメージマップ</a>における<code id="data-model:the-area-element"><a href="image-maps.html#the-area-element">area</a></code>要素の形状。<td headers="td-fa-2 th-fa-dom-rep"><code id="data-model:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素<tr><td colspan="2" headers="td-fa-2 th-fa-examples"><div class="example"><p>次の例において、それぞれ画像の、<code id="data-model:the-area-element-2"><a href="image-maps.html#the-area-element">area</a></code>要素は2つの形状を作成する。最初の形状の<a href="#dom-anchor" id="data-model:dom-anchor-5">DOMアンカー</a>は、最初の<code id="data-model:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code>要素であり、2つめの形状の<a href="#dom-anchor" id="data-model:dom-anchor-6">DOM anchor</a>は、2つめの<code id="data-model:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code>要素である。</p>
      <pre><code class='html'><c- p>&lt;</c-><c- f>map</c-> <c- e>id</c-><c- o>=</c-><c- s>wallmap</c-><c- p>>&lt;</c-><c- f>area</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Enter Door"</c-> <c- e>coords</c-><c- o>=</c-><c- s>"10,10,100,200"</c-> <c- e>href</c-><c- o>=</c-><c- s>"door.html"</c-><c- p>>&lt;/</c-><c- f>map</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/innerwall.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"There is a white wall here, with a door."</c-> <c- e>usemap</c-><c- o>=</c-><c- s>"#wallmap"</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/outerwall.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"There is a red wall here, with a door."</c-> <c- e>usemap</c-><c- o>=</c-><c- s>"#wallmap"</c-><c- p>></c-></code></pre>
     </div>

   <tbody><tr><th headers="th-fa-area" id="td-fa-3" class="data-header">要素のサブウィジェットを提供されるユーザーエージェントは、<a id="data-model:being-rendered-3" href="rendering.html#being-rendered">レンダリングされている</a>かつ<a href="semantics-other.html#concept-element-disabled" id="data-model:concept-element-disabled-2">実際に無効</a>または<a href="#inert" id="data-model:inert-3">不活性</a>でない。<td headers="td-fa-3 th-fa-dom-rep"><a href="#focusable-area" id="data-model:focusable-area-9">フォーカス可能領域</a>がサブウィジェットとなる要素。<tr><td colspan="2" headers="td-fa-3 th-fa-examples"><p class="example"><code id="data-model:the-video-element"><a href="media.html#the-video-element">video</a></code>要素に対する<a href="media.html#expose-a-user-interface-to-the-user" id="data-model:expose-a-user-interface-to-the-user">ユーザーに公開されるユーザーインターフェイスにおけるコントロール</a>、<code id="data-model:number-state-(type=number)"><a href="input.html#number-state-(type=number)">&lt;input type=number></a></code>のスピンコントロールバージョンにおけるアップ・ダウンボタン、キーボード入力を用いた開くまたは閉じるために要素を有効にする<code id="data-model:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code>要素のレンダリングの一部。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-4" class="data-header"><a id="data-model:being-rendered-4" href="rendering.html#being-rendered">レンダリングされている</a>かつ<a href="#inert" id="data-model:inert-4">不活性</a>でない要素のスクロール可能な領域。<td headers="td-fa-4 th-fa-dom-rep">スクロール可能な領域のスクロールが作成されたボックスに対する要素<tr><td colspan="2" headers="td-fa-4 th-fa-examples"><p class="example">CSS <a id="data-model:'overflow'" href="https://triple-underscore.github.io/css-overflow3-ja.html#propdef-overflow" data-x-internal="'overflow'">'overflow'</a>プロパティの'scroll'値が典型的にスクロール可能領域を作成する。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-5" class="data-header">非nullの<a href="document-sequences.html#concept-document-bc" id="data-model:concept-document-bc">ブラウジングコンテキスト</a>があり、<a href="#inert" id="data-model:inert-5">不活性</a>ではない<code id="data-model:document-2"><a href="dom.html#document">Document</a></code>の<a id="data-model:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>。 <td headers="td-fa-5 th-fa-dom-rep"><a id="data-model:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>が作成された<code id="data-model:document-3"><a href="dom.html#document">Document</a></code>。<tr><td colspan="2" headers="td-fa-5 th-fa-examples"><p class="example"><code id="data-model:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>のコンテンツ。</p>

   <tbody><tr><th headers="th-fa-area" id="td-fa-6" class="data-header">特にアクセシビリティを支援するために、またはプラットフォームの規則によりよく一致させるために、ユーザーエージェントによってフォーカス可能な領域であると判断される他の要素または要素の一部。 <td headers="td-fa-6 th-fa-dom-rep">要素。<tr><td colspan="2" headers="td-fa-6 th-fa-examples"><p class="example">ユーザーエージェントは、すべてのリストアイテムの箇条書きを<a href="#sequentially-focusable" id="data-model:sequentially-focusable">シーケンシャルにフォーカス可能</a>にして、その結果ユーザーがリストをより簡単にナビゲートできるようにすることができる。</p>
     <p class="example">同様に、ユーザーエージェントは、<code id="data-model:attr-title"><a href="dom.html#attr-title">title</a></code>属性をもつすべての要素を<a href="#sequentially-focusable" id="data-model:sequentially-focusable-2">シーケンシャルにフォーカス可能</a>にして、その結果それら属性の助言情報にアクセスすることができる。</p>

  </table>

  <p id="bc-focus-ergo-bcc-focus" class="note"><a id="data-model:navigable-container" href="document-sequences.html#navigable-container">ナビゲート可能なコンテナー</a>（<code id="data-model:the-iframe-element-3"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>など）は、<a href="#focusable-area" id="data-model:focusable-area-10">フォーカス可能な領域</a>であるが、<a id="data-model:navigable-container-2" href="document-sequences.html#navigable-container">ナビゲート可能なコンテナー</a>に送られるキーイベントは、<a id="data-model:content-navigable" href="document-sequences.html#content-navigable">コンテンツナビゲート可能</a>の<a href="document-sequences.html#nav-document" id="data-model:nav-document-2">アクティブな文書</a>にすぐに送られる。 同様に、シーケンシャルフォーカスナビゲーションにおいて、<a id="data-model:navigable-container-3" href="document-sequences.html#navigable-container">ナビゲート可能なコンテナー</a>は基本的に、<a id="data-model:content-navigable-2" href="document-sequences.html#content-navigable">コンテンツナビゲート可能</a>の<a href="document-sequences.html#nav-document" id="data-model:nav-document-3">アクティブ文書</a>のプレースホルダーとしてのみ機能する。</p>

  <hr>

  <p>各<code id="data-model:document-4"><a href="dom.html#document">Document</a></code>の1つの<a href="#focusable-area" id="data-model:focusable-area-11">フォーカス可能な領域</a>は、<dfn id="focused-area-of-the-document">文書のフォーカスされた領域</dfn>として指定される。どのコントロールがそのように呼ばれるかは時間とともに変化し、この仕様におけるアルゴリズムに基づく。</p>

  <p class="note">たとえ文書が<a id="data-model:fully-active-2" href="document-sequences.html#fully-active">完全にアクティブ</a>でなくかつユーザーに表示されないとしても、<a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document">文書のフォーカスされた領域</a>を保持できる。文書の<a id="data-model:fully-active-3" href="document-sequences.html#fully-active">完全にアクティブ</a>な状態が変化しても、<a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-2">文書のフォーカスされた領域</a>は同じままとなる。</p>

  <p id="currently-focused-area-of-a-top-level-browsing-context">The <dfn id="currently-focused-area-of-a-top-level-traversable">currently focused area of a top-level traversable</dfn> <var>traversable</var> is the <a href="#focusable-area" id="data-model:focusable-area-12">focusable area</a>-or-null returned by this algorithm:</p>

  <ol><li><p>If <var>traversable</var> does not have <a href="#system-focus" id="data-model:system-focus-2">system focus</a>, then return null.<li><p>Let <var>candidate</var> be <var>traversable</var>'s <a href="document-sequences.html#nav-document" id="data-model:nav-document-4">active document</a>.<li><p>While <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-3">focused area</a> is a <a id="data-model:navigable-container-4" href="document-sequences.html#navigable-container">navigable container</a> with a non-null <a id="data-model:content-navigable-3" href="document-sequences.html#content-navigable">content navigable</a>: set <var>candidate</var> to the <a href="document-sequences.html#nav-document" id="data-model:nav-document-5">active document</a> of that <a id="data-model:navigable-container-5" href="document-sequences.html#navigable-container">navigable container</a>'s <a id="data-model:content-navigable-4" href="document-sequences.html#content-navigable">content navigable</a>.<li><p>If <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-4">focused area</a> is non-null, set <var>candidate</var> to <var>candidate</var>'s <a href="#focused-area-of-the-document" id="data-model:focused-area-of-the-document-5">focused area</a>.<li><p><var>candidate</var>を返す。</ol>

  <p id="current-focus-chain-of-a-top-level-browsing-context">The <dfn id="current-focus-chain-of-a-top-level-traversable">current focus chain of a top-level traversable</dfn> <var>traversable</var> is the <a href="#focus-chain" id="data-model:focus-chain">focus chain</a> of the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable">currently focused area</a> of <var>traversable</var>, if <var>traversable</var> is non-null, or an empty list otherwise.</p>

  <p>An element that is the <a href="#dom-anchor" id="data-model:dom-anchor-7">DOM anchor</a> of a <a href="#focusable-area" id="data-model:focusable-area-13">focusable area</a> is said to <dfn id="gains-focus">gain focus</dfn> when that <a href="#focusable-area" id="data-model:focusable-area-14">focusable area</a> becomes the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable-2">currently focused area of a top-level traversable</a>. When an element is the <a href="#dom-anchor" id="data-model:dom-anchor-8">DOM anchor</a> of a <a href="#focusable-area" id="data-model:focusable-area-15">focusable area</a> of the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable-3">currently focused area of a top-level traversable</a>, it is <dfn id="focused">focused</dfn>.</p>

  

  <p>The <dfn id="focus-chain">focus chain</dfn> of a <a href="#focusable-area" id="data-model:focusable-area-16">focusable area</a> <var>subject</var> is the ordered list constructed as follows:</p>

  <ol><li><p>Let <var>output</var> be an empty <a id="data-model:list" href="https://triple-underscore.github.io/infra-ja.html#list" data-x-internal="list">list</a>.<li><p>Let <var>currentObject</var> be <var>subject</var>.<li><p>While true:</p>

    <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-append" id="data-model:list-append" data-x-internal="list-append">Append</a> <var>currentObject</var> to <var>output</var>.<li><p>If <var>currentObject</var> is an <code id="data-model:the-area-element-3"><a href="image-maps.html#the-area-element">area</a></code> element's shape, then <a href="https://triple-underscore.github.io/infra-ja.html#list-append" id="data-model:list-append-2" data-x-internal="list-append">append</a> that <code id="data-model:the-area-element-4"><a href="image-maps.html#the-area-element">area</a></code> element to <var>output</var>.</p>

      <p>Otherwise, if <var>currentObject</var>'s <a href="#dom-anchor" id="data-model:dom-anchor-9">DOM anchor</a> is an element that is not <var>currentObject</var> itself, then <a href="https://triple-underscore.github.io/infra-ja.html#list-append" id="data-model:list-append-3" data-x-internal="list-append">append</a> <var>currentObject</var>'s <a href="#dom-anchor" id="data-model:dom-anchor-10">DOM anchor</a> to <var>output</var>.</p>
     <li><p>If <var>currentObject</var> is a <a href="#focusable-area" id="data-model:focusable-area-17">focusable area</a>, then set <var>currentObject</var> to <var>currentObject</var>'s <a href="#dom-anchor" id="data-model:dom-anchor-11">DOM anchor</a>'s <a id="data-model:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.</p>

      <p>Otherwise, if <var>currentObject</var> is a <code id="data-model:document-5"><a href="dom.html#document">Document</a></code> whose <a id="data-model:node-navigable-2" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-parent" id="data-model:nav-parent">parent</a> is non-null, then set <var>currentObject</var> to <var>currentObject</var>'s <a id="data-model:node-navigable-3" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-parent" id="data-model:nav-parent-2">parent</a>.</p>

      <p>Otherwise, <a id="data-model:break" href="https://triple-underscore.github.io/infra-ja.html#iteration-break" data-x-internal="break">break</a>.</p>
     </ol>
   <li><p>Return <var>output</var>.</p>

    <p class="note">The chain starts with <var>subject</var> and (if <var>subject</var> is or can be the <a href="#currently-focused-area-of-a-top-level-traversable" id="data-model:currently-focused-area-of-a-top-level-traversable-4">currently focused area of a top-level traversable</a>) continues up the focus hierarchy up to the <code id="data-model:document-6"><a href="dom.html#document">Document</a></code> of the <a id="data-model:top-level-traversable-3" href="document-sequences.html#top-level-traversable">top-level traversable</a>.</p>
   </ol>

  <p>All elements that are <a href="#focusable-area" id="data-model:focusable-area-18">focusable areas</a> are said to be <dfn id="focusable">focusable</dfn>.</p>

  <p>There are two special types of focusability for <a href="#focusable-area" id="data-model:focusable-area-19">focusable areas</a>:</p>
  <ul><li><p>A <a href="#focusable-area" id="data-model:focusable-area-20">focusable area</a> is said to be <dfn id="sequentially-focusable">sequentially focusable</dfn> if it is included in its <code id="data-model:document-7"><a href="dom.html#document">Document</a></code>'s <a href="#sequential-focus-navigation-order" id="data-model:sequential-focus-navigation-order">sequential focus navigation order</a> and the user agent determines that it is sequentially focusable.</p>
   <li><p>A <a href="#focusable-area" id="data-model:focusable-area-21">focusable area</a> is said to be <dfn id="click-focusable">click focusable</dfn> if the user agent determines that it is click focusable. User agents should consider focusable areas with non-null <a href="#tabindex-value" id="data-model:tabindex-value-2">tabindex values</a> to be click focusable.</p>
   </ul>

  <p class="note">Elements which are not <a href="#focusable" id="data-model:focusable">focusable</a> are not <a href="#focusable-area" id="data-model:focusable-area-22">focusable areas</a>, and thus not <a href="#sequentially-focusable" id="data-model:sequentially-focusable-3">sequentially focusable</a> and not <a href="#click-focusable" id="data-model:click-focusable">click focusable</a>.</p>

  <div class="note"><p>Being <a href="#focusable" id="data-model:focusable-2">focusable</a> is a statement about whether an element can be focused programmatically, e.g. via the <code id="data-model:dom-focus"><a href="#dom-focus">focus()</a></code> method or <code id="data-model:attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code> attribute. In contrast, <a href="#sequentially-focusable" id="data-model:sequentially-focusable-4">sequentially focusable</a> and <a href="#click-focusable" id="data-model:click-focusable-2">click focusable</a> govern how the user agent responds to user interaction: respectively, to <a href="#sequential-focus-navigation" id="data-model:sequential-focus-navigation">sequential focus navigation</a> and as <a href="#focus-activation-behavior">activation behavior</a>.</p>

   <p>The user agent might determine that an element is not <a href="#sequentially-focusable" id="data-model:sequentially-focusable-5">sequentially focusable</a> even if it is <a href="#focusable" id="data-model:focusable-3">focusable</a> and is included in its <code id="data-model:document-8"><a href="dom.html#document">Document</a></code>'s <a href="#sequential-focus-navigation-order" id="data-model:sequential-focus-navigation-order-2">sequential focus navigation order</a>, according to user preferences. For example, macOS users can set the user agent to skip non-form control elements, or can skip links when doing <a href="#sequential-focus-navigation" id="data-model:sequential-focus-navigation-2">sequential focus navigation</a> with just the <kbd>Tab</kbd> key (as opposed to using both the <kbd>Option</kbd> and <kbd>Tab</kbd> keys).</p>

   <p>Similarly, the user agent might determine that an element is not <a href="#click-focusable" id="data-model:click-focusable-3">click focusable</a> even if it is <a href="#focusable" id="data-model:focusable-4">focusable</a>. For example, in some user agents, clicking on a non-editable form control does not focus it, i.e. the user agent has determined that such controls are not click focusable.</p>

   <p>Thus, an element can be <a href="#focusable" id="data-model:focusable-5">focusable</a>, but neither <a href="#sequentially-focusable" id="data-model:sequentially-focusable-6">sequentially focusable</a> nor <a href="#click-focusable" id="data-model:click-focusable-4">click focusable</a>. For example, in some user agents, a non-editable form-control with a negative-integer <a href="#tabindex-value" id="data-model:tabindex-value-3">tabindex value</a> would not be focusable via user interaction, only via programmatic APIs.</p>
  </div>

  <p>When a user <a href="#activation">activates</a> a <a href="#click-focusable" id="data-model:click-focusable-5">click focusable</a> <a href="#focusable-area" id="data-model:focusable-area-23">focusable area</a>, the user agent must run the <a href="#focusing-steps" id="data-model:focusing-steps">focusing steps</a> on the <a href="#focusable-area" id="data-model:focusable-area-24">focusable area</a> with <var>focus trigger</var> set to "<code>click</code>".</p>

  <p class="note">Note that focusing is not an <a id="data-model:activation-behaviour" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">activation behavior</a>, i.e. calling the <code id="data-model:dom-click"><a href="#dom-click">click()</a></code> method on an element or dispatching a synthetic <code id="data-model:event-click"><a data-x-internal="event-click" href="https://triple-underscore.github.io/uievents-ja.html#event-type-click">click</a></code> event on it won't cause the element to get focused.</p>

  <hr>

  <p>A node is a <dfn id="focus-navigation-scope-owner">focus navigation scope owner</dfn> if it is a <code id="data-model:document-9"><a href="dom.html#document">Document</a></code>, a <a id="data-model:shadow-host-2" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a>, a <a id="data-model:the-slot-element" href="scripting.html#the-slot-element">slot</a>, or an element in the <a href="popover.html#popover-showing-state" id="data-model:popover-showing-state">popover showing state</a> which also has a <a id="data-model:popover-invoker" href="popover.html#popover-invoker">popover invoker</a> set.</p>

  <p>Each <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner">focus navigation scope owner</a> has a <dfn id="focus-navigation-scope">focus navigation scope</dfn>, which is a list of elements. Its contents are determined as follows:</p>

  <p>Every element <var>element</var> has an <dfn id="associated-focus-navigation-owner">associated focus navigation owner</dfn>, which is either null or a <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-2">focus navigation scope owner</a>. It is determined by the following algorithm:</p>

  <ol><li><p>If <var>element</var>'s parent is null, then return null.<li><p>If <var>element</var>'s parent is a <a id="data-model:shadow-host-3" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a>, then return <var>element</var>'s <a id="data-model:assigned-slot" href="https://triple-underscore.github.io/DOM4-ja.html#slotable-assigned-slot" data-x-internal="assigned-slot">assigned slot</a>.<li><p>If <var>element</var>'s parent is a <a id="data-model:shadow-root" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-root" data-x-internal="shadow-root">shadow root</a>, then return the parent's <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host" id="data-model:concept-documentfragment-host" data-x-internal="concept-documentfragment-host">host</a>.<li><p>If <var>element</var>'s parent is the <a id="data-model:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a>, then return the parent's <a id="data-model:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If <var>element</var> is in the <a href="popover.html#popover-showing-state" id="data-model:popover-showing-state-2">popover showing state</a> and has a <a id="data-model:popover-invoker-2" href="popover.html#popover-invoker">popover invoker</a> set, then return <var>element</var>.<li><p>Return <var>element</var>'s parent's <a href="#associated-focus-navigation-owner" id="data-model:associated-focus-navigation-owner">associated focus navigation owner</a>.</ol>

  <p>Then, the contents of a given <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-3">focus navigation scope owner</a> <var>owner</var>'s <a href="#focus-navigation-scope" id="data-model:focus-navigation-scope">focus navigation scope</a> are all elements whose <a href="#associated-focus-navigation-owner" id="data-model:associated-focus-navigation-owner-2">associated focus navigation owner</a> is <var>owner</var>.</p>

  <p class="note">The order of elements within a <a href="#focus-navigation-scope" id="data-model:focus-navigation-scope-2">focus navigation scope</a> does not impact any of the algorithms in this specification. Ordering only becomes important for the <a href="#tabindex-ordered-focus-navigation-scope" id="data-model:tabindex-ordered-focus-navigation-scope">tabindex-ordered focus navigation scope</a> and <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="data-model:flattened-tabindex-ordered-focus-navigation-scope">flattened tabindex-ordered focus navigation scope</a> concepts defined below.</p>

  <p>A <dfn id="tabindex-ordered-focus-navigation-scope">tabindex-ordered focus navigation scope</dfn> is a list of <a href="#focusable-area" id="data-model:focusable-area-25">focusable areas</a> and <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-4">focus navigation scope owners</a>. Every <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-5">focus navigation scope owner</a> <var>owner</var> has <a href="#tabindex-ordered-focus-navigation-scope" id="data-model:tabindex-ordered-focus-navigation-scope-2">tabindex-ordered focus navigation scope</a>, whose contents are determined as follows:</p>

  <ul><li><p>It contains all elements in <var>owner</var>'s <a href="#focus-navigation-scope" id="data-model:focus-navigation-scope-3">focus navigation scope</a> that are themselves <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-6">focus navigation scope owners</a>, except the elements whose <a href="#tabindex-value" id="data-model:tabindex-value-4">tabindex value</a> is a negative integer.<li><p>It contains all of the <a href="#focusable-area" id="data-model:focusable-area-26">focusable areas</a> whose <a href="#dom-anchor" id="data-model:dom-anchor-12">DOM anchor</a> is an element in <var>owner</var>'s <a href="#focus-navigation-scope" id="data-model:focus-navigation-scope-4">focus navigation scope</a>, except the <a href="#focusable-area" id="data-model:focusable-area-27">focusable areas</a> whose <a href="#tabindex-value" id="data-model:tabindex-value-5">tabindex value</a> is a negative integer.</ul>

  <p>The order within a <a href="#tabindex-ordered-focus-navigation-scope" id="data-model:tabindex-ordered-focus-navigation-scope-3">tabindex-ordered focus navigation scope</a> is determined by each element's <a href="#tabindex-value" id="data-model:tabindex-value-6">tabindex value</a>, as described in the section below.</p>

  <p class="note">The rules there do not give a precise ordering, as they are composed mostly of "should" statements and relative orderings.</p>

  <p>A <dfn id="flattened-tabindex-ordered-focus-navigation-scope">flattened tabindex-ordered focus navigation scope</dfn> is a list of <a href="#focusable-area" id="data-model:focusable-area-28">focusable areas</a>. Every <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-7">focus navigation scope owner</a> <var>owner</var> owns a distinct <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="data-model:flattened-tabindex-ordered-focus-navigation-scope-2">flattened tabindex-ordered focus navigation scope</a>, whose contents are determined by the following algorithm:</p>

  <ol><li><p>Let <var>result</var> be a <a href="https://triple-underscore.github.io/infra-ja.html#list-clone" id="data-model:list-clone" data-x-internal="list-clone">clone</a> of <var>owner</var>'s <a href="#tabindex-ordered-focus-navigation-scope" id="data-model:tabindex-ordered-focus-navigation-scope-4">tabindex-ordered focus navigation scope</a>.<li><p>For each <var>item</var> of <var>result</var>:</p>

    <ol><li><p>If <var>item</var> is not a <a href="#focus-navigation-scope-owner" id="data-model:focus-navigation-scope-owner-8">focus navigation scope owner</a>, then <a id="data-model:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If <var>item</var> is not a <a href="#focusable-area" id="data-model:focusable-area-29">focusable area</a>, then replace <var>item</var> with all of the items in <var>item</var>'s <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="data-model:flattened-tabindex-ordered-focus-navigation-scope-3">flattened tabindex-ordered focus navigation scope</a>.<li><p>Otherwise, insert the contents of <var>item</var>'s <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="data-model:flattened-tabindex-ordered-focus-navigation-scope-4">flattened tabindex-ordered focus navigation scope</a> after <var>item</var>.</ol>
   </ol>

  

  <h4 id="the-tabindex-attribute"><span class="secno">6.6.3</span> <code id="the-tabindex-attribute:attr-tabindex"><a href="#attr-tabindex">tabindex</a></code>属性<a href="#the-tabindex-attribute" class="self-link"></a></h4>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex" title="The tabindex global attribute allows developers to make HTML elements focusable, allow or prevent them from being sequentially focusable (usually with the Tab key, hence the name) and determine their relative ordering for sequential focus navigation.">Global_attributes/tabindex</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="htmlsvg-global" id="attr-tabindex" data-dfn-type="element-attr"><code>tabindex</code></dfn>コンテンツ属性は、著者が、<a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor">DOMアンカー</a>として要素を持つ要素および領域を<a href="#focusable-area" id="the-tabindex-attribute:focusable-area">フォーカス可能領域</a>にする、<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable">シーケンシャルフォーカス可能</a>にすることを許可または防止する、ならびに<a href="#sequential-focus-navigation" id="the-tabindex-attribute:sequential-focus-navigation">シーケンシャルフォーカスナビゲーション</a>の相対的な順序を決定することを可能にする。</p>

  <p>名前"tab index"は、フォーカス可能な要素を通してナビゲートするための<kbd>Tab</kbd>キーの一般的な使用方法に由来する。"tabbing"（タブ移動）という用語は、<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-2">シーケンシャルフォーカス可能</a>な<a href="#focusable-area" id="the-tabindex-attribute:focusable-area-2">フォーカス可能領域</a>を前に進めることを指す。</p>

  <p><code id="the-tabindex-attribute:attr-tabindex-2"><a href="#attr-tabindex">tabindex</a></code>属性が指定される場合、<a id="the-tabindex-attribute:valid-integer" href="common-microsyntaxes.html#valid-integer">妥当な整数</a>である値を持たなければならない。正の数値は、要素の<a href="#focusable-area" id="the-tabindex-attribute:focusable-area-3">フォーカス可能領域</a>の相対的な位置を<a href="#sequential-focus-navigation-order" id="the-tabindex-attribute:sequential-focus-navigation-order">シーケンシャルフォーカスナビゲーション順序</a>で指定し、負の数値はコントロールが<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-3">シーケンシャルフォーカス可能</a>でないことを示す。</p>

  <p>0または-1以外の値を使用している場合、開発者は、これが正しく行うために複雑になるよう、自身の<code id="the-tabindex-attribute:attr-tabindex-3"><a href="#attr-tabindex">tabindex</a></code>属性に対して用心すべきである。</p>

  <div class="note"><p>以下に、可能な<code id="the-tabindex-attribute:attr-tabindex-4"><a href="#attr-tabindex">tabindex</a></code>属性値の動作の非規範的な概要を提供する。以下の処理モデルは、より正確な規則を与える。</p>

   <dl><dt>省略（または非整数値）<dd>ユーザーエージェントは、要素が<a href="#focusable" id="the-tabindex-attribute:focusable">フォーカス可能</a>かどうかを決定する。もしそうであるならば、その要素が<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-4">シーケンシャルフォーカス可能</a>または<a href="#click-focusable" id="the-tabindex-attribute:click-focusable">クリックフォーカス可能</a>（もしくはその両方）かを決定する。<dt>−1（または他の負の整数値）<dd>要素が<a href="#focusable" id="the-tabindex-attribute:focusable-2">フォーカス可能</a>になり、著者がその要素を<a href="#click-focusable" id="the-tabindex-attribute:click-focusable-2">クリックフォーカス可能</a>にするが、<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-5">シーケンシャルフォーカス可能</a>にしないことを示す。ユーザーエージェントは、たとえばプラットフォームの規則に従った特定の要素タイプ、またはキーボードのみのユーザーのために、クリックおよびシーケンシャルフォーカスの可能性に関するこの設定を無視する場合がある。<dt>0<dd>要素を<a href="#focusable" id="the-tabindex-attribute:focusable-3">フォーカス可能</a>にし、著者がその要素を<a href="#click-focusable" id="the-tabindex-attribute:click-focusable-3">クリックフォーカス可能</a>と<a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-6">シーケンシャルフォーカス可能</a>の両方を好むことを示す。ユーザーエージェントは、クリックおよびシーケンシャルフォーカスのこの設定を無視する場合がある。<dt>正の整数値<dd>0と同じように動作するが、さらに、<a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope">tabindex順のフォーカスナビゲーションスコープ</a>内で相対的な順序を作成するため、<code id="the-tabindex-attribute:attr-tabindex-5"><a href="#attr-tabindex">tabindex</a></code>属性値がより大きい要素は後から来る。</dl>

   <p><code id="the-tabindex-attribute:attr-tabindex-6"><a href="#attr-tabindex">tabindex</a></code>属性は、要素をフォーカス不可にするために使用できないことに注意する。ページ著者ができる唯一の方法は、要素を<a href="semantics-other.html#concept-element-disabled" id="the-tabindex-attribute:concept-element-disabled">無効</a>にする、または要素を<a href="#inert" id="the-tabindex-attribute:inert">不活性</a>にすることである。</p>
  </div>

  

  <hr>

  <p>The <dfn id="tabindex-value">tabindex value</dfn> of an element is the value of its <code id="the-tabindex-attribute:attr-tabindex-7"><a href="#attr-tabindex">tabindex</a></code> attribute, parsed using the <a id="the-tabindex-attribute:rules-for-parsing-integers" href="common-microsyntaxes.html#rules-for-parsing-integers">rules for parsing integers</a>. If parsing fails or the attribute is not specified, then the <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value">tabindex value</a> is null.</p>

  <p>The <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value-2">tabindex value</a> of a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-4">focusable area</a> is the <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value-3">tabindex value</a> of its <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-2">DOM anchor</a>.</p>

  <p>The <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value-4">tabindex value</a> of an element must be interpreted as follows:</p>

  <dl><dt>If the value is null<dd><p>The user agent should follow platform conventions to determine if the element should be considered as a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-5">focusable area</a> and if so, whether the element and any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-6">focusable areas</a> that have the element as their <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-3">DOM anchor</a> are <a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-7">sequentially focusable</a>, and if so, what their relative position in their <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-2">tabindex-ordered focus navigation scope</a> is to be. If the element is a <a href="#focus-navigation-scope-owner" id="the-tabindex-attribute:focus-navigation-scope-owner">focus navigation scope owner</a>, it must be included in its <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-3">tabindex-ordered focus navigation scope</a> even if it is not a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-7">focusable area</a>.</p>

    <p>The relative ordering within a <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-4">tabindex-ordered focus navigation scope</a> for elements and <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-8">focusable areas</a> that belong to the same <a href="#focus-navigation-scope" id="the-tabindex-attribute:focus-navigation-scope">focus navigation scope</a> and whose <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value-5">tabindex value</a> is null should be in <a id="the-tabindex-attribute:shadow-including-tree-order" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-tree-order" data-x-internal="shadow-including-tree-order">shadow-including tree order</a>.</p>

    <p>Modulo platform conventions, it is suggested that the following elements should be considered as <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-9">focusable areas</a> and be <a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-8">sequentially focusable</a>:</p>

    <ul><li><code id="the-tabindex-attribute:the-a-element"><a href="text-level-semantics.html#the-a-element">a</a></code> elements that have an <code id="the-tabindex-attribute:attr-hyperlink-href"><a href="links.html#attr-hyperlink-href">href</a></code> attribute<li><code id="the-tabindex-attribute:the-button-element"><a href="form-elements.html#the-button-element">button</a></code> elements<li><code id="the-tabindex-attribute:the-input-element"><a href="input.html#the-input-element">input</a></code> elements whose <code id="the-tabindex-attribute:attr-input-type"><a href="input.html#attr-input-type">type</a></code> attribute are not in the <a href="input.html#hidden-state-(type=hidden)" id="the-tabindex-attribute:hidden-state-(type=hidden)">Hidden</a> state<li><code id="the-tabindex-attribute:the-select-element"><a href="form-elements.html#the-select-element">select</a></code>要素<li><code id="the-tabindex-attribute:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素<li><code id="the-tabindex-attribute:the-summary-element"><a href="interactive-elements.html#the-summary-element">summary</a></code> elements that are the first <code id="the-tabindex-attribute:the-summary-element-2"><a href="interactive-elements.html#the-summary-element">summary</a></code> element child of a <code id="the-tabindex-attribute:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code> element<li>Elements with a <code id="the-tabindex-attribute:attr-draggable"><a href="dnd.html#attr-draggable">draggable</a></code> attribute set, if that would enable the user agent to allow the user to begin drag operations for those elements without the use of a pointing device<li><a href="#editing-host" id="the-tabindex-attribute:editing-host">Editing hosts</a><li><a href="document-sequences.html#navigable-container" id="the-tabindex-attribute:navigable-container">Navigable containers</a></ul>
   <dt id="negative-tabindex">If the value is a negative integer<dd><p>The user agent must consider the element as a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-10">focusable area</a>, but should omit the element from any <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-5">tabindex-ordered focus navigation scope</a>.</p>

    <p class="note">One valid reason to ignore the requirement that sequential focus navigation not allow the author to lead to the element would be if the user's only mechanism for moving the focus is sequential focus navigation. For instance, a keyboard-only user would be unable to click on a text control with a negative <code id="the-tabindex-attribute:attr-tabindex-8"><a href="#attr-tabindex">tabindex</a></code>, so that user's user agent would be well justified in allowing the user to tab to the control regardless.</p>
   <dt>If the value is a zero<dd><p>The user agent must allow the element to be considered as a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-11">focusable area</a> and should allow the element and any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-12">focusable areas</a> that have the element as their <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-4">DOM anchor</a> to be <a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-9">sequentially focusable</a>.</p>

    <p>The relative ordering within a <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-6">tabindex-ordered focus navigation scope</a> for elements and <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-13">focusable areas</a> that belong to the same <a href="#focus-navigation-scope" id="the-tabindex-attribute:focus-navigation-scope-2">focus navigation scope</a> and whose <a href="#tabindex-value" id="the-tabindex-attribute:tabindex-value-6">tabindex value</a> is zero should be in <a id="the-tabindex-attribute:shadow-including-tree-order-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-tree-order" data-x-internal="shadow-including-tree-order">shadow-including tree order</a>.</p>
   <dt>If the value is greater than zero<dd><p>The user agent must allow the element to be considered as a <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-14">focusable area</a> and should allow the element and any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-15">focusable areas</a> that have the element as their <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-5">DOM anchor</a> to be <a href="#sequentially-focusable" id="the-tabindex-attribute:sequentially-focusable-10">sequentially focusable</a>, and should place the element — referenced as <var>candidate</var> below — and the aforementioned <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-16">focusable areas</a> in the <a href="#tabindex-ordered-focus-navigation-scope" id="the-tabindex-attribute:tabindex-ordered-focus-navigation-scope-7">tabindex-ordered focus navigation scope</a> where the element is a part of so that, relative to other elements and <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-17">focusable areas</a> that belong to the same <a href="#focus-navigation-scope" id="the-tabindex-attribute:focus-navigation-scope-3">focus navigation scope</a>, they are:</p>

    <ul><li>before any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-18">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-6">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-9"><a href="#attr-tabindex">tabindex</a></code> attribute has been omitted or whose value, when parsed, returns an error,<li>before any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-19">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-7">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-10"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal to or less than zero,<li>after any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-20">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-8">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-11"><a href="#attr-tabindex">tabindex</a></code> attribute has a value greater than zero but less than the value of the <code id="the-tabindex-attribute:attr-tabindex-12"><a href="#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var>,<li>after any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-21">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-9">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-13"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal to the value of the <code id="the-tabindex-attribute:attr-tabindex-14"><a href="#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var> but that is located earlier than <var>candidate</var> in <a id="the-tabindex-attribute:shadow-including-tree-order-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-tree-order" data-x-internal="shadow-including-tree-order">shadow-including tree order</a>,<li>before any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-22">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-10">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-15"><a href="#attr-tabindex">tabindex</a></code> attribute has a value equal to the value of the <code id="the-tabindex-attribute:attr-tabindex-16"><a href="#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var> but that is located later than <var>candidate</var> in <a id="the-tabindex-attribute:shadow-including-tree-order-4" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-tree-order" data-x-internal="shadow-including-tree-order">shadow-including tree order</a>, and<li>before any <a href="#focusable-area" id="the-tabindex-attribute:focusable-area-23">focusable area</a> whose <a href="#dom-anchor" id="the-tabindex-attribute:dom-anchor-11">DOM anchor</a> is an element whose <code id="the-tabindex-attribute:attr-tabindex-17"><a href="#attr-tabindex">tabindex</a></code> attribute has a value greater than the value of the <code id="the-tabindex-attribute:attr-tabindex-18"><a href="#attr-tabindex">tabindex</a></code> attribute on <var>candidate</var>.</ul>
   </dl>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/tabIndex" title="The tabIndex property of the HTMLElement interface represents the tab order of the current element.">HTMLElement/tabIndex</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>3.1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>18</span></span><span class="ie yes"><span>Internet Explorer</span><span title="Partial implementation.">🔰 5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLOrSVGElement" id="dom-tabindex" data-dfn-type="attribute"><code>tabIndex</code></dfn> IDL attribute must <a id="the-tabindex-attribute:reflect" href="common-dom-interfaces.html#reflect">reflect</a> the value of the <code id="the-tabindex-attribute:attr-tabindex-19"><a href="#attr-tabindex">tabindex</a></code> content attribute. The <a id="the-tabindex-attribute:default-value" href="common-dom-interfaces.html#default-value">default value</a> is 0 if the element is an <code id="the-tabindex-attribute:the-a-element-2"><a href="text-level-semantics.html#the-a-element">a</a></code>, <code id="the-tabindex-attribute:the-area-element"><a href="image-maps.html#the-area-element">area</a></code>, <code id="the-tabindex-attribute:the-button-element-2"><a href="form-elements.html#the-button-element">button</a></code>, <code id="the-tabindex-attribute:frame"><a href="obsolete.html#frame">frame</a></code>, <code id="the-tabindex-attribute:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>, <code id="the-tabindex-attribute:the-input-element-2"><a href="input.html#the-input-element">input</a></code>, <code id="the-tabindex-attribute:the-object-element"><a href="iframe-embed-object.html#the-object-element">object</a></code>, <code id="the-tabindex-attribute:the-select-element-2"><a href="form-elements.html#the-select-element">select</a></code>, <code id="the-tabindex-attribute:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>, or <a id="the-tabindex-attribute:svg-a" href="https://triple-underscore.github.io/svg-linking-ja.html#AElement" data-x-internal="svg-a">SVG <code>a</code></a> element, or is a <code id="the-tabindex-attribute:the-summary-element-3"><a href="interactive-elements.html#the-summary-element">summary</a></code> element that is a <a id="the-tabindex-attribute:summary-for-its-parent-details" href="interactive-elements.html#summary-for-its-parent-details">summary for its parent details</a>. The <a id="the-tabindex-attribute:default-value-2" href="common-dom-interfaces.html#default-value">default value</a> is −1 otherwise.</p>

  <p class="note">The varying default value based on element type is a historical artifact.</p>

  


  

  <h4 id="focus-processing-model"><span class="secno">6.6.4</span> <span id="processing-model-5"></span>Processing model<a href="#focus-processing-model" class="self-link"></a></h4>

  <p>To <dfn id="get-the-focusable-area">get the focusable area</dfn> for a <var>focus target</var> that is either an element that is not a <a href="#focusable-area" id="focus-processing-model:focusable-area">focusable area</a>, or is a <a id="focus-processing-model:navigable" href="document-sequences.html#navigable">navigable</a>, given an optional string <var>focus trigger</var> (default "<code>other</code>"), run the first matching set of steps from the following list:</p>

  <dl class="switch"><dt>If <var>focus target</var> is an <code id="focus-processing-model:the-area-element"><a href="image-maps.html#the-area-element">area</a></code> element with one or more shapes that are <a href="#focusable-area" id="focus-processing-model:focusable-area-2">focusable areas</a><dd><p>Return the shape corresponding to the first <code id="focus-processing-model:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element in <a id="focus-processing-model:tree-order" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order" data-x-internal="tree-order">tree order</a> that uses the image map to which the <code id="focus-processing-model:the-area-element-2"><a href="image-maps.html#the-area-element">area</a></code> element belongs.<dt>If <var>focus target</var> is an element with one or more scrollable regions that are <a href="#focusable-area" id="focus-processing-model:focusable-area-3">focusable areas</a><dd><p>Return the element's first scrollable region, according to a pre-order, depth-first traversal of the <a id="focus-processing-model:flat-tree" href="https://triple-underscore.github.io/css-scoping-ja.html#flat-tree" data-x-internal="flat-tree">flat tree</a>. <a href="references.html#refsCSSSCOPING">[CSSSCOPING]</a><dt>If <var>focus target</var> is the <a id="focus-processing-model:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a> of its <code id="focus-processing-model:document"><a href="dom.html#document">Document</a></code><dd><p>Return the <code id="focus-processing-model:document-2"><a href="dom.html#document">Document</a></code>'s <a id="focus-processing-model:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>.<dt>If <var>focus target</var> is a <a id="focus-processing-model:navigable-2" href="document-sequences.html#navigable">navigable</a><dd><p>Return the <a id="focus-processing-model:navigable-3" href="document-sequences.html#navigable">navigable</a>'s <a href="document-sequences.html#nav-document" id="focus-processing-model:nav-document">active document</a>.<dt>If <var>focus target</var> is a <a id="focus-processing-model:navigable-container" href="document-sequences.html#navigable-container">navigable container</a> with a non-null <a id="focus-processing-model:content-navigable" href="document-sequences.html#content-navigable">content navigable</a><dd><p>Return the <a id="focus-processing-model:navigable-container-2" href="document-sequences.html#navigable-container">navigable container</a>'s <a id="focus-processing-model:content-navigable-2" href="document-sequences.html#content-navigable">content navigable</a>'s <a href="document-sequences.html#nav-document" id="focus-processing-model:nav-document-2">active document</a>.<dt>If <var>focus target</var> is a <a id="focus-processing-model:shadow-host" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a> whose <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="focus-processing-model:concept-element-shadow-root" data-x-internal="concept-element-shadow-root">shadow root</a>'s <a id="focus-processing-model:delegates-focus" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">delegates focus</a> is true<dd><ol><li><p>Let <var>focusedElement</var> be the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable">currently focused area of a top-level traversable</a>'s <a href="#dom-anchor" id="focus-processing-model:dom-anchor">DOM anchor</a>.<li><p>If <var>focus target</var> is a <a id="focus-processing-model:shadow-including-inclusive-ancestor" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-inclusive-ancestor" data-x-internal="shadow-including-inclusive-ancestor">shadow-including inclusive ancestor</a> of <var>focusedElement</var>, then return <var>focusedElement</var>.<li><p>Return the <a href="#focus-delegate" id="focus-processing-model:focus-delegate">focus delegate</a> for <var>focus target</var> given <var>focus trigger</var>.</ol>

    <p class="note">For <a href="#sequentially-focusable" id="focus-processing-model:sequentially-focusable">sequential focusability</a>, the handling of <a href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" id="focus-processing-model:shadow-host-2" data-x-internal="shadow-host">shadow hosts</a> and <a id="focus-processing-model:delegates-focus-2" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">delegates focus</a> is done when constructing the <a href="#sequential-focus-navigation-order" id="focus-processing-model:sequential-focus-navigation-order">sequential focus navigation order</a>. That is, the <a href="#focusing-steps" id="focus-processing-model:focusing-steps">focusing steps</a> will never be called on such <a href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" id="focus-processing-model:shadow-host-3" data-x-internal="shadow-host">shadow hosts</a> as part of sequential focus navigation.</p>
   <dt>そうでなければ<dd><p>Return null.</dl>

  <p>The <dfn id="focus-delegate">focus delegate</dfn> for a <var>focusTarget</var>, given an optional string <var>focusTrigger</var> (default "<code>other</code>"), is given by the following steps:</p>

  <ol><li><p>If <var>focusTarget</var> is a <a id="focus-processing-model:shadow-host-4" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a> and its <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="focus-processing-model:concept-element-shadow-root-2" data-x-internal="concept-element-shadow-root">shadow root</a>'s <a id="focus-processing-model:delegates-focus-3" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">delegates focus</a> is false, then return null.<li><p>Let <var>whereToLook</var> be <var>focusTarget</var>.<li><p>If <var>whereToLook</var> is a <a id="focus-processing-model:shadow-host-5" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a>, then set <var>whereToLook</var> to <var>whereToLook</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="focus-processing-model:concept-element-shadow-root-3" data-x-internal="concept-element-shadow-root">shadow root</a>.<li><p>Let <var>autofocusDelegate</var> be the <a href="#autofocus-delegate" id="focus-processing-model:autofocus-delegate">autofocus delegate</a> for <var>whereToLook</var> given <var>focusTrigger</var>.<li><p>If <var>autofocusDelegate</var> is not null, then return <var>autofocusDelegate</var>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="focus-processing-model:list-iterate" data-x-internal="list-iterate">For each</a> <var>descendant</var> of <var>whereToLook</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-descendant" id="focus-processing-model:descendant" data-x-internal="descendant">descendants</a>, in <a id="focus-processing-model:tree-order-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order" data-x-internal="tree-order">tree order</a>:</p>

    <ol><li><p>Let <var>focusableArea</var> be null.<li><p>If <var>focusTarget</var> is a <code id="focus-processing-model:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> element and <var>descendant</var> is <a href="#sequentially-focusable" id="focus-processing-model:sequentially-focusable-2">sequentially focusable</a>, then set <var>focusableArea</var> to <var>descendant</var>.<li><p>Otherwise, if <var>focusTarget</var> is not a <code id="focus-processing-model:the-dialog-element-2"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> and <var>descendant</var> is a <a href="#focusable-area" id="focus-processing-model:focusable-area-4">focusable area</a>, set <var>focusableArea</var> to <var>descendant</var>.<li><p>Otherwise, set <var>focusableArea</var> to the result of <a href="#get-the-focusable-area" id="focus-processing-model:get-the-focusable-area">getting the focusable area</a> for <var>descendant</var> given <var>focusTrigger</var>.</p>

      <p class="note">This step can end up recursing, i.e., the <a href="#get-the-focusable-area" id="focus-processing-model:get-the-focusable-area-2">get the focusable area</a> steps might return the <a href="#focus-delegate" id="focus-processing-model:focus-delegate-2">focus delegate</a> of <var>descendant</var>.</p>
     <li><p>If <var>focusableArea</var> is not null, then return <var>focusableArea</var>.</ol>

    <p class="note">It's important that we are <em>not</em> looking at the <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-descendant" id="focus-processing-model:shadow-including-descendant" data-x-internal="shadow-including-descendant">shadow-including descendants</a> here, but instead only at the <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-descendant" id="focus-processing-model:descendant-2" data-x-internal="descendant">descendants</a>. <a href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" id="focus-processing-model:shadow-host-6" data-x-internal="shadow-host">Shadow hosts</a> are instead handled by the recursive case mentioned above.</p>
   <li><p>Return null.</ol>

  <p class="note">The above algorithm essentially returns the first suitable <a href="#focusable-area" id="focus-processing-model:focusable-area-5">focusable area</a> where the path between its <a href="#dom-anchor" id="focus-processing-model:dom-anchor-2">DOM anchor</a> and <var>focusTarget</var> delegates focus at any shadow tree boundaries.</p>

  <p>The <dfn id="autofocus-delegate">autofocus delegate</dfn> for a <var>focus target</var> given a <var>focus trigger</var> is given by the following steps:</p>

  <ol><li><p>For each <a id="focus-processing-model:descendant-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-descendant" data-x-internal="descendant">descendant</a> <var>descendant</var> of <var>focus target</var>, in <a id="focus-processing-model:tree-order-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order" data-x-internal="tree-order">tree order</a>:</p>

    <ol><li><p>If <var>descendant</var> does not have an <code id="focus-processing-model:attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code> content attribute, then <a id="focus-processing-model:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>Let <var>focusable area</var> be <var>descendant</var>, if <var>descendant</var> is a <a href="#focusable-area" id="focus-processing-model:focusable-area-6">focusable area</a>; otherwise let <var>focusable area</var> be the result of <a href="#get-the-focusable-area" id="focus-processing-model:get-the-focusable-area-3">getting the focusable area</a> for <var>descendant</var> given <var>focus trigger</var>.<li><p>If <var>focusable area</var> is null, then <a id="focus-processing-model:continue-2" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If <var>focusable area</var> is not <a href="#click-focusable" id="focus-processing-model:click-focusable">click focusable</a> and <var>focus trigger</var> is "<code>click</code>", then <a id="focus-processing-model:continue-3" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>Return <var>focusable area</var>.</ol>
   <li><p>Return null.</ol>

  <p>The <dfn id="focusing-steps" data-export="">focusing steps</dfn> for an object <var>new focus target</var> that is either a <a href="#focusable-area" id="focus-processing-model:focusable-area-7">focusable area</a>, or an element that is not a <a href="#focusable-area" id="focus-processing-model:focusable-area-8">focusable area</a>, or a <a id="focus-processing-model:navigable-4" href="document-sequences.html#navigable">navigable</a>, are as follows. They can optionally be run with a <var>fallback target</var> and a string <var>focus trigger</var>.</p>

  <ol><li><p>If <var>new focus target</var> is not a <a href="#focusable-area" id="focus-processing-model:focusable-area-9">focusable area</a>, then set <var>new focus target</var> to the result of <a href="#get-the-focusable-area" id="focus-processing-model:get-the-focusable-area-4">getting the focusable area</a> for <var>new focus target</var>, given <var>focus trigger</var> if it was passed.<li><p>If <var>new focus target</var> is null, then:</p>

    <ol><li><p>If no <var>fallback target</var> was specified, then return.<li><p>Otherwise, set <var>new focus target</var> to the <var>fallback target</var>.</ol>
   <li><p>If <var>new focus target</var> is a <a id="focus-processing-model:navigable-container-3" href="document-sequences.html#navigable-container">navigable container</a> with non-null <a id="focus-processing-model:content-navigable-3" href="document-sequences.html#content-navigable">content navigable</a>, then set <var>new focus target</var> to the <a id="focus-processing-model:content-navigable-4" href="document-sequences.html#content-navigable">content navigable</a>'s <a href="document-sequences.html#nav-document" id="focus-processing-model:nav-document-3">active document</a>.<li><p>If <var>new focus target</var> is a <a href="#focusable-area" id="focus-processing-model:focusable-area-10">focusable area</a> and its <a href="#dom-anchor" id="focus-processing-model:dom-anchor-3">DOM anchor</a> is <a href="#inert" id="focus-processing-model:inert">inert</a>, then return.<li><p>If <var>new focus target</var> is the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-2">currently focused area of a top-level traversable</a>, then return.<li><p>Let <var>old chain</var> be the <a href="#current-focus-chain-of-a-top-level-traversable" id="focus-processing-model:current-focus-chain-of-a-top-level-traversable">current focus chain of the top-level traversable</a> in which <var>new focus target</var> finds itself.<li><p>Let <var>new chain</var> be the <a href="#focus-chain" id="focus-processing-model:focus-chain">focus chain</a> of <var>new focus target</var>.<li><p>Run the <a href="#focus-update-steps" id="focus-processing-model:focus-update-steps">focus update steps</a> with <var>old chain</var>, <var>new chain</var>, and <var>new focus target</var> respectively.</ol>

  <p>User agents must <a id="focus-processing-model:immediately" href="infrastructure.html#immediately">immediately</a> run the <a href="#focusing-steps" id="focus-processing-model:focusing-steps-2">focusing steps</a> for a <a href="#focusable-area" id="focus-processing-model:focusable-area-11">focusable area</a> or <a id="focus-processing-model:navigable-5" href="document-sequences.html#navigable">navigable</a> <var>candidate</var> whenever the user attempts to move the focus to <var>candidate</var>.</p>

  <p>The <dfn id="unfocusing-steps">unfocusing steps</dfn> for an object <var>old focus target</var> that is either a <a href="#focusable-area" id="focus-processing-model:focusable-area-12">focusable area</a> or an element that is not a <a href="#focusable-area" id="focus-processing-model:focusable-area-13">focusable area</a> are as follows:</p>

  <ol><li><p>If <var>old focus target</var> is a <a id="focus-processing-model:shadow-host-7" href="https://triple-underscore.github.io/DOM4-ja.html#element-shadow-host" data-x-internal="shadow-host">shadow host</a> whose <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="focus-processing-model:concept-element-shadow-root-4" data-x-internal="concept-element-shadow-root">shadow root</a>'s <a id="focus-processing-model:delegates-focus-4" href="https://triple-underscore.github.io/DOM4-ja.html#shadowroot-delegates-focus" data-x-internal="delegates-focus">delegates focus</a> is true, and <var>old focus target</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-element-shadow-root" id="focus-processing-model:concept-element-shadow-root-5" data-x-internal="concept-element-shadow-root">shadow root</a> is a <a id="focus-processing-model:shadow-including-inclusive-ancestor-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-inclusive-ancestor" data-x-internal="shadow-including-inclusive-ancestor">shadow-including inclusive ancestor</a> of the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-3">currently focused area of a top-level traversable</a>'s <a href="#dom-anchor" id="focus-processing-model:dom-anchor-4">DOM anchor</a>, then set <var>old focus target</var> to that <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-4">currently focused area of a top-level traversable</a>.<li><p>If <var>old focus target</var> is <a href="#inert" id="focus-processing-model:inert-2">inert</a>, then return.<li><p>If <var>old focus target</var> is an <code id="focus-processing-model:the-area-element-3"><a href="image-maps.html#the-area-element">area</a></code> element and one of its shapes is the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-5">currently focused area of a top-level traversable</a>, or, if <var>old focus target</var> is an element with one or more scrollable regions, and one of them is the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-6">currently focused area of a top-level traversable</a>, then let <var>old focus target</var> be that <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-7">currently focused area of a top-level traversable</a>.<li><p>Let <var>old chain</var> be the <a href="#current-focus-chain-of-a-top-level-traversable" id="focus-processing-model:current-focus-chain-of-a-top-level-traversable-2">current focus chain of the top-level traversable</a> in which <var>old focus target</var> finds itself.<li><p>If <var>old focus target</var> is not one of the entries in <var>old chain</var>, then return.<li><p>If <var>old focus target</var> is not a <a href="#focusable-area" id="focus-processing-model:focusable-area-14">focusable area</a>, then return.<li><p>Let <var>topDocument</var> be <var>old chain</var>'s last entry.<li><p>If <var>topDocument</var>'s <a id="focus-processing-model:node-navigable" href="document-sequences.html#node-navigable">node navigable</a> has <a href="#system-focus" id="focus-processing-model:system-focus">system focus</a>, then run the <a href="#focusing-steps" id="focus-processing-model:focusing-steps-3">focusing steps</a> for <var>topDocument</var>'s <a id="focus-processing-model:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>.</p>

    <p>Otherwise, apply any relevant platform-specific conventions for removing <a href="#system-focus" id="focus-processing-model:system-focus-2">system focus</a> from <var>topDocument</var>'s <a id="focus-processing-model:node-navigable-2" href="document-sequences.html#node-navigable">node navigable</a>, and run the <a href="#focus-update-steps" id="focus-processing-model:focus-update-steps-2">focus update steps</a> given <var>old chain</var>, an empty list, and null.</p>
   </ol>

  <p class="note">The <a href="#unfocusing-steps" id="focus-processing-model:unfocusing-steps">unfocusing steps</a> do not always result in the focus changing, even when applied to the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-8">currently focused area of a top-level traversable</a>. For example, if the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-9">currently focused area of a top-level traversable</a> is a <a id="focus-processing-model:viewport-3" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>, then it will usually keep its focus regardless until another <a href="#focusable-area" id="focus-processing-model:focusable-area-15">focusable area</a> is explicitly focused with the <a href="#focusing-steps" id="focus-processing-model:focusing-steps-4">focusing steps</a>.</p>

  <hr>

  <p>The <dfn id="focus-update-steps">focus update steps</dfn>, given an <var>old chain</var>, a <var>new chain</var>, and a <var>new focus target</var> respectively, are as follows:</p>

  <ol><li><p>If the last entry in <var>old chain</var> and the last entry in <var>new chain</var> are the same, pop the last entry from <var>old chain</var> and the last entry from <var>new chain</var> and redo this step.<li><p>For each entry <var>entry</var> in <var>old chain</var>, in order, run these substeps:</p>

    <ol><li><p>If <var>entry</var> is an <code id="focus-processing-model:the-input-element"><a href="input.html#the-input-element">input</a></code> element, and the <code id="focus-processing-model:event-change"><a href="indices.html#event-change">change</a></code> event <a href="input.html#concept-input-apply" id="focus-processing-model:concept-input-apply">applies</a> to the element, and the element does not have a defined <a id="focus-processing-model:activation-behaviour" href="https://triple-underscore.github.io/DOM4-ja.html#eventtarget-activation-behavior" data-x-internal="activation-behaviour">activation behavior</a>, and the user has changed the element's <a href="form-control-infrastructure.html#concept-fe-value" id="focus-processing-model:concept-fe-value">value</a> or its list of <a href="input.html#concept-input-type-file-selected" id="focus-processing-model:concept-input-type-file-selected">selected files</a> while the control was focused without committing that change (such that it is different to what it was when the control was first focused), then:</p>

      <ol><li><p>Set <var>entry</var>'s <a id="focus-processing-model:user-interacted" href="form-control-infrastructure.html#user-interacted">user interacted</a> to true.<li id="unfocus-causes-change-event"><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="focus-processing-model:concept-event-fire" data-x-internal="concept-event-fire">Fire an event</a> named <code id="focus-processing-model:event-change-2"><a href="indices.html#event-change">change</a></code> at the element, with the <code id="focus-processing-model:dom-event-bubbles"><a data-x-internal="dom-event-bubbles" href="https://triple-underscore.github.io/DOM4-ja.html#dom-event-bubbles">bubbles</a></code> attribute initialized to true.</ol>
     <li><p>If <var>entry</var> is an element, let <var>blur event target</var> be <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id="focus-processing-model:document-3"><a href="dom.html#document">Document</a></code> object, let <var>blur event target</var> be that <code id="focus-processing-model:document-4"><a href="dom.html#document">Document</a></code> object's <a id="focus-processing-model:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a>.</p>

      <p>Otherwise, let <var>blur event target</var> be null.</p>
     <li><p>If <var>entry</var> is the last entry in <var>old chain</var>, and <var>entry</var> is an <code id="focus-processing-model:element"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>, and the last entry in <var>new chain</var> is also an <code id="focus-processing-model:element-2"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>, then let <var>related blur target</var> be the last entry in <var>new chain</var>. Otherwise, let <var>related blur target</var> be null.<li><p>If <var>blur event target</var> is not null, <a href="#fire-a-focus-event" id="focus-processing-model:fire-a-focus-event">fire a focus event</a> named <code id="focus-processing-model:event-blur"><a href="indices.html#event-blur">blur</a></code> at <var>blur event target</var>, with <var>related blur target</var> as the related target.</p>

      <p id="note-sometimes-no-blur-event" class="note">In some cases, e.g., if <var>entry</var> is an <code id="focus-processing-model:the-area-element-4"><a href="image-maps.html#the-area-element">area</a></code> element's shape, a scrollable region, or a <a id="focus-processing-model:viewport-4" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>, no event is fired.</p>
     </ol>
   <li><p>Apply any relevant platform-specific conventions for focusing <var>new focus target</var>. (For example, some platforms select the contents of a text control when that control is focused.)<li><p>For each entry <var>entry</var> in <var>new chain</var>, in reverse order, run these substeps:</p>

    <ol><li><p>If <var>entry</var> is a <a href="#focusable-area" id="focus-processing-model:focusable-area-16">focusable area</a>, and the <a href="#focused-area-of-the-document" id="focus-processing-model:focused-area-of-the-document">focused area of the document</a> is not <var>entry</var>:</p>

      <ol><li><p>Set <var>document</var>'s <a id="focus-processing-model:concept-relevant-global-2" href="webappapis.html#concept-relevant-global">relevant global object</a>'s <a href="nav-history-apis.html#window-navigation-api" id="focus-processing-model:window-navigation-api">navigation API</a>'s <a id="focus-processing-model:focus-changed-during-ongoing-navigation" href="nav-history-apis.html#focus-changed-during-ongoing-navigation">focus changed during ongoing navigation</a> to true.<li><p>Designate <var>entry</var> as the <a href="#focused-area-of-the-document" id="focus-processing-model:focused-area-of-the-document-2">focused area of the document</a>.</p>
      </ol>
     <li><p>If <var>entry</var> is an element, let <var>focus event target</var> be <var>entry</var>.</p>

      <p>If <var>entry</var> is a <code id="focus-processing-model:document-5"><a href="dom.html#document">Document</a></code> object, let <var>focus event target</var> be that <code id="focus-processing-model:document-6"><a href="dom.html#document">Document</a></code> object's <a id="focus-processing-model:concept-relevant-global-3" href="webappapis.html#concept-relevant-global">relevant global object</a>.</p>

      <p>Otherwise, let <var>focus event target</var> be null.</p>
     <li><p>If <var>entry</var> is the last entry in <var>new chain</var>, and <var>entry</var> is an <code id="focus-processing-model:element-3"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>, and the last entry in <var>old chain</var> is also an <code id="focus-processing-model:element-4"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code>, then let <var>related focus target</var> be the last entry in <var>old chain</var>. Otherwise, let <var>related focus target</var> be null.<li><p>If <var>focus event target</var> is not null, <a href="#fire-a-focus-event" id="focus-processing-model:fire-a-focus-event-2">fire a focus event</a> named <code id="focus-processing-model:event-focus"><a href="indices.html#event-focus">focus</a></code> at <var>focus event target</var>, with <var>related focus target</var> as the related target.</p>

      <p class="note">In some cases, e.g. if <var>entry</var> is an <code id="focus-processing-model:the-area-element-5"><a href="image-maps.html#the-area-element">area</a></code> element's shape, a scrollable region, or a <a id="focus-processing-model:viewport-5" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>, no event is fired.</p>
     </ol>
   </ol>

  <p>To <dfn id="fire-a-focus-event">fire a focus event</dfn> named <var>e</var> at an element <var>t</var> with a given related target <var>r</var>, <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="focus-processing-model:concept-event-fire-2" data-x-internal="concept-event-fire">fire an event</a> named <var>e</var> at <var>t</var>, using <code id="focus-processing-model:focusevent"><a data-x-internal="focusevent" href="https://triple-underscore.github.io/uievents-ja.html#focusevent">FocusEvent</a></code>, with the <code id="focus-processing-model:dom-focusevent-relatedtarget"><a data-x-internal="dom-focusevent-relatedtarget" href="https://triple-underscore.github.io/uievents-ja.html#dom-focusevent-relatedtarget">relatedTarget</a></code> attribute initialized to <var>r</var>, the <code id="focus-processing-model:dom-uievent-view"><a data-x-internal="dom-uievent-view" href="https://triple-underscore.github.io/uievents-ja.html#dom-uievent-view">view</a></code> attribute initialized to <var>t</var>'s <a id="focus-processing-model:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="focus-processing-model:concept-relevant-global-4" href="webappapis.html#concept-relevant-global">relevant global object</a>, and the <a id="focus-processing-model:composed-flag" href="https://triple-underscore.github.io/DOM4-ja.html#composed-flag" data-x-internal="composed-flag">composed flag</a> set.</p>

  <hr>

  <p>When a key event is to be routed in a <a id="focus-processing-model:top-level-traversable" href="document-sequences.html#top-level-traversable">top-level traversable</a>, the user agent must run the following steps:</p>

  

  <ol><li><p>Let <var>target area</var> be the <a href="#currently-focused-area-of-a-top-level-traversable" id="focus-processing-model:currently-focused-area-of-a-top-level-traversable-10">currently focused area of the top-level traversable</a>.<li><p><a id="focus-processing-model:assert" href="https://triple-underscore.github.io/infra-ja.html#assert" data-x-internal="assert">Assert</a>: <var>target area</var> is not null, since key events are only routed to <a href="document-sequences.html#top-level-traversable" id="focus-processing-model:top-level-traversable-2">top-level traversables</a> that have <a href="#system-focus" id="focus-processing-model:system-focus-3">system focus</a>. Therefore, <var>target area</var> is a <a href="#focusable-area" id="focus-processing-model:focusable-area-17">focusable area</a>.<li><p>Let <var>target node</var> be <var>target area</var>'s <a href="#dom-anchor" id="focus-processing-model:dom-anchor-5">DOM anchor</a>.<li><p>If <var>target node</var> is a <code id="focus-processing-model:document-7"><a href="dom.html#document">Document</a></code> that has a <a href="dom.html#the-body-element-2" id="focus-processing-model:the-body-element-2">body element</a>, then let <var>target node</var> be <a id="focus-processing-model:the-body-element-2-2" href="dom.html#the-body-element-2">the body element</a> of that <code id="focus-processing-model:document-8"><a href="dom.html#document">Document</a></code>.</p>

    <p>Otherwise, if <var>target node</var> is a <code id="focus-processing-model:document-9"><a href="dom.html#document">Document</a></code> object that has a non-null <a id="focus-processing-model:document-element-2" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a>, then let <var>target node</var> be that <a id="focus-processing-model:document-element-3" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a>.</p>
   <li><p>If <var>target node</var> is not <a href="#inert" id="focus-processing-model:inert-3">inert</a>, then:</p>
    <ol><li><p>Let <var>canHandle</var> be the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-dispatch" id="focus-processing-model:concept-event-dispatch" data-x-internal="concept-event-dispatch">dispatching</a> the key event at <var>target node</var>.<li><p>If <var>canHandle</var> is true, then let <var>target area</var> handle the key event. This might include <a href="webappapis.html#fire-a-click-event" id="focus-processing-model:fire-a-click-event">firing a <code>click</code> event</a> at <var>target node</var>.</ol>
   </ol>

  <hr>

  <p>The <dfn id="has-focus-steps" data-export="">has focus steps</dfn>, given a <code id="focus-processing-model:document-10"><a href="dom.html#document">Document</a></code> object <var>target</var>, are as follows:</p>

  <ol><li><p>If <var>target</var>'s <a id="focus-processing-model:node-navigable-3" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-top" id="focus-processing-model:nav-top">top-level traversable</a> does not have <a href="#system-focus" id="focus-processing-model:system-focus-4">system focus</a>, then return false.<li><p>Let <var>candidate</var> be <var>target</var>'s <a id="focus-processing-model:node-navigable-4" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-top" id="focus-processing-model:nav-top-2">top-level traversable</a>'s <a id="focus-processing-model:active-document" href="document-sequences.html#active-document">active document</a>.<li><p>While true:</p>

    <ol><li><p>If <var>candidate</var> is <var>target</var>, then return true.<li><p>If the <a href="#focused-area-of-the-document" id="focus-processing-model:focused-area-of-the-document-3">focused area</a> of <var>candidate</var> is a <a id="focus-processing-model:navigable-container-4" href="document-sequences.html#navigable-container">navigable container</a> with a non-null <a id="focus-processing-model:content-navigable-5" href="document-sequences.html#content-navigable">content navigable</a>, then set <var>candidate</var> to the <a href="document-sequences.html#nav-document" id="focus-processing-model:nav-document-4">active document</a> of that <a id="focus-processing-model:navigable-container-5" href="document-sequences.html#navigable-container">navigable container</a>'s <a id="focus-processing-model:content-navigable-6" href="document-sequences.html#content-navigable">content navigable</a>.<li><p>Otherwise, return false.</ol>
   </ol>



  <h4 id="sequential-focus-navigation"><span class="secno">6.6.5</span> <dfn>Sequential focus navigation</dfn><a href="#sequential-focus-navigation" class="self-link"></a></h4>

  <p>Each <code id="sequential-focus-navigation:document"><a href="dom.html#document">Document</a></code> has a <dfn id="sequential-focus-navigation-order">sequential focus navigation order</dfn>, which orders some or all of the <a href="#focusable-area" id="sequential-focus-navigation:focusable-area">focusable areas</a> in the <code id="sequential-focus-navigation:document-2"><a href="dom.html#document">Document</a></code> relative to each other. Its contents and ordering are given by the <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="sequential-focus-navigation:flattened-tabindex-ordered-focus-navigation-scope">flattened tabindex-ordered focus navigation scope</a> of the <code id="sequential-focus-navigation:document-3"><a href="dom.html#document">Document</a></code>.</p>

  <p class="note">Per the rules defining the <a href="#flattened-tabindex-ordered-focus-navigation-scope" id="sequential-focus-navigation:flattened-tabindex-ordered-focus-navigation-scope-2">flattened tabindex-ordered focus navigation scope</a>, the ordering is not necessarily related to the <a id="sequential-focus-navigation:tree-order" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-order" data-x-internal="tree-order">tree order</a> of the <code id="sequential-focus-navigation:document-4"><a href="dom.html#document">Document</a></code>.</p>

  <p>If a <a href="#focusable-area" id="sequential-focus-navigation:focusable-area-2">focusable area</a> is omitted from the <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order">sequential focus navigation order</a> of its <code id="sequential-focus-navigation:document-5"><a href="dom.html#document">Document</a></code>, then it is unreachable via <a href="#sequential-focus-navigation" id="sequential-focus-navigation:sequential-focus-navigation">sequential focus navigation</a>.</p>

  <p>There can also be a <dfn id="sequential-focus-navigation-starting-point">sequential focus navigation starting point</dfn>. It is initially unset. The user agent may set it when the user indicates that it should be moved.</p>

  <p class="example">For example, the user agent could set it to the position of the user's click if the user clicks on the document contents.</p>

  <p class="note">User agents are required to set the <a href="#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point">sequential focus navigation starting point</a> to the <a id="sequential-focus-navigation:target-element" href="browsing-the-web.html#target-element">target element</a> when <a href="browsing-the-web.html#navigate-fragid" id="sequential-focus-navigation:navigate-fragid">navigating to a fragment</a>.</p>

  <p>When the user requests that focus move from the <a href="#currently-focused-area-of-a-top-level-traversable" id="sequential-focus-navigation:currently-focused-area-of-a-top-level-traversable">currently focused area of a top-level traversable</a> to the next or previous <a href="#focusable-area" id="sequential-focus-navigation:focusable-area-3">focusable area</a> (e.g. as the default action of pressing the <kbd><kbd>tab</kbd></kbd> key), or when the user requests that focus sequentially move to a <a id="sequential-focus-navigation:top-level-traversable" href="document-sequences.html#top-level-traversable">top-level traversable</a> in the first place (e.g. from the browser's location bar), the user agent must use the following algorithm:</p>

  <ol><li><p>Let <var>starting point</var> be the <a href="#currently-focused-area-of-a-top-level-traversable" id="sequential-focus-navigation:currently-focused-area-of-a-top-level-traversable-2">currently focused area of a top-level traversable</a>, if the user requested to move focus sequentially from there, or else the <a id="sequential-focus-navigation:top-level-traversable-2" href="document-sequences.html#top-level-traversable">top-level traversable</a> itself, if the user instead requested to move focus from outside the <a id="sequential-focus-navigation:top-level-traversable-3" href="document-sequences.html#top-level-traversable">top-level traversable</a>.<li><p>If there is a <a href="#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point-2">sequential focus navigation starting point</a> defined and it is inside <var>starting point</var>, then let <var>starting point</var> be the <a href="#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point-3">sequential focus navigation starting point</a> instead.<li><p>Let <var>direction</var> be <i>forward</i> if the user requested the <em>next</em> control, and <i>backward</i> if the user requested the previous control.</p>

    <p class="note">Typically, pressing <kbd><kbd>tab</kbd></kbd> requests the next control, and pressing <kbd><kbd>shift</kbd> + <kbd>tab</kbd></kbd> requests the previous control.</p>
   <li><p><i>Loop</i>: Let <var>selection mechanism</var> be <i>sequential</i> if the <var>starting point</var> is a <a id="sequential-focus-navigation:navigable" href="document-sequences.html#navigable">navigable</a> or if <var>starting point</var> is in its <code id="sequential-focus-navigation:document-6"><a href="dom.html#document">Document</a></code>'s <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-2">sequential focus navigation order</a>.</p>

    <p>Otherwise, <var>starting point</var> is not in its <code id="sequential-focus-navigation:document-7"><a href="dom.html#document">Document</a></code>'s <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-3">sequential focus navigation order</a>; let <var>selection mechanism</var> be <i>DOM</i>.</p>
   <li><p>Let <var>candidate</var> be the result of running the <a href="#sequential-navigation-search-algorithm" id="sequential-focus-navigation:sequential-navigation-search-algorithm">sequential navigation search algorithm</a> with <var>starting point</var>, <var>direction</var>, and <var>selection mechanism</var> as the arguments.<li><p>If <var>candidate</var> is not null, then run the <a href="#focusing-steps" id="sequential-focus-navigation:focusing-steps">focusing steps</a> for <var>candidate</var> and return.<li><p>Otherwise, unset the <a href="#sequential-focus-navigation-starting-point" id="sequential-focus-navigation:sequential-focus-navigation-starting-point-4">sequential focus navigation starting point</a>.<li><p>If <var>starting point</var> is a <a id="sequential-focus-navigation:top-level-traversable-4" href="document-sequences.html#top-level-traversable">top-level traversable</a>, or a <a href="#focusable-area" id="sequential-focus-navigation:focusable-area-4">focusable area</a> in the <a id="sequential-focus-navigation:top-level-traversable-5" href="document-sequences.html#top-level-traversable">top-level traversable</a>, the user agent should transfer focus to its own controls appropriately (if any), honouring <var>direction</var>, and then return.</p>

    <p class="example">For example, if <var>direction</var> is <i>backward</i>, then the last <a href="#sequentially-focusable" id="sequential-focus-navigation:sequentially-focusable">sequentially focusable</a> control before the browser's rendering area would be the control to focus.</p>

    <p>If the user agent has no <a href="#sequentially-focusable" id="sequential-focus-navigation:sequentially-focusable-2">sequentially focusable</a> controls — a kiosk-mode browser, for instance — then the user agent may instead restart these steps with the <var>starting point</var> being the <a id="sequential-focus-navigation:top-level-traversable-6" href="document-sequences.html#top-level-traversable">top-level traversable</a> itself.</p>

    
   <li><p>Otherwise, <var>starting point</var> is a <a href="#focusable-area" id="sequential-focus-navigation:focusable-area-5">focusable area</a> in a <a id="sequential-focus-navigation:child-navigable" href="document-sequences.html#child-navigable">child navigable</a>. Set <var>starting point</var> to that <a id="sequential-focus-navigation:child-navigable-2" href="document-sequences.html#child-navigable">child navigable</a>'s <a href="document-sequences.html#nav-parent" id="sequential-focus-navigation:nav-parent">parent</a> and return to the step labeled <i>loop</i>.</ol>


  <p>The <dfn id="sequential-navigation-search-algorithm">sequential navigation search algorithm</dfn> consists of the following steps. This algorithm takes three arguments: <var>starting point</var>, <var>direction</var>, and <var>selection mechanism</var>.</p>

  <ol><li><p>Pick the appropriate cell from the following table, and follow the instructions in that cell.</p>

    <p>The appropriate cell is the one that is from the column whose header describes <var>direction</var> and from the first row whose header describes <var>starting point</var> and <var>selection mechanism</var>.</p>

    <table><thead><tr><th><th><var>direction</var> is <i>forward</i><th><var>direction</var> is <i>backward</i><tbody><tr><th><var>starting point</var> is a <a id="sequential-focus-navigation:navigable-2" href="document-sequences.html#navigable">navigable</a><td>Let <var>candidate</var> be the first <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area">suitable sequentially focusable area</a> in <var>starting point</var>'s <a href="document-sequences.html#nav-document" id="sequential-focus-navigation:nav-document">active document</a>, if any; or else null<td>Let <var>candidate</var> be the last <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-2">suitable sequentially focusable area</a> in <var>starting point</var>'s <a href="document-sequences.html#nav-document" id="sequential-focus-navigation:nav-document-2">active document</a>, if any; or else null<tr><th><var>selection mechanism</var> is <i>DOM</i><td>Let <var>candidate</var> be the first <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-3">suitable sequentially focusable area</a> in the <a href="#home-document" id="sequential-focus-navigation:home-document">home document</a> following <var>starting point</var>, if any; or else null<td>Let <var>candidate</var> be the last <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-4">suitable sequentially focusable area</a> in the <a href="#home-document" id="sequential-focus-navigation:home-document-2">home document</a> preceding <var>starting point</var>, if any; or else null<tr><th><var>selection mechanism</var> is <i>sequential</i><td>Let <var>candidate</var> be the first <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-5">suitable sequentially focusable area</a> in the <a href="#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order">home sequential focus navigation order</a> following <var>starting point</var>, if any; or else null<td>Let <var>candidate</var> be the last <a href="#suitable-sequentially-focusable-area" id="sequential-focus-navigation:suitable-sequentially-focusable-area-6">suitable sequentially focusable area</a> in the <a href="#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order-2">home sequential focus navigation order</a> preceding <var>starting point</var>, if any; or else null</table>

    <p>A <dfn id="suitable-sequentially-focusable-area">suitable sequentially focusable area</dfn> is a <a href="#focusable-area" id="sequential-focus-navigation:focusable-area-6">focusable area</a> whose <a href="#dom-anchor" id="sequential-focus-navigation:dom-anchor">DOM anchor</a> is not <a href="#inert" id="sequential-focus-navigation:inert">inert</a> and is <a href="#sequentially-focusable" id="sequential-focus-navigation:sequentially-focusable-3">sequentially focusable</a>.</p>

    <p>The <dfn id="home-document">home document</dfn> is the <code id="sequential-focus-navigation:document-8"><a href="dom.html#document">Document</a></code> to which <var>starting point</var> belongs.</p>

    <p>The <dfn id="home-sequential-focus-navigation-order">home sequential focus navigation order</dfn> is the <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-4">sequential focus navigation order</a> to which <var>starting point</var> belongs.</p>

    <p class="note">The <a href="#home-sequential-focus-navigation-order" id="sequential-focus-navigation:home-sequential-focus-navigation-order-3">home sequential focus navigation order</a> is the <a href="#home-document" id="sequential-focus-navigation:home-document-3">home document</a>'s <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-5">sequential focus navigation order</a>, but is only used when the <var>starting point</var> is in that <a href="#sequential-focus-navigation-order" id="sequential-focus-navigation:sequential-focus-navigation-order-6">sequential focus navigation order</a> (when it's not, <var>selection mechanism</var> will be <i>DOM</i>).</p>
   <li><p>If <var>candidate</var> is a <a id="sequential-focus-navigation:navigable-container" href="document-sequences.html#navigable-container">navigable container</a> with a non-null <a id="sequential-focus-navigation:content-navigable" href="document-sequences.html#content-navigable">content navigable</a>, then let <var>new candidate</var> be the result of running the <a href="#sequential-navigation-search-algorithm" id="sequential-focus-navigation:sequential-navigation-search-algorithm-2">sequential navigation search algorithm</a> with <var>candidate</var>'s <a id="sequential-focus-navigation:content-navigable-2" href="document-sequences.html#content-navigable">content navigable</a> as the first argument, <var>direction</var> as the second, and <i>sequential</i> as the third.</p>

    <p>If <var>new candidate</var> is null, then let <var>starting point</var> be <var>candidate</var>, and return to the top of this algorithm. Otherwise, let <var>candidate</var> be <var>new candidate</var>.</p>
   <li><p><var>candidate</var>を返す。</ol>

  


  <h4 id="focus-management-apis"><span class="secno">6.6.6</span> フォーカス管理API<a href="#focus-management-apis" class="self-link"></a></h4>

  <pre><code class='idl'><c- b>dictionary</c-> <dfn id='focusoptions' data-dfn-type='dictionary'><c- g>FocusOptions</c-></dfn> {
  <c- b>boolean</c-> <a href='#dom-focusoptions-preventscroll' id='focus-management-apis:dom-focusoptions-preventscroll'><c- g>preventScroll</c-></a> = <c- b>false</c->;
  <c- b>boolean</c-> <a href='#dom-focusoptions-focusvisible' id='focus-management-apis:dom-focusoptions-focusvisible'><c- g>focusVisible</c-></a>;
};</code></pre>

  <dl class="domintro"><dt><code><var>documentOrShadowRoot</var>.<a href="#dom-documentorshadowroot-activeelement" id="dom-documentorshadowroot-activeelement-dev">activeElement</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/activeElement" title="The activeElement read-only property of the Document interface returns the Element within the DOM that currently has focus.">Document/activeElement</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>2+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>6+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot/activeElement" title="The activeElement read-only property of the ShadowRoot interface returns the element within the shadow tree that has focus.">ShadowRoot/activeElement</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>63+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>53+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>キーイベントが送られるまたは送る文書における最も深い要素を返す。大まかにいって、これは文書におけるフォーカスされた要素である。</p>

    <p>このAPIために、<a id="focus-management-apis:child-navigable" href="document-sequences.html#child-navigable">子ナビゲート可能</a>がフォーカスされるとき、その<a href="document-sequences.html#nav-container" id="focus-management-apis:nav-container">コンテナー</a>は<a href="document-sequences.html#nav-parent" id="focus-management-apis:nav-parent">親</a>の<a href="document-sequences.html#nav-document" id="focus-management-apis:nav-document">アクティブな文書</a>内で<a href="#bc-focus-ergo-bcc-focus">フォーカスされる</a>。 たとえば、ユーザーが<code id="focus-management-apis:the-iframe-element"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>でフォーカスをテキストコントロールに移動する場合、<code id="focus-management-apis:the-iframe-element-2"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>は<code id="focus-management-apis:the-iframe-element-3"><a href="iframe-embed-object.html#the-iframe-element">iframe</a></code>の<a id="focus-management-apis:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>において<code id="focus-management-apis:dom-documentorshadowroot-activeelement"><a href="#dom-documentorshadowroot-activeelement">activeElement</a></code> APIによって返される要素である。</p>

    <p>同様に、フォーカスされた要素が<var>documentOrShadowRoot</var>とは異なる<a id="focus-management-apis:node-tree" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-tree" data-x-internal="node-tree">ノードツリー</a>にあるとき、<var>documentOrShadowRoot</var>がフォーカスされた要素の<a id="focus-management-apis:shadow-including-inclusive-ancestor" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-inclusive-ancestor" data-x-internal="shadow-including-inclusive-ancestor">シャドウを含む包含祖先</a>である場合、返される要素は<var>documentOrShadowRoot</var>と同じ<a id="focus-management-apis:node-tree-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-tree" data-x-internal="node-tree">ノードツリー</a>にある<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host" id="focus-management-apis:concept-documentfragment-host" data-x-internal="concept-documentfragment-host">ホスト</a>になり、そうでない場合はnullになる。</p>
   <dt><code><var>document</var>.<a href="#dom-document-hasfocus" id="dom-document-hasfocus-dev">hasFocus</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/hasFocus" title="The hasFocus() method of the Document interface returns a boolean value indicating whether the document or any element inside the document has focus. This method can be used to determine whether the active element in a document has focus.">Document/hasFocus</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>2+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>37+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><dd><p>キーイベントが文書を通してまたは文書に向かって送られる場合にtrueを返し、そうでなければfalseを返す。大まかにいって、これは文書、この内側でネストされた文書、フォーカスされていることに対応する。</p>
   <dt><code><var>window</var>.<a href="#dom-window-focus" id="dom-window-focus-dev">focus</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/focus" title="Makes a request to bring the window to the front. It may fail due to user settings and the window isn't guaranteed to be frontmost before this method returns.">Window/focus</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><dd><p>可能であれば、フォーカスをウィンドウの<a href="nav-history-apis.html#window-navigable" id="focus-management-apis:window-navigable">ナビゲート可能</a>に移動する。</p>
   <dt><code><var>element</var>.<a href="#dom-focus" id="dom-focus-dev">focus</a>([ { <a href="#dom-focusoptions-preventscroll" id="focus-management-apis:dom-focusoptions-preventscroll-2">preventScroll</a>: true } ])</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus" title="The HTMLElement.focus() method sets focus on the specified element, if it can be focused. The focused element is the element that will receive keyboard and similar events by default.">HTMLElement/focus</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>フォーカスを要素に移動する。</p>

    <p>要素が<a id="focus-management-apis:navigable-container" href="document-sequences.html#navigable-container">ナビゲート可能なテキストコンテナー</a>である場合、代わりに<a id="focus-management-apis:content-navigable" href="document-sequences.html#content-navigable">ナビゲート可能なコンテンツ</a>にフォーカスを移動する。</p>

    <p>デフォルトでは、このメソッドはまた要素をビューにスクロールする。Providing the <code id="focus-management-apis:dom-focusoptions-preventscroll-3"><a href="#dom-focusoptions-preventscroll">preventScroll</a></code> option and setting it to true prevents this behavior.</p>
   <dt><code><var>element</var>.<a href="#dom-blur" id="dom-blur-dev">blur</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/blur" title="The HTMLElement.blur() method removes keyboard focus from the current element.">HTMLElement/blur</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1.5+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>フォーカスを<a id="focus-management-apis:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>に移動する。このメソッドの使用は奨められない。<a id="focus-management-apis:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>にフォーカスしたい場合、<code id="focus-management-apis:document"><a href="dom.html#document">Document</a></code>の<a id="focus-management-apis:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">文書要素</a>上の<code id="focus-management-apis:dom-focus"><a href="#dom-focus">focus()</a></code>メソッドを呼び出す。</p>

    <p>見苦しいフォーカスリングを発見する場合、フォーカスリングを非表示にするためにこの方法を使用してはならない。代わりに、<a id="focus-management-apis:'outline'" href="https://triple-underscore.github.io/css-ui-ja.html#outline" data-x-internal="'outline'">'outline'</a>プロパティを上書きするために<code id="focus-management-apis::focus-visible"><a data-x-internal=":focus-visible" href="https://triple-underscore.github.io/selectors4-ja.html#the-focus-visible-pseudo">:focus-visible</a></code>疑似クラスを使用し、要素がフォーカスされるものを表示する別の方法を提供する。代替フォーカススタイルが利用可能にならないか、ページが主にキーボードを使用してページをナビゲートする人に対して著しく使用可能にならないか、ページをナビゲートするのに役立つフォーカスアウトラインを使う人の視覚を減少させないかどうかに注意する。</p>

    

    <div class="example"><p>たとえば、<code id="focus-management-apis:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素からアウトラインを隠し、代わりにフォーカスを示すために黄色の背景を使用するために、次を使うことができる：</p>

     <pre><code class='css'><c- f>textarea:focus-visible </c-><c- p>{</c-> <c- k>outline</c-><c- p>:</c-> none<c- p>;</c-> <c- k>background</c-><c- p>:</c-> yellow<c- p>;</c-> <c- k>color</c-><c- p>:</c-> black<c- p>;</c-> <c- p>}</c-></code></pre>

    </div>
   </dl>

  

  <p id="dom-document-activeelement">The <dfn data-dfn-for="DocumentOrShadowRoot" id="dom-documentorshadowroot-activeelement" data-dfn-type="attribute"><code>activeElement</code></dfn> attribute's getter must run these steps:</p>

  <ol><li><p>Let <var>candidate</var> be the <a href="#dom-anchor" id="focus-management-apis:dom-anchor">DOM anchor</a> of the <a href="#focused-area-of-the-document" id="focus-management-apis:focused-area-of-the-document">focused area</a> of this <code id="focus-management-apis:documentorshadowroot"><a href="dom.html#documentorshadowroot">DocumentOrShadowRoot</a></code>'s <a id="focus-management-apis:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>Set <var>candidate</var> to the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#retarget" id="focus-management-apis:dom-retarget" data-x-internal="dom-retarget">retargeting</a> <var>candidate</var> against this <code id="focus-management-apis:documentorshadowroot-2"><a href="dom.html#documentorshadowroot">DocumentOrShadowRoot</a></code>.<li><p>If <var>candidate</var>'s <a id="focus-management-apis:root" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root" data-x-internal="root">root</a> is not this <code id="focus-management-apis:documentorshadowroot-3"><a href="dom.html#documentorshadowroot">DocumentOrShadowRoot</a></code>, then return null.<li><p>If <var>candidate</var> is not a <code id="focus-management-apis:document-2"><a href="dom.html#document">Document</a></code> object, then return <var>candidate</var>.<li><p>If <var>candidate</var> has a <a href="dom.html#the-body-element-2" id="focus-management-apis:the-body-element-2">body element</a>, then return that <a href="dom.html#the-body-element-2" id="focus-management-apis:the-body-element-2-2">body element</a>.<li><p>If <var>candidate</var>'s <a id="focus-management-apis:document-element-2" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a> is non-null, then return that <a id="focus-management-apis:document-element-3" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a>.<li><p>Return null.</ol>

  <p>The <dfn data-dfn-for="Document" id="dom-document-hasfocus" data-dfn-type="method"><code>hasFocus()</code></dfn> method on the <code id="focus-management-apis:document-3"><a href="dom.html#document">Document</a></code> object, when invoked, must return the result of running the <a href="#has-focus-steps" id="focus-management-apis:has-focus-steps">has focus steps</a> with the <code id="focus-management-apis:document-4"><a href="dom.html#document">Document</a></code> object as the argument.</p>

  <p>The <dfn data-dfn-for="Window" id="dom-window-focus" data-dfn-type="method"><code>focus()</code></dfn> method, when invoked, must run these steps:</p>

  <ol><li><p>Let <var>current</var> be this <code id="focus-management-apis:window"><a href="nav-history-apis.html#window">Window</a></code> object's <a href="nav-history-apis.html#window-navigable" id="focus-management-apis:window-navigable-2">navigable</a>.<li><p>If <var>current</var> is null, then return.<li><p>Run the <a href="#focusing-steps" id="focus-management-apis:focusing-steps">focusing steps</a> with <var>current</var>.<li><p>If <var>current</var> is a <a id="focus-management-apis:top-level-traversable" href="document-sequences.html#top-level-traversable">top-level traversable</a>, user agents are encouraged to trigger some sort of notification to indicate to the user that the page is attempting to gain focus.</ol>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/blur" title="Shifts focus away from the window.">Window/blur</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><p>The <dfn data-dfn-for="Window" id="dom-window-blur" data-dfn-type="method"><code>blur()</code></dfn> method steps are to do nothing.</p>

  <p class="note">Historically, the <code id="focus-management-apis:dom-window-focus"><a href="#dom-window-focus">focus()</a></code> and <code id="focus-management-apis:dom-window-blur"><a href="#dom-window-blur">blur()</a></code> methods actually affected the system-level focus of the system widget (e.g., tab or window) that contained the <a id="focus-management-apis:navigable" href="document-sequences.html#navigable">navigable</a>, but hostile sites widely abuse this behavior to the user's detriment.</p>

  <p>The <dfn data-dfn-for="HTMLOrSVGElement" id="dom-focus" data-dfn-type="method"><code>focus(<var>options</var>)</code></dfn> method on elements, when invoked, must run the following steps:</p>

  <ol><li><p>If the element is marked as <i id="focus-management-apis:locked-for-focus"><a href="#locked-for-focus">locked for focus</a></i>, then return.<li><p>Mark the element as <dfn id="locked-for-focus">locked for focus</dfn>.<li><p>Run the <a href="#focusing-steps" id="focus-management-apis:focusing-steps-2">focusing steps</a> for the element.<li><p>If the value of the <dfn data-dfn-for="FocusOptions" id="dom-focusoptions-focusvisible" data-dfn-type="dict-member"><code>focusVisible</code></dfn> dictionary member of <var>options</var> is true, or is not present but in an <a id="focus-management-apis:implementation-defined" href="https://triple-underscore.github.io/infra-ja.html#implementation-defined" data-x-internal="implementation-defined">implementation-defined</a> way the user agent determines it would be best to do so, then <a id="focus-management-apis:indicate-focus" href="https://triple-underscore.github.io/selectors4-ja.html#indicate-focus" data-x-internal="indicate-focus">indicate focus</a>.<li><p>If the value of the <dfn data-dfn-for="FocusOptions" id="dom-focusoptions-preventscroll" data-dfn-type="dict-member"><code>preventScroll</code></dfn> dictionary member of <var>options</var> is false, then <a href="https://drafts.csswg.org/cssom-view/#scroll-a-target-into-view" id="focus-management-apis:scroll-a-target-into-view" data-x-internal="scroll-a-target-into-view">scroll the element into view</a> given "auto", "center", and "center".<li><p>Unmark the element as <i id="focus-management-apis:locked-for-focus-2"><a href="#locked-for-focus">locked for focus</a></i>.</ol>

  <p>The <dfn data-dfn-for="HTMLOrSVGElement" id="dom-blur" data-dfn-type="method"><code>blur()</code></dfn> method, when invoked, should run the <a href="#unfocusing-steps" id="focus-management-apis:unfocusing-steps">unfocusing steps</a> for the element on which the method was called. User agents may selectively or uniformly ignore calls to this method for usability reasons.</p>

  <p class="example">For example, if the <code id="focus-management-apis:dom-blur"><a href="#dom-blur">blur()</a></code> method is unwisely being used to remove the focus ring for aesthetics reasons, the page would become unusable by keyboard users. Ignoring calls to this method would thus allow keyboard users to interact with the page.</p>

  


  <h4 id="the-autofocus-attribute"><span class="secno">6.6.7</span> <span id="autofocusing-a-form-control:-the-autofocus-attribute"></span><code id="the-autofocus-attribute:attr-fe-autofocus"><a href="#attr-fe-autofocus">autofocus</a></code>属性<a href="#the-autofocus-attribute" class="self-link"></a></h4>

  <p><dfn data-dfn-for="html-global" id="attr-fe-autofocus" data-dfn-type="element-attr"><code>autofocus</code></dfn>コンテンツ属性は、著者にページがロードされるとすぐに要素にフォーカスされることを示すのを可能にし、ユーザーは重要な要素に手動でフォーカスすることなく入力を開始できる。</p>

  <p><code id="the-autofocus-attribute:attr-popover"><a href="popover.html#attr-popover">popover</a></code>属性が設定されている<code id="the-autofocus-attribute:the-dialog-element"><a href="interactive-elements.html#the-dialog-element">dialog</a></code>要素または<a id="the-autofocus-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>内部の要素に<code id="the-autofocus-attribute:attr-fe-autofocus-2"><a href="#attr-fe-autofocus">autofocus</a></code>属性が指定される場合、ダイアログまたはポップオーバーが表示されたときにフォーカスされる。</p>

  <p><code id="the-autofocus-attribute:attr-fe-autofocus-3"><a href="#attr-fe-autofocus">autofocus</a></code>属性は<a id="the-autofocus-attribute:boolean-attribute" href="common-microsyntaxes.html#boolean-attribute">真偽属性</a>である。</p>

  <p>To find the <dfn id="nearest-ancestor-autofocus-scoping-root-element">nearest ancestor autofocus scoping root element</dfn> given an <code id="the-autofocus-attribute:element"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code> <var>element</var>:</p>

  <ol><li><p>If <var>element</var> is a <code id="the-autofocus-attribute:the-dialog-element-2"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> element, then return <var>element</var>.<li><p>If <var>element</var>'s <code id="the-autofocus-attribute:attr-popover-2"><a href="popover.html#attr-popover">popover</a></code> attribute is not in the <a href="popover.html#attr-popover-none-state" id="the-autofocus-attribute:attr-popover-none-state">no popover state</a>, then return <var>element</var>.<li><p>Let <var>ancestor</var> be <var>element</var>.<li><p>While <var>ancestor</var> has a <a id="the-autofocus-attribute:parent-element" href="https://triple-underscore.github.io/DOM4-ja.html#parent-element" data-x-internal="parent-element">parent element</a>:</p>

    <ol><li><p>Set <var>ancestor</var> to <var>ancestor</var>'s <a id="the-autofocus-attribute:parent-element-2" href="https://triple-underscore.github.io/DOM4-ja.html#parent-element" data-x-internal="parent-element">parent element</a>.<li><p>If <var>ancestor</var> is a <code id="the-autofocus-attribute:the-dialog-element-3"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> element, then return <var>ancestor</var>.<li><p>If <var>ancestor</var>'s <code id="the-autofocus-attribute:attr-popover-3"><a href="popover.html#attr-popover">popover</a></code> attribute is not in the <a href="popover.html#attr-popover-none-state" id="the-autofocus-attribute:attr-popover-none-state-2">no popover state</a>, then return <var>ancestor</var>.</ol>
   <li><p>Return <var>ancestor</var>.</ol>

  <p>両方が<code id="the-autofocus-attribute:attr-fe-autofocus-4"><a href="#attr-fe-autofocus">autofocus</a></code>属性を指定される同じ<a href="#nearest-ancestor-autofocus-scoping-root-element" id="the-autofocus-attribute:nearest-ancestor-autofocus-scoping-root-element">直近の祖先オートフォーカス範囲のルート要素</a>をもつ2つの要素が存在してはならない。</p>

  

  <p>Each <code id="the-autofocus-attribute:document"><a href="dom.html#document">Document</a></code> has an <dfn id="autofocus-candidates">autofocus candidates</dfn> <a id="the-autofocus-attribute:list" href="https://triple-underscore.github.io/infra-ja.html#list" data-x-internal="list">list</a>, initially empty.</p>

  <p>Each <code id="the-autofocus-attribute:document-2"><a href="dom.html#document">Document</a></code> has an <dfn id="autofocus-processed-flag">autofocus processed flag</dfn> boolean, initially false.</p>

  <p>When an element with the <code id="the-autofocus-attribute:attr-fe-autofocus-5"><a href="#attr-fe-autofocus">autofocus</a></code> attribute specified is <a href="infrastructure.html#insert-an-element-into-a-document" id="the-autofocus-attribute:insert-an-element-into-a-document">inserted into a document</a>, run the following steps:</p>

  <ol><li><p>If the user has indicated (for example, by starting to type in a form control) that they do not wish focus to be changed, then optionally return.<li><p>Let <var>target</var> be the element's <a id="the-autofocus-attribute:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If <var>target</var> is not <a id="the-autofocus-attribute:fully-active" href="document-sequences.html#fully-active">fully active</a>, then return.<li><p>If <var>target</var>'s <a id="the-autofocus-attribute:active-sandboxing-flag-set" href="browsers.html#active-sandboxing-flag-set">active sandboxing flag set</a> has the <a id="the-autofocus-attribute:sandboxed-automatic-features-browsing-context-flag" href="browsers.html#sandboxed-automatic-features-browsing-context-flag">sandboxed automatic features browsing context flag</a>, then return.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="the-autofocus-attribute:list-iterate" data-x-internal="list-iterate">For each</a> <var>ancestorNavigable</var> of <var>target</var>'s <a id="the-autofocus-attribute:ancestor-navigables" href="document-sequences.html#ancestor-navigables">ancestor navigables</a>: if <var>ancestorNavigable</var>'s <a href="document-sequences.html#nav-document" id="the-autofocus-attribute:nav-document">active document</a>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="the-autofocus-attribute:concept-document-origin" data-x-internal="concept-document-origin">origin</a> is not <a id="the-autofocus-attribute:same-origin" href="browsers.html#same-origin">same origin</a> with <var>target</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-origin" id="the-autofocus-attribute:concept-document-origin-2" data-x-internal="concept-document-origin">origin</a>, then return.<li><p>Let <var>topDocument</var> be <var>target</var>'s <a id="the-autofocus-attribute:node-navigable" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-top" id="the-autofocus-attribute:nav-top">top-level traversable</a>'s <a href="document-sequences.html#nav-document" id="the-autofocus-attribute:nav-document-2">active document</a>.<li><p>If <var>topDocument</var>'s <a href="#autofocus-processed-flag" id="the-autofocus-attribute:autofocus-processed-flag">autofocus processed flag</a> is false, then <a href="https://triple-underscore.github.io/infra-ja.html#list-remove" id="the-autofocus-attribute:list-remove" data-x-internal="list-remove">remove</a> the element from <var>topDocument</var>'s <a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates">autofocus candidates</a>, and <a href="https://triple-underscore.github.io/infra-ja.html#list-append" id="the-autofocus-attribute:list-append" data-x-internal="list-append">append</a> the element to <var>topDocument</var>'s <a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates-2">autofocus candidates</a>.</ol>

  <p class="note">We do not check if an element is a <a href="#focusable-area" id="the-autofocus-attribute:focusable-area">focusable area</a> before storing it in the <a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates-3">autofocus candidates</a> list, because even if it is not a focusable area when it is inserted, it could become one by the time <a href="#flush-autofocus-candidates" id="the-autofocus-attribute:flush-autofocus-candidates">flush autofocus candidates</a> sees it.</p>

  <p>To <dfn id="flush-autofocus-candidates">flush autofocus candidates</dfn> for a document <var>topDocument</var>, run these steps:</p>

  <ol><li><p>If <var>topDocument</var>'s <a href="#autofocus-processed-flag" id="the-autofocus-attribute:autofocus-processed-flag-2">autofocus processed flag</a> is true, then return.<li><p>Let <var>candidates</var> be <var>topDocument</var>'s <a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates-4">autofocus candidates</a>.<li><p>If <var>candidates</var> <a href="https://triple-underscore.github.io/infra-ja.html#list-empty" id="the-autofocus-attribute:list-is-empty" data-x-internal="list-is-empty">is empty</a>, then return.<li><p>If <var>topDocument</var>'s <a href="#focused-area-of-the-document" id="the-autofocus-attribute:focused-area-of-the-document">focused area</a> is not <var>topDocument</var> itself, or <var>topDocument</var> has non-null <a id="the-autofocus-attribute:target-element" href="browsing-the-web.html#target-element">target element</a>, then:</p>

    <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-empty" id="the-autofocus-attribute:list-empty" data-x-internal="list-empty">Empty</a> <var>candidates</var>.<li><p>Set <var>topDocument</var>'s <a href="#autofocus-processed-flag" id="the-autofocus-attribute:autofocus-processed-flag-3">autofocus processed flag</a> to true.<li><p>Return.</ol>
   <li><p>While <var>candidates</var> is not <a href="https://triple-underscore.github.io/infra-ja.html#list-empty" id="the-autofocus-attribute:list-is-empty-2" data-x-internal="list-is-empty">empty</a>:</p>

    <ol><li><p>Let <var>element</var> be <var>candidates</var>[0].<li><p>Let <var>doc</var> be <var>element</var>'s <a id="the-autofocus-attribute:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If <var>doc</var> is not <a id="the-autofocus-attribute:fully-active-2" href="document-sequences.html#fully-active">fully active</a>, then <a href="https://triple-underscore.github.io/infra-ja.html#list-remove" id="the-autofocus-attribute:list-remove-2" data-x-internal="list-remove">remove</a> <var>element</var> from <var>candidates</var>, and <a id="the-autofocus-attribute:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If <var>doc</var>'s <a id="the-autofocus-attribute:node-navigable-2" href="document-sequences.html#node-navigable">node navigable</a>'s <a href="document-sequences.html#nav-top" id="the-autofocus-attribute:nav-top-2">top-level traversable</a> is not the same as <var>topDocument</var>'s <a id="the-autofocus-attribute:node-navigable-3" href="document-sequences.html#node-navigable">node navigable</a>, then <a href="https://triple-underscore.github.io/infra-ja.html#list-remove" id="the-autofocus-attribute:list-remove-3" data-x-internal="list-remove">remove</a> <var>element</var> from <var>candidates</var>, and <a id="the-autofocus-attribute:continue-2" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If <var>doc</var>'s <a id="the-autofocus-attribute:script-blocking-style-sheet-set" href="semantics.html#script-blocking-style-sheet-set">script-blocking style sheet set</a> is not <a href="https://triple-underscore.github.io/infra-ja.html#list-empty" id="the-autofocus-attribute:list-empty-2" data-x-internal="list-empty">empty</a>, then return.</p>

      <p class="note">In this case, <var>element</var> is the currently-best candidate, but <var>doc</var> is not ready for autofocusing. We'll try again next time <a href="#flush-autofocus-candidates" id="the-autofocus-attribute:flush-autofocus-candidates-2">flush autofocus candidates</a> is called.</p>
     <li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-remove" id="the-autofocus-attribute:list-remove-4" data-x-internal="list-remove">Remove</a> <var>element</var> from <var>candidates</var>.<li><p>Let <var>inclusiveAncestorDocuments</var> be a <a id="the-autofocus-attribute:list-2" href="https://triple-underscore.github.io/infra-ja.html#list" data-x-internal="list">list</a> consisting of the <a href="document-sequences.html#nav-document" id="the-autofocus-attribute:nav-document-3">active document</a> of <var>doc</var>'s <a id="the-autofocus-attribute:inclusive-ancestor-navigables" href="document-sequences.html#inclusive-ancestor-navigables">inclusive ancestor navigables</a>.<li><p>If any <code id="the-autofocus-attribute:document-3"><a href="dom.html#document">Document</a></code> in <var>inclusiveAncestorDocuments</var> has non-null <a id="the-autofocus-attribute:target-element-2" href="browsing-the-web.html#target-element">target element</a>, then <a id="the-autofocus-attribute:continue-3" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>Let <var>target</var> be <var>element</var>.<li><p>If <var>target</var> is not a <a href="#focusable-area" id="the-autofocus-attribute:focusable-area-2">focusable area</a>, then set <var>target</var> to the result of <a href="#get-the-focusable-area" id="the-autofocus-attribute:get-the-focusable-area">getting the focusable area</a> for <var>target</var>.</p>

      <p class="note"><a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates-5">Autofocus candidates</a> can <a href="https://triple-underscore.github.io/infra-ja.html#list-contain" id="the-autofocus-attribute:list-contains" data-x-internal="list-contains">contain</a> elements which are not <a href="#focusable-area" id="the-autofocus-attribute:focusable-area-3">focusable areas</a>. In addition to the special cases handled in the <a href="#get-the-focusable-area" id="the-autofocus-attribute:get-the-focusable-area-2">get the focusable area</a> algorithm, this can happen because a non-<a href="#focusable-area" id="the-autofocus-attribute:focusable-area-4">focusable area</a> element with an <code id="the-autofocus-attribute:attr-fe-autofocus-6"><a href="#attr-fe-autofocus">autofocus</a></code> attribute was <a href="infrastructure.html#insert-an-element-into-a-document" id="the-autofocus-attribute:insert-an-element-into-a-document-2">inserted into a document</a> and it never became focusable, or because the element was focusable but its status changed while it was stored in <a href="#autofocus-candidates" id="the-autofocus-attribute:autofocus-candidates-6">autofocus candidates</a>.</p>
     <li><p>If <var>target</var> is not null, then:</p>

      <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-empty" id="the-autofocus-attribute:list-empty-3" data-x-internal="list-empty">Empty</a> <var>candidates</var>.<li><p>Set <var>topDocument</var>'s <a href="#autofocus-processed-flag" id="the-autofocus-attribute:autofocus-processed-flag-4">autofocus processed flag</a> to true.<li><p>Run the <a href="#focusing-steps" id="the-autofocus-attribute:focusing-steps">focusing steps</a> for <var>target</var>.</ol>
     </ol>
   </ol>

  <p class="note">This handles the automatic focusing during document load. The <code id="the-autofocus-attribute:dom-dialog-show"><a href="interactive-elements.html#dom-dialog-show">show()</a></code> and <code id="the-autofocus-attribute:dom-dialog-showmodal"><a href="interactive-elements.html#dom-dialog-showmodal">showModal()</a></code> methods of <code id="the-autofocus-attribute:the-dialog-element-4"><a href="interactive-elements.html#the-dialog-element">dialog</a></code> elements also processes the <code id="the-autofocus-attribute:attr-fe-autofocus-7"><a href="#attr-fe-autofocus">autofocus</a></code> attribute.</p>

  <p class="note">Focusing the element does not imply that the user agent has to focus the browser window if it has lost focus.</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autofocus" title="The autofocus global attribute is a Boolean attribute indicating that an element should be focused on page load, or when the &lt;dialog> that it is part of is displayed.">Global_attributes/autofocus</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox yes"><span>Firefox</span><span title="Partial implementation.">🔰 1+</span></span><span class="safari yes"><span>Safari</span><span title="Partial implementation.">🔰 4+</span></span><span class="chrome yes"><span>Chrome</span><span>79+</span></span><hr><span class="opera yes"><span>Opera</span><span>66+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie yes"><span>Internet Explorer</span><span title="Partial implementation.">🔰 10+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android yes"><span>WebView Android</span><span>79+</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>57+</span></span></div></div></div><p><dfn data-dfn-for="HTMLOrSVGElement" id="dom-fe-autofocus" data-dfn-type="attribute"><code>autofocus</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id="the-autofocus-attribute:reflect" href="common-dom-interfaces.html#reflect">反映</a>しなければならない。</p>

  

  <div class="example"><p>次の断片において、文書が読み込まれるとき、テキストコントロールにフォーカスされる。</p>
   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>maxlength</c-><c- o>=</c-><c- s>"256"</c-> <c- e>name</c-><c- o>=</c-><c- s>"q"</c-> <c- e>value</c-><c- o>=</c-><c- s>""</c-> <c- e>autofocus</c-><c- p>></c->
<c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"submit"</c-> <c- e>value</c-><c- o>=</c-><c- s>"Search"</c-><c- p>></c-></code></pre>
  </div>

  <div class="example"><p><code id="the-autofocus-attribute:attr-fe-autofocus-8"><a href="#attr-fe-autofocus">autofocus</a></code>属性は、フォームコントロールだけでなく、すべての要素に適用される。 これにより、次のような例が可能になる：</p>
   <pre><code class='html'><c- p>&lt;</c-><c- f>div</c-> <c- e>contenteditable</c-> <c- e>autofocus</c-><c- p>></c->Edit <c- p>&lt;</c-><c- f>strong</c-><c- p>></c->me!<c- p>&lt;/</c-><c- f>strong</c-><c- p>>&lt;</c-><c- f>div</c-><c- p>></c-></code></pre>
  </div>



  <h3 id="assigning-keyboard-shortcuts"><span class="secno">6.7</span> キーボードショートカットの割り当て<a href="#assigning-keyboard-shortcuts" class="self-link"></a></h3>

  <h4 id="introduction-9"><span class="secno">6.7.1</span> 導入<a href="#introduction-9" class="self-link"></a></h4>

  <p><i>この節は非規範的である。</i></p>

  <p>アクティブにされるまたはフォーカスさせることができる各要素は<code id="introduction-9:the-accesskey-attribute"><a href="#the-accesskey-attribute">accesskey</a></code>属性を使用して、それをアクティブにするための単一のキーの組み合わせを割り当てることができる。</p>

  <p>正確なショートカットは、ユーザーエージェントによって決定され、ユーザーのキーボードに関する情報に基づき、どのキーボードショートカットが既にプラットフォーム上に存在し、他にどのようなショートカットがページ上で指定され、ガイドとして<code id="introduction-9:the-accesskey-attribute-2"><a href="#the-accesskey-attribute">accesskey</a></code>属性に提供された情報を使用する。</p>

  <p>関連するキーボードショートカットが多種多様な入力デバイスで利用可能であることを確実にするために、著者は<code id="introduction-9:the-accesskey-attribute-3"><a href="#the-accesskey-attribute">accesskey</a></code>属性で多数の選択肢を提供できる。</p>

  <p>各選択肢は、文字または数字のような、単一の文字で構成される。</p>

  <p>ユーザーエージェントは、キーボードショートカットの一覧をユーザーに提供できるが、著者は行うことも推奨される。<code id="introduction-9:dom-accesskeylabel"><a href="#dom-accesskeylabel">accessKeyLabel</a></code> IDL属性は、ユーザーエージェントによって割り当てられた実際のキーの組み合わせを表す文字列を返す。</p>

  <div class="example"><p>この例において、著者はショートカットキーを使用して呼び出すことができるボタンを提供してきた。フルキーボードをサポートするために、著者は可能なキーとして"C"を提供している。テンキーのみを搭載したデバイスをサポートするために、著者は別の可能なキーとして"1"を提供している。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>button</c-> <c- e>value</c-><c- o>=</c-><c- s>Collect</c-> <c- e>onclick</c-><c- o>=</c-><c- s>"collect()"</c->
       <strong><c- e>accesskey</c-><c- o>=</c-><c- s>"C 1"</c-></strong> <c- e>id</c-><c- o>=</c-><c- s>c</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>ショートカットキーが何であるかをユーザーに伝えるために、著者は明示的にボタンのラベルにキーの組み合わせを追加するために選択しているここでのこのスクリプトを持つ。</p>

   <pre><code class='js'><c- a>function</c-> addShortcutKeyLabel<c- p>(</c->button<c- p>)</c-> <c- p>{</c->
<strong>  <c- k>if</c-> <c- p>(</c->button<c- p>.</c->accessKeyLabel <c- o>!=</c-> <c- t>''</c-><c- p>)</c->
    button<c- p>.</c->value <c- o>+=</c-> <c- t>' ('</c-> <c- o>+</c-> button<c- p>.</c->accessKeyLabel <c- o>+</c-> <c- t>')'</c-><c- p>;</c-></strong>
<c- p>}</c->
addShortcutKeyLabel<c- p>(</c->document<c- p>.</c->getElementById<c- p>(</c-><c- t>'c'</c-><c- p>));</c-></code></pre>

   <p>異なるプラットフォーム上のブラウザーは、たとえ同じキーの組み合わせであっても、そのプラットフォーム上で普及している規則に基づいて異なるラベルを表示する。たとえば、キーの組み合わせが、Controlキー、Shiftキー、および文字Cである場合、Macのブラウザーが"<samp>^⇧C</samp>"を表示するかもしれない一方で、Windowsのブラウザーは"<samp>Ctrl+Shift+C</samp>"を表示するかもしれない。一方でEmacsのブラウザーは単に"<samp>C-C</samp>"を表示するかもしれない。同様に、キーの組み合わせがAltキーとEscキーである場合、Windowsは"<samp>Alt+Esc</samp>"を使用するかもしれず、Macは"<samp>⌥⎋</samp>"を使用するかもしれず、Emacsのブラウザーは、"<samp>M-ESC</samp>"または"<samp>ESC ESC</samp>"を使用するかもしれない。</p>

   <p>したがって、一般に、<code id="introduction-9:dom-accesskeylabel-2"><a href="#dom-accesskeylabel">accessKeyLabel</a></code> IDL属性から返された値を解析しようとするのは賢明ではない。</p>

  </div>


  <h4 id="the-accesskey-attribute"><span class="secno">6.7.2</span> <dfn data-dfn-for="html-global" data-dfn-type="element-attr"><code>accesskey</code></dfn>属性<a href="#the-accesskey-attribute" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/accesskey" title="The accesskey global attribute provides a hint for generating a keyboard shortcut for the current element. The attribute value must consist of a single printable character (which includes accented and other characters that can be generated by the keyboard).">Global_attributes/accesskey</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <p>すべての<a id="the-accesskey-attribute:html-elements" href="infrastructure.html#html-elements">HTML要素</a>は、<code id="the-accesskey-attribute:the-accesskey-attribute"><a href="#the-accesskey-attribute">accesskey</a></code>コンテンツ属性の設定を持ってもよい。<code id="the-accesskey-attribute:the-accesskey-attribute-2"><a href="#the-accesskey-attribute">accesskey</a></code>属性値は、要素をアクティブにするまたはフォーカスするキーボードショートカットを作成するためのガイドとして、ユーザーエージェントによって使用される。</p>

  <p>指定される場合、値は、<a id="the-accesskey-attribute:ordered-set-of-unique-space-separated-tokens" href="common-microsyntaxes.html#ordered-set-of-unique-space-separated-tokens">順序付きの一意な空白区切りトークンの集合</a>でなければならない。これらのトークンはいずれも別のトークンと<a id="the-accesskey-attribute:identical-to" href="https://triple-underscore.github.io/infra-ja.html#string-is" data-x-internal="identical-to">同一</a>でなく、それぞれが正確に1コードポイント長さでなければならない。</p>

  <div class="example"><p>次の例において、サイトを熟知するキーボードユーザーがより迅速に関連するページに移動できるよう、さまざまなリンクがアクセスキーとともに与えられる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>nav</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Consortium Activities"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"A"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/activities"</c-><c- p>></c->Activities<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Technical Reports and Recommendations"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"T"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/TR/"</c-><c- p>></c->Technical Reports<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Alphabetical Site Index"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"S"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/siteindex"</c-><c- p>></c->Site Index<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"About This Site"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"B"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/"</c-><c- p>></c->About Consortium<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> |
  <c- p>&lt;</c-><c- f>a</c-> <c- e>title</c-><c- o>=</c-><c- s>"Contact Consortium"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"C"</c-> <c- e>href</c-><c- o>=</c-><c- s>"/Consortium/contact"</c-><c- p>></c->Contact<c- p>&lt;/</c-><c- f>a</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>nav</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>次の例において、検索フィールドは2つの可能なアクセスキー、"s"と"0"（この順番で）が与えられる。テンキー付きの小さなデバイス上のユーザーエージェントは単なる簡素なキー<kbd><kbd>0</kbd></kbd>を選ぶかもしれないが、フルキーボードを搭載したデバイスでのユーザーエージェントは、ショートカットキーとして<kbd><kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>S</kbd></kbd>を選ぶかもしれない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>action</c-><c- o>=</c-><c- s>"/search"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>label</c-><c- p>></c->Search: <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"search"</c-> <c- e>name</c-><c- o>=</c-><c- s>"q"</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"s 0"</c-><c- p>>&lt;/</c-><c- f>label</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>"submit"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>次の例において、ボタンは説明可能なアクセスキーを持つ。このスクリプトは次に、ユーザーエージェントが選択したキーの組み合わせを通知するためにボタンのラベルの更新を試みる。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>submit</c-> <c- e>accesskey</c-><c- o>=</c-><c- s>"N @ 1"</c-> <c- e>value</c-><c- o>=</c-><c- s>"Compose"</c-><c- p>></c->
...
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>function</c-> labelButton<c- p>(</c->button<c- p>)</c-> <c- p>{</c->
   <c- k>if</c-> <c- p>(</c->button<c- p>.</c->accessKeyLabel<c- p>)</c->
     button<c- p>.</c->value <c- o>+=</c-> <c- t>' ('</c-> <c- o>+</c-> button<c- p>.</c->accessKeyLabel <c- o>+</c-> <c- t>')'</c-><c- p>;</c->
 <c- p>}</c->
 <c- a>var</c-> inputs <c- o>=</c-> document<c- p>.</c->getElementsByTagName<c- p>(</c-><c- t>'input'</c-><c- p>);</c->
 <c- k>for</c-> <c- p>(</c-><c- a>var</c-> i <c- o>=</c-> <c- mf>0</c-><c- p>;</c-> i <c- o>&lt;</c-> inputs<c- p>.</c->length<c- p>;</c-> i <c- o>+=</c-> <c- mf>1</c-><c- p>)</c-> <c- p>{</c->
   <c- k>if</c-> <c- p>(</c->inputs<c- p>[</c->i<c- p>].</c->type <c- o>==</c-> <c- u>"submit"</c-><c- p>)</c->
     labelButton<c- p>(</c->inputs<c- p>[</c->i<c- p>]);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>あるユーザーエージェントにおいて、ボタンのラベルは"<samp>Compose（⌘N）</samp>"になるかもしれない。別のものにおいて、これは"<samp>Compose（Alt+⇧+1）</samp>"になるかもしれない。ユーザーエージェントがキーを割り当てない場合、単に"<samp>Compose</samp>"になる。正確な文字列は<a href="#assigned-access-key" id="the-accesskey-attribute:assigned-access-key">割り当てられるアクセスキー</a>が何であるか、およびどのようにユーザーエージェントがそのキーの組み合わせを表すかに依存する。</p>

  </div>


  

  <h4 id="keyboard-shortcuts-processing-model"><span class="secno">6.7.3</span> <span id="processing-model-6"></span>Processing model<a href="#keyboard-shortcuts-processing-model" class="self-link"></a></h4>

  <p>An element's <dfn id="assigned-access-key">assigned access key</dfn> is a key combination derived from the element's <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute. Initially, an element must not have an <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key">assigned access key</a>.</p>

  <p>Whenever an element's <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute-2"><a href="#the-accesskey-attribute">accesskey</a></code> attribute is set, changed, or removed, the user agent must update the element's <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-2">assigned access key</a> by running the following steps:</p>

  <ol><li><p>If the element has no <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute-3"><a href="#the-accesskey-attribute">accesskey</a></code> attribute, then skip to the <i>fallback</i> step below.<li><p>Otherwise, <a href="https://triple-underscore.github.io/infra-ja.html#split-on-ascii-whitespace" id="keyboard-shortcuts-processing-model:split-a-string-on-spaces" data-x-internal="split-a-string-on-spaces">split the attribute's value on ASCII whitespace</a>, and let <var>keys</var> be the resulting tokens.<li><p>For each value in <var>keys</var> in turn, in the order the tokens appeared in the attribute's value, run the following substeps:</p>

    <ol><li><p>If the value is not a string exactly one code point in length, then skip the remainder of these steps for this value.<li><p>If the value does not correspond to a key on the system's keyboard, then skip the remainder of these steps for this value.<li><p><a id="keyboard-shortcuts-processing-model:tracking-vector" title="There is a tracking vector here." href="https://triple-underscore.github.io/infra-ja.html#tracking-vector" class="tracking-vector" data-x-internal="tracking-vector"><img width="46" alt="(This is a tracking vector.)" crossorigin="" src="https://resources.whatwg.org/tracking-vector.svg" height="64"></a> If the user agent can find a mix of zero or more modifier keys that, combined with the key that corresponds to the value given in the attribute, can be used as the access key, then the user agent may assign that combination of keys as the element's <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-3">assigned access key</a> and return.</ol>
   <li><p><i>Fallback</i>: Optionally, the user agent may assign a key combination of its choosing as the element's <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-4">assigned access key</a> and then return.<li><p>If this step is reached, the element has no <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-5">assigned access key</a>.</ol>

  <p>Once a user agent has selected and assigned an access key for an element, the user agent should not change the element's <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-6">assigned access key</a> unless the <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute-4"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute is changed or the element is moved to another <code id="keyboard-shortcuts-processing-model:document"><a href="dom.html#document">Document</a></code>.</p>

  <p>When the user presses the key combination corresponding to the <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-7">assigned access key</a> for an element, if the element <a href="interactive-elements.html#concept-command" id="keyboard-shortcuts-processing-model:concept-command">defines a command</a>, the command's <a href="interactive-elements.html#command-facet-hiddenstate" id="keyboard-shortcuts-processing-model:command-facet-hiddenstate">Hidden State</a> facet is false (visible), the command's <a href="interactive-elements.html#command-facet-disabledstate" id="keyboard-shortcuts-processing-model:command-facet-disabledstate">Disabled State</a> facet is also false (enabled), the element is <a id="keyboard-shortcuts-processing-model:in-a-document" href="https://triple-underscore.github.io/DOM4-ja.html#in-a-document" data-x-internal="in-a-document">in a document</a> that has a non-null <a href="document-sequences.html#concept-document-bc" id="keyboard-shortcuts-processing-model:concept-document-bc">browsing context</a>, and neither the element nor any of its ancestors has a <code id="keyboard-shortcuts-processing-model:attr-hidden"><a href="#attr-hidden">hidden</a></code> attribute specified, then the user agent must trigger the <a href="interactive-elements.html#command-facet-action" id="keyboard-shortcuts-processing-model:command-facet-action">Action</a> of the command.</p>

  <p class="note">User agents <a href="interactive-elements.html#expose-commands-in-ui">might expose</a> elements that have an <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute-5"><a href="#the-accesskey-attribute">accesskey</a></code> attribute in other ways as well, e.g. in a menu displayed in response to a specific key combination.</p> 

  <hr>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/accessKey" title="The HTMLElement.accessKey property sets the keystroke which a user can press to jump to a given element.">HTMLElement/accessKey</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>5+</span></span><span class="safari yes"><span>Safari</span><span>6+</span></span><span class="chrome yes"><span>Chrome</span><span>17+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLElement" id="dom-accesskey" data-dfn-type="attribute"><code>accessKey</code></dfn> IDL attribute must <a id="keyboard-shortcuts-processing-model:reflect" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="keyboard-shortcuts-processing-model:the-accesskey-attribute-6"><a href="#the-accesskey-attribute">accesskey</a></code> content attribute.</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/accessKeyLabel" title="The HTMLElement.accessKeyLabel read-only property returns a string containing the element's browser-assigned access key (if any); otherwise it returns an empty string.">HTMLElement/accessKeyLabel</a><div class="support"><span class="firefox yes"><span>Firefox</span><span>8+</span></span><span class="safari yes"><span>Safari</span><span>14+</span></span><span class="chrome no"><span>Chrome</span><span>No</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink no"><span>Edge</span><span>No</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLElement" id="dom-accesskeylabel" data-dfn-type="attribute"><code>accessKeyLabel</code></dfn> IDL attribute must return a string that represents the element's <a href="#assigned-access-key" id="keyboard-shortcuts-processing-model:assigned-access-key-8">assigned access key</a>, if any. If the element does not have one, then the IDL attribute must return the empty string.</p>

  



  <h3 id="editing-2"><span class="secno">6.8</span> 編集<a href="#editing-2" class="self-link"></a></h3>

  <h4 id="contenteditable"><span class="secno">6.8.1</span> 編集可能な文書領域を作成する：<code id="contenteditable:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>コンテンツ属性<a href="#contenteditable" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/contentEditable" title="The contentEditable property of the HTMLElement interface specifies whether or not the element is editable.">HTMLElement/contentEditable</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  <pre><code class='idl'><c- b>interface</c-> <c- b>mixin</c-> <dfn id='elementcontenteditable' data-dfn-type='interface'><c- g>ElementContentEditable</c-></dfn> {
  [<a id='contenteditable:cereactions' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-contenteditable' id='contenteditable:dom-contenteditable'><c- g>contentEditable</c-></a>;
  [<a id='contenteditable:cereactions-2' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-enterkeyhint' id='contenteditable:dom-enterkeyhint'><c- g>enterKeyHint</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-iscontenteditable' id='contenteditable:dom-iscontenteditable'><c- g>isContentEditable</c-></a>;
  [<a id='contenteditable:cereactions-3' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-inputmode' id='contenteditable:dom-inputmode'><c- g>inputMode</c-></a>;
};</code></pre>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable" title="The contenteditable global attribute is an enumerated attribute indicating if the element should be editable by the user. If so, the browser modifies its widget to allow editing.">Global_attributes/contenteditable</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3+</span></span><span class="safari yes"><span>Safari</span><span>4+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-contenteditable" data-dfn-type="element-attr"><code>contenteditable</code></dfn>コンテンツ属性は、キーワードが空文字列、<code>true</code>、<code>plaintext-only</code>、および<code>false</code>である<a id="contenteditable:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。空の文字列および<code>true</code>キーワードは、<i>true</i>状態に対応する。<code>plaintext-only</code>キーワードは、<i>plaintext-only</i>状態に対応する。<code>false</code>キーワードは、<i>false</i>状態に対応する。さらに、<i>継承</i>状態という4番目の状態がある。これは、<i id="contenteditable:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">不正値のデフォルト</a></i>および<i id="contenteditable:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>である。</p>

  <p><i>true</i>状態は、要素が編集可能であることを示す。<i>plaintext-only</i>状態は、要素の生テキストコンテンツのみが編集可能であるが、リッチテキストフォーマットが無効であることを示す。<i>継承</i>状態は、要素が親要素と同じ種類の編集可能（または編集不可）であることを示す。<i>false</i>状態は、要素が編集可能でないことを示す。</p>

  <div class="example"><p>たとえば、ユーザーがHTMLを使用する記事を書くことが期待される、新しい記事を公開するために<code id="contenteditable:the-form-element"><a href="forms.html#the-form-element">form</a></code>および<code id="contenteditable:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>を持つページを考えてみる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>method</c-><c- o>=</c-><c- s>POST</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->New article<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>textarea</c-> <c- e>name</c-><c- o>=</c-><c- s>article</c-><c- p>></c-><c- ni>&amp;lt;</c->p>Hello world.<c- ni>&amp;lt;</c->/p><c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>button</c-><c- p>></c->Publish<c- p>&lt;/</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>スクリプトを有効にする場合、<code id="contenteditable:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素は、<code id="contenteditable:attr-contenteditable-2"><a href="#attr-contenteditable">contenteditable</a></code>属性を使用して、代わりにリッチテキストコントロールに置き換えることができる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>method</c-><c- o>=</c-><c- s>POST</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->New article<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>textarea</c-> <c- e>id</c-><c- o>=</c-><c- s>textarea</c-> <c- e>name</c-><c- o>=</c-><c- s>article</c-><c- p>></c-><c- ni>&amp;lt;</c->p>Hello world.<c- ni>&amp;lt;</c->/p><c- p>&lt;/</c-><c- f>textarea</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>div</c-> <c- e>id</c-><c- o>=</c-><c- s>div</c-> <c- e>style</c-><c- o>=</c-><c- s>"white-space: pre-wrap"</c-> <c- e>hidden</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>></c->Hello world.<c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>div</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
   <c- a>let</c-> textarea <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- u>"textarea"</c-><c- p>);</c->
   <c- a>let</c-> div <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- u>"div"</c-><c- p>);</c->
   textarea<c- p>.</c->hidden <c- o>=</c-> <c- kc>true</c-><c- p>;</c->
   div<c- p>.</c->hidden <c- o>=</c-> <c- kc>false</c-><c- p>;</c->
   div<c- p>.</c->contentEditable <c- o>=</c-> <c- u>"true"</c-><c- p>;</c->
   div<c- p>.</c->oninput <c- o>=</c-> <c- p>(</c->e<c- p>)</c-> <c- p>=></c-> <c- p>{</c->
     textarea<c- p>.</c->value <c- o>=</c-> div<c- p>.</c->innerHTML<c- p>;</c->
   <c- p>};</c->
  <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>button</c-><c- p>></c->Publish<c- p>&lt;/</c-><c- f>button</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>たとえば挿入リンクを挿入する機能は、<code id="contenteditable:execCommand"><a data-x-internal="execCommand" href="https://w3c.github.io/editing/docs/execCommand/#execcommand%28%29">document.execCommand()</a></code>APIを使用する、または<code id="contenteditable:selection"><a data-x-internal="selection" href="https://triple-underscore.github.io/selection-api-ja.html#selection-interface">Selection</a></code>APIおよび他のDOM APIを使用して実装することができる。<a href="references.html#refsEXECCOMMAND">[EXECCOMMAND]</a> <a href="references.html#refsSELECTION">[SELECTION]</a> <a href="references.html#refsDOM">[DOM]</a></p>
  </div>

  <div class="example"><p><code id="contenteditable:attr-contenteditable-3"><a href="#attr-contenteditable">contenteditable</a></code>属性はまた、大きな効果を使用することができる：</p>

   <pre><code class='html'><c- cp>&lt;!doctype html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>en</c-><c- p>></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->Live CSS editing!<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>style</c-> <c- e>style</c-><c- o>=</c-><c- s>white-space:pre</c-> <c- e>contenteditable</c-><c- p>></c->
<c- f>html</c-> <c- p>{</c-> <c- k>margin</c-><c- p>:</c-><c- mf>.2</c-><c- b>em</c-><c- p>;</c-> <c- k>font-size</c-><c- p>:</c-><c- mi>2</c-><c- b>em</c-><c- p>;</c-> <c- k>color</c-><c- p>:</c-><c- kc>lime</c-><c- p>;</c-> <c- k>background</c-><c- p>:</c-><c- kc>purple</c-> <c- p>}</c->
<c- f>head</c-><c- o>,</c-> <c- f>title</c-><c- o>,</c-> <c- f>style</c-> <c- p>{</c-> <c- k>display</c-><c- p>:</c-><c- kc>block</c-> <c- p>}</c->
<c- f>body</c-> <c- p>{</c-> <c- k>display</c-><c- p>:</c-><c- kc>none</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c-></code></pre>
  </div>

  <dl class="domintro"><dt><code><var>element</var>.<a href="#dom-contenteditable" id="dom-contenteditable-dev">contentEditable</a> [ = <var>value</var> ]</code><dd><p><code id="contenteditable:attr-contenteditable-4"><a href="#attr-contenteditable">contenteditable</a></code>属性の状態に基づいて、"<code>true</code>"、"<code>plaintext-only</code>"、"<code>false</code>"、または"<code>inherit</code>"を返す。</p>

    <p>その状態を変更する設定が可能である。</p>

    <p>新しい値がこれらの文字列のいずれかでない場合、<a id="contenteditable:syntaxerror" href="https://triple-underscore.github.io/WebIDL-ja.html#syntaxerror" data-x-internal="syntaxerror">"<code>SyntaxError</code>"</a> <code id="contenteditable:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   <dt><code><var>element</var>.<a href="#dom-iscontenteditable" id="dom-iscontenteditable-dev">isContentEditable</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/isContentEditable" title="The HTMLElement.isContentEditable read-only property returns a boolean value that is true if the contents of the element are editable; otherwise it returns false.">HTMLElement/isContentEditable</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>4+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><dd><p>要素が編集可能な場合にtrueを返す。そうでなければfalseを返す。</dl>

  

  <p>The <dfn data-dfn-for="ElementContentEditable" id="dom-contenteditable" data-dfn-type="attribute"><code>contentEditable</code></dfn> IDL attribute, on getting, must return the string "<code>true</code>" if the content attribute is set to the true state, "<code>plaintext-only</code>" if the content attribute is set to the plaintext-only state, "<code>false</code>" if the content attribute is set to the false state, and "<code>inherit</code>" otherwise. On setting, if the new value is an <a id="contenteditable:ascii-case-insensitive" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>inherit</code>" then the content attribute must be removed, if the new value is an <a id="contenteditable:ascii-case-insensitive-2" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>true</code>" then the content attribute must be set to the string "<code>true</code>", if the new value is an <a id="contenteditable:ascii-case-insensitive-3" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>plaintext-only</code>" then the content attribute must be set to the string "<code>plaintext-only</code>", if the new value is an <a id="contenteditable:ascii-case-insensitive-4" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>false</code>" then the content attribute must be set to the string "<code>false</code>", and otherwise the attribute setter must throw a <a id="contenteditable:syntaxerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#syntaxerror" data-x-internal="syntaxerror">"<code>SyntaxError</code>"</a> <code id="contenteditable:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.</p>

  <p>The <dfn data-dfn-for="ElementContentEditable" id="dom-iscontenteditable" data-dfn-type="attribute"><code>isContentEditable</code></dfn> IDL attribute, on getting, must return true if the element is either an <a href="#editing-host" id="contenteditable:editing-host">editing host</a> or <a id="contenteditable:editable" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">editable</a>, and false otherwise.</p>

  



  <h4 id="making-entire-documents-editable:-the-designmode-idl-attribute"><span class="secno">6.8.2</span> 文書全体を編集可能にする：<code id="making-entire-documents-editable:-the-designmode-idl-attribute:designMode"><a href="#designMode">designMode</a></code>のゲッターおよびセッター<a href="#making-entire-documents-editable:-the-designmode-idl-attribute" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var>.<a href="#designMode" id="dom-document-designmode-dev">designMode</a> [ = <var>value</var> ]</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/designMode" title="document.designMode controls whether the entire document is editable. Valid values are "on" and "off". According to the specification, this property is meant to default to "off". Firefox follows this standard. The earlier versions of Chrome and IE default to "inherit". Starting in Chrome 43, the default is "off" and "inherit" is no longer supported. In IE6-10, the value is capitalized.">Document/designMode</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1.2+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>9+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>文書が編集可能である場合に"<code>on</code>"を返し、ない場合に"<code>off</code>"を返す。</p>

    <p>文書の現在の状態を変更する設定が可能である。これは、文書をフォーカスし、その文書で文書の選択をリセットする。</p>
   </dl>

  

  <p><code id="making-entire-documents-editable:-the-designmode-idl-attribute:document"><a href="dom.html#document">Document</a></code> objects have an associated <dfn id="design-mode-enabled">design mode enabled</dfn>, which is a boolean. 最初はfalseである。</p>

  <p>The <dfn data-dfn-for="Document" id="designMode" data-dfn-type="attribute"><code>designMode</code></dfn> getter steps are to return "<code>on</code>" if <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#design-mode-enabled" id="making-entire-documents-editable:-the-designmode-idl-attribute:design-mode-enabled">design mode enabled</a> is true; otherwise "<code>off</code>".</p>

  <p>The <code id="making-entire-documents-editable:-the-designmode-idl-attribute:designMode-2"><a href="#designMode">designMode</a></code> setter steps are:</p>

  <ol><li><p>Let <var>value</var> be the given value, <a id="making-entire-documents-editable:-the-designmode-idl-attribute:converted-to-ascii-lowercase" href="https://triple-underscore.github.io/infra-ja.html#ascii-lowercase" data-x-internal="converted-to-ascii-lowercase">converted to ASCII lowercase</a>.<li><p>If <var>value</var> is "<code>on</code>" and <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#design-mode-enabled" id="making-entire-documents-editable:-the-designmode-idl-attribute:design-mode-enabled-2">design mode enabled</a> is false, then:</p>

    <ol><li><p>Set <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-3" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#design-mode-enabled" id="making-entire-documents-editable:-the-designmode-idl-attribute:design-mode-enabled-3">design mode enabled</a> to true.<li><p>Reset <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-4" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="making-entire-documents-editable:-the-designmode-idl-attribute:active-range" href="https://w3c.github.io/editing/docs/execCommand/#active-range" data-x-internal="active-range">active range</a>'s start and end boundary points to be at the start of <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-5" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>.<li><p>Run the <a href="#focusing-steps" id="making-entire-documents-editable:-the-designmode-idl-attribute:focusing-steps">focusing steps</a> for <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-6" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="making-entire-documents-editable:-the-designmode-idl-attribute:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a>, if non-null.</ol>
   <li><p>If <var>value</var> is "<code>off</code>", then set <a id="making-entire-documents-editable:-the-designmode-idl-attribute:this-7" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#design-mode-enabled" id="making-entire-documents-editable:-the-designmode-idl-attribute:design-mode-enabled-4">design mode enabled</a> to false.</ol>

  


  <h4 id="best-practices-for-in-page-editors"><span class="secno">6.8.3</span> ページ内編集者のためのベストプラクティス<a href="#best-practices-for-in-page-editors" class="self-link"></a></h4>

  <p>著者は、もともと値'pre-wrap'へこれら編集のメカニズムを介して作成された<a href="#editing-host" id="best-practices-for-in-page-editors:editing-host">編集ホスト</a>およびマークアップ上の<a id="best-practices-for-in-page-editors:'white-space'" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>プロパティを設定することを奨める。デフォルトのHTML空白処理は、あまりWYSIWYG編集に向かず、そして<a id="best-practices-for-in-page-editors:'white-space'-2" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>がデフォルト値のままである場合、いくつかのコーナーの場合において、行の折り返しは正しく動作しない。</p>

  <div class="example"><p>デフォルト'normal'値が代わりに使用される場合に発生する問題の例として、単語の間に2つのスペース（ここでは"␣"によって表される）とともに、"<kbd>yellow␣␣ball</kbd>"と入力したユーザーの場合を考える。<a id="best-practices-for-in-page-editors:'white-space'-3" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>のデフォルト値（'normal'）のための場所での編集規則ともに、結果のマークアップは、"<samp>yellow&amp;nbsp; ball</samp>"または"<samp>yellow &amp;nbsp;ball</samp>"のいずれかで構成される。すなわち、2つの単語間の非開票スペースに加えて、通常スペースが存在する。<a id="best-practices-for-in-page-editors:'white-space'-4" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>に対する'normal'値は共に相殺するために隣接する通常スペースを必要とするため、これは必要である。</p>

   <p>前者の場合において、たとえ行の末尾で"<samp>yellow</samp>"単独で一致するとしても、"<samp>yellow⍽</samp>"は次の行（"⍽"は非改行スペースを表すためにここで使用されている）に折り返す。後者の場合において、行の先頭に包まれる場合、"<samp>⍽ball</samp>"は非改行スペース由来の可視インデントを持つだろう。</p>

   <p>しかし、<a id="best-practices-for-in-page-editors:'white-space'-5" href="https://triple-underscore.github.io/css-text-ja.html#white-space-property" data-x-internal="'white-space'">'white-space'</a>が'pre-wrap'に設定される場合、編集規則は、代わりに単に単語間に2つの通常のスペースを置き、2つの単語が行末で分割されるべきであり、スペースはレンダリングから削除されてきれいになる。</p>

  </div>

  

  <h4 id="editing-apis"><span class="secno">6.8.4</span> Editing APIs<a href="#editing-apis" class="self-link"></a></h4>

  <p>An <dfn id="editing-host" data-export="">editing host</dfn> is either an <a href="infrastructure.html#html-elements" id="editing-apis:html-elements">HTML element</a> with its <code id="editing-apis:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code> attribute in the <i>true</i> state or <i>plaintext-only</i> state, or a <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-child" id="editing-apis:concept-tree-child" data-x-internal="concept-tree-child">child</a> <a href="infrastructure.html#html-elements" id="editing-apis:html-elements-2">HTML element</a> of a <code id="editing-apis:document"><a href="dom.html#document">Document</a></code> whose <a href="#design-mode-enabled" id="editing-apis:design-mode-enabled">design mode enabled</a> is true.</p>

  <p>The definition of the terms <dfn id="active-range"><a href="https://w3c.github.io/editing/docs/execCommand/#active-range">active range</a></dfn>, <dfn id="editing-host-of"><a href="https://w3c.github.io/editing/docs/execCommand/#editing-host-of">editing host of</a></dfn>, and <dfn id="editable"><a href="https://w3c.github.io/editing/docs/execCommand/#editable">editable</a></dfn>, the user interface requirements of elements that are <a href="#editing-host" id="editing-apis:editing-host">editing hosts</a> or <a id="editing-apis:editable" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">editable</a>, the <dfn id="execCommand"><a href="https://w3c.github.io/editing/docs/execCommand/#execcommand%28%29"><code>execCommand()</code></a></dfn>, <dfn id="dom-document-querycommandenabled"><a href="https://w3c.github.io/editing/docs/execCommand/#querycommandenabled%28%29"><code>queryCommandEnabled()</code></a></dfn>, <dfn id="dom-document-querycommandindeterm"><a href="https://w3c.github.io/editing/docs/execCommand/#querycommandindeterm%28%29"><code>queryCommandIndeterm()</code></a></dfn>, <dfn id="dom-document-querycommandstate"><a href="https://w3c.github.io/editing/docs/execCommand/#querycommandstate%28%29"><code>queryCommandState()</code></a></dfn>, <dfn id="dom-document-querycommandsupported"><a href="https://w3c.github.io/editing/docs/execCommand/#querycommandsupported%28%29"><code>queryCommandSupported()</code></a></dfn>, and <dfn id="dom-document-querycommandvalue"><a href="https://w3c.github.io/editing/docs/execCommand/#querycommandvalue%28%29"><code>queryCommandValue()</code></a></dfn> methods, text selections, and the <dfn id="delete-the-selection"><a href="https://w3c.github.io/editing/docs/execCommand/#delete-the-selection">delete the selection</a></dfn> algorithm are defined in <cite>execCommand</cite>. <a href="references.html#refsEXECCOMMAND">[EXECCOMMAND]</a></p>

  

  <h4 id="spelling-and-grammar-checking"><span class="secno">6.8.5</span> スペルと文法チェック<a href="#spelling-and-grammar-checking" class="self-link"></a></h4>

  

  <p>User agents can support the checking of spelling and grammar of editable text, either in form controls (such as the value of <code id="spelling-and-grammar-checking:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code> elements), or in elements in an <a href="#editing-host" id="spelling-and-grammar-checking:editing-host">editing host</a> (e.g. using <code id="spelling-and-grammar-checking:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>).</p>

  <p>For each element, user agents must establish a <dfn id="concept-spellcheck-default">default behavior</dfn>, either through defaults or through preferences expressed by the user. There are three possible default behaviors for each element:</p>

  <dl><dt><dfn id="concept-spellcheck-default-true">true-by-default</dfn><dd>The element will be checked for spelling and grammar if its contents are editable and spellchecking is not explicitly disabled through the <code id="spelling-and-grammar-checking:attr-spellcheck"><a href="#attr-spellcheck">spellcheck</a></code> attribute.<dt><dfn id="concept-spellcheck-default-false">false-by-default</dfn><dd>The element will never be checked for spelling and grammar unless spellchecking is explicitly enabled through the <code id="spelling-and-grammar-checking:attr-spellcheck-2"><a href="#attr-spellcheck">spellcheck</a></code> attribute.<dt><dfn id="concept-spellcheck-default-inherit">inherit-by-default</dfn><dd>The element's default behavior is the same as its parent element's. Elements that have no parent element cannot have this as their default behavior.</dl>

  <hr>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/spellcheck" title="The spellcheck global attribute is an enumerated attribute that defines whether the element may be checked for spelling errors.">Global_attributes/spellcheck</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>Yes</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>9+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>11</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>57+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>9.3+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>47+</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>37+</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-spellcheck" data-dfn-type="element-attr"><code>spellcheck</code></dfn>属性は、キーワードが空文字列、<code>true</code>および<code>false</code>となる<a id="spelling-and-grammar-checking:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。空の文字列および<i>true</i>キーワードは、<code>true</code>状態に対応する。<i>false</i>キーワードは、<code>false</code>状態に対応する。さらに、<i>default</i>状態という第3の状態が存在する。これは<i id="spelling-and-grammar-checking:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>および<i id="spelling-and-grammar-checking:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>である。</p>

  <p class="note"><i>true</i>状態は、要素がそのスペルおよび文法チェックを持つことを示す。<i>default</i>状態は、以下で定義されるように、親要素の独自の<code id="spelling-and-grammar-checking:attr-spellcheck-3"><a href="#attr-spellcheck">spellcheck</a></code>状態におそらく基づいて、デフォルトの動作に応じて動作する要素であることを示す。<i>false</i>状態は、要素がチェックされないことを示す。</p>

  

  <hr>

  

  <dl class="domintro"><dt><code><var>element</var>.<a href="#dom-spellcheck" id="dom-spellcheck-dev">spellcheck</a> [ = <var>value</var> ]</code><dd><p>要素がスペルや文法チェックを持つ場合はtrueを返す。そうでなければfalseを返す。</p>

    <p>デフォルトを上書きして<code id="spelling-and-grammar-checking:attr-spellcheck-4"><a href="#attr-spellcheck">spellcheck</a></code>コンテンツ属性を設定するための、設定が可能である。</p>
   </dl>

  

  <p>The <dfn data-dfn-for="HTMLElement" id="dom-spellcheck" data-dfn-type="attribute"><code>spellcheck</code></dfn> IDL attribute, on getting, must return true if the element's <code id="spelling-and-grammar-checking:attr-spellcheck-5"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in the <i>true</i> state, or if the element's <code id="spelling-and-grammar-checking:attr-spellcheck-6"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in the <i>default</i> state and the element's <a href="#concept-spellcheck-default" id="spelling-and-grammar-checking:concept-spellcheck-default">default behavior</a> is <a href="#concept-spellcheck-default-true" id="spelling-and-grammar-checking:concept-spellcheck-default-true">true-by-default</a>, or if the element's <code id="spelling-and-grammar-checking:attr-spellcheck-7"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in the <i>default</i> state and the element's <a href="#concept-spellcheck-default" id="spelling-and-grammar-checking:concept-spellcheck-default-2">default behavior</a> is <a href="#concept-spellcheck-default-inherit" id="spelling-and-grammar-checking:concept-spellcheck-default-inherit">inherit-by-default</a> and the element's parent element's <code id="spelling-and-grammar-checking:dom-spellcheck"><a href="#dom-spellcheck">spellcheck</a></code> IDL attribute would return true; otherwise, if none of those conditions applies, then the attribute must instead return false.</p>

  <p class="note">The <code id="spelling-and-grammar-checking:dom-spellcheck-2"><a href="#dom-spellcheck">spellcheck</a></code> IDL attribute is not affected by user preferences that override the <code id="spelling-and-grammar-checking:attr-spellcheck-8"><a href="#attr-spellcheck">spellcheck</a></code> content attribute, and therefore might not reflect the actual spellchecking state.</p>

  <p>On setting, if the new value is true, then the element's <code id="spelling-and-grammar-checking:attr-spellcheck-9"><a href="#attr-spellcheck">spellcheck</a></code> content attribute must be set to the literal string "<code>true</code>", otherwise it must be set to the literal string "<code>false</code>".<hr>

  <p>User agents must only consider the following pieces of text as checkable for the purposes of this feature:</p>

  <ul><li>The <a href="form-control-infrastructure.html#concept-fe-value" id="spelling-and-grammar-checking:concept-fe-value">value</a> of <code id="spelling-and-grammar-checking:the-input-element"><a href="input.html#the-input-element">input</a></code> elements whose <code id="spelling-and-grammar-checking:attr-input-type"><a href="input.html#attr-input-type">type</a></code> attributes are in the <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="spelling-and-grammar-checking:text-(type=text)-state-and-search-state-(type=search)">Text</a>, <a href="input.html#text-(type=text)-state-and-search-state-(type=search)" id="spelling-and-grammar-checking:text-(type=text)-state-and-search-state-(type=search)-2">Search</a>, <a href="input.html#url-state-(type=url)" id="spelling-and-grammar-checking:url-state-(type=url)">URL</a>, or <a href="input.html#email-state-(type=email)" id="spelling-and-grammar-checking:email-state-(type=email)">Email</a> states and that are <i id="spelling-and-grammar-checking:concept-fe-mutable"><a href="form-control-infrastructure.html#concept-fe-mutable">mutable</a></i> (i.e. that do not have the <code id="spelling-and-grammar-checking:attr-input-readonly"><a href="input.html#attr-input-readonly">readonly</a></code> attribute specified and that are not <a href="form-control-infrastructure.html#concept-fe-disabled" id="spelling-and-grammar-checking:concept-fe-disabled">disabled</a>).<li>The <a href="form-control-infrastructure.html#concept-fe-value" id="spelling-and-grammar-checking:concept-fe-value-2">value</a> of <code id="spelling-and-grammar-checking:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code> elements that do not have a <code id="spelling-and-grammar-checking:attr-textarea-readonly"><a href="form-elements.html#attr-textarea-readonly">readonly</a></code> attribute and that are not <a href="form-control-infrastructure.html#concept-fe-disabled" id="spelling-and-grammar-checking:concept-fe-disabled-2">disabled</a>.<li>Text in <code id="spelling-and-grammar-checking:text"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code> nodes that are children of <a href="#editing-host" id="spelling-and-grammar-checking:editing-host-2">editing hosts</a> or <a id="spelling-and-grammar-checking:editable" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">editable</a> elements.<li>Text in attributes of <a id="spelling-and-grammar-checking:editable-2" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">editable</a> elements.</ul>

  <p>For text that is part of a <code id="spelling-and-grammar-checking:text-2"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code> node, the element with which the text is associated is the element that is the immediate parent of the first character of the word, sentence, or other piece of text. For text in attributes, it is the attribute's element. For the values of <code id="spelling-and-grammar-checking:the-input-element-2"><a href="input.html#the-input-element">input</a></code> and <code id="spelling-and-grammar-checking:the-textarea-element-3"><a href="form-elements.html#the-textarea-element">textarea</a></code> elements, it is the element itself.</p>

  <p>To determine if a word, sentence, or other piece of text in an applicable element (as defined above) is to have spelling- and grammar-checking enabled, the UA must use the following algorithm:</p>

  <ol><li>If the user has disabled the checking for this text, then the checking is disabled.<li>Otherwise, if the user has forced the checking for this text to always be enabled, then the checking is enabled.<li>Otherwise, if the element with which the text is associated has a <code id="spelling-and-grammar-checking:attr-spellcheck-10"><a href="#attr-spellcheck">spellcheck</a></code> content attribute, then: if that attribute is in the <i>true</i> state, then checking is enabled; otherwise, if that attribute is in the <i>false</i> state, then checking is disabled.<li>Otherwise, if there is an ancestor element with a <code id="spelling-and-grammar-checking:attr-spellcheck-11"><a href="#attr-spellcheck">spellcheck</a></code> content attribute that is not in the <i>default</i> state, then: if the nearest such ancestor's <code id="spelling-and-grammar-checking:attr-spellcheck-12"><a href="#attr-spellcheck">spellcheck</a></code> content attribute is in the <i>true</i> state, then checking is enabled; otherwise, checking is disabled.<li>Otherwise, if the element's <a href="#concept-spellcheck-default" id="spelling-and-grammar-checking:concept-spellcheck-default-3">default behavior</a> is <a href="#concept-spellcheck-default-true" id="spelling-and-grammar-checking:concept-spellcheck-default-true-2">true-by-default</a>, then checking is enabled.<li>Otherwise, if the element's <a href="#concept-spellcheck-default" id="spelling-and-grammar-checking:concept-spellcheck-default-4">default behavior</a> is <a href="#concept-spellcheck-default-false" id="spelling-and-grammar-checking:concept-spellcheck-default-false">false-by-default</a>, then checking is disabled.<li>Otherwise, if the element's parent element has <em>its</em> checking enabled, then checking is enabled.<li>Otherwise, checking is disabled.</ol>

  <p>If the checking is enabled for a word/sentence/text, the user agent should indicate spelling and grammar errors in that text. User agents should take into account the other semantics given in the document when suggesting spelling and grammar corrections. User agents may use the language of the element to determine what spelling and grammar rules to use, or may use the user's preferred language settings. UAs should use <code id="spelling-and-grammar-checking:the-input-element-3"><a href="input.html#the-input-element">input</a></code> element attributes such as <code id="spelling-and-grammar-checking:attr-input-pattern"><a href="input.html#attr-input-pattern">pattern</a></code> to ensure that the resulting value is valid, where possible.</p>

  <p>If checking is disabled, the user agent should not indicate spelling or grammar errors for that text.</p>

  <div class="example"><p>The element with ID "a" in the following example would be the one used to determine if the word "Hello" is checked for spelling errors. In this example, it would not be.</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>div</c-> <c- e>contenteditable</c-><c- o>=</c-><c- s>"true"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>span</c-> <c- e>spellcheck</c-><c- o>=</c-><c- s>"false"</c-> <c- e>id</c-><c- o>=</c-><c- s>"a"</c-><c- p>></c->Hell<c- p>&lt;/</c-><c- f>span</c-><c- p>>&lt;</c-><c- f>em</c-><c- p>></c->o!<c- p>&lt;/</c-><c- f>em</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>div</c-><c- p>></c-></code></pre>

   <p>The element with ID "b" in the following example would have checking enabled (the leading space character in the attribute's value on the <code id="spelling-and-grammar-checking:the-input-element-4"><a href="input.html#the-input-element">input</a></code> element causes the attribute to be ignored, so the ancestor's value is used instead, regardless of the default).</p>

   <pre class="bad"><code class='html'><c- p>&lt;</c-><c- f>p</c-> <c- e>spellcheck</c-><c- o>=</c-><c- s>"true"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>label</c-><c- p>></c->Name: <c- p>&lt;</c-><c- f>input</c-> <c- e>spellcheck</c-><c- o>=</c-><c- s>" false"</c-> <c- e>id</c-><c- o>=</c-><c- s>"b"</c-><c- p>>&lt;/</c-><c- f>label</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

  </div>

  

  <p class="note">この仕様は、スペルや文法チェッカーに対するユーザーインターフェイスを定義しない。ユーザーエージェントはオンデマンドチェックを提供するかもしれず、チェックが有効である間に連続的なチェックを実行するかもしれず、または他のインターフェイスを使用するかもしれない。</p>

  <h4 id="autocapitalization"><span class="secno">6.8.6</span> 自動大文字化<a href="#autocapitalization" class="self-link"></a></h4>

  <p>モバイルデバイス上の仮想キーボードや音声入力など、テキストを入力するいくつかの方法では、文の最初の文字を自動的に大文字にすることでユーザーを支援することがある（この規則で言語でテキストを構成する場合）。自動大文字化を実装する仮想キーボードは、自動大文字にすべき文字を入力しようとするとき、大文字の文字を表示するように自動的に切り替えるかもしれない（ただし、ユーザーはその文字を小文字に切り替え可能である）。例えば音声入力など、他の入力の種類は、ユーザーが最初に介入するオプションを与えないような方法で自動大文字化を行ってもよい。<code id="autocapitalization:attr-autocapitalize"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、著者がそのような振る舞いを制御するのを可能にする。</p>

  <p>典型的に実装されるように、<code id="autocapitalization:attr-autocapitalize-2"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、物理キーボードで入力するときの動作に影響しない。（この理由のために、場合によっては自動大文字化の動作を上書きしたり、最初の入力の後にテキストを編集することをユーザーの能力と同様に、属性をいかなる種類の入力検証にも当てにしてはならない。</p>

  <p>ホストされている編集可能領域の自動大文字化動作を制御するために<a href="#editing-host" id="autocapitalization:editing-host">編集ホスト</a>上で、その要素にテキストを入力するための動作を制御するために<code id="autocapitalization:the-input-element"><a href="input.html#the-input-element">input</a></code>もしくは<code id="autocapitalization:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の上で、または<code id="autocapitalization:the-form-element-2"><a href="forms.html#the-form-element">form</a></code>要素に関連付けられたすべての<a href="forms.html#category-autocapitalize" id="autocapitalization:category-autocapitalize">自動大文字継承要素</a>のデフォルトの動作を制御するために<code id="autocapitalization:the-form-element"><a href="forms.html#the-form-element">form</a></code>要素上で<code id="autocapitalization:attr-autocapitalize-3"><a href="#attr-autocapitalize">autocapitalize</a></code>属性を使用することができる。<p><code id="autocapitalization:attr-autocapitalize-4"><a href="#attr-autocapitalize">autocapitalize</a></code>属性は、<code id="autocapitalization:attr-input-type"><a href="input.html#attr-input-type">type</a></code>属性が<a href="input.html#url-state-(type=url)" id="autocapitalization:url-state-(type=url)">URL</a>、<a href="input.html#email-state-(type=email)" id="autocapitalization:email-state-(type=email)">Email、</a>または<a href="input.html#password-state-(type=password)" id="autocapitalization:password-state-(type=password)">Password</a>状態のいずれかにある<code id="autocapitalization:the-input-element-2"><a href="input.html#the-input-element">input</a></code>要素に対して、自動大文字化を有効にすることはない。(This behavior is included in the <a href="#used-autocapitalization-hint" id="autocapitalization:used-autocapitalization-hint">used autocapitalization hint</a> algorithm below.)</p>

  <p>自動大文字化処理モデルは、以下のように定義される5つの<dfn id="autocapitalization-hint">自動大文字化ヒント</dfn>の中から選択することに基づく：</p>

  <dl><dt><dfn id="autocap-hint-default">default</dfn><dd><p>ユーザーエージェントおよびインプットメソッドは、自動大文字化を有効にするかどうかを独自に決定すべきである。<dt><dfn id="autocap-hint-none">none</dfn><dd><p>自動大文字化は適用されるべきではない（すべての文字は小文字をデフォルトにすべきである）。<dt><dfn id="autocap-hint-sentences">sentences</dfn><dd><p>各文の最初の文字は大文字をデフォルトにすべきである。他のすべての文字は小文字をデフォルトにすべきである。<dt><dfn id="autocap-hint-words">words</dfn><dd><p>各単語の最初の文字は大文字をデフォルトにすべきである。他のすべての文字は小文字をデフォルトにすべきである。<dt><dfn id="autocap-hint-characters">characters</dfn><dd><p>全ての文字は大文字をデフォルトにすべきである。</dl>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autocapitalize" title="The autocapitalize global attribute is an enumerated attribute that controls whether and how text input is automatically capitalized as it is entered/edited by the user.">Global_attributes/autocapitalize</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>111+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>43+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie unknown"><span>Internet Explorer</span><span>?</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>5+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-autocapitalize" data-dfn-type="element-attr"><code>autocapitalize</code></dfn>属性は、状態が可能な<a href="#autocapitalization-hint" id="autocapitalization:autocapitalization-hint">自動大文字ヒント</a>である<a id="autocapitalization:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。属性の状態で指定された<a href="#autocapitalization-hint" id="autocapitalization:autocapitalization-hint-2">自動大文字化ヒント</a>は、ユーザーエージェントの動作を通知する、<a href="#used-autocapitalization-hint" id="autocapitalization:used-autocapitalization-hint-2">使用済みの自動大文字化ヒント</a>を形成するための他の考慮事項と組み合わされる。この属性のキーワードと状態マッピングは次のとおり：</p>

  <table><thead><tr><th>キーワード<th>状態<tbody><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-off" data-dfn-type="attr-value"><code>off</code></dfn><td rowspan="2"><a href="#autocap-hint-none" id="autocapitalization:autocap-hint-none">none</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-none" data-dfn-type="attr-value"><code>none</code></dfn><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-on" data-dfn-type="attr-value"><code>on</code></dfn><td rowspan="2"><a href="#autocap-hint-sentences" id="autocapitalization:autocap-hint-sentences">sentences</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-sentences" data-dfn-type="attr-value"><code>sentences</code></dfn><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-words" data-dfn-type="attr-value"><code>words</code></dfn><td><a href="#autocap-hint-words" id="autocapitalization:autocap-hint-words">words</a><tr><td><dfn data-dfn-for="html-global/autocapitalize" id="attr-autocapitalize-characters" data-dfn-type="attr-value"><code>characters</code></dfn><td><a href="#autocap-hint-characters" id="autocapitalization:autocap-hint-characters">characters</a></table>

  <p><i id="autocapitalization:invalid-value-default"><a href="common-microsyntaxes.html#invalid-value-default">不正値のデフォルト</a></i>は<a href="#autocap-hint-sentences" id="autocapitalization:autocap-hint-sentences-2">sentences</a>状態である。<i id="autocapitalization:missing-value-default"><a href="common-microsyntaxes.html#missing-value-default">欠損値のデフォルト</a></i>は<a href="#autocap-hint-default" id="autocapitalization:autocap-hint-default">default</a>状態である。</p>

  <dl class="domintro"><dt><code><var>element</var>.<a href="#dom-autocapitalize" id="dom-autocapitalize-dev">autocapitalize</a> [ = <var>value</var> ]</code><dd><p>要素の現在の自動大文字化状態を返す。設定されていない場合は空文字列を返す。<code id="autocapitalization:the-form-element-3"><a href="forms.html#the-form-element">form</a></code>要素から状態を継承する<code id="autocapitalization:the-input-element-3"><a href="input.html#the-input-element">input</a></code>要素と<code id="autocapitalization:the-textarea-element-2"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の場合、これは<code id="autocapitalization:the-form-element-4"><a href="forms.html#the-form-element">form</a></code>要素の自動大文字化状態を返すが、編集可能領域の要素の場合、これは（この要素が実際に<a href="#editing-host" id="autocapitalization:editing-host-2">編集ホスト</a>でない限り）編集ホストの自動大文字化状態を返さないことに注意すること。</p>

    <p><code id="autocapitalization:attr-autocapitalize-5"><a href="#attr-autocapitalize">autocapitalize</a></code>コンテンツ属性を設定する（そしてそれによって要素の自動大文字化動作を変化させる）ことで、設定が可能である。</p>
   </dl>

  

  <p>To compute the <dfn id="own-autocapitalization-hint">own autocapitalization hint</dfn> of an element <var>element</var>, run the following steps:</p>

  <ol><li><p>If the <code id="autocapitalization:attr-autocapitalize-6"><a href="#attr-autocapitalize">autocapitalize</a></code> content attribute is present on <var>element</var>, and its value is not the empty string, return the state of the attribute.<li><p>If <var>element</var> is an <a href="forms.html#category-autocapitalize" id="autocapitalization:category-autocapitalize-2">autocapitalize-inheriting element</a> and has a non-null <a id="autocapitalization:form-owner" href="form-control-infrastructure.html#form-owner">form owner</a>, return the <a href="#own-autocapitalization-hint" id="autocapitalization:own-autocapitalization-hint">own autocapitalization hint</a> of <var>element</var>'s <a id="autocapitalization:form-owner-2" href="form-control-infrastructure.html#form-owner">form owner</a>.<li><p>Return <a href="#autocap-hint-default" id="autocapitalization:autocap-hint-default-2">default</a>.</ol>

  <p>The <dfn data-dfn-for="HTMLElement" id="dom-autocapitalize" data-dfn-type="attribute"><code>autocapitalize</code></dfn> getter steps are to:</p>

  <ol><li><p>Let <var>state</var> be the <a href="#own-autocapitalization-hint" id="autocapitalization:own-autocapitalization-hint-2">own autocapitalization hint</a> of <a id="autocapitalization:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>.<li><p>If <var>state</var> is <a href="#autocap-hint-default" id="autocapitalization:autocap-hint-default-3">default</a>, then return the empty string.<li><p>If <var>state</var> is <a href="#autocap-hint-none" id="autocapitalization:autocap-hint-none-2">none</a>, then return "<code id="autocapitalization:attr-autocapitalize-none"><a href="#attr-autocapitalize-none">none</a></code>".<li><p>If <var>state</var> is <a href="#autocap-hint-sentences" id="autocapitalization:autocap-hint-sentences-3">sentences</a>, then return "<code id="autocapitalization:attr-autocapitalize-sentences"><a href="#attr-autocapitalize-sentences">sentences</a></code>".<li><p>Return the keyword value corresponding to <var>state</var>.</ol>

  <p>The <code id="autocapitalization:dom-autocapitalize"><a href="#dom-autocapitalize">autocapitalize</a></code> setter steps are to set the <code id="autocapitalization:attr-autocapitalize-7"><a href="#attr-autocapitalize">autocapitalize</a></code> content attribute to the given value.</p>

  <hr>

  <p>User agents that support customizable autocapitalization behavior for a text input method and wish to allow web developers to control this functionality should, during text input into an element, compute the <dfn id="used-autocapitalization-hint">used autocapitalization hint</dfn> for the element. This will be an <a href="#autocapitalization-hint" id="autocapitalization:autocapitalization-hint-3">autocapitalization hint</a> that describes the recommended autocapitalization behavior for text input into the element.</p>

  <p>User agents or input methods may choose to ignore or override the <a href="#used-autocapitalization-hint" id="autocapitalization:used-autocapitalization-hint-3">used autocapitalization hint</a> in certain circumstances.</p>

  <p>The <a href="#used-autocapitalization-hint" id="autocapitalization:used-autocapitalization-hint-4">used autocapitalization hint</a> for an element <var>element</var> is computed using the following algorithm:</p>

  <ol><li><p>If <var>element</var> is an <code id="autocapitalization:the-input-element-4"><a href="input.html#the-input-element">input</a></code> element whose <code id="autocapitalization:attr-input-type-2"><a href="input.html#attr-input-type">type</a></code> attribute is in one of the <a href="input.html#url-state-(type=url)" id="autocapitalization:url-state-(type=url)-2">URL</a>, <a href="input.html#email-state-(type=email)" id="autocapitalization:email-state-(type=email)-2">Email</a>, or <a href="input.html#password-state-(type=password)" id="autocapitalization:password-state-(type=password)-2">Password</a> states, then return <a href="#autocap-hint-default" id="autocapitalization:autocap-hint-default-4">default</a>.<li><p>If <var>element</var> is an <code id="autocapitalization:the-input-element-5"><a href="input.html#the-input-element">input</a></code> element or a <code id="autocapitalization:the-textarea-element-3"><a href="form-elements.html#the-textarea-element">textarea</a></code> element, then return <var>element</var>'s <a href="#own-autocapitalization-hint" id="autocapitalization:own-autocapitalization-hint-3">own autocapitalization hint</a>.<li><p>If <var>element</var> is an <a href="#editing-host" id="autocapitalization:editing-host-3">editing host</a> or an <a id="autocapitalization:editable" href="https://w3c.github.io/editing/docs/execCommand/#editable" data-x-internal="editable">editable</a> element, then return the <a href="#own-autocapitalization-hint" id="autocapitalization:own-autocapitalization-hint-4">own autocapitalization hint</a> of the <a id="autocapitalization:editing-host-of" href="https://w3c.github.io/editing/docs/execCommand/#editing-host-of" data-x-internal="editing-host-of">editing host of</a> <var>element</var>.<li><p><a id="autocapitalization:assert" href="https://triple-underscore.github.io/infra-ja.html#assert" data-x-internal="assert">Assert</a>: this step is never reached, since text input only occurs in elements that meet one of the above criteria.</ol>

  


  <h4 id="input-modalities:-the-inputmode-attribute"><span class="secno">6.8.7</span> 入力モダリティ：<code id="input-modalities:-the-inputmode-attribute:attr-inputmode"><a href="#attr-inputmode">inputmode</a></code>属性<a href="#input-modalities:-the-inputmode-attribute" class="self-link"></a></h4>

  <p>ユーザーエージェントは、フォームコントロール（<code id="input-modalities:-the-inputmode-attribute:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の値など）で、または<a href="#editing-host" id="input-modalities:-the-inputmode-attribute:editing-host">編集ホスト</a>（<code id="input-modalities:-the-inputmode-attribute:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>など）における要素で<code id="input-modalities:-the-inputmode-attribute:attr-inputmode-2"><a href="#attr-inputmode">inputmode</a></code>属性をサポートすることができる。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode" title="The inputmode global attribute is an enumerated attribute that hints at the type of data that might be entered by the user while editing the element or its contents. This allows a browser to display an appropriate virtual keyboard.">Global_attributes/inputmode</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>95+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>66+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>79+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>12.2+</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-inputmode" data-dfn-type="element-attr"><code>inputmode</code></dfn>コンテンツ属性は、ユーザーがコンテンツを入力する際に最も参考になる入力メカニズムの種類を指定する<a id="input-modalities:-the-inputmode-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。</p>

  <table><thead><tr><th>キーワード<th>説明<tbody><tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-none" data-dfn-type="attr-value"><code>none</code></dfn><td>ユーザーエージェントは仮想キーボードを表示すべきではない。このキーワードは、独自のキーボードコントロールをレンダリングするコンテンツに役立つ。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-text" data-dfn-type="attr-value"><code>text</code></dfn><td>ユーザーエージェントは、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-tel" data-dfn-type="attr-value"><code>tel</code></dfn><td>ユーザーエージェントは、電話番号入力が可能な仮想キーボードを表示すべきであある。これは、数字0〜9、"＃"文字、および"*"文字のキーを含むべきである。一部のロケールで、これはまた、アルファベットのニーモニックラベル（たとえば、米国で、"2"キーはまた、歴史的に文字A、B、およびCで標識されている）を含むことができる。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-url" data-dfn-type="attr-value"><code>url</code></dfn><td>ユーザーエージェントは、"/"と"."文字、"www"や".com"のようなドメイン名の中で見つかった文字列を簡単に入力するための、<a href="https://triple-underscore.github.io/URL-ja.html#concept-url" id="input-modalities:-the-inputmode-attribute:url" data-x-internal="url">URL</a>の入力を補助するためのキーとともに、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-email" data-dfn-type="attr-value"><code>email</code></dfn><td>ユーザーエージェントは、"@"文字および"."文字のような、電子メールアドレスの入力を補助するためのキーとともに、ユーザーのロケールでテキスト入力が可能な仮想キーボードを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-numeric" data-dfn-type="attr-value"><code>numeric</code></dfn><td>ユーザーエージェントは、数字入力が可能な仮想キーボードを表示すべきであある。このキーワードは、PIN入力に便利である。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-decimal" data-dfn-type="attr-value"><code>decimal</code></dfn><td>ユーザーエージェントは、小数入力が可能な仮想キーボードを表示すべきであある。ロケールの数値キーおよびフォーマットセパレーターを表示すべきである。<tr><td><dfn data-dfn-for="html-global/inputmode" id="attr-inputmode-keyword-search" data-dfn-type="attr-value"><code>search</code></dfn><td>ユーザーエージェントは、検索に最適化された仮想キーボードを表示すべきである。</table>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/inputMode" title="The HTMLElement property inputMode reflects the value of the element's inputmode attribute.">HTMLElement/inputMode</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>95+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>66+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>79+</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="ElementContentEditable" id="dom-inputmode" data-dfn-type="attribute"><code>inputMode</code></dfn> IDL attribute must <a id="input-modalities:-the-inputmode-attribute:reflect" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="input-modalities:-the-inputmode-attribute:attr-inputmode-3"><a href="#attr-inputmode">inputmode</a></code> content attribute, <a id="input-modalities:-the-inputmode-attribute:limited-to-only-known-values" href="common-dom-interfaces.html#limited-to-only-known-values">limited to only known values</a>.</p>

  <p>When <code id="input-modalities:-the-inputmode-attribute:attr-inputmode-4"><a href="#attr-inputmode">inputmode</a></code> is unspecified (or is in a state not supported by the user agent), the user agent should determine the default virtual keyboard to be shown. Contextual information such as the input <code id="input-modalities:-the-inputmode-attribute:attr-input-type"><a href="input.html#attr-input-type">type</a></code> or <code id="input-modalities:-the-inputmode-attribute:attr-input-pattern"><a href="input.html#attr-input-pattern">pattern</a></code> attributes should be used to determine which type of virtual keyboard should be presented to the user.</p>

  

  <h4 id="input-modalities:-the-enterkeyhint-attribute"><span class="secno">6.8.8</span> 入力モダリティ：<code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint"><a href="#attr-enterkeyhint">enterkeyhint</a></code>属性<a href="#input-modalities:-the-enterkeyhint-attribute" class="self-link"></a></h4>

  <p>ユーザーエージェントは、フォームコントロール（<code id="input-modalities:-the-enterkeyhint-attribute:the-textarea-element"><a href="form-elements.html#the-textarea-element">textarea</a></code>要素の値など）で、または<a href="#editing-host" id="input-modalities:-the-enterkeyhint-attribute:editing-host">編集ホスト</a>（<code id="input-modalities:-the-enterkeyhint-attribute:attr-contenteditable"><a href="#attr-contenteditable">contenteditable</a></code>など）における要素で<code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint-2"><a href="#attr-enterkeyhint">enterkeyhint</a></code>属性をサポートすることができる。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/enterkeyhint" title="The enterkeyhint global attribute is an enumerated attribute defining what action label (or icon) to present for the enter key on virtual keyboards.">Global_attributes/enterkeyhint</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>94+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>77+</span></span><hr><span class="opera yes"><span>Opera</span><span>66+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>57+</span></span></div></div></div><p><dfn data-dfn-for="html-global" id="attr-enterkeyhint" data-dfn-type="element-attr"><code>enterkeyhint</code></dfn>コンテンツ属性は、仮想キーボードのEnterキーに表示するアクションラベル（またはアイコン）を指定する<a id="input-modalities:-the-enterkeyhint-attribute:enumerated-attribute" href="common-microsyntaxes.html#enumerated-attribute">列挙属性</a>である。これにより、ユーザーにとってより役立つようにするために、著者はEnterキーの表示をカスタマイズを可能にする。</p>

  <table><thead><tr><th>キーワード<th>説明<tbody><tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-enter" data-dfn-type="attr-value"><code>enter</code></dfn><td>ユーザーエージェントは、典型的には新しい行を挿入する、操作'enter'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-done" data-dfn-type="attr-value"><code>done</code></dfn><td>ユーザーエージェントは、典型的には入力するものがもう何もなく、そして input method editor (IME)は閉じられることを意味する、操作'done'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-go" data-dfn-type="attr-value"><code>go</code></dfn><td>ユーザーエージェントは、典型的にはユーザーがタイプしたテキストのターゲットにユーザーを連れて行くことを意味する、操作'go'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-next" data-dfn-type="attr-value"><code>next</code></dfn><td>ユーザーエージェントは、典型的にはテキストを受け付ける次のフィールドにユーザーを連れて行く、操作'next'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-previous" data-dfn-type="attr-value"><code>previous</code></dfn><td>ユーザーエージェントは、典型的にはテキストを受け入れる前のフィールドにユーザーを連れて行く、操作'previous'の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-search" data-dfn-type="attr-value"><code>search</code></dfn><td>ユーザーエージェントは、典型的にはユーザーがタイプしたテキストの検索の結果にユーザーを連れて行く、操作「検索」の合図を提示すべきである。<tr><td><dfn data-dfn-for="html-global/enterkeyhint" id="attr-enterkeyhint-keyword-send" data-dfn-type="attr-value"><code>send</code></dfn><td>ユーザーエージェントは、典型的にはテキストをそのテキストのターゲットに配信する、操作'send'の合図を提示すべきである。</table>

  

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/enterKeyHint" title="The enterKeyHint property is an enumerated property defining what action label (or icon) to present for the enter key on virtual keyboards. It reflects the enterkeyhint HTML global attribute and is an enumerated property, only accepting the following values as a string:">HTMLElement/enterKeyHint</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>94+</span></span><span class="safari yes"><span>Safari</span><span>13.1+</span></span><span class="chrome yes"><span>Chrome</span><span>77+</span></span><hr><span class="opera unknown"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge unknown"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div><p>The <dfn data-dfn-for="ElementContentEditable" id="dom-enterkeyhint" data-dfn-type="attribute"><code>enterKeyHint</code></dfn> IDL attribute must <a id="input-modalities:-the-enterkeyhint-attribute:reflect" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint-3"><a href="#attr-enterkeyhint">enterkeyhint</a></code> content attribute, <a id="input-modalities:-the-enterkeyhint-attribute:limited-to-only-known-values" href="common-dom-interfaces.html#limited-to-only-known-values">limited to only known values</a>.</p>

  <p>When <code id="input-modalities:-the-enterkeyhint-attribute:attr-enterkeyhint-4"><a href="#attr-enterkeyhint">enterkeyhint</a></code> is unspecified (or is in a state not supported by the user agent), the user agent should determine the default action label (or icon) to present. Contextual information such as the <code id="input-modalities:-the-enterkeyhint-attribute:attr-inputmode"><a href="#attr-inputmode">inputmode</a></code>, <code id="input-modalities:-the-enterkeyhint-attribute:attr-input-type"><a href="input.html#attr-input-type">type</a></code>, or <code id="input-modalities:-the-enterkeyhint-attribute:attr-input-pattern"><a href="input.html#attr-input-pattern">pattern</a></code> attributes should be used to determine which action label (or icon) to present on the virtual keyboard.</p>

  

  <h3 id="find-in-page"><span class="secno">6.9</span> ページ内検索<a href="#find-in-page" class="self-link"></a></h3>

  <h4 id="introduction-10"><span class="secno">6.9.1</span> 導入<a href="#introduction-10" class="self-link"></a></h4>

  <p>このセクションは、<dfn id="find-in-page-2">ページ内検索</dfn>を定義する。これは、ユーザーが特定の情報に対してページのコンテンツを検索できるようにする一般的なユーザーエージェントのメカニズムである。</p>

  <p><a href="#find-in-page-2" id="introduction-10:find-in-page-2">ページ内検索</a>機能へのアクセスは、ページ内検索<dfn id="find-in-page-interface">インターフェイス</dfn>を介して提供される。これはユーザーエージェントが提供するユーザーインターフェイスであり、ユーザーが入力と検索のパラメーターを指定できるようする。このインターフェイスは、ショートカットまたはメニュー選択の結果として表示される。</p>

  <p><a href="#find-in-page-interface" id="introduction-10:find-in-page-interface">ページ内検索インターフェイス</a>のテキスト入力と設定の組み合わせは、ユーザーの<dfn id="fip-query">クエリー</dfn>を表す。これは通常、ユーザーが検索したいテキストと、オプションの設定（例えば、検索を単語に限定する機能など）が含まれる。</p>

  <p>ユーザーエージェントは、与えられた<a href="#fip-query" id="introduction-10:fip-query">クエリー</a>のページコンテンツを処理し、0個以上の<dfn id="fip-matches">マッチ</dfn>を識別する。これはユーザー<a href="#fip-query" id="introduction-10:fip-query-2">クエリー</a>を満たすコンテンツ範囲である。</p>

  <p><a href="#fip-matches" id="introduction-10:fip-matches">マッチ</a>の1つが<dfn id="fip-active-match">アクティブなマッチ</dfn>としてユーザーに識別される。 それはハイライトされ、スクロールして表示される。ユーザーは、<a href="#find-in-page-interface" id="introduction-10:find-in-page-interface-2">ページ内検索インターフェイス</a>を使用して<a href="#fip-active-match" id="introduction-10:fip-active-match">アクティブなマッチ</a>を前進させることにより、<a href="#fip-matches" id="introduction-10:fip-matches-2">マッチ</a>をナビゲートできる。</p>

  <p class="XXX"><a href="https://github.com/whatwg/html/issues/3539">Issue #3539</a>は、<a href="#find-in-page-2" id="introduction-10:find-in-page-2-2">ページ内検索</a>が現在指定されていない<code>window.find()</code> APIの基礎となる方法の標準化を追跡する。</p>

  <h4 id="interaction-with-details-and-hidden=until-found"><span class="secno">6.9.2</span> <code id="interaction-with-details-and-hidden=until-found:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code>と<code id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state"><a href="#attr-hidden-until-found-state">hidden=until-found</a></code>との相互作用 <a href="#interaction-with-details-and-hidden=until-found" class="self-link"></a></h4>

  <p>ページ内検索が一致するものの検索を開始するとき、 <code id="interaction-with-details-and-hidden=until-found:attr-details-open"><a href="interactive-elements.html#attr-details-open">open</a></code>属性が設定されていないページ内のすべての<code id="interaction-with-details-and-hidden=until-found:the-details-element-2"><a href="interactive-elements.html#the-details-element">details</a></code>要素は、ページ内検索が検索できるようにするために、<code id="interaction-with-details-and-hidden=until-found:attr-details-open-2"><a href="interactive-elements.html#attr-details-open">open</a></code>属性を変更せずに、2番目のスロットの<a href="https://triple-underscore.github.io/css-contain-ja.html#skips-its-contents" id="interaction-with-details-and-hidden=until-found:skips-its-contents" data-x-internal="skips-its-contents">スキップされたコンテンツ</a>にアクセスできるようにすべきである。同様に、<a href="#attr-hidden-until-found-state" id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state-2">hidden until found状態</a>の<code id="interaction-with-details-and-hidden=until-found:attr-hidden"><a href="#attr-hidden">hidden</a></code>属性をもつすべてのHTML要素は、ページ内検索で検索できるようにするために、<code id="interaction-with-details-and-hidden=until-found:attr-hidden-2"><a href="#attr-hidden">hidden</a></code>属性を変更せずに<a href="https://triple-underscore.github.io/css-contain-ja.html#skips-its-contents" id="interaction-with-details-and-hidden=until-found:skips-its-contents-2" data-x-internal="skips-its-contents">スキップされたコンテンツ</a>にアクセスできるようにすべきである。ページ内検索が一致の検索を終了した後、<code id="interaction-with-details-and-hidden=until-found:the-details-element-3"><a href="interactive-elements.html#the-details-element">details</a></code>要素と、<a href="#attr-hidden-until-found-state" id="interaction-with-details-and-hidden=until-found:attr-hidden-until-found-state-3">hidden until found状態</a>の<code id="interaction-with-details-and-hidden=until-found:attr-hidden-3"><a href="#attr-hidden">hidden</a></code>属性をもつ要素は、コンテンツが再びスキップされるようにすべきである。このプロセス全体は同期的に行われなければならない（したがって、ユーザーや著者のコードを監視することはできない）。<a href="references.html#refsCSSCONTAIN">[CSSCONTAIN]</a></p>

  <p>When find-in-page chooses a new <a href="#fip-active-match" id="interaction-with-details-and-hidden=until-found:fip-active-match">active match</a>, perform the following steps:</p>

  <ol><li><p>Let <var>node</var> be the first node in the <a href="#fip-active-match" id="interaction-with-details-and-hidden=until-found:fip-active-match-2">active match</a>.<li><p><a id="interaction-with-details-and-hidden=until-found:queue-a-global-task" href="webappapis.html#queue-a-global-task">Queue a global task</a> on the <a id="interaction-with-details-and-hidden=until-found:user-interaction-task-source" href="webappapis.html#user-interaction-task-source">user interaction task source</a> given <var>node</var>'s <a id="interaction-with-details-and-hidden=until-found:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a> to run the following steps:</p>

    <ol><li><p>Run the <a id="interaction-with-details-and-hidden=until-found:ancestor-details-revealing-algorithm" href="interactive-elements.html#ancestor-details-revealing-algorithm">ancestor details revealing algorithm</a> on <var>node</var>.<li><p>Run the <a href="#ancestor-hidden-until-found-revealing-algorithm" id="interaction-with-details-and-hidden=until-found:ancestor-hidden-until-found-revealing-algorithm">ancestor hidden-until-found revealing algorithm</a> on <var>node</var>.</ol>
   </ol>

  <p class="warning"><a id="interaction-with-details-and-hidden=until-found:tracking-vector" title="There is a tracking vector here." href="https://triple-underscore.github.io/infra-ja.html#tracking-vector" class="tracking-vector" data-x-internal="tracking-vector"><img width="46" alt="(This is a tracking vector.)" crossorigin="" src="https://resources.whatwg.org/tracking-vector.svg" height="64"></a> When find-in-page auto-expands a <code id="interaction-with-details-and-hidden=until-found:the-details-element-4"><a href="interactive-elements.html#the-details-element">details</a></code> element like this, it will fire a <code id="interaction-with-details-and-hidden=until-found:event-toggle"><a href="indices.html#event-toggle">toggle</a></code> event. As with the separate <code id="interaction-with-details-and-hidden=until-found:event-scroll"><a data-x-internal="event-scroll" href="https://triple-underscore.github.io/cssom-view-ja.html#eventdef-document-scroll">scroll</a></code> event that find-in-page fires, this event could be used by the page to discover what the user is typing into the find-in-page dialog. If the page creates a tiny scrollable area with the current search term and every possible next character the user could type separated by a gap, and observes which one the browser scrolls to, it can add that character to the search term and update the scrollable area to incrementally build the search term. By wrapping each possible next match in a closed <code id="interaction-with-details-and-hidden=until-found:the-details-element-5"><a href="interactive-elements.html#the-details-element">details</a></code> element, the page could listen to <code id="interaction-with-details-and-hidden=until-found:event-toggle-2"><a href="indices.html#event-toggle">toggle</a></code> events instead of <code id="interaction-with-details-and-hidden=until-found:event-scroll-2"><a data-x-internal="event-scroll" href="https://triple-underscore.github.io/cssom-view-ja.html#eventdef-document-scroll">scroll</a></code> events. This attack could be addressed for both events by not acting on every character the user types into the find-in-page dialog.</p>

  <h4 id="interaction-with-selection"><span class="secno">6.9.3</span> 選択との相互作用<a href="#interaction-with-selection" class="self-link"></a></h4>

  <p>ページ内検索プロセスは、文書のコンテキストで呼び出され、その文書の<a href="https://triple-underscore.github.io/selection-api-ja.html#dfn-selection" id="interaction-with-selection:document-selection" data-x-internal="document-selection">選択</a>に影響を与えることがある。 具体的には、<a href="#fip-active-match" id="interaction-with-selection:fip-active-match">アクティブなマッチ</a>を定義する範囲が、現在の選択を決定することがある。しかし、この選択の更新は、ページ内検索プロセスのさまざまな時点で発生することがある（たとえば、<a href="#find-in-page-interface" id="interaction-with-selection:find-in-page-interface">ページ内検索インターフェイス</a>の終了時、または<a href="#fip-active-match" id="interaction-with-selection:fip-active-match-2">アクティブなマッチ</a>の範囲の変更時）。<nav><a href="microdata.html">← 5 Microdata</a> — <a href="./">目次</a> — <a href="dnd.html">6.10 ドラッグアンドドロップ →</a></nav>
