<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/spec.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  
  <script async="" crossorigin="" src="./html-dfn.js"></script>
  <script data-file-issue-url="https://github.com/momdo/momdo.github.io/issues/new" async="" crossorigin="" src="https://resources.whatwg.org/file-issue.js"></script>
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1 class="allcaps">HTML</h1><h2 id="living-standard" class="no-num no-toc">Living Standard — Last Updated <span class="pubdate">15 August 2022</span></h2></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="webappapis.html">← 8 ウェブアプリケーションAPI</a> – <a href="./">目次</a> – <a href="timers-and-user-prompts.html">8.6 タイマー →</a></nav><ol class="toc"><li id="toc-webappapis"><ol><li><a href="dynamic-markup-insertion.html#dynamic-markup-insertion"><span class="secno">8.4</span> 動的マークアップの挿入</a><ol><li><a href="dynamic-markup-insertion.html#opening-the-input-stream"><span class="secno">8.4.1</span> 入力ストリームを開く</a><li><a href="dynamic-markup-insertion.html#closing-the-input-stream"><span class="secno">8.4.2</span> 入力ストリームを閉じる</a><li><a href="dynamic-markup-insertion.html#document.write()"><span class="secno">8.4.3</span> <code>document.write()</code></a><li><a href="dynamic-markup-insertion.html#document.writeln()"><span class="secno">8.4.4</span> <code>document.writeln()</code></a></ol><li><a href="dynamic-markup-insertion.html#dom-parsing-and-serialization"><span class="secno">8.5</span> DOM解析</a></ol></ol><h3 id="dynamic-markup-insertion"><span class="secno">8.4</span> <dfn>動的マークアップの挿入</dfn><a href="#dynamic-markup-insertion" class="self-link"></a></h3>

  <p class="note">マークアップを文書に動的に挿入するためのAPIはパーサーと相互作用するため、その動作は、<a id="dynamic-markup-insertion:html-documents" href="https://triple-underscore.github.io/DOM4-ja.html#html-document" data-x-internal="html-documents">HTML文書</a>（および<a id="dynamic-markup-insertion:html-parser" href="parsing.html#html-parser">HTMLパーサー</a>）か<a id="dynamic-markup-insertion:xml-documents" href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" data-x-internal="xml-documents">XML文書</a>（および<a id="dynamic-markup-insertion:xml-parser" href="xhtml.html#xml-parser">XMLパーサー</a>）かのどちらで使用されるかによって異なる。</p>

  

  <p><code id="dynamic-markup-insertion:document"><a href="dom.html#document">Document</a></code> objects have a <dfn id="throw-on-dynamic-markup-insertion-counter">throw-on-dynamic-markup-insertion counter</dfn>, which is used in conjunction with the <a id="dynamic-markup-insertion:create-an-element-for-the-token" href="parsing.html#create-an-element-for-the-token">create an element for the token</a> algorithm to prevent <a href="custom-elements.html#custom-element-constructor" id="dynamic-markup-insertion:custom-element-constructor">custom element constructors</a> from being able to use <code id="dynamic-markup-insertion:dom-document-open"><a href="#dom-document-open">document.open()</a></code>, <code id="dynamic-markup-insertion:dom-document-close"><a href="#dom-document-close">document.close()</a></code>, and <code id="dynamic-markup-insertion:dom-document-write"><a href="#dom-document-write">document.write()</a></code> when they are invoked by the parser. Initially, the counter must be set to zero.</p>

  



  <h4 id="opening-the-input-stream"><span class="secno">8.4.1</span> 入力ストリームを開く<a href="#opening-the-input-stream" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var> = <var>document</var>.<a href="#dom-document-open" id="dom-document-open-dev">open</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/open" title="The Document.open() method opens a document for writing.">Document/open</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>11+</span></span><span class="chrome yes"><span>Chrome</span><span>64+</span></span><hr><span class="opera yes"><span>Opera</span><span>51+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>47+</span></span></div></div></div><dd><p>前のオブジェクトを再利用する場合を除き、あたかもそれが新しい<code id="opening-the-input-stream:document-2"><a href="dom.html#document">Document</a></code>オブジェクトであるかのように、<code id="opening-the-input-stream:document"><a href="dom.html#document">Document</a></code>に正しい場所で置換され、その後返される。</p>

    <p>結果として得られる<code id="opening-the-input-stream:document-3"><a href="dom.html#document">Document</a></code>はHTMLパーサーが関連付けられており、 <code id="opening-the-input-stream:dom-document-write"><a href="#dom-document-write">document.write()</a></code>を使用して解析するデータを与えることができる。</p>

    <p><code id="opening-the-input-stream:document-4"><a href="dom.html#document">Document</a></code>がまだ解析されている場合、メソッドは効果がない。</p>

    <p><code id="opening-the-input-stream:document-5"><a href="dom.html#document">Document</a></code>が<a href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" id="opening-the-input-stream:xml-documents" data-x-internal="xml-documents">XML文書</a>である場合、<a id="opening-the-input-stream:invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="opening-the-input-stream:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>

    <p>パーサーが<a id="opening-the-input-stream:custom-element-constructor" href="custom-elements.html#custom-element-constructor">カスタム要素コンストラクター</a>を現在実行している場合、<a id="opening-the-input-stream:invalidstateerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="opening-the-input-stream:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   <dt><code><var>window</var> = <var>document</var>.<a href="#dom-document-open-window" id="opening-the-input-stream:dom-document-open-window">open</a>(<var>url</var>, <var>name</var>, <var>features</var>)</code><dd><p><code id="opening-the-input-stream:dom-open"><a href="window-object.html#dom-open">window.open()</a></code>メソッドのように動作する。</dl>

  

  <p><code id="opening-the-input-stream:document-6"><a href="dom.html#document">Document</a></code> objects have an <dfn id="active-parser-was-aborted">active parser was aborted</dfn> boolean, which is used to prevent scripts from invoking the <code id="opening-the-input-stream:dom-document-open"><a href="#dom-document-open">document.open()</a></code> and <code id="opening-the-input-stream:dom-document-write-2"><a href="#dom-document-write">document.write()</a></code> methods (directly or indirectly) after the document's <a id="opening-the-input-stream:active-parser" href="dom.html#active-parser">active parser</a> has been aborted. 最初はfalseである。</p>

  <p>The <dfn id="document-open-steps">document open steps</dfn>, given a <var>document</var>, are as follows:</p>

  <ol><li><p>If <var>document</var> is an <a href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" id="opening-the-input-stream:xml-documents-2" data-x-internal="xml-documents">XML document</a>, then throw an <a id="opening-the-input-stream:invalidstateerror-3" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="opening-the-input-stream:domexception-3"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> exception.<li><p>If <var>document</var>'s <a href="#throw-on-dynamic-markup-insertion-counter" id="opening-the-input-stream:throw-on-dynamic-markup-insertion-counter">throw-on-dynamic-markup-insertion counter</a> is greater than 0, then throw an <a id="opening-the-input-stream:invalidstateerror-4" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="opening-the-input-stream:domexception-4"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>Let <var>entryDocument</var> be the <a id="opening-the-input-stream:entry-global-object" href="webappapis.html#entry-global-object">entry global object</a>'s <a href="window-object.html#concept-document-window" id="opening-the-input-stream:concept-document-window">associated <code>Document</code></a>.<li><p>If <var>document</var>'s <a href="https://dom.spec.whatwg.org/#concept-document-origin" id="opening-the-input-stream:concept-document-origin" data-x-internal="concept-document-origin">origin</a> is not <a id="opening-the-input-stream:same-origin" href="origin.html#same-origin">same origin</a> to <var>entryDocument</var>'s <a href="https://dom.spec.whatwg.org/#concept-document-origin" id="opening-the-input-stream:concept-document-origin-2" data-x-internal="concept-document-origin">origin</a>, then throw a <a id="opening-the-input-stream:securityerror" href="https://triple-underscore.github.io/WebIDL-ja.html#securityerror" data-x-internal="securityerror">"<code>SecurityError</code>"</a> <code id="opening-the-input-stream:domexception-5"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If <var>document</var> has an <a id="opening-the-input-stream:active-parser-2" href="dom.html#active-parser">active parser</a> whose <a id="opening-the-input-stream:script-nesting-level" href="parsing.html#script-nesting-level">script nesting level</a> is greater than 0, then return <var>document</var>.</p>

    <p class="note">This basically causes <code id="opening-the-input-stream:dom-document-open-2"><a href="#dom-document-open">document.open()</a></code> to be ignored when it's called in an inline script found during parsing, while still letting it have an effect when called from a non-parser task such as a timer callback or event handler.</p>
   <li><p>Similarly, if <var>document</var>'s <a id="opening-the-input-stream:unload-counter" href="browsing-the-web.html#unload-counter">unload counter</a> is greater than 0, then return <var>document</var>.</p>

    <p class="note">This basically causes <code id="opening-the-input-stream:dom-document-open-3"><a href="#dom-document-open">document.open()</a></code> to be ignored when it's called from a <code id="opening-the-input-stream:event-beforeunload"><a href="indices.html#event-beforeunload">beforeunload</a></code>, <code id="opening-the-input-stream:event-pagehide"><a href="indices.html#event-pagehide">pagehide</a></code>, or <code id="opening-the-input-stream:event-unload"><a href="indices.html#event-unload">unload</a></code> event handler while the <code id="opening-the-input-stream:document-7"><a href="dom.html#document">Document</a></code> is being unloaded.</p>
   <li><p>If <var>document</var>'s <a href="#active-parser-was-aborted" id="opening-the-input-stream:active-parser-was-aborted">active parser was aborted</a> is true, then return <var>document</var>.</p>

    <p class="note">This notably causes <code id="opening-the-input-stream:dom-document-open-4"><a href="#dom-document-open">document.open()</a></code> to be ignored if it is called after a <a href="browsing-the-web.html#navigate" id="opening-the-input-stream:navigate">navigation</a> has started, but only during the initial parse. See <a href="https://github.com/whatwg/html/issues/4723">issue #4723</a> for more background.</p>
   <li><p>If <var>document</var>'s <a href="browsers.html#concept-document-bc" id="opening-the-input-stream:concept-document-bc">browsing context</a> is non-null and there is an existing attempt to <a id="opening-the-input-stream:navigate-2" href="browsing-the-web.html#navigate">navigate</a> <var>document</var>'s <a href="browsers.html#concept-document-bc" id="opening-the-input-stream:concept-document-bc-2">browsing context</a>, then <a id="opening-the-input-stream:stop-document-loading" href="browsing-the-web.html#stop-document-loading">stop document loading</a> given <var>document</var>.</p>

    <p class="XXX"><a href="https://github.com/whatwg/html/issues/3447">Issue #3447</a> looks into the distinction between an ongoing instance of the <a id="opening-the-input-stream:navigate-3" href="browsing-the-web.html#navigate">navigate</a> algorithm versus tasks to <a id="opening-the-input-stream:navigate-4" href="browsing-the-web.html#navigate">navigate</a> that are still queued. For the purpose of implementing this step, both an ongoing instance of the <a id="opening-the-input-stream:navigate-5" href="browsing-the-web.html#navigate">navigate</a> algorithm and tasks queued to <a id="opening-the-input-stream:navigate-6" href="browsing-the-web.html#navigate">navigate</a> should be counted towards "an existing attempt to <a id="opening-the-input-stream:navigate-7" href="browsing-the-web.html#navigate">navigate</a>," at least until that issue is resolved.</p>
   <li><p>For each <a id="opening-the-input-stream:shadow-including-inclusive-descendant" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-including-inclusive-descendant" data-x-internal="shadow-including-inclusive-descendant">shadow-including inclusive descendant</a> <var>node</var> of <var>document</var>, <a id="opening-the-input-stream:erase-all-event-listeners-and-handlers" href="webappapis.html#erase-all-event-listeners-and-handlers">erase all event listeners and handlers</a> given <var>node</var>.<li><p>If <var>document</var> is the <a href="window-object.html#concept-document-window" id="opening-the-input-stream:concept-document-window-2">associated <code>Document</code></a> of <var>document</var>'s <a id="opening-the-input-stream:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a>, then <a id="opening-the-input-stream:erase-all-event-listeners-and-handlers-2" href="webappapis.html#erase-all-event-listeners-and-handlers">erase all event listeners and handlers</a> given <var>document</var>'s <a id="opening-the-input-stream:concept-relevant-global-2" href="webappapis.html#concept-relevant-global">relevant global object</a>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-replace" id="opening-the-input-stream:concept-node-replace-all" data-x-internal="concept-node-replace-all">Replace all</a> with null within <var>document</var>, without firing any mutation events.<li><p>If <var>document</var> is <a id="opening-the-input-stream:fully-active" href="browsers.html#fully-active">fully active</a>, then:</p>

    <ol><li><p>Let <var>newURL</var> be a copy of <var>entryDocument</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="opening-the-input-stream:the-document's-address" data-x-internal="the-document's-address">URL</a>.<li><p>If <var>entryDocument</var> is not <var>document</var>, then set <var>newURL</var>'s <a href="https://triple-underscore.github.io/URL-ja.html#concept-url-fragment" id="opening-the-input-stream:concept-url-fragment" data-x-internal="concept-url-fragment">fragment</a> to null.<li><p>Run the <a id="opening-the-input-stream:url-and-history-update-steps" href="history.html#url-and-history-update-steps">URL and history update steps</a> with <var>document</var> and <var>newURL</var>.</ol>
   <li><p>Set <var>document</var>'s <a id="opening-the-input-stream:is-initial-about:blank" href="dom.html#is-initial-about:blank">is initial <code>about:blank</code></a> to false.<li><p>If <var>document</var>'s <a id="opening-the-input-stream:iframe-load-in-progress" href="iframe-embed-object.html#iframe-load-in-progress">iframe load in progress</a> flag is set, then set <var>document</var>'s <a id="opening-the-input-stream:mute-iframe-load" href="iframe-embed-object.html#mute-iframe-load">mute iframe load</a> flag.<li><p>Set <var>document</var> to <a id="opening-the-input-stream:no-quirks-mode" href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-no-quirks" data-x-internal="no-quirks-mode">no-quirks mode</a>.<li><p>Create a new <a id="opening-the-input-stream:html-parser" href="parsing.html#html-parser">HTML parser</a> and associate it with <var>document</var>. This is a <dfn id="script-created-parser">script-created parser</dfn> (meaning that it can be closed by the <code id="opening-the-input-stream:dom-document-open-5"><a href="#dom-document-open">document.open()</a></code> and <code id="opening-the-input-stream:dom-document-close"><a href="#dom-document-close">document.close()</a></code> methods, and that the tokenizer will wait for an explicit call to <code id="opening-the-input-stream:dom-document-close-2"><a href="#dom-document-close">document.close()</a></code> before emitting an end-of-file token). The encoding <a href="parsing.html#concept-encoding-confidence" id="opening-the-input-stream:concept-encoding-confidence">confidence</a> is <i>irrelevant</i>.<li><p>Set the <a id="opening-the-input-stream:insertion-point" href="parsing.html#insertion-point">insertion point</a> to point at just before the end of the <a id="opening-the-input-stream:input-stream" href="parsing.html#input-stream">input stream</a> (which at this point will be empty).<li><p><a id="opening-the-input-stream:update-the-current-document-readiness" href="dom.html#update-the-current-document-readiness">Update the current document readiness</a> of <var>document</var> to "<code>loading</code>".</p>

    <p class="note">This causes a <code id="opening-the-input-stream:event-readystatechange"><a href="indices.html#event-readystatechange">readystatechange</a></code> event to fire, but the event is actually unobservable to author code, because of the previous step which <a href="webappapis.html#erase-all-event-listeners-and-handlers" id="opening-the-input-stream:erase-all-event-listeners-and-handlers-3">erased all event listeners and handlers</a> that could observe it.</p>
   <li><p><var>document</var>を返す。</ol>

  <p class="note">The <a href="#document-open-steps" id="opening-the-input-stream:document-open-steps">document open steps</a> do not affect whether a <code id="opening-the-input-stream:document-8"><a href="dom.html#document">Document</a></code> is <a id="opening-the-input-stream:ready-for-post-load-tasks" href="parsing.html#ready-for-post-load-tasks">ready for post-load tasks</a> or <a id="opening-the-input-stream:completely-loaded" href="browsing-the-web.html#completely-loaded">completely loaded</a>.</p>

  <p>The <dfn data-dfn-for="Document" id="dom-document-open" data-dfn-type="method"><code>open(<var>unused1</var>, <var>unused2</var>)</code></dfn> method must return the result of running the <a href="#document-open-steps" id="opening-the-input-stream:document-open-steps-2">document open steps</a> with <a id="opening-the-input-stream:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>.</p>

  <p id="dom-document-open-unused-arguments" class="note">The <var>unused1</var> and <var>unused2</var> arguments are ignored, but kept in the IDL to allow code that calls the function with one or two arguments to continue working. They are necessary due to Web IDL <a id="opening-the-input-stream:overload-resolution-algorithm" href="https://triple-underscore.github.io/WebIDL-JS-ja.html#dfn-overload-resolution-algorithm" data-x-internal="overload-resolution-algorithm">overload resolution algorithm</a> rules, which would throw a <code id="opening-the-input-stream:typeerror"><a data-x-internal="typeerror" href="https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code> exception for such calls had the arguments not been there. <a href="https://github.com/whatwg/webidl/issues/581">whatwg/webidl issue #581</a> investigates changing the algorithm to allow for their removal. <a href="references.html#refsWEBIDL">[WEBIDL]</a></p>

  <p>The <dfn data-dfn-for="Document" id="dom-document-open-window" data-dfn-type="method"><code>open(<var>url</var>, <var>name</var>, <var>features</var>)</code></dfn> method must run these steps:</p>

  <ol><li><p>If <a id="opening-the-input-stream:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a> is not an <a id="opening-the-input-stream:active-document" href="browsers.html#active-document">active document</a>, then throw an <a id="opening-the-input-stream:invalidaccesserror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidaccesserror" data-x-internal="invalidaccesserror">"<code>InvalidAccessError</code>"</a> <code id="opening-the-input-stream:domexception-6"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code> exception.<li><p>Return the result of running the <a id="opening-the-input-stream:window-open-steps" href="window-object.html#window-open-steps">window open steps</a> with <var>url</var>, <var>name</var>, and <var>features</var>.</ol>

  



  <h4 id="closing-the-input-stream"><span class="secno">8.4.2</span> 入力ストリームを閉じる<a href="#closing-the-input-stream" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var>.<a href="#dom-document-close" id="dom-document-close-dev">close</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/close" title="The Document.close() method finishes writing to a document, opened with Document.open().">Document/close</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>11+</span></span><span class="chrome yes"><span>Chrome</span><span>64+</span></span><hr><span class="opera yes"><span>Opera</span><span>51+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>47+</span></span></div></div></div><dd><p><code id="closing-the-input-stream:dom-document-open"><a href="#dom-document-open">document.open()</a></code>メソッドによって開かれた入力ストリームを閉じる。</p>

    <p><code id="closing-the-input-stream:document"><a href="dom.html#document">Document</a></code>が<a href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" id="closing-the-input-stream:xml-documents" data-x-internal="xml-documents">XML文書</a>である場合、<a id="closing-the-input-stream:invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="closing-the-input-stream:domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>

    <p>パーサーが<a id="closing-the-input-stream:custom-element-constructor" href="custom-elements.html#custom-element-constructor">カスタム要素コンストラクター</a>を現在実行している場合、<a id="closing-the-input-stream:invalidstateerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="closing-the-input-stream:domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   </dl>

  

  <p>The <dfn data-dfn-for="Document" id="dom-document-close" data-dfn-type="method"><code>close()</code></dfn> method must run the following steps:</p>

  <ol><li><p>If <a id="closing-the-input-stream:this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a> is an <a href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" id="closing-the-input-stream:xml-documents-2" data-x-internal="xml-documents">XML document</a>, then throw an <a id="closing-the-input-stream:invalidstateerror-3" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="closing-the-input-stream:domexception-3"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If <a id="closing-the-input-stream:this-2" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a href="#throw-on-dynamic-markup-insertion-counter" id="closing-the-input-stream:throw-on-dynamic-markup-insertion-counter">throw-on-dynamic-markup-insertion counter</a> is greater than zero, then throw an <a id="closing-the-input-stream:invalidstateerror-4" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="closing-the-input-stream:domexception-4"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If there is no <a href="#script-created-parser" id="closing-the-input-stream:script-created-parser">script-created parser</a> associated with <a id="closing-the-input-stream:this-3" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>, then return.<li><p>Insert an <a id="closing-the-input-stream:explicit-eof-character" href="parsing.html#explicit-eof-character">explicit "EOF" character</a> at the end of the parser's <a id="closing-the-input-stream:input-stream" href="parsing.html#input-stream">input stream</a>.<li><p>If <a id="closing-the-input-stream:this-4" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a>'s <a id="closing-the-input-stream:pending-parsing-blocking-script" href="scripting.html#pending-parsing-blocking-script">pending parsing-blocking script</a> is not null, then return.<li><p>Run the tokenizer, processing resulting tokens as they are emitted, and stopping when the tokenizer reaches the <a id="closing-the-input-stream:explicit-eof-character-2" href="parsing.html#explicit-eof-character">explicit "EOF" character</a> or <a href="webappapis.html#spin-the-event-loop" id="closing-the-input-stream:spin-the-event-loop">spins the event loop</a>.</ol>

  



  <h4 id="document.write()"><span class="secno">8.4.3</span> <code id="document.write():dom-document-write"><a href="#dom-document-write">document.write()</a></code><a href="#document.write()" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var>.<a href="#dom-document-write" id="dom-document-write-dev">write</a>(...<var>text</var>)</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/write" title="The document.write() method writes a string of text to a document stream opened by document.open().">Document/write</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>3+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>一般に、与えられた文字列を<code id="document.write():document"><a href="dom.html#document">Document</a></code>の入力ストリームに加える。</p>

    <p class="warning">このメソッドは非常に特異な振る舞いを持つ。一部の場合において、このメソッドは、パーサーが実行されている間、<a id="document.write():html-parser" href="parsing.html#html-parser">HTMLパーサー</a>の状態に影響を与えることができる。その結果、文書のソースに対応しないDOMをもたらす（たとえば、記述された文字列が、文字列"<code>&lt;plaintext></code>"または"<code>&lt;!--</code>"である場合）。他の例では、あたかも<code id="document.write():dom-document-open"><a href="#dom-document-open">document.open()</a></code>が呼び出されていたかのように、呼び出しが最初に現在のページをクリアできる。さらに多くの例では、メソッドは単に無視されるか、または例外を投げる。ユーザーエージェントは、<a href="parsing.html#document-written-scripts-intervention">このメソッドを介して挿入された<code>script</code>要素の実行を回避することを明示的に許可される</a>。さらに悪いことに、このメソッドの正確な動作は、場合によってはネットワーク遅延に依存する可能性があり、これはデバッグが非常に困難な障害につながる可能性がある。<strong>これらすべての理由から、このメソッドの使用は強く勧めない。</strong></p>

    <p><a id="document.write():xml-documents" href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" data-x-internal="xml-documents">XML文書</a>で呼び出されるとき、<a id="document.write():invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.write():domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>

    <p>パーサーが<a id="document.write():custom-element-constructor" href="custom-elements.html#custom-element-constructor">カスタム要素コンストラクター</a>を現在実行している場合、<a id="document.write():invalidstateerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.write():domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   </dl>

  

  <p><code id="document.write():document-2"><a href="dom.html#document">Document</a></code> objects have an <dfn id="ignore-destructive-writes-counter">ignore-destructive-writes counter</dfn>, which is used in conjunction with the processing of <code id="document.write():the-script-element"><a href="scripting.html#the-script-element">script</a></code> elements to prevent external scripts from being able to use <code id="document.write():dom-document-write-2"><a href="#dom-document-write">document.write()</a></code> to blow away the document by implicitly calling <code id="document.write():dom-document-open-2"><a href="#dom-document-open">document.open()</a></code>. Initially, the counter must be set to zero.</p>

  <p>The <dfn id="document-write-steps">document write steps</dfn>, given a <code id="document.write():document-3"><a href="dom.html#document">Document</a></code> object <var>document</var> and a string <var>input</var>, are as follows:</p>

  <ol><li><p>If <var>document</var> is an <a href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" id="document.write():xml-documents-2" data-x-internal="xml-documents">XML document</a>, then throw an <a id="document.write():invalidstateerror-3" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.write():domexception-3"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If <var>document</var>'s <a href="#throw-on-dynamic-markup-insertion-counter" id="document.write():throw-on-dynamic-markup-insertion-counter">throw-on-dynamic-markup-insertion counter</a> is greater than 0, then throw an <a id="document.write():invalidstateerror-4" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.write():domexception-4"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>.<li><p>If <var>document</var>'s <a href="#active-parser-was-aborted" id="document.write():active-parser-was-aborted">active parser was aborted</a> is true, then return.<li><p>If the <a id="document.write():insertion-point" href="parsing.html#insertion-point">insertion point</a> is undefined, then:<ol><li><p>If <var>document</var>'s <a id="document.write():unload-counter" href="browsing-the-web.html#unload-counter">unload counter</a> is greater than 0 or <var>document</var>'s <a href="#ignore-destructive-writes-counter" id="document.write():ignore-destructive-writes-counter">ignore-destructive-writes counter</a> is greater than 0, then return.<li><p>Run the <a href="#document-open-steps" id="document.write():document-open-steps">document open steps</a> with <var>document</var>.</ol>
   <li><p>Insert <var>input</var> into the <a id="document.write():input-stream" href="parsing.html#input-stream">input stream</a> just before the <a id="document.write():insertion-point-2" href="parsing.html#insertion-point">insertion point</a>.<li><p>If <var>document</var>'s <a id="document.write():pending-parsing-blocking-script" href="scripting.html#pending-parsing-blocking-script">pending parsing-blocking script</a> is null, then have the <a id="document.write():html-parser-2" href="parsing.html#html-parser">HTML parser</a> process <var>input</var>, one code point at a time, processing resulting tokens as they are emitted, and stopping when the tokenizer reaches the insertion point or when the processing of the tokenizer is aborted by the tree construction stage (this can happen if a <code id="document.write():the-script-element-2"><a href="scripting.html#the-script-element">script</a></code> end tag token is emitted by the tokenizer).<p class="note">If the <code id="document.write():dom-document-write-3"><a href="#dom-document-write">document.write()</a></code> method was called from script executing inline (i.e. executing because the parser parsed a set of <code id="document.write():the-script-element-3"><a href="scripting.html#the-script-element">script</a></code> tags), then this is a <a href="parsing.html#nestedParsing">reentrant invocation of the parser</a>. If the <a id="document.write():parser-pause-flag" href="parsing.html#parser-pause-flag">parser pause flag</a> is set, the tokenizer will abort immediately and no HTML will be parsed, per the tokenizer's <a href="parsing.html#check-parser-pause-flag">parser pause flag check</a>.</p>
   </ol>

  <p>The <dfn data-dfn-for="Document" id="dom-document-write" data-dfn-type="method"><code>document.write(...)</code></dfn> method steps are to run the <a href="#document-write-steps" id="document.write():document-write-steps">document write steps</a> with <a id="document.write():this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a> and a string that is the concatenation of all arguments passed.</p>

  


  <h4 id="document.writeln()"><span class="secno">8.4.4</span> <code id="document.writeln():dom-document-writeln"><a href="#dom-document-writeln">document.writeln()</a></code><a href="#document.writeln()" class="self-link"></a></h4>

  <dl class="domintro"><dt><code><var>document</var>.<a href="#dom-document-writeln" id="dom-document-writeln-dev">writeln</a>(...<var>text</var>)</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/writeln" title="Writes a string of text followed by a newline character to a document.">Document/writeln</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>11+</span></span><span class="chrome yes"><span>Chrome</span><span>64+</span></span><hr><span class="opera yes"><span>Opera</span><span>51+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>4+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>47+</span></span></div></div></div><dd><p>改行文字の後に、与えられた文字列を<code id="document.writeln():document"><a href="dom.html#document">Document</a></code>の入力ストリームに加える。必要ならば、<code id="document.writeln():dom-document-open"><a href="#dom-document-open">open()</a></code>メソッドを暗黙のうちに最初に呼び出す。</p>

    <p><a id="document.writeln():xml-documents" href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" data-x-internal="xml-documents">XML文書</a>で呼び出されるとき、<a id="document.writeln():invalidstateerror" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.writeln():domexception"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>

    <p>パーサーが<a id="document.writeln():custom-element-constructor" href="custom-elements.html#custom-element-constructor">カスタム要素コンストラクター</a>を現在実行している場合、<a id="document.writeln():invalidstateerror-2" href="https://triple-underscore.github.io/WebIDL-ja.html#invalidstateerror" data-x-internal="invalidstateerror">"<code>InvalidStateError</code>"</a> <code id="document.writeln():domexception-2"><a data-x-internal="domexception" href="https://triple-underscore.github.io/WebIDL-ja.html#dfn-DOMException">DOMException</a></code>を投げる。</p>
   </dl>

  

  <p>The <dfn data-dfn-for="Document" id="dom-document-writeln" data-dfn-type="method"><code>document.writeln(...)</code></dfn> method steps are to run the <a href="#document-write-steps" id="document.writeln():document-write-steps">document write steps</a> with <a id="document.writeln():this" href="https://triple-underscore.github.io/WebIDL-ja.html#this" data-x-internal="this">this</a> and a string that is the concatenation of all arguments passed and U+000A LINE FEED.</p>

  


  
  <h3 id="dom-parsing-and-serialization"><span class="secno">8.5</span> DOM解析<a href="#dom-parsing-and-serialization" class="self-link"></a></h3><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser" title="The DOMParser interface provides the ability to parse XML or HTML source code from a string into a DOM Document.">DOMParser</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1.3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div>

  <p>The <code id="dom-parsing-and-serialization:domparser"><a href="#domparser">DOMParser</a></code> interface allows authors to create new <code id="dom-parsing-and-serialization:document"><a href="dom.html#document">Document</a></code> objects by parsing strings, as either HTML or XML.</p>

  <dl class="domintro"><dt><code><var>parser</var> = new <a href="#dom-domparser-constructor" id="dom-domparser-constructor-dev">DOMParser</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/DOMParser" title="The DOMParser() constructor creates a new DOMParser object. This object can be used to parse the text of a document using the parseFromString() method.">DOMParser/DOMParser</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1.3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>Constructs a new <code id="dom-parsing-and-serialization:domparser-2"><a href="#domparser">DOMParser</a></code> object.<dt><code><var>document</var> = <var>parser</var>.<a href="#dom-domparser-parsefromstring" id="dom-domparser-parsefromstring-dev">parseFromString</a>(<var>string</var>, <var>type</var>)</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString" title="The parseFromString() method of the DOMParser interface parses a string containing either HTML or XML, returning an HTMLDocument or an XMLDocument.">DOMParser/parseFromString</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>1.3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>8+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>9+</span></span><hr><span class="firefox_android unknown"><span>Firefox Android</span><span>?</span></span><span class="safari_ios unknown"><span>Safari iOS</span><span>?</span></span><span class="chrome_android unknown"><span>Chrome Android</span><span>?</span></span><span class="webview_android unknown"><span>WebView Android</span><span>?</span></span><span class="samsunginternet_android unknown"><span>Samsung Internet</span><span>?</span></span><span class="opera_android yes"><span>Opera Android</span><span>10.1+</span></span></div></div></div><dd><p>Parses <var>string</var> using either the HTML or XML parser, according to <var>type</var>, and returns the resulting <code id="dom-parsing-and-serialization:document-2"><a href="dom.html#document">Document</a></code>. <var>type</var> can be "<code id="dom-parsing-and-serialization:text/html"><a href="iana.html#text/html">text/html</a></code>" (which will invoke the HTML parser), or any of "<code id="dom-parsing-and-serialization:text/xml"><a href="indices.html#text/xml">text/xml</a></code>", "<code id="dom-parsing-and-serialization:application/xml"><a href="indices.html#application/xml">application/xml</a></code>", "<code id="dom-parsing-and-serialization:application/xhtml+xml"><a href="iana.html#application/xhtml+xml">application/xhtml+xml</a></code>", or "<code id="dom-parsing-and-serialization:image/svg+xml"><a href="indices.html#image/svg+xml">image/svg+xml</a></code>" (which will invoke the XML parser).</p>

    <p>For the XML parser, if <var>string</var> cannot be parsed, then the returned <code id="dom-parsing-and-serialization:document-3"><a href="dom.html#document">Document</a></code> will contain elements describing the resulting error.</p>

    <p><code id="dom-parsing-and-serialization:the-script-element"><a href="scripting.html#the-script-element">script</a></code> 要素は解析中に評価されず、結果の文書の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-encoding" id="dom-parsing-and-serialization:document's-character-encoding" data-x-internal="document's-character-encoding">エンコーディング</a>は常に<a id="dom-parsing-and-serialization:utf-8" href="https://triple-underscore.github.io/Encoding-ja.html#utf-8" data-x-internal="utf-8">UTF-8</a>となることに注意する。</p>

    <p><var>type</var>に上記以外の値を指定すると、<code id="dom-parsing-and-serialization:typeerror"><a data-x-internal="typeerror" href="https://tc39.es/ecma262/#sec-native-error-types-used-in-this-standard-typeerror">TypeError</a></code>例外が投げられる。</p>
   </dl>

  <p class="note">The design of <code id="dom-parsing-and-serialization:domparser-3"><a href="#domparser">DOMParser</a></code>, as a class that needs to be constructed and then have its <code id="dom-parsing-and-serialization:dom-domparser-parsefromstring"><a href="#dom-domparser-parsefromstring">parseFromString()</a></code> method called, is an unfortunate historical artifact. もし今日にこの機能を設計していたとしたら、それはスタンドアロン機能になっただろう。</p>

  <pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='domparser' data-dfn-type='interface'><c- g>DOMParser</c-></dfn> {
  <a href='#dom-domparser-constructor' id='dom-parsing-and-serialization:dom-domparser-constructor'><c- g>constructor</c-></a>();

  [<c- g>NewObject</c->] <code id='dom-parsing-and-serialization:document-4'><a href='dom.html#document'><c- n>Document</c-></a></code> <a href='#dom-domparser-parsefromstring' id='dom-parsing-and-serialization:dom-domparser-parsefromstring-2'><c- g>parseFromString</c-></a>(<c- b>DOMString</c-> <var><c- g>string</c-></var>, <a href='#domparsersupportedtype' id='dom-parsing-and-serialization:domparsersupportedtype'><c- n>DOMParserSupportedType</c-></a> <var><c- g>type</c-></var>);
};

<c- b>enum</c-> <dfn id='domparsersupportedtype' data-dfn-type='enum'><c- g>DOMParserSupportedType</c-></dfn> {
  <c- s>"</c-><a href='#dom-domparsersupportedtype-texthtml' id='dom-parsing-and-serialization:dom-domparsersupportedtype-texthtml'><c- s>text/html</c-></a><c- s>"</c->,
  <c- s>"</c-><a href='#dom-domparsersupportedtype-otherwise' id='dom-parsing-and-serialization:dom-domparsersupportedtype-otherwise'><c- s>text/xml</c-></a><c- s>"</c->,
  <c- s>"</c-><a href='#dom-domparsersupportedtype-otherwise' id='dom-parsing-and-serialization:dom-domparsersupportedtype-otherwise-2'><c- s>application/xml</c-></a><c- s>"</c->,
  <c- s>"</c-><a href='#dom-domparsersupportedtype-otherwise' id='dom-parsing-and-serialization:dom-domparsersupportedtype-otherwise-3'><c- s>application/xhtml+xml</c-></a><c- s>"</c->,
  <c- s>"</c-><a href='#dom-domparsersupportedtype-otherwise' id='dom-parsing-and-serialization:dom-domparsersupportedtype-otherwise-4'><c- s>image/svg+xml</c-></a><c- s>"</c->
};</code></pre>

  

  <p>The <dfn id="dom-domparser-constructor"><code>new DOMParser()</code></dfn> constructor steps are to do nothing.</p>

  <p>The <dfn data-dfn-for="DOMParser" id="dom-domparser-parsefromstring" data-dfn-type="method"><code>parseFromString(<var>string</var>, <var>type</var>)</code></dfn> method steps are:</p>

  <ol><li><p>Let <var>document</var> be a new <code id="dom-parsing-and-serialization:document-5"><a href="dom.html#document">Document</a></code>, whose <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-content-type" id="dom-parsing-and-serialization:concept-document-content-type" data-x-internal="concept-document-content-type">content type</a> is <var>type</var> and <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="dom-parsing-and-serialization:the-document's-address" data-x-internal="the-document's-address">url</a> is this's <a id="dom-parsing-and-serialization:concept-relevant-global" href="webappapis.html#concept-relevant-global">relevant global object</a>'s <a href="window-object.html#concept-document-window" id="dom-parsing-and-serialization:concept-document-window">associated <code>Document</code></a>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-url" id="dom-parsing-and-serialization:the-document's-address-2" data-x-internal="the-document's-address">URL</a>.</p>
    

    <p class="note">The document's <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-encoding" id="dom-parsing-and-serialization:document's-character-encoding-2" data-x-internal="document's-character-encoding">encoding</a> will be left as its default, of <a id="dom-parsing-and-serialization:utf-8-2" href="https://triple-underscore.github.io/Encoding-ja.html#utf-8" data-x-internal="utf-8">UTF-8</a>. In particular, any XML declarations or <code id="dom-parsing-and-serialization:the-meta-element"><a href="semantics.html#the-meta-element">meta</a></code> elements found while parsing <var>string</var> will have no effect.</p>
   <li><p>Switch on <var>type</var>:</p>

    <dl class="switch"><dt>"<dfn data-dfn-for="DOMParserSupportedType" id="dom-domparsersupportedtype-texthtml" data-dfn-type="enum-value"><code>text/html</code>"</dfn><dd><ol><li><p>Set <var>document</var>'s <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-type" id="dom-parsing-and-serialization:concept-document-type" data-x-internal="concept-document-type">type</a> to "<code>html</code>".<li><p>Create an <a id="dom-parsing-and-serialization:html-parser" href="parsing.html#html-parser">HTML parser</a> <var>parser</var>, associated with <var>document</var>.<li><p>Place <var>string</var> into the <a id="dom-parsing-and-serialization:input-stream" href="parsing.html#input-stream">input stream</a> for <var>parser</var>. The encoding <a href="parsing.html#concept-encoding-confidence" id="dom-parsing-and-serialization:concept-encoding-confidence">confidence</a> is <i>irrelevant</i>.<li><p>Start <var>parser</var> and let it run until it has consumed all the characters just inserted into the input stream.</p>

        <p class="note">This might mutate the document's <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-mode" id="dom-parsing-and-serialization:concept-document-mode" data-x-internal="concept-document-mode">mode</a>.</p>
       </ol>

      <p class="note">Since <var>document</var> does not have a <a href="browsers.html#concept-document-bc" id="dom-parsing-and-serialization:concept-document-bc">browsing context</a>, <a href="webappapis.html#concept-n-script" id="dom-parsing-and-serialization:concept-n-script">scripting is disabled</a>.</p>
     <dt><dfn id="dom-domparsersupportedtype-otherwise">Otherwise</dfn><dd><ol><li><p>Create an <a id="dom-parsing-and-serialization:xml-parser" href="xhtml.html#xml-parser">XML parser</a> <var>parse</var>, associated with <var>document</var>, and with <a id="dom-parsing-and-serialization:xml-scripting-support-disabled" href="xhtml.html#xml-scripting-support-disabled">XML scripting support disabled</a>.<li><p>Parse <var>string</var> using <var>parser</var>.</p>

       <li><p>If the previous step resulted in an XML well-formedness or XML namespace well-formedness error, then:</p>

        <ol><li><p>Assert: <var>document</var> has no child nodes.<li><p>Let <var>root</var> be the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-create-element" id="dom-parsing-and-serialization:create-an-element" data-x-internal="create-an-element">creating an element</a> given <var>document</var>, "<code>parsererror</code>", and "<code>http://www.mozilla.org/newlayout/xml/parsererror.xml</code>".<li><p>Optionally, add attributes or children to <var>root</var> to describe the nature of the parsing error.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-append" id="dom-parsing-and-serialization:concept-node-append" data-x-internal="concept-node-append">Append</a> <var>root</var> to <var>document</var>.</ol>
       </ol>
     </dl>
   <li><p><var>document</var>を返す。</p>
  </ol>

  


  <nav><a href="webappapis.html">← 8 ウェブアプリケーションAPI</a> – <a href="./">目次</a> – <a href="timers-and-user-prompts.html">8.6 タイマー →</a></nav>
