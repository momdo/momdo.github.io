<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/spec.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  
  <script async="" crossorigin="" src="./html-dfn.js"></script>
  <script data-file-issue-url="https://github.com/momdo/momdo.github.io/issues/new" async="" crossorigin="" src="https://resources.whatwg.org/file-issue.js"></script>
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1 class="allcaps">HTML</h1><h2 id="living-standard" class="no-num no-toc">Living Standard — Last Updated <span class="pubdate">31 January 2022</span></h2></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="interactive-elements.html">← 4.11 対話的な要素</a> — <a href="./">目次</a> — <a href="canvas.html">4.12.5 canvas要素 →</a></nav><ol class="toc"><li id="toc-semantics"><ol><li><a href="scripting.html#scripting-3"><span class="secno">4.12</span> スクリプティング</a><ol><li><a href="scripting.html#the-script-element"><span class="secno">4.12.1</span> <code>script</code>要素</a><ol><li><a href="scripting.html#script-processing-model"><span class="secno">4.12.1.1</span> Processing model</a><li><a href="scripting.html#scriptingLanguages"><span class="secno">4.12.1.2</span> スクリプト言語</a><li><a href="scripting.html#restrictions-for-contents-of-script-elements"><span class="secno">4.12.1.3</span> <code>script</code>要素のコンテンツの制約</a><li><a href="scripting.html#inline-documentation-for-external-scripts"><span class="secno">4.12.1.4</span> 外部スクリプトに対するインライン文書</a><li><a href="scripting.html#scriptTagXSLT"><span class="secno">4.12.1.5</span> Interaction of <code>script</code> elements and XSLT</a></ol><li><a href="scripting.html#the-noscript-element"><span class="secno">4.12.2</span> <code>noscript</code>要素</a><li><a href="scripting.html#the-template-element"><span class="secno">4.12.3 </span> <code>template</code>要素</a><ol><li><a href="scripting.html#template-XSLT-XPath"><span class="secno">4.12.3.1</span> Interaction of <code>template</code> elements with XSLT and XPath</a></ol><li><a href="scripting.html#the-slot-element"><span class="secno">4.12.4</span> <code>slot</code>要素</a></ol></ol></ol><h3 id="scripting-3"><span class="secno">4.12</span> スクリプティング<a href="#scripting-3" class="self-link"></a></h3>

  <p>スクリプトは著者が文書に双方向性を追加することを許可する。</p>

  <p>著者は、宣言型のメカニズムがしばしばより保守しやすく、かつ多くのユーザーがスクリプトを無効としているため、可能であれば、スクリプトに宣言型の代替を使用するよう推奨される。</p>

  <div class="example"><p>For example, instead of using a script to show or hide a section to show more details, the <code id="scripting-3:the-details-element"><a href="interactive-elements.html#the-details-element">details</a></code> element could be used.</p>

  </div>

  <p>著者はまた、スクリプトのサポートがない状態でそれらのアプリケーションが行儀よくデグレードするよう推奨される。</p>

  <div class="example"><p>たとえば、著者がテーブルヘッダーにおいてリンクに動的なテーブルの再ソートを提供する場合、リンクはまたサーバーからソートされたテーブルを要求することによって、スクリプトなしで機能させることができるかもしれない。</p>

  </div>


  <h4 id="the-script-element"><span class="secno">4.12.1</span> <dfn id="script" data-dfn-type="element"><code>script</code></dfn>要素<a href="#the-script-element" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" title="The &lt;script> HTML element is used to embed executable code or data; this is typically used to embed or refer to JavaScript code. The &lt;script> element can also be used with other languages, such as WebGL's GLSL shader programming language and JSON.">Element/script</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement" title="HTML &lt;script> elements expose the HTMLScriptElement interface, which provides special properties and methods for manipulating the behavior and execution of &lt;script> elements (beyond the inherited HTMLElement interface).">HTMLScriptElement</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>3+</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>12.1+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>5.5+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>1+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>18+</span></span><span class="webview_android yes"><span>WebView Android</span><span>1+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>12.1+</span></span></div></div></div><dl class="element"><dt><a href="dom.html#concept-element-categories" id="the-script-element:concept-element-categories">カテゴリー</a>：<dd><a id="the-script-element:metadata-content-2" href="dom.html#metadata-content-2">メタデータコンテンツ</a>。<dd><a id="the-script-element:flow-content-2" href="dom.html#flow-content-2">フローコンテンツ</a>。<dd><a id="the-script-element:phrasing-content-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>。<dd><a href="dom.html#script-supporting-elements-2" id="the-script-element:script-supporting-elements-2">スクリプトサポート要素</a>。<dt><a href="dom.html#concept-element-contexts" id="the-script-element:concept-element-contexts">この要素を使用できるコンテキスト</a>：<dd><a id="the-script-element:metadata-content-2-2" href="dom.html#metadata-content-2">メタデータコンテンツ</a>が期待される場所。<dd><a id="the-script-element:phrasing-content-2-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>が期待される場所。<dd><a id="the-script-element:script-supporting-elements-2-2" href="dom.html#script-supporting-elements-2">スクリプトサポート要素</a>が期待される場所。<dt><a href="dom.html#concept-element-content-model" id="the-script-element:concept-element-content-model">コンテンツモデル</a>：<dd><code id="the-script-element:attr-script-src"><a href="#attr-script-src">src</a></code>属性が存在しない場合、<code id="the-script-element:attr-script-type"><a href="#attr-script-type">type</a></code>属性の値に依存するが、<a href="#restrictions-for-contents-of-script-elements" id="the-script-element:restrictions-for-contents-of-script-elements">スクリプトの内容制限</a>に一致しなければならない。<dd><code id="the-script-element:attr-script-src-2"><a href="#attr-script-src">src</a></code>属性が存在<em>する</em>場合、要素は空または<a href="#inline-documentation-for-external-scripts" id="the-script-element:inline-documentation-for-external-scripts">スクリプト文書</a>を含むだけでなく<a href="#restrictions-for-contents-of-script-elements" id="the-script-element:restrictions-for-contents-of-script-elements-2">スクリプトの内容制限</a>に一致するかのいずれかでなければならない。<dt><a href="dom.html#concept-element-tag-omission" id="the-script-element:concept-element-tag-omission">text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href="dom.html#concept-element-attributes" id="the-script-element:concept-element-attributes">コンテンツ属性</a>：<dd><a id="the-script-element:global-attributes" href="dom.html#global-attributes">グローバル属性</a><dd><code id="the-script-element:attr-script-src-3"><a href="#attr-script-src">src</a></code> — リソースのアドレス<dd><code id="the-script-element:attr-script-type-2"><a href="#attr-script-type">type</a></code> — スクリプトの種類<dd><code id="the-script-element:attr-script-nomodule"><a href="#attr-script-nomodule">nomodule</a></code> — <a href="webappapis.html#module-script" id="the-script-element:module-script">モジュールスクリプト</a>をサポートするユーザーエージェントにおける実行を防ぐ<dd><code id="the-script-element:attr-script-async"><a href="#attr-script-async">async</a></code> — フェッチの間ブロックなしで、可能な場合にスクリプトを実行する<dd><code id="the-script-element:attr-script-defer"><a href="#attr-script-defer">defer</a></code> — スクリプトの実行を延期する<dd><code id="the-script-element:attr-script-crossorigin"><a href="#attr-script-crossorigin">crossorigin</a></code> — 要素が生成元をまたいだ要求を処理する方法<dd><code id="the-script-element:attr-script-integrity"><a href="#attr-script-integrity">integrity</a></code> — <cite>Subresource Integrity</cite>チェックで使用される整合性メタデータ<a href="references.html#refsSRI">[SRI]</a><dd><code id="the-script-element:attr-script-referrerpolicy"><a href="#attr-script-referrerpolicy">referrerpolicy</a></code> — 要素によって開始された<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="the-script-element:concept-fetch" data-x-internal="concept-fetch">フェッチ</a>のための<a id="the-script-element:referrer-policy" href="https://triple-underscore.github.io/webappsec-referrer-policy-ja.html#referrer-policy" data-x-internal="referrer-policy">リファラーポリシー</a><dt><a href="dom.html#concept-element-accessibility-considerations" id="the-script-element:concept-element-accessibility-considerations">アクセシビリティの考慮</a>：<dd><a href="https://momdo.github.io/html-aria/#el-script">著者向け</a>。<dd><a href="https://w3c.github.io/html-aam/#el-script">実装者向け</a>。<dt><a href="dom.html#concept-element-dom" id="the-script-element:concept-element-dom">DOMインターフェイス</a>：<dd><pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='htmlscriptelement' data-dfn-type='interface'><c- g>HTMLScriptElement</c-></dfn> : <a id='the-script-element:htmlelement' href='dom.html#htmlelement'><c- n>HTMLElement</c-></a> {
  [<a id='the-script-element:htmlconstructor' href='dom.html#htmlconstructor'><c- g>HTMLConstructor</c-></a>] <c- g>constructor</c->();

  [<a id='the-script-element:cereactions' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>USVString</c-> <a href='#dom-script-src' id='the-script-element:dom-script-src'><c- g>src</c-></a>;
  [<a id='the-script-element:cereactions-2' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-script-type' id='the-script-element:dom-script-type'><c- g>type</c-></a>;
  [<a id='the-script-element:cereactions-3' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-script-nomodule' id='the-script-element:dom-script-nomodule'><c- g>noModule</c-></a>;
  [<a id='the-script-element:cereactions-4' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-script-async' id='the-script-element:dom-script-async'><c- g>async</c-></a>;
  [<a id='the-script-element:cereactions-5' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>boolean</c-> <a href='#dom-script-defer' id='the-script-element:dom-script-defer'><c- g>defer</c-></a>;
  [<a id='the-script-element:cereactions-6' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c->? <a href='#dom-script-crossorigin' id='the-script-element:dom-script-crossorigin'><c- g>crossOrigin</c-></a>;
  [<a id='the-script-element:cereactions-7' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-script-text' id='the-script-element:dom-script-text'><c- g>text</c-></a>;
  [<a id='the-script-element:cereactions-8' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-script-integrity' id='the-script-element:dom-script-integrity'><c- g>integrity</c-></a>;
  [<a id='the-script-element:cereactions-9' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-script-referrerpolicy' id='the-script-element:dom-script-referrerpolicy'><c- g>referrerPolicy</c-></a>;

  <c- b>static</c-> <c- b>boolean</c-> <a href='#dom-script-supports' id='the-script-element:dom-script-supports'><c- g>supports</c-></a>(<c- b>DOMString</c-> <c- g>type</c->);

  // <a href='obsolete.html#HTMLScriptElement-partial'>also has obsolete members</a>
};</code></pre>
   </dl>

  <p><code id="the-script-element:the-script-element"><a href="#the-script-element">script</a></code>要素は、著者が文書に動的スクリプトおよびデータブロックを含むことを許可する。この要素は、ユーザーにコンテンツを<a href="dom.html#represents" id="the-script-element:represents">表す</a>ものでない。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-type" title="The &lt;script> HTML element is used to embed executable code or data; this is typically used to embed or refer to JavaScript code. The &lt;script> element can also be used with other languages, such as WebGL's GLSL shader programming language and JSON.">Element/script#attr-type</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><p><dfn data-dfn-for="script" id="attr-script-type" data-dfn-type="element-attr"><code>type</code></dfn>属性は、表されるスクリプトの型をカスタマイズを可能にする：</p>

  <ul><li><p>属性を省略する、空文字列に設定する、または<a id="the-script-element:javascript-mime-type-essence-match" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type-essence-match" data-x-internal="javascript-mime-type-essence-match">JavaScript MIMEタイプエッセンスマッチ</a>に設定することは、スクリプトがJavaScript <i id="the-script-element:js-prod-script"><a data-x-internal="js-prod-script" href="https://tc39.es/ecma262/#prod-Script">Script</a></i>トップレベル制作物によって解釈されるような<a id="the-script-element:classic-script" href="webappapis.html#classic-script">クラシックスクリプト</a>であることを意味する。クラシックスクリプトは<code id="the-script-element:attr-script-async-2"><a href="#attr-script-async">async</a></code>属性および<code id="the-script-element:attr-script-defer-2"><a href="#attr-script-defer">defer</a></code>属性の影響を受けるが、<code id="the-script-element:attr-script-src-4"><a href="#attr-script-src">src</a></code>属性が設定されている場合のみである。著者は重複して設定する代わりに、<code id="the-script-element:attr-script-type-3"><a href="#attr-script-type">type</a></code>属性を省略すべきである。<li><p>Setting the attribute to an <a id="the-script-element:ascii-case-insensitive" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>module</code>" means that the script is a <a id="the-script-element:javascript-module-script" href="webappapis.html#javascript-module-script">JavaScript module script</a>, to be interpreted according to the JavaScript <i id="the-script-element:js-prod-module"><a data-x-internal="js-prod-module" href="https://tc39.es/ecma262/#prod-Module">Module</a></i> top-level production. モジュールスクリプトは<code id="the-script-element:attr-script-defer-3"><a href="#attr-script-defer">defer</a></code>属性の影響を受けないが、 <code id="the-script-element:attr-script-async-3"><a href="#attr-script-async">async</a></code>属性の影響を受ける（<code id="the-script-element:attr-script-src-5"><a href="#attr-script-src">src</a></code>属性の状態に関係なく）。<li><p>他の値に属性を設定することは、スクリプトが処理されない<dfn id="data-block">データブロック</dfn>であることを意味する。（<code id="the-script-element:attr-script-type-4"><a href="#attr-script-type">type</a></code>自身を除く）<code id="the-script-element:the-script-element-2"><a href="#the-script-element">script</a></code>属性のいずれもデータブロック上で任意の効果を持たない。著者は、データブロックを示すために<a id="the-script-element:javascript-mime-type-essence-match-2" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type-essence-match" data-x-internal="javascript-mime-type-essence-match">JavaScript MIMEタイプエッセンシャルマッチ</a>でない<a id="the-script-element:valid-mime-type-string" href="https://triple-underscore.github.io/mimesniff-ja.html#valid-mime-type" data-x-internal="valid-mime-type-string">妥当なMIMEタイプ文字列</a>を使用しなければならない。</ul>

  <p class="note"><a href="#data-block" id="the-script-element:data-block">データブロック</a>が<a id="the-script-element:valid-mime-type-string-2" href="https://triple-underscore.github.io/mimesniff-ja.html#valid-mime-type" data-x-internal="valid-mime-type-string">妥当なMIMEタイプ文字列</a>を使用して表記されなければならない要件は、潜在的な将来の衝突を回避するための場所である。この仕様が<a href="webappapis.html#concept-script" id="the-script-element:concept-script">スクリプト</a>の追加の型をいずれ追加する場合、その追加の型は"<code>module</code>"値が<a href="webappapis.html#module-script" id="the-script-element:module-script-2">モジュールスクリプト</a>を表す方法のように、MIMEタイプでない何かに<code id="the-script-element:attr-script-type-5"><a href="#attr-script-type">type</a></code>属性を設定することによってトリガーされる。現在に妥当なMIMEタイプ文字列を使用することで、将来のユーザーエージェントでさえも、データブロックが異なるスクリプトタイプとして再解釈されないことを保証する。</p>

  <p><a href="webappapis.html#classic-script" id="the-script-element:classic-script-2">クラシックスクリプト</a>および<a href="webappapis.html#javascript-module-script" id="the-script-element:javascript-module-script-2">JavaScriptモジュールスクリプト</a>は、インラインで埋め込むか<dfn data-dfn-for="script" id="attr-script-src" data-dfn-type="element-attr"><code>src</code></dfn>属性を使用する外部ファイルからインポートすることができ、これは指定された場合に使用する外部スクリプトリソースの<a id="the-script-element:url" href="https://triple-underscore.github.io/URL-ja.html#concept-url" data-x-internal="url">URL</a>を与える。<code id="the-script-element:attr-script-src-6"><a href="#attr-script-src">src</a></code>が指定される場合、<a id="the-script-element:valid-non-empty-url-potentially-surrounded-by-spaces" href="urls-and-fetching.html#valid-non-empty-url-potentially-surrounded-by-spaces">潜在的にスペースで囲まれる妥当な空でないURL</a>でなければならない。</p>

  <p>インライン<code id="the-script-element:the-script-element-3"><a href="#the-script-element">script</a></code>要素、または外部スクリプトリソースのコンテンツは、それぞれ<a href="webappapis.html#classic-script" id="the-script-element:classic-script-3">クラシックスクリプト</a>および<a href="webappapis.html#javascript-module-script" id="the-script-element:javascript-module-script-3">JavaScriptモジュールスクリプト</a>に対するJavaScript仕様の<i id="the-script-element:js-prod-script-2"><a data-x-internal="js-prod-script" href="https://tc39.es/ecma262/#prod-Script">Script</a></i>または<i id="the-script-element:js-prod-module-2"><a data-x-internal="js-prod-module" href="https://tc39.es/ecma262/#prod-Module">Module</a></i>生成物の要件に適合しなければならない。<a href="references.html#refsJAVASCRIPT">[JAVASCRIPT]</a></p>

  <p>The contents of the external script resource for <a href="webappapis.html#css-module-script" id="the-script-element:css-module-script">CSS module scripts</a> must conform to the requirements of the CSS specification. <a href="references.html#refsCSS">[CSS]</a></p>

  <p><a href="webappapis.html#json-module-script" id="the-script-element:json-module-script">JSONモジュールスクリプト</a>の外部スクリプトリソースのコンテンツは、JSON仕様<a href="references.html#refsJSON">[JSON]</a>の要件に準拠しなければならない。</p>

  <p><a href="#data-block" id="the-script-element:data-block-2">データブロック</a>を含めるために使用される場合、データは、インラインに埋め込まれなければならず、データの形式は、<code id="the-script-element:attr-script-type-6"><a href="#attr-script-type">type</a></code>属性を使用して指定しなければならず、かつ<code id="the-script-element:the-script-element-4"><a href="#the-script-element">script</a></code>要素のコンテンツは、使用される形式のために定義される要件に適合しなければならない。<code id="the-script-element:attr-script-src-7"><a href="#attr-script-src">src</a></code>、<code id="the-script-element:attr-script-async-4"><a href="#attr-script-async">async</a></code>、<code id="the-script-element:attr-script-nomodule-2"><a href="#attr-script-nomodule">nomodule</a></code>、<code id="the-script-element:attr-script-defer-4"><a href="#attr-script-defer">defer</a></code>、<code id="the-script-element:attr-script-crossorigin-2"><a href="#attr-script-crossorigin">crossorigin</a></code>、<code id="the-script-element:attr-script-integrity-2"><a href="#attr-script-integrity">integrity</a></code>および<code id="the-script-element:attr-script-referrerpolicy-2"><a href="#attr-script-referrerpolicy">referrerpolicy</a></code>属性を指定してはならない。</p>

  <p><dfn data-dfn-for="script" id="attr-script-nomodule" data-dfn-type="element-attr"><code>nomodule</code></dfn>属性は、<a href="webappapis.html#module-script" id="the-script-element:module-script-3">モジュールスクリプト</a>をサポートするユーザーエージェントでスクリプトが実行されないようにする<a id="the-script-element:boolean-attribute" href="common-microsyntaxes.html#boolean-attribute">真偽属性</a>である。これは、<a href="#script-nomodule-example">以下に示すように</a>、モダンなユーザーエージェントの<a href="webappapis.html#module-script" id="the-script-element:module-script-4">モジュールスクリプト</a>と古いユーザーエージェントの<a href="webappapis.html#classic-script" id="the-script-element:classic-script-4">クラシックスクリプト</a>の選択的な実行を可能にする。<code id="the-script-element:attr-script-nomodule-3"><a href="#attr-script-nomodule">nomodule</a></code>属性を<a href="webappapis.html#module-script" id="the-script-element:module-script-5">モジュールスクリプト</a>で指定してはならない（この属性がある場合は無視される）。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-async" title="The &lt;script> HTML element is used to embed executable code or data; this is typically used to embed or refer to JavaScript code. The &lt;script> element can also be used with other languages, such as WebGL's GLSL shader programming language and JSON.">Element/script#attr-async</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>1+</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#attr-defer" title="The &lt;script> HTML element is used to embed executable code or data; this is typically used to embed or refer to JavaScript code. The &lt;script> element can also be used with other languages, such as WebGL's GLSL shader programming language and JSON.">Element/script#attr-defer</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>3.5+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>Yes</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>10+</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div><p><dfn data-dfn-for="script" id="attr-script-async" data-dfn-type="element-attr"><code>async</code></dfn>および<dfn data-dfn-for="script" id="attr-script-defer" data-dfn-type="element-attr"><code>defer</code></dfn>属性は、どのようにスクリプトが評価されるべきかを示す<a href="common-microsyntaxes.html#boolean-attribute" id="the-script-element:boolean-attribute-2">真偽属性</a>である。<a href="webappapis.html#classic-script" id="the-script-element:classic-script-5">クラシックスクリプト</a>は、<code id="the-script-element:attr-script-defer-5"><a href="#attr-script-defer">defer</a></code>または<code id="the-script-element:attr-script-async-5"><a href="#attr-script-async">async</a></code>を指定してもよいが、<code id="the-script-element:attr-script-src-8"><a href="#attr-script-src">src</a></code>属性が存在しない限り、いずれかを指定してはならない。<a href="webappapis.html#module-script" id="the-script-element:module-script-6">モジュールスクリプト</a>は<code id="the-script-element:attr-script-async-6"><a href="#attr-script-async">async</a></code>属性を指定してもよいが、<code id="the-script-element:attr-script-defer-6"><a href="#attr-script-defer">defer</a></code>属性を指定してはならない。</p>

  <p>これらの属性を使用して、スクリプトの種類によって選択できる複数の可能なモードが存在する。</p>

  <p><a href="webappapis.html#classic-script" id="the-script-element:classic-script-6">クラシックスクリプト</a>について、<code id="the-script-element:attr-script-async-7"><a href="#attr-script-async">async</a></code>属性が存在する場合、クラシックスクリプトは、構文解析と<a id="the-script-element:in-parallel" href="infrastructure.html#in-parallel">並行して</a>フェッチされるとすぐに（潜在的に構文解析が完了する前に）利用可能になると評価される。<code id="the-script-element:attr-script-async-8"><a href="#attr-script-async">async</a></code>が存在しないが<code id="the-script-element:attr-script-defer-7"><a href="#attr-script-defer">defer</a></code>属性が存在する場合、クラシックスクリプトは、<a id="the-script-element:in-parallel-2" href="infrastructure.html#in-parallel">並行して</a>フェッチされ、ページが解析終了したときに評価される。いずれの属性も存在しない場合、スクリプトは、両方が完了するまで解析を阻止して、すぐにフェッチされ評価される。</p>

  <p><a href="webappapis.html#module-script" id="the-script-element:module-script-7">モジュールスクリプト</a>について、<code id="the-script-element:attr-script-async-9"><a href="#attr-script-async">async</a></code>属性が存在する場合、モジュールスクリプトとそのすべての依存関係は、構文解析と<a id="the-script-element:in-parallel-3" href="infrastructure.html#in-parallel">並行して</a>フェッチされ、モジュールスクリプトは利用可能になるとすぐに（潜在的に構文解析が完了する前に）評価される。そうでなければ、モジュールスクリプトとその依存関係は、構文解析と<a id="the-script-element:in-parallel-4" href="infrastructure.html#in-parallel">並行して</a>フェッチされ、ページが解析終了したときに評価される。（<code id="the-script-element:attr-script-defer-8"><a href="#attr-script-defer">defer</a></code>属性は、モジュールスクリプトに影響しない。）</p>

  <p>これは、次の模式図にすべて要約される：</p>

  <p><img src="https://html.spec.whatwg.org/multipage/images/asyncdefer.svg" alt="&lt;script>のために、解析はフェッチと実行によって中断される。With &lt;script defer>, fetching is parallel to parsing and execution takes place after all parsing has finished. And with &lt;script async>, fetching is parallel to parsing but once it finishes parsing is interrupted to execute the script. &lt;script type=module>のストーリーは&lt;script defer>に似ているが、依存関係もフェッチされ、&lt;script type=module async>のストーリーは追加の依存関係のフェッチを伴う&lt;script async>に似ている。" style="width: 80%; min-width: 820px;"></p>

  <p class="note">これら属性の正確な処理の詳細は、主に歴史的な理由から、いくぶん自明でない、多くのHTMLの側面を含む。したがって、実装要求は必然的に仕様のあらゆる場所に散在している。（この節の）下記のアルゴリズムは、この処理の中核を説明するが、これらのアルゴリズムが参照する、およびHTMLにおける<code id="the-script-element:the-script-element-5"><a href="#the-script-element">script</a></code>の<a href="parsing.html#scriptTag">開始</a>タグと<a href="parsing.html#scriptEndTag">終了</a>タグに対する構文解析規則、<a href="parsing.html#scriptForeignEndTag">無関係なコンテンツで</a>、<a href="xhtml.html#scriptTagXML">XMLで</a>、<code id="the-script-element:dom-document-write"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code>メソッドに対する規則、<a href="webappapis.html#scripting">スクリプト</a>の取り扱いなどによって参照される。</p>

  <p>たとえ<code id="the-script-element:attr-script-async-10"><a href="#attr-script-async">async</a></code>属性が指定されても、デフォルトとなるブロッキング動作の代わりに<code id="the-script-element:attr-script-defer-11"><a href="#attr-script-defer">defer</a></code>の動作をフォールバックするために、<code id="the-script-element:attr-script-defer-10"><a href="#attr-script-defer">defer</a></code>のみをサポートする（かつ<code id="the-script-element:attr-script-async-11"><a href="#attr-script-async">async</a></code>をサポートしない）レガシーウェブブラウザーをもたらすため、<code id="the-script-element:attr-script-defer-9"><a href="#attr-script-defer">defer</a></code>属性は指定されてもよい。</p>

  <p><dfn data-dfn-for="script" id="attr-script-crossorigin" data-dfn-type="element-attr"><code>crossorigin</code></dfn>属性は<a id="the-script-element:cors-settings-attribute" href="urls-and-fetching.html#cors-settings-attribute">CORS設定属性</a>である。<a href="webappapis.html#classic-script" id="the-script-element:classic-script-7">クラシックスクリプト</a>について、スクリプトが他の<a href="origin.html#concept-origin" id="the-script-element:concept-origin">生成元</a>から得られる場合、エラー情報が公開されるかどうかを制御する。<a href="webappapis.html#module-script" id="the-script-element:module-script-8">モジュールスクリプト</a>について、生成元をまたいだリクエストに使用される<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-credentials-mode" id="the-script-element:concept-request-credentials-mode" data-x-internal="concept-request-credentials-mode">資格情報モード</a>を制御する。</p>

  <p class="note"><a href="webappapis.html#classic-script" id="the-script-element:classic-script-8">クラシックスクリプト</a>とは異なり、<a href="webappapis.html#module-script" id="the-script-element:module-script-9">モジュールスクリプト</a>は、生成元をまたいだフェッチのために<a href="https://triple-underscore.github.io/Fetch-ja.html#http-cors-protocol" id="the-script-element:cors-protocol" data-x-internal="cors-protocol">CORSプロトコル</a>を使用する必要がある。</p>

  <p><dfn data-dfn-for="script" id="attr-script-integrity" data-dfn-type="element-attr"><code>integrity</code></dfn>属性は、この要素が責任を負うリクエストに対する<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-integrity-metadata" id="the-script-element:concept-request-integrity-metadata" data-x-internal="concept-request-integrity-metadata">完全性メタデータ</a>を表す。値はテキストである。<code id="the-script-element:attr-script-src-9"><a href="#attr-script-src">src</a></code>属性が指定されていない場合、<code id="the-script-element:attr-script-integrity-3"><a href="#attr-script-integrity">integrity</a></code>属性は指定してはならない。<a href="references.html#refsSRI">[SRI]</a></p>

  <p><dfn data-dfn-for="script" id="attr-script-referrerpolicy" data-dfn-type="element-attr"><code>referrerpolicy</code></dfn>属性は、<a id="the-script-element:referrer-policy-attribute" href="urls-and-fetching.html#referrer-policy-attribute">リファラーポリシー属性</a>である。その目的は、スクリプトを<a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="the-script-element:concept-fetch-2" data-x-internal="concept-fetch">フェッチする</a>ときに使用される<a id="the-script-element:referrer-policy-2" href="https://triple-underscore.github.io/webappsec-referrer-policy-ja.html#referrer-policy" data-x-internal="referrer-policy">リファラーポリシー</a>と、そこからインポートされたスクリプトを設定することにある。<a href="references.html#refsREFERRERPOLICY">[REFERRERPOLICY]</a></p>

  <div class="example"><p>インポートされたスクリプトをフェッチするときに使用されているが他のサブリソースを取得していないときに使用されている<code id="the-script-element:the-script-element-6"><a href="#the-script-element">script</a></code>のリファラーポリシーの例：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>referrerpolicy</c-><c- o>=</c-><c- s>"origin"</c-><c- p>></c->
  fetch<c- p>(</c-><c- t>'/api/data'</c-><c- p>);</c->    <c- c1>// not fetched with &lt;script>'s referrer policy</c->
  <c- k>import</c-><c- p>(</c-><c- t>'./utils.mjs'</c-><c- p>);</c-> <c- c1>// is fetched with &lt;script>'s referrer policy ("origin" in this case)</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>
  </div>

  <p><code id="the-script-element:attr-script-src-10"><a href="#attr-script-src">src</a></code>、<code id="the-script-element:attr-script-type-7"><a href="#attr-script-type">type</a></code>、<code id="the-script-element:attr-script-nomodule-4"><a href="#attr-script-nomodule">nomodule</a></code>、<code id="the-script-element:attr-script-async-12"><a href="#attr-script-async">async</a></code>、<code id="the-script-element:attr-script-defer-12"><a href="#attr-script-defer">defer</a></code>、<code id="the-script-element:attr-script-crossorigin-3"><a href="#attr-script-crossorigin">crossorigin</a></code>、<code id="the-script-element:attr-script-integrity-4"><a href="#attr-script-integrity">integrity</a></code>および<code id="the-script-element:attr-script-referrerpolicy-3"><a href="#attr-script-referrerpolicy">referrerpolicy</a></code>を動的に変更する属性は直接的な影響はない。これらの属性は、下記の特定の時間でのみ使用される。</p> 

  

  <p>The IDL attributes <dfn data-dfn-for="HTMLScriptElement" id="dom-script-src" data-dfn-type="attribute"><code>src</code></dfn>, <dfn data-dfn-for="HTMLScriptElement" id="dom-script-type" data-dfn-type="attribute"><code>type</code></dfn>, <dfn data-dfn-for="HTMLScriptElement" id="dom-script-defer" data-dfn-type="attribute"><code>defer</code></dfn>, and <dfn data-dfn-for="HTMLScriptElement" id="dom-script-integrity" data-dfn-type="attribute"><code>integrity</code></dfn>, must each <a id="the-script-element:reflect" href="common-dom-interfaces.html#reflect">reflect</a> the respective content attributes of the same name.</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement/referrerPolicy" title="The referrerPolicy property of the HTMLScriptElement interface reflects the HTML referrerpolicy of the &lt;script> element and fetches made by that script, defining which referrer is sent when fetching the resource.">HTMLScriptElement/referrerPolicy</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>65+</span></span><span class="safari yes"><span>Safari</span><span>14+</span></span><span class="chrome yes"><span>Chrome</span><span>70+</span></span><hr><span class="opera yes"><span>Opera</span><span>57+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>65+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>14+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>70+</span></span><span class="webview_android yes"><span>WebView Android</span><span>70+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>10.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>49+</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-referrerpolicy" data-dfn-type="attribute"><code>referrerPolicy</code></dfn> IDL attribute must <a id="the-script-element:reflect-2" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="the-script-element:attr-script-referrerpolicy-4"><a href="#attr-script-referrerpolicy">referrerpolicy</a></code> content attribute, <a id="the-script-element:limited-to-only-known-values" href="common-dom-interfaces.html#limited-to-only-known-values">limited to only known values</a>.</p>

  <p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-crossorigin" data-dfn-type="attribute"><code>crossOrigin</code></dfn> IDL attribute must <a id="the-script-element:reflect-3" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="the-script-element:attr-script-crossorigin-4"><a href="#attr-script-crossorigin">crossorigin</a></code> content attribute, <a id="the-script-element:limited-to-only-known-values-2" href="common-dom-interfaces.html#limited-to-only-known-values">limited to only known values</a>.</p>

  <p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-nomodule" data-dfn-type="attribute"><code>noModule</code></dfn> IDL attribute must <a id="the-script-element:reflect-4" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="the-script-element:attr-script-nomodule-5"><a href="#attr-script-nomodule">nomodule</a></code> content attribute.</p>

  <p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-async" data-dfn-type="attribute"><code>async</code></dfn> IDL attribute controls whether the element will execute asynchronously or not. If the element's <a href="#non-blocking" id="the-script-element:non-blocking">"non-blocking"</a> flag is set, then, on getting, the <code id="the-script-element:dom-script-async-2"><a href="#dom-script-async">async</a></code> IDL attribute must return true, and on setting, the <a href="#non-blocking" id="the-script-element:non-blocking-2">"non-blocking"</a> flag must first be unset, and then the content attribute must be removed if the IDL attribute's new value is false, and must be set to the empty string if the IDL attribute's new value is true. If the element's <a href="#non-blocking" id="the-script-element:non-blocking-3">"non-blocking"</a> flag is <em>not</em> set, the IDL attribute must <a id="the-script-element:reflect-5" href="common-dom-interfaces.html#reflect">reflect</a> the <code id="the-script-element:attr-script-async-13"><a href="#attr-script-async">async</a></code> content attribute.</p>

  

  <dl class="domintro"><dt><code><var>script</var>.<a href="#dom-script-text" id="dom-script-text-dev">text</a> [ = <var>value</var> ]</code><dd><p>要素の<a id="the-script-element:child-text-content" href="https://triple-underscore.github.io/DOM4-ja.html#concept-child-text-content" data-x-internal="child-text-content">子テキストコンテンツ</a>を返す。</p>

    <p>与えられた値を持つ要素の子を置換するために、設定できる。</p>
   <dt><code><code id="the-script-element:htmlscriptelement"><a href="#htmlscriptelement">HTMLScriptElement</a></code>.<a href="#dom-script-supports" id="dom-script-supports-dev">supports</a>(<var>type</var>)</code><dd><p>Returns true if the given <var>type</var> is a script type supported by the user agent. The possible script types in this specification are "<code>classic</code>" and "<code>module</code>", but others might be added in the future.</dl>

  

  <p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-text" data-dfn-type="attribute"><code>text</code></dfn> attribute's getter must return this <code id="the-script-element:the-script-element-7"><a href="#the-script-element">script</a></code> element's <a id="the-script-element:child-text-content-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-child-text-content" data-x-internal="child-text-content">child text content</a>.</p>

  <p>The <code id="the-script-element:dom-script-text-2"><a href="#dom-script-text">text</a></code> attribute's setter must <a id="the-script-element:string-replace-all" href="https://triple-underscore.github.io/DOM4-ja.html#string-replace-all" data-x-internal="string-replace-all">string replace all</a> with the given value within this <code id="the-script-element:the-script-element-8"><a href="#the-script-element">script</a></code> element.</p>

  

  <p class="note"><code id="the-script-element:dom-document-write-2"><a href="dynamic-markup-insertion.html#dom-document-write">document.write()</a></code>メソッドを使用して挿入するとき、<a href="parsing.html#document-written-scripts-intervention">通常は</a><code id="the-script-element:the-script-element-9"><a href="#the-script-element">script</a></code>要素が実行される（一般に、スクリプトの実行またはHTMLの解析をブロックする）。<code id="the-script-element:dom-innerhtml"><a data-x-internal="dom-innerhtml" href="https://triple-underscore.github.io/DOM-Parsing-ja.html#dom-element-innerhtml">innerHTML</a></code>属性と<code id="the-script-element:dom-outerhtml"><a data-x-internal="dom-outerhtml" href="https://triple-underscore.github.io/DOM-Parsing-ja.html#dom-element-outerhtml">outerHTML</a></code>属性を使用して挿入する場合、それらは一切実行されない。</p>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in one engine only." class="less-than-two-engines-flag">⚠</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLScriptElement/supports" title="The supports() static method of the HTMLScriptElement interface provides a simple and consistent method to feature-detect what types of scripts are supported by the user agent.">HTMLScriptElement/supports</a><p class="less-than-two-engines-text">Support in one engine only.<div class="support"><span class="firefox yes"><span>Firefox</span><span>94+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome no"><span>Chrome</span><span>No</span></span><hr><span class="opera no"><span>Opera</span><span>No</span></span><span class="edge_blink no"><span>Edge</span><span>No</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>94+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android no"><span>Chrome Android</span><span>No</span></span><span class="webview_android no"><span>WebView Android</span><span>No</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>No</span></span><span class="opera_android no"><span>Opera Android</span><span>No</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLScriptElement" id="dom-script-supports" data-dfn-type="method"><code>supports(<var>type</var>)</code></dfn> method steps are:</p>

  <ol><li><p>If <var>type</var> <a id="the-script-element:is" href="https://triple-underscore.github.io/infra-ja.html#string-is" data-x-internal="is">is</a> "<code>classic</code>", then return true.<li><p>If <var>type</var> <a id="the-script-element:is-2" href="https://triple-underscore.github.io/infra-ja.html#string-is" data-x-internal="is">is</a> "<code>module</code>", then return true.<li><p>falseを返す。</ol>

  <p class="note">The <var>type</var> argument has to exactly match these values; we do not perform an <a id="the-script-element:ascii-case-insensitive-2" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match. This is different from how <code id="the-script-element:attr-script-type-8"><a href="#attr-script-type">type</a></code> content attribute values are treated, and how <code id="the-script-element:domtokenlist"><a data-x-internal="domtokenlist" href="https://triple-underscore.github.io/DOM4-ja.html#interface-domtokenlist">DOMTokenList</a></code>'s <code id="the-script-element:dom-domtokenlist-supports"><a data-x-internal="dom-domtokenlist-supports" href="https://dom.spec.whatwg.org/#dom-domtokenlist-supports">supports()</a></code> method works, but it aligns with the <code id="the-script-element:workertype"><a href="workers.html#workertype">WorkerType</a></code> enumeration used in the <code id="the-script-element:dom-worker"><a href="workers.html#dom-worker">Worker()</a></code> constructor.</p>

  <div class="example"><p>次の例において、2つの<code id="the-script-element:the-script-element-10"><a href="#the-script-element">script</a></code>要素が使用される。1つは外部の<a id="the-script-element:classic-script-9" href="webappapis.html#classic-script">クラシックスクリプト</a>を埋め込み、もう1つは<a href="#data-block" id="the-script-element:data-block-3">データブロック</a>のようないくつかのデータを含む。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>src</c-><c- o>=</c-><c- s>"game-engine.js"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-> <c- e>type</c-><c- o>=</c-><c- s>"text/x-game-map"</c-><c- p>></c->
<c- p>........</c->U<c- p>.........</c->e
o<c- p>............</c->A<c- p>....</c->e
<c- p>.....</c->A<c- p>.....</c->AAA<c- p>....</c->e
<c- p>.</c->A<c- p>..</c->AAA<c- p>...</c->AAAAA<c- p>...</c->e
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>この場合のデータは、ビデオゲームのマップを生成するスクリプトによって使用されるかもしれない。しかし、データはそのように使用する必要はない。おそらく実際にマップデータは、ページのマークアップの他の部分に埋め込まれており、ここでデータブロックは、ゲームマップで特定の機能を探しているユーザーを支援するサイトの検索エンジンによって単に使用される。</p>

  </div>

  <div class="example"><p>次のサンプルは、<code id="the-script-element:the-script-element-11"><a href="#the-script-element">script</a></code>要素が外部<a id="the-script-element:classic-script-10" href="webappapis.html#classic-script">モジュールスクリプト</a>を含めるために使用される方法を示す。また、フォームの出力を初期化する場合に、文書が解析されている間に<code id="the-script-element:the-script-element-12"><a href="#the-script-element">script</a></code>要素がスクリプトを呼び出すために使用されうる方法を示す。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>function</c-> calculate<c- p>(</c->form<c- p>)</c-> <c- p>{</c->
   <c- a>var</c-> price <c- o>=</c-> <c- mf>52000</c-><c- p>;</c->
   <c- k>if</c-> <c- p>(</c->form<c- p>.</c->elements<c- p>.</c->brakes<c- p>.</c->checked<c- p>)</c->
     price <c- o>+=</c-> <c- mf>1000</c-><c- p>;</c->
   <c- k>if</c-> <c- p>(</c->form<c- p>.</c->elements<c- p>.</c->radio<c- p>.</c->checked<c- p>)</c->
     price <c- o>+=</c-> <c- mf>2500</c-><c- p>;</c->
   <c- k>if</c-> <c- p>(</c->form<c- p>.</c->elements<c- p>.</c->turbo<c- p>.</c->checked<c- p>)</c->
     price <c- o>+=</c-> <c- mf>5000</c-><c- p>;</c->
   <c- k>if</c-> <c- p>(</c->form<c- p>.</c->elements<c- p>.</c->sticker<c- p>.</c->checked<c- p>)</c->
     price <c- o>+=</c-> <c- mf>250</c-><c- p>;</c->
   form<c- p>.</c->elements<c- p>.</c->result<c- p>.</c->value <c- o>=</c-> price<c- p>;</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>form</c-> <c- e>name</c-><c- o>=</c-><c- s>"pricecalc"</c-> <c- e>onsubmit</c-><c- o>=</c-><c- s>"return false"</c-> <c- e>onchange</c-><c- o>=</c-><c- s>"calculate(this)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>fieldset</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>legend</c-><c- p>></c->Work out the price of your car<c- p>&lt;/</c-><c- f>legend</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Base cost: £52000.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Select additional options:<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>ul</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>checkbox</c-> <c- e>name</c-><c- o>=</c-><c- s>brakes</c-><c- p>></c-> Ceramic brakes (£1000)<c- p>&lt;/</c-><c- f>label</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>checkbox</c-> <c- e>name</c-><c- o>=</c-><c- s>radio</c-><c- p>></c-> Satellite radio (£2500)<c- p>&lt;/</c-><c- f>label</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>checkbox</c-> <c- e>name</c-><c- o>=</c-><c- s>turbo</c-><c- p>></c-> Turbo charger (£5000)<c- p>&lt;/</c-><c- f>label</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>checkbox</c-> <c- e>name</c-><c- o>=</c-><c- s>sticker</c-><c- p>></c-> "XZ" sticker (£250)<c- p>&lt;/</c-><c- f>label</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>ul</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Total: £<c- p>&lt;</c-><c- f>output</c-> <c- e>name</c-><c- o>=</c-><c- s>result</c-><c- p>>&lt;/</c-><c- f>output</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>fieldset</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  calculate<c- p>(</c->document<c- p>.</c->forms<c- p>.</c->pricecalc<c- p>);</c->
 <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

  </div>

  <div id="script-type-module-example-1" class="example"><p>次のサンプルは、<code id="the-script-element:the-script-element-13"><a href="#the-script-element">script</a></code>要素が外部<a id="the-script-element:javascript-module-script-4" href="webappapis.html#javascript-module-script">JavaScriptモジュールスクリプト</a>を含めるために使用される方法を示す。<pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>type</c-><c- o>=</c-><c- s>"module"</c-> <c- e>src</c-><c- o>=</c-><c- s>"app.mjs"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>このモジュール、およびそのすべての依存関係（ソースファイル内のJavaScript <code>import</code>文を通して表現される）は、フェッチされる。一度、全体の結果としてモジュールグラフがインポートされ、かつ文書が解析を完了したら、<code>app.mjs</code>のコンテンツは評価される。</p>

   <p>Additionally, if code from another <code id="the-script-element:the-script-element-14"><a href="#the-script-element">script</a></code> element in the same <code id="the-script-element:window"><a href="window-object.html#window">Window</a></code> imports the module from <code>app.mjs</code> (e.g. via <code>import "./app.mjs";</code>), then the same <a id="the-script-element:javascript-module-script-5" href="webappapis.html#javascript-module-script">JavaScript module script</a> created by the former <code id="the-script-element:the-script-element-15"><a href="#the-script-element">script</a></code> element will be imported.</p>

  </div>

  <div id="script-nomodule-example" class="example"><p>次の例は、モダンなユーザーエージェント用の<a id="the-script-element:javascript-module-script-6" href="webappapis.html#javascript-module-script">JavaScriptモジュールスクリプト</a>と古いユーザーエージェント用の<a id="the-script-element:classic-script-11" href="webappapis.html#classic-script">クラシックスクリプト</a>を含める方法を示している：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>type</c-><c- o>=</c-><c- s>"module"</c-> <c- e>src</c-><c- o>=</c-><c- s>"app.mjs"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-> <c- e>nomodule</c-> <c- e>defer</c-> <c- e>src</c-><c- o>=</c-><c- s>"classic-app-bundle.js"</c-><c- p>>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  <p><a href="webappapis.html#javascript-module-script" id="the-script-element:javascript-module-script-7">JavaScriptモジュールスクリプト</a>をサポートするモダンなユーザーエージェントでは、<code id="the-script-element:attr-script-nomodule-6"><a href="#attr-script-nomodule">nomodule</a></code>属性を持つ<code id="the-script-element:the-script-element-16"><a href="#the-script-element">script</a></code>要素は無視され、"<code>module</code>"の<code id="the-script-element:attr-script-type-9"><a href="#attr-script-type">type</a></code>をもつ<code id="the-script-element:the-script-element-17"><a href="#the-script-element">script</a></code>要素がフェッチされ、評価される（<a id="the-script-element:javascript-module-script-8" href="webappapis.html#javascript-module-script">モジュールスクリプト</a>として）。逆に、古いユーザーエージェントは、"<code>module</code>"の<code id="the-script-element:attr-script-type-10"><a href="#attr-script-type">type</a></code>をもつ<code id="the-script-element:the-script-element-18"><a href="#the-script-element">script</a></code>要素を、そのスクリプトタイプを未知のものとして無視するが、<code id="the-script-element:attr-script-nomodule-7"><a href="#attr-script-nomodule">nomodule</a></code>属性を実装しないため、他の<code id="the-script-element:the-script-element-19"><a href="#the-script-element">script</a></code>要素を（<a id="the-script-element:classic-script-12" href="webappapis.html#classic-script">クラシックスクリプト</a>として）フェッチして評価することは問題ない。</p>

  </div>

  <div id="script-type-module-example-2" class="example"><p>次のサンプルは、<code id="the-script-element:the-script-element-20"><a href="#the-script-element">script</a></code>要素が（たとえばニュースサイト上で）より面白い読書体験を生み出すために、文書のテキストで多数の置換を行うインライン<a id="the-script-element:javascript-module-script-9" href="webappapis.html#javascript-module-script">JavaScriptモジュールスクリプト</a>を書くために使用することができる方法を示す：<a href="references.html#refsXKCD1288">[XKCD1288]</a></p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>type</c-><c- o>=</c-><c- s>"module"</c-><c- p>></c->
 <c- k>import</c-> <c- p>{</c-> walkAllTextNodeDescendants <c- p>}</c-> <c- k>from</c-> <c- u>"./dom-utils.mjs"</c-><c- p>;</c->

 <c- a>const</c-> substitutions <c- o>=</c-> <c- k>new</c-> Map<c- p>([</c->
   <c- p>[</c-><c- u>"witnesses"</c-><c- p>,</c-> <c- u>"these dudes I know"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"allegedly"</c-><c- p>,</c-> <c- u>"kinda probably"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"new study"</c-><c- p>,</c-> <c- u>"Tumblr post"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"rebuild"</c-><c- p>,</c-> <c- u>"avenge"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"space"</c-><c- p>,</c-> <c- u>"spaaace"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"Google glass"</c-><c- p>,</c-> <c- u>"Virtual Boy"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"smartphone"</c-><c- p>,</c-> <c- u>"Pokédex"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"electric"</c-><c- p>,</c-> <c- u>"atomic"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"Senator"</c-><c- p>,</c-> <c- u>"Elf-Lord"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"car"</c-><c- p>,</c-> <c- u>"cat"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"election"</c-><c- p>,</c-> <c- u>"eating contest"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"Congressional leaders"</c-><c- p>,</c-> <c- u>"river spirits"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"homeland security"</c-><c- p>,</c-> <c- u>"Homestar Runner"</c-><c- p>]</c->
   <c- p>[</c-><c- u>"could not be reached for comment"</c-><c- p>,</c-> <c- u>"is guilty and everyone knows it"</c-><c- p>]</c->
 <c- p>]);</c->

 <c- a>function</c-> substitute<c- p>(</c->textNode<c- p>)</c-> <c- p>{</c->
   <c- k>for</c-> <c- p>(</c-><c- a>const</c-> <c- p>[</c->before<c- p>,</c-> after<c- p>]</c-> <c- k>of</c-> substitutions<c- p>.</c->entries<c- p>())</c-> <c- p>{</c->
     textNode<c- p>.</c->data <c- o>=</c-> textNode<c- p>.</c->data<c- p>.</c->replace<c- p>(</c-><c- k>new</c-> RegExp<c- p>(</c-><c- sb>`\\b</c-><c- si>${</c->before<c- si>}</c-><c- sb>\\b`</c-><c- p>,</c-> <c- u>"ig"</c-><c- p>),</c-> after<c- p>);</c->
   <c- p>}</c->
 <c- p>}</c->

 walkAllTextNodeDescendants<c- p>(</c->document<c- p>.</c->body<c- p>,</c-> substitute<c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>JavaScriptモジュールスクリプトを使用して得られたいくつかの注目すべき機能は、他のJavaScriptモジュール、デフォルトでstrictモード、およびトップレベル宣言が<a id="the-script-element:global-object" href="webappapis.html#global-object">グローバルオブジェクト</a>に新しいプロパティを導入しない方法から関数をインポートする機能を含む。両方の文書の解析が完了し、およびその依存関係（<code>dom-utils.mjs</code>）がフェッチされかつ評価されるまで、この<code id="the-script-element:the-script-element-21"><a href="#the-script-element">script</a></code>要素が文書に表示されるかを問わず、評価されないことにも注意する。</p>
  </div>

  <div id="json-module-script-example" class="example"><p>The following sample shows how a <a id="the-script-element:json-module-script-2" href="webappapis.html#json-module-script">JSON module script</a> can be imported from inside a <a id="the-script-element:javascript-module-script-10" href="webappapis.html#javascript-module-script">JavaScript module script</a>:</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>type</c-><c- o>=</c-><c- s>"module"</c-><c- p>></c->
 <c- k>import</c-> peopleInSpace <c- k>from</c-> <c- u>"http://api.open-notify.org/astros.json"</c-> assert <c- p>{</c-> type<c- o>:</c-> <c- u>"json"</c-> <c- p>};</c->

 <c- a>const</c-> list <c- o>=</c-> document<c- p>.</c->querySelector<c- p>(</c-><c- u>"#people-in-space"</c-><c- p>);</c->
 <c- k>for</c-> <c- p>(</c-><c- a>const</c-> <c- p>{</c-> craft<c- p>,</c-> name <c- p>}</c-> <c- k>of</c-> peopleInSpace<c- p>.</c->people<c- p>)</c-> <c- p>{</c->
   <c- a>const</c-> li <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- u>"li"</c-><c- p>);</c->
   li<c- p>.</c->textContent <c- o>=</c-> <c- sb>`</c-><c- si>${</c->name<c- si>}</c-><c- sb> / </c-><c- si>${</c->craft<c- si>}</c-><c- sb>`</c-><c- p>;</c->
   list<c- p>.</c->append<c- p>(</c->li<c- p>);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>MIME type checking for module scripts is strict. In order for the fetch of the <a id="the-script-element:json-module-script-3" href="webappapis.html#json-module-script">JSON module script</a> to succeed, the HTTP response must have a <a id="the-script-element:json-mime-type" href="https://triple-underscore.github.io/mimesniff-ja.html#json-mime-type" data-x-internal="json-mime-type">JSON MIME type</a>, for example <code>Content-Type: text/json</code>. On the other hand, if the <code>assert { type: "json" }</code> part of the statement is omitted, it is assumed that the intent is to import a <a id="the-script-element:javascript-module-script-11" href="webappapis.html#javascript-module-script">JavaScript module script</a>, and the fetch will fail if the HTTP response has a MIME type that is not a <a id="the-script-element:javascript-mime-type" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type" data-x-internal="javascript-mime-type">JavaScript MIME type</a>.</p>
  </div>

  

  <h5 id="script-processing-model"><span class="secno">4.12.1.1</span> Processing model<a href="#script-processing-model" class="self-link"></a></h5>

  <p>A <code id="script-processing-model:the-script-element"><a href="#the-script-element">script</a></code> element has several associated pieces of state.</p>

  <p>A <code id="script-processing-model:the-script-element-2"><a href="#the-script-element">script</a></code> element has a flag indicating whether or not it has been <dfn id="already-started">"already started"</dfn>. Initially, <code id="script-processing-model:the-script-element-3"><a href="#the-script-element">script</a></code> elements must have this flag unset (script blocks, when created, are not "already started"). The <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone-ext" id="script-processing-model:concept-node-clone-ext" data-x-internal="concept-node-clone-ext">cloning steps</a> for <code id="script-processing-model:the-script-element-4"><a href="#the-script-element">script</a></code> elements must set the "already started" flag on the copy if it is set on the element being cloned.</p>

  <p>A <code id="script-processing-model:the-script-element-5"><a href="#the-script-element">script</a></code> element has a <dfn id="parser-document">parser document</dfn>, which is either null or a <code id="script-processing-model:document"><a href="dom.html#document">Document</a></code>. Initially, its value must be null. It is set by the <a id="script-processing-model:html-parser" href="parsing.html#html-parser">HTML parser</a> and the <a id="script-processing-model:xml-parser" href="xhtml.html#xml-parser">XML parser</a> on <code id="script-processing-model:the-script-element-6"><a href="#the-script-element">script</a></code> elements they insert, and affects the processing of those elements. <code id="script-processing-model:the-script-element-7"><a href="#the-script-element">script</a></code> elements with non-null <a href="#parser-document" id="script-processing-model:parser-document">parser documents</a> are known as <dfn data-dfn-for="script" id="parser-inserted" data-export="">"parser-inserted"</dfn>.</p>

  <p>A <code id="script-processing-model:the-script-element-8"><a href="#the-script-element">script</a></code> element has a flag indicating whether the element will be <dfn id="non-blocking">"non-blocking"</dfn>. Initially, <code id="script-processing-model:the-script-element-9"><a href="#the-script-element">script</a></code> elements must have this flag set. It is unset by the <a id="script-processing-model:html-parser-2" href="parsing.html#html-parser">HTML parser</a> and the <a id="script-processing-model:xml-parser-2" href="xhtml.html#xml-parser">XML parser</a> on <code id="script-processing-model:the-script-element-10"><a href="#the-script-element">script</a></code> elements they insert. In addition, whenever a <code id="script-processing-model:the-script-element-11"><a href="#the-script-element">script</a></code> element whose <a href="#non-blocking" id="script-processing-model:non-blocking">"non-blocking"</a> flag is set has an <code id="script-processing-model:attr-script-async"><a href="#attr-script-async">async</a></code> content attribute added, the element's <a href="#non-blocking" id="script-processing-model:non-blocking-2">"non-blocking"</a> flag must be unset.</p> 

  <p>A <code id="script-processing-model:the-script-element-12"><a href="#the-script-element">script</a></code> element has a flag indicating whether or not the script block is <dfn id="ready-to-be-parser-executed">"ready to be parser-executed"</dfn>. Initially, <code id="script-processing-model:the-script-element-13"><a href="#the-script-element">script</a></code> elements must have this flag unset (script blocks, when created, are not "ready to be parser-executed"). This flag is used only for elements that are also <a href="#parser-inserted" id="script-processing-model:parser-inserted">"parser-inserted"</a>, to let the parser know when to execute the script.</p>

  <p><dfn id="concept-script-type">The script's type</dfn> for a <code id="script-processing-model:the-script-element-14"><a href="#the-script-element">script</a></code> element is either "<code>classic</code>" or "<code>module</code>". It is determined when the script is <a href="#prepare-a-script" id="script-processing-model:prepare-a-script">prepared</a>, based on the <code id="script-processing-model:attr-script-type"><a href="#attr-script-type">type</a></code> attribute of the element at that time.</p>

  <p>A <code id="script-processing-model:the-script-element-15"><a href="#the-script-element">script</a></code> element has a <dfn id="preparation-time-document">preparation-time document</dfn>, which is a <code id="script-processing-model:document-2"><a href="dom.html#document">Document</a></code> determined near the beginning of the <a href="#prepare-a-script" id="script-processing-model:prepare-a-script-2">prepare a script</a> algorithm. It is used to prevent scripts that move between documents during <a href="#prepare-a-script" id="script-processing-model:prepare-a-script-3">preparation</a> from <a href="#execute-the-script-block" id="script-processing-model:execute-the-script-block">executing</a>.</p>

  <p>A <code id="script-processing-model:the-script-element-16"><a href="#the-script-element">script</a></code> element has a flag indicating whether or not the script is <dfn id="concept-script-external">from an external file</dfn>. It is determined when the script is <a href="#prepare-a-script" id="script-processing-model:prepare-a-script-4">prepared</a>, based on the <code id="script-processing-model:attr-script-src"><a href="#attr-script-src">src</a></code> attribute of the element at that time.</p>

  <p><dfn id="concept-script-script" data-export="">The script's script</dfn> for a <code id="script-processing-model:the-script-element-17"><a href="#the-script-element">script</a></code> element is either null or a <a href="webappapis.html#concept-script" id="script-processing-model:concept-script">script</a> resulting from <a href="#prepare-a-script" id="script-processing-model:prepare-a-script-5">preparing</a> the element. This is set asynchronously after the classic script or module graph is fetched. Once it is set, either to a <a href="webappapis.html#concept-script" id="script-processing-model:concept-script-2">script</a> in the case of success or to null in the case of failure, the fetching algorithms will note that <dfn id="the-script-is-ready">the script is ready</dfn>, which can trigger other actions. The user agent must <a id="script-processing-model:delay-the-load-event" href="parsing.html#delay-the-load-event">delay the load event</a> of the element's <a id="script-processing-model:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> until <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready">the script is ready</a>.</p>

  <hr>

  <p>When a <code id="script-processing-model:the-script-element-18"><a href="#the-script-element">script</a></code> element that is not <a href="#parser-inserted" id="script-processing-model:parser-inserted-2">"parser-inserted"</a> experiences one of the events listed in the following list, the user agent must <a id="script-processing-model:immediately" href="infrastructure.html#immediately">immediately</a> <a href="#prepare-a-script" id="script-processing-model:prepare-a-script-6">prepare</a> the <code id="script-processing-model:the-script-element-19"><a href="#the-script-element">script</a></code> element:</p>

  <ul><li>The <code id="script-processing-model:the-script-element-20"><a href="#the-script-element">script</a></code> element <a id="script-processing-model:becomes-connected" href="infrastructure.html#becomes-connected">becomes connected</a>.<li>The <code id="script-processing-model:the-script-element-21"><a href="#the-script-element">script</a></code> element is <a id="script-processing-model:connected" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">connected</a> and a node or document fragment is <a href="infrastructure.html#nodes-are-inserted" id="script-processing-model:nodes-are-inserted">inserted</a> into the <code id="script-processing-model:the-script-element-22"><a href="#the-script-element">script</a></code> element, after any <code id="script-processing-model:the-script-element-23"><a href="#the-script-element">script</a></code> elements <a href="infrastructure.html#nodes-are-inserted" id="script-processing-model:nodes-are-inserted-2">inserted</a> at that time.<li>The <code id="script-processing-model:the-script-element-24"><a href="#the-script-element">script</a></code> element is <a id="script-processing-model:connected-2" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">connected</a> and has a <code id="script-processing-model:attr-script-src-2"><a href="#attr-script-src">src</a></code> attribute set where previously the element had no such attribute.</ul>

  <p>To <dfn id="prepare-a-script" data-export="">prepare a script</dfn>, the user agent must act as follows:</p>

  <ol><li><p>If the <code id="script-processing-model:the-script-element-25"><a href="#the-script-element">script</a></code> element is marked as having <a href="#already-started" id="script-processing-model:already-started">"already started"</a>, then return. The script is not executed.</p>
   <li><p>Let <var>parser document</var> be the element's <a href="#parser-document" id="script-processing-model:parser-document-2">parser document</a>.<li><p>Set the element's <a href="#parser-document" id="script-processing-model:parser-document-3">parser document</a> to null.</p>

    <p class="note">This is done so that if parser-inserted <code id="script-processing-model:the-script-element-26"><a href="#the-script-element">script</a></code> elements fail to run when the parser tries to run them, e.g. because they are empty or specify an unsupported scripting language, another script can later mutate them and cause them to run again.</p>
   <li><p>If <var>parser document</var> is non-null and the element does not have an <code id="script-processing-model:attr-script-async-2"><a href="#attr-script-async">async</a></code> attribute, then set the element's <a href="#non-blocking" id="script-processing-model:non-blocking-3">"non-blocking"</a> flag to true.</p>

    <p class="note">This is done so that if a parser-inserted <code id="script-processing-model:the-script-element-27"><a href="#the-script-element">script</a></code> element fails to run when the parser tries to run it, but it is later executed after a script dynamically updates it, it will execute in a non-blocking fashion even if the <code id="script-processing-model:attr-script-async-3"><a href="#attr-script-async">async</a></code> attribute isn't set.</p>
   <li><p>Let <var>source text</var> be the element's <a id="script-processing-model:child-text-content" href="https://triple-underscore.github.io/DOM4-ja.html#concept-child-text-content" data-x-internal="child-text-content">child text content</a>.<li id="script-processing-empty"><p>If the element has no <code id="script-processing-model:attr-script-src-3"><a href="#attr-script-src">src</a></code> attribute, and <var>source text</var> is the empty string, then return. The script is not executed.</p>
   <li><p>If the element is not <a id="script-processing-model:connected-3" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">connected</a>, then return. The script is not executed.<li id="script-processing-prepare"><p>If either:</p>

    <ul class="brief"><li>the <code id="script-processing-model:the-script-element-28"><a href="#the-script-element">script</a></code> element has a <code id="script-processing-model:attr-script-type-2"><a href="#attr-script-type">type</a></code> attribute and its value is the empty string, or<li>the <code id="script-processing-model:the-script-element-29"><a href="#the-script-element">script</a></code> element has no <code id="script-processing-model:attr-script-type-3"><a href="#attr-script-type">type</a></code> attribute but it has a <code id="script-processing-model:attr-script-language"><a href="obsolete.html#attr-script-language">language</a></code> attribute and <em>that</em> attribute's value is the empty string, or<li>the <code id="script-processing-model:the-script-element-30"><a href="#the-script-element">script</a></code> element has neither a <code id="script-processing-model:attr-script-type-4"><a href="#attr-script-type">type</a></code> attribute nor a <code id="script-processing-model:attr-script-language-2"><a href="obsolete.html#attr-script-language">language</a></code> attribute, then</ul>

    <p>...let <var>the script block's type string</var> for this <code id="script-processing-model:the-script-element-31"><a href="#the-script-element">script</a></code> element be "<code>text/javascript</code>".</p>

    <p>Otherwise, if the <code id="script-processing-model:the-script-element-32"><a href="#the-script-element">script</a></code> element has a <code id="script-processing-model:attr-script-type-5"><a href="#attr-script-type">type</a></code> attribute, let <var>the script block's type string</var> for this <code id="script-processing-model:the-script-element-33"><a href="#the-script-element">script</a></code> element be the value of that attribute.</p>

    <p>Otherwise, the element has a non-empty <code id="script-processing-model:attr-script-language-3"><a href="obsolete.html#attr-script-language">language</a></code> attribute; let <var>the script block's type string</var> for this <code id="script-processing-model:the-script-element-34"><a href="#the-script-element">script</a></code> element be the concatenation of the string "<code>text/</code>" followed by the value of the <code id="script-processing-model:attr-script-language-4"><a href="obsolete.html#attr-script-language">language</a></code> attribute.</p>
    

    <p class="note">The <code id="script-processing-model:attr-script-language-5"><a href="obsolete.html#attr-script-language">language</a></code> attribute is never conforming, and is always ignored if there is a <code id="script-processing-model:attr-script-type-6"><a href="#attr-script-type">type</a></code> attribute present.</p>

    <p>Determine <a href="#concept-script-type" id="script-processing-model:concept-script-type">the script's type</a> as follows:</p>

    <ul><li>If <var>the script block's type string</var> with <a href="https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace" id="script-processing-model:strip-leading-and-trailing-ascii-whitespace" data-x-internal="strip-leading-and-trailing-ascii-whitespace">leading and trailing ASCII whitespace stripped</a> is a <a id="script-processing-model:javascript-mime-type-essence-match" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type-essence-match" data-x-internal="javascript-mime-type-essence-match">JavaScript MIME type essence match</a>, <a href="#concept-script-type" id="script-processing-model:concept-script-type-2">the script's type</a> is "<code>classic</code>".<li>If <var>the script block's type string</var> is an <a id="script-processing-model:ascii-case-insensitive" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>module</code>", <a href="#concept-script-type" id="script-processing-model:concept-script-type-3">the script's type</a> is "<code>module</code>".<li>If neither of the above conditions are true, then return. No script is executed.</ul>
   <li><p>If <var>parser document</var> is non-null, then set the element's <a href="#parser-document" id="script-processing-model:parser-document-4">parser document</a> back to <var>parser document</var> and set the element's <a href="#non-blocking" id="script-processing-model:non-blocking-4">"non-blocking"</a> flag to false.<li id="script-processing-start"><p>Set the element's <a href="#already-started" id="script-processing-model:already-started-2">"already started"</a> flag.<li><p>Set the element's <a href="#preparation-time-document" id="script-processing-model:preparation-time-document">preparation-time document</a> to its <a id="script-processing-model:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.</p>

   <li><p>If <var>parser document</var> is non-null, and <var>parser document</var> is not equal to the element's <a href="#preparation-time-document" id="script-processing-model:preparation-time-document-2">preparation-time document</a>, then return.<li id="script-processing-noscript"><p>If <a href="webappapis.html#concept-n-noscript" id="script-processing-model:concept-n-noscript">scripting is disabled</a> for the <code id="script-processing-model:the-script-element-35"><a href="#the-script-element">script</a></code> element, then return. The script is not executed.</p>

    <p class="note">The definition of <a href="webappapis.html#concept-n-noscript" id="script-processing-model:concept-n-noscript-2">scripting is disabled</a> means that, amongst others, the following scripts will not execute: scripts in <code id="script-processing-model:xmlhttprequest"><a data-x-internal="xmlhttprequest" href="https://triple-underscore.github.io/XHR-ja.html#xmlhttprequest">XMLHttpRequest</a></code>'s <code id="script-processing-model:dom-xmlhttprequest-responsexml"><a data-x-internal="dom-xmlhttprequest-responsexml" href="https://triple-underscore.github.io/XHR-ja.html#dom-xmlhttprequest-responsexml">responseXML</a></code> documents, scripts in <code id="script-processing-model:domparser"><a href="dynamic-markup-insertion.html#domparser">DOMParser</a></code>-created documents, scripts in documents created by <code id="script-processing-model:xsltprocessor"><a href="infrastructure.html#xsltprocessor">XSLTProcessor</a></code>'s <code id="script-processing-model:dom-xsltprocessor-transformtodocument"><a href="infrastructure.html#dom-xsltprocessor-transformtodocument">transformToDocument</a></code> feature, and scripts that are first inserted by a script into a <code id="script-processing-model:document-3"><a href="dom.html#document">Document</a></code> that was created using the <code id="script-processing-model:dom-domimplementation-createdocument"><a data-x-internal="dom-domimplementation-createdocument" href="https://triple-underscore.github.io/DOM4-ja.htmlcreatedocument">createDocument()</a></code> API. <a href="references.html#refsXHR">[XHR]</a> <a href="references.html#refsDOMPARSING">[DOMPARSING]</a> <a href="references.html#refsXSLTP">[XSLTP]</a> <a href="references.html#refsDOM">[DOM]</a></p>
   <li><p>If the <code id="script-processing-model:the-script-element-36"><a href="#the-script-element">script</a></code> element has a <code id="script-processing-model:attr-script-nomodule"><a href="#attr-script-nomodule">nomodule</a></code> content attribute and <a href="#concept-script-type" id="script-processing-model:concept-script-type-4">the script's type</a> is "<code>classic</code>", then return. The script is not executed.</p>

   <p class="note">This means specifying <code id="script-processing-model:attr-script-nomodule-2"><a href="#attr-script-nomodule">nomodule</a></code> on a <a id="script-processing-model:module-script" href="webappapis.html#module-script">module script</a> has no effect; the algorithm continues onward.</p>
   <li id="script-processing-csp"><p>If the <code id="script-processing-model:the-script-element-37"><a href="#the-script-element">script</a></code> element does not have a <code id="script-processing-model:attr-script-src-4"><a href="#attr-script-src">src</a></code> content attribute, and the <a id="script-processing-model:should-element's-inline-behavior-be-blocked-by-content-security-policy" href="https://triple-underscore.github.io/CSP3-ja.html#should-block-inline" data-x-internal="should-element's-inline-behavior-be-blocked-by-content-security-policy">Should element's inline behavior be blocked by Content Security Policy?</a> algorithm returns "<code>Blocked</code>" when executed upon the <code id="script-processing-model:the-script-element-38"><a href="#the-script-element">script</a></code> element, "<code>script</code>", and <var>source text</var>, then return. The script is not executed. <a href="references.html#refsCSP">[CSP]</a><li id="script-processing-for"><p>If the <code id="script-processing-model:the-script-element-39"><a href="#the-script-element">script</a></code> element has an <code id="script-processing-model:attr-script-event"><a href="obsolete.html#attr-script-event">event</a></code> attribute and a <code id="script-processing-model:attr-script-for"><a href="obsolete.html#attr-script-for">for</a></code> attribute, and <a href="#concept-script-type" id="script-processing-model:concept-script-type-5">the script's type</a> is "<code>classic</code>", then:</p>

    <ol><li><p>Let <var>for</var> be the value of the <code id="script-processing-model:attr-script-for-2"><a href="obsolete.html#attr-script-for">for</a></code> attribute.<li><p>Let <var>event</var> be the value of the <code id="script-processing-model:attr-script-event-2"><a href="obsolete.html#attr-script-event">event</a></code> attribute.<li><p><a id="script-processing-model:strip-leading-and-trailing-ascii-whitespace-2" href="https://triple-underscore.github.io/infra-ja.html#strip-leading-and-trailing-ascii-whitespace" data-x-internal="strip-leading-and-trailing-ascii-whitespace">Strip leading and trailing ASCII whitespace</a> from <var>event</var> and <var>for</var>.<li><p>If <var>for</var> is not an <a id="script-processing-model:ascii-case-insensitive-2" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for the string "<code>window</code>", then return. The script is not executed.<li><p>If <var>event</var> is not an <a id="script-processing-model:ascii-case-insensitive-3" href="https://triple-underscore.github.io/infra-ja.html#ascii-case-insensitive" data-x-internal="ascii-case-insensitive">ASCII case-insensitive</a> match for either the string "<code>onload</code>" or the string "<code>onload()</code>", then return. The script is not executed.</ol>
   <li id="script-processing-encoding"><p>If the <code id="script-processing-model:the-script-element-40"><a href="#the-script-element">script</a></code> element has a <code id="script-processing-model:attr-script-charset"><a href="obsolete.html#attr-script-charset">charset</a></code> attribute, then let <var>encoding</var> be the result of <a id="script-processing-model:getting-an-encoding" href="https://triple-underscore.github.io/Encoding-ja.html#concept-encoding-get" data-x-internal="getting-an-encoding">getting an encoding</a> from the value of the <code id="script-processing-model:attr-script-charset-2"><a href="obsolete.html#attr-script-charset">charset</a></code> attribute.</p>

    <p>If the <code id="script-processing-model:the-script-element-41"><a href="#the-script-element">script</a></code> element does not have a <code id="script-processing-model:attr-script-charset-3"><a href="obsolete.html#attr-script-charset">charset</a></code> attribute, or if <a id="script-processing-model:getting-an-encoding-2" href="https://triple-underscore.github.io/Encoding-ja.html#concept-encoding-get" data-x-internal="getting-an-encoding">getting an encoding</a> failed, let <var>encoding</var> be the same as <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-document-encoding" id="script-processing-model:document's-character-encoding" data-x-internal="document's-character-encoding">the encoding</a> of the <code id="script-processing-model:the-script-element-42"><a href="#the-script-element">script</a></code> element's <a id="script-processing-model:node-document-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.</p>

    <p class="note">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-6">the script's type</a> is "<code>module</code>", this encoding will be ignored.</p>
   <li><p>Let <var>classic script CORS setting</var> be the current state of the element's <code id="script-processing-model:attr-script-crossorigin"><a href="#attr-script-crossorigin">crossorigin</a></code> content attribute.<li><p>Let <var>module script credentials mode</var> be the <a id="script-processing-model:cors-settings-attribute-credentials-mode" href="urls-and-fetching.html#cors-settings-attribute-credentials-mode">CORS settings attribute credentials mode</a> for the element's <code id="script-processing-model:attr-script-crossorigin-2"><a href="#attr-script-crossorigin">crossorigin</a></code> content attribute.</p>

   <li><p>Let <var>cryptographic nonce</var> be the element's <a id="script-processing-model:cryptographicnonce" href="urls-and-fetching.html#cryptographicnonce">[[CryptographicNonce]]</a> internal slot's value.<li><p>If the <code id="script-processing-model:the-script-element-43"><a href="#the-script-element">script</a></code> element has an <code id="script-processing-model:attr-script-integrity"><a href="#attr-script-integrity">integrity</a></code> attribute, then let <var>integrity metadata</var> be that attribute's value.</p>

    <p>Otherwise, let <var>integrity metadata</var> be the empty string.</p>
   <li><p>Let <var>referrer policy</var> be the current state of the element's <code id="script-processing-model:attr-script-referrerpolicy"><a href="#attr-script-referrerpolicy">referrerpolicy</a></code> content attribute.<li><p>Let <var>parser metadata</var> be "<code>parser-inserted</code>" if the <code id="script-processing-model:the-script-element-44"><a href="#the-script-element">script</a></code> element is <a href="#parser-inserted" id="script-processing-model:parser-inserted-3">"parser-inserted"</a>, and "<code>not-parser-inserted</code>" otherwise.<li><p>Let <var>options</var> be a <a id="script-processing-model:script-fetch-options" href="webappapis.html#script-fetch-options">script fetch options</a> whose <a href="webappapis.html#concept-script-fetch-options-nonce" id="script-processing-model:concept-script-fetch-options-nonce">cryptographic nonce</a> is <var>cryptographic nonce</var>, <a href="webappapis.html#concept-script-fetch-options-integrity" id="script-processing-model:concept-script-fetch-options-integrity">integrity metadata</a> is <var>integrity metadata</var>, <a href="webappapis.html#concept-script-fetch-options-parser" id="script-processing-model:concept-script-fetch-options-parser">parser metadata</a> is <var>parser metadata</var>, <a href="webappapis.html#concept-script-fetch-options-credentials" id="script-processing-model:concept-script-fetch-options-credentials">credentials mode</a> is <var>module script credentials mode</var>, and <a href="webappapis.html#concept-script-fetch-options-referrer-policy" id="script-processing-model:concept-script-fetch-options-referrer-policy">referrer policy</a> is <var>referrer policy</var>.<li><p>Let <var>settings object</var> be the element's <a id="script-processing-model:node-document-4" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="script-processing-model:relevant-settings-object" href="webappapis.html#relevant-settings-object">relevant settings object</a>.<li id="script-processing-src-prepare"><p>If the element has a <code id="script-processing-model:attr-script-src-5"><a href="#attr-script-src">src</a></code> content attribute, then:</p>

    <ol><li><p>Let <var>src</var> be the value of the element's <code id="script-processing-model:attr-script-src-6"><a href="#attr-script-src">src</a></code> attribute.<li><p>If <var>src</var> is the empty string, <a id="script-processing-model:queue-a-task" href="webappapis.html#queue-a-task">queue a task</a> to <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="script-processing-model:concept-event-fire" data-x-internal="concept-event-fire">fire an event</a> named <code id="script-processing-model:event-error"><a href="indices.html#event-error">error</a></code> at the element, and return.<li><p>Set the element's <a href="#concept-script-external" id="script-processing-model:concept-script-external">from an external file</a> flag.<li><p><a href="urls-and-fetching.html#parse-a-url" id="script-processing-model:parse-a-url">Parse</a> <var>src</var> relative to the element's <a id="script-processing-model:node-document-5" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If the previous step failed, <a id="script-processing-model:queue-a-task-2" href="webappapis.html#queue-a-task">queue a task</a> to <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="script-processing-model:concept-event-fire-2" data-x-internal="concept-event-fire">fire an event</a> named <code id="script-processing-model:event-error-2"><a href="indices.html#event-error">error</a></code> at the element, and return. Otherwise, let <var>url</var> be the <a id="script-processing-model:resulting-url-record" href="urls-and-fetching.html#resulting-url-record">resulting URL record</a>.<li><p>Switch on <a href="#concept-script-type" id="script-processing-model:concept-script-type-7">the script's type</a>:</p>

      <dl class="switch"><dt>"<code>classic</code>"<dd><p><a id="script-processing-model:fetch-a-classic-script" href="webappapis.html#fetch-a-classic-script">Fetch a classic script</a> given <var>url</var>, <var>settings object</var>, <var>options</var>, <var>classic script CORS setting</var>, and <var>encoding</var>.</p>
       <dt>"<code>module</code>"<dd><p><a id="script-processing-model:fetch-a-module-script-tree" href="webappapis.html#fetch-a-module-script-tree">Fetch an external module script graph</a> given <var>url</var>, <var>settings object</var>, and <var>options</var>.</p>
       </dl>

      <p>When the chosen algorithm asynchronously completes, set <a href="#concept-script-script" id="script-processing-model:concept-script-script">the script's script</a> to the result. At that time, <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-2">the script is ready</a>.</p>

      <p>For performance reasons, user agents may start fetching the classic script or module graph (as defined above) as soon as the <code id="script-processing-model:attr-script-src-7"><a href="#attr-script-src">src</a></code> attribute is set, instead, in the hope that the element will be inserted into the document (and that the <code id="script-processing-model:attr-script-crossorigin-3"><a href="#attr-script-crossorigin">crossorigin</a></code> attribute won't change value in the meantime). Either way, once the element is <a href="infrastructure.html#insert-an-element-into-a-document" id="script-processing-model:insert-an-element-into-a-document">inserted into the document</a>, the load must have started as described in this step. If the UA performs such prefetching, but the element is never inserted in the document, or the <code id="script-processing-model:attr-script-src-8"><a href="#attr-script-src">src</a></code> attribute is dynamically changed, or the <code id="script-processing-model:attr-script-crossorigin-4"><a href="#attr-script-crossorigin">crossorigin</a></code> attribute is dynamically changed, then the user agent will not execute the script so obtained, and the fetching process will have been effectively wasted.</p>
     </ol>
   <li id="establish-script-block-source"><p>If the element does not have a <code id="script-processing-model:attr-script-src-9"><a href="#attr-script-src">src</a></code> content attribute, run these substeps:</p>

    <ol><li><p>Let <var>base URL</var> be the <code id="script-processing-model:the-script-element-45"><a href="#the-script-element">script</a></code> element's <a id="script-processing-model:node-document-6" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="script-processing-model:document-base-url" href="urls-and-fetching.html#document-base-url">document base URL</a>.<li><p>Switch on <a href="#concept-script-type" id="script-processing-model:concept-script-type-8">the script's type</a>:</p>

      <dl class="switch"><dt>"<code>classic</code>"<dd><ol><li><p>Let <var>script</var> be the result of <a id="script-processing-model:creating-a-classic-script" href="webappapis.html#creating-a-classic-script">creating a classic script</a> using <var>source text</var>, <var>settings object</var>, <var>base URL</var>, and <var>options</var>.<li><p>Set <a href="#concept-script-script" id="script-processing-model:concept-script-script-2">the script's script</a> to <var>script</var>.<li><p><a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-3">The script is ready</a>.</ol>
       <dt>"<code>module</code>"<dd><ol><li><p><a id="script-processing-model:fetch-an-inline-module-script-graph" href="webappapis.html#fetch-an-inline-module-script-graph">Fetch an inline module script graph</a>, given <var>source text</var>, <var>base URL</var>, <var>settings object</var>, and <var>options</var>. When this asynchronously completes, set <a href="#concept-script-script" id="script-processing-model:concept-script-script-3">the script's script</a> to the result. At that time, <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-4">the script is ready</a>.</ol>
       </dl>
     </ol>
   <li><p>Then, follow the first of the following options that describes the situation:</p>

    <dl class="switch"><dt id="script-processing-defer">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-9">the script's type</a> is "<code>classic</code>", and the element has a <code id="script-processing-model:attr-script-src-10"><a href="#attr-script-src">src</a></code> attribute, and the element has a <code id="script-processing-model:attr-script-defer"><a href="#attr-script-defer">defer</a></code> attribute, and the element is <a href="#parser-inserted" id="script-processing-model:parser-inserted-4">"parser-inserted"</a>, and the element does not have an <code id="script-processing-model:attr-script-async-4"><a href="#attr-script-async">async</a></code> attribute<dt id="script-processing-module-noasync-parser-inserted">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-10">the script's type</a> is "<code>module</code>", and the element is <a href="#parser-inserted" id="script-processing-model:parser-inserted-5">"parser-inserted"</a>, and the element does not have an <code id="script-processing-model:attr-script-async-5"><a href="#attr-script-async">async</a></code> attribute<dd><p>Add the element to the end of the <dfn id="list-of-scripts-that-will-execute-when-the-document-has-finished-parsing">list of scripts that will execute when the document has finished parsing</dfn> associated with the <code id="script-processing-model:document-4"><a href="dom.html#document">Document</a></code> of the parser that created the element.</p>

      <p>When <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-5">the script is ready</a>, set the element's <a href="#ready-to-be-parser-executed" id="script-processing-model:ready-to-be-parser-executed">"ready to be parser-executed"</a> flag. The parser will handle executing the script.</p>
     <dt id="script-processing-parser-inserted">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-11">the script's type</a> is "<code>classic</code>", and the element has a <code id="script-processing-model:attr-script-src-11"><a href="#attr-script-src">src</a></code> attribute, and the element is <a href="#parser-inserted" id="script-processing-model:parser-inserted-6">"parser-inserted"</a>, and the element does not have an <code id="script-processing-model:attr-script-async-6"><a href="#attr-script-async">async</a></code> attribute<dd><p>The element is the <a href="#pending-parsing-blocking-script" id="script-processing-model:pending-parsing-blocking-script">pending parsing-blocking script</a> of the <code id="script-processing-model:document-5"><a href="dom.html#document">Document</a></code> of the parser that created the element. (There can only be one such script per <code id="script-processing-model:document-6"><a href="dom.html#document">Document</a></code> at a time.)</p>

      <p>When <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-6">the script is ready</a>, set the element's <a href="#ready-to-be-parser-executed" id="script-processing-model:ready-to-be-parser-executed-2">"ready to be parser-executed"</a> flag. The parser will handle executing the script.</p>
     <dt id="script-processing-src-sync">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-12">the script's type</a> is "<code>classic</code>", and the element has a <code id="script-processing-model:attr-script-src-12"><a href="#attr-script-src">src</a></code> attribute, and the element does not have an <code id="script-processing-model:attr-script-async-7"><a href="#attr-script-async">async</a></code> attribute, and the element does not have the <a href="#non-blocking" id="script-processing-model:non-blocking-5">"non-blocking"</a> flag set<dt id="script-processing-module-noasync">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-13">the script's type</a> is "<code>module</code>", and the element does not have an <code id="script-processing-model:attr-script-async-8"><a href="#attr-script-async">async</a></code> attribute, and the element does not have the <a href="#non-blocking" id="script-processing-model:non-blocking-6">"non-blocking"</a> flag set<dd><p>Add the element to the end of the <dfn id="list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will execute in order as soon as possible</dfn> associated with the element's <a href="#preparation-time-document" id="script-processing-model:preparation-time-document-3">preparation-time document</a>.</p>

      <p>When <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-7">the script is ready</a>, run the following steps:</p>

      <ol><li><p>If the element is not now the first element in the <a href="#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible">list of scripts that will execute in order as soon as possible</a> to which it was added above, then mark the element as ready but return without executing the script yet.<li><p><i>Execution</i>: <a href="#execute-the-script-block" id="script-processing-model:execute-the-script-block-2">Execute the script block</a> corresponding to the first script element in this <a href="#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-2">list of scripts that will execute in order as soon as possible</a>.<li><p>Remove the first element from this <a href="#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-3">list of scripts that will execute in order as soon as possible</a>.<li><p>If this <a href="#list-of-scripts-that-will-execute-in-order-as-soon-as-possible" id="script-processing-model:list-of-scripts-that-will-execute-in-order-as-soon-as-possible-4">list of scripts that will execute in order as soon as possible</a> is still not empty and the first entry has already been marked as ready, then jump back to the step labeled <i>execution</i>.</ol>
     <dt id="script-processing-src">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-14">the script's type</a> is "<code>classic</code>", and the element has a <code id="script-processing-model:attr-script-src-13"><a href="#attr-script-src">src</a></code> attribute<dt id="script-processing-module-async">If <a href="#concept-script-type" id="script-processing-model:concept-script-type-15">the script's type</a> is "<code>module</code>"<dd><p>The element must be added to the <dfn id="set-of-scripts-that-will-execute-as-soon-as-possible">set of scripts that will execute as soon as possible</dfn> of the element's <a href="#preparation-time-document" id="script-processing-model:preparation-time-document-4">preparation-time document</a>.</p>

      <p>When <a href="#the-script-is-ready" id="script-processing-model:the-script-is-ready-8">the script is ready</a>, <a href="#execute-the-script-block" id="script-processing-model:execute-the-script-block-3">execute the script block</a> and then remove the element from the <a href="#set-of-scripts-that-will-execute-as-soon-as-possible" id="script-processing-model:set-of-scripts-that-will-execute-as-soon-as-possible">set of scripts that will execute as soon as possible</a>.</p>
     <dt id="script-processing-style-delayed">If the element does not have a <code id="script-processing-model:attr-script-src-14"><a href="#attr-script-src">src</a></code> attribute, and the element is <a href="#parser-inserted" id="script-processing-model:parser-inserted-7">"parser-inserted"</a>, and either the parser that created the <code id="script-processing-model:the-script-element-46"><a href="#the-script-element">script</a></code> is an <a id="script-processing-model:xml-parser-3" href="xhtml.html#xml-parser">XML parser</a> or it's an <a id="script-processing-model:html-parser-3" href="parsing.html#html-parser">HTML parser</a> whose <a id="script-processing-model:script-nesting-level" href="parsing.html#script-nesting-level">script nesting level</a> is not greater than one, and the element's <a href="#parser-document" id="script-processing-model:parser-document-5">parser document</a> <a id="script-processing-model:has-a-style-sheet-that-is-blocking-scripts" href="semantics.html#has-a-style-sheet-that-is-blocking-scripts">has a style sheet that is blocking scripts</a><dd><p>The element is the <a href="#pending-parsing-blocking-script" id="script-processing-model:pending-parsing-blocking-script-2">pending parsing-blocking script</a> of its <a href="#parser-document" id="script-processing-model:parser-document-6">parser document</a>. (There can only be one such script per <code id="script-processing-model:document-7"><a href="dom.html#document">Document</a></code> at a time.)</p>

      <p>Set the element's <a href="#ready-to-be-parser-executed" id="script-processing-model:ready-to-be-parser-executed-3">"ready to be parser-executed"</a> flag. The parser will handle executing the script.</p>
     <dt id="script-processing-inline">そうでなければ<dd><a id="script-processing-model:immediately-2" href="infrastructure.html#immediately">Immediately</a> <a href="#execute-the-script-block" id="script-processing-model:execute-the-script-block-4">execute the script block</a>, even if other scripts are already executing.</dl>
   </ol>

  <p>The <dfn id="pending-parsing-blocking-script">pending parsing-blocking script</dfn> of a <code id="script-processing-model:document-8"><a href="dom.html#document">Document</a></code> is used by the <code id="script-processing-model:document-9"><a href="dom.html#document">Document</a></code>'s parser(s).</p>

  <p class="note">If a <code id="script-processing-model:the-script-element-47"><a href="#the-script-element">script</a></code> element that blocks a parser gets moved to another <code id="script-processing-model:document-10"><a href="dom.html#document">Document</a></code> before it would normally have stopped blocking that parser, it nonetheless continues blocking that parser until the condition that causes it to be blocking the parser no longer applies (e.g., if the script is a <a href="#pending-parsing-blocking-script" id="script-processing-model:pending-parsing-blocking-script-3">pending parsing-blocking script</a> because the original <code id="script-processing-model:document-11"><a href="dom.html#document">Document</a></code> <a id="script-processing-model:has-a-style-sheet-that-is-blocking-scripts-2" href="semantics.html#has-a-style-sheet-that-is-blocking-scripts">has a style sheet that is blocking scripts</a> when it was parsed, but then the script is moved to another <code id="script-processing-model:document-12"><a href="dom.html#document">Document</a></code> before the blocking style sheet(s) loaded, the script still blocks the parser until the style sheets are all loaded, at which time the script executes and the parser is unblocked).</p>

  

  <p>To <dfn id="execute-the-script-block">execute a script block</dfn> given a <code id="script-processing-model:the-script-element-48"><a href="#the-script-element">script</a></code> element <var>scriptElement</var>:</p>

  <ol><li><p>Let <var>document</var> be <var>scriptElement</var>'s <a id="script-processing-model:node-document-7" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>.<li><p>If <var>scriptElement</var>'s <a href="#preparation-time-document" id="script-processing-model:preparation-time-document-5">preparation-time document</a> is not equal to <var>document</var>, then return.<li><p>If <a href="#concept-script-script" id="script-processing-model:concept-script-script-4">the script's script</a> is null for <var>scriptElement</var>, then <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="script-processing-model:concept-event-fire-3" data-x-internal="concept-event-fire">fire an event</a> named <code id="script-processing-model:event-error-3"><a href="indices.html#event-error">error</a></code> at <var>scriptElement</var>, and return.<li><p>If <var>scriptElement</var> is <a href="#concept-script-external" id="script-processing-model:concept-script-external-2">from an external file</a>, or <a href="#concept-script-type" id="script-processing-model:concept-script-type-16">the script's type</a> for <var>scriptElement</var> is "<code>module</code>", then increment <var>document</var>'s <a id="script-processing-model:ignore-destructive-writes-counter" href="dynamic-markup-insertion.html#ignore-destructive-writes-counter">ignore-destructive-writes counter</a>.<li><p>Switch on <a href="#concept-script-type" id="script-processing-model:concept-script-type-17">the script's type</a> for <var>scriptElement</var>:</p>

    <dl class="switch"><dt>"<code>classic</code>"<dd><ol><li><p>Let <var>oldCurrentScript</var> be the value to which <var>document</var>'s <code id="script-processing-model:dom-document-currentscript"><a href="dom.html#dom-document-currentscript">currentScript</a></code> object was most recently set.<li><p>If <var>scriptElement</var>'s <a id="script-processing-model:root" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root" data-x-internal="root">root</a> is <em>not</em> a <a id="script-processing-model:shadow-root" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-root" data-x-internal="shadow-root">shadow root</a>, then set <var>document</var>'s <code id="script-processing-model:dom-document-currentscript-2"><a href="dom.html#dom-document-currentscript">currentScript</a></code> attribute to <var>scriptElement</var>. Otherwise, set it to null.</p>

        <p class="note">This does not use the <a id="script-processing-model:in-a-document-tree" href="https://triple-underscore.github.io/DOM4-ja.html#in-a-document" data-x-internal="in-a-document-tree">in a document tree</a> check, as <var>scriptElement</var> could have been removed from the document prior to execution, and in that scenario <code id="script-processing-model:dom-document-currentscript-3"><a href="dom.html#dom-document-currentscript">currentScript</a></code> still needs to point to it.</p>
       <li><p><a href="webappapis.html#run-a-classic-script" id="script-processing-model:run-a-classic-script">Run the classic script</a> given by <a href="#concept-script-script" id="script-processing-model:concept-script-script-5">the script's script</a> for <var>scriptElement</var>.<li><p>Set <var>document</var>'s <code id="script-processing-model:dom-document-currentscript-4"><a href="dom.html#dom-document-currentscript">currentScript</a></code> attribute to <var>oldCurrentScript</var>.</ol>
     <dt>"<code>module</code>"<dd><ol><li><p>Assert: <var>document</var>'s <code id="script-processing-model:dom-document-currentscript-5"><a href="dom.html#dom-document-currentscript">currentScript</a></code> attribute is null.<li><p><a href="webappapis.html#run-a-module-script" id="script-processing-model:run-a-module-script">Run the module script</a> given by <a href="#concept-script-script" id="script-processing-model:concept-script-script-6">the script's script</a> for <var>scriptElement</var>.</ol>
     </dl>
   <li><p>Decrement the <a id="script-processing-model:ignore-destructive-writes-counter-2" href="dynamic-markup-insertion.html#ignore-destructive-writes-counter">ignore-destructive-writes counter</a> of <var>document</var>, if it was incremented in the earlier step.<li><p>If <var>scriptElement</var> is <a href="#concept-script-external" id="script-processing-model:concept-script-external-3">from an external file</a>, then <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="script-processing-model:concept-event-fire-4" data-x-internal="concept-event-fire">fire an event</a> named <code id="script-processing-model:event-load"><a href="indices.html#event-load">load</a></code> at <var>scriptElement</var>.</ol>

  


  <h5 id="scriptingLanguages"><span class="secno">4.12.1.2</span> スクリプト言語<a href="#scriptingLanguages" class="self-link"></a></h5>

  <p>User agents are not required to support JavaScript. This standard needs to be updated if a language other than JavaScript comes along and gets similar wide adoption by web browsers. Until such a time, implementing other languages is in conflict with this standard, given the processing model defined for the <code id="scriptingLanguages:the-script-element"><a href="#the-script-element">script</a></code> element.</p>

  <p>サーバーはJavaScriptリソースに<code id="scriptingLanguages:text/javascript"><a href="indices.html#text/javascript">text/javascript</a></code>を使用すべきである。サーバーは、JavaScriptリソースに他の<a href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type" id="scriptingLanguages:javascript-mime-type" data-x-internal="javascript-mime-type">JavaScript MIMEタイプ</a>を使用すべきではなく、非<a href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type" id="scriptingLanguages:javascript-mime-type-2" data-x-internal="javascript-mime-type">JavaScript MIMEタイプ</a>を使用してはならない。</p>

  

  <p>For external JavaScript resources, MIME type parameters in `<code id="scriptingLanguages:content-type"><a href="urls-and-fetching.html#content-type">Content-Type</a></code>` headers are generally ignored. (In some cases the `<code>charset</code>` parameter has an effect.) However, for the <code id="scriptingLanguages:the-script-element-2"><a href="#the-script-element">script</a></code> element's <code id="scriptingLanguages:attr-script-type"><a href="#attr-script-type">type</a></code> attribute they are significant; it uses the <a id="scriptingLanguages:javascript-mime-type-essence-match" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type-essence-match" data-x-internal="javascript-mime-type-essence-match">JavaScript MIME type essence match</a> concept.</p>

  <p class="note">For example, scripts with their <code id="scriptingLanguages:attr-script-type-2"><a href="#attr-script-type">type</a></code> attribute set to "<code>text/javascript; charset=utf-8</code>" will not be evaluated, even though that is a valid <a id="scriptingLanguages:javascript-mime-type-3" href="https://triple-underscore.github.io/mimesniff-ja.html#javascript-mime-type" data-x-internal="javascript-mime-type">JavaScript MIME type</a> when parsed.</p>

  <p>Furthermore, again for external JavaScript resources, special considerations apply around `<code id="scriptingLanguages:content-type-2"><a href="urls-and-fetching.html#content-type">Content-Type</a></code>` header processing as detailed in the <a href="#prepare-a-script" id="scriptingLanguages:prepare-a-script">prepare a script</a> algorithm and <cite>Fetch</cite>. <a href="references.html#refsFETCH">[FETCH]</a></p>


  <h5 id="restrictions-for-contents-of-script-elements"><span class="secno">4.12.1.3</span> <dfn><code>script</code>要素のコンテンツの制約</dfn><a href="#restrictions-for-contents-of-script-elements" class="self-link"></a></h5>

  <p class="note">The easiest and safest way to avoid the rather strange restrictions described in this section is to always escape an ASCII case-insensitive match for "<code>&lt;!--</code>" as "<code>\x3C!--</code>", "<code>&lt;script</code>" as "<code>\x3Cscript</code>", and "<code>&lt;/script</code>" as "<code>\x3C/script</code>" when these sequences appear in literals in scripts (e.g. in strings, regular expressions, or comments), and to avoid writing code that uses such constructs in expressions. この節の制限がトリガーになりやすい落とし穴を回避する：すなわち、歴史的な理由のために、HTMLにおける<code id="restrictions-for-contents-of-script-elements:the-script-element"><a href="#the-script-element">script</a></code>ブロックの解析は、これらのシーケンスを考えた場合に直観的でない働きをする奇妙で風変わりな慣習である。</p>

  <p><code id="restrictions-for-contents-of-script-elements:the-script-element-2"><a href="#the-script-element">script</a></code>要素の<a id="restrictions-for-contents-of-script-elements:descendant-text-content" href="https://triple-underscore.github.io/DOM4-ja.html#concept-descendant-text-content" data-x-internal="descendant-text-content">子孫テキストコンテンツ</a>は、Unicodeの文字セットである次のABNFの<code>script</code>生成物と一致しなければならない。<a href="references.html#refsABNF">[ABNF]</a></p>

  <pre><code class='abnf'><c- nc>script</c->        <c- o>=</c-> <c- nc>outer</c-> <c- o>*</c-><c- p>(</c-> <c- nc>comment-open</c-> <c- nc>inner</c-> <c- nc>comment-close</c-> <c- nc>outer</c-> <c- p>)</c->

<c- nc>outer</c->         <c- o>=</c-> &lt; <c- nc>any</c-> <c- nc>string</c-> <c- nc>that</c-> <c- nc>doesn</c->'t <c- nc>contain</c-> a <c- nc>substring</c-> <c- nc>that</c-> <c- nc>matches</c-> <c- nc>not-in-outer</c-> >
<c- nc>not-in-outer</c->  <c- o>=</c-> <c- nc>comment-open</c->
<c- nc>inner</c->         <c- o>=</c-> &lt; <c- nc>any</c-> <c- nc>string</c-> <c- nc>that</c-> <c- nc>doesn</c->'t <c- nc>contain</c-> a <c- nc>substring</c-> <c- nc>that</c-> <c- nc>matches</c-> <c- nc>not-in-inner</c-> >
<c- nc>not-in-inner</c->  <c- o>=</c-> <c- nc>comment-close</c-> <c- o>/</c-> <c- nc>script-open</c->

<c- nc>comment-open</c->  <c- o>=</c-> <c- l>"&lt;!--"</c->
<c- nc>comment-close</c-> <c- o>=</c-> <c- l>"-->"</c->
<c- nc>script-open</c->   <c- o>=</c-> <c- l>"&lt;"</c-> s c r i p t <c- nc>tag-end</c->

s             <c- o>=</c->  <c- l>%x0053</c-> <c- c1>; U+0053 LATIN CAPITAL LETTER S</c->
s             <c- o>=/</c-> <c- l>%x0073</c-> <c- c1>; U+0073 LATIN SMALL LETTER S</c->
c             <c- o>=</c->  <c- l>%x0043</c-> <c- c1>; U+0043 LATIN CAPITAL LETTER C</c->
c             <c- o>=/</c-> <c- l>%x0063</c-> <c- c1>; U+0063 LATIN SMALL LETTER C</c->
r             <c- o>=</c->  <c- l>%x0052</c-> <c- c1>; U+0052 LATIN CAPITAL LETTER R</c->
r             <c- o>=/</c-> <c- l>%x0072</c-> <c- c1>; U+0072 LATIN SMALL LETTER R</c->
i             <c- o>=</c->  <c- l>%x0049</c-> <c- c1>; U+0049 LATIN CAPITAL LETTER I</c->
i             <c- o>=/</c-> <c- l>%x0069</c-> <c- c1>; U+0069 LATIN SMALL LETTER I</c->
p             <c- o>=</c->  <c- l>%x0050</c-> <c- c1>; U+0050 LATIN CAPITAL LETTER P</c->
p             <c- o>=/</c-> <c- l>%x0070</c-> <c- c1>; U+0070 LATIN SMALL LETTER P</c->
t             <c- o>=</c->  <c- l>%x0054</c-> <c- c1>; U+0054 LATIN CAPITAL LETTER T</c->
t             <c- o>=/</c-> <c- l>%x0074</c-> <c- c1>; U+0074 LATIN SMALL LETTER T</c->

<c- nc>tag-end</c->       <c- o>=</c->  <c- l>%x0009</c-> <c- c1>; U+0009 CHARACTER TABULATION (tab)</c->
<c- nc>tag-end</c->       <c- o>=/</c-> <c- l>%x000A</c-> <c- c1>; U+000A LINE FEED (LF)</c->
<c- nc>tag-end</c->       <c- o>=/</c-> <c- l>%x000C</c-> <c- c1>; U+000C FORM FEED (FF)</c->
<c- nc>tag-end</c->       <c- o>=/</c-> <c- l>%x0020</c-> <c- c1>; U+0020 SPACE</c->
<c- nc>tag-end</c->       <c- o>=/</c-> <c- l>%x002F</c-> <c- c1>; U+002F SOLIDUS (/)</c->
<c- nc>tag-end</c->       <c- o>=/</c-> <c- l>%x003E</c-> <c- c1>; U+003E GREATER-THAN SIGN (>)</c-></code></pre>

  <p><code id="restrictions-for-contents-of-script-elements:the-script-element-3"><a href="#the-script-element">script</a></code>要素が<a href="#inline-documentation-for-external-scripts" id="restrictions-for-contents-of-script-elements:inline-documentation-for-external-scripts">スクリプト文書</a>を含む場合、以下の節で記述されるように、要素のコンテンツのさらなる制約がある。</p>

  <div class="example"><p>以下のスクリプトは、この問題を示している。このように、文字列が含まれているスクリプトがあるとする：</p>

   <pre><code class='js'><c- a>const</c-> example <c- o>=</c-> <c- t>'Consider this string: &lt;!-- &lt;script>'</c-><c- p>;</c->
console<c- p>.</c->log<c- p>(</c->example<c- p>);</c-></code></pre>

   <p>これが<code id="restrictions-for-contents-of-script-elements:the-script-element-4"><a href="#the-script-element">script</a></code>ブロックで直接この文字列を入れていた場合、上記の制限に違反しない。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>const</c-> example <c- o>=</c-> <c- t>'Consider this string: &lt;!-- &lt;script>'</c-><c- p>;</c->
  console<c- p>.</c->log<c- p>(</c->example<c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>しかし、より大きな問題かつ、スクリプトがそれらの制限に違反しない理由は、実際にスクリプトが奇妙に解析されるだろうということである。<em>上記のスクリプトブロックは終了していない</em>。それは、実際には依然として<code id="restrictions-for-contents-of-script-elements:the-script-element-5"><a href="#the-script-element">script</a></code>ブロックの一部であるこのスニペットにおいて"<code>&lt;/script></code>"終了タグのように見えるものである。（スクリプトが終了していないため）スクリプトは実行しない。スクリプトが何らかの形で実行した場合、以下のようにマークアップが見えた場合、（ここで強調される）スクリプトが妥当なJavaScriptでないので、スクリプトは失敗するだろう：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-><c- p>></c-><mark>
  <c- a>const</c-> example <c- o>=</c-> <c- t>'Consider this string: &lt;!-- &lt;script>'</c-><c- p>;</c->
  console<c- p>.</c->log<c- p>(</c->example<c- p>);</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- c>&lt;!-- despite appearances, this is actually part of the script still! --></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- p>...</c-> <c- c1>// this is the same script block still...</c->
</mark><c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>ここで起こっていることはレガシーな理由のために、HTMLにおける<code id="restrictions-for-contents-of-script-elements:the-script-element-6"><a href="#the-script-element">script</a></code>要素で"<code>&lt;!--</code>"および"<code>&lt;script</code>"文字列は、パーサーがブロックを閉じる検討するためにバランスをとる必要がある。</p>

   <p>この節の最初に述べたように、問題の文字列をエスケープすることによって、問題は完全に回避されている：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-><c- p>></c-><mark>
  <c- c1>// Note: `\x3C` is an escape sequence for `&lt;`.</c->
  <c- a>const</c-> example <c- o>=</c-> <c- t>'Consider this string: \x3C!-- \x3Cscript>'</c-><c- p>;</c->
  console<c- p>.</c->log<c- p>(</c->example<c- p>);</c->
</mark><c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- c>&lt;!-- this is just a comment between script blocks --></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c-><mark>
 <c- p>...</c-> <c- c1>// this is a new script block</c->
</mark><c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>次の例のように、これらのシーケンスは自然にスクリプト式で出現可能である：</p>

   <pre><code class='js'><c- k>if</c-> <c- p>(</c->x<c- c>&lt;!--</c->y<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c->
<c- k>if</c-> <c- p>(</c-> player<c- o>&lt;</c->script <c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c-></code></pre>

   <p>このような場合、文字はエスケープすることはできないが、シーケンスが発生しないように式は次のように書き換えることができる：</p>

   <pre><code class='js'><c- k>if</c-> <c- p>(</c->x <c- o>&lt;</c-> <c- o>!--</c->y<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c->
<c- k>if</c-> <c- p>(</c-><c- o>!--</c->y <c- o>></c-> x<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c->
<c- k>if</c-> <c- p>(</c-><c- o>!</c-><c- p>(</c-><c- o>--</c->y<c- p>)</c-> <c- o>></c-> x<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c->
<c- k>if</c-> <c- p>(</c->player <c- o>&lt;</c-> script<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c->
<c- k>if</c-> <c- p>(</c->script <c- o>></c-> player<c- p>)</c-> <c- p>{</c-> <c- p>...</c-> <c- p>}</c-></code></pre>

   <p>これを行うとはまた、同様に様々な落とし穴を回避する：関連する歴史的な理由のために、<a href="webappapis.html#classic-script" id="restrictions-for-contents-of-script-elements:classic-script">クラシックスクリプト</a>で文字列"&lt;!--"は、"//"のように、実際には行コメントの開始として扱われる。</p>

  </div>


  <h5 id="inline-documentation-for-external-scripts"><span class="secno">4.12.1.4</span> <dfn>外部スクリプトに対するインライン文書</dfn><a href="#inline-documentation-for-external-scripts" class="self-link"></a></h5>

  <p><code id="inline-documentation-for-external-scripts:the-script-element"><a href="#the-script-element">script</a></code>要素の<code id="inline-documentation-for-external-scripts:attr-script-src"><a href="#attr-script-src">src</a></code>属性が指定される場合、もしあれば、<code id="inline-documentation-for-external-scripts:the-script-element-2"><a href="#the-script-element">script</a></code>要素のコンテンツは、要素のコンテンツから分割されるような<code id="inline-documentation-for-external-scripts:dom-script-text"><a href="#dom-script-text">text</a></code> IDL属性値でなければならず、文字セットがUnicodeである下記のABNFで<code>documentation</code>生成物と一致しなければならない。<a href="references.html#refsABNF">[ABNF]</a></p>

  <pre><code class='abnf'><c- nc>documentation</c-> <c- o>=</c-> <c- o>*</c-><c- p>(</c-> <c- o>*</c-><c- p>(</c-> <c- nc>space</c-> <c- o>/</c-> <c- nc>tab</c-> <c- o>/</c-> <c- nc>comment</c-> <c- p>)</c-> <c- p>[</c-> <c- nc>line-comment</c-> <c- p>]</c-> <c- nc>newline</c-> <c- p>)</c->
<c- nc>comment</c->       <c- o>=</c-> <c- nc>slash</c-> <c- nc>star</c-> <c- o>*</c-><c- p>(</c-> <c- nc>not-star</c-> <c- o>/</c-> <c- nc>star</c-> <c- nc>not-slash</c-> <c- p>)</c-> <c- o>1*</c-><c- nc>star</c-> <c- nc>slash</c->
<c- nc>line-comment</c->  <c- o>=</c-> <c- nc>slash</c-> <c- nc>slash</c-> <c- o>*</c-><c- nc>not-newline</c->

<c- c1>; characters</c->
<c- nc>tab</c->           <c- o>=</c-> <c- l>%x0009</c-> <c- c1>; U+0009 CHARACTER TABULATION (tab)</c->
<c- nc>newline</c->       <c- o>=</c-> <c- l>%x000A</c-> <c- c1>; U+000A LINE FEED (LF)</c->
<c- nc>space</c->         <c- o>=</c-> <c- l>%x0020</c-> <c- c1>; U+0020 SPACE</c->
<c- nc>star</c->          <c- o>=</c-> <c- l>%x002A</c-> <c- c1>; U+002A ASTERISK (*)</c->
<c- nc>slash</c->         <c- o>=</c-> <c- l>%x002F</c-> <c- c1>; U+002F SOLIDUS (/)</c->
<c- nc>not-newline</c->   <c- o>=</c-> <c- l>%x0000-0009</c-> <c- o>/</c-> <c- l>%x000B-10FFFF</c->
                <c- c1>; a </c-><a id='inline-documentation-for-external-scripts:scalar-value' href='https://triple-underscore.github.io/infra-ja.html#scalar-value' data-x-internal='scalar-value'><c- c1>scalar value</c-></a><c- c1> other than U+000A LINE FEED (LF)</c->
<c- nc>not-star</c->      <c- o>=</c-> <c- l>%x0000-0029</c-> <c- o>/</c-> <c- l>%x002B-10FFFF</c->
                <c- c1>; a </c-><a id='inline-documentation-for-external-scripts:scalar-value-2' href='https://triple-underscore.github.io/infra-ja.html#scalar-value' data-x-internal='scalar-value'><c- c1>scalar value</c-></a><c- c1> other than U+002A ASTERISK (*)</c->
<c- nc>not-slash</c->     <c- o>=</c-> <c- l>%x0000-002E</c-> <c- o>/</c-> <c- l>%x0030-10FFFF</c->
                <c- c1>; a </c-><a id='inline-documentation-for-external-scripts:scalar-value-3' href='https://triple-underscore.github.io/infra-ja.html#scalar-value' data-x-internal='scalar-value'><c- c1>scalar value</c-></a><c- c1> other than U+002F SOLIDUS (/)</c-></code></pre>

  <p class="note">これは、JavaScriptのコメントで要素のコンテンツを設置するものと一致する。</p>

  <p class="note">この要求は、<code id="inline-documentation-for-external-scripts:the-script-element-3"><a href="#the-script-element">script</a></code>要素のコンテンツの構文上に先の制約に加えて存在する。</p>

  <div class="example"><p>以下は、依然として外部スクリプトファイルを参照する間に文書内で、著者がライセンス情報やAPI情報のような文書を含むことを許可する。<code id="inline-documentation-for-external-scripts:attr-script-src-2"><a href="#attr-script-src">src</a></code>属性を提供する一方で、偶然にも著者が有効なスクリプトのように見えるものが含まないように、構文は制約される。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>script</c-> <c- e>src</c-><c- o>=</c-><c- s>"cool-effects.js"</c-><c- p>></c->
 <c- c1>// create new instances using:</c->
 <c- c1>//    var e = new Effect();</c->
 <c- c1>// start the effect using .play, stop using .stop:</c->
 <c- c1>//    e.play();</c->
 <c- c1>//    e.stop();</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

  </div>


  

  <h5 id="scriptTagXSLT"><span class="secno">4.12.1.5</span> Interaction of <code id="scriptTagXSLT:the-script-element"><a href="#the-script-element">script</a></code> elements and XSLT<a href="#scriptTagXSLT" class="self-link"></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>This specification does not define how XSLT interacts with the <code id="scriptTagXSLT:the-script-element-2"><a href="#the-script-element">script</a></code> element. However, in the absence of another specification actually defining this, here are some guidelines for implementers, based on existing implementations:</p>

  <ul><li><p>When an XSLT transformation program is triggered by an <code>&lt;?xml-stylesheet?></code> processing instruction and the browser implements a direct-to-DOM transformation, <code id="scriptTagXSLT:the-script-element-3"><a href="#the-script-element">script</a></code> elements created by the XSLT processor need to have its <a href="#parser-document" id="scriptTagXSLT:parser-document">parser document</a> set correctly, and run in document order (modulo scripts marked <code id="scriptTagXSLT:attr-script-defer"><a href="#attr-script-defer">defer</a></code> or <code id="scriptTagXSLT:attr-script-async"><a href="#attr-script-async">async</a></code>), <a id="scriptTagXSLT:immediately" href="infrastructure.html#immediately">immediately</a>, as the transformation is occurring.<li><p>The <code id="scriptTagXSLT:xsltprocessor"><a href="infrastructure.html#xsltprocessor">XSLTProcessor</a></code> <code id="scriptTagXSLT:dom-xsltprocessor-transformtodocument"><a href="infrastructure.html#dom-xsltprocessor-transformtodocument">transformToDocument()</a></code> method adds elements to a <code id="scriptTagXSLT:document"><a href="dom.html#document">Document</a></code> object with a null <a href="browsers.html#concept-document-bc" id="scriptTagXSLT:concept-document-bc">browsing context</a>, and, accordingly, any <code id="scriptTagXSLT:the-script-element-4"><a href="#the-script-element">script</a></code> elements they create need to have their <a href="#already-started" id="scriptTagXSLT:already-started">"already started"</a> flag set in the <a href="#prepare-a-script" id="scriptTagXSLT:prepare-a-script">prepare a script</a> algorithm and never get executed (<a href="webappapis.html#concept-environment-noscript" id="scriptTagXSLT:concept-environment-noscript">scripting is disabled</a>). Such <code id="scriptTagXSLT:the-script-element-5"><a href="#the-script-element">script</a></code> elements still need to have their <a href="#parser-document" id="scriptTagXSLT:parser-document-2">parser document</a> set, though, such that their <code id="scriptTagXSLT:dom-script-async"><a href="#dom-script-async">async</a></code> IDL attribute will return false in the absence of an <code id="scriptTagXSLT:attr-script-async-2"><a href="#attr-script-async">async</a></code> content attribute.<li><p>The <code id="scriptTagXSLT:xsltprocessor-2"><a href="infrastructure.html#xsltprocessor">XSLTProcessor</a></code> <code id="scriptTagXSLT:dom-xsltprocessor-transformtofragment"><a href="infrastructure.html#dom-xsltprocessor-transformtofragment">transformToFragment()</a></code> method needs to create a fragment that is equivalent to one built manually by creating the elements using <code id="scriptTagXSLT:dom-document-createelementns"><a data-x-internal="dom-document-createelementns" href="https://triple-underscore.github.io/DOM4-ja.html#dom-document-createelementns">document.createElementNS()</a></code>. For instance, it needs to create <code id="scriptTagXSLT:the-script-element-6"><a href="#the-script-element">script</a></code> elements with null <a href="#parser-document" id="scriptTagXSLT:parser-document-3">parser document</a> and that don't have their <a href="#already-started" id="scriptTagXSLT:already-started-2">"already started"</a> flag set, so that they will execute when the fragment is inserted into a document.</ul>

  <p>The main distinction between the first two cases and the last case is that the first two operate on <code id="scriptTagXSLT:document-2"><a href="dom.html#document">Document</a></code>s and the last operates on a fragment.</p>

  



  <h4 id="the-noscript-element"><span class="secno">4.12.2</span> <dfn data-dfn-type="element"><code>noscript</code></dfn>要素<a href="#the-noscript-element" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/noscript" title="The &lt;noscript> HTML element defines a section of HTML to be inserted if a script type on the page is unsupported or if scripting is currently turned off in the browser.">Element/noscript</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>1+</span></span><span class="safari yes"><span>Safari</span><span>Yes</span></span><span class="chrome yes"><span>Chrome</span><span>Yes</span></span><hr><span class="opera yes"><span>Opera</span><span>Yes</span></span><span class="edge_blink yes"><span>Edge</span><span>Yes</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>12+</span></span><span class="ie yes"><span>Internet Explorer</span><span>Yes</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>4+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>Yes</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>Yes</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>Yes</span></span><span class="opera_android yes"><span>Opera Android</span><span>Yes</span></span></div></div></div>

  <dl class="element"><dt><a href="dom.html#concept-element-categories" id="the-noscript-element:concept-element-categories">カテゴリー</a>：<dd><a id="the-noscript-element:metadata-content-2" href="dom.html#metadata-content-2">メタデータコンテンツ</a>。<dd><a id="the-noscript-element:flow-content-2" href="dom.html#flow-content-2">フローコンテンツ</a>。<dd><a id="the-noscript-element:phrasing-content-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>。<dt><a href="dom.html#concept-element-contexts" id="the-noscript-element:concept-element-contexts">この要素を使用できるコンテキスト</a>：<dd>先祖<code id="the-noscript-element:the-noscript-element"><a href="#the-noscript-element">noscript</a></code>要素が存在しない場合、<a href="https://triple-underscore.github.io/DOM4-ja.html#html-document" id="the-noscript-element:html-documents" data-x-internal="html-documents">HTML文書</a>の<code id="the-noscript-element:the-head-element"><a href="semantics.html#the-head-element">head</a></code>要素内。<dd>先祖<code id="the-noscript-element:the-noscript-element-2"><a href="#the-noscript-element">noscript</a></code>要素が存在しない場合、<a id="the-noscript-element:html-documents-2" href="https://triple-underscore.github.io/DOM4-ja.html#html-document" data-x-internal="html-documents">HTML文書</a>で<a id="the-noscript-element:phrasing-content-2-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>が期待される場所。<dt><a href="dom.html#concept-element-content-model" id="the-noscript-element:concept-element-content-model">コンテンツモデル</a>：<dd><a href="webappapis.html#concept-n-noscript" id="the-noscript-element:concept-n-noscript">スクリプトが無効</a>の場合、<code id="the-noscript-element:the-head-element-2"><a href="semantics.html#the-head-element">head</a></code>要素内で：任意の順で、0個以上の<code id="the-noscript-element:the-link-element"><a href="semantics.html#the-link-element">link</a></code>要素、0個以上の<code id="the-noscript-element:the-style-element"><a href="semantics.html#the-style-element">style</a></code>要素、0個以上の<code id="the-noscript-element:the-meta-element"><a href="semantics.html#the-meta-element">meta</a></code>要素。<dd><a href="webappapis.html#concept-n-noscript" id="the-noscript-element:concept-n-noscript-2">スクリプトが無効</a>の場合、<code id="the-noscript-element:the-head-element-3"><a href="semantics.html#the-head-element">head</a></code>要素外で：<a id="the-noscript-element:transparent" href="dom.html#transparent">透過的</a>。ただし、<code id="the-noscript-element:the-noscript-element-3"><a href="#the-noscript-element">noscript</a></code>要素の子孫を持ってはならない。<dd>そうでなければ：文で与えられる要件に適合するテキスト。<dt><a href="dom.html#concept-element-tag-omission" id="the-noscript-element:concept-element-tag-omission">text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href="dom.html#concept-element-attributes" id="the-noscript-element:concept-element-attributes">コンテンツ属性</a>：<dd><a id="the-noscript-element:global-attributes" href="dom.html#global-attributes">グローバル属性</a><dt><a href="dom.html#concept-element-accessibility-considerations" id="the-noscript-element:concept-element-accessibility-considerations">アクセシビリティの考慮</a>：<dd><a href="https://momdo.github.io/html-aria/#el-noscript">著者向け</a>。<dd><a href="https://w3c.github.io/html-aam/#el-noscript">実装者向け</a>。<dt><a href="dom.html#concept-element-dom" id="the-noscript-element:concept-element-dom">DOMインターフェイス</a>：<dd><code id="the-noscript-element:htmlelement"><a href="dom.html#htmlelement">HTMLElement</a></code>を使用する。</dl>

  <p><code id="the-noscript-element:the-noscript-element-4"><a href="#the-noscript-element">noscript</a></code>要素は、<a href="webappapis.html#concept-n-script" id="the-noscript-element:concept-n-script">スクリプトが有効である</a>場合は何も<a id="the-noscript-element:represents" href="dom.html#represents">表さ</a>ず、<a href="webappapis.html#concept-n-noscript" id="the-noscript-element:concept-n-noscript-3">スクリプトが無効である</a>場合は要素の子を<a id="the-noscript-element:represents-2" href="dom.html#represents">表す</a>。これは、文書が解析される方法に影響を与えることによって、スクリプトをサポートするユーザーエージェントとサポートしないユーザーエージェントに異なるマークアップを提示するために使用される。</p>

  <p><a id="the-noscript-element:html-documents-3" href="https://triple-underscore.github.io/DOM4-ja.html#html-document" data-x-internal="html-documents">HTML文書</a>で使用する場合、許可されるコンテンツモデルは次のとおり：</p>

  <dl><dt><a href="webappapis.html#concept-n-noscript" id="the-noscript-element:concept-n-noscript-4">スクリプトが無効である</a>場合、<code id="the-noscript-element:the-head-element-4"><a href="semantics.html#the-head-element">head</a></code>要素内の<code id="the-noscript-element:the-noscript-element-5"><a href="#the-noscript-element">noscript</a></code>要素に対して<dd><p><code id="the-noscript-element:the-noscript-element-6"><a href="#the-noscript-element">noscript</a></code>要素は、<code id="the-noscript-element:the-link-element-2"><a href="semantics.html#the-link-element">link</a></code>、<code id="the-noscript-element:the-style-element-2"><a href="semantics.html#the-style-element">style</a></code>、および<code id="the-noscript-element:the-meta-element-2"><a href="semantics.html#the-meta-element">meta</a></code>要素のみを含まなければならない。<dt><a href="webappapis.html#concept-n-script" id="the-noscript-element:concept-n-script-2">スクリプトが有効である</a>場合、<code id="the-noscript-element:the-head-element-5"><a href="semantics.html#the-head-element">head</a></code>要素内の<code id="the-noscript-element:the-noscript-element-7"><a href="#the-noscript-element">noscript</a></code>要素に対して<dd><p><code id="the-noscript-element:the-noscript-element-8"><a href="#the-noscript-element">noscript</a></code>要素は、テキストのみを含まなければならない。ただし、<var id="the-noscript-element:concept-frag-parse-context"><a href="parsing.html#concept-frag-parse-context">context</a></var>要素として<code id="the-noscript-element:the-noscript-element-9"><a href="#the-noscript-element">noscript</a></code>要素をもつ<a id="the-noscript-element:html-fragment-parsing-algorithm" href="parsing.html#html-fragment-parsing-algorithm">HTML断片解析アルゴリズム</a>を呼び出し、かつ<var>input</var>としてテキストコンテンツを呼び出すと、<code id="the-noscript-element:the-noscript-element-10"><a href="#the-noscript-element">noscript</a></code>要素の子であった場合に適合するだろう、<code id="the-noscript-element:the-link-element-3"><a href="semantics.html#the-link-element">link</a></code>、<code id="the-noscript-element:the-style-element-3"><a href="semantics.html#the-style-element">style</a></code>、<code id="the-noscript-element:the-meta-element-3"><a href="semantics.html#the-meta-element">meta</a></code>要素のみからなるノードのリストをもたらさなければならず、かつ<a href="parsing.html#parse-errors" id="the-noscript-element:parse-errors">解析エラー</a>でない場合を除く。<dt><a href="webappapis.html#concept-n-noscript" id="the-noscript-element:concept-n-noscript-5">スクリプトが無効である</a>場合、<code id="the-noscript-element:the-head-element-6"><a href="semantics.html#the-head-element">head</a></code>要素外の<code id="the-noscript-element:the-noscript-element-11"><a href="#the-noscript-element">noscript</a></code>要素に対して<dd><p><code id="the-noscript-element:the-noscript-element-12"><a href="#the-noscript-element">noscript</a></code>要素のコンテンツモデルは<a id="the-noscript-element:transparent-2" href="dom.html#transparent">透過的</a>であり、同時に<code id="the-noscript-element:the-noscript-element-13"><a href="#the-noscript-element">noscript</a></code>要素が<code id="the-noscript-element:the-noscript-element-14"><a href="#the-noscript-element">noscript</a></code>要素を持ってはならない（<code id="the-noscript-element:the-noscript-element-15"><a href="#the-noscript-element">noscript</a></code>要素を入れ子にできない）追加制限がある。<dt><a href="webappapis.html#concept-n-script" id="the-noscript-element:concept-n-script-3">スクリプトが有効である</a>場合、<code id="the-noscript-element:the-head-element-7"><a href="semantics.html#the-head-element">head</a></code>要素外の<code id="the-noscript-element:the-noscript-element-16"><a href="#the-noscript-element">noscript</a></code>要素に対して<dd><p><code id="the-noscript-element:the-noscript-element-17"><a href="#the-noscript-element">noscript</a></code>要素はテキストのみを含まなければならない。ただしテキストは、以下のアルゴリズムが<code id="the-noscript-element:the-noscript-element-18"><a href="#the-noscript-element">noscript</a></code>要素および<code id="the-noscript-element:the-script-element"><a href="#the-script-element">script</a></code>要素をもたない適合文書をもたらすものでなければならず、アルゴリズムでステップは例外を投げるまたは<a id="the-noscript-element:html-parser" href="parsing.html#html-parser">HTMLパーサー</a>に<a id="the-noscript-element:parse-errors-2" href="parsing.html#parse-errors">解析エラー</a>を起こさないようにしなければならない：</p>
    

    <ol><li>文書からすべての<code id="the-noscript-element:the-script-element-2"><a href="#the-script-element">script</a></code>要素を取り除く。<li>文書においてすべての<code id="the-noscript-element:the-noscript-element-19"><a href="#the-noscript-element">noscript</a></code>要素のリストを作る。そのリストの各<code id="the-noscript-element:the-noscript-element-20"><a href="#the-noscript-element">noscript</a></code>要素に対して、以下のステップを実行する：<ol><li><var>s</var>を<code id="the-noscript-element:the-noscript-element-21"><a href="#the-noscript-element">noscript</a></code>要素要素の<a id="the-noscript-element:child-text-content" href="https://triple-underscore.github.io/DOM4-ja.html#concept-child-text-content" data-x-internal="child-text-content">子テキストコンテンツ</a>とする。<li><code id="the-noscript-element:the-noscript-element-22"><a href="#the-noscript-element">noscript</a></code>要素の<code id="the-noscript-element:dom-outerhtml"><a data-x-internal="dom-outerhtml" href="https://triple-underscore.github.io/DOM-Parsing-ja.html#dom-element-outerhtml">outerHTML</a></code>属性を<var>s</var>の値に設定する。（これは、副作用として<code id="the-noscript-element:the-noscript-element-23"><a href="#the-noscript-element">noscript</a></code>要素を文書から除去させる。）<a href="references.html#refsDOMPARSING">[DOMPARSING]</a></ol>
     </ol>
   </dl>

  <p class="note">歴史的な理由により、パーサーが呼び出されたときに<a href="parsing.html#scripting-flag" id="the-noscript-element:scripting-flag">スクリプトが有効にされたかどうか</a>に基づく<a id="the-noscript-element:html-parser-2" href="parsing.html#html-parser">HTMLパーサー</a>によって<code id="the-noscript-element:the-noscript-element-24"><a href="#the-noscript-element">noscript</a></code>要素が異なる方法で処理されるので、これらのすべてのこじつけが必要とされる。</p>

  <p><code id="the-noscript-element:the-noscript-element-25"><a href="#the-noscript-element">noscript</a></code>は<a id="the-noscript-element:xml-documents" href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" data-x-internal="xml-documents">XML文書</a>で使用してはならない。</p>

  <p class="note"><code id="the-noscript-element:the-noscript-element-26"><a href="#the-noscript-element">noscript</a></code>要素は<a id="the-noscript-element:syntax" href="syntax.html#syntax">HTML構文</a>でのみ有効だが、<a id="the-noscript-element:the-xhtml-syntax" href="xhtml.html#the-xhtml-syntax">XML構文</a>では効果がない。スクリプトが有効である場合、この要素が動作する方法は、基本的にパーサーを"オフ"にすることであり、要素の内容は、実際の要素としてではなく純粋にテキストとして扱われているのである。XMLは、これを実行するためのメカニズムを定義しない。</p>

  

  <p>The <code id="the-noscript-element:the-noscript-element-27"><a href="#the-noscript-element">noscript</a></code> element has no other requirements. In particular, children of the <code id="the-noscript-element:the-noscript-element-28"><a href="#the-noscript-element">noscript</a></code> element are not exempt from <a id="the-noscript-element:form-submission-2" href="form-control-infrastructure.html#form-submission-2">form submission</a>, scripting, and so forth, even when <a href="webappapis.html#concept-n-script" id="the-noscript-element:concept-n-script-4">scripting is enabled</a> for the element.</p>

  

  <div class="example"><p>次の例において、<code id="the-noscript-element:the-noscript-element-29"><a href="#the-noscript-element">noscript</a></code>要素は、スクリプトのフォールバックを提供するために使用される。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>action</c-><c- o>=</c-><c- s>"calcSquare.php"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>x</c-><c- p>></c->Number<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->:
  <c- p>&lt;</c-><c- f>input</c-> <c- e>id</c-><c- o>=</c-><c- s>"x"</c-> <c- e>name</c-><c- o>=</c-><c- s>"x"</c-> <c- e>type</c-><c- o>=</c-><c- s>"number"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>var</c-> x <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- t>'x'</c-><c- p>);</c->
  <c- a>var</c-> output <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- t>'p'</c-><c- p>);</c->
  output<c- p>.</c->textContent <c- o>=</c-> <c- t>'Type a number; it will be squared right then!'</c-><c- p>;</c->
  x<c- p>.</c->form<c- p>.</c->appendChild<c- p>(</c->output<c- p>);</c->
  x<c- p>.</c->form<c- p>.</c->onsubmit <c- o>=</c-> <c- a>function</c-> <c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- kc>false</c-><c- p>;</c-> <c- p>}</c->
  x<c- p>.</c->oninput <c- o>=</c-> <c- a>function</c-> <c- p>()</c-> <c- p>{</c->
    <c- a>var</c-> v <c- o>=</c-> x<c- p>.</c->valueAsNumber<c- p>;</c->
    output<c- p>.</c->textContent <c- o>=</c-> v <c- o>+</c-> <c- t>' squared is '</c-> <c- o>+</c-> v <c- o>*</c-> v<c- p>;</c->
  <c- p>};</c->
 <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>noscript</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>submit</c-> <c- e>value</c-><c- o>=</c-><c- s>"Calculate Square"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>noscript</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>スクリプトが無効である場合、ボタンは、サーバー側で計算を行うために表示される。スクリプトが有効である場合、代わりに値がその場で計算される。</p>

   <p><code id="the-noscript-element:the-noscript-element-30"><a href="#the-noscript-element">noscript</a></code>要素は鈍器である。時には、スクリプトを有効にするかもしれないが、何らかの理由でページのスクリプトが失敗するかもしれない。このような理由から、次の例のように、<code id="the-noscript-element:the-noscript-element-31"><a href="#the-noscript-element">noscript</a></code>要素の使用を避ける代わりに、その場でスクリプトのないページからスクリプト化されたページにページを変更するスクリプトを設計することが一般により良い：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>form</c-> <c- e>action</c-><c- o>=</c-><c- s>"calcSquare.php"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>label</c-> <c- e>for</c-><c- o>=</c-><c- s>x</c-><c- p>></c->Number<c- p>&lt;/</c-><c- f>label</c-><c- p>></c->:
  <c- p>&lt;</c-><c- f>input</c-> <c- e>id</c-><c- o>=</c-><c- s>"x"</c-> <c- e>name</c-><c- o>=</c-><c- s>"x"</c-> <c- e>type</c-><c- o>=</c-><c- s>"number"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <strong><c- p>&lt;</c-><c- f>input</c-> <c- e>id</c-><c- o>=</c-><c- s>"submit"</c-> <c- e>type</c-><c- o>=</c-><c- s>submit</c-> <c- e>value</c-><c- o>=</c-><c- s>"Calculate Square"</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
  <c- a>var</c-> x <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- t>'x'</c-><c- p>);</c->
  <c- a>var</c-> output <c- o>=</c-> document<c- p>.</c->createElement<c- p>(</c-><c- t>'p'</c-><c- p>);</c->
  output<c- p>.</c->textContent <c- o>=</c-> <c- t>'Type a number; it will be squared right then!'</c-><c- p>;</c->
  x<c- p>.</c->form<c- p>.</c->appendChild<c- p>(</c->output<c- p>);</c->
  x<c- p>.</c->form<c- p>.</c->onsubmit <c- o>=</c-> <c- a>function</c-> <c- p>()</c-> <c- p>{</c-> <c- k>return</c-> <c- kc>false</c-><c- p>;</c-> <c- p>}</c->
  x<c- p>.</c->oninput <c- o>=</c-> <c- a>function</c-> <c- p>()</c-> <c- p>{</c->
    <c- a>var</c-> v <c- o>=</c-> x<c- p>.</c->valueAsNumber<c- p>;</c->
    output<c- p>.</c->textContent <c- o>=</c-> v <c- o>+</c-> <c- t>' squared is '</c-> <c- o>+</c-> v <c- o>*</c-> v<c- p>;</c->
  <c- p>};</c->
<strong>  <c- a>var</c-> submit <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- t>'submit'</c-><c- p>);</c->
  submit<c- p>.</c->parentNode<c- p>.</c->removeChild<c- p>(</c->submit<c- p>);</c-></strong>
 <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>form</c-><c- p>></c-></code></pre>

   <p>上記の手法は、<code id="the-noscript-element:the-noscript-element-32"><a href="#the-noscript-element">noscript</a></code>が許可されていないため、<a id="the-noscript-element:xml-documents-2" href="https://triple-underscore.github.io/DOM4-ja.html#xml-document" data-x-internal="xml-documents">XML文書</a>でも役に立つ。</p>

  </div>


  <h4 id="the-template-element"><span class="secno">4.12.3</span> <dfn data-dfn-type="element"><code>template</code></dfn>要素<a href="#the-template-element" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template" title="The &lt;template> HTML element is a mechanism for holding HTML that is not to be rendered immediately when a page is loaded but may be instantiated subsequently during runtime using JavaScript.">Element/template</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>22+</span></span><span class="safari yes"><span>Safari</span><span>8+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span><hr><span class="opera yes"><span>Opera</span><span>15+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>13+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>22+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>8+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>26+</span></span><span class="webview_android yes"><span>WebView Android</span><span>Yes</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.5+</span></span><span class="opera_android unknown"><span>Opera Android</span><span>?</span></span></div></div></div>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLTemplateElement" title="The HTMLTemplateElement interface enables access to the contents of an HTML &lt;template> element.">HTMLTemplateElement</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>22+</span></span><span class="safari yes"><span>Safari</span><span>8+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span><hr><span class="opera yes"><span>Opera</span><span>15+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>13+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>22+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>8+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>26+</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.5+</span></span><span class="opera_android yes"><span>Opera Android</span><span>14+</span></span></div></div></div><dl class="element"><dt><a href="dom.html#concept-element-categories" id="the-template-element:concept-element-categories">カテゴリー</a>：<dd><a id="the-template-element:metadata-content-2" href="dom.html#metadata-content-2">メタデータコンテンツ</a>。<dd><a id="the-template-element:flow-content-2" href="dom.html#flow-content-2">フローコンテンツ</a>。<dd><a id="the-template-element:phrasing-content-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>。<dd><a href="dom.html#script-supporting-elements-2" id="the-template-element:script-supporting-elements-2">スクリプトサポート要素</a>。<dt><a href="dom.html#concept-element-contexts" id="the-template-element:concept-element-contexts">この要素を使用できるコンテキスト</a>：<dd><a id="the-template-element:metadata-content-2-2" href="dom.html#metadata-content-2">メタデータコンテンツ</a>が期待される場所。<dd><a id="the-template-element:phrasing-content-2-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>が期待される場所。<dd><a id="the-template-element:script-supporting-elements-2-2" href="dom.html#script-supporting-elements-2">スクリプトサポート要素</a>が期待される場所。<dd><code id="the-template-element:attr-colgroup-span"><a href="tables.html#attr-colgroup-span">span</a></code>属性を持たない<code id="the-template-element:the-colgroup-element"><a href="tables.html#the-colgroup-element">colgroup</a></code>要素の子として。<dt><a href="dom.html#concept-element-content-model" id="the-template-element:concept-element-content-model">コンテンツモデル</a>：<dd><a href="dom.html#concept-content-nothing" id="the-template-element:concept-content-nothing">Nothing</a>（明確化のために、<a href="#template-example">例を参照</a>）。<dt><a href="dom.html#concept-element-tag-omission" id="the-template-element:concept-element-tag-omission">text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href="dom.html#concept-element-attributes" id="the-template-element:concept-element-attributes">コンテンツ属性</a>：<dd><a id="the-template-element:global-attributes" href="dom.html#global-attributes">グローバル属性</a><dt><a href="dom.html#concept-element-accessibility-considerations" id="the-template-element:concept-element-accessibility-considerations">アクセシビリティの考慮</a>：<dd><a href="https://momdo.github.io/html-aria/#el-template">著者向け</a>。<dd><a href="https://w3c.github.io/html-aam/#el-template">実装者向け</a>。<dt><a href="dom.html#concept-element-dom" id="the-template-element:concept-element-dom">DOMインターフェイス</a>：<dd><pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='htmltemplateelement' data-dfn-type='interface'><c- g>HTMLTemplateElement</c-></dfn> : <a id='the-template-element:htmlelement' href='dom.html#htmlelement'><c- n>HTMLElement</c-></a> {
  [<a id='the-template-element:htmlconstructor' href='dom.html#htmlconstructor'><c- g>HTMLConstructor</c-></a>] <c- g>constructor</c->();

  <c- b>readonly</c-> <c- b>attribute</c-> <a id='the-template-element:documentfragment' href='https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment' data-x-internal='documentfragment'><c- n>DocumentFragment</c-></a> <a href='#dom-template-content' id='the-template-element:dom-template-content'><c- g>content</c-></a>;
};</code></pre>
</dl>

  <p><code id="the-template-element:the-template-element"><a href="#the-template-element">template</a></code>要素は、複製され、スクリプトによって文書に挿入できるHTMLの断片を宣言するために使用される。</p>

  <p>レンダリングにおいて、<code id="the-template-element:the-template-element-2"><a href="#the-template-element">template</a></code>要素は何も<a id="the-template-element:represents" href="dom.html#represents">表さ</a>ない。</p>

  <p><code id="the-template-element:the-template-element-3"><a href="#the-template-element">template</a></code>要素の<a href="#template-contents" id="the-template-element:template-contents">テンプレートコンテンツ</a>は、<a href="syntax.html#template-syntax">要素自体の子ではない</a>。</p>

  <p class="note">DOM操作の結果として、<code id="the-template-element:the-template-element-4"><a href="#the-template-element">template</a></code>要素が<code id="the-template-element:text"><a data-x-internal="text" href="https://triple-underscore.github.io/DOM4-ja.html#interface-text">Text</a></code>ノードと要素ノードを含むことも可能である。しかし、この要素のコンテンツモデルは<a href="dom.html#concept-content-nothing" id="the-template-element:concept-content-nothing-2">nothing</a>として定義されるため、すべてのものは<code id="the-template-element:the-template-element-5"><a href="#the-template-element">template</a></code>要素のコンテンツモデルに違反する。</p>

  <div id="template-example" class="example"><p>たとえば、次の文書を考えてみる：</p>

   

   <pre><code class='html'><c- cp>&lt;!doctype html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>"en"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>head</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>title</c-><c- p>></c->Homework<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>body</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>template</c-> <c- e>id</c-><c- o>=</c-><c- s>"template"</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>></c->Smile!<c- p>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>template</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>script</c-><c- p>></c->
   <c- a>let</c-> num <c- o>=</c-> <c- mf>3</c-><c- p>;</c->
   <c- a>const</c-> fragment <c- o>=</c-> document<c- p>.</c->getElementById<c- p>(</c-><c- t>'template'</c-><c- p>).</c->content<c- p>.</c->cloneNode<c- p>(</c-><c- kc>true</c-><c- p>);</c->
   <c- k>while</c-> <c- p>(</c->num<c- o>--</c-> <c- o>></c-> <c- mf>1</c-><c- p>)</c-> <c- p>{</c->
     fragment<c- p>.</c->firstChild<c- p>.</c->before<c- p>(</c->fragment<c- p>.</c->firstChild<c- p>.</c->cloneNode<c- p>(</c-><c- kc>true</c-><c- p>));</c->
     fragment<c- p>.</c->firstChild<c- p>.</c->textContent <c- o>+=</c-> fragment<c- p>.</c->lastChild<c- p>.</c->textContent<c- p>;</c->
   <c- p>}</c->
   document<c- p>.</c->body<c- p>.</c->appendChild<c- p>(</c->fragment<c- p>);</c->
  <c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>html</c-><c- p>></c-></code></pre>

   <p><code id="the-template-element:the-template-element-6"><a href="#the-template-element">template</a></code>における<code id="the-template-element:the-p-element"><a href="grouping-content.html#the-p-element">p</a></code>要素は、DOM内の<code id="the-template-element:the-template-element-7"><a href="#the-template-element">template</a></code>の子では<em>ない</em>。<code id="the-template-element:the-template-element-8"><a href="#the-template-element">template</a></code>要素の<code id="the-template-element:dom-template-content-2"><a href="#dom-template-content">content</a></code> IDL属性によって返される<code id="the-template-element:documentfragment-2"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code>の子である。</p>

   <p>スクリプトが<code id="the-template-element:the-template-element-9"><a href="#the-template-element">template</a></code>要素の<code id="the-template-element:dom-node-appendchild"><a data-x-internal="dom-node-appendchild" href="https://triple-underscore.github.io/DOM4-ja.html#dom-node-appendchild">appendChild()</a></code>を呼び出すと、（他の要素の場合と同様に）<code id="the-template-element:the-template-element-10"><a href="#the-template-element">template</a></code>要素に子要素が追加される。しかし、そのようにすることは、<code id="the-template-element:the-template-element-11"><a href="#the-template-element">template</a></code>要素のコンテンツモデルに違反することになる。</p>

  </div>

  <dl class="domintro"><dt><code><var>template</var>.<a href="#dom-template-content" id="dom-template-content-dev">content</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLTemplateElement/content" title="The HTMLTemplateElement.content property returns a &lt;template> element's template contents (a DocumentFragment).">HTMLTemplateElement/content</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>22+</span></span><span class="safari yes"><span>Safari</span><span>8+</span></span><span class="chrome yes"><span>Chrome</span><span>26+</span></span><hr><span class="opera yes"><span>Opera</span><span>15+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge yes"><span>Edge (Legacy)</span><span>13+</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>22+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>8+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>26+</span></span><span class="webview_android yes"><span>WebView Android</span><span>4.4+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>1.5+</span></span><span class="opera_android yes"><span>Opera Android</span><span>14+</span></span></div></div></div><dd><p><a href="#template-contents" id="the-template-element:template-contents-2">テンプレートコンテンツ</a>（<code id="the-template-element:documentfragment-3"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code>）を返す。</dl>

  

  <p>Each <code id="the-template-element:the-template-element-12"><a href="#the-template-element">template</a></code> element has an associated <code id="the-template-element:documentfragment-4"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code> object that is its <dfn id="template-contents">template contents</dfn>. The <a href="#template-contents" id="the-template-element:template-contents-3">template contents</a> have <a href="dom.html#no-browsing-context">no conformance requirements</a>. When a <code id="the-template-element:the-template-element-13"><a href="#the-template-element">template</a></code> element is created, the user agent must run the following steps to establish the <a href="#template-contents" id="the-template-element:template-contents-4">template contents</a>:</p>

  <ol><li><p>Let <var>doc</var> be the <code id="the-template-element:the-template-element-14"><a href="#the-template-element">template</a></code> element's <a id="the-template-element:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="#appropriate-template-contents-owner-document" id="the-template-element:appropriate-template-contents-owner-document">appropriate template contents owner document</a>.<li><p>Create a <code id="the-template-element:documentfragment-5"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code> object whose <a id="the-template-element:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> is <var>doc</var> and <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host" id="the-template-element:concept-documentfragment-host" data-x-internal="concept-documentfragment-host">host</a> is the <code id="the-template-element:the-template-element-15"><a href="#the-template-element">template</a></code> element.<li><p>Set the <code id="the-template-element:the-template-element-16"><a href="#the-template-element">template</a></code> element's <a href="#template-contents" id="the-template-element:template-contents-5">template contents</a> to the newly created <code id="the-template-element:documentfragment-6"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code> object.</ol>

  <p>A <code id="the-template-element:document"><a href="dom.html#document">Document</a></code> <var>doc</var>'s <dfn id="appropriate-template-contents-owner-document">appropriate template contents owner document</dfn> is the <code id="the-template-element:document-2"><a href="dom.html#document">Document</a></code> returned by the following algorithm:</p>

  <ol><li><p>If <var>doc</var> is not a <code id="the-template-element:document-3"><a href="dom.html#document">Document</a></code> created by this algorithm, then:</p>

    <ol><li><p>If <var>doc</var> does not yet have an <dfn id="associated-inert-template-document">associated inert template document</dfn>, then:</p>

      <ol><li><p>Let <var>new doc</var> be a new <code id="the-template-element:document-4"><a href="dom.html#document">Document</a></code> (whose <a href="browsers.html#concept-document-bc" id="the-template-element:concept-document-bc">browsing context</a> is null). This is "a <code id="the-template-element:document-5"><a href="dom.html#document">Document</a></code> created by this algorithm" for the purposes of the step above.<li><p>If <var>doc</var> is an <a href="https://triple-underscore.github.io/DOM4-ja.html#html-document" id="the-template-element:html-documents" data-x-internal="html-documents">HTML document</a>, mark <var>new doc</var> as an <a href="https://triple-underscore.github.io/DOM4-ja.html#html-document" id="the-template-element:html-documents-2" data-x-internal="html-documents">HTML document</a> also.<li><p>Let <var>doc</var>'s <a href="#associated-inert-template-document" id="the-template-element:associated-inert-template-document">associated inert template document</a> be <var>new doc</var>.</ol>
     <li><p>Set <var>doc</var> to <var>doc</var>'s <a href="#associated-inert-template-document" id="the-template-element:associated-inert-template-document-2">associated inert template document</a>.</ol>

    <p class="note">Each <code id="the-template-element:document-6"><a href="dom.html#document">Document</a></code> not created by this algorithm thus gets a single <code id="the-template-element:document-7"><a href="dom.html#document">Document</a></code> to act as its proxy for owning the <a href="#template-contents" id="the-template-element:template-contents-6">template contents</a> of all its <code id="the-template-element:the-template-element-17"><a href="#the-template-element">template</a></code> elements, so that they aren't in a <a id="the-template-element:browsing-context" href="browsers.html#browsing-context">browsing context</a> and thus remain inert (e.g. scripts do not run). Meanwhile, <code id="the-template-element:the-template-element-18"><a href="#the-template-element">template</a></code> elements inside <code id="the-template-element:document-8"><a href="dom.html#document">Document</a></code> objects that <em>are</em> created by this algorithm just reuse the same <code id="the-template-element:document-9"><a href="dom.html#document">Document</a></code> owner for their contents.</p>
   <li><p>Return <var>doc</var>.</ol>

  <p id="template-adopting-steps">The <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt-ext" id="the-template-element:concept-node-adopt-ext" data-x-internal="concept-node-adopt-ext">adopting steps</a> (with <var>node</var> and <var>oldDocument</var> as parameters) for <code id="the-template-element:the-template-element-19"><a href="#the-template-element">template</a></code> elements are the following:</p>

  <ol><li><p>Let <var>doc</var> be <var>node</var>'s <a id="the-template-element:node-document-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="#appropriate-template-contents-owner-document" id="the-template-element:appropriate-template-contents-owner-document-2">appropriate template contents owner document</a>.</p>

    <p class="note"><var>node</var>'s <a id="the-template-element:node-document-4" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> is the <code id="the-template-element:document-10"><a href="dom.html#document">Document</a></code> object that <var>node</var> was just adopted <em>into</em>.</p>
   <li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt" id="the-template-element:concept-node-adopt" data-x-internal="concept-node-adopt">Adopt</a> <var>node</var>'s <a href="#template-contents" id="the-template-element:template-contents-7">template contents</a> (a <code id="the-template-element:documentfragment-7"><a data-x-internal="documentfragment" href="https://triple-underscore.github.io/DOM4-ja.html#interface-documentfragment">DocumentFragment</a></code> object) into <var>doc</var>.</ol>

  <p>The <dfn data-dfn-for="HTMLTemplateElement" id="dom-template-content" data-dfn-type="attribute"><code>content</code></dfn> IDL attribute must return the <code id="the-template-element:the-template-element-20"><a href="#the-template-element">template</a></code> element's <a href="#template-contents" id="the-template-element:template-contents-8">template contents</a>.</p>

  <hr>

  <p>The <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone-ext" id="the-template-element:concept-node-clone-ext" data-x-internal="concept-node-clone-ext">cloning steps</a> for a <code id="the-template-element:the-template-element-21"><a href="#the-template-element">template</a></code> element <var>node</var> being cloned to a copy <var>copy</var> must run the following steps:</p>

  <ol><li><p>If the <var>clone children flag</var> is not set in the calling <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone" id="the-template-element:concept-node-clone" data-x-internal="concept-node-clone">clone</a> algorithm, return.<li><p>Let <var>copied contents</var> be the result of <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-clone" id="the-template-element:concept-node-clone-2" data-x-internal="concept-node-clone">cloning</a> all the children of <var>node</var>'s <a href="#template-contents" id="the-template-element:template-contents-9">template contents</a>, with <var>document</var> set to <var>copy</var>'s <a href="#template-contents" id="the-template-element:template-contents-10">template contents</a>'s <a id="the-template-element:node-document-5" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>, and with the <var>clone children flag</var> set.<li><p>Append <var>copied contents</var> to <var>copy</var>'s <a href="#template-contents" id="the-template-element:template-contents-11">template contents</a>.</ol>

  

  <div class="example"><p>この例において、スクリプトは、手動でマークアップから構造を生成する代わりに要素構造を提供するために<code id="the-template-element:the-template-element-22"><a href="#the-template-element">template</a></code>を使用して、データ構造からデータをもつテーブル4列に投入する。</p>

   <pre><code class='html'><c- cp>&lt;!DOCTYPE html></c->
<c- p>&lt;</c-><c- f>html</c-> <c- e>lang</c-><c- o>=</c-><c- s>'en'</c-><c- p>></c->
<c- p>&lt;</c-><c- f>title</c-><c- p>></c->Cat data<c- p>&lt;/</c-><c- f>title</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- c1>// Data is hard-coded here, but could come from the server</c->
 <c- a>var</c-> data <c- o>=</c-> <c- p>[</c->
   <c- p>{</c-> name<c- o>:</c-> <c- t>'Pillar'</c-><c- p>,</c-> color<c- o>:</c-> <c- t>'Ticked Tabby'</c-><c- p>,</c-> sex<c- o>:</c-> <c- t>'Female (neutered)'</c-><c- p>,</c-> legs<c- o>:</c-> <c- mf>3</c-> <c- p>},</c->
   <c- p>{</c-> name<c- o>:</c-> <c- t>'Hedral'</c-><c- p>,</c-> color<c- o>:</c-> <c- t>'Tuxedo'</c-><c- p>,</c-> sex<c- o>:</c-> <c- t>'Male (neutered)'</c-><c- p>,</c-> legs<c- o>:</c-> <c- mf>4</c-> <c- p>},</c->
 <c- p>];</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c->
<c- p>&lt;</c-><c- f>table</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>thead</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>tr</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Name <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Color <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Sex <c- p>&lt;</c-><c- f>th</c-><c- p>></c->Legs
 <c- p>&lt;</c-><c- f>tbody</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>template</c-> <c- e>id</c-><c- o>=</c-><c- s>"row"</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>tr</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>>&lt;</c-><c- f>td</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>template</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>table</c-><c- p>></c->
<c- p>&lt;</c-><c- f>script</c-><c- p>></c->
 <c- a>var</c-> template <c- o>=</c-> document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#row'</c-><c- p>);</c->
 <c- k>for</c-> <c- p>(</c-><c- a>var</c-> i <c- o>=</c-> <c- mf>0</c-><c- p>;</c-> i <c- o>&lt;</c-> data<c- p>.</c->length<c- p>;</c-> i <c- o>+=</c-> <c- mf>1</c-><c- p>)</c-> <c- p>{</c->
   <c- a>var</c-> cat <c- o>=</c-> data<c- p>[</c->i<c- p>];</c->
   <c- a>var</c-> clone <c- o>=</c-> template<c- p>.</c->content<c- p>.</c->cloneNode<c- p>(</c-><c- kc>true</c-><c- p>);</c->
   <c- a>var</c-> cells <c- o>=</c-> clone<c- p>.</c->querySelectorAll<c- p>(</c-><c- t>'td'</c-><c- p>);</c->
   cells<c- p>[</c-><c- mf>0</c-><c- p>].</c->textContent <c- o>=</c-> cat<c- p>.</c->name<c- p>;</c->
   cells<c- p>[</c-><c- mf>1</c-><c- p>].</c->textContent <c- o>=</c-> cat<c- p>.</c->color<c- p>;</c->
   cells<c- p>[</c-><c- mf>2</c-><c- p>].</c->textContent <c- o>=</c-> cat<c- p>.</c->sex<c- p>;</c->
   cells<c- p>[</c-><c- mf>3</c-><c- p>].</c->textContent <c- o>=</c-> cat<c- p>.</c->legs<c- p>;</c->
   template<c- p>.</c->parentNode<c- p>.</c->appendChild<c- p>(</c->clone<c- p>);</c->
 <c- p>}</c->
<c- p>&lt;/</c-><c- f>script</c-><c- p>></c-></code></pre>

   <p>この例は、<code id="the-template-element:the-template-element-23"><a href="#the-template-element">template</a></code>のコンテンツに<code id="the-template-element:dom-node-clonenode"><a data-x-internal="dom-node-clonenode" href="https://triple-underscore.github.io/DOM4-ja.html#dom-node-clonenode">cloneNode()</a></code>を使用する。それは、同じことをする<code id="the-template-element:dom-document-importnode"><a data-x-internal="dom-document-importnode" href="https://triple-underscore.github.io/DOM4-ja.html#dom-document-importnode">document.importNode()</a></code>を等価的に使用することもできる。<a id="the-template-element:node-document-6" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">ノード文書</a>が更新されるときに、この2つのAPIの唯一の違いがある。ノードが<code id="the-template-element:dom-node-appendchild-2"><a data-x-internal="dom-node-appendchild" href="https://triple-underscore.github.io/DOM4-ja.html#dom-node-appendchild">appendChild()</a></code>で付加される場合に<code id="the-template-element:dom-node-clonenode-2"><a data-x-internal="dom-node-clonenode" href="https://triple-underscore.github.io/DOM4-ja.html#dom-node-clonenode">cloneNode()</a></code>とともに更新され、ノードがクローン化されるときに、<code id="the-template-element:dom-document-importnode-2"><a data-x-internal="dom-document-importnode" href="https://triple-underscore.github.io/DOM4-ja.html#dom-document-importnode">document.importNode()</a></code>とともに更新される。</p>

  </div>



  

  <h5 id="template-XSLT-XPath"><span class="secno">4.12.3.1</span> Interaction of <code id="template-XSLT-XPath:the-template-element"><a href="#the-template-element">template</a></code> elements with XSLT and XPath<a href="#template-XSLT-XPath" class="self-link"></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>This specification does not define how XSLT and XPath interact with the <code id="template-XSLT-XPath:the-template-element-2"><a href="#the-template-element">template</a></code> element. However, in the absence of another specification actually defining this, here are some guidelines for implementers, which are intended to be consistent with other processing described in this specification:</p>

  <ul><li><p>An XSLT processor based on an XML parser that acts <a href="xhtml.html#xml-parser" id="template-XSLT-XPath:xml-parser">as described in this specification</a> needs to act as if <code id="template-XSLT-XPath:the-template-element-3"><a href="#the-template-element">template</a></code> elements contain as descendants their <a href="#template-contents" id="template-XSLT-XPath:template-contents">template contents</a> for the purposes of the transform.<li><p>An XSLT processor that outputs a DOM needs to ensure that nodes that would go into a <code id="template-XSLT-XPath:the-template-element-4"><a href="#the-template-element">template</a></code> element are instead placed into the element's <a href="#template-contents" id="template-XSLT-XPath:template-contents-2">template contents</a>.<li><p>XPath evaluation using the XPath DOM API when applied to a <code id="template-XSLT-XPath:document"><a href="dom.html#document">Document</a></code> parsed using the <a id="template-XSLT-XPath:html-parser" href="parsing.html#html-parser">HTML parser</a> or the <a id="template-XSLT-XPath:xml-parser-2" href="xhtml.html#xml-parser">XML parser</a> described in this specification needs to ignore <a href="#template-contents" id="template-XSLT-XPath:template-contents-3">template contents</a>.</p>

  </ul>

  



  <h4 id="the-slot-element"><span class="secno">4.12.4</span> <dfn data-dfn-type="element"><code>slot</code></dfn>要素<a href="#the-slot-element" class="self-link"></a></h4><div class="mdn-anno wrapped"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot" title="The &lt;slot> HTML element—part of the Web Components technology suite—is a placeholder inside a web component that you can fill with your own markup, which lets you create separate DOM trees and present them together.">Element/slot</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>63+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>53+</span></span><hr><span class="opera yes"><span>Opera</span><span>40+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>63+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>53+</span></span><span class="webview_android yes"><span>WebView Android</span><span>53+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>6.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>41+</span></span></div></div></div>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement" title="The HTMLSlotElement interface of the Shadow DOM API enables access to the name and assigned nodes of an HTML &lt;slot> element.">HTMLSlotElement</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>63+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>53+</span></span><hr><span class="opera yes"><span>Opera</span><span>40+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>63+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>53+</span></span><span class="webview_android yes"><span>WebView Android</span><span>53+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>6.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>41+</span></span></div></div></div><dl class="element"><dt><a href="dom.html#concept-element-categories" id="the-slot-element:concept-element-categories">カテゴリー</a>：<dd><a id="the-slot-element:flow-content-2" href="dom.html#flow-content-2">フローコンテンツ</a>。<dd><a id="the-slot-element:phrasing-content-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>。<dt><a href="dom.html#concept-element-contexts" id="the-slot-element:concept-element-contexts">この要素を使用できるコンテキスト</a>：<dd><a id="the-slot-element:phrasing-content-2-2" href="dom.html#phrasing-content-2">フレージングコンテンツ</a>が期待される場所。<dt><a href="dom.html#concept-element-content-model" id="the-slot-element:concept-element-content-model">コンテンツモデル</a>：<dd><a id="the-slot-element:transparent" href="dom.html#transparent">透過的</a><dt><a href="dom.html#concept-element-tag-omission" id="the-slot-element:concept-element-tag-omission">text/htmlにおけるタグ省略</a>：<dd>どちらのタグも省略不可。<dt><a href="dom.html#concept-element-attributes" id="the-slot-element:concept-element-attributes">コンテンツ属性</a>：<dd><a id="the-slot-element:global-attributes" href="dom.html#global-attributes">グローバル属性</a><dd><code id="the-slot-element:attr-slot-name"><a href="#attr-slot-name">name</a></code> — シャドウツリースロットの名前<dt><a href="dom.html#concept-element-accessibility-considerations" id="the-slot-element:concept-element-accessibility-considerations">アクセシビリティの考慮</a>：<dd><a href="https://momdo.github.io/html-aria/#el-slot">著者向け</a>。<dd><a href="https://w3c.github.io/html-aam/#el-slot">実装者向け</a>。<dt><a href="dom.html#concept-element-dom" id="the-slot-element:concept-element-dom">DOMインターフェイス</a>：<dd><pre><code class='idl'>[<c- g>Exposed</c->=<c- n>Window</c->]
<c- b>interface</c-> <dfn id='htmlslotelement' data-dfn-type='interface'><c- g>HTMLSlotElement</c-></dfn> : <a id='the-slot-element:htmlelement' href='dom.html#htmlelement'><c- n>HTMLElement</c-></a> {
  [<a id='the-slot-element:htmlconstructor' href='dom.html#htmlconstructor'><c- g>HTMLConstructor</c-></a>] <c- g>constructor</c->();

  [<a id='the-slot-element:cereactions' href='custom-elements.html#cereactions'><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <c- b>DOMString</c-> <a href='#dom-slot-name' id='the-slot-element:dom-slot-name'><c- g>name</c-></a>;
  <c- b>sequence</c->&lt;<c- n>Node</c->> <a href='#dom-slot-assignednodes' id='the-slot-element:dom-slot-assignednodes'><c- g>assignedNodes</c-></a>(<c- b>optional</c-> <a href='#assignednodesoptions' id='the-slot-element:assignednodesoptions'><c- n>AssignedNodesOptions</c-></a> <c- g>options</c-> = {});
  <c- b>sequence</c->&lt;<c- n>Element</c->> <a href='#dom-slot-assignedelements' id='the-slot-element:dom-slot-assignedelements'><c- g>assignedElements</c-></a>(<c- b>optional</c-> <a href='#assignednodesoptions' id='the-slot-element:assignednodesoptions-2'><c- n>AssignedNodesOptions</c-></a> <c- g>options</c-> = {});
  <c- b>undefined</c-> <a href='#dom-slot-assign' id='the-slot-element:dom-slot-assign'><c- g>assign</c-></a>((<a id='the-slot-element:element' href='https://triple-underscore.github.io/DOM4-ja.html#interface-element' data-x-internal='element'><c- n>Element</c-></a> <c- b>or</c-> <a id='the-slot-element:text' href='https://triple-underscore.github.io/DOM4-ja.html#interface-text' data-x-internal='text'><c- n>Text</c-></a>)... <c- g>nodes</c->);
};

<c- b>dictionary</c-> <dfn id='assignednodesoptions' data-dfn-type='dictionary'><c- g>AssignedNodesOptions</c-></dfn> {
  <c- b>boolean</c-> <dfn data-dfn-for='AssignedNodeOptions' id='dom-assignednodesoptions-flatten' data-dfn-type='dict-member'><c- g>flatten</c-></dfn> = <c- b>false</c->;
};</code></pre>
   </dl>

  <p><code id="the-slot-element:the-slot-element"><a href="#the-slot-element">slot</a></code>要素は、<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-slot" id="the-slot-element:concept-slot" data-x-internal="concept-slot">スロット</a>を定義する。典型的に<a id="the-slot-element:shadow-tree" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-tree" data-x-internal="shadow-tree">シャドウツリー</a>に使用される。もしあれば、<code id="the-slot-element:the-slot-element-2"><a href="#the-slot-element">slot</a></code>要素はその<a id="the-slot-element:assigned-nodes" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">割り当てられるノード</a>を<a id="the-slot-element:represents" href="dom.html#represents">表し</a>、そうでなければそのコンテンツを表す。</p>

  <p><dfn data-dfn-for="slot" id="attr-slot-name" data-dfn-type="element-attr"><code>name</code></dfn>コンテンツ属性は、任意の文字列値を含んでもよい。これは<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-slot" id="the-slot-element:concept-slot-2" data-x-internal="concept-slot">スロット</a>の<a href="https://triple-underscore.github.io/DOM4-ja.html#slot-name" id="the-slot-element:slot-name" data-x-internal="slot-name">名前</a>を表す。</p>

  <p class="note"><code id="the-slot-element:attr-slot-name-2"><a href="#attr-slot-name">slot</a></code>属性は、別の要素に<a href="https://triple-underscore.github.io/DOM4-ja.html#assign-a-slot" id="the-slot-element:assign-a-slot" data-x-internal="assign-a-slot">スロットを割り当てる</a>ために使用される：<code id="the-slot-element:attr-slot-name-3"><a href="#attr-slot-name">name</a></code>属性をもつ<code id="the-slot-element:the-slot-element-3"><a href="#the-slot-element">slot</a></code>要素は、その要素がその<code id="the-slot-element:attr-slot-name-4"><a href="#attr-slot-name">name</a></code>属性の値と一致する値を持つ<code id="the-slot-element:attr-slot"><a href="dom.html#attr-slot">slot</a></code>属性を持ち、かつ<code id="the-slot-element:the-slot-element-4"><a href="#the-slot-element">slot</a></code>要素がその対応する<code id="the-slot-element:attr-slot-2"><a href="dom.html#attr-slot">slot</a></code>属性値を持つ<a id="the-slot-element:root" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root" data-x-internal="root">ルート</a>の<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-documentfragment-host" id="the-slot-element:concept-documentfragment-host" data-x-internal="concept-documentfragment-host">ホスト</a>を持つ<a id="the-slot-element:shadow-tree-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-shadow-tree" data-x-internal="shadow-tree">シャドウツリー</a>の子である場合、任意の要素が<a href="https://triple-underscore.github.io/DOM4-ja.html#assign-a-slot" id="the-slot-element:assign-a-slot-2" data-x-internal="assign-a-slot">割り当てられる</a>名前付き<a href="https://triple-underscore.github.io/DOM4-ja.html#concept-slot" id="the-slot-element:concept-slot-3" data-x-internal="concept-slot">スロット</a>を作成する。</p>

  <dl class="domintro"><dt><code><var>slot</var>.<a href="#dom-slot-name" id="dom-slot-name-dev">name</a></code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/name" title="The name property of the HTMLSlotElement interface returns or sets the slot name. A slot is a placeholder inside a web component that users can fill with their own markup.">HTMLSlotElement/name</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>63+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>53+</span></span><hr><span class="opera yes"><span>Opera</span><span>40+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>63+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>53+</span></span><span class="webview_android yes"><span>WebView Android</span><span>53+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>6.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>41+</span></span></div></div></div><dd><var>slot</var>の<a href="https://triple-underscore.github.io/DOM4-ja.html#slot-name" id="the-slot-element:slot-name-2" data-x-internal="slot-name">名前</a>を取得し設定することが可能である。<dt><code><var>slot</var>.<a href="#dom-slot-assignednodes" id="dom-slot-assignednodes-dev">assignedNodes</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/assignedNodes" title="The assignedNodes() method of the HTMLSlotElement interface returns a sequence of the nodes assigned to this slot.">HTMLSlotElement/assignedNodes</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>63+</span></span><span class="safari yes"><span>Safari</span><span>10+</span></span><span class="chrome yes"><span>Chrome</span><span>53+</span></span><hr><span class="opera yes"><span>Opera</span><span>40+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>63+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>10+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>53+</span></span><span class="webview_android yes"><span>WebView Android</span><span>53+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>6.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>41+</span></span></div></div></div><dd><var>slot</var>の<a id="the-slot-element:assigned-nodes-2" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">割り当てられるノード</a>を返す。<dt><code><var>slot</var>.<a href="#dom-slot-assignednodes" id="the-slot-element:dom-slot-assignednodes-2">assignedNodes</a>({ flatten: true })</code><dd>もしあれば、<var>slot</var>の<a id="the-slot-element:assigned-nodes-3" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">割り当てられるノード</a>を返し、そうでなければ<var>slot</var>の子を返し、かつ<code id="the-slot-element:the-slot-element-6"><a href="#the-slot-element">slot</a></code>要素が存在しなくなるまで、再帰的に、<code id="the-slot-element:the-slot-element-5"><a href="#the-slot-element">slot</a></code>要素に遭遇するのと同じものを返す。<dt><code><var>slot</var>.<a href="#dom-slot-assignedelements" id="dom-slot-assignedelements-dev">assignedElements</a>()</code><div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><b title="Support in all current engines." class="all-engines-flag">✔</b><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/assignedElements" title="The assignedElements() method of the HTMLSlotElement interface returns a sequence of the elements assigned to this slot (and no other nodes).">HTMLSlotElement/assignedElements</a><p class="all-engines-text">Support in all current engines.<div class="support"><span class="firefox yes"><span>Firefox</span><span>66+</span></span><span class="safari yes"><span>Safari</span><span>12.1+</span></span><span class="chrome yes"><span>Chrome</span><span>65+</span></span><hr><span class="opera yes"><span>Opera</span><span>52+</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>66+</span></span><span class="safari_ios yes"><span>Safari iOS</span><span>12.2+</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>65+</span></span><span class="webview_android yes"><span>WebView Android</span><span>65+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>9.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>47+</span></span></div></div></div><dd>要素に限定された、<var>slot</var>の<a id="the-slot-element:assigned-nodes-4" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">割り当てられたノード</a>を返す。<dt><code><var>slot</var>.<a href="#dom-slot-assignedelements" id="the-slot-element:dom-slot-assignedelements-2">assignedElements</a>({ flatten: true })</code><dd>要素に限定された<code id="the-slot-element:dom-slot-assignednodes-3"><a href="#dom-slot-assignednodes">assignedNodes({ flatten: true })</a></code>と同じものを返す。<dt><code><var>slot</var>.<a href="#dom-slot-assign" id="the-slot-element:dom-slot-assign-2">assign</a>(...<var>nodes</var>)</code><dd><p>Sets <var>slot</var>'s <a href="#manually-assigned-nodes" id="the-slot-element:manually-assigned-nodes">manually assigned nodes</a> to the given <var>nodes</var>.</dl>

  <p><dfn data-dfn-for="HTMLSlotElement" id="dom-slot-name" data-dfn-type="attribute"><code>name</code></dfn> IDL属性は、同じ名前のコンテンツ属性を<a id="the-slot-element:reflect" href="common-dom-interfaces.html#reflect">反映</a>しなければならない。</p>

  <p>The <code id="the-slot-element:the-slot-element-7"><a href="#the-slot-element">slot</a></code> element has <dfn data-dfn-for="HTMLSlotElement" id="manually-assigned-nodes" data-export="">manually assigned nodes</dfn>, which is an <a href="https://triple-underscore.github.io/infra-ja.html#ordered-set" id="the-slot-element:set" data-x-internal="set">ordered set</a> of <a href="https://dom.spec.whatwg.org/#concept-slotable" id="the-slot-element:slottable" data-x-internal="slottable">slottables</a> set by <code id="the-slot-element:dom-slot-assign-3"><a href="#dom-slot-assign">assign()</a></code>. This set is initially empty.</p>

  <p class="note">The <a href="#manually-assigned-nodes" id="the-slot-element:manually-assigned-nodes-2">manually assigned nodes</a> set can be implemented using weak references to the <a href="https://dom.spec.whatwg.org/#concept-slotable" id="the-slot-element:slottable-2" data-x-internal="slottable">slottables</a>, because this set is not directly accessible from script.</p>

  <p>The <dfn data-dfn-for="HTMLSlotElement" id="dom-slot-assignednodes" data-dfn-type="method"><code>assignedNodes(<var>options</var>)</code></dfn> method steps are:</p>

  <ol><li><p>If <var>options</var>["<code id="the-slot-element:dom-assignednodesoptions-flatten"><a href="#dom-assignednodesoptions-flatten">flatten</a></code>"] is false, then return <a id="the-slot-element:this" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>'s <a id="the-slot-element:assigned-nodes-5" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">assigned nodes</a>.<li><p>Return the result of <a id="the-slot-element:finding-flattened-slottables" href="https://triple-underscore.github.io/DOM4-ja.html#find-flattened-slotables" data-x-internal="finding-flattened-slottables">finding flattened slottables</a> with <a id="the-slot-element:this-2" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>.</ol>

  <p>The <dfn data-dfn-for="HTMLSlotElement" id="dom-slot-assignedelements" data-dfn-type="method"><code>assignedElements(<var>options</var>)</code></dfn> method steps are:</p>

  <ol><li><p>If <var>options</var>["<code id="the-slot-element:dom-assignednodesoptions-flatten-2"><a href="#dom-assignednodesoptions-flatten">flatten</a></code>"] is false, then return <a id="the-slot-element:this-3" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>'s <a id="the-slot-element:assigned-nodes-6" href="https://triple-underscore.github.io/DOM4-ja.html#slot-assigned-nodes" data-x-internal="assigned-nodes">assigned nodes</a>, filtered to contain only <code id="the-slot-element:element-2"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code> nodes.<li><p>Return the result of <a id="the-slot-element:finding-flattened-slottables-2" href="https://triple-underscore.github.io/DOM4-ja.html#find-flattened-slotables" data-x-internal="finding-flattened-slottables">finding flattened slottables</a> with <a id="the-slot-element:this-4" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>, filtered to contain only <code id="the-slot-element:element-3"><a data-x-internal="element" href="https://triple-underscore.github.io/DOM4-ja.html#interface-element">Element</a></code> nodes.</ol>

  <div class="mdn-anno wrapped before"><button onclick="toggleStatus(this)" class="mdn-anno-btn"><span>MDN</span></button><div class="feature"><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLSlotElement/assign" title="The assign() method of the HTMLSlotElement interface sets the slot's manually assigned nodes to an ordered set of slottables. The manually assigned nodes set is initially empty until nodes are assigned using assign().">HTMLSlotElement/assign</a><div class="support"><span class="firefox yes"><span>Firefox</span><span>92+</span></span><span class="safari no"><span>Safari</span><span>No</span></span><span class="chrome yes"><span>Chrome</span><span>86+</span></span><hr><span class="opera yes"><span>Opera</span><span>72+</span></span><span class="edge_blink yes"><span>Edge</span><span>86+</span></span><hr><span class="edge no"><span>Edge (Legacy)</span><span>No</span></span><span class="ie no"><span>Internet Explorer</span><span>No</span></span><hr><span class="firefox_android yes"><span>Firefox Android</span><span>92+</span></span><span class="safari_ios no"><span>Safari iOS</span><span>No</span></span><span class="chrome_android yes"><span>Chrome Android</span><span>86+</span></span><span class="webview_android yes"><span>WebView Android</span><span>86+</span></span><span class="samsunginternet_android yes"><span>Samsung Internet</span><span>14.0+</span></span><span class="opera_android yes"><span>Opera Android</span><span>61+</span></span></div></div></div><p>The <dfn data-dfn-for="HTMLSlotElement" id="dom-slot-assign" data-dfn-type="method"><code>assign(...<var>nodes</var>)</code></dfn> method steps are:</p>

  <ol><li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="the-slot-element:list-iterate" data-x-internal="list-iterate">For each</a> <var>node</var> of <a id="the-slot-element:this-5" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>'s <a href="#manually-assigned-nodes" id="the-slot-element:manually-assigned-nodes-3">manually assigned nodes</a>, set <var>node</var>'s <a id="the-slot-element:manual-slot-assignment" href="https://dom.spec.whatwg.org/#slottable-manual-slot-assignment" data-x-internal="manual-slot-assignment">manual slot assignment</a> to null.<li><p>Let <var>nodesSet</var> be a new <a href="https://triple-underscore.github.io/infra-ja.html#ordered-set" id="the-slot-element:set-2" data-x-internal="set">ordered set</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="the-slot-element:list-iterate-2" data-x-internal="list-iterate">For each</a> <var>node</var> of <var>nodes</var>:</p>

    <ol><li><p>If <var>node</var>'s <a id="the-slot-element:manual-slot-assignment-2" href="https://dom.spec.whatwg.org/#slottable-manual-slot-assignment" data-x-internal="manual-slot-assignment">manual slot assignment</a> refers to a <a href="#the-slot-element" id="the-slot-element:the-slot-element-8">slot</a>, then remove <var>node</var> from that <a href="#the-slot-element" id="the-slot-element:the-slot-element-9">slot</a>'s <a href="#manually-assigned-nodes" id="the-slot-element:manually-assigned-nodes-4">manually assigned nodes</a>.<li><p>Set <var>node</var>'s <a id="the-slot-element:manual-slot-assignment-3" href="https://dom.spec.whatwg.org/#slottable-manual-slot-assignment" data-x-internal="manual-slot-assignment">manual slot assignment</a> to <a id="the-slot-element:this-6" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#set-append" id="the-slot-element:set-append" data-x-internal="set-append">Append</a> <var>node</var> to <var>nodesSet</var>.</ol>
   <li><p>Set <a id="the-slot-element:this-7" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>'s <a href="#manually-assigned-nodes" id="the-slot-element:manually-assigned-nodes-5">manually assigned nodes</a> to <var>nodesSet</var>.<li><p>Run <a id="the-slot-element:assign-slottables-for-a-tree" href="https://dom.spec.whatwg.org/#assign-slotables-for-a-tree" data-x-internal="assign-slottables-for-a-tree">assign slottables for a tree</a> for <a id="the-slot-element:this-8" href="https://webidl.spec.whatwg.org/#this" data-x-internal="this">this</a>'s <a id="the-slot-element:root-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-tree-root" data-x-internal="root">root</a>.</ol>


  <nav><a href="interactive-elements.html">← 4.11 対話的な要素</a> — <a href="./">目次</a> — <a href="canvas.html">4.12.5 canvas要素 →</a></nav>
