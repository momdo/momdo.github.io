<!DOCTYPE html><html class="split" lang="ja"><script src="https://html.spec.whatwg.org/link-fixup.js" defer=""></script><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"><title>HTML Standard 日本語訳</title><meta content="#3c790a" name="theme-color"><link rel="stylesheet" href="https://resources.whatwg.org/spec.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard.css" crossorigin=""><link rel="stylesheet" href="https://resources.whatwg.org/standard-shared-with-dev.css" crossorigin=""><link rel="icon" href="https://resources.whatwg.org/logo.svg" crossorigin=""><link rel="stylesheet" href="https://html.spec.whatwg.org/styles.css" crossorigin=""><script>
   function toggleStatus(div) {
     div.parentNode.classList.toggle('wrapped');
   }
   function setLinkFragment(link) {
     link.hash = location.hash;
   }
  </script><body>
  
  <script async="" crossorigin="" src="./html-dfn.js"></script>
  <script data-file-issue-url="https://github.com/momdo/momdo.github.io/issues/new" async="" crossorigin="" src="https://resources.whatwg.org/file-issue.js"></script>
  
  <header id="head" class="head with-buttons"><a href="https://whatwg.org/" class="logo"><img width="100" alt="WHATWG" crossorigin="" src="https://resources.whatwg.org/logo.svg" height="100"></a><hgroup><h1 class="allcaps">HTML</h1><p id="living-standard">Living Standard — Last Updated <span class="pubdate">2 December 2022</span></hgroup>
   
   

   
  </header>

  

  

  

  
  

  
  

  

  <nav><a href="embedded-content.html">← 4.8 埋め込みコンテンツ</a> — <a href="./">目次</a> — <a href="iframe-embed-object.html">4.8.5 iframe要素 →</a></nav><ol class="toc"><li id="toc-semantics"><ol><li><ol><li><a href="images.html#images"><span class="secno">4.8.4</span> 画像</a><ol><li><a href="images.html#introduction-3"><span class="secno">4.8.4.1</span> 導入</a><ol><li><a href="images.html#adaptive-images"><span class="secno">4.8.4.1.1</span> アダプティブ画像</a></ol><li><a href="images.html#attributes-common-to-source-and-img-elements"><span class="secno">4.8.4.2</span> <code>source</code>、<code>img</code>および<code>link</code> 要素の共通属性</a><ol><li><a href="images.html#srcset-attributes"><span class="secno">4.8.4.2.1</span> srcset共通属性</a><li><a href="images.html#sizes-attributes"><span class="secno">4.8.4.2.2</span> size属性</a></ol><li><a href="images.html#images-processing-model"><span class="secno">4.8.4.3</span> Processing model</a><ol><li><a href="images.html#when-to-obtain-images"><span class="secno">4.8.4.3.1</span> When to obtain images</a><li><a href="images.html#reacting-to-dom-mutations"><span class="secno">4.8.4.3.2</span> Reacting to DOM mutations</a><li><a href="images.html#the-list-of-available-images"><span class="secno">4.8.4.3.3</span> The list of available images</a><li><a href="images.html#decoding-images"><span class="secno">4.8.4.3.4</span> Decoding images</a><li><a href="images.html#updating-the-image-data"><span class="secno">4.8.4.3.5</span> Updating the image data</a><li><a href="images.html#preparing-an-image-for-presentation"><span class="secno">4.8.4.3.6</span> Preparing an image for presentation</a><li><a href="images.html#selecting-an-image-source"><span class="secno">4.8.4.3.7</span> Selecting an image source</a><li><a href="images.html#creating-a-source-set-from-attributes"><span class="secno">4.8.4.3.8</span> Creating a source set from attributes</a><li><a href="images.html#updating-the-source-set"><span class="secno">4.8.4.3.9</span> Updating the source set</a><li><a href="images.html#parsing-a-srcset-attribute"><span class="secno">4.8.4.3.10</span> Parsing a srcset attribute</a><li><a href="images.html#parsing-a-sizes-attribute"><span class="secno">4.8.4.3.11</span> Parsing a sizes attribute</a><li><a href="images.html#normalizing-the-source-densities"><span class="secno">4.8.4.3.12</span> Normalizing the source densities</a><li><a href="images.html#reacting-to-environment-changes"><span class="secno">4.8.4.3.13</span> Reacting to environment changes</a></ol><li><a href="images.html#alt"><span class="secno">4.8.4.4</span> 画像に対して代替として動作するテキストを提供に対する要件</a><ol><li><a href="images.html#general-guidelines"><span class="secno">4.8.4.4.1</span> 一般的なガイドライン</a><li><a href="images.html#a-link-or-button-containing-nothing-but-the-image"><span class="secno">4.8.4.4.2</span> 画像のみを含むリンクまたはボタン</a><li><a href="images.html#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations"><span class="secno">4.8.4.4.3</span> 代替グラフィカル表現をもつフレーズまたは段落：チャート、図、グラフ、マップ、イラスト</a><li><a href="images.html#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos"><span class="secno">4.8.4.4.4</span> 代替グラフィカル表現をもつ短いフレーズまたはラベル：アイコン、ロゴ</a><li><a href="images.html#text-that-has-been-rendered-to-a-graphic-for-typographical-effect"><span class="secno">4.8.4.4.5</span> 印刷効果のためにグラフィックにレンダリングされたテキスト</a><li><a href="images.html#a-graphical-representation-of-some-of-the-surrounding-text"><span class="secno">4.8.4.4.6</span> 周囲のテキストの一部をグラフィカルに表現</a><li><a href="images.html#ancillary-images"><span class="secno">4.8.4.4.7</span> 補助画像</a><li><a href="images.html#a-purely-decorative-image-that-doesn't-add-any-information"><span class="secno">4.8.4.4.8</span> 情報を追加しない、純粋に装飾的な画像</a><li><a href="images.html#a-group-of-images-that-form-a-single-larger-picture-with-no-links"><span class="secno">4.8.4.4.9</span> リンクのない単一の大きな画像を形成する画像のグループ</a><li><a href="images.html#a-group-of-images-that-form-a-single-larger-picture-with-links"><span class="secno">4.8.4.4.10</span> リンクのある単一の大きな画像を形成する画像のグループ</a><li><a href="images.html#a-key-part-of-the-content"><span class="secno">4.8.4.4.11</span> コンテンツのキーパート</a><li><a href="images.html#an-image-not-intended-for-the-user"><span class="secno">4.8.4.4.12</span> ユーザーを意図しない画像</a><li><a href="images.html#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images"><span class="secno">4.8.4.3.13</span> 画像を閲覧できることが知られている特定の人のために意図された電子メールまたは私的文書における画像</a><li><a href="images.html#guidance-for-markup-generators"><span class="secno">4.8.4.4.14</span> Guidance for markup generators</a><li><a href="images.html#guidance-for-conformance-checkers"><span class="secno">4.8.4.4.15</span> Guidance for conformance checkers</a></ol></ol></ol></ol></ol><h4 id="images"><span class="secno">4.8.4</span> 画像<a href="#images" class="self-link"></a></h4>

  <h5 id="introduction-3"><span class="secno">4.8.4.1</span> 導入<a href="#introduction-3" class="self-link"></a></h5>

  <p><i>この節は非規範的である。</i></p>

  <p>単独の画像リソースのみが存在する場合、HTMLにおいて画像を埋め込むために、<code id="introduction-3:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素および<code id="introduction-3:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code>属性を使用する。</p>

  <div class="example"><pre><code class='html'><c- p>&lt;</c-><c- f>h2</c-><c- p>></c->From today's featured article<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/uploads/100-marie-lloyd.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-> <c- e>width</c-><c- o>=</c-><c- s>"100"</c-> <c- e>height</c-><c- o>=</c-><c- s>"150"</c-><c- p>></c-></strong>
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>b</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Marie_Lloyd"</c-><c- p>></c->Marie Lloyd<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>b</c-><c- p>></c-> (1870–1922)
was an English <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Music_hall"</c-><c- p>></c->music hall<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> singer, ...</code></pre>

  </div>

  <p>しかし、ユーザーエージェントが選択することができる複数の画像リソースを用いることを著者が望むかもしれない多数の状況が存在する：</p>

  <ul><li><p>異なるユーザーが異なる環境特性を持つかもしれない：</p>

    <ul><li><p>ユーザーの物理スクリーンサイズは他のものと異なるかもしれない。</p>

      <div class="example"><p>ラップトップのスクリーンは14インチ型であるかもしれない一方で、携帯電話のスクリーンは4インチ型であるかもしれない。</p>

       <svg font-size="2.5" role="img" viewBox="0 0 80 32" font-family="sans-serif" height="200" aria-label="The phone's screen is much smaller compared to the laptop's screen.">
        
        <rect width="6" fill="white" stroke="black" x="6" height="12" y="18" rx="1"></rect>
        <text transform="translate(9 24)
        rotate(-60)" text-anchor="middle" dominant-baseline="middle">4″</text>
        
        <rect width="40" stroke-width="2" fill="white" stroke="black" x="30" height="26" y="2" rx="2"></rect>
        <line y2="30" stroke-linecap="round" stroke-width="2" stroke="black" x1="26" y1="30" x2="74"></line>
        <text transform="translate(50 15)
        rotate(-30)" text-anchor="middle" dominant-baseline="middle">14″</text>
       </svg>
      </div>

      <p class="note">画像のレンダリングサイズが<a id="introduction-3:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>に依存する場合、これは単に関連するだけである。</p>
     <li><p>ユーザーのスクリーンピクセル密度は、別のスクリーンと異なるかもしれない。</p>

      <div class="example"><p>携帯電話のスクリーンは、物理スクリーンサイズに関わらず、別の携帯電話のスクリーンと比較してインチあたり物理ピクセルとして3倍になるかもしれない。</p>

       <svg font-size="2.5" role="img" viewBox="0 0 56 27" font-family="sans-serif" height="170" aria-label="One phone has big pixels, the other has small pixels.">
        <defs>
         <pattern id="img-intro-pixel" width="3" patternUnits="userSpaceOnUse" stroke-linecap="round" x="0" y="0" height="3">
          <rect fill="black" width="3" x="0" height="3" y="0"></rect>
          <line y2="2.5" stroke="red" x1="0.5" x2="0.5" y1="0.5"></line>
          <line y2="2.5" stroke="lime" x1="1.5" x2="1.5" y1="0.5"></line>
          <line y2="2.5" stroke="blue" x1="2.5" x2="2.5" y1="0.5"></line>
         </pattern>
        </defs>
        
        <rect width="6" fill="white" stroke="black" x="6" height="12" y="8" rx="1"></rect>
        <rect width="6" fill="white" stroke="black" x="36" height="12" y="8" rx="1"></rect>
        
        <line y2="24" stroke-width="3" stroke="brown" x1="15" y1="16" x2="22"></line>
        <circle cx="10" cy="10" fill="url(#img-intro-pixel)" stroke="black" r="8"></circle>
        <line y2="24" stroke-width="3" stroke="brown" x1="45" y1="16" x2="52"></line>
        <circle cx="120" transform="scale(0.333333)" cy="30" r="24" stroke-width="3" fill="url(#img-intro-pixel)" stroke="black"></circle>
        
        <text x="20" y="10" dominant-baseline="middle">1x</text>
        <text x="50" y="10" dominant-baseline="middle">3x</text>
       </svg>
      </div>
     <li><p>ユーザーのズームレベルは別のものと異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <p class="example">ユーザーは、特定の画像の詳細を見るためにズームするかもしれない。</p>

      <p>ズームレベルおよびスクリーンピクセル密度（前のポイント）は、<a href="https://triple-underscore.github.io/css-values-ja.html#px" id="introduction-3:'px'" data-x-internal="'px'">CSSピクセル</a>密度あたり多数の物理スクリーンピクセルに影響を与えることができる。この比率は、一般に<dfn id="device-pixel-ratio">デバイスピクセル比</dfn>として参照される。</p>
     <li><p>ユーザーのスクリーン方向は別のものと異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <div class="example"><p>タブレットは縦型または90度回転して固定されることができ、その結果スクリーンは、"縦長"（portrait）または"横長"（landscape）のいずれかとなる。</p>

       <svg font-size="2.5" role="img" viewBox="0 0 60 32" font-family="sans-serif" height="200" aria-label="The tablet has two orientations.">
        
        <rect width="14" fill="white" stroke="black" x="6" height="20" y="5" rx="1"></rect>
        <line y2="24" stroke-width="1.1" stroke="black" x1="6" y1="24" x2="20"></line>
        <text text-anchor="middle" x="13" y="14.5" dominant-baseline="middle">Portrait</text>
        <rect width="20" fill="white" stroke="black" x="30" height="14" y="11" rx="1"></rect>
        <line y2="11" stroke-width="1.1" stroke="black" x1="31" y1="25" x2="31"></line>
        <text text-anchor="middle" x="40.5" y="18" dominant-baseline="middle">Landscape</text>
       </svg>
      </div>
     <li><p>ユーザーのネットワーク速度、ネットワークレイテンシおよび帯域幅コストは異なるかもしれず、時間とともに単独のユーザーに対して変化するかもしれない。</p>

      <p class="example">ユーザーは、仕事で低レイテンシおよび一定コスト接続の高速かもしれないし、家で低レイテンシおよび一定コスト接続の低速かもしれないし、他の場所で高レイテンシおよび可変コスト接続の速度変化かもしれない。</p>
     </ul>
   <li><p>著者は、<a id="introduction-3:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>の幅に依存して、同じ画像だが異なるレンダリングサイズを表示したいかもしれない。これは通常<dfn id="viewport-based-selection">ビューポートベースの選択</dfn>として参照される。</p>

    <div class="example"><p>ウェブページは、常に全体の<a id="introduction-3:viewport-3" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅に及ぶ、一番上のバナーを持つかもしれない。この場合、画像のレンダリングサイズはスクリーンの物理サイズに依存する（最大化されたブラウザーウィンドウを仮定する）。</p>

     <svg viewBox="0 0 52 25.6" height="160" aria-label="The upright-held phone shows a small wolf at the top, and the tablet shows the same image but it is bigger." role="img">
      

      
      <rect width="6" fill="white" stroke="black" x="6" height="12" y="8" rx="1"></rect>
      <rect fill="#716966" x="7" width="4" height="2" y="9"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/wolf.jpg" width="4" x="7" y="9" height="2"></image><rect width="20" fill="white" stroke="black" x="25" height="14" y="6" rx="1"></rect>
      <line y2="6" stroke-width="1.1" stroke="black" x1="26" y1="20" x2="26"></line>
      <rect fill="#716966" x="27" width="17" height="8.5" y="7"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/wolf.jpg" width="17" x="27" y="7" height="8.5"></image></svg>
    </div>

    <div class="example"><p>別のウェブページは、小さな物理サイズをもつスクリーンに対する列、中程度の物理サイズをもつスクリーンに対する列、大きな物理サイズをもつスクリーンに対する列をともない、<a id="introduction-3:viewport-4" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>を埋める各ケースにおいてレンダリングサイズの変化する画像をもつ、列における画像を持つかもしれない。この場合、画像のレンダリングサイズは、スクリーンがより小さくにもかかわらず、2列レイアウトと比較して1列レイアウトで<em>より大きく</em>なるかもしれない。</p>

     <svg font-size="2.5" role="img" viewBox="0 0 115 32" font-family="sans-serif" height="200" aria-label="The rotated phone shows a top part of an image of a kettlebell swing; the upright-held tablet shows a bit smaller images in two columns; the laptop shows images in three columns.">
      

      
      <rect width="12" fill="white" stroke="black" x="6" height="6" y="24" rx="1"></rect>
      <rect fill="#987b5a" width="10" x="7" height="4.5" y="25"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/kettlebell.jpg" preserveAspectRatio="xMinYMin slice" width="10" x="7" y="25" height="4.5"></image><text text-anchor="middle" x="12" y="21">Narrow, 1 column</text>

      
      <rect width="14" fill="white" stroke="black" x="32" height="20" y="10" rx="1"></rect>
      <line y2="29" stroke-width="1.1" stroke="black" x1="32" y1="29" x2="46"></line>
      <rect fill="#987b5a" width="5.5" x="33" height="5.5" y="11"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/kettlebell.jpg" width="5.5" x="33" y="11" height="5.5"></image><rect fill="burlywood" width="5.5" x="39.5" height="5.5" y="11"></rect>
      <rect fill="silver" width="5.5" x="33" height="5.5" y="17.5"></rect>
      <text text-anchor="middle" x="39" y="7">Medium, 2 columns</text>

      
      <rect width="40" stroke-width="2" fill="white" stroke="black" x="65" height="26" y="2" rx="2"></rect>
      <line y2="30" stroke-linecap="round" stroke-width="2" stroke="black" x1="61" y1="30" x2="109"></line>
      <rect fill="#987b5a" width="10" x="67" height="10" y="4"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/kettlebell.jpg" width="10" x="67" y="4" height="10"></image><rect fill="burlywood" width="10" x="80" height="10" y="4"></rect>
      <rect fill="silver" width="10" x="93" height="10" y="4"></rect>
      <text text-anchor="middle" x="85" y="25">Wide, 3 columns</text>
     </svg>
    </div>
   <li><p>著者は、画像のレンダリングサイズ次第で異なる画像コンテンツを表示したいかもしれない。これは通常<dfn id="art-direction">art direction</dfn>として参照される。</p>

    <div class="example"><p>ウェブページが大きな物理サイズ（最大化されたブラウザーウィンドウと仮定する）をもつスクリーンで見られる場合、著者は画像の重要な部分を囲むあまり関連しない部分を含むことを望むかもしれない。ウェブページが小さなな物理サイズをもつスクリーンで見られる場合、著者は画像の重要な部分のみを表示することを望むかもしれない。</p>

     <svg viewBox="0 0 52 25.6" height="160" aria-label="The upright-held phone shows a cropped image of a wolf; the rotated tablet shows the uncropped image." role="img">
      

      
      <rect width="6" fill="white" stroke="black" x="6" height="12" y="8" rx="1"></rect>
      <rect fill="#716966" x="7" width="4" height="6" y="9"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/wolf.jpg" preserveAspectRatio="xMidYMid slice" width="4" x="7" y="9" height="6"></image><rect width="20" fill="white" stroke="black" x="25" height="14" y="6" rx="1"></rect>
      <line y2="6" stroke-width="1.1" stroke="black" x1="26" y1="20" x2="26"></line>
      <rect fill="#716966" x="27" width="17" height="8.5" y="7"></rect><image xlink:href="https://html.spec.whatwg.org/multipage/images/wolf.jpg" width="17" x="27" y="7" height="8.5"></image></svg>
    </div>
   <li><p>著者は、ユーザーエージェントがサポートする画像フォーマットに応じて、同じ画像コンテンツだが異なる画像フォーマットを表示したいかもしれない。これは通常<dfn id="image-format-based-selection">画像フォーマットベースの選択</dfn>として参照される。</p>

    <p class="example">ウェブページは、JPEG、JPEGと比較してより圧縮能力のよいWebPおよびJPEG XRフォーマットで画像を持つかもしれない。異なるユーザーエージェントは、よりよい圧縮比を提供するフォーマットをもつ、異なる画像フォーマットをサポートすることができるため、サポートしないユーザーエージェントに対してJPEGフォールバックを提供する一方で、著者はフォーマットをサポートするユーザーエージェントに対してよりよいフォーマットを配信したいだろう。</p>
   </ul>

  <p>上記の状況は、相互に排他的ではない。たとえば、<a href="#art-direction" id="introduction-3:art-direction">art direction</a>に対する異なるリソースをもつ異なる<a href="#device-pixel-ratio" id="introduction-3:device-pixel-ratio">デバイスピクセル比</a>が異なるリソースを組み合わせることは理にかなっている。</p>

  <p>スクリプトを使用することでこれら問題を解決することは可能である間、そのようにすることは他の問題を導入する：</p>

  <ul><li><p>ウェブページがすぐに読み込み完了するように、スクリプトが実行する機会を持つ前に、一部のユーザーエージェントは、HTMLマークアップで指定される画像を積極的にダウンロードする。スクリプトがダウンロードする画像を変更する場合、より悪いページ読み込みパフォーマンスを引き起こすことができるダウンロードの代わりに、ユーザーエージェントはダウンロードを分離する2つを潜在的に開始するだろう。<li><p>著者がHTMLマークアップで任意の画像の指定を避け、かつスクリプトから単一のダウンロードを代わりに実例を示す場合、それは上記の2回のダウンロード問題を回避するが、無効にされるスクリプトをもつユーザーに対して画像を一切ダウンロードせず、かつ積極的な画像ダウンロード最適化も無効にされる。</ul>

  <p>このことを考慮して、この仕様は宣言する方法で上記の問題を申し立てるための多数の機能を導入する。</p>

  <dl><dt>画像のレンダリングサイズが固定される場合で<a href="#device-pixel-ratio" id="introduction-3:device-pixel-ratio-2">デバイスピクセル比</a>ベースの選択<dd><p><code id="introduction-3:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素の<code id="introduction-3:attr-img-src-2"><a href="embedded-content.html#attr-img-src">src</a></code>および<code id="introduction-3:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>は、（より小さいサイズがより大きい画像のスケールダウンバージョンとなる）画像サイズで変化するのみの複数の画像を提供するために<code>x</code>記述子を用いて使用することができる。</p>

    <p class="note">画像のレンダリングサイズが<a id="introduction-3:viewport-5" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅に依存する場合（<a href="#viewport-based-selection" id="introduction-3:viewport-based-selection">ビューポートベースの選択</a>）、<code>x</code>記述子は適さないが、<a href="#art-direction" id="introduction-3:art-direction-2">art direction</a>と一緒に使用することができる。</p>

    <div class="example"><pre><code class='html'><c- p>&lt;</c-><c- f>h2</c-><c- p>></c->From today's featured article<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
<c- p>&lt;</c-><c- f>img</c-> <strong><c- e>src</c-><c- o>=</c-><c- s>"/uploads/100-marie-lloyd.jpg"</c-></strong>
     <strong><c- e>srcset</c-><c- o>=</c-><c- s>"/uploads/150-marie-lloyd.jpg 1.5x, /uploads/200-marie-lloyd.jpg 2x"</c-></strong>
     <c- e>alt</c-><c- o>=</c-><c- s>""</c-> <c- e>width</c-><c- o>=</c-><c- s>"100"</c-> <c- e>height</c-><c- o>=</c-><c- s>"150"</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>b</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Marie_Lloyd"</c-><c- p>></c->Marie Lloyd<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>b</c-><c- p>></c-> (1870–1922)
was an English <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Music_hall"</c-><c- p>></c->music hall<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> singer, ...</code></pre>

     <p>ユーザーエージェントは、ユーザーのスクリーンのピクセル密度、ズームレベルおよびユーザーのネットワーク状態のような可能性のあるその他の要素に依存する与えられたリソースのどれでも選択することができる。</p>

     <p><code id="introduction-3:attr-img-srcset-2"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>属性を解釈しない古いユーザーエージェントの後方互換性のために、URLの1つは、<code id="introduction-3:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code>要素の<code id="introduction-3:attr-img-src-3"><a href="embedded-content.html#attr-img-src">src</a></code>属性で指定される。これは（ユーザーが好むよりももしかすると低い解像度だけれども）古いユーザーエージェントにおいてさえも表示されるという何かしら役に立つ結果になるだろう。新しいユーザーエージェントに対して、あたかも属性が<code>1x</code>記述子とともに<code id="introduction-3:attr-img-srcset-3"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>で指定されたかのように、<code id="introduction-3:attr-img-src-4"><a href="embedded-content.html#attr-img-src">src</a></code>属性はリソース選択に参加する。</p>

     <p>画像のレンダリングサイズは、画像がダウンロードされる前に画像に対する空間を割り当てることがユーザーエージェントにできる<code id="introduction-3:attr-dim-width"><a href="embedded-content-other.html#attr-dim-width">width</a></code>および<code id="introduction-3:attr-dim-height"><a href="embedded-content-other.html#attr-dim-height">height</a></code>属性で与えられる。</p>

    </div>
   <dt><a href="#viewport-based-selection" id="introduction-3:viewport-based-selection-2">ビューポートベースの選択</a><dd><p><code id="introduction-3:attr-img-srcset-4"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>および<code id="introduction-3:attr-img-sizes"><a href="embedded-content.html#attr-img-sizes">sizes</a></code>は、（より小さいサイズがより大きい画像のスケールダウンバージョンとなる）画像サイズで変化するのみの複数の画像を提供するために<code>w</code>記述子を用いて使用することができる。</p>

    <div class="example"><p>この例において、バナー画像は（適切なCSSを用いて）<a id="introduction-3:viewport-6" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅全体を取る。</p>

<pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>>&lt;</c-><c- f>img</c-> <strong><c- e>sizes</c-><c- o>=</c-><c- s>"100vw"</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"wolf-400.jpg 400w, wolf-800.jpg 800w, wolf-1600.jpg 1600w"</c-></strong>
     <c- e>src</c-><c- o>=</c-><c- s>"wolf-400.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The rad wolf"</c-><c- p>>&lt;/</c-><c- f>h1</c-><c- p>></c-></code></pre>

     <p>ユーザーエージェントは、指定される<code>w</code>記述子および<code id="introduction-3:attr-img-sizes-2"><a href="embedded-content.html#attr-img-sizes">sizes</a></code>属性で指定されるレンダリングサイズから各画像の効果的なピクセル密度を算出するだろう。 ユーザーエージェントは、ユーザーのスクリーンのピクセル密度、ズームレベルおよびユーザーのネットワーク状態のような可能性のあるその他の要素に依存する与えられたリソースのどれでも選択することができる。</p>

     <p>ユーザーのスクリーンが320 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="introduction-3:'px'-2" data-x-internal="'px'">CSSピクセル幅</a>である場合、これは<code>wolf-400.jpg 1.25x, wolf-800.jpg 2.5x, wolf-1600.jpg 5x</code>に指定するのと等価である。言い換えると、ユーザーのスクリーン1200 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="introduction-3:'px'-3" data-x-internal="'px'">CSSピクセル幅</a>である場合、これは<code>wolf-400.jpg 0.33x, wolf-800.jpg 0.67x, wolf-1600.jpg 1.33x</code>に指定するのと等価である。<code>w</code>記述子および<code id="introduction-3:attr-img-sizes-3"><a href="embedded-content.html#attr-img-sizes">sizes</a></code>属性を使用することによって、ユーザーエージェントはユーザーのデバイスの大きさにかかわらず、ダウンロードする正確な画像リソースを選択することができる。</p>

     <p>後方互換性のために、URLの1つは<code id="introduction-3:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code>要素の<code id="introduction-3:attr-img-src-5"><a href="embedded-content.html#attr-img-src">src</a></code>属性で指定される。新しいユーザーエージェントにおいて、<code id="introduction-3:attr-img-srcset-5"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>属性が<code>w</code>記述子を使用する場合、<code id="introduction-3:attr-img-src-6"><a href="embedded-content.html#attr-img-src">src</a></code>属性は無視される。</p>

    </div>

    <div class="example"><p>この例において、ウェブページは<a id="introduction-3:viewport-7" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>の幅に依存する3つのレイアウトを持つ。狭いレイアウトは1列目の画像（各画像の幅が約100%）、中程度のレイアウトは2列目の画像（各画像の幅が約50%）、広いレイアウトは3列目の画像（各画像の幅が約33%）、およびページマージンを持つ。<a id="introduction-3:viewport-8" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>がそれぞれ幅<code>30em</code>および幅<code>50em</code>である場合、これらのレイアウトを壊す。</p>

<pre><code class='html'><c- p>&lt;</c-><c- f>img</c-> <strong><c- e>sizes</c-><c- o>=</c-><c- s>"(max-width: 30em) 100vw, (max-width: 50em) 50vw, calc(33vw - 100px)"</c-></strong>
     <strong><c- e>srcset</c-><c- o>=</c-><c- s>"swing-200.jpg 200w, swing-400.jpg 400w, swing-800.jpg 800w, swing-1600.jpg 1600w"</c-></strong>
     <c- e>src</c-><c- o>=</c-><c- s>"swing-400.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Kettlebell Swing"</c-><c- p>></c-></code></pre>

     <p><code id="introduction-3:attr-img-sizes-4"><a href="embedded-content.html#attr-img-sizes">sizes</a></code>属性は、<code>30em</code>および<code>50em</code>でレイアウトのブレークポイントを設定し、これらブレークポイントの間で <code>100vw</code>、<code>50vw</code>または<code>calc(33vw - 100px)</code>に画像サイズを宣言する。これらサイズは、CSSで指定されたように実際の画像幅と厳密にマッチする必要が必然的にない。</p>

     <p>ユーザーエージェントは、trueに評価する<a id="introduction-3:media-condition" href="https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition" data-x-internal="media-condition">&lt;media-condition></a>（丸括弧の一部）をもつ最初の項目を用いる、またはそれらがfalseにすべて評価する場合、最後の項目（<code>calc(33vw - 100px)</code>）を用いて、<code id="introduction-3:attr-img-sizes-5"><a href="embedded-content.html#attr-img-sizes">sizes</a></code>属性から幅を選ぶだろう。</p>

     <p>たとえば、<a id="introduction-3:viewport-9" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅が<code>29em</code>である場合、<code>(max-width: 30em)</code>がtrueに評価し<code>100vw</code>が使用され結果として、リソース選択の目的で画像サイズは<code>29em</code>である。<a id="introduction-3:viewport-10" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅が代わりに<code>32em</code>である場合、<code>(max-width: 30em)</code>はfalseに評価するが、<code>(max-width: 50em)</code>はtrueに評価し、<code>50vw</code>が使用され結果として、リソース選択の目的で画像のサイズは<code>16em</code>（<a id="introduction-3:viewport-11" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>幅の半分）となる。異なるレイアウトのため、わずかにより幅の広い<a id="introduction-3:viewport-12" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>がより小さい画像をもたらすことに注目する。</p>

     <p>ユーザーエージェントは、効果的なピクセル密度を選択し、前の例と似た適切なリソースを選択することができる。</p>

    </div>
   <dt><a href="#art-direction" id="introduction-3:art-direction-3">Art direction</a>-ベースの選択<dd><p><code id="introduction-3:attr-source-media"><a href="embedded-content.html#attr-source-media">media</a></code>属性と共に<code id="introduction-3:the-picture-element"><a href="embedded-content.html#the-picture-element">picture</a></code>要素および<code id="introduction-3:the-source-element"><a href="embedded-content.html#the-source-element">source</a></code>要素は、（たとえばより小さい画像がより大きい画像の収穫されたバージョンかもしれない）画像コンテンツを変化させる複数の画像を提供するために使用することができる。</p>

    <div class="example"><pre><code class='html'><c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <strong><c- e>media</c-><c- o>=</c-><c- s>"(min-width: 45em)"</c-></strong> <c- e>srcset</c-><c- o>=</c-><c- s>"large.jpg"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <strong><c- e>media</c-><c- o>=</c-><c- s>"(min-width: 32em)"</c-></strong> <c- e>srcset</c-><c- o>=</c-><c- s>"med.jpg"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"small.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The wolf runs through the snow."</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c-></code></pre>

     <p>ユーザーエージェントが<code id="introduction-3:attr-source-media-2"><a href="embedded-content.html#attr-source-media">media</a></code>属性におけるメディアクエリーがマッチする最初の<code id="introduction-3:the-source-element-2"><a href="embedded-content.html#the-source-element">source</a></code>要素を選択し、要素の<code id="introduction-3:attr-source-srcset"><a href="embedded-content.html#attr-source-srcset">srcset</a></code>属性から適切なURLを選択する。</p>

     <p>画像のレンダリングサイズは、ソースが選択されるものに依存して変化する。ダウンロードされた画像を持つ前にユーザーエージェントが使用することができる次元を指定するために、CSSは使用することができる。</p>

<pre><code class='css'><c- f>img </c-><c- p>{</c-> <c- k>width</c-><c- p>:</c-> <c- m>300</c-><c- l>px</c-><c- p>;</c-> <c- k>height</c-><c- p>:</c-> <c- m>300</c-><c- l>px</c-> <c- p>}</c->
<c- n>@media</c-> <c- p>(</c->min-width<c- f>: 32em) </c-><c- p>{</c-> img { width: 500px; height:300px } }
@media (min-width: 45em) { img { width: 700px; height:400px } }</code></pre>

    </div>

    <div class="example"><p>この例は、<a href="#art-direction" id="introduction-3:art-direction-4">art direction</a>および<a href="#device-pixel-ratio" id="introduction-3:device-pixel-ratio-3">デバイスピクセル比</a>ベースの選択を組み合わせる。<a id="introduction-3:viewport-13" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>の半分を取るバナーは、1つは広いスクリーンに対して、1つは狭いスクリーンに対しての、2つのバージョンで提供される。</p>

<pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 500px)"</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"banner-phone.jpeg, banner-phone-HD.jpeg 2x"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"banner.jpeg"</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"banner-HD.jpeg 2x"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The Breakfast Combo"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>picture</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c-></code></pre>

    </div>
   <dt><a href="#image-format-based-selection" id="introduction-3:image-format-based-selection">画像フォーマットベースの選択</a><dd><p><code id="introduction-3:the-source-element-3"><a href="embedded-content.html#the-source-element">source</a></code>要素の<code id="introduction-3:attr-source-type"><a href="embedded-content.html#attr-source-type">type</a></code>属性は、異なるフォーマットで複数の画像を提供するために使用することができる。</p>

    <div class="example"><pre><code class='html'><c- p>&lt;</c-><c- f>h2</c-><c- p>></c->From today's featured article<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
<c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"/uploads/100-marie-lloyd.webp"</c-> <strong><c- e>type</c-><c- o>=</c-><c- s>"image/webp"</c-></strong><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"/uploads/100-marie-lloyd.jxr"</c-> <strong><c- e>type</c-><c- o>=</c-><c- s>"image/vnd.ms-photo"</c-></strong><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/uploads/100-marie-lloyd.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-> <c- e>width</c-><c- o>=</c-><c- s>"100"</c-> <c- e>height</c-><c- o>=</c-><c- s>"150"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>b</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Marie_Lloyd"</c-><c- p>></c->Marie Lloyd<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>b</c-><c- p>></c-> (1870–1922)
was an English <c- p>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/wiki/Music_hall"</c-><c- p>></c->music hall<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> singer, ...</code></pre>

     <p>この例において、ユーザーエージェントは、サポートされるMIMEタイプをもつ<code id="introduction-3:attr-source-type-2"><a href="embedded-content.html#attr-source-type">type</a></code>属性を持つ最初のリソースを選択する。ユーザーエージェントがWebP画像をサポートする場合、最初の<code id="introduction-3:the-source-element-4"><a href="embedded-content.html#the-source-element">source</a></code>要素が選択される。WebP画像をサポートしないが、ユーザーエージェントがJPEG XR画像をサポートする場合、2つ目の<code id="introduction-3:the-source-element-5"><a href="embedded-content.html#the-source-element">source</a></code>要素が選択される。これらのフォーマットがいずれもサポートされない場合、<code id="introduction-3:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code>要素が選択される。</p>

    </div>
   </dl>


  <h6 id="adaptive-images"><span class="secno">4.8.4.1.1</span> アダプティブ画像<a href="#adaptive-images" class="self-link"></a></h6>

  <p><i>この節は非規範的である。</i></p>

  <p>CSSおよびメディアクエリーは、具体的には異なる<a id="adaptive-images:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>の次元および画素密度で、ユーザーの環境に動的に適応するグラフィカルなページレイアウトを構築するために使用することができる。しかしコンテンツに対して、CSSは助けにならない。代わりに、<code id="adaptive-images:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素の<code id="adaptive-images:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>属性および<code id="adaptive-images:the-picture-element"><a href="embedded-content.html#the-picture-element">picture</a></code>要素がある。この節は、この機能を使用する方法を示すサンプル例を渡り歩く。</p>

  <p>（600 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="adaptive-images:'px'" data-x-internal="'px'">CSSピクセル</a>より広い）大きな画面で<code>a-rectangle.png</code>という名前の300×150の画像が使用される一方で、（600 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="adaptive-images:'px'-2" data-x-internal="'px'">CSSピクセル</a>より小さい）小さな画面で<code>a-square.png</code>という名前の100×100の画像が使用される状況を考えてみよう。この場合のマークアップは次のようになる：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"a-square.png"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 600px)"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"a-rectangle.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Barney Frank wears a suit and glasses."</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Barney Frank, 2011<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

  <p class="note"><code id="adaptive-images:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性の中に入れるものの詳細については、<a href="#alt">画像の代替として機能するテキストを提供するための要件</a>の節を参照のこと。</p>

  <p>これに伴う問題は、ユーザーエージェントが、画像が読み込まれるときに画像に使用する次元が何か必ずしも分からないということである。ページが読み込まれる最中に、複数回のリフローさせるレイアウトを回避するために、CSSおよびCSSメディアクエリーは、次元を提供するために使用することができる：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>style</c-><c- p>></c->
 <c- p>#</c-><c- nn>a</c-> <c- p>{</c-> <c- k>width</c-><c- p>:</c-> <c- mi>300</c-><c- b>px</c-><c- p>;</c-> <c- k>height</c-><c- p>:</c-> <c- mi>150</c-><c- b>px</c-><c- p>;</c-> <c- p>}</c->
 <c- p>@</c-><c- k>media</c-> <c- o>(</c-><c- f>max-width</c-><c- o>:</c-> <c- f>600px</c-><c- o>)</c-> <c- p>{</c-> <c- p>#</c-><c- nn>a</c-> <c- p>{</c-> <c- k>width</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c-> <c- k>height</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c-> <c- p>}</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"a-square.png"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 600px)"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"a-rectangle.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Barney Frank wears a suit and glasses."</c-> <c- e>id</c-><c- o>=</c-><c- s>"a"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Barney Frank, 2011<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

  <p>代替として、<code id="adaptive-images:attr-dim-width"><a href="embedded-content-other.html#attr-dim-width">width</a></code>および<code id="adaptive-images:attr-dim-height"><a href="embedded-content-other.html#attr-dim-height">height</a></code>属性は、単に<code id="adaptive-images:the-picture-element-2"><a href="embedded-content.html#the-picture-element">picture</a></code>をサポートするユーザーエージェントにCSSを単に使用して、レガシーユーザーエージェントに幅および高さを提供するために使用することができる：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>style</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 600px)"</c-><c- p>></c->
 <c- p>#</c-><c- nn>a</c-> <c- p>{</c-> <c- k>width</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c-> <c- k>height</c-><c- p>:</c-> <c- mi>100</c-><c- b>px</c-><c- p>;</c-> <c- p>}</c->
<c- p>&lt;/</c-><c- f>style</c-><c- p>></c->
<c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"a-square.png"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 600px)"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"a-rectangle.png"</c-> <c- e>width</c-><c- o>=</c-><c- s>"300"</c-> <c- e>height</c-><c- o>=</c-><c- s>"150"</c->
  <c- e>alt</c-><c- o>=</c-><c- s>"Barney Frank wears a suit and glasses."</c-> <c- e>id</c-><c- o>=</c-><c- s>"a"</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Barney Frank, 2011<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

  <hr>

  <p><code id="adaptive-images:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素は、<code id="adaptive-images:the-picture-element-3"><a href="embedded-content.html#the-picture-element">picture</a></code>要素をサポートしないレガシーユーザーエージェントに使用するために画像のURLを与える<code id="adaptive-images:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code>属性とともに使用される。これは、<code id="adaptive-images:attr-img-src-2"><a href="embedded-content.html#attr-img-src">src</a></code>属性で提供するためにその画像の質問につながる。</p>

  <p>著者がレガシーユーザーエージェントで最大の画像を希望する場合、マークアップは次のようになる：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-mobile.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 720px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-tablet.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 1280px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"pear-desktop.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The pear is juicy."</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c-></code></pre>

  <p>しかし、レガシーモバイルユーザーエージェントがより重要である場合、完全に<code id="adaptive-images:attr-img-src-3"><a href="embedded-content.html#attr-img-src">src</a></code>属性を上書きする、<code id="adaptive-images:the-source-element"><a href="embedded-content.html#the-source-element">source</a></code>要素にすべての3つの画像を一覧表示することができる。</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-mobile.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 720px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-tablet.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 1280px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-desktop.jpeg"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"pear-mobile.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The pear is juicy."</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c-></code></pre>

  <p>この時点で、実際に<code id="adaptive-images:attr-img-src-4"><a href="embedded-content.html#attr-img-src">src</a></code>属性は<code id="adaptive-images:the-picture-element-4"><a href="embedded-content.html#the-picture-element">picture</a></code>をサポートするユーザーエージェントによって完全に無視されるため、<code id="adaptive-images:attr-img-src-5"><a href="embedded-content.html#attr-img-src">src</a></code>属性は最小でも最大でもないものを含む、任意の画像をデフォルトにすることができる：</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-mobile.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 720px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-tablet.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(max-width: 1280px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-desktop.jpeg"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"pear-tablet.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The pear is juicy."</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c-></code></pre>

  <hr>

  <p><code>max-width</code>メディア機能が使用される上記は、画像が意図される最大（<a id="adaptive-images:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">ビューポート</a>）次元を与える。代わりに<code>min-width</code>を使用することも可能である。</p>

  <pre><code class='html'><c- p>&lt;</c-><c- f>picture</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-desktop.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(min-width: 1281px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>source</c-> <c- e>srcset</c-><c- o>=</c-><c- s>"pear-tablet.jpeg"</c-> <c- e>media</c-><c- o>=</c-><c- s>"(min-width: 721px)"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"pear-mobile.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The pear is juicy."</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>picture</c-><c- p>></c-></code></pre>


  <h5 id="attributes-common-to-source-and-img-elements"><span class="secno">4.8.4.2</span> <code id="attributes-common-to-source-and-img-elements:the-source-element"><a href="embedded-content.html#the-source-element">source</a></code>、<code id="attributes-common-to-source-and-img-elements:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>および<code id="attributes-common-to-source-and-img-elements:the-link-element"><a href="semantics.html#the-link-element">link</a></code> 要素の共通属性<a href="#attributes-common-to-source-and-img-elements" class="self-link"></a></h5>

  <h6 id="srcset-attributes"><span class="secno">4.8.4.2.1</span> srcset共通属性<a href="#srcset-attributes" class="self-link"></a></h6>

  <p><dfn id="srcset-attribute">srcset属性</dfn>は、この節で定義された要件をもつ属性である。</p>

  <p>属性が存在する場合、属性値は、U+002C COMMA文字（,）でそれぞれ分離される1つ以上の<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string">画像候補文字列</a>から成らなければならない。<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-2">画像候補文字列</a>が記述子およびURLの後に<a id="srcset-attributes:space-characters" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>を一切含まない場合、次の<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-3">画像候補文字列</a>が存在するとき、1つ以上の<a id="srcset-attributes:space-characters-2" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>で開始しなければならない。</p>

  <p><dfn id="image-candidate-string">画像候補文字列</dfn>は、以下のリストで説明される追加の制限とともに、順に、以下のコンポーネントから成る：</p>

  <ol><li><p>0個以上の<a id="srcset-attributes:space-characters-3" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>。<li><p>U+002C COMMA（,）文字で開始または終了しない<a id="srcset-attributes:valid-non-empty-url" href="urls-and-fetching.html#valid-non-empty-url">妥当な空でないURL</a>で、非インタラクティブを参照し、任意でアニメーション、ページ化もスクリプト化もされない画像リソース。<li><p>0個以上の<a id="srcset-attributes:space-characters-4" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>。<li><p>次の0または1つ：</p>

    <ul><li><p><a id="srcset-attributes:space-characters-5" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>、<dfn id="width-descriptor-value">幅記述子値</dfn>を表す0より大きい数値を与える<a id="srcset-attributes:valid-non-negative-integer" href="common-microsyntaxes.html#valid-non-negative-integer">妥当な非負整数</a>、およびU+0077 LATIN SMALL LETTER W文字から成る、<dfn id="width-descriptor">幅記述子</dfn>。<li><p><a id="srcset-attributes:space-characters-6" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>、<dfn id="pixel-density-descriptor-value">ピクセル密度記述子</dfn>値を表す0より大きい数値を与える<a id="srcset-attributes:valid-floating-point-number" href="common-microsyntaxes.html#valid-floating-point-number">妥当な浮動小数点数</a>、およびU+0078 LATIN SMALL LETTER X文字から成る、<dfn id="pixel-density-descriptor">ピクセル密度記述子</dfn>。</ul>
   <li><p>0個以上の<a id="srcset-attributes:space-characters-7" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII空白文字</a>。</ol>

  <p>同じ要素に対して別の<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-5">画像候補文字列</a>の<a href="#width-descriptor-value" id="srcset-attributes:width-descriptor-value-2">幅記述子値</a>と同じ<a href="#width-descriptor-value" id="srcset-attributes:width-descriptor-value">幅記述子値</a>を持つ要素に対する<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-4">画像候補文字列</a>が存在してはならない。</p>

  <p>同じ要素に対して別の<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-7">画像候補文字列</a>の<a href="#pixel-density-descriptor-value" id="srcset-attributes:pixel-density-descriptor-value-2">ピクセル密度記述子</a>値と同じ<a href="#pixel-density-descriptor-value" id="srcset-attributes:pixel-density-descriptor-value">ピクセル密度記述子値</a>を持つ要素に対する<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-6">画像候補文字列</a>が存在してはならない。この要求の目的のために、記述子をもたない<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-8">画像候補文字列</a>は、<code>1x</code>記述子をもつ<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-9">画像候補文字列</a>と等価である。</p>

  <p>要素に対する<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-10">画像候補文字列</a>が<a href="#width-descriptor" id="srcset-attributes:width-descriptor">幅記述子</a>を指定させる場合、その要素に対するすべての他の<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-11">画像候補文字列</a>も<a href="#width-descriptor" id="srcset-attributes:width-descriptor-2">幅記述子</a>を指定させなければならない。</p>

  <p><a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-12">画像候補文字列</a>の<a href="#width-descriptor" id="srcset-attributes:width-descriptor-3">幅記述子</a>における指定される幅は、リソースが<a id="srcset-attributes:intrinsic-width-2" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-width" data-x-internal="intrinsic-width">内在幅</a>を持つ場合、<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-13">画像候補文字列</a>のURLによって指定されるリソースにおける<a id="srcset-attributes:intrinsic-width" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-width" data-x-internal="intrinsic-width">内在幅</a>にマッチしなければならない。</p>

  <p>要素が存在する<a href="#sizes-attribute" id="srcset-attributes:sizes-attribute">sizes属性</a>を持つ場合、その要素に対するすべての<a href="#image-candidate-string" id="srcset-attributes:image-candidate-string-14">画像候補文字列</a>は<a href="#width-descriptor" id="srcset-attributes:width-descriptor-4">幅記述子</a>を指定させなければならない。</p>


  <h6 id="sizes-attributes"><span class="secno">4.8.4.2.2</span> size属性<a href="#sizes-attributes" class="self-link"></a></h6>

  <p><dfn id="sizes-attribute">sizes属性</dfn>は、この節で定義された要件をもつ属性である。</p>

  <p>存在する場合、値は<a href="#valid-source-size-list" id="sizes-attributes:valid-source-size-list">妥当なソースサイズのリスト</a>でなければならない。</p>

  <p><dfn id="valid-source-size-list">妥当なソースサイズのリスト</dfn>は、以下の文法にマッチする文字列である：<a href="references.html#refsCSSVALUES">[CSSVALUES]</a> <a href="references.html#refsMQ">[MQ]</a></p>

<pre><code class='html'><dfn id='source-size-list'><c- p>&lt;</c-><c- f>source-size-list</c-><c- p>></c-></dfn> = [ <a href='source-size' id='sizes-attributes:source-size'><c- p>&lt;</c-><c- f>source-size</c-><c- p>></c-></a># , ]? <a href='#source-size-value' id='sizes-attributes:source-size-value'><c- p>&lt;</c-><c- f>source-size-value</c-><c- p>></c-></a>
<dfn id='source-size'><c- p>&lt;</c-><c- f>source-size</c-><c- p>></c-></dfn> = <a id='sizes-attributes:media-condition' href='https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition' data-x-internal='media-condition'><c- p>&lt;</c-><c- f>media-condition</c-><c- p>></c-></a> <a href='#source-size-value' id='sizes-attributes:source-size-value-2'><c- p>&lt;</c-><c- f>source-size-value</c-><c- p>></c-></a>
<dfn id='source-size-value'><c- p>&lt;</c-><c- f>source-size-value</c-><c- p>></c-></dfn> = <a id='sizes-attributes:length-2' href='https://triple-underscore.github.io/css-values-ja.html#lengths' data-x-internal='length-2'><c- p>&lt;</c-><c- f>length</c-><c- p>></c-></a></code></pre>

  <p><a href="#source-size-value" id="sizes-attributes:source-size-value-3">&lt;source-size-value></a>は負であってはならず、かつ<a id="sizes-attributes:math-functions" href="https://triple-underscore.github.io/css-values-ja.html#math-function" data-x-internal="math-functions">math functions</a>以外のCSS関数を使用してはならない。</p>

  <p><a href="#source-size-value" id="sizes-attributes:source-size-value-4">&lt;source-size-value></a>は、画像の意図するレイアウト幅を与える。著者は、<a id="sizes-attributes:media-condition-2" href="https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition" data-x-internal="media-condition">&lt;media-condition></a>をもつ異なる環境に対して異なる幅を指定してもよい。</p>

  <p class="note">何に相対するかについての混乱を避けるため、パーセンテージは<a href="#source-size-value" id="sizes-attributes:source-size-value-5">&lt;source-size-value></a>で許可されない。<a id="sizes-attributes:'vw'" href="https://triple-underscore.github.io/css-values-ja.html#vw" data-x-internal="'vw'">'vw'</a>単位は、<a id="sizes-attributes:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>幅に相対的な大きさに対して使用することができる。</p>


  

  <h5 id="images-processing-model"><span class="secno">4.8.4.3</span> Processing model<a href="#images-processing-model" class="self-link"></a></h5>

  <hr>

  <p>An <code id="images-processing-model:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element has a <dfn id="current-request">current request</dfn> and a <dfn id="pending-request">pending request</dfn>. The <a href="#current-request" id="images-processing-model:current-request">current request</a> is initially set to a new <a href="#image-request" id="images-processing-model:image-request">image request</a>. The <a href="#pending-request" id="images-processing-model:pending-request">pending request</a> is initially set to null.</p>

  <p>An <dfn id="image-request" data-export="">image request</dfn> has a <dfn data-dfn-for="image request" id="img-req-state" data-export="">state</dfn>, <dfn data-dfn-for="image request" id="img-req-url" data-export="">current URL</dfn>, and <dfn data-dfn-for="image request" id="img-req-data" data-export="">image data</dfn>.</p>

  <p>An <a href="#image-request" id="images-processing-model:image-request-2">image request</a>'s <a href="#img-req-state" id="images-processing-model:img-req-state">state</a> is one of the following:</p>

  <dl><dt><dfn id="img-none">Unavailable</dfn><dd>The user agent hasn't obtained any image data, or has obtained some or all of the image data but hasn't yet decoded enough of the image to get the image dimensions.<dt><dfn id="img-inc">Partially available</dfn><dd>The user agent has obtained some of the image data and at least the image dimensions are available.<dt><dfn id="img-all">Completely available</dfn><dd>The user agent has obtained all of the image data and at least the image dimensions are available.<dt><dfn id="img-error">Broken</dfn><dd>The user agent has obtained all of the image data that it can, but it cannot even decode the image enough to get the image dimensions (e.g. the image is corrupted, or the format is not supported, or no data could be obtained).</dl>

  <p>An <a href="#image-request" id="images-processing-model:image-request-3">image request</a>'s <a href="#img-req-url" id="images-processing-model:img-req-url">current URL</a> is initially the empty string.</p>

  <p>An <a href="#image-request" id="images-processing-model:image-request-4">image request</a>'s <a href="#img-req-data" id="images-processing-model:img-req-data">image data</a> is the decoded image data.</p>

  <p>When an <a href="#image-request" id="images-processing-model:image-request-5">image request</a>'s <a href="#img-req-state" id="images-processing-model:img-req-state-2">state</a> is either <a href="#img-inc" id="images-processing-model:img-inc">partially available</a> or <a href="#img-all" id="images-processing-model:img-all">completely available</a>, the <a href="#image-request" id="images-processing-model:image-request-6">image request</a> is said to be <dfn id="img-available">available</dfn>.</p>

  <p>When an <code id="images-processing-model:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="images-processing-model:current-request-2">current request</a>'s <a href="#img-req-state" id="images-processing-model:img-req-state-3">state</a> is <a href="#img-all" id="images-processing-model:img-all-2">completely available</a> and the user agent can decode the media data without errors, then the <code id="images-processing-model:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element is said to be <dfn id="img-good">fully decodable</dfn>.</p>

  <p>An <a href="#image-request" id="images-processing-model:image-request-7">image request</a>'s <a href="#img-req-state" id="images-processing-model:img-req-state-4">state</a> is initially <a href="#img-none" id="images-processing-model:img-none">unavailable</a>.</p>

  <p>When an <code id="images-processing-model:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="images-processing-model:current-request-3">current request</a> is <a href="#img-available" id="images-processing-model:img-available">available</a>, the <code id="images-processing-model:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code> element provides a <a id="images-processing-model:paint-source" href="https://triple-underscore.github.io/css-images-ja.html#paint-source" data-x-internal="paint-source">paint source</a> whose width is the image's <a href="#density-corrected-intrinsic-width-and-height" id="images-processing-model:density-corrected-intrinsic-width-and-height">density-corrected intrinsic width</a> (if any), whose height is the image's <a href="#density-corrected-intrinsic-width-and-height" id="images-processing-model:density-corrected-intrinsic-width-and-height-2">density-corrected intrinsic height</a> (if any), and whose appearance is the intrinsic appearance of the image.</p>

  <hr>

  <p>An <code id="images-processing-model:the-img-element-6"><a href="embedded-content.html#the-img-element">img</a></code> element is said to <dfn id="use-srcset-or-picture">use <code>srcset</code> or <code>picture</code></dfn> if it has a <code id="images-processing-model:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code> attribute specified or if it has a parent that is a <code id="images-processing-model:the-picture-element"><a href="embedded-content.html#the-picture-element">picture</a></code> element.</p>

  <hr>

  <p>Each <code id="images-processing-model:the-img-element-7"><a href="embedded-content.html#the-img-element">img</a></code> element has a <dfn id="last-selected-source">last selected source</dfn>, which must initially be null.</p>

  <p>Each <a href="#image-request" id="images-processing-model:image-request-8">image request</a> has a <dfn id="current-pixel-density">current pixel density</dfn>, which must initially be 1.</p>

  <p>Each <a href="#image-request" id="images-processing-model:image-request-9">image request</a> has <dfn id="preferred-density-corrected-dimensions">preferred density-corrected dimensions</dfn>, which is either a struct consisting of a width and a height or is null. It must initially be null.</p>

  <p>To determine the <dfn id="density-corrected-intrinsic-width-and-height">density-corrected intrinsic width and height</dfn> of an <code id="images-processing-model:the-img-element-8"><a href="embedded-content.html#the-img-element">img</a></code> element <var>img</var>:</p>

  <ol><li><p>Let <var>dim</var> be <var>img</var>'s <a href="#current-request" id="images-processing-model:current-request-4">current request</a>'s <a href="#preferred-density-corrected-dimensions" id="images-processing-model:preferred-density-corrected-dimensions">preferred density-corrected dimensions</a>.<li><p>If <var>dim</var> is null, set <var>dim</var> to <var>img</var>'s <a id="images-processing-model:intrinsic-dimensions" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-dimensions" data-x-internal="intrinsic-dimensions">intrinsic dimensions</a>.<li><p>Set <var>dim</var>'s width to <var>dim</var>'s width divided by <var>img</var>'s <a href="#current-request" id="images-processing-model:current-request-5">current request</a>'s <a href="#current-pixel-density" id="images-processing-model:current-pixel-density">current pixel density</a>.<li><p>Set <var>dim</var>'s height to <var>dim</var>'s height divided by <var>img</var>'s <a href="#current-request" id="images-processing-model:current-request-6">current request</a>'s <a href="#current-pixel-density" id="images-processing-model:current-pixel-density-2">current pixel density</a>.<li><p>Return <var>dim</var>.</ol>

  <p class="example">For example, if the <a href="#current-pixel-density" id="images-processing-model:current-pixel-density-3">current pixel density</a> is 3.125, that means that there are 300 device pixels per <a href="https://momdo.github.io/css3-values/#in" id="images-processing-model:'in'" data-x-internal="'in'">CSS inch</a>, and thus if the image data is 300x600, it has <a id="images-processing-model:intrinsic-dimensions-2" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-dimensions" data-x-internal="intrinsic-dimensions">intrinsic dimensions</a> of 96 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="images-processing-model:'px'" data-x-internal="'px'">CSS pixels</a> by 192 <a href="https://triple-underscore.github.io/css-values-ja.html#px" id="images-processing-model:'px'-2" data-x-internal="'px'">CSS pixels</a>.</p>

  <p>All <code id="images-processing-model:the-img-element-9"><a href="embedded-content.html#the-img-element">img</a></code> and <code id="images-processing-model:the-link-element"><a href="semantics.html#the-link-element">link</a></code> elements are associated with a <a href="#source-set" id="images-processing-model:source-set">source set</a>.</p>

  <p>A <dfn id="source-set">source set</dfn> is an ordered set of zero or more <a href="#image-source" id="images-processing-model:image-source">image sources</a> and a <a href="#source-size-2" id="images-processing-model:source-size-2">source size</a>.</p>

  <p>An <dfn id="image-source">image source</dfn> is a <a id="images-processing-model:url" href="https://triple-underscore.github.io/URL-ja.html#concept-url" data-x-internal="url">URL</a>, and optionally either a <a href="#pixel-density-descriptor" id="images-processing-model:pixel-density-descriptor">pixel density descriptor</a>, or a <a href="#width-descriptor" id="images-processing-model:width-descriptor">width descriptor</a>.</p>

  <p>A <dfn id="source-size-2">source size</dfn> is a <a href="#source-size-value" id="images-processing-model:source-size-value">&lt;source-size-value></a>. When a <a href="#source-size-2" id="images-processing-model:source-size-2-2">source size</a> has a unit relative to the <a id="images-processing-model:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>, it must be interpreted relative to the <code id="images-processing-model:the-img-element-10"><a href="embedded-content.html#the-img-element">img</a></code> element's <a id="images-processing-model:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="images-processing-model:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>. Other units must be interpreted the same as in Media Queries. <a href="references.html#refsMQ">[MQ]</a></p>

  <hr>

  <p>A <dfn id="concept-microsyntax-parse-error">parse error</dfn> for algorithms in this section indicates a non-fatal mismatch between input and requirements. User agents are encouraged to expose <a href="#concept-microsyntax-parse-error" id="images-processing-model:concept-microsyntax-parse-error">parse error</a>s somehow.</p>

  <hr>

  <p>Whether the image is fetched successfully or not (e.g. whether the response status was an <a id="images-processing-model:ok-status" href="https://triple-underscore.github.io/Fetch-ja.html#ok-status" data-x-internal="ok-status">ok status</a>) must be ignored when determining the image's type and whether it is a valid image.</p>

  <p class="note">This allows servers to return images with error responses, and have them displayed.</p>

  <p id="img-determine-type">The user agent should apply the <a href="https://triple-underscore.github.io/mimesniff-ja.html#rules-for-sniffing-images-specifically" id="images-processing-model:content-type-sniffing:-image" data-x-internal="content-type-sniffing:-image">image sniffing rules</a> to determine the type of the image, with the image's <a href="urls-and-fetching.html#content-type" id="images-processing-model:content-type">associated Content-Type headers</a> giving the <var>official type</var>. If these rules are not applied, then the type of the image must be the type given by the image's <a href="urls-and-fetching.html#content-type" id="images-processing-model:content-type-2">associated Content-Type headers</a>.</p>

  <p>User agents must not support non-image resources with the <code id="images-processing-model:the-img-element-11"><a href="embedded-content.html#the-img-element">img</a></code> element (e.g. XML files whose <a id="images-processing-model:document-element" href="https://triple-underscore.github.io/DOM4-ja.html#document-element" data-x-internal="document-element">document element</a> is an HTML element). User agents must not run executable code (e.g. scripts) embedded in the image resource. User agents must only display the first page of a multipage resource (e.g. a PDF file). User agents must not allow the resource to act in an interactive fashion, but should honour any animation in the resource.</p>

  <p>This specification does not specify which image types are to be supported.</p>


  <h6 id="when-to-obtain-images"><span class="secno">4.8.4.3.1</span> When to obtain images<a href="#when-to-obtain-images" class="self-link"></a></h6>

  <p>By default, images are obtained immediately. User agents may provide users with the option to instead obtain them on-demand. (The on-demand option might be used by bandwidth-constrained users, for example.)</p>

  <p>When obtaining images immediately, the user agent must synchronously <a href="#update-the-image-data" id="when-to-obtain-images:update-the-image-data">update the image data</a> of the <code id="when-to-obtain-images:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element, with the <i>restart animation</i> flag set if so stated, whenever that element is created or has experienced <a href="#relevant-mutations" id="when-to-obtain-images:relevant-mutations">relevant mutations</a>.</p>

  <p>When obtaining images on demand, the user agent must <a href="#update-the-image-data" id="when-to-obtain-images:update-the-image-data-2">update the image data</a> of an <code id="when-to-obtain-images:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element whenever it needs the image data (i.e., on demand), but only if the <code id="when-to-obtain-images:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="when-to-obtain-images:current-request">current request</a>'s <a href="#img-req-state" id="when-to-obtain-images:img-req-state">state</a> is <a href="#img-none" id="when-to-obtain-images:img-none">unavailable</a>. When an <code id="when-to-obtain-images:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code> element has experienced <a href="#relevant-mutations" id="when-to-obtain-images:relevant-mutations-2">relevant mutations</a>, if the user agent only obtains images on demand, the <code id="when-to-obtain-images:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="when-to-obtain-images:current-request-2">current request</a>'s <a href="#img-req-state" id="when-to-obtain-images:img-req-state-2">state</a> must return to <a href="#img-none" id="when-to-obtain-images:img-none-2">unavailable</a>.</p>


  <h6 id="reacting-to-dom-mutations"><span class="secno">4.8.4.3.2</span> Reacting to DOM mutations<a href="#reacting-to-dom-mutations" class="self-link"></a></h6>

  <p>The <dfn id="relevant-mutations">relevant mutations</dfn> for an <code id="reacting-to-dom-mutations:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element are as follows:</p>

  <ul><li><p>The element's <code id="reacting-to-dom-mutations:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code>, <code id="reacting-to-dom-mutations:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>, <code id="reacting-to-dom-mutations:attr-dim-width"><a href="embedded-content-other.html#attr-dim-width">width</a></code>, or <code id="reacting-to-dom-mutations:attr-img-sizes"><a href="embedded-content.html#attr-img-sizes">sizes</a></code> attributes are set, changed, or removed.<li><p>The element's <code id="reacting-to-dom-mutations:attr-img-src-2"><a href="embedded-content.html#attr-img-src">src</a></code> attribute is set to the same value as the previous value. This must set the <i>restart animation</i> flag for the <a href="#update-the-image-data" id="reacting-to-dom-mutations:update-the-image-data">update the image data</a> algorithm.<li><p>The element's <code id="reacting-to-dom-mutations:attr-img-crossorigin"><a href="embedded-content.html#attr-img-crossorigin">crossorigin</a></code> attribute's state is changed.<li><p>The element's <code id="reacting-to-dom-mutations:attr-img-referrerpolicy"><a href="embedded-content.html#attr-img-referrerpolicy">referrerpolicy</a></code> attribute's state is changed.<li><p>The <code id="reacting-to-dom-mutations:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> or <code id="reacting-to-dom-mutations:the-source-element"><a href="embedded-content.html#the-source-element">source</a></code> <a id="reacting-to-dom-mutations:html-element-insertion-steps" href="infrastructure.html#html-element-insertion-steps">HTML element insertion steps</a> or <a id="reacting-to-dom-mutations:html-element-removing-steps" href="infrastructure.html#html-element-removing-steps">HTML element removing steps</a> count the mutation as a <a href="#relevant-mutations" id="reacting-to-dom-mutations:relevant-mutations">relevant mutation</a>.<li><p>The element's parent is a <code id="reacting-to-dom-mutations:the-picture-element"><a href="embedded-content.html#the-picture-element">picture</a></code> element and a <code id="reacting-to-dom-mutations:the-source-element-2"><a href="embedded-content.html#the-source-element">source</a></code> element that is a previous sibling has its <code id="reacting-to-dom-mutations:attr-source-srcset"><a href="embedded-content.html#attr-source-srcset">srcset</a></code>, <code id="reacting-to-dom-mutations:attr-source-sizes"><a href="embedded-content.html#attr-source-sizes">sizes</a></code>, <code id="reacting-to-dom-mutations:attr-source-media"><a href="embedded-content.html#attr-source-media">media</a></code>, <code id="reacting-to-dom-mutations:attr-source-type"><a href="embedded-content.html#attr-source-type">type</a></code>, <code id="reacting-to-dom-mutations:attr-dim-width-2"><a href="embedded-content-other.html#attr-dim-width">width</a></code> or <code id="reacting-to-dom-mutations:attr-dim-height"><a href="embedded-content-other.html#attr-dim-height">height</a></code> attributes set, changed, or removed.<li><p>The element's <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-adopt-ext" id="reacting-to-dom-mutations:concept-node-adopt-ext" data-x-internal="concept-node-adopt-ext">adopting steps</a> are run.</ul>


  <h6 id="the-list-of-available-images"><span class="secno">4.8.4.3.3</span> The list of available images<a href="#the-list-of-available-images" class="self-link"></a></h6>

  <p>Each <code id="the-list-of-available-images:document"><a href="dom.html#document">Document</a></code> object must have a <dfn id="list-of-available-images">list of available images</dfn>. Each image in this list is identified by a tuple consisting of an <a id="the-list-of-available-images:absolute-url" href="https://triple-underscore.github.io/URL-ja.html#syntax-url-absolute" data-x-internal="absolute-url">absolute URL</a>, a <a id="the-list-of-available-images:cors-settings-attribute" href="urls-and-fetching.html#cors-settings-attribute">CORS settings attribute</a> mode, and, if the mode is not <a href="urls-and-fetching.html#attr-crossorigin-none" id="the-list-of-available-images:attr-crossorigin-none">No CORS</a>, an <a id="the-list-of-available-images:concept-origin" href="browsers.html#concept-origin">origin</a>. Each image furthermore has an <dfn id="ignore-higher-layer-caching">ignore higher-layer caching</dfn> flag. User agents may copy entries from one <code id="the-list-of-available-images:document-2"><a href="dom.html#document">Document</a></code> object's <a href="#list-of-available-images" id="the-list-of-available-images:list-of-available-images">list of available images</a> to another at any time (e.g. when the <code id="the-list-of-available-images:document-3"><a href="dom.html#document">Document</a></code> is created, user agents can add to it all the images that are loaded in other <code id="the-list-of-available-images:document-4"><a href="dom.html#document">Document</a></code>s), but must not change the keys of entries copied in this way when doing so, and must unset the <a href="#ignore-higher-layer-caching" id="the-list-of-available-images:ignore-higher-layer-caching">ignore higher-layer caching</a> flag for the copied entry. User agents may also remove images from such lists at any time (e.g. to save memory). User agents must remove entries in the <a href="#list-of-available-images" id="the-list-of-available-images:list-of-available-images-2">list of available images</a> as appropriate given higher-layer caching semantics for the resource (e.g. the HTTP `<code id="the-list-of-available-images:http-cache-control"><a data-x-internal="http-cache-control" href="https://triple-underscore.github.io/RFC7234-ja.html#header.cache-control">Cache-Control</a></code>` response header) when the <a href="#ignore-higher-layer-caching" id="the-list-of-available-images:ignore-higher-layer-caching-2">ignore higher-layer caching</a> flag is unset.</p>

  <p class="note">The <a href="#list-of-available-images" id="the-list-of-available-images:list-of-available-images-3">list of available images</a> is intended to enable synchronous switching when changing the <code id="the-list-of-available-images:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code> attribute to a URL that has previously been loaded, and to avoid re-downloading images in the same document even when they don't allow caching per HTTP. It is not used to avoid re-downloading the same image while the previous image is still loading.</p>

  <p class="note">The user agent can also store the image data separately from the <a href="#list-of-available-images" id="the-list-of-available-images:list-of-available-images-4">list of available images</a>.</p>

  <p class="example">For example, if a resource has the HTTP response header `<code>Cache-Control: must-revalidate</code>`, and its <a href="#ignore-higher-layer-caching" id="the-list-of-available-images:ignore-higher-layer-caching-3">ignore higher-layer caching</a> flag is unset, the user agent would remove it from the <a href="#list-of-available-images" id="the-list-of-available-images:list-of-available-images-5">list of available images</a> but could keep the image data separately, and use that if the server responds with a <code>304 Not Modified</code> status.</p>

  <h6 id="decoding-images"><span class="secno">4.8.4.3.4</span> Decoding images<a href="#decoding-images" class="self-link"></a></h6>

  <p>Image data is usually encoded in order to reduce file size. This means that in order for the user agent to present the image to the screen, the data needs to be decoded. <dfn id="img-decoding-process">Decoding</dfn> is the process which converts an image's media data into a bitmap form, suitable for presentation to the screen. Note that this process can be slow relative to other processes involved in presenting content. Thus, the user agent can choose when to perform decoding, in order to create the best user experience.</p>

  <p>Image decoding is said to be synchronous if it prevents presentation of other content until it is finished. Typically, this has an effect of atomically presenting the image and any other content at the same time. However, this presentation is delayed by the amount of time it takes to perform the decode.</p>

  <p>Image decoding is said to be asynchronous if it does not prevent presentation of other content. This has an effect of presenting non-image content faster. However, the image content is missing on screen until the decode finishes. Once the decode is finished, the screen is updated with the image.</p>

  <p>In both synchronous and asynchronous decoding modes, the final content is presented to screen after the same amount of time has elapsed. The main difference is whether the user agent presents non-image content ahead of presenting the final content.</p>

  <p>In order to aid the user agent in deciding whether to perform synchronous or asynchronous decode, the <code id="decoding-images:attr-img-decoding"><a href="embedded-content.html#attr-img-decoding">decoding</a></code> attribute can be set on <code id="decoding-images:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> elements. The possible values of the <code id="decoding-images:attr-img-decoding-2"><a href="embedded-content.html#attr-img-decoding">decoding</a></code> attribute are the following <dfn id="image-decoding-hint">image decoding hint</dfn> keywords:</p>

  <table><thead><tr><th>キーワード<th>状態<th>説明<tbody><tr><td><dfn data-dfn-for="img/decoding" id="attr-img-decoding-sync" data-dfn-type="attr-value"><code>sync</code></dfn><td><dfn id="attr-img-decoding-sync-state">Sync</dfn><td>Indicates a preference to <a href="#img-decoding-process" id="decoding-images:img-decoding-process">decode</a> this image synchronously for atomic presentation with other content.<tr><td><dfn data-dfn-for="img/decoding" id="attr-img-decoding-async" data-dfn-type="attr-value"><code>async</code></dfn><td><dfn id="attr-img-decoding-async-state">Async</dfn><td>Indicates a preference to <a href="#img-decoding-process" id="decoding-images:img-decoding-process-2">decode</a> this image asynchronously to avoid delaying presentation of other content.<tr><td><dfn data-dfn-for="img/decoding" id="attr-img-decoding-auto" data-dfn-type="attr-value"><code>auto</code></dfn><td><dfn id="attr-img-decoding-auto-state">Auto</dfn><td>Indicates no preference in decoding mode (the default).</table>

  <p>When <a href="#img-decoding-process" id="decoding-images:img-decoding-process-3">decoding</a> an image, the user agent should respect the preference indicated by the <code id="decoding-images:attr-img-decoding-3"><a href="embedded-content.html#attr-img-decoding">decoding</a></code> attribute's state. If the state indicated is <a href="#attr-img-decoding-auto-state" id="decoding-images:attr-img-decoding-auto-state">auto</a>, then the user agent is free to choose any decoding behavior.</p>

  <p class="note">It is also possible to control the decoding behavior using the <code id="decoding-images:dom-img-decode"><a href="embedded-content.html#dom-img-decode">decode()</a></code> method. Since the <code id="decoding-images:dom-img-decode-2"><a href="embedded-content.html#dom-img-decode">decode()</a></code> method performs <a href="#img-decoding-process" id="decoding-images:img-decoding-process-4">decoding</a> independently from the process responsible for presenting content to screen, it is unaffected by the <code id="decoding-images:attr-img-decoding-4"><a href="embedded-content.html#attr-img-decoding">decoding</a></code> attribute.</p>

  <h6 id="updating-the-image-data"><span class="secno">4.8.4.3.5</span> Updating the image data<a href="#updating-the-image-data" class="self-link"></a></h6>

  <p class="note">This algorithm cannot be called from steps running <a id="updating-the-image-data:in-parallel" href="infrastructure.html#in-parallel">in parallel</a>. If a user agent needs to call this algorithm from steps running <a id="updating-the-image-data:in-parallel-2" href="infrastructure.html#in-parallel">in parallel</a>, it needs to <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task">queue</a> a task to do so.</p>

  <p>When the user agent is to <dfn id="update-the-image-data">update the image data</dfn> of an <code id="updating-the-image-data:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element, optionally with the <i>restart animations</i> flag set, it must run the following steps:</p>

  <ol><li><p>If the element's <a id="updating-the-image-data:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> is not <a id="updating-the-image-data:fully-active" href="document-sequences.html#fully-active">fully active</a>, then:</p>

    <ol><li><p>Continue running this algorithm <a id="updating-the-image-data:in-parallel-3" href="infrastructure.html#in-parallel">in parallel</a>.<li><p>Wait until the element's <a id="updating-the-image-data:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> is <a id="updating-the-image-data:fully-active-2" href="document-sequences.html#fully-active">fully active</a>.<li><p>If another instance of this algorithm for this <code id="updating-the-image-data:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element was started after this instance (even if it aborted and is no longer running), then return.<li><p><a id="updating-the-image-data:queue-a-microtask" href="webappapis.html#queue-a-microtask">Queue a microtask</a> to continue this algorithm.</ol>
   <li><p>If the user agent cannot support images, or its support for images has been disabled, then <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request">pending request</a>, set <a href="#current-request" id="updating-the-image-data:current-request-2">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state">state</a> to <a href="#img-none" id="updating-the-image-data:img-none">unavailable</a>, set <a href="#pending-request" id="updating-the-image-data:pending-request-2">pending request</a> to null, and return.<li><p>Let <var>selected source</var> be null and <var>selected pixel density</var> be undefined.<li><p>If the element does not <a href="#use-srcset-or-picture" id="updating-the-image-data:use-srcset-or-picture">use <code>srcset</code> or <code>picture</code></a> and it has a <code id="updating-the-image-data:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code> attribute specified whose value is not the empty string, then set <var>selected source</var> to the value of the element's <code id="updating-the-image-data:attr-img-src-2"><a href="embedded-content.html#attr-img-src">src</a></code> attribute and set <var>selected pixel density</var> to 1.0.<li><p>Set the element's <a href="#last-selected-source" id="updating-the-image-data:last-selected-source">last selected source</a> to <var>selected source</var>.<li><p>If <var>selected source</var> is not null, then:</p>

    <ol><li><p><a href="urls-and-fetching.html#parse-a-url" id="updating-the-image-data:parse-a-url">Parse</a> <var>selected source</var>, relative to the element's <a id="updating-the-image-data:node-document-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>. If that is not successful, then abort this inner set of steps. Otherwise, let <var>urlString</var> be the <a id="updating-the-image-data:resulting-url-string" href="urls-and-fetching.html#resulting-url-string">resulting URL string</a>.<li><p>Let <var>key</var> be a tuple consisting of <var>urlString</var>, the <code id="updating-the-image-data:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element's <code id="updating-the-image-data:attr-img-crossorigin"><a href="embedded-content.html#attr-img-crossorigin">crossorigin</a></code> attribute's mode, and, if that mode is not <a href="urls-and-fetching.html#attr-crossorigin-none" id="updating-the-image-data:attr-crossorigin-none">No CORS</a>, the <a id="updating-the-image-data:node-document-4" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="https://dom.spec.whatwg.org/#concept-document-origin" id="updating-the-image-data:concept-document-origin" data-x-internal="concept-document-origin">origin</a>.<li><p>If the <a href="#list-of-available-images" id="updating-the-image-data:list-of-available-images">list of available images</a> contains an entry for <var>key</var>, then:</p>

      <ol><li><p>Set the <a href="#ignore-higher-layer-caching" id="updating-the-image-data:ignore-higher-layer-caching">ignore higher-layer caching</a> flag for that entry.<li><p><a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-2">Abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-3">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request-3">pending request</a>.<li><p>Set <a href="#pending-request" id="updating-the-image-data:pending-request-4">pending request</a> to null.<li><p>Let <a href="#current-request" id="updating-the-image-data:current-request-4">current request</a> be a new <a href="#image-request" id="updating-the-image-data:image-request">image request</a> whose <a href="#img-req-data" id="updating-the-image-data:img-req-data">image data</a> is that of the entry and whose <a href="#img-req-state" id="updating-the-image-data:img-req-state-2">state</a> is <a href="#img-all" id="updating-the-image-data:img-all">completely available</a>.<li><p><a href="#prepare-an-image-for-presentation" id="updating-the-image-data:prepare-an-image-for-presentation">Prepare <var>current request</var> for presentation</a> given <var>img</var>.<li><p>Set <a href="#current-request" id="updating-the-image-data:current-request-5">current request</a>'s <a href="#current-pixel-density" id="updating-the-image-data:current-pixel-density">current pixel density</a> to <var>selected pixel density</var>.<li><p><a id="updating-the-image-data:queue-an-element-task" href="webappapis.html#queue-an-element-task">Queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code> element and following steps:</p>

        <ol><li><p>If <i>restart animation</i> is set, then <a id="updating-the-image-data:restart-the-animation" href="rendering.html#restart-the-animation">restart the animation</a>.<li><p>Set <a href="#current-request" id="updating-the-image-data:current-request-6">current request</a>'s <a href="#img-req-url" id="updating-the-image-data:img-req-url">current URL</a> to <var>urlString</var>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire" data-x-internal="concept-event-fire">Fire an event</a> named <code id="updating-the-image-data:event-load"><a href="indices.html#event-load">load</a></code> at the <code id="updating-the-image-data:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
       <li><p>Abort the <a href="#update-the-image-data" id="updating-the-image-data:update-the-image-data">update the image data</a> algorithm.</ol>
     </ol>
   <li><p><a id="updating-the-image-data:queue-a-microtask-2" href="webappapis.html#queue-a-microtask">Queue a microtask</a> to perform the rest of this algorithm, allowing the <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task">task</a> that invoked this algorithm to continue.<li><p>If another instance of this algorithm for this <code id="updating-the-image-data:the-img-element-6"><a href="embedded-content.html#the-img-element">img</a></code> element was started after this instance (even if it aborted and is no longer running), then return.</p>

    <p class="note">Only the last instance takes effect, to avoid multiple requests when, for example, the <code id="updating-the-image-data:attr-img-src-3"><a href="embedded-content.html#attr-img-src">src</a></code>, <code id="updating-the-image-data:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code>, and <code id="updating-the-image-data:attr-img-crossorigin-2"><a href="embedded-content.html#attr-img-crossorigin">crossorigin</a></code> attributes are all set in succession.</p>
   <li><p>Let <var>selected source</var> and <var>selected pixel density</var> be the URL and pixel density that results from <a href="#select-an-image-source" id="updating-the-image-data:select-an-image-source">selecting an image source</a>, respectively.<li><p>If <var>selected source</var> is null, then:</p>

    <ol><li><p>Set the <a href="#current-request" id="updating-the-image-data:current-request-7">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-3">state</a> to <a href="#img-error" id="updating-the-image-data:img-error">broken</a>, <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-3">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-8">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request-5">pending request</a>, and set <a href="#pending-request" id="updating-the-image-data:pending-request-6">pending request</a> to null.<li><p><a id="updating-the-image-data:queue-an-element-task-2" href="webappapis.html#queue-an-element-task">Queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source-2" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-7"><a href="embedded-content.html#the-img-element">img</a></code> element and the following steps:</p>

      <ol><li><p>Change the <a href="#current-request" id="updating-the-image-data:current-request-9">current request</a>'s <a href="#img-req-url" id="updating-the-image-data:img-req-url-2">current URL</a> to the empty string.<li><p>If the element has a <code id="updating-the-image-data:attr-img-src-4"><a href="embedded-content.html#attr-img-src">src</a></code> attribute or it <a href="#use-srcset-or-picture" id="updating-the-image-data:use-srcset-or-picture-2">uses <code>srcset</code> or <code>picture</code></a>, <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-2" data-x-internal="concept-event-fire">fire an event</a> named <code id="updating-the-image-data:event-error"><a href="indices.html#event-error">error</a></code> at the <code id="updating-the-image-data:the-img-element-8"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
     <li><p>Return.</ol>
   <li><p><a href="urls-and-fetching.html#parse-a-url" id="updating-the-image-data:parse-a-url-2">Parse</a> <var>selected source</var>, relative to the element's <a id="updating-the-image-data:node-document-5" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>, and let <var>urlString</var> be the <a id="updating-the-image-data:resulting-url-string-2" href="urls-and-fetching.html#resulting-url-string">resulting URL string</a>. If that is not successful, then:</p>

    <ol><li><p><a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-4">Abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-10">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request-7">pending request</a>.<li><p>Set the <a href="#current-request" id="updating-the-image-data:current-request-11">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-4">state</a> to <a href="#img-error" id="updating-the-image-data:img-error-2">broken</a>.<li><p>Set <a href="#pending-request" id="updating-the-image-data:pending-request-8">pending request</a> to null.<li><p><a id="updating-the-image-data:queue-an-element-task-3" href="webappapis.html#queue-an-element-task">Queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source-3" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-9"><a href="embedded-content.html#the-img-element">img</a></code> element and the following steps:</p>

      <ol><li><p>Change the <a href="#current-request" id="updating-the-image-data:current-request-12">current request</a>'s <a href="#img-req-url" id="updating-the-image-data:img-req-url-3">current URL</a> to <var>selected source</var>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-3" data-x-internal="concept-event-fire">Fire an event</a> named <code id="updating-the-image-data:event-error-2"><a href="indices.html#event-error">error</a></code> at the <code id="updating-the-image-data:the-img-element-10"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
     <li><p>Return.</ol>
   <li><p>If the <a href="#pending-request" id="updating-the-image-data:pending-request-9">pending request</a> is not null and <var>urlString</var> is the same as the <a href="#pending-request" id="updating-the-image-data:pending-request-10">pending request</a>'s <a href="#img-req-url" id="updating-the-image-data:img-req-url-4">current URL</a>, then return.<li><p>If <var>urlString</var> is the same as the <a href="#current-request" id="updating-the-image-data:current-request-13">current request</a>'s <a href="#img-req-url" id="updating-the-image-data:img-req-url-5">current URL</a> and <a href="#current-request" id="updating-the-image-data:current-request-14">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-5">state</a> is <a href="#img-inc" id="updating-the-image-data:img-inc">partially available</a>, then <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-5">abort the image request</a> for the <a href="#pending-request" id="updating-the-image-data:pending-request-11">pending request</a>, <a id="updating-the-image-data:queue-an-element-task-4" href="webappapis.html#queue-an-element-task">queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source-4" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-11"><a href="embedded-content.html#the-img-element">img</a></code> element to <a id="updating-the-image-data:restart-the-animation-2" href="rendering.html#restart-the-animation">restart the animation</a> if <i>restart animation</i> is set, and return.<li><p>If the <a href="#pending-request" id="updating-the-image-data:pending-request-12">pending request</a> is not null, then <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-6">abort the image request</a> for the <a href="#pending-request" id="updating-the-image-data:pending-request-13">pending request</a>.<li><p>Set <var>image request</var> to a new <a href="#image-request" id="updating-the-image-data:image-request-2">image request</a> whose <a href="#img-req-url" id="updating-the-image-data:img-req-url-6">current URL</a> is <var>urlString</var>.<li><p>If <a href="#current-request" id="updating-the-image-data:current-request-15">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-6">state</a> is <a href="#img-none" id="updating-the-image-data:img-none-2">unavailable</a> or <a href="#img-error" id="updating-the-image-data:img-error-3">broken</a>, then set the <a href="#current-request" id="updating-the-image-data:current-request-16">current request</a> to <var>image request</var>. Otherwise, set the <a href="#pending-request" id="updating-the-image-data:pending-request-14">pending request</a> to <var>image request</var>.<li><p>Let <var>request</var> be the result of <a href="urls-and-fetching.html#create-a-potential-cors-request" id="updating-the-image-data:create-a-potential-cors-request">creating a potential-CORS request</a> given <var>urlString</var>, "<code>image</code>", and the current state of the element's <code id="updating-the-image-data:attr-img-crossorigin-3"><a href="embedded-content.html#attr-img-crossorigin">crossorigin</a></code> content attribute.<li><p>Set <var>request</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-client" id="updating-the-image-data:concept-request-client" data-x-internal="concept-request-client">client</a> to the element's <a id="updating-the-image-data:node-document-6" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="updating-the-image-data:relevant-settings-object" href="webappapis.html#relevant-settings-object">relevant settings object</a>.<li><p>If the element <a href="#use-srcset-or-picture" id="updating-the-image-data:use-srcset-or-picture-3">uses <code>srcset</code> or <code>picture</code></a>, set <var>request</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-initiator" id="updating-the-image-data:concept-request-initiator" data-x-internal="concept-request-initiator">initiator</a> to "<code>imageset</code>".<li><p>Set <var>request</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-referrer-policy" id="updating-the-image-data:concept-request-referrer-policy" data-x-internal="concept-request-referrer-policy">referrer policy</a> to the current state of the element's <code id="updating-the-image-data:attr-img-referrerpolicy"><a href="embedded-content.html#attr-img-referrerpolicy">referrerpolicy</a></code> attribute.<li><p>Let <var>delay load event</var> be true if the <code id="updating-the-image-data:the-img-element-12"><a href="embedded-content.html#the-img-element">img</a></code>'s <a id="updating-the-image-data:lazy-loading-attribute" href="urls-and-fetching.html#lazy-loading-attribute">lazy loading attribute</a> is in the <a href="urls-and-fetching.html#attr-loading-eager-state" id="updating-the-image-data:attr-loading-eager-state">Eager</a> state, or if <a href="webappapis.html#concept-n-noscript" id="updating-the-image-data:concept-n-noscript">scripting is disabled</a> for the <code id="updating-the-image-data:the-img-element-13"><a href="embedded-content.html#the-img-element">img</a></code>, and false otherwise.<li><p>If the <a id="updating-the-image-data:will-lazy-load-element-steps" href="urls-and-fetching.html#will-lazy-load-element-steps">will lazy load element steps</a> given the <code id="updating-the-image-data:the-img-element-14"><a href="embedded-content.html#the-img-element">img</a></code> return true, then:</p>

    <ol><li><p>Set the <code id="updating-the-image-data:the-img-element-15"><a href="embedded-content.html#the-img-element">img</a></code>'s <a id="updating-the-image-data:lazy-load-resumption-steps" href="urls-and-fetching.html#lazy-load-resumption-steps">lazy load resumption steps</a> to the rest of this algorithm starting with the step labeled <i>fetch the image</i>.<li><p><a id="updating-the-image-data:start-intersection-observing-a-lazy-loading-element" href="urls-and-fetching.html#start-intersection-observing-a-lazy-loading-element">Start intersection-observing a lazy loading element</a> for the <code id="updating-the-image-data:the-img-element-16"><a href="embedded-content.html#the-img-element">img</a></code> element.<li><p>Return.</ol>
   <li><p><i>Fetch the image</i>: <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="updating-the-image-data:concept-fetch" data-x-internal="concept-fetch">Fetch</a> <var>request</var>. Return from this algorithm, and run the remaining steps as part of the fetch's <i id="updating-the-image-data:processresponse"><a data-x-internal="processresponse" href="https://triple-underscore.github.io/Fetch-ja.html#process-response">processResponse</a></i> for the <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-response" id="updating-the-image-data:concept-response" data-x-internal="concept-response">response</a> <var>response</var>.</p>

    

    <p>The resource obtained in this fashion, if any, is <var>image request</var>'s <a href="#img-req-data" id="updating-the-image-data:img-req-data-2">image data</a>. It can be either <a id="updating-the-image-data:cors-same-origin" href="urls-and-fetching.html#cors-same-origin">CORS-same-origin</a> or <a id="updating-the-image-data:cors-cross-origin" href="urls-and-fetching.html#cors-cross-origin">CORS-cross-origin</a>; this affects the image's interaction with other APIs (e.g., when used on a <code id="updating-the-image-data:the-canvas-element"><a href="canvas.html#the-canvas-element">canvas</a></code>).</p>

    
    <p>When <var>delay load event</var> is true, fetching the image must <a id="updating-the-image-data:delay-the-load-event" href="parsing.html#delay-the-load-event">delay the load event</a> of the element's <a id="updating-the-image-data:node-document-7" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> until the <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-2">task</a> that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-2">queued</a> by the <a id="updating-the-image-data:networking-task-source" href="webappapis.html#networking-task-source">networking task source</a> once the resource has been fetched (<a href="#img-load">defined below</a>) has been run.</p>

    <p class="warning">This, unfortunately, can be used to perform a rudimentary port scan of the user's local network (especially in conjunction with scripting, though scripting isn't actually necessary to carry out such an attack). User agents may implement <a href="browsers.html#concept-origin" id="updating-the-image-data:concept-origin">cross-origin</a> access control policies that are stricter than those described above to mitigate this attack, but unfortunately such policies are typically not compatible with existing web content.</p>
   <li><p>As soon as possible, jump to the first applicable entry from the following list:</p>

    <dl class="switch"><dt>If the resource type is <code id="updating-the-image-data:multipart/x-mixed-replace"><a href="iana.html#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code><dd><p>The next <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-3">task</a> that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-3">queued</a> by the <a id="updating-the-image-data:networking-task-source-2" href="webappapis.html#networking-task-source">networking task source</a> while the image is being fetched must run the following steps:</p>

      <ol><li><p>If <var>image request</var> is the <a href="#pending-request" id="updating-the-image-data:pending-request-15">pending request</a> and at least one body part has been completely decoded, <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-7">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-17">current request</a>, <a href="#upgrade-the-pending-request-to-the-current-request" id="updating-the-image-data:upgrade-the-pending-request-to-the-current-request">upgrade the pending request to the current request</a>.</p>
       <li><p>Otherwise, if <var>image request</var> is the <a href="#pending-request" id="updating-the-image-data:pending-request-16">pending request</a> and the user agent is able to determine that <var>image request</var>'s image is corrupted in some fatal way such that the image dimensions cannot be obtained, <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-8">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-18">current request</a>, <a href="#upgrade-the-pending-request-to-the-current-request" id="updating-the-image-data:upgrade-the-pending-request-to-the-current-request-2">upgrade the pending request to the current request</a>, and set the <a href="#current-request" id="updating-the-image-data:current-request-19">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-7">state</a> to <a href="#img-error" id="updating-the-image-data:img-error-4">broken</a>.<li><p>Otherwise, if <var>image request</var> is the <a href="#current-request" id="updating-the-image-data:current-request-20">current request</a>, its <a href="#img-req-state" id="updating-the-image-data:img-req-state-8">state</a> is <a href="#img-none" id="updating-the-image-data:img-none-3">unavailable</a>, and the user agent is able to determine <var>image request</var>'s image's width and height, set the <a href="#current-request" id="updating-the-image-data:current-request-21">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-9">state</a> to <a href="#img-inc" id="updating-the-image-data:img-inc-2">partially available</a>.<li><p>Otherwise, if <var>image request</var> is the <a href="#current-request" id="updating-the-image-data:current-request-22">current request</a>, its <a href="#img-req-state" id="updating-the-image-data:img-req-state-10">state</a> is <a href="#img-none" id="updating-the-image-data:img-none-4">unavailable</a>, and the user agent is able to determine that <var>image request</var>'s image is corrupted in some fatal way such that the image dimensions cannot be obtained, set the <a href="#current-request" id="updating-the-image-data:current-request-23">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-11">state</a> to <a href="#img-error" id="updating-the-image-data:img-error-5">broken</a>.</p>
       </ol>

      <p>Each <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-4">task</a> that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-4">queued</a> by the <a id="updating-the-image-data:networking-task-source-3" href="webappapis.html#networking-task-source">networking task source</a> while the image is being fetched must update the presentation of the image, but as each new body part comes in, if the user agent is able to determine the image's width and height, it must <a href="#prepare-an-image-for-presentation" id="updating-the-image-data:prepare-an-image-for-presentation-2">prepare the <code>img</code> element's <span>current request</span> for presentation</a> given the <code id="updating-the-image-data:the-img-element-17"><a href="embedded-content.html#the-img-element">img</a></code> element and replace the previous image. Once one body part has been completely decoded, perform the following steps:</p>

      <ol><li><p>Set the <code id="updating-the-image-data:the-img-element-18"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="updating-the-image-data:current-request-24">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-12">state</a> to <a href="#img-all" id="updating-the-image-data:img-all-2">completely available</a>.<li><p><a id="updating-the-image-data:queue-an-element-task-5" href="webappapis.html#queue-an-element-task">Queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source-5" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-19"><a href="embedded-content.html#the-img-element">img</a></code> element to <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-4" data-x-internal="concept-event-fire">fire an event</a> named <code id="updating-the-image-data:event-load-2"><a href="indices.html#event-load">load</a></code> at the <code id="updating-the-image-data:the-img-element-20"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
      
     <dt>If the resource type and data corresponds to a supported image format, <a href="#img-determine-type">as described below</a><dd><p>The next <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-5">task</a> that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-5">queued</a> by the <a id="updating-the-image-data:networking-task-source-4" href="webappapis.html#networking-task-source">networking task source</a> while the image is being fetched must run the following steps:</p>

      <ol><li><p>If the user agent is able to determine <var>image request</var>'s image's width and height, and <var>image request</var> is <a href="#pending-request" id="updating-the-image-data:pending-request-17">pending request</a>, set <var>image request</var>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-13">state</a> to <a href="#img-inc" id="updating-the-image-data:img-inc-3">partially available</a>.<li><p>Otherwise, if the user agent is able to determine <var>image request</var>'s image's width and height, and <var>image request</var> is <a href="#current-request" id="updating-the-image-data:current-request-25">current request</a>, <a href="#prepare-an-image-for-presentation" id="updating-the-image-data:prepare-an-image-for-presentation-3">prepare <var>image request</var> for presentation</a> given the <code id="updating-the-image-data:the-img-element-21"><a href="embedded-content.html#the-img-element">img</a></code> element and set <var>image request</var>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-14">state</a> to <a href="#img-inc" id="updating-the-image-data:img-inc-4">partially available</a>.<li><p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image is corrupted in some fatal way such that the image dimensions cannot be obtained, and <var>image request</var> is <a href="#pending-request" id="updating-the-image-data:pending-request-18">pending request</a>:</p>

        <ol><li><p><a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-9">Abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-26">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request-19">pending request</a>.<li><p><a href="#upgrade-the-pending-request-to-the-current-request" id="updating-the-image-data:upgrade-the-pending-request-to-the-current-request-3">Upgrade the pending request to the current request</a>.<li><p>Set <a href="#current-request" id="updating-the-image-data:current-request-27">current request</a>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-15">state</a> to <a href="#img-error" id="updating-the-image-data:img-error-6">broken</a>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-5" data-x-internal="concept-event-fire">Fire an event</a> named <code id="updating-the-image-data:event-error-3"><a href="indices.html#event-error">error</a></code> at the <code id="updating-the-image-data:the-img-element-22"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
       <li><p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image is corrupted in some fatal way such that the image dimensions cannot be obtained, and <var>image request</var> is <a href="#current-request" id="updating-the-image-data:current-request-28">current request</a>:</p>

        <ol><li><p><a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-10">Abort the image request</a> for <var>image request</var>.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-6" data-x-internal="concept-event-fire">Fire an event</a> named <code id="updating-the-image-data:event-error-4"><a href="indices.html#event-error">error</a></code> at the <code id="updating-the-image-data:the-img-element-23"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
       </ol>

      <p id="img-load">That <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-6">task</a>, and each subsequent <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-7">task</a>, that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-6">queued</a> by the <a id="updating-the-image-data:networking-task-source-5" href="webappapis.html#networking-task-source">networking task source</a> while the image is being fetched, if <var>image request</var> is the <a href="#current-request" id="updating-the-image-data:current-request-29">current request</a>, must update the presentation of the image appropriately (e.g., if the image is a progressive JPEG, each packet can improve the resolution of the image).</p>

      <p>Furthermore, the last <a href="webappapis.html#concept-task" id="updating-the-image-data:concept-task-8">task</a> that is <a href="webappapis.html#queue-a-task" id="updating-the-image-data:queue-a-task-7">queued</a> by the <a id="updating-the-image-data:networking-task-source-6" href="webappapis.html#networking-task-source">networking task source</a> once the resource has been fetched must additionally run these steps:</p>

      <ol><li><p>If <var>image request</var> is the <a href="#pending-request" id="updating-the-image-data:pending-request-20">pending request</a>, <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-11">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-30">current request</a>, <a href="#upgrade-the-pending-request-to-the-current-request" id="updating-the-image-data:upgrade-the-pending-request-to-the-current-request-4">upgrade the pending request to the current request</a> and <a href="#prepare-an-image-for-presentation" id="updating-the-image-data:prepare-an-image-for-presentation-4">prepare <var>image request</var> for presentation</a> given the <code id="updating-the-image-data:the-img-element-24"><a href="embedded-content.html#the-img-element">img</a></code> element.<li><p>Set <var>image request</var> to the <a href="#img-all" id="updating-the-image-data:img-all-3">completely available</a> state.<li><p>Add the image to the <a href="#list-of-available-images" id="updating-the-image-data:list-of-available-images-2">list of available images</a> using the key <var>key</var>, with the <a href="#ignore-higher-layer-caching" id="updating-the-image-data:ignore-higher-layer-caching-2">ignore higher-layer caching</a> flag set.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-7" data-x-internal="concept-event-fire">Fire an event</a> named <code id="updating-the-image-data:event-load-3"><a href="indices.html#event-load">load</a></code> at the <code id="updating-the-image-data:the-img-element-25"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
     <dt>そうでなければ<dd><p>The image data is not in a supported file format; the user agent must set <var>image request</var>'s <a href="#img-req-state" id="updating-the-image-data:img-req-state-16">state</a> to <a href="#img-error" id="updating-the-image-data:img-error-7">broken</a>, <a href="#abort-the-image-request" id="updating-the-image-data:abort-the-image-request-12">abort the image request</a> for the <a href="#current-request" id="updating-the-image-data:current-request-31">current request</a> and the <a href="#pending-request" id="updating-the-image-data:pending-request-21">pending request</a>, <a href="#upgrade-the-pending-request-to-the-current-request" id="updating-the-image-data:upgrade-the-pending-request-to-the-current-request-5">upgrade the pending request to the current request</a> if <var>image request</var> is the <a href="#pending-request" id="updating-the-image-data:pending-request-22">pending request</a>, and then <a id="updating-the-image-data:queue-an-element-task-6" href="webappapis.html#queue-an-element-task">queue an element task</a> on the <a id="updating-the-image-data:dom-manipulation-task-source-6" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="updating-the-image-data:the-img-element-26"><a href="embedded-content.html#the-img-element">img</a></code> element to <a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="updating-the-image-data:concept-event-fire-8" data-x-internal="concept-event-fire">fire an event</a> named <code id="updating-the-image-data:event-error-5"><a href="indices.html#event-error">error</a></code> at the <code id="updating-the-image-data:the-img-element-27"><a href="embedded-content.html#the-img-element">img</a></code> element.</dl>
   </ol>

  <p>While a user agent is running the above algorithm for an element <var>x</var>, there must be a strong reference from the element's <a id="updating-the-image-data:node-document-8" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> to the element <var>x</var>, even if that element is not <a id="updating-the-image-data:connected" href="https://triple-underscore.github.io/DOM4-ja.html#connected" data-x-internal="connected">connected</a>.</p>

  <p>To <dfn id="abort-the-image-request">abort the image request</dfn> for an <a href="#image-request" id="updating-the-image-data:image-request-3">image request</a> <var>image request</var> means to run the following steps:</p>

  <ol><li><p>Forget <var>image request</var>'s <a href="#img-req-data" id="updating-the-image-data:img-req-data-3">image data</a>, if any.<li><p>Abort any instance of the <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="updating-the-image-data:concept-fetch-2" data-x-internal="concept-fetch">fetching</a> algorithm for <var>image request</var>, discarding any pending tasks generated by that algorithm.</ol>

  <p>To <dfn id="upgrade-the-pending-request-to-the-current-request">upgrade the pending request to the current request</dfn> for an <code id="updating-the-image-data:the-img-element-28"><a href="embedded-content.html#the-img-element">img</a></code> element means to run the following steps:</p>

  <ol><li><p>Let the <code id="updating-the-image-data:the-img-element-29"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-request" id="updating-the-image-data:current-request-32">current request</a> be the <a href="#pending-request" id="updating-the-image-data:pending-request-23">pending request</a>.<li><p>Let the <code id="updating-the-image-data:the-img-element-30"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#pending-request" id="updating-the-image-data:pending-request-24">pending request</a> be null.</ol>


  <h6 id="preparing-an-image-for-presentation"><span class="secno">4.8.4.3.6</span> Preparing an image for presentation<a href="#preparing-an-image-for-presentation" class="self-link"></a></h6>

  <p>To <dfn id="prepare-an-image-for-presentation">prepare an image for presentation</dfn> for an <a href="#image-request" id="preparing-an-image-for-presentation:image-request">image request</a> <var>req</var> given image element <var>img</var>:</p>

  <ol><li><p>Let <var>exifTagMap</var> be the EXIF tags obtained from <var>req</var>'s <a href="#img-req-data" id="preparing-an-image-for-presentation:img-req-data">image data</a>, as defined by the relevant codec. <a href="references.html#refsEXIF">[EXIF]</a><li><p>Let <var>physicalWidth</var> and <var>physicalHeight</var> be the width and height obtained from <var>req</var>'s <a href="#img-req-data" id="preparing-an-image-for-presentation:img-req-data-2">image data</a>, as defined by the relevant codec.<li><p>Let <var>dimX</var> be the value of <var>exifTagMap</var>'s tag <code>0xA002</code> (<code>PixelXDimension</code>).<li><p>Let <var>dimY</var> be the value of <var>exifTagMap</var>'s tag <code>0xA003</code> (<code>PixelYDimension</code>).<li><p>Let <var>resX</var> be the value of <var>exifTagMap</var>'s tag <code>0x011A</code> (<code>XResolution</code>).<li><p>Let <var>resY</var> be the value of <var>exifTagMap</var>'s tag <code>0x011B</code> (<code>YResolution</code>).<li><p>Let <var>resUnit</var> be the value of <var>exifTagMap</var>'s tag <code>0x0128</code> (<code>ResolutionUnit</code>).<li><p>If either <var>dimX</var> or <var>dimY</var> is not a positive integer, then return.<li><p>If either <var>resX</var> or <var>resY</var> is not a positive floating-point number, then return.<li><p>If <var>resUnit</var> is not equal to <code>2</code> (<code>Inch</code>), then return.<li><p>Let <var>widthFromDensity</var> be the value of <var>physicalWidth</var>, multiplied by 72 and divided by <var>resX</var>.<li><p>Let <var>heightFromDensity</var> be the value of <var>physicalHeight</var>, multiplied by 72 and divided by <var>resY</var>.<li><p>If <var>widthFromDensity</var> is not equal to <var>dimX</var> or <var>heightFromDensity</var> is not equal to <var>dimY</var>, then return.<li><p>If <var>req</var>'s <a href="#img-req-data" id="preparing-an-image-for-presentation:img-req-data-3">image data</a> is <a id="preparing-an-image-for-presentation:cors-cross-origin" href="urls-and-fetching.html#cors-cross-origin">CORS-cross-origin</a>, then set <var>img</var>'s <a id="preparing-an-image-for-presentation:intrinsic-dimensions" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-dimensions" data-x-internal="intrinsic-dimensions">intrinsic dimensions</a> to <var>dimX</var> and <var>dimY</var>, scale <var>img</var>'s pixel data accordingly, and return.</p>
   <li><p>Set <var>req</var>'s <a href="#preferred-density-corrected-dimensions" id="preparing-an-image-for-presentation:preferred-density-corrected-dimensions">preferred density-corrected dimensions</a> to a struct with its width set to <var>dimX</var> and its height set to <var>dimY</var>.<li><p>Update <var>req</var>'s <code id="preparing-an-image-for-presentation:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element's presentation appropriately.</ol>

  <p class="note">Resolution in EXIF is equivalent to <a href="https://triple-underscore.github.io/css-values-ja.html#pt" id="preparing-an-image-for-presentation:'pt'" data-x-internal="'pt'">CSS points per inch</a>, therefore 72 is the base for computing size from resolution.</p>

  <p class="XXX">It is not yet specified what would be the case if EXIF arrives after the image is already presented. See <a href="https://github.com/w3c/csswg-drafts/issues/4929">issue #4929</a>.</p>



  <h6 id="selecting-an-image-source"><span class="secno">4.8.4.3.7</span> Selecting an image source<a href="#selecting-an-image-source" class="self-link"></a></h6>

  <p>To <dfn id="select-an-image-source">select an image source</dfn> given an <code id="selecting-an-image-source:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element <var>el</var>:</p>

  <ol><li><p><a href="#update-the-source-set" id="selecting-an-image-source:update-the-source-set">Update the source set</a> for <var>el</var>.<li><p>If <var>el</var>'s <a href="#source-set" id="selecting-an-image-source:source-set">source set</a> is empty, return null as the URL and undefined as the pixel density.<li><p>Return the result of <a href="#select-an-image-source-from-a-source-set" id="selecting-an-image-source:select-an-image-source-from-a-source-set">selecting an image</a> from <var>el</var>'s <a href="#source-set" id="selecting-an-image-source:source-set-2">source set</a>.</ol>

  <p>To <dfn id="select-an-image-source-from-a-source-set">select an image source from a source set</dfn> given a <a href="#source-set" id="selecting-an-image-source:source-set-3">source set</a> <var>sourceSet</var>:</p>

  <ol><li><p>If an entry <var>b</var> in <var>sourceSet</var> has the same associated <a href="#pixel-density-descriptor" id="selecting-an-image-source:pixel-density-descriptor">pixel density descriptor</a> as an earlier entry <var>a</var> in <var>sourceSet</var>, then remove entry <var>b</var>. Repeat this step until none of the entries in <var>sourceSet</var> have the same associated <a href="#pixel-density-descriptor" id="selecting-an-image-source:pixel-density-descriptor-2">pixel density descriptor</a> as an earlier entry.<li><p>In an <a id="selecting-an-image-source:implementation-defined" href="https://triple-underscore.github.io/infra-ja.html#implementation-defined" data-x-internal="implementation-defined">implementation-defined</a> manner, choose one <a href="#image-source" id="selecting-an-image-source:image-source">image source</a> from <var>sourceSet</var>. Let this be <var>selectedSource</var>.<li><p>Return <var>selectedSource</var> and its associated pixel density.</ol>

  <h6 id="creating-a-source-set-from-attributes"><span class="secno">4.8.4.3.8</span> Creating a source set from attributes<a href="#creating-a-source-set-from-attributes" class="self-link"></a></h6>

  <p>When asked to <dfn id="create-a-source-set">create a source set</dfn> given a string <var>default source</var>, a string <var>srcset</var> and a string <var>sizes</var>:</p>

  <ol><li><p>Let <var>source set</var> be an empty <a href="#source-set" id="creating-a-source-set-from-attributes:source-set">source set</a>.<li><p>If <var>srcset</var> is not an empty string, then set <var>source set</var> to the result of <a href="#parse-a-srcset-attribute" id="creating-a-source-set-from-attributes:parse-a-srcset-attribute">parsing</a> <var>srcset</var>.<li><p>Let <a href="#source-size-2" id="creating-a-source-set-from-attributes:source-size-2">source size</a> be the result of <a href="#parse-a-sizes-attribute" id="creating-a-source-set-from-attributes:parse-a-sizes-attribute">parsing</a> <var>sizes</var>.<li><p>If <var>default source</var> is not the empty string and <var>source set</var> does not contain an <a href="#image-source" id="creating-a-source-set-from-attributes:image-source">image source</a> with a <a href="#pixel-density-descriptor" id="creating-a-source-set-from-attributes:pixel-density-descriptor">pixel density descriptor</a> value of 1, and no <a href="#image-source" id="creating-a-source-set-from-attributes:image-source-2">image source</a> with a <a href="#width-descriptor" id="creating-a-source-set-from-attributes:width-descriptor">width descriptor</a>, append <var>default source</var> to <var>source set</var>.<li><p><a href="#normalise-the-source-densities" id="creating-a-source-set-from-attributes:normalise-the-source-densities">Normalize the source densities</a> of <var>source set</var>.<li><p>Return <var>source set</var>.</ol>


  <h6 id="updating-the-source-set"><span class="secno">4.8.4.3.9</span> Updating the source set<a href="#updating-the-source-set" class="self-link"></a></h6>

  <p>When asked to <dfn id="update-the-source-set">update the source set</dfn> for a given <code id="updating-the-source-set:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> or <code id="updating-the-source-set:the-link-element"><a href="semantics.html#the-link-element">link</a></code> element <var>el</var>, user agents must do the following:</p>

  <ol><li><p>Set <var>el</var>'s <a href="#source-set" id="updating-the-source-set:source-set">source set</a> to an empty <a href="#source-set" id="updating-the-source-set:source-set-2">source set</a>.<li><p>Let <var>elements</var> be « <var>el</var> ».<li><p>If <var>el</var> is an <code id="updating-the-source-set:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element whose parent node is a <code id="updating-the-source-set:the-picture-element"><a href="embedded-content.html#the-picture-element">picture</a></code> element, then <a href="https://triple-underscore.github.io/infra-ja.html#list-replace" id="updating-the-source-set:list-replace" data-x-internal="list-replace">replace</a> the contents of <var>elements</var> with <var>el</var>'s parent node's child elements, retaining relative order.<li><p><a href="https://triple-underscore.github.io/infra-ja.html#list-iterate" id="updating-the-source-set:list-iterate" data-x-internal="list-iterate">For each</a> <var>child</var> in <var>elements</var>:</p>

    <ol><li><p>If <var>child</var> is <var>el</var>:</p>

      <ol><li><p>Let <var>default source</var> be the empty string.<li><p>Let <var>srcset</var> be the empty string.<li><p>Let <var>sizes</var> be the empty string.<li><p>If <var>el</var> is an <code id="updating-the-source-set:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element that has a <code id="updating-the-source-set:attr-img-srcset"><a href="embedded-content.html#attr-img-srcset">srcset</a></code> attribute, then set <var>srcset</var> to that attribute's value.<li><p>Otherwise, if <var>el</var> is a <code id="updating-the-source-set:the-link-element-2"><a href="semantics.html#the-link-element">link</a></code> element that has an <code id="updating-the-source-set:attr-link-imagesrcset"><a href="semantics.html#attr-link-imagesrcset">imagesrcset</a></code> attribute, then set <var>srcset</var> to that attribute's value.<li><p>If <var>el</var> is an <code id="updating-the-source-set:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code> element that has a <code id="updating-the-source-set:attr-img-sizes"><a href="embedded-content.html#attr-img-sizes">sizes</a></code> attribute, then set <var>sizes</var> to that attribute's value.<li><p>Otherwise, if <var>el</var> is a <code id="updating-the-source-set:the-link-element-3"><a href="semantics.html#the-link-element">link</a></code> element that has an <code id="updating-the-source-set:attr-link-imagesizes"><a href="semantics.html#attr-link-imagesizes">imagesizes</a></code> attribute, then set <var>sizes</var> to that attribute's value.<li><p>If <var>el</var> is an <code id="updating-the-source-set:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code> element that has a <code id="updating-the-source-set:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code> attribute, then set <var>default source</var> to that attribute's value.<li><p>Otherwise, if <var>el</var> is a <code id="updating-the-source-set:the-link-element-4"><a href="semantics.html#the-link-element">link</a></code> element that has an <code id="updating-the-source-set:attr-link-href"><a href="semantics.html#attr-link-href">href</a></code> attribute, then set <var>default source</var> to that attribute's value.<li><p>Let <var>el</var>'s <a href="#source-set" id="updating-the-source-set:source-set-3">source set</a> be the result of <a href="#create-a-source-set" id="updating-the-source-set:create-a-source-set">creating a source set</a> given <var>default source</var>, <var>srcset</var>, and <var>sizes</var>.<li><p>Return.</p>

        <p class="note">If <var>el</var> is a <code id="updating-the-source-set:the-link-element-5"><a href="semantics.html#the-link-element">link</a></code> element, then <var>elements</var> contains only <var>el</var>, so this step will be reached immediately and the rest of the algorithm will not run.</p>
       </ol>
     <li><p>If <var>child</var> is not a <code id="updating-the-source-set:the-source-element"><a href="embedded-content.html#the-source-element">source</a></code> element, then <a id="updating-the-source-set:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If <var>child</var> does not have a <code id="updating-the-source-set:attr-source-srcset"><a href="embedded-content.html#attr-source-srcset">srcset</a></code> attribute, <a id="updating-the-source-set:continue-2" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a> to the next child.<li><p><a href="#parse-a-srcset-attribute" id="updating-the-source-set:parse-a-srcset-attribute">Parse <var>child</var>'s srcset attribute</a> and let the returned <a href="#source-set" id="updating-the-source-set:source-set-4">source set</a> be <var>source set</var>.<li><p>If <var>source set</var> has zero <a href="#image-source" id="updating-the-source-set:image-source">image sources</a>, <a id="updating-the-source-set:continue-3" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a> to the next child.<li><p>If <var>child</var> has a <code id="updating-the-source-set:attr-source-media"><a href="embedded-content.html#attr-source-media">media</a></code> attribute, and its value does not <a href="common-microsyntaxes.html#matches-the-environment" id="updating-the-source-set:matches-the-environment">match the environment</a>, <a id="updating-the-source-set:continue-4" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a> to the next child.<li><p><a href="#parse-a-sizes-attribute" id="updating-the-source-set:parse-a-sizes-attribute">Parse <var>child</var>'s sizes attribute</a>, and let <var>source set</var>'s <a href="#source-size-2" id="updating-the-source-set:source-size-2">source size</a> be the returned value.<li><p>If <var>child</var> has a <code id="updating-the-source-set:attr-source-type"><a href="embedded-content.html#attr-source-type">type</a></code> attribute, and its value is an unknown or unsupported <a id="updating-the-source-set:mime-type" href="https://triple-underscore.github.io/mimesniff-ja.html#mime-type" data-x-internal="mime-type">MIME type</a>, <a id="updating-the-source-set:continue-5" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a> to the next child.<li><p>If <var>child</var> has <code id="updating-the-source-set:attr-dim-width"><a href="embedded-content-other.html#attr-dim-width">width</a></code> or <code id="updating-the-source-set:attr-dim-height"><a href="embedded-content-other.html#attr-dim-height">height</a></code> attributes, set <var>el</var>'s <a href="embedded-content.html#concept-img-dimension-attribute-source" id="updating-the-source-set:concept-img-dimension-attribute-source">dimension attribute source</a> to <var>child</var>. Otherwise, set <var>el</var>'s <a href="embedded-content.html#concept-img-dimension-attribute-source" id="updating-the-source-set:concept-img-dimension-attribute-source-2">dimension attribute source</a> to <var>el</var>.<li><p><a href="#normalise-the-source-densities" id="updating-the-source-set:normalise-the-source-densities">Normalize the source densities</a> of <var>source set</var>.<li><p>Let <var>el</var>'s <a href="#source-set" id="updating-the-source-set:source-set-5">source set</a> be <var>source set</var>.<li><p>Return.</ol>
   </ol>

  <p class="note">Each <code id="updating-the-source-set:the-img-element-6"><a href="embedded-content.html#the-img-element">img</a></code> element independently considers its previous sibling <code id="updating-the-source-set:the-source-element-2"><a href="embedded-content.html#the-source-element">source</a></code> elements plus the <code id="updating-the-source-set:the-img-element-7"><a href="embedded-content.html#the-img-element">img</a></code> element itself for selecting an <a href="#image-source" id="updating-the-source-set:image-source-2">image source</a>, ignoring any other (invalid) elements, including other <code id="updating-the-source-set:the-img-element-8"><a href="embedded-content.html#the-img-element">img</a></code> elements in the same <code id="updating-the-source-set:the-picture-element-2"><a href="embedded-content.html#the-picture-element">picture</a></code> element, or <code id="updating-the-source-set:the-source-element-3"><a href="embedded-content.html#the-source-element">source</a></code> elements that are following siblings of the relevant <code id="updating-the-source-set:the-img-element-9"><a href="embedded-content.html#the-img-element">img</a></code> element.</p>


  <h6 id="parsing-a-srcset-attribute"><span class="secno">4.8.4.3.10</span> Parsing a srcset attribute<a href="#parsing-a-srcset-attribute" class="self-link"></a></h6>

  <p>When asked to <dfn id="parse-a-srcset-attribute">parse a srcset attribute</dfn> from an element, parse the value of the element's <a href="#srcset-attribute" id="parsing-a-srcset-attribute:srcset-attribute">srcset attribute</a> as follows:</p>

  <ol><li><p>Let <var>input</var> be the value passed to this algorithm.<li><p>Let <var>position</var> be a pointer into <var>input</var>, initially pointing at the start of the string.<li><p>Let <var>candidates</var> be an initially empty <a href="#source-set" id="parsing-a-srcset-attribute:source-set">source set</a>.<li><p><i>Splitting loop</i>: <a id="parsing-a-srcset-attribute:collect-a-sequence-of-code-points" href="https://triple-underscore.github.io/infra-ja.html#collect-a-sequence-of-code-points" data-x-internal="collect-a-sequence-of-code-points">Collect a sequence of code points</a> that are <a id="parsing-a-srcset-attribute:space-characters" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII whitespace</a> or U+002C COMMA characters from <var>input</var> given <var>position</var>. If any U+002C COMMA characters were collected, that is a <a href="#concept-microsyntax-parse-error" id="parsing-a-srcset-attribute:concept-microsyntax-parse-error">parse error</a>.<li><p>If <var>position</var> is past the end of <var>input</var>, return <var>candidates</var>.<li><p><a id="parsing-a-srcset-attribute:collect-a-sequence-of-code-points-2" href="https://triple-underscore.github.io/infra-ja.html#collect-a-sequence-of-code-points" data-x-internal="collect-a-sequence-of-code-points">Collect a sequence of code points</a> that are not <a id="parsing-a-srcset-attribute:space-characters-2" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII whitespace</a> from <var>input</var> given <var>position</var>, and let that be <var>url</var>.<li><p>Let <var>descriptors</var> be a new empty list.<li><p>If <var>url</var> ends with U+002C (,), then:</p>

    <ol><li><p>Remove all trailing U+002C COMMA characters from <var>url</var>. If this removed more than one character, that is a <a href="#concept-microsyntax-parse-error" id="parsing-a-srcset-attribute:concept-microsyntax-parse-error-2">parse error</a>.</ol>

    <p>Otherwise:</p>

    <ol><li><p><i>Descriptor tokenizer</i>: <a id="parsing-a-srcset-attribute:skip-ascii-whitespace" href="https://triple-underscore.github.io/infra-ja.html#skip-ascii-whitespace" data-x-internal="skip-ascii-whitespace">Skip ASCII whitespace</a> within <var>input</var> given <var>position</var>.<li><p>Let <var>current descriptor</var> be the empty string.<li><p>Let <var>state</var> be <i>in descriptor</i>.<li><p>Let <var>c</var> be the character at <var>position</var>. Do the following depending on the value of <var>state</var>. For the purpose of this step, "EOF" is a special character representing that <var>position</var> is past the end of <var>input</var>.</p>

      <dl class="switch"><dt><i>In descriptor</i><dd><p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class="switch"><dt><a id="parsing-a-srcset-attribute:space-characters-3" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII whitespace</a><dd><p>If <var>current descriptor</var> is not empty, append <var>current descriptor</var> to <var>descriptors</var> and let <var>current descriptor</var> be the empty string. Set <var>state</var> to <i>after descriptor</i>.<dt>U+002C COMMA (,)<dd><p>Advance <var>position</var> to the next character in <var>input</var>. If <var>current descriptor</var> is not empty, append <var>current descriptor</var> to <var>descriptors</var>. Jump to the step labeled <i>descriptor parser</i>.<dt>U+0028 LEFT PARENTHESIS (()<dd><p>Append <var>c</var> to <var>current descriptor</var>. Set <var>state</var> to <i>in parens</i>.<dt>EOF<dd><p>If <var>current descriptor</var> is not empty, append <var>current descriptor</var> to <var>descriptors</var>. Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>
       <dt><i>In parens</i><dd><p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class="switch"><dt>U+0029 RIGHT PARENTHESIS ())<dd><p>Append <var>c</var> to <var>current descriptor</var>. Set <var>state</var> to <i>in descriptor</i>.<dt>EOF<dd><p>Append <var>current descriptor</var> to <var>descriptors</var>. Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>
       <dt><i>After descriptor</i><dd><p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class="switch"><dt><a id="parsing-a-srcset-attribute:space-characters-4" href="https://triple-underscore.github.io/infra-ja.html#ascii-whitespace" data-x-internal="space-characters">ASCII whitespace</a><dd><p>Stay in this state.<dt>EOF<dd><p>Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Set <var>state</var> to <i>in descriptor</i>. Set <var>position</var> to the <em>previous</em> character in <var>input</var>.</dl>
       </dl>

      <p>Advance <var>position</var> to the next character in <var>input</var>. Repeat this step.</p>

      <p class="note">In order to be compatible with future additions, this algorithm supports multiple descriptors and descriptors with parens.</p>
     </ol>
   <li><p><i>Descriptor parser</i>: Let <var>error</var> be <i>no</i>.<li><p>Let <var>width</var> be <i>absent</i>.<li><p>Let <var>density</var> be <i>absent</i>.<li><p>Let <var>future-compat-h</var> be <i>absent</i>.<li><p>For each descriptor in <var>descriptors</var>, run the appropriate set of steps from the following list:</p>

    <dl class="switch"><dt>If the descriptor consists of a <a id="parsing-a-srcset-attribute:valid-non-negative-integer" href="common-microsyntaxes.html#valid-non-negative-integer">valid non-negative integer</a> followed by a U+0077 LATIN SMALL LETTER W character<dd><ol><li><p>If the user agent does not support the <code id="parsing-a-srcset-attribute:attr-img-sizes"><a href="embedded-content.html#attr-img-sizes">sizes</a></code> attribute, let <var>error</var> be <i>yes</i>.</p>

        <p class="note">A conforming user agent will support the <code id="parsing-a-srcset-attribute:attr-img-sizes-2"><a href="embedded-content.html#attr-img-sizes">sizes</a></code> attribute. However, user agents typically implement and ship features in an incremental manner in practice.</p>
       <li><p>If <var>width</var> and <var>density</var> are not both <i>absent</i>, then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a id="parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers" href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a> to the descriptor. If the result is zero, let <var>error</var> be <i>yes</i>. Otherwise, let <var>width</var> be the result.</ol>
     <dt>If the descriptor consists of a <a id="parsing-a-srcset-attribute:valid-floating-point-number" href="common-microsyntaxes.html#valid-floating-point-number">valid floating-point number</a> followed by a U+0078 LATIN SMALL LETTER X character<dd><ol><li><p>If <var>width</var>, <var>density</var> and <var>future-compat-h</var> are not all <i>absent</i>, then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a id="parsing-a-srcset-attribute:rules-for-parsing-floating-point-number-values" href="common-microsyntaxes.html#rules-for-parsing-floating-point-number-values">rules for parsing floating-point number values</a> to the descriptor. If the result is less than zero, let <var>error</var> be <i>yes</i>. Otherwise, let <var>density</var> be the result.</p>

        <p class="note">If <var>density</var> is zero, the <a id="parsing-a-srcset-attribute:intrinsic-dimensions" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-dimensions" data-x-internal="intrinsic-dimensions">intrinsic dimensions</a> will be infinite. User agents are expected to have limits in how big images can be rendered, which is allowed by the <a href="infrastructure.html#hardwareLimitations">hardware limitations</a> clause.</p>
       </ol>
     <dt>If the descriptor consists of a <a id="parsing-a-srcset-attribute:valid-non-negative-integer-2" href="common-microsyntaxes.html#valid-non-negative-integer">valid non-negative integer</a> followed by a U+0068 LATIN SMALL LETTER H character<dd><p>This is a <a href="#concept-microsyntax-parse-error" id="parsing-a-srcset-attribute:concept-microsyntax-parse-error-3">parse error</a>.</p>

      <ol><li><p>If <var>future-compat-h</var> and <var>density</var> are not both <i>absent</i>, then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a id="parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers-2" href="common-microsyntaxes.html#rules-for-parsing-non-negative-integers">rules for parsing non-negative integers</a> to the descriptor. If the result is zero, let <var>error</var> be <i>yes</i>. Otherwise, let <var>future-compat-h</var> be the result.</ol>
     <dt>Anything else<dd><p>Let <var>error</var> be <i>yes</i>.</dl>
   <li><p>If <var>future-compat-h</var> is not <i>absent</i> and <var>width</var> is <i>absent</i>, let <var>error</var> be <i>yes</i>.<li><p>If <var>error</var> is still <i>no</i>, then append a new <a href="#image-source" id="parsing-a-srcset-attribute:image-source">image source</a> to <var>candidates</var> whose URL is <var>url</var>, associated with a width <var>width</var> if not <i>absent</i> and a pixel density <var>density</var> if not <i>absent</i>. Otherwise, there is a <a href="#concept-microsyntax-parse-error" id="parsing-a-srcset-attribute:concept-microsyntax-parse-error-4">parse error</a>.<li><p>Return to the step labeled <i>splitting loop</i>.</ol>


  <h6 id="parsing-a-sizes-attribute"><span class="secno">4.8.4.3.11</span> Parsing a sizes attribute<a href="#parsing-a-sizes-attribute" class="self-link"></a></h6>

  <p>When asked to <dfn id="parse-a-sizes-attribute">parse a sizes attribute</dfn> from an element, <a id="parsing-a-sizes-attribute:parse-a-comma-separated-list-of-component-values" href="https://triple-underscore.github.io/css-syntax-ja.html#parse-a-comma-separated-list-of-component-values" data-x-internal="parse-a-comma-separated-list-of-component-values">parse a comma-separated list of component values</a> from the value of the element's <a href="#sizes-attribute" id="parsing-a-sizes-attribute:sizes-attribute">sizes attribute</a> (or the empty string, if the attribute is absent), and let <var>unparsed sizes list</var> be the result. <a href="references.html#refsCSSSYNTAX">[CSSSYNTAX]</a></p>

  <p>For each <var>unparsed size</var> in <var>unparsed sizes list</var>:</p>

  <ol><li><p>Remove all consecutive <a id="parsing-a-sizes-attribute:whitespace-token" href="https://triple-underscore.github.io/css-syntax-ja.html#typedef-whitespace-token" data-x-internal="whitespace-token">&lt;whitespace-token></a>s from the end of <var>unparsed size</var>. If <var>unparsed size</var> is now empty, that is a <a href="#concept-microsyntax-parse-error" id="parsing-a-sizes-attribute:concept-microsyntax-parse-error">parse error</a>; <a id="parsing-a-sizes-attribute:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>If the last <a id="parsing-a-sizes-attribute:component-value" href="https://triple-underscore.github.io/css-syntax-ja.html#component-value" data-x-internal="component-value">component value</a> in <var>unparsed size</var> is a valid non-negative <a href="#source-size-value" id="parsing-a-sizes-attribute:source-size-value">&lt;source-size-value></a>, let <var>size</var> be its value and remove the <a id="parsing-a-sizes-attribute:component-value-2" href="https://triple-underscore.github.io/css-syntax-ja.html#component-value" data-x-internal="component-value">component value</a> from <var>unparsed size</var>. Any CSS function other than the <a id="parsing-a-sizes-attribute:math-functions" href="https://triple-underscore.github.io/css-values-ja.html#math-function" data-x-internal="math-functions">math functions</a> is invalid. Otherwise, there is a <a href="#concept-microsyntax-parse-error" id="parsing-a-sizes-attribute:concept-microsyntax-parse-error-2">parse error</a>; <a id="parsing-a-sizes-attribute:continue-2" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>.<li><p>Remove all consecutive <a id="parsing-a-sizes-attribute:whitespace-token-2" href="https://triple-underscore.github.io/css-syntax-ja.html#typedef-whitespace-token" data-x-internal="whitespace-token">&lt;whitespace-token></a>s from the end of <var>unparsed size</var>. If <var>unparsed size</var> is now empty, return <var>size</var> and exit this algorithm. If this was not the last item in <var>unparsed sizes list</var>, that is a <a href="#concept-microsyntax-parse-error" id="parsing-a-sizes-attribute:concept-microsyntax-parse-error-3">parse error</a>.<li><p>Parse the remaining <a href="https://triple-underscore.github.io/css-syntax-ja.html#component-value" id="parsing-a-sizes-attribute:component-value-3" data-x-internal="component-value">component values</a> in <var>unparsed size</var> as a <a id="parsing-a-sizes-attribute:media-condition" href="https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition" data-x-internal="media-condition">&lt;media-condition></a>. If it does not parse correctly, or it does parse correctly but the <a id="parsing-a-sizes-attribute:media-condition-2" href="https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition" data-x-internal="media-condition">&lt;media-condition></a> evaluates to false, <a id="parsing-a-sizes-attribute:continue-3" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a>. <a href="references.html#refsMQ">[MQ]</a><li><p>Return <var>size</var> and exit this algorithm.</ol>

  <p>If the above algorithm exhausts <var>unparsed sizes list</var> without returning a <var>size</var> value, then return <code>100vw</code>.</p>

  <p class="note">While a <a href="#valid-source-size-list" id="parsing-a-sizes-attribute:valid-source-size-list">valid source size list</a> only contains a bare <a href="#source-size-value" id="parsing-a-sizes-attribute:source-size-value-2">&lt;source-size-value></a> (without an accompanying <a id="parsing-a-sizes-attribute:media-condition-3" href="https://triple-underscore.github.io/mediaqueries4-ja.html#typedef-media-condition" data-x-internal="media-condition">&lt;media-condition></a>) as the last entry in the <a href="#source-size-list" id="parsing-a-sizes-attribute:source-size-list">&lt;source-size-list></a>, the parsing algorithm technically allows such at any point in the list, and will accept it immediately as the size if the preceding entries in the list weren't used. This is to enable future extensions, and protect against simple author errors such as a final trailing comma.</p>


  <h6 id="normalizing-the-source-densities"><span class="secno">4.8.4.3.12</span> Normalizing the source densities<a href="#normalizing-the-source-densities" class="self-link"></a></h6>

  <p>An <a href="#image-source" id="normalizing-the-source-densities:image-source">image source</a> can have a <a href="#pixel-density-descriptor" id="normalizing-the-source-densities:pixel-density-descriptor">pixel density descriptor</a>, a <a href="#width-descriptor" id="normalizing-the-source-densities:width-descriptor">width descriptor</a>, or no descriptor at all accompanying its URL. Normalizing a <a href="#source-set" id="normalizing-the-source-densities:source-set">source set</a> gives every <a href="#image-source" id="normalizing-the-source-densities:image-source-2">image source</a> a <a href="#pixel-density-descriptor" id="normalizing-the-source-densities:pixel-density-descriptor-2">pixel density descriptor</a>.</p>

  <p>When asked to <dfn id="normalise-the-source-densities">normalize the source densities</dfn> of a <a href="#source-set" id="normalizing-the-source-densities:source-set-2">source set</a> <var>source set</var>, the user agent must do the following:</p>

  <ol><li><p>Let <var>source size</var> be <var>source set</var>'s <a href="#source-size-2" id="normalizing-the-source-densities:source-size-2">source size</a>.<li><p>For each <a href="#image-source" id="normalizing-the-source-densities:image-source-3">image source</a> in <var>source set</var>:</p>

    <ol><li><p>If the <a href="#image-source" id="normalizing-the-source-densities:image-source-4">image source</a> has a <a href="#pixel-density-descriptor" id="normalizing-the-source-densities:pixel-density-descriptor-3">pixel density descriptor</a>, <a id="normalizing-the-source-densities:continue" href="https://triple-underscore.github.io/infra-ja.html#iteration-continue" data-x-internal="continue">continue</a> to the next <a href="#image-source" id="normalizing-the-source-densities:image-source-5">image source</a>.<li><p>Otherwise, if the <a href="#image-source" id="normalizing-the-source-densities:image-source-6">image source</a> has a <a href="#width-descriptor" id="normalizing-the-source-densities:width-descriptor-2">width descriptor</a>, replace the <a href="#width-descriptor" id="normalizing-the-source-densities:width-descriptor-3">width descriptor</a> with a <a href="#pixel-density-descriptor" id="normalizing-the-source-densities:pixel-density-descriptor-4">pixel density descriptor</a> with a <a href="#pixel-density-descriptor-value" id="normalizing-the-source-densities:pixel-density-descriptor-value">value</a> of the <a href="#width-descriptor-value" id="normalizing-the-source-densities:width-descriptor-value">width descriptor value</a> divided by the <a href="#source-size-2" id="normalizing-the-source-densities:source-size-2-2">source size</a> and a unit of <code>x</code>.</p>

      <p class="note">If the <a href="#source-size-2" id="normalizing-the-source-densities:source-size-2-3">source size</a> is zero, the density would be infinity, which results in the <a id="normalizing-the-source-densities:intrinsic-dimensions" href="https://triple-underscore.github.io/css-images-ja.html#intrinsic-dimensions" data-x-internal="intrinsic-dimensions">intrinsic dimensions</a> being zero by zero.</p>
     <li><p>Otherwise, give the <a href="#image-source" id="normalizing-the-source-densities:image-source-7">image source</a> a <a href="#pixel-density-descriptor" id="normalizing-the-source-densities:pixel-density-descriptor-5">pixel density descriptor</a> of <code>1x</code>.</ol>
   </ol>


  <h6 id="reacting-to-environment-changes"><span class="secno">4.8.4.3.13</span> Reacting to environment changes<a href="#reacting-to-environment-changes" class="self-link"></a></h6>

  <p id="img-environment-changes">The user agent may at any time run the following algorithm to update an <code id="reacting-to-environment-changes:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element's image in order to react to changes in the environment. (User agents are <em>not required</em> to ever run this algorithm; for example, if the user is not looking at the page any more, the user agent might want to wait until the user has returned to the page before determining which image to use, in case the environment changes again in the meantime.)</p>

  <p class="note">User agents are encouraged to run this algorithm in particular when the user changes the <a id="reacting-to-environment-changes:viewport" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>'s size (e.g. by resizing the window or changing the page zoom), and when an <code id="reacting-to-environment-changes:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element is <a href="infrastructure.html#insert-an-element-into-a-document" id="reacting-to-environment-changes:insert-an-element-into-a-document">inserted into a document</a>, so that the <a href="#density-corrected-intrinsic-width-and-height" id="reacting-to-environment-changes:density-corrected-intrinsic-width-and-height">density-corrected intrinsic width and height</a> match the new <a id="reacting-to-environment-changes:viewport-2" href="https://drafts.csswg.org/css2/#viewport" data-x-internal="viewport">viewport</a>, and so that the correct image is chosen when <a href="#art-direction" id="reacting-to-environment-changes:art-direction">art direction</a> is involved.</p>

  <ol><li><p><a id="reacting-to-environment-changes:await-a-stable-state" href="webappapis.html#await-a-stable-state">Await a stable state</a>. The <a id="reacting-to-environment-changes:synchronous-section" href="webappapis.html#synchronous-section">synchronous section</a> consists of all the remaining steps of this algorithm until the algorithm says the <a id="reacting-to-environment-changes:synchronous-section-2" href="webappapis.html#synchronous-section">synchronous section</a> has ended. (Steps in <a href="webappapis.html#synchronous-section" id="reacting-to-environment-changes:synchronous-section-3">synchronous sections</a> are marked with ⌛.)<li><p>⌛ If the <code id="reacting-to-environment-changes:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element does not <a href="#use-srcset-or-picture" id="reacting-to-environment-changes:use-srcset-or-picture">use <code>srcset</code> or <code>picture</code></a>, its <a id="reacting-to-environment-changes:node-document" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a> is not <a id="reacting-to-environment-changes:fully-active" href="document-sequences.html#fully-active">fully active</a>, has image data whose resource type is <code id="reacting-to-environment-changes:multipart/x-mixed-replace"><a href="iana.html#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code>, or the <a href="#pending-request" id="reacting-to-environment-changes:pending-request">pending request</a> is not null, then return.<li><p>⌛ Let <var>selected source</var> and <var>selected pixel density</var> be the URL and pixel density that results from <a href="#select-an-image-source" id="reacting-to-environment-changes:select-an-image-source">selecting an image source</a>, respectively.<li><p>⌛ If <var>selected source</var> is null, then return.<li><p>⌛ If <var>selected source</var> and <var>selected pixel density</var> are the same as the element's <a href="#last-selected-source" id="reacting-to-environment-changes:last-selected-source">last selected source</a> and <a href="#current-pixel-density" id="reacting-to-environment-changes:current-pixel-density">current pixel density</a>, then return.<li><p>⌛ <a href="urls-and-fetching.html#parse-a-url" id="reacting-to-environment-changes:parse-a-url">Parse</a> <var>selected source</var>, relative to the element's <a id="reacting-to-environment-changes:node-document-2" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>, and let <var>urlString</var> be the <a id="reacting-to-environment-changes:resulting-url-string" href="urls-and-fetching.html#resulting-url-string">resulting URL string</a>. If that is not successful, then return.<li><p>⌛ Let <var>corsAttributeState</var> be the state of the element's <code id="reacting-to-environment-changes:attr-img-crossorigin"><a href="embedded-content.html#attr-img-crossorigin">crossorigin</a></code> content attribute.<li><p>⌛ Let <var>origin</var> be the <code id="reacting-to-environment-changes:the-img-element-4"><a href="embedded-content.html#the-img-element">img</a></code> element's <a id="reacting-to-environment-changes:node-document-3" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a href="https://dom.spec.whatwg.org/#concept-document-origin" id="reacting-to-environment-changes:concept-document-origin" data-x-internal="concept-document-origin">origin</a>.<li><p>⌛ Let <var>client</var> be the <code id="reacting-to-environment-changes:the-img-element-5"><a href="embedded-content.html#the-img-element">img</a></code> element's <a id="reacting-to-environment-changes:node-document-4" href="https://triple-underscore.github.io/DOM4-ja.html#concept-node-document" data-x-internal="node-document">node document</a>'s <a id="reacting-to-environment-changes:relevant-settings-object" href="webappapis.html#relevant-settings-object">relevant settings object</a>.<li><p>⌛ Let <var>key</var> be a tuple consisting of <var>urlString</var>, <var>corsAttributeState</var>, and, if <var>corsAttributeState</var> is not <a href="urls-and-fetching.html#attr-crossorigin-none" id="reacting-to-environment-changes:attr-crossorigin-none">No CORS</a>, <var>origin</var>.<li><p>⌛ Let <var>image request</var> be a new <a href="#image-request" id="reacting-to-environment-changes:image-request">image request</a> whose <a href="#img-req-url" id="reacting-to-environment-changes:img-req-url">current URL</a> is <var>urlString</var><li><p>⌛ Let the element's <a href="#pending-request" id="reacting-to-environment-changes:pending-request-2">pending request</a> be <var>image request</var>.<li><p>End the <a id="reacting-to-environment-changes:synchronous-section-4" href="webappapis.html#synchronous-section">synchronous section</a>, continuing the remaining steps <a id="reacting-to-environment-changes:in-parallel" href="infrastructure.html#in-parallel">in parallel</a>.<li><p>If the <a href="#list-of-available-images" id="reacting-to-environment-changes:list-of-available-images">list of available images</a> contains an entry for <var>key</var>, then set <var>image request</var>'s <a href="#img-req-data" id="reacting-to-environment-changes:img-req-data">image data</a> to that of the entry. Continue to the next step.</p>

    <p>Otherwise:</p>

    <ol><li><p>Let <var>request</var> be the result of <a href="urls-and-fetching.html#create-a-potential-cors-request" id="reacting-to-environment-changes:create-a-potential-cors-request">creating a potential-CORS request</a> given <var>urlString</var>, "<code>image</code>", and <var>corsAttributeState</var>.<li><p>Set <var>request</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-client" id="reacting-to-environment-changes:concept-request-client" data-x-internal="concept-request-client">client</a> to <var>client</var>, <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-initiator" id="reacting-to-environment-changes:concept-request-initiator" data-x-internal="concept-request-initiator">initiator</a> to "<code>imageset</code>", and set <var>request</var>'s <a id="reacting-to-environment-changes:synchronous-flag" href="https://triple-underscore.github.io/Fetch-ja.html#synchronous-flag" data-x-internal="synchronous-flag">synchronous flag</a>.<li><p>Set <var>request</var>'s <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-request-referrer-policy" id="reacting-to-environment-changes:concept-request-referrer-policy" data-x-internal="concept-request-referrer-policy">referrer policy</a> to the current state of the element's <code id="reacting-to-environment-changes:attr-img-referrerpolicy"><a href="embedded-content.html#attr-img-referrerpolicy">referrerpolicy</a></code> attribute.<li><p>Let <var>response</var> be the result of <a href="https://triple-underscore.github.io/Fetch-ja.html#concept-fetch" id="reacting-to-environment-changes:concept-fetch" data-x-internal="concept-fetch">fetching</a> <var>request</var>.<li><p>If <var>response</var>'s <a id="reacting-to-environment-changes:unsafe-response" href="urls-and-fetching.html#unsafe-response">unsafe response</a> is a <a id="reacting-to-environment-changes:network-error" href="https://triple-underscore.github.io/Fetch-ja.html#concept-network-error" data-x-internal="network-error">network error</a> or if the image format is unsupported (as determined by applying the <a href="https://triple-underscore.github.io/mimesniff-ja.html#rules-for-sniffing-images-specifically" id="reacting-to-environment-changes:content-type-sniffing:-image" data-x-internal="content-type-sniffing:-image">image sniffing rules</a>, again as mentioned earlier), or if the user agent is able to determine that <var>image request</var>'s image is corrupted in some fatal way such that the image dimensions cannot be obtained, or if the resource type is <code id="reacting-to-environment-changes:multipart/x-mixed-replace-2"><a href="iana.html#multipart/x-mixed-replace">multipart/x-mixed-replace</a></code>, then let <a href="#pending-request" id="reacting-to-environment-changes:pending-request-3">pending request</a> be null and abort these steps.<li><p>Otherwise, <var>response</var>'s <a id="reacting-to-environment-changes:unsafe-response-2" href="urls-and-fetching.html#unsafe-response">unsafe response</a> is <var>image request</var>'s <a href="#img-req-data" id="reacting-to-environment-changes:img-req-data-2">image data</a>. It can be either <a id="reacting-to-environment-changes:cors-same-origin" href="urls-and-fetching.html#cors-same-origin">CORS-same-origin</a> or <a id="reacting-to-environment-changes:cors-cross-origin" href="urls-and-fetching.html#cors-cross-origin">CORS-cross-origin</a>; this affects the image's interaction with other APIs (e.g., when used on a <code id="reacting-to-environment-changes:the-canvas-element"><a href="canvas.html#the-canvas-element">canvas</a></code>).</ol>
   <li><p><a id="reacting-to-environment-changes:queue-an-element-task" href="webappapis.html#queue-an-element-task">Queue an element task</a> on the <a id="reacting-to-environment-changes:dom-manipulation-task-source" href="webappapis.html#dom-manipulation-task-source">DOM manipulation task source</a> given the <code id="reacting-to-environment-changes:the-img-element-6"><a href="embedded-content.html#the-img-element">img</a></code> element and the following steps:</p>

    <ol><li><p>If the <code id="reacting-to-environment-changes:the-img-element-7"><a href="embedded-content.html#the-img-element">img</a></code> element has experienced <a href="#relevant-mutations" id="reacting-to-environment-changes:relevant-mutations">relevant mutations</a> since this algorithm started, then let <a href="#pending-request" id="reacting-to-environment-changes:pending-request-4">pending request</a> be null and abort these steps.</p>

     <li><p>Let the <code id="reacting-to-environment-changes:the-img-element-8"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#last-selected-source" id="reacting-to-environment-changes:last-selected-source-2">last selected source</a> be <var>selected source</var> and the <code id="reacting-to-environment-changes:the-img-element-9"><a href="embedded-content.html#the-img-element">img</a></code> element's <a href="#current-pixel-density" id="reacting-to-environment-changes:current-pixel-density-2">current pixel density</a> be <var>selected pixel density</var>.<li><p>Set the <var>image request</var>'s <a href="#img-req-state" id="reacting-to-environment-changes:img-req-state">state</a> to <a href="#img-all" id="reacting-to-environment-changes:img-all">completely available</a>.<li><p>Add the image to the <a href="#list-of-available-images" id="reacting-to-environment-changes:list-of-available-images-2">list of available images</a> using the key <var>key</var>, with the <a href="#ignore-higher-layer-caching" id="reacting-to-environment-changes:ignore-higher-layer-caching">ignore higher-layer caching</a> flag set.<li><p><a href="#upgrade-the-pending-request-to-the-current-request" id="reacting-to-environment-changes:upgrade-the-pending-request-to-the-current-request">Upgrade the pending request to the current request</a>.<li><p><a href="#prepare-an-image-for-presentation" id="reacting-to-environment-changes:prepare-an-image-for-presentation">Prepare <var>image request</var> for presentation</a> given the <code id="reacting-to-environment-changes:the-img-element-10"><a href="embedded-content.html#the-img-element">img</a></code> element.<li><p><a href="https://triple-underscore.github.io/DOM4-ja.html#concept-event-fire" id="reacting-to-environment-changes:concept-event-fire" data-x-internal="concept-event-fire">Fire an event</a> named <code id="reacting-to-environment-changes:event-load"><a href="indices.html#event-load">load</a></code> at the <code id="reacting-to-environment-changes:the-img-element-11"><a href="embedded-content.html#the-img-element">img</a></code> element.</ol>
   </ol>

  


  <h5 id="alt"><span class="secno">4.8.4.4</span> 画像に対して代替として動作するテキストを提供に対する要件<a href="#alt" class="self-link"></a></h5>


  <h6 id="general-guidelines"><span class="secno">4.8.4.4.1</span> 一般的なガイドライン<a href="#general-guidelines" class="self-link"></a></h6>

  <p>特に指定されている場合を除き、<code id="general-guidelines:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を指定しなければならず、その値は空であってはならない。値は画像に対して適切な代用品でなければならない。<code id="general-guidelines:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性に対する具体的な要件は、以下の節で説明するように、画像が表現しようとするものによって異なる。</p>

  <p>代替テキストを記述する場合に考慮すべき最も一般的な規則は次のとおりである：すべての画像をその画像の<strong><code id="general-guidelines:attr-img-alt-3"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性のテキストと置換してもページの意味を変えないことを意図する</strong>。</p>

  <p>よって、一般に、代替テキストは、もし画像を含めることができなかったならば、何が書かれていただろうかを考慮することで記述することができる。</p>

  <p>この帰結は、<code id="general-guidelines:attr-img-alt-4"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性の値が画像の<em>キャプション</em>、<em>タイトル</em>、<em>凡例</em>とみなすことができるテキストを含めるべきではないということである。ユーザーが画像の<em>代わりに</em>使用できる代用テキストを含むはずである。画像を補完することを意図しない。<code id="general-guidelines:attr-title"><a href="dom.html#attr-title">title</a></code>属性は、補足情報のために使用することができる。</p>

  <p>もう1つの帰結は、<code id="general-guidelines:attr-img-alt-5"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性の値は既に画像隣接する文で提供される情報を繰り返すべきではないということである。</p>

  <p class="note">代替テキストを考える1つの方法は、画像の存在があることを言及することなく、電話で誰かに画像を含むページをどのように読むかを考えることである。通常、画像の代わりにいうものは何でも、代替テキストを記述するための良いスタートである。</p>


  <h6 id="a-link-or-button-containing-nothing-but-the-image"><span class="secno">4.8.4.4.2</span> 画像のみを含むリンクまたはボタン<a href="#a-link-or-button-containing-nothing-but-the-image" class="self-link"></a></h6>

  <p><a id="a-link-or-button-containing-nothing-but-the-image:hyperlink" href="links.html#hyperlink">ハイパーリンク</a>を作成する<code id="a-link-or-button-containing-nothing-but-the-image:the-a-element"><a href="text-level-semantics.html#the-a-element">a</a></code>要素、または<code id="a-link-or-button-containing-nothing-but-the-image:the-button-element"><a href="form-elements.html#the-button-element">button</a></code>要素が、テキストコンテンツを持たないが1つ以上の画像を含む場合、<code id="a-link-or-button-containing-nothing-but-the-image:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性はリンクまたはボタンの目的を併せて伝えるテキストを含まなければならない。</p>

  <div class="example"><p>この例では、ユーザーは、3つのリストから好みの色を選択するよう求められている。各色は画像で与えられるが、画像を表示しないようにユーザーエージェントを設定しているユーザーのために、色名が代わりに使用される：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Pick your color<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
<c- p>&lt;</c-><c- f>ul</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"green.html"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"green.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Green"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"blue.html"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"blue.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Blue"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>li</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"red.html"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"red.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Red"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>li</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>ul</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>この例において、それぞれのボタンは、ユーザーが望む色の出力の種類を示すために、画像の集合を持つ。最初の画像は、代替テキストを提供するために使用される。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"rgb"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"red"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"RGB"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"green"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"blue"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"cmyk"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"cyan"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"CMYK"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"magenta"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"yellow"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"black"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c-></code></pre>

   <p>各画像はテキストの一部を表すため、このようにも書くことができる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"rgb"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"red"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"R"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"green"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"G"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"blue"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"B"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"cmyk"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"cyan"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"C"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"magenta"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"M"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"yellow"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Y"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"black"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"K"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c-></code></pre>

   <p>しかし、他の代替テキストとともに、これは動作しないかもしれず、それぞれの場合に1つの画像にすべての代替テキストを入れる方が理にかなっているかもしれない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"rgb"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"red"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"sRGB profile"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"green"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"blue"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c->
<c- p>&lt;</c-><c- f>button</c-> <c- e>name</c-><c- o>=</c-><c- s>"cmyk"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"cyan"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"CMYK profile"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"magenta"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"yellow"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"black"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>button</c-><c- p>></c-></code></pre>

  </div>



  <h6 id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations"><span class="secno">4.8.4.4.3</span> 代替グラフィカル表現をもつフレーズまたは段落：チャート、図、グラフ、マップ、イラスト<a href="#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations" class="self-link"></a></h6>

  <p>たとえばフローチャート、図、グラフ、または道順を示す簡単な地図など、意味ある物を視覚的な形式で時により明確に記述することができる。そのような場合、画像は<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素を使って指定することができるが、より少ないテキスト版が依然として与えられなければならず、そのため画像を表示できない（たとえば、非常に低速な接続である、またはテキストのみのブラウザーを使用している、またはハンズフリーの自動車用音声ウェブブラウザーによって読み出されているページを聞いている、または単に目が見えないため）ユーザーは依然としてメッセージが搬送されて理解できる。</p>

  <p>テキストは<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性で指定されなければならず、かつ<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-src"><a href="embedded-content.html#attr-img-src">src</a></code>属性で指定される画像と同じメッセージを伝えなければならない。</p>

  <p>代替テキストが画像の説明でなく、画像の<em>代用品</em>であることを認識することが重要である。</p>

  <div class="example"><p>次の例において、文形式のフローチャートを言い換える<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性のテキストをともなう、画像形式の<a href="https://html.spec.whatwg.org/multipage/images/parsing-model-overview.svg">フローチャート</a>を持つ：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->In the common case, the data handled by the tokenization stage
comes from the network, but it can also come from script.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/parsing-model-overview.svg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The Network</c->
<c- s>passes data to the Input Stream Preprocessor, which passes it to the</c->
<c- s>Tokenizer, which passes it to the Tree Construction stage. From there,</c->
<c- s>data goes to both the DOM and to Script Execution. Script Execution is</c->
<c- s>linked to the DOM, and, using document.write(), passes data to the</c->
<c- s>Tokenizer."</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>これは別の例であり、説明に画像を含める問題に良い解決策と悪い解決策を示すものである。</p>

   <p>まず、これは良い解決策である。このサンプルは、画像が存在しなかった場合、代替テキストがちょうど文に入れたであろうものがどうあるべきかを示す。</p>

   <pre><code class='html'><c- c>&lt;!-- This is the correct way to do things. --></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->
 You are standing in an open field west of a house.
 <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"house.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The house is white, with a boarded front door."</c-><c- p>></c-></strong>
 There is a small mailbox here.
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>つぎに、これは悪い解決策である。この間違った方法では、画像に対するテキスト置換の代わりに、代替テキストは画像の簡単な説明である。画像が表示されていない場合、テキストは最初の例と同様に流れない。</p>

   <pre class="bad"><code class='html'><c- c>&lt;!-- </c-><em><c- c>This is the wrong way to do things.</c-></em><c- c> --></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->
 You are standing in an open field west of a house.
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"house.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"A white house, with a boarded front door."</c-><c- p>></c->
 There is a small mailbox here.
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>（<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-title"><a href="dom.html#attr-title">title</a></code>属性に対して、または、この画像をもつ<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figure-element"><a href="grouping-content.html#the-figure-element">figure</a></code>の<code id="a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figcaption-element"><a href="grouping-content.html#the-figcaption-element">figcaption</a></code>要素内で適当かもしれないが）"Photo of white house with boarded door"などのテキストは同様に悪い代替テキストとなる。</p>

  </div>


  <h6 id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos"><span class="secno">4.8.4.4.4</span> 代替グラフィカル表現をもつ短いフレーズまたはラベル：アイコン、ロゴ<a href="#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos" class="self-link"></a></h6>

  <p>文書は、アイコン形式で情報を含むことができる。アイコンは、視覚ブラウザーのユーザーに一目で機能を認識するのを助けることを意図する。</p>

  <p>ある場合、アイコンは同じ意味を伝えるテキストラベルを補足する。これらの場合において、<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は存在しなければならないが、空でなければならない。</p>

  <div class="example"><p>ここで、アイコンは同じ意味を伝えるテキストの隣にあるので、空の<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を持つ：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>nav</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/help/"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/icons/help.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong> Help<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"/configure/"</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/icons/configuration.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong>
 Configuration Tools<c- p>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>nav</c-><c- p>></c-></code></pre>

  </div>

  <p>他の場合において、アイコンは何かを意味する記述をもつ横のテキストを持たない。アイコンは自明であると仮定される。この場合において、同等のテキストラベルは<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-3"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性で指定しなければならない。</p>

  <div class="example"><p>ここで、ニュースサイトの記事は、そのトピックを示すアイコンが表示される。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>body</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>article</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>header</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Ratatouille wins <c- p>&lt;</c-><c- f>i</c-><c- p>></c->Best Movie of the Year<c- p>&lt;/</c-><c- f>i</c-><c- p>></c-> award<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"movies.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Movies"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>header</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Pixar has won yet another <c- p>&lt;</c-><c- f>i</c-><c- p>></c->Best Movie of the Year<c- p>&lt;/</c-><c- f>i</c-><c- p>></c-> award,
  making this its 8th win in the last 12 years.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>article</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>header</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->Latest TWiT episode is online<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"podcasts.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Podcasts"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
  <c- p>&lt;/</c-><c- f>header</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->The latest TWiT episode has been posted, in which we hear
  several tech news stories as well as learning much more about the
  iPhone. This week, the panelists compare how reflective their
  iPhones' Apple logos are.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>article</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c-></code></pre>

  </div>

  <p>多くのページは、会社、組織、プロジェクト、バンド、ソフトウェアパッケージ、国、またはその他団体を表すロゴ、記号、旗、またはエンブレムを含む。</p>

  <p>たとえばページの見出しのように、ロゴが団体を表すために使用されている場合、<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-4"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性はロゴによって表されるその団体の名前を含まなければならない。<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-5"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は、伝えられているロゴであるという事実はないので、単語"ロゴ"のようなテキストを含んではなら<em>ない</em>。団体そのものである。</p>

  <p>ロゴが表すものの名前の横にロゴが使用される場合、そのロゴは補足であり、その<code id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-6"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は空でなければならない。</p>

  <p>ロゴが単なる装飾材料（ブランディングとして、たとえば、ロゴが所属する実体を言及する記事でサイドイメージ）として使用される場合、純粋に装飾的な画像で以下のエントリーが適用される。ロゴが実際に議論されている場合、それは代替グラフィック表現（ロゴ自体）、および適用される上記の最初のエントリーを持つ語句や段落（ロゴの説明）として使用されている。</p>

  <div class="example"><p>以下の断片において、上記の例のすべての4つが存在している。まず、会社を表すために使用されるロゴを見てみる：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"XYZ.gif"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The XYZ company"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>h1</c-><c- p>></c-></code></pre>

   <p>次に、会社名の隣でロゴを使用する段落を見てみよう。何ら代替テキストを持たない：<pre><code class='html'><c- p>&lt;</c-><c- f>article</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>h2</c-><c- p>></c->News<c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->We have recently been looking at buying the <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"alpha.gif"</c->
 <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-> ΑΒΓ company</strong>, a small Greek company
 specializing in our type of product.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>この3番目の断片において、購買を吟味するarticleの一部として、asideに使用されているロゴを持つ：</p>

<pre><code class='html'><strong><c- p>&lt;</c-><c- f>aside</c-><c- p>>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"alpha-large.gif"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>>&lt;/</c-><c- f>aside</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->The ΑΒΓ company has had a good quarter, and our
 pie chart studies of their accounts suggest a much bigger blue slice
 than its green and orange slices, which is always a good sign.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>article</c-><c- p>></c-></code></pre>

   <p>最後に、ロゴを話題にする意見記事であり、ロゴは代替テキストで詳細に記載される。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Consider for a moment their logo:<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->

<strong><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/images/logo"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"It consists of a green circle with a</c->
<c- s>green question mark centered inside it."</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></strong>

<c- p>&lt;</c-><c- f>p</c-><c- p>></c->How unoriginal can you get? I mean, oooooh, a question mark, how
<c- p>&lt;</c-><c- f>em</c-><c- p>></c->revolutionary<c- p>&lt;/</c-><c- f>em</c-><c- p>></c->, how utterly <c- p>&lt;</c-><c- f>em</c-><c- p>></c->ground-breaking<c- p>&lt;/</c-><c- f>em</c-><c- p>></c->, I'm
sure everyone will rush to adopt those specifications now! They could
at least have tried for some sort of, I don't know, sequence of
rounded squares with varying shades of green and bold white outlines,
at least that would look good on the cover of a blue book.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>この例は、画像が<i id="a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:img-available"><a href="#img-available">利用可能</a></i>でない場合、どのように代替テキストは記述すべきかを示し、代わりにテキストが使用され、あたかも画像が最初の場所になかったかのように、テキストは周囲のテキストにシームレスに流れる。</p>

  </div>


  <h6 id="text-that-has-been-rendered-to-a-graphic-for-typographical-effect"><span class="secno">4.8.4.4.5</span> 印刷効果のためにグラフィックにレンダリングされたテキスト<a href="#text-that-has-been-rendered-to-a-graphic-for-typographical-effect" class="self-link"></a></h6>

  <p>時に、画像がテキストだけで構成されており、画像の目的が、テキストをレンダリングするために使用される実際の印刷効果を強調するだけでなく、単にテキスト自体を伝えるもの。</p>

  <p>このような場合、<code id="text-that-has-been-rendered-to-a-graphic-for-typographical-effect:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性が存在しなければならないが、画像自身に書かれたものと同じテキストで構成されなければならない。</p>

  <div class="example"><p>テキスト"Earth Day"を含むグラフィックを考慮するが、文字はすべての花や植物で飾られる。グラフィカルなユーザーに対してページに味わいを加えるために、テキストが単に見出しとして使用される場合、適切な代替テキストはまさに同じテキスト"Earth Day"であり、装飾的な言及は何ら必要ない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"earthdayheading.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Earth Day"</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>h1</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>彩色写本は、その画像の一部のグラフィックスを使用するかもしれない。このような状況で代替テキストは、単に画像が表す文字である。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"initials/o.svg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"O"</c-><c- p>></c->nce upon a time and a long long time ago, late at
night, when it was dark, over the hills, through the woods, across a great ocean, in a land far
away, in a small house, on a hill, under a full moon...</code></pre> 

  </div>

  <p>画像がUnicodeで表現できない文字を表すために別の方法で使用される場合、たとえば外字、異体字、または新規の通貨記号のような新しい文字において、テキストによる代替は、たとえば、文字の発音を与えるために表音のひらがなやカタカナを使用するなど、同じものを記述するより伝統的な方法であるべきである。</p>

  <div class="example"><p>1997年からのこの例において、中央の2つのバーとともに渦巻き状のEのように見える最新式の通貨記号のかわりに、画像を使用して表現される。代替テキストは、文字の発音を与える。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Only <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"euro.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"euro "</c-><c- p>></c->5.99!</code></pre>

  </div>

  <p>文字が同じ目的を果たすならば画像を使用すべきでない。たとえば装飾のため、または適切な文字がないため（外字の場合のように）など、テキストをテキストで直接表現することができない場合にのみ、画像が適切だろう。</p>

  <p class="note">デフォルトのシステムフォントが指定された文字をサポートしないため、著者が画像を使用するように誘惑される場合、ウェブフォントは画像よりも優れた解決策である。</p>



  <h6 id="a-graphical-representation-of-some-of-the-surrounding-text"><span class="secno">4.8.4.4.6</span> 周囲のテキストの一部をグラフィカルに表現<a href="#a-graphical-representation-of-some-of-the-surrounding-text" class="self-link"></a></h6>

  <p>多くの場合、画像は実際には単なる補足であり、その存在は単に周囲のテキストを強調するだけである。この場合、<code id="a-graphical-representation-of-some-of-the-surrounding-text:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性が存在しなければならないが、その値は空文字列でなければならない。</p>

  <p>一般に画像は、画像を削除してもページの有用性が弱まるわけでない場合にこのカテゴリーに分類されるが、画像を含めることは、視覚ブラウザーのユーザーにとって概念を理解することがはるかに容易になる。</p>

  <div class="example"><p>グラフィカルな形式で、前の段落を繰り返すフローチャート：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/parsing-model-overview.svg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></strong></code></pre>

   <p>この場合、単なるキャプションで構成する代替テキストを含めることが間違っているだろう。キャプションが含まれるべき場合、<code id="a-graphical-representation-of-some-of-the-surrounding-text:attr-title"><a href="dom.html#attr-title">title</a></code>属性、または、<code id="a-graphical-representation-of-some-of-the-surrounding-text:the-figure-element"><a href="grouping-content.html#the-figure-element">figure</a></code>および<code id="a-graphical-representation-of-some-of-the-surrounding-text:the-figcaption-element"><a href="grouping-content.html#the-figcaption-element">figcaption</a></code>要素のいずれかを使用できる。後者の場合、画像は実際に代替グラフィック表現を伴うフレーズまたは段落かもしれず、したがって代替テキストを必要とする。</p>

   <pre><code class='html'><c- c>&lt;!-- Using the title="" attribute --></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/parsing-model-overview.svg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c->
        <c- e>title</c-><c- o>=</c-><c- s>"Flowchart representation of the parsing model."</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <pre><code class='html'><c- c>&lt;!-- Using &lt;figure> and &lt;figcaption> --></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/parsing-model-overview.svg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The Network leads to</c->
<c- s> the Input Stream Preprocessor, which leads to the Tokenizer, which</c->
<c- s> leads to the Tree Construction stage. The Tree Construction stage</c->
<c- s> leads to two items. The first is Script Execution, which leads via</c->
<c- s> document.write() back to the Tokenizer. The second item from which</c->
<c- s> Tree Construction leads is the DOM. The DOM is related to the Script</c->
<c- s> Execution."</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Flowchart representation of the parsing model.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

   <pre class="bad"><code class='html'><c- c>&lt;!-- This is WRONG. Do not do this. Instead, do what the above examples do. --></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"images/parsing-model-overview.svg"</c->
        <c- e>alt</c-><c- o>=</c-><c- s>"Flowchart representation of the parsing model."</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- c>&lt;!-- Never put the image's caption in the alt="" attribute! --></c-></code></pre>

  </div>

  <div class="example"><p>グラフィカルな形式で、前の段落を繰り返すグラフ：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->According to a study covering several billion pages,
about 62% of documents on the web in 2007 triggered the Quirks
rendering mode of web browsers, about 30% triggered the Almost
Standards mode, and about 9% triggered the Standards mode.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"rendering-mode-pie-chart.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></strong></code></pre>

  </div>



  <h6 id="ancillary-images"><span class="secno">4.8.4.4.7</span> 補助画像<a href="#ancillary-images" class="self-link"></a></h6>

  <p>時には、画像はコンテンツに重要ではないが、それにもかかわらず、純粋に装飾的でもテキストと完全に冗長でもないことがある。この場合、<code id="ancillary-images:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は存在しなければならず、かつその値は空の文字列、または画像が伝える情報のテキスト表現のいずれかであるべきである。画像が画像のタイトルを与えるキャプションを持つ場合、（非視覚読者に相当な混乱を与えることになるので）<code id="ancillary-images:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性の値は空であってはならない。</p>

  <div class="example"><p>個人の顔が画像で示されている政治家に関するニュース記事を考えてみる。ニュース記事に関連するので、画像は純粋に装飾的ではない。政治家がどのように見えるかを示すので、画像はいずれかのニュース記事とも完全に冗長ではない。代替テキストを提供する必要があるかどうかは、画像が本文の解釈に影響を与えるかどうかによって決定されるオーサリングの決定である。</p>

   <p>この最初の変形例において、画像はコンテキストなしで示され、かつ一切の代替テキストが提供されない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"president.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong> Ahead of today's referendum,
the President wrote an open letter to all registered voters. In it, she admitted that the country was
divided.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>画像が顔のみである場合、その画像を説明する際に値は存在しないかもしれない。個人が赤髪または金髪を持つかどうか、個人が白い肌または黒い肌を持つかどうか、個人が片目または両目を持つかどうか、読者に興味のないことである。</p>

   <p>しかし、画像がより動的である、たとえば怒る、非常に幸せ、またはひどく落ち込んだなどの政治家を示す場合、一部の代替テキストは、文章のトーンを設定する際に有用であり、そうでなければ見逃されるかもしれない：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"president.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The President is sad."</c-><c- p>></c-></strong>
Ahead of today's referendum, the President wrote an open letter to all
registered voters. In it, she admitted that the country was divided.
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"president.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The President is happy!"</c-><c- p>></c-></strong>
Ahead of today's referendum, the President wrote an open letter to all
registered voters. In it, she admitted that the country was divided.
<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

   <p>個人が"悲しい"か"幸せ"かは、段落の残りの部分の解釈に違いをもたらす。彼女は、国が分割されていることに不満を持っていると言っているのか、それとも国は分割される可能性があるという見通しは 彼女の政治的キャリアにとって適していると言っているのか？ 解釈は、画像に基づいて変化する。</p>

  </div>

  <div class="example"><p>画像がキャプションを持つ場合、代替テキストを含むことはキャプションが何を参照するかについての混乱を非ビジュアルユーザーに残すことを避ける。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Ahead of today's referendum, the President wrote an open letter to
all registered voters. In it, she admitted that the country was divided.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"president.jpeg"</c->
      <c- e>alt</c-><c- o>=</c-><c- s>"A high forehead, cheerful disposition, and dark hair round out the President's face."</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c-> The President of Ruritania. Photo © 2014 PolitiPhoto. <c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></strong></code></pre>

  </div>



  <h6 id="a-purely-decorative-image-that-doesn't-add-any-information"><span class="secno">4.8.4.4.8</span> 情報を追加しない、純粋に装飾的な画像<a href="#a-purely-decorative-image-that-doesn't-add-any-information" class="self-link"></a></h6>

  <p>画像が装飾的であるが特にページ固有でない場合―たとえばサイト全体のデザインスキームの一部を形成する画像のような―画像は、文書のマークアップでなく、サイトのCSSで指定すべきである。</p>

  <p>しかし、周囲のテキストで議論されないが、依然として一部の関連性を持つ装飾的な画像は<code id="a-purely-decorative-image-that-doesn't-add-any-information:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素を使用して、ページに含めることが可能である。そのような画像は装飾的であるが、依然としてコンテンツの一部に由来する。この場合、<code id="a-purely-decorative-image-that-doesn't-add-any-information:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性が存在しなければならないが、その値は空文字列でなければならない。</p>

  <div class="example"><p>詩を暗唱するページで、Burning Manのイベント、または詩にインスパイアされた絵画の画像についてのブログ投稿でBlack Rock Cityの風景の写真のようなものを含むものが関連するにも関わらず、画像が純粋に装飾的である例。次の断片は、（最初の詩の行のみがこの断片に含まれる）後者の場合の例を示す：</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->The Lady of Shalott<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"shalott.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></strong>
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->On either side the river lie<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
Long fields of barley and of rye,<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
That clothe the wold and meet the sky;<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
And through the field the road run by<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
To many-tower'd Camelot;<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
And up and down the people go,<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
Gazing where the lilies blow<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
Round an island there below,<c- p>&lt;</c-><c- f>br</c-><c- p>></c->
The island of Shalott.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

  </div>


  <h6 id="a-group-of-images-that-form-a-single-larger-picture-with-no-links"><span class="secno">4.8.4.4.9</span> リンクのない単一の大きな画像を形成する画像のグループ<a href="#a-group-of-images-that-form-a-single-larger-picture-with-no-links" class="self-link"></a></h6>

  <p>画像が小さな画像ファイルに分割されている場合、再度完全な画像を形成するために共に表示され、画像の1つは、全体としての絵に適するだろう関連規則に従って設定された<code id="a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を持たなければならず、残りのすべての画像は、空の<code id="a-group-of-images-that-form-a-single-larger-picture-with-no-links:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を持たなければならない。</p>

  <div class="example"><p>次の例において、<span>XYZ社</span>の会社のロゴを表す絵が2枚に分割されており、1枚目は文字"XYZ"を含み、2枚目は単語"Corp"をもつ。代替テキスト（ "XYZ Corp"）は、最初の画像ですべてである。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"logo1.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"XYZ Corp"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"logo2.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>h1</c-><c- p>></c-></code></pre>

  </div>

  <div class="example"><p>次の例において、評価は、3つの塗りつぶされた星と、2つの中抜きの星として示される。代替テキストは"★★★☆☆"かもしれないが、代わりに著者は、より親切な形式"3 out of 5"の評価を与えるようにした。これは最初の画像の代替テキストであり、残りは空白の代替テキストを持つ。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>></c->Rating: <c- p>&lt;</c-><c- f>meter</c-> <c- e>max</c-><c- o>=</c-><c- s>5</c-> <c- e>value</c-><c- o>=</c-><c- s>3</c-><c- p>></c-><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"1"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"3 out of 5"</c->
  <c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"1"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"1"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"0"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c->
  <c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"0"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c-><c- p>></c-></strong><c- p>&lt;/</c-><c- f>meter</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

  </div>



  <h6 id="a-group-of-images-that-form-a-single-larger-picture-with-links"><span class="secno">4.8.4.4.10</span> リンクのある単一の大きな画像を形成する画像のグループ<a href="#a-group-of-images-that-form-a-single-larger-picture-with-links" class="self-link"></a></h6>

  <p>一般に<a href="image-maps.html#image-map" id="a-group-of-images-that-form-a-single-larger-picture-with-links:image-map">イメージマップ</a>は、リンク用の画像をスライスする代わりに使用されるべきである。</p>

  <p>画像が確かにスライスされ、スライスされた画像のコンポーネントのいずれかがリンクの唯一のコンテンツである場合、リンクあたりの1つの画像は、リンクの目的を表す<code id="a-group-of-images-that-form-a-single-larger-picture-with-links:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性で代替テキストを持たなければならない。</p>

  <div class="example"><p>次の例において、ユーザーが冒険中の左側または右側を選ぶことができるように、異なる画像で左付属と右付属のそれぞれと、飛行スパゲッティモンスターエンブレムを表す絵である。</p>

   <pre><code class='html'><c- p>&lt;</c-><c- f>h1</c-><c- p>></c->The Church<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
<c- p>&lt;</c-><c- f>p</c-><c- p>></c->You come across a flying spaghetti monster. Which side of His
Noodliness do you wish to reach out for?<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<strong><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?go=left"</c-> <c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"fsm-left.png"</c->  <c- e>alt</c-><c- o>=</c-><c- s>"Left side. "</c-><c- p>>&lt;/</c-><c- f>a</c->
  <c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"fsm-middle.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>""</c->
  <c- p>>&lt;</c-><c- f>a</c-> <c- e>href</c-><c- o>=</c-><c- s>"?go=right"</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"fsm-right.png"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Right side."</c-><c- p>>&lt;/</c-><c- f>a</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c-></strong></code></pre>

  </div>



  <h6 id="a-key-part-of-the-content"><span class="secno">4.8.4.4.11</span> コンテンツのキーパート<a href="#a-key-part-of-the-content" class="self-link"></a></h6>

  <p>場合によっては、画像はコンテンツの重要な部分である。たとえば、これは、フォトギャラリーの一部であるページに当てはまるかもしれない。画像はその画像を含むページの全体の<em>要点</em>である。</p>

  <p>コンテンツの重要な部分である画像の代替テキストを提供する方法は、画像の出所に依存する。</p>

  <dl><dt>一般的な場合<dd><p>提供される詳細な代替テキストで可能な場合、たとえば、画像が雑誌のレビューでの一連のスクリーンショットや、漫画の一部、またはその写真に関するブログエントリーでの写真である場合、画像に対して適切に提供されるようなテキストが<code id="a-key-part-of-the-content:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性のコンテンツとして指定されなければならない。</p>

    <div class="example"><p>代替テキストを伴う、新しいOSについてのギャラリーでのスクリーンショット：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"KDE%20Light%20desktop.png"</c->
      <c- e>alt</c-><c- o>=</c-><c- s>"The desktop is blue, with icons along the left hand side in</c->
<c- s>           two columns, reading System, Home, K-Mail, etc. A window is</c->
<c- s>           open showing that menus wrap to a second line if they</c->
<c- s>           cannot fit in the window. The window has a list of icons</c->
<c- s>           along the top, with an address bar below it, a list of</c->
<c- s>           icons for tabs along the left edge, a status bar on the</c->
<c- s>           bottom, and two panes in the middle. The desktop has a bar</c->
<c- s>           at the bottom of the screen with a few buttons, a pager, a</c->
<c- s>           list of open applications, and a clock."</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Screenshot of a KDE desktop.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

    </div>

    <div class="example"><p>財務レポートのグラフ：</p>

     <pre><code class='html'><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"sales.gif"</c->
     <c- e>title</c-><c- o>=</c-><c- s>"Sales graph"</c->
     <c- e>alt</c-><c- o>=</c-><c- s>"From 1998 to 2005, sales increased by the following percentages</c->
<c- s>     with each year: 624%, 75%, 138%, 40%, 35%, 9%, 21%"</c-><c- p>></c-></strong></code></pre>

     <p>"sales graph"は、売上グラフに対する代替テキストとして不十分であることに注意する。良い<em>キャプション</em>とされるテキストは、一般に置換テキストとしては適さない。</p>

    </div>
   <dt>完全な記述を無視する画像<dd><p>ある場合において、画像の性質は、徹底した代替テキストを提供することが現実的ではないかもしれない。たとえば、画像は不鮮明であったり、複雑なフラクタルかもしれず、詳細な地形図であるかもしれない。</p>

    <p>この場合、<code id="a-key-part-of-the-content:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は、適切な代替テキストが含まれなければならないが、それはやや短いかもしれない。</p>

    <div class="example"><p>単に画像を正しく扱うことのできるテキストが存在しないのである。たとえば、ロールシャッハ・インクブロットテストを記述するための有用な言及はほとんどない。しかし、短い説明であっても、まだ何もないよりましである：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/commons/a/a7/Rorschach1.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"A shape with left-right</c->
<c- s> symmetry with indistinct edges, with a small gap in the center, two</c->
<c- s> larger gaps offset slightly from the center, with two similar gaps</c->
<c- s> under them. The outline is wider in the top half than the bottom</c->
<c- s> half, with the sides extending upwards higher than the center, and</c->
<c- s> the center extending below the sides."</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->A black outline of the first of the ten cards
 in the Rorschach inkblot test.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

     <p>以下は、代替テキストの非常に悪い用法であろうことに注意する：</p>

     <pre class="bad"><code class='html'><c- c>&lt;!-- This example is wrong. Do not copy it. --></c->
<c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"/commons/a/a7/Rorschach1.jpg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"A black outline</c->
<c- s> of the first of the ten cards in the Rorschach inkblot test."</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->A black outline of the first of the ten cards
 in the Rorschach inkblot test.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

     <p>このような代替テキストのキャプションを含むことは、実用的でない。なぜなら、一度でもキャプションを読んだり聞いたことがあった場合、2回以上助けず、画像を持たないユーザーに対してキャプションを効果的に重複するためである。</p>

    </div>

    <div class="example"><p>完全な説明を覆す画像の別の例は、定義により、詳細で無限であるフラクタルである。</p>

     <p>次の例は、マンデルブロ集合の画像の完全なビューの代替テキストを提供する1つの可能な方法を示す。</p>

     <pre><code class='html'><strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"ms1.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The Mandelbrot set appears as a cardioid with</c->
<c- s>its cusp on the real axis in the positive direction, with a smaller</c->
<c- s>bulb aligned along the same center line, touching it in the negative</c->
<c- s>direction, and with these two shapes being surrounded by smaller bulbs</c->
<c- s>of various sizes."</c-><c- p>></c-></strong></code></pre>

    </div>

    <div class="example"><p>同様に、人の顔の写真は、たとえば伝記において、コンテンツにかなり関連し、コンテンツの鍵と考えることができるが、テキストを完全に代替するのは困難である：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>section</c-> <c- e>class</c-><c- o>=</c-><c- s>"bio"</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->A Biography of Isaac Asimov<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Born <c- p>&lt;</c-><c- f>b</c-><c- p>></c->Isaak Yudovich Ozimov<c- p>&lt;/</c-><c- f>b</c-><c- p>></c-> in 1920, Isaac was a prolific author.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"headpics/asimov.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"Isaac Asimov had dark hair, a tall forehead, and wore glasses.</c->
<c- s> Later in life, he wore long white sideburns."</c-><c- p>>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->Asimov was born in Russia, and moved to the US when he was three years old.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->...<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>section</c-><c- p>></c-></code></pre>

     <p>そのような場合、そのようなテキストは、画像の存在を報告するブラウザー自体に冗長になるため、代替テキストで画像自体の存在への参照を含むことは不必要である（実際に推奨されない）。たとえば、代替テキストが"アイザック・アシモフの写真"であった場合、適合するユーザーエージェントはより有用な"（画像）アイザック・アシモフは黒い髪、長い額で、眼鏡をかけ..."よりもむしろ"（画像）アイザック・アシモフの写真"として読み上げるかもしれない。</p>

    </div>
   <dt id="unknown-images">コンテンツが未知である画像<dd><p>画像が任意の関連する代替テキストのない一部の自動化された方法で得られる（たとえばウェブカメラなど）、またはページが、ユーザーが適切なまたは有用な代替テキストを提供できない場所でのユーザーが提供する画像を使用するスクリプトによって生成されている（たとえば写真共有サイト）、または著者自身が、画像が何を表すのかを知らない（たとえばブログで画像を共有する視覚障害者の写真家）のいずれかなどの、一部の不幸な例において、使用可能な代替テキストがまったく存在しないかもしれない。</p>

    <p>そのような場合、<code id="a-key-part-of-the-content:attr-img-alt-3"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を省略してもよいが、次のいずれかの条件をさらに満たさなければならない：</p>

    <ul><li id="figcaption-as-alt-condition"><p><code id="a-key-part-of-the-content:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素は、<code id="a-key-part-of-the-content:the-figcaption-element-2"><a href="grouping-content.html#the-figcaption-element">figcaption</a></code>要素とその子孫を無視して、<a id="a-key-part-of-the-content:inter-element-whitespace" href="dom.html#inter-element-whitespace">要素間の空白文字</a>以外のコンテンツを含む<code id="a-key-part-of-the-content:the-figcaption-element"><a href="grouping-content.html#the-figcaption-element">figcaption</a></code>要素を含む<code id="a-key-part-of-the-content:the-figure-element"><a href="grouping-content.html#the-figure-element">figure</a></code>要素であり、<code id="a-key-part-of-the-content:the-figure-element-2"><a href="grouping-content.html#the-figure-element">figure</a></code>要素は、<a id="a-key-part-of-the-content:inter-element-whitespace-2" href="dom.html#inter-element-whitespace">要素間の空白文字</a>および<code id="a-key-part-of-the-content:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素以外の<a id="a-key-part-of-the-content:flow-content-2" href="dom.html#flow-content-2">フローコンテンツ</a>子孫を持たない。<li><p><code id="a-key-part-of-the-content:attr-title"><a href="dom.html#attr-title">title</a></code>属性が存在しかつ空でない値を持つ。</p>

      
      <p class="note"><code id="a-key-part-of-the-content:attr-title-2"><a href="dom.html#attr-title">title</a></code>属性に依存することは、多くのユーザーエージェントがこの仕様で要求されるようなアクセス可能な方法で属性を公開しないため、現在推奨されない（たとえば、ツールチップを出現させるマウスなどのポインティングデバイスが必要になり、これはモダンな携帯端末やタブレットをもつ人のような、キーボードのみのユーザーとタッチのみのユーザーを締め出す）。</p>
     </ul>

    <p class="note">そのような場合は最小限に保たれるべきである。実際の代替テキストを提供する能力を有する著者のわずかな可能性がある場合、<code id="a-key-part-of-the-content:attr-img-alt-4"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性の省略を許容しないだろう。</p>

    <div class="example"><p>サイトがキャプション以外のメタデータを用いて画像を受信した場合、写真共有サイトの写真は、次のようにマークアップできる：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
 <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"1100670787_6a7c664aef.jpg"</c-><c- p>></c-></strong>
 <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->Bubbles traveled everywhere with us.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>figure</c-><c- p>></c-></code></pre>

     <p>しかし、画像の重要部分の詳細な説明が、ユーザーから取得してページに含まれる場合、これはより良いだろう。</p>

    </div>

    <div class="example"><p>ユーザーが撮影した写真での視覚障害者ユーザーのブログを示す。最初に、ユーザーはショーを撮った写真の任意のアイデアを持たないかもしれない：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>article</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->I took a photo<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->I went out today and took a photo!<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
  <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"photo2.jpeg"</c-><c- p>></c-></strong>
  <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->A photograph taken blindly from my front porch.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>figure</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>article</c-><c- p>></c-></code></pre>

     <p>しかし最終的に、ユーザーは友人による画像の説明を取得するかもしれず、その場合代替テキストを含めることができる：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>article</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>h1</c-><c- p>></c->I took a photo<c- p>&lt;/</c-><c- f>h1</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>p</c-><c- p>></c->I went out today and took a photo!<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>figure</c-><c- p>></c->
  <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"photo2.jpeg"</c-> <c- e>alt</c-><c- o>=</c-><c- s>"The photograph shows my squirrel</c->
<c- s>  feeder hanging from the edge of my roof. It is half full, but there</c->
<c- s>  are no squirrels around. In the background, out-of-focus trees fill the</c->
<c- s>  shot. The feeder is made of wood with a metal grate, and it contains</c->
<c- s>  peanuts. The edge of the roof is wooden too, and is painted white</c->
<c- s>  with light blue streaks."</c-><c- p>></c-></strong>
  <c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c->A photograph taken blindly from my front porch.<c- p>&lt;/</c-><c- f>figcaption</c-><c- p>></c->
 <c- p>&lt;/</c-><c- f>figure</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>article</c-><c- p>></c-></code></pre>

    </div>

    <div class="example"><p>時として画像全体の要点は、テキストの説明が利用できず、ユーザーが説明を提供する。たとえば、CAPTCHA画像のポイントは、ユーザーが文字通りグラフィックを読むことができるかどうかを確認することにある。これはCAPTCHAをマークアップする1つの方法である（<code id="a-key-part-of-the-content:attr-title-3"><a href="dom.html#attr-title">title</a></code>属性に注目する）：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>p</c-><c- p>>&lt;</c-><c- f>label</c-><c- p>></c->What does this image say?
<strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"captcha.cgi?id=8934"</c-> <c- e>title</c-><c- o>=</c-><c- s>"CAPTCHA"</c-><c- p>></c-></strong>
<c- p>&lt;</c-><c- f>input</c-> <c- e>type</c-><c- o>=</c-><c- s>text</c-> <c- e>name</c-><c- o>=</c-><c- s>captcha</c-><c- p>>&lt;/</c-><c- f>label</c-><c- p>></c->
(If you cannot see the image, you can use an <c- p>&lt;</c-><c- f>a</c->
<c- e>href</c-><c- o>=</c-><c- s>"?audio"</c-><c- p>></c->audio<c- p>&lt;/</c-><c- f>a</c-><c- p>></c-> test instead.)<c- p>&lt;/</c-><c- f>p</c-><c- p>></c-></code></pre>

     <p>もう1つの例は、画像を表示し、正しい代替テキストをもつページを書く目的に対して正確に代替テキストを求めるソフトウェアである。そのようなページは次のように、画像のテーブルを持つことができる：</p>

     <pre><code class='html'><c- p>&lt;</c-><c- f>table</c-><c- p>></c->
 <c- p>&lt;</c-><c- f>thead</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>tr</c-><c- p>></c-> <c- p>&lt;</c-><c- f>th</c-><c- p>></c-> Image <c- p>&lt;</c-><c- f>th</c-><c- p>></c-> Description
 <c- p>&lt;</c-><c- f>tbody</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>tr</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>td</c-><c- p>></c-> <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"2421.png"</c-> <c- e>title</c-><c- o>=</c-><c- s>"Image 640 by 100, filename 'banner.gif'"</c-><c- p>></c-></strong>
   <c- p>&lt;</c-><c- f>td</c-><c- p>></c-> <c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>"alt2421"</c-><c- p>></c->
  <c- p>&lt;</c-><c- f>tr</c-><c- p>></c->
   <c- p>&lt;</c-><c- f>td</c-><c- p>></c-> <strong><c- p>&lt;</c-><c- f>img</c-> <c- e>src</c-><c- o>=</c-><c- s>"2422.png"</c-> <c- e>title</c-><c- o>=</c-><c- s>"Image 200 by 480, filename 'ad3.gif'"</c-><c- p>></c-></strong>
   <c- p>&lt;</c-><c- f>td</c-><c- p>></c-> <c- p>&lt;</c-><c- f>input</c-> <c- e>name</c-><c- o>=</c-><c- s>"alt2422"</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>table</c-><c- p>></c-></code></pre>

     <p>この例ですら、できる限り多くの有用な情報が依然として<code id="a-key-part-of-the-content:attr-title-4"><a href="dom.html#attr-title">title</a></code>属性に含まれることに注意する。</p>

    </div>

    <p class="note">一部のユーザーは、まったく画像を使用できない（たとえば、非常に低速な接続である、テキストのみのブラウザーを使用している、ハンズフリーの自動車声ウェブブラウザーで読みあげてページを聞いている、または単に目が見えない）ので、<code id="a-key-part-of-the-content:attr-img-alt-5"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は省略することが許可されるよりむしろ、上記の例のようにまったく代替テキストが利用できず、何も利用できない場合に、置換テキストを備えるのである。著者の一部による努力の欠如は、<code id="a-key-part-of-the-content:attr-img-alt-6"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性を省略するための許容可能な理由でない。</p>
   </dl>



  <h6 id="an-image-not-intended-for-the-user"><span class="secno">4.8.4.4.12</span> ユーザーを意図しない画像<a href="#an-image-not-intended-for-the-user" class="self-link"></a></h6>

  <p>一般に、著者は画像を表示する以外の目的で<code id="an-image-not-intended-for-the-user:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code>要素を使用することは避けるべきである。</p>

  <p><code id="an-image-not-intended-for-the-user:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code>要素を画像を表示する以外の目的で使用する場合、たとえば、ページビューをカウントするサービスの一部として用いる場合、<code id="an-image-not-intended-for-the-user:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は空文字列でなければならない。</p>

  <p>このような場合、<code id="an-image-not-intended-for-the-user:attr-dim-width"><a href="embedded-content-other.html#attr-dim-width">width</a></code>と<code id="an-image-not-intended-for-the-user:attr-dim-height"><a href="embedded-content-other.html#attr-dim-height">height</a></code>属性は、両方とも0に設定すべきである。</p>


  <h6 id="an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images"><span class="secno">4.8.4.3.13</span> 画像を閲覧できることが知られている特定の人のために意図された電子メールまたは私的文書における画像<a href="#an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images" class="self-link"></a></h6>

  <p><i>この節は、公にアクセス可能な、すなわち、ウェブサイト上の文書、公開メーリングリストに送信された電子メール、またはソフトウェアのドキュメントなど、対象となる読者が必ずしも個人的に著者に知られていない文書には適用されない。</i></p>

  <p>画像が、画像を見ることができることが知られている特定の人に向けた私的通信（たとえばHTML形式の電子メールなど）に含まれる場合、<code id="an-image-in-an-e-mail-or-private-document-intended-for-a-specific-person-who-is-known-to-be-able-to-view-images:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code>属性は省略されてもよい。しかし、このようなケースでさえも、著者は、（上記のエントリーで説明したように、関連する画像の種類に応じて適切に）代替テキストを含めることを強く勧める。結果として、ユーザーが画像をサポートしないメールクライアントを使用する場合、または文書が画像を簡単に見ることのできないユーザーに転送される場合、電子メールは依然として有用である。</p>




  

  <h6 id="guidance-for-markup-generators"><span class="secno">4.8.4.4.14</span> Guidance for markup generators<a href="#guidance-for-markup-generators" class="self-link"></a></h6>

  <p>Markup generators (such as WYSIWYG authoring tools) should, wherever possible, obtain alternative text from their users. However, it is recognized that in many cases, this will not be possible.</p>

  <p>For images that are the sole contents of links, markup generators should examine the link target to determine the title of the target, or the URL of the target, and use information obtained in this manner as the alternative text.</p>

  <p>For images that have captions, markup generators should use the <code id="guidance-for-markup-generators:the-figure-element"><a href="grouping-content.html#the-figure-element">figure</a></code> and <code id="guidance-for-markup-generators:the-figcaption-element"><a href="grouping-content.html#the-figcaption-element">figcaption</a></code> elements, or the <code id="guidance-for-markup-generators:attr-title"><a href="dom.html#attr-title">title</a></code> attribute, to provide the image's caption.</p>

  <p>As a last resort, implementers should either set the <code id="guidance-for-markup-generators:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute to the empty string, under the assumption that the image is a purely decorative image that doesn't add any information but is still specific to the surrounding content, or omit the <code id="guidance-for-markup-generators:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute altogether, under the assumption that the image is a key part of the content.</p>

  <p>Markup generators may specify a <dfn id="attr-img-generator-unable-to-provide-required-alt"><code>generator-unable-to-provide-required-alt</code></dfn> attribute on <code id="guidance-for-markup-generators:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> elements for which they have been unable to obtain alternative text and for which they have therefore omitted the <code id="guidance-for-markup-generators:attr-img-alt-3"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute. The value of this attribute must be the empty string. Documents containing such attributes are not conforming, but conformance checkers will <a href="#guidance-for-conformance-checkers">silently ignore</a> this error.</p>

  <p class="note">This is intended to avoid markup generators from being pressured into replacing the error of omitting the <code id="guidance-for-markup-generators:attr-img-alt-4"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute with the even more egregious error of providing phony alternative text, because state-of-the-art automated conformance checkers cannot distinguish phony alternative text from correct alternative text.</p>

  <p>Markup generators should generally avoid using the image's own filename as the alternative text. Similarly, markup generators should avoid generating alternative text from any content that will be equally available to presentation user agents (e.g., web browsers).</p>

  <p class="note">This is because once a page is generated, it will typically not be updated, whereas the browsers that later read the page can be updated by the user, therefore the browser is likely to have more up-to-date and finely-tuned heuristics than the markup generator did when generating the page.</p>

  

  

  <h6 id="guidance-for-conformance-checkers"><span class="secno">4.8.4.4.15</span> Guidance for conformance checkers<a href="#guidance-for-conformance-checkers" class="self-link"></a></h6>

  <p>A conformance checker must report the lack of an <code id="guidance-for-conformance-checkers:attr-img-alt"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute as an error unless one of the conditions listed below applies:</p>

  <ul><li><p>The <code id="guidance-for-conformance-checkers:the-img-element"><a href="embedded-content.html#the-img-element">img</a></code> element is in a <code id="guidance-for-conformance-checkers:the-figure-element"><a href="grouping-content.html#the-figure-element">figure</a></code> element that satisfies <a href="#figcaption-as-alt-condition">the conditions described above</a>.<li><p>The <code id="guidance-for-conformance-checkers:the-img-element-2"><a href="embedded-content.html#the-img-element">img</a></code> element has a <code id="guidance-for-conformance-checkers:attr-title"><a href="dom.html#attr-title">title</a></code> attribute with a value that is not the empty string (also as <a href="#unknown-images">described above</a>).<li><p>The conformance checker has been configured to assume that the document is an email or document intended for a specific person who is known to be able to view images.<li><p>The <code id="guidance-for-conformance-checkers:the-img-element-3"><a href="embedded-content.html#the-img-element">img</a></code> element has a (non-conforming) <code id="guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt"><a href="#attr-img-generator-unable-to-provide-required-alt">generator-unable-to-provide-required-alt</a></code> attribute whose value is the empty string. A conformance checker that is not reporting the lack of an <code id="guidance-for-conformance-checkers:attr-img-alt-2"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute as an error must also not report the presence of the empty <code id="guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-2"><a href="#attr-img-generator-unable-to-provide-required-alt">generator-unable-to-provide-required-alt</a></code> attribute as an error. (This case does not represent a case where the document is conforming, only that the generator could not determine appropriate alternative text — validators are not required to show an error in this case, because such an error might encourage markup generators to include bogus alternative text purely in an attempt to silence validators. Naturally, conformance checkers <em>may</em> report the lack of an <code id="guidance-for-conformance-checkers:attr-img-alt-3"><a href="embedded-content.html#attr-img-alt">alt</a></code> attribute as an error even in the presence of the <code id="guidance-for-conformance-checkers:attr-img-generator-unable-to-provide-required-alt-3"><a href="#attr-img-generator-unable-to-provide-required-alt">generator-unable-to-provide-required-alt</a></code> attribute; for example, there could be a user option to report <em>all</em> conformance errors even those that might be the more or less inevitable result of using a markup generator.)</ul>

  


  <nav><a href="embedded-content.html">← 4.8 埋め込みコンテンツ</a> — <a href="./">目次</a> — <a href="iframe-embed-object.html">4.8.5 iframe要素 →</a></nav>
